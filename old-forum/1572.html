<html><header><title>Problem with Connection Pooling?</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Problem with Connection Pooling?</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/1572.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>tcrabb posted on Tuesday, October 24, 2006</h2><P>Hi, we recently set MultipleActiveResultSets to true in our connection string as we started getting concurrency issues during load testing.&nbsp; However, this has resulted in a different error - '<SPAN><EM>ExecuteReader requires an open and available Connection. The connection's current state is open.'&nbsp; </EM>It works fine with only a couple of users, we start getting this error after about six users hitting the same server at the same time.&nbsp; We are wondering if this has anything to do with the way that the SafeDataReader handles connections to the database?&nbsp; Has anyone else experienced problems with this?</SPAN></P>
<P><SPAN>Thanks,</SPAN></P>
<P><SPAN>Toni</SPAN></P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Bayu replied on Tuesday, October 24, 2006</h2>Could you provide more information?<br><br>What DB do you use? <br>Which ADO.Net driver?<br><br>Then I'll ask my dba.<br><br>Bayu<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>tcrabb replied on Tuesday, October 24, 2006</h2><P>We are using SQL Server 2005 with a native SQLClient connection.</P>
<P>Thanks.</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Bayu replied on Tuesday, October 24, 2006</h2>The verdict here is that it is recognized as a db-related issue, i.e.: MultipleActiveResultSets should work fine and it is more likely that it has something to do with your code. <br><br>Andy's suggestion sounds more like it.<br><br>Regards,<br>Bayu<br><br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Tuesday, October 24, 2006</h2>Toni,<br><br>Sounds like you're using the connection again before you've closed a reader you've run on that connection.&nbsp; A connection can only support one open data reader at a time.&nbsp; Make sure you're properly disposing of the reader as well.. you may not be attempting to do this, but its easy to forget to dispose objects.<br><br>Andy<br></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
