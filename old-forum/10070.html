<html><header><title>BeginSave no works</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>BeginSave no works</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/10070.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>ddredstar posted on Sunday, February 13, 2011</h2><p>Has&nbsp;anybody ever encountered that BeginSave() not call <span style="font-size:x-small;font-family:Consolas;"><span style="font-size:x-small;font-family:Consolas;">DataPortal_Insert()?</span></span></p>
<p><span style="font-size:x-small;font-family:Consolas;"><span style="font-size:x-small;font-family:Consolas;">Please help me,Thanks!</span></span></p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JonnyBee replied on Monday, February 14, 2011</h2><p>BeginSave may call:</p>
<p>If &lt;bo&gt;.IsDeleted call <i><b>DataPortal_DeleteSelf</b></i><br />else If &lt;bo&gt;.IsNew call <i><b>DataPortal_Insert </b></i><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; else call <b><i>DataPortal_Update</i></b></p>
<p>So - which method is called depends on the state of your object. </p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ddredstar replied on Tuesday, February 15, 2011</h2><p>I &#39;m sure that my Ojbect.IsNew is true, Why the DataPortal_Insert not be called?</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JonnyBee replied on Tuesday, February 15, 2011</h2><p>Is the objects IsDirty and IsSavable both true? </p>
<p>&nbsp;</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ddredstar replied on Tuesday, February 15, 2011</h2><p>Both IsDirty and IsSavable are true.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JonnyBee replied on Wednesday, February 16, 2011</h2><p>Add Csla projects to your solution and debug into the csla code: </p>
<p>Possible reasons: </p>
<p>In the BusinessBase.Save method (If IsDirty is false then object is returned) :</p>
<pre style="font-family:consolas;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#cda869;">if</span>&nbsp;(IsDirty)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;result&nbsp;=&nbsp;(T)<span style="color:#7587a6;">DataPortal</span>.Update(<span style="color:#cda869;">this</span>);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#cda869;">else</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;result&nbsp;=&nbsp;(T)<span style="color:#cda869;">this</span>;<br /><br />Save might throw an exception (If this is just &quot;swallowed&quot;)<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color:#cda869;">if</span>&nbsp;(<span style="color:#cda869;">this</span>.IsChild)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#cda869;">throw</span>&nbsp;<span style="color:#cda869;">new</span>&nbsp;<span style="color:#7587a6;">InvalidOperationException</span>(<span style="color:#7587a6;">Resources</span>.NoSaveChildException);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#cda869;">if</span>&nbsp;(EditLevel&nbsp;&gt;&nbsp;<span style="color:#cf6a4c;">0</span>)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#cda869;">throw</span>&nbsp;<span style="color:#cda869;">new</span>&nbsp;<span style="color:#7587a6;">InvalidOperationException</span>(<span style="color:#7587a6;">Resources</span>.NoSaveEditingException);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#cda869;">if</span>&nbsp;(!IsValid&nbsp;&amp;&amp;&nbsp;!IsDeleted)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#cda869;">throw</span>&nbsp;<span style="color:#cda869;">new</span>&nbsp;Rules.<span style="color:#7587a6;">ValidationException</span>(<span style="color:#7587a6;">Resources</span>.NoSaveInvalidException);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#cda869;">if</span>&nbsp;(IsBusy)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#cda869;">throw</span>&nbsp;<span style="color:#cda869;">new</span>&nbsp;<span style="color:#7587a6;">InvalidOperationException</span>(<span style="color:#7587a6;">Resources</span>.BusyObjectsMayNotBeSaved);<br /><br />(Save may also throw DataPortalException if serverside code fails).<br /><br />Serverside code follows the outline in my first post.</pre>
<p>&nbsp;</p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
