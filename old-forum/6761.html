<html><header><title>CSLA 3.6 cannot have private member with identical name as inherited private member</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>CSLA 3.6 cannot have private member with identical name as inherited private member</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/6761.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>Michael posted on Wednesday, April 08, 2009</h2><font size="2" face="Arial">I have just updated to 3.6. I have a bunch of classes inheriting from my own generic base class. The generic class and the concrete classes have their own <font face="Courier New"><font color="#0000ff">private byte</font>[] m_lastChanged</font>. This is now throwing:<br><br>System.ArgumentException was unhandled by user code<br>&nbsp; Message="Item has already been added. Key in dictionary: 'm_lastChanged'&nbsp; Key being added: 'm_lastChanged'"<br><br>Renaming the member in the base class fixes the problem. Does this mean every private member variable name must be unique all the way up the inheritance tree?<br></font><br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Wednesday, April 08, 2009</h2>What is throwing this exception? N-level undo, serialization, validation?</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Michael replied on Wednesday, April 08, 2009</h2><font size="2" face="Arial"><font face="Courier New">CopyState(int parentEditLevel)</font> in <font face="Courier New">UndoableBase </font>at the call to <font face="Courier New">state.Add(h.MemberName, value);</font></font><br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Thursday, April 09, 2009</h2>That looks like a bug to me. I'm trying to trace the history of that change, but it appears that it occurred when we switched from reflection to dynamic method invocation, and somehow the full path name of the field is no longer used in the state dictionary.</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Thursday, April 09, 2009</h2><P>I believe the issue is resolved. If you can, please grab the Csla.Core.UndoableBase and Csla.Reflection.DynamicMemberHandle classes from svn and see if it solves your problem. </P>
<P>You can click the 'svn revisions' link off the bug to see the code and changes:</P>
<P><A href="http://www.lhotka.net/cslabugs/edit_bug.aspx?id=385">http://www.lhotka.net/cslabugs/edit_bug.aspx?id=385</A></P>
<P>&nbsp;</P></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
