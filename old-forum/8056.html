<html><header><title>Syncfusion WPF Grid and CSLA Linq implementation.. </title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Syncfusion WPF Grid and CSLA Linq implementation.. </h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/8056.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>Vinodonly posted on Saturday, November 28, 2009</h2>I requested a Syncfusion wpf grid sample using csla from their support team.. Databinding and other stuff seems to work but when we click on column headers which provides sorting or other filtering part then exceptions are thrown. After discussing with them I got following replies and I wanted to cross verify this thing here..<br /><br />REPLY 3 <br />=====<br />I already checked the default support for LINQ in CSLA, The LINQ providers implemented in CSLA is not proper, It is more a workaround implementation done, I have checked the implementation in reflector (ClsaQueryProvider class), It does a dynamic invocation of methods in the Enumerable class (the LINQ provider implementation for IEnumerable types thru Enumerable class). The way LINQ providers are implemented inside the .NET Framework has to be followed to make the patterns work.<br /><br />Reply 2<br />=====<br /><br />We will fix this issue once the CSLA has strong support for LINQ, If you had checked the sample you can see it clearly, there is a NullRef exception getting thrown with the CSLA Framework.<br /><br />System.NullReferenceException was unhandled<br />Message="Object reference not set to an instance of an object."<br />Source="Csla"<br />StackTrace:<br />at Csla.LinqBindingList`1.d__0.MoveNext()<br />at ConsoleApplication1.Program.Main(String[] args) in C:\Users\Fahad\Desktop\ConsoleApplication1_a571a842\ConsoleApplication1\Program.cs:line 64<br />at System.AppDomain._nExecuteAssembly(Assembly assembly, String[] args)<br />at System.AppDomain.ExecuteAssembly(String assemblyFile, Evidence assemblySecurity, String[] args)<br />at Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()<br />at System.Threading.ThreadHelper.ThreadStart_Context(Object state)<br />at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)<br />at System.Threading.ThreadHelper.ThreadStart()<br />InnerException: <br /><br />I think they have some iterator with IBindingList implemented wrongly. In the sample, we have attached the Csla.dll assembly that we currently downloaded from that website, If there is any other source code that fixes this issue, then we would use that and prepare a sample. Without the LINQ expressions getting executed, It is pretty hard to change the architecture now, and not quite possible to do so too.<br /><br />Reply 1<br />=====<br /><br />We are pretty sure that CSLA's implementation of LINQ enuemrators are causing exceptions. You can check out the sample that we have already posted, If you look at the foreach statement in this below code (from the sample),<br /><br />var orders = new Order();<br />var sortByName = orders.AsQueryable().OrderBy("Name");<br />foreach (DataEdit o in sortByName)<br />{<br />Console.WriteLine("{0} - Name", o.Name);<br />}<br /><br />Console.ReadKey(true);<br /><br />It throws an exception with some CSLABindingList enumerator. I am pretty sure that the implementation of OrderBy clause for all IQuerable extensions is not implemented properly. We cannot proceed further if there an issue with this other ORM framework, also, we do not intend to change the LINQ based approach. <br /><br />We also dynamically generate LINQ expressions for any IEnumerable or IQueryable, In the sample we have some extension methods copied over from our library for testing. Let us know your results on testing CSLA with LINQ.<br /></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Saturday, November 28, 2009</h2><P>This may have to do with L2C. </P>
<P>But with other datagrid controls the issue is not about L2C, it is about the fact that WPF doesn't really like IBindingList, which is the current base of CSLA collection types. This issue has been discussed at substantial length in a couple other threads, and is perhaps the biggest breaking change I'll be making in version 4.0 - to change the collection types all over to ObservableCollection&lt;T&gt; as a base so they work correctly with WPF.</P>
<P>(I say 'breaking change', but in reality it should only break Windows Forms users - everyone else should (generally speaking) find that their code keeps working unless they are manually interacting with the IBindingList base interface)</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Vinodonly replied on Sunday, November 29, 2009</h2>Actually I'm using mix of wpf and winforms..<br /><br />does this means that csla 4.0 onwards will not work for winforms or will there be a alternative to support both..</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Sunday, November 29, 2009</h2>I suppose I need to add this to the FAQ, since the answer is buried in other<br />threads.<br /><br />CSLA .NET 1.x to 3.x supported Windows Forms directly through the base<br />collection types. CSLA .NET 3.x partially supported WPF, but WPF requires a<br />different collection base class for full support, so there's no way to fully<br />support both Windows Forms and WPF.<br /><br />CSLA .NET 4.0 will fully support WPF through the base collection types. This<br />means the base collection types won't work well with Windows Forms. I plan<br />to copy the 3.8 base collection types to the Csla.Windows namespace (or just<br />rename them) so Windows Forms will continue to be fully supported - you just<br />need to pick the correct base collection types depending on whether you are<br />using Windows Forms or not.<br /><br />CSLA .NET for Silverlight already uses the correct base class for the base<br />collection types, so you can look there to see what CSLA .NET 4.0 will look<br />like. The SL types offer almost complete backward compatibility, but work<br />with XAML binding, not Windows Forms binding.</div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
