<html><header><title>NT Groups and Security...</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>NT Groups and Security...</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/6617.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>vbkevin posted on Tuesday, March 17, 2009</h2>I have read through several articles and most of the book.&nbsp; I am working on a windows app that will use csla.net 3.6.&nbsp; I would like to use NT Groups to dictate within the app what the user can and can not do.&nbsp; By doing this I should be able to completely bypass the Security DB.&nbsp; So far I am not seeing this built into the application or am I missing something.&nbsp; Thanks.<br><br>This is done within the app before the call.<br>&nbsp;&nbsp; AppDomain.CurrentDomain.SetPrincipalPolicy(PrincipalPolicy.WindowsPrincipal);<br><br><br>I would like to be able to do this... where "S-App-COFSNonMon" is an NT group that current user is a member of. But.. when I do this the logged in user gets a pass .. weather the user is member of that group or not. <br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Csla.Security.AuthorizationRules.AllowGet(typeof(NonMonItems), "S-APP-COFSNonMon");<br><br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JoeFallon1 replied on Tuesday, March 17, 2009</h2><P>I think that if you want to use Windows Security you have to use the Principal "as is".</P>
<P>If you want to do anything else then you should use a custom Principal. Maybe you can fetch the Windows Principal&nbsp;and extract some information from it to load your custom Principal. </P>
<P>Or you can write code to query the data store directly. Bottom line - you need to load the right set of roles and permissions for a given user and there are various ways you can accomplish that task.</P>
<P>Joe</P>
<P>&nbsp;</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>vbkevin replied on Wednesday, March 18, 2009</h2>Thank you for you help... that is exactly what I did.&nbsp; I modified PTPrincipal and PTIdentity to hit AD to get the groups for the current user and gather user info... worked well. No DB interaction. Thanks.&nbsp; Happy to share code if anyone is looking for this.<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>whelzer replied on Wednesday, March 18, 2009</h2>Kevin,<br><br>I'd be interested in the code,&nbsp; we currently use a custom principal but a forthcoming project may need to hook into AD groups.<br><br>Thanks<br><br>Paul<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JoeFallon1 replied on Thursday, March 19, 2009</h2><P>I would like to see the code to fetch AD roles too. Just out of curiosity.</P>
<P>Joe</P>
<P>&nbsp;</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JohnB replied on Thursday, March 19, 2009</h2>Everyone,<br><br>I decided to put something together to share. This is a very simple demo done in VB with CSLA 3.0.4.<br><br>It's ready to go for anyone who needs it. If you have any questions I'll be happy to help if I can.<br><br>Oh yeah, and VS 2008.<br><br>John<br><br>Sorry, when edited it dropped the attachment. It's back.<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JoeFallon1 replied on Friday, March 20, 2009</h2><P>Thanks.</P>
<P>Very interesting.</P>
<P>Note: downloaders need to re-reference Csla.dll before compiling.</P>
<P>Joe</P>
<P>&nbsp;</P></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
