<html><header><title>E-books Sample: Help me get it working!!</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>E-books Sample: Help me get it working!!</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/10748.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>jh72i posted on Friday, October 07, 2011</h2><p>Every day a new problem making every day damn frustrating at the moment and the chance of making deadlines more and more unlikely. </p>
<p>Today i have hit the &quot;Remote Server returned and error NotFound&quot; exception when trying to get credential sharing between a SL client and a backend. I have downloaded and run Rocky&#39;s sample: 04-DataPortal-110504\Authentication\Windows\Windows.sln and simply cannot figure out how to get it to run properly.</p>
<p>I can get it to <em>run</em> if i remove the following section from the config file:<br /><span style="font-family:Courier New;color:#0000ff;font-size:xx-small;"><span style="font-family:Courier New;color:#0000ff;font-size:xx-small;"><span style="font-family:Courier New;color:#0000ff;font-size:xx-small;">&lt;</span></span></span><span style="font-family:Courier New;color:#a31515;font-size:xx-small;"><span style="font-family:Courier New;color:#a31515;font-size:xx-small;"><span style="font-family:Courier New;color:#a31515;font-size:xx-small;">security</span></span></span><span style="font-family:Courier New;color:#0000ff;font-size:xx-small;"><span style="font-family:Courier New;color:#0000ff;font-size:xx-small;"><span style="font-family:Courier New;color:#0000ff;font-size:xx-small;"> </span></span></span><span style="font-family:Courier New;color:#ff0000;font-size:xx-small;"><span style="font-family:Courier New;color:#ff0000;font-size:xx-small;"><span style="font-family:Courier New;color:#ff0000;font-size:xx-small;">mode</span></span></span><span style="font-family:Courier New;color:#0000ff;font-size:xx-small;"><span style="font-family:Courier New;color:#0000ff;font-size:xx-small;"><span style="font-family:Courier New;color:#0000ff;font-size:xx-small;">=</span></span></span><span style="font-family:Courier New;font-size:xx-small;"><span style="font-family:Courier New;font-size:xx-small;">&quot;</span></span><span style="font-family:Courier New;color:#0000ff;font-size:xx-small;"><span style="font-family:Courier New;color:#0000ff;font-size:xx-small;"><span style="font-family:Courier New;color:#0000ff;font-size:xx-small;">TransportCredentialOnly</span></span></span><span style="font-family:Courier New;font-size:xx-small;"><span style="font-family:Courier New;font-size:xx-small;">&quot;</span></span><span style="font-family:Courier New;color:#0000ff;font-size:xx-small;"><span style="font-family:Courier New;color:#0000ff;font-size:xx-small;"><span style="font-family:Courier New;color:#0000ff;font-size:xx-small;">&gt;<br />&lt;</span></span></span><span style="font-family:Courier New;color:#a31515;font-size:xx-small;"><span style="font-family:Courier New;color:#a31515;font-size:xx-small;"><span style="font-family:Courier New;color:#a31515;font-size:xx-small;">transport</span></span></span><span style="font-family:Courier New;color:#0000ff;font-size:xx-small;"><span style="font-family:Courier New;color:#0000ff;font-size:xx-small;"><span style="font-family:Courier New;color:#0000ff;font-size:xx-small;"> </span></span></span><span style="font-family:Courier New;color:#ff0000;font-size:xx-small;"><span style="font-family:Courier New;color:#ff0000;font-size:xx-small;"><span style="font-family:Courier New;color:#ff0000;font-size:xx-small;">clientCredentialType</span></span></span><span style="font-family:Courier New;color:#0000ff;font-size:xx-small;"><span style="font-family:Courier New;color:#0000ff;font-size:xx-small;"><span style="font-family:Courier New;color:#0000ff;font-size:xx-small;">=</span></span></span><span style="font-family:Courier New;font-size:xx-small;"><span style="font-family:Courier New;font-size:xx-small;">&quot;</span></span><span style="font-family:Courier New;color:#0000ff;font-size:xx-small;"><span style="font-family:Courier New;color:#0000ff;font-size:xx-small;"><span style="font-family:Courier New;color:#0000ff;font-size:xx-small;">Windows</span></span></span><span style="font-family:Courier New;font-size:xx-small;"><span style="font-family:Courier New;font-size:xx-small;">&quot;</span></span><span style="font-family:Courier New;color:#0000ff;font-size:xx-small;"><span style="font-family:Courier New;color:#0000ff;font-size:xx-small;"><span style="font-family:Courier New;color:#0000ff;font-size:xx-small;"> /&gt;&lt;/</span></span></span><span style="font-family:Courier New;color:#a31515;font-size:xx-small;"><span style="font-family:Courier New;color:#a31515;font-size:xx-small;"><span style="font-family:Courier New;color:#a31515;font-size:xx-small;">security</span></span></span><span style="font-family:Courier New;color:#0000ff;font-size:xx-small;"><span style="font-family:Courier New;color:#0000ff;font-size:xx-small;"><span style="font-family:Courier New;color:#0000ff;font-size:xx-small;">&gt;<br /><br />I&#39;m dealing with a lot of new technologies and approaches at the moment so please appreciate i am no expert in any of this. I need to get a bunch of things working first and come back and figure them all out later!</span></span></span></p>
<p><span style="font-family:Courier New;color:#0000ff;font-size:xx-small;">What do i have to do to get this sample to just work.</span></p>
<p><span style="font-family:Courier New;color:#0000ff;font-size:xx-small;">Thank you</span></p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>jh72i replied on Friday, October 07, 2011</h2>The error:

{: The remote server returned an error: NotFound.
   at System.ServiceModel.AsyncResult.End[TAsyncResult](IAsyncResult result)
   at System.ServiceModel.Channels.ServiceChannel.EndCall(String action, Object[] outs, IAsyncResult result)
   at System.ServiceModel.ClientBase`1.ChannelBase`1.EndInvoke(String methodName, Object[] args, IAsyncResult result)
   at Csla.WcfPortal.WcfPortalClient.WcfPortalClientChannel.EndFetch(IAsyncResult result)
   at Csla.WcfPortal.WcfPortalClient.Csla.WcfPortal.IWcfPortal.EndFetch(IAsyncResult result)
   at Csla.WcfPortal.WcfPortalClient.OnEndFetch(IAsyncResult result)
   at System.ServiceModel.ClientBase`1.OnAsyncCallCompleted(IAsyncResult result)
: The remote server returned an error: NotFound.
   at System.Net.Browser.AsyncHelper.BeginOnUI(SendOrPostCallback beginMethod, Object state)
   at System.Net.Browser.BrowserHttpWebRequest.EndGetResponse(IAsyncResult asyncResult)
   at System.ServiceModel.Channels.HttpChannelFactory.HttpRequestChannel.HttpChannelAsyncRequest.CompleteGetResponse(IAsyncResult result)
: The remote server returned an error: NotFound.
   at System.Net.Browser.BrowserHttpWebRequest.InternalEndGetResponse(IAsyncResult asyncResult)
   at System.Net.Browser.BrowserHttpWebRequest.&lt;&gt;c__DisplayClass5.b__4(Object sendState)
   at System.Net.Browser.AsyncHelper.&lt;&gt;c__DisplayClass2.b__0(Object sendState)
}
    [Csla.DataPortalException]: {: The remote server returned an error: NotFound.
   at System.ServiceModel.AsyncResult.End[TAsyncResult](IAsyncResult result)
   at System.ServiceModel.Channels.ServiceChannel.EndCall(String action, Object[] outs, IAsyncResult result)
   at System.ServiceModel.ClientBase`1.ChannelBase`1.EndInvoke(String methodName, Object[] args, IAsyncResult result)
   at Csla.WcfPortal.WcfPortalClient.WcfPortalClientChannel.EndFetch(IAsyncResult result)
   at Csla.WcfPortal.WcfPortalClient.Csla.WcfPortal.IWcfPortal.EndFetch(IAsyncResult result)
   at Csla.WcfPortal.WcfPortalClient.OnEndFetch(IAsyncResult result)
   at System.ServiceModel.ClientBase`1.OnAsyncCallCompleted(IAsyncResult result)
: The remote server returned an error: NotFound.
   at System.Net.Browser.AsyncHelper.BeginOnUI(SendOrPostCallback beginMethod, Object state)
   at System.Net.Browser.BrowserHttpWebRequest.EndGetResponse(IAsyncResult asyncResult)
   at System.ServiceModel.Channels.HttpChannelFactory.HttpRequestChannel.HttpChannelAsyncRequest.CompleteGetResponse(IAsyncResult result)
: The remote server returned an error: NotFound.
   at System.Net.Browser.BrowserHttpWebRequest.InternalEndGetResponse(IAsyncResult asyncResult)
   at System.Net.Browser.BrowserHttpWebRequest.&lt;&gt;c__DisplayClass5.b__4(Object sendState)
   at System.Net.Browser.AsyncHelper.&lt;&gt;c__DisplayClass2.b__0(Object sendState)
}
    Data: {System.Collections.ListDictionaryInternal}
    InnerException: null
    Message: &quot;The remote server returned an error: NotFound.&quot;
    StackTrace: null
</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Monday, October 10, 2011</h2><p>The &quot;NotFound&quot; exception is (sadly) useless. It just means that WCF couldn&#39;t wire up the client&#39;s call to a service. It usually does mean your call isn&#39;t getting to any of your server-side code, and often indicates a server-side configuration or assembly reference issue. Sometimes you can use fiddler or WCF tracing to get more information.</p>
<p>To put it bluntly: WCF security is a b*tch.</p>
<p>The number of moving parts and configuration options/issues are vast.</p>
<p>You can start by putting an aspx page into your web site, and on that page display the information from the current principal. That can often help diagnose errors with the server-side security configuration. Basically, before you can do anything on the client, you have to get IIS and ASP.NET configured to require Windows authentication and to do impersonation. This is easier to debug in aspx than in an svc.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>jh72i replied on Wednesday, October 12, 2011</h2>Thanks for the replies folks. Been in hospital since the weekend with my brand new baby boy so not advanced any on this problem
 &amp; funnily enough it has somehow lost it&#39;s importance in my priority list :-)

 it will of course move back up when the need to get paid kicks in.

Rocky can you get working on Csla90 for my boy should he be crazy enough to choose software as a career. If such a thing exists in 2030 :-)</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Wednesday, October 12, 2011</h2><p><div style='padding-left: 50px;background-color:silver'><b>jh72i<br></b>Rocky can you get working on Csla90 for my boy should he be crazy enough to choose software as a career. If such a thing exists in 2030 :-)
<div style="CLEAR:both;"></div>
</div></p>
<p>I&#39;ll get right on that :)</p>
<p>Congratulations on the new baby, that&#39;s great news!</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>jh72i replied on Monday, October 17, 2011</h2><p>Thanks for the congrats Rocky - I&#39;m pretty sure I have read that you are a dad too so you&#39;ll understand my <em>emotional state </em>at present. <br /><br />And thanks to both fo you for the steers about the notfound exception. I probably wasn&#39;t thinking straight before but my head is clear now and within 5 minutes of sitting at my desk i managed to sort out the problem. Well, for now at least. <br />I looked at the IISExpress applicationhost.config file and enabled the WindowsAuthentication flag. That gets rid of the NotFound exception and I can see my security info travel to&nbsp;my dataportal_xyz methods. I have a suspicion that this probably isn&#39;t the ultimate solution but it allows me to get through this roadblock for now so, again, thank you both.</p>
<p>&nbsp;&lt;security&gt;<br />&nbsp;&lt;authentication&gt;<br />&nbsp;&nbsp;&lt;windowsAuthentication enabled=&quot;true&quot;&gt;<br />&nbsp;&nbsp;&nbsp;&lt;providers&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&lt;add value=&quot;Negotiate&quot; /&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&lt;add value=&quot;NTLM&quot; /&gt;<br />&nbsp;&nbsp;&nbsp;&lt;/providers&gt;<br />&nbsp;&nbsp;&lt;/windowsAuthentication&gt;<br />&nbsp;&lt;/authentication&gt;</p>
<p>&nbsp;</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>TSF replied on Monday, October 10, 2011</h2><p>I&#39;ve recently had to get an SL4 app working with Windows/AD security and it did take <em>a lot</em> of work to figure out the right combination of settings on IIS and within the config file.&nbsp; In my case, I found it helpful first of all to browse to the service address and see if my browser could reach it.&nbsp; If I wasn&#39;t able to do that, I wouldn&#39;t bother with the app.&nbsp; That may or may not be the right way to do it, but that is how I approached it.</p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
