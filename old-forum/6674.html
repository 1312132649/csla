<html><header><title>BusinessListBase member variables not making jump to server (3.6.1)</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>BusinessListBase member variables not making jump to server (3.6.1)</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/6674.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>TheEld posted on Wednesday, March 25, 2009</h2><P>I have a standard&nbsp;BusinessListBase class that needs to carry some private data given to it by the client app in the factory method.&nbsp; I then need this data during the DataPortal_Fetch() and DataPortal_Update() methods.&nbsp; Something like below...</P>
<P>When using LocalPortal it all works (no big surprise).&nbsp; But when using the&nbsp;WcfPortal the 2 Guids are always Guid.Empty (Default value for a Guid) in the DataPortal methods being executed remotley.&nbsp; I'm sure this is something stupid that the book explains perfectly well, but I can't find it.</P>
<P>&nbsp;</P>
<P>THANKS FOR YOUR HELP IN ADVANCE</P>
<P><FONT color=#ffffff size=2><FONT color=#ffffff size=2>&nbsp;</P></FONT></FONT>
<P dir=ltr><FONT face="Courier New" size=2>[Serializable] public class SystemList : BusinessListBase&lt;SystemList, System&gt;<BR>{<BR>&nbsp;&nbsp;&nbsp; private static Guid _UserUH;<BR>&nbsp;&nbsp;&nbsp; private static Guid _CompanyUH;<BR></FONT><FONT face="Courier New" size=2></FONT></P>
<P dir=ltr><FONT face="Courier New" size=2>&nbsp;&nbsp;&nbsp; public static SystemList GetSystemList(Guid UserUH, Guid CompanyUH, Guid UH)<BR>&nbsp;&nbsp;&nbsp;&nbsp;{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; _UserUH&nbsp;&nbsp;&nbsp; = UserUH;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; _CompanyUH = CompanyUH;</FONT></P>
<P dir=ltr><FONT face="Courier New" size=2>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return DataPortal.Fetch&lt;SystemList&gt;(new SingleCriteria&lt;SystemList, Guid&gt;(UH));<BR>&nbsp;&nbsp;&nbsp;&nbsp;}</FONT></P>
<P><FONT face="Courier New" size=2></FONT>&nbsp;</P>
<P><FONT face="Courier New" size=2>&nbsp;&nbsp; private void DataPortal_Fetch(SingleCriteria&lt;SystemList, Guid&gt; Criteria)&nbsp;</FONT></P>
<P><FONT face="Courier New" size=2>&nbsp;&nbsp; {</FONT></P>
<P>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;<FONT face="Courier New" size=2>Access to _UserUH &amp; _CompanyUH</FONT></P>
<P><FONT face="Courier New" size=2>&nbsp;&nbsp;&nbsp;}</FONT></P>
<P><FONT face="Courier New" size=2></FONT>&nbsp;</P>
<P><FONT face="Courier New" size=2>&nbsp;&nbsp;&nbsp; protected override void DataPortal_Update()<BR>&nbsp;&nbsp;&nbsp; {<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <FONT face="Courier New" size=2>Access to _UserUH &amp; _CompanyUH</FONT></P>
<P><FONT face="Courier New" size=2>&nbsp;&nbsp;&nbsp; }</FONT></P>
<P>}</P>
<P></FONT><FONT face="Courier New" size=2>&nbsp;</P></FONT></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JoeFallon1 replied on Wednesday, March 25, 2009</h2>The only way to get data to the other side of the dataportal is to include it in the Criteria object. You are using SingleCriteria for convenience but in this case you need to build your own SystemCriteria class that takes 3 values in its constructor: <br />guid<br />userUH<br />companyUH<br /><br />Then you pass an instance of your SystemCriteria instead of SingleCriteria. Be sure to adjust the signture of Fetch to expect the new type. Then you will have all 3 values available on the other side of the portal.<br /><br />Joe<br /><br />PS - A command Object passes itself through the portal so defining fields on it works for both sides of the portal. But that is a unique type and not the norm.<br /></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>TheEld replied on Thursday, March 26, 2009</h2><P>Thanks for your answer.&nbsp; I can see where that would work for the Fetch.&nbsp; But I also need the data available on the&nbsp;other side in DataPortal_Update() which takes no paramaters at all.</P>
<P>&nbsp;</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>rsbaker0 replied on Thursday, March 26, 2009</h2><P>Again, why are these two fields declared as static?&nbsp;</P>
<P>If they were non-static member variables, they should be serialized across with your update (at least until you get into scenarios that require managed properties or your own serialization-assistance code like Silverlight).</P>
<P>&nbsp;</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>rsbaker0 replied on Wednesday, March 25, 2009</h2><P>I'd think the problem in this particular case is that the member variables in question are declared "static". I don't think static data ever gets serialized with an object instance.</P>
<P>&nbsp;</P></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
