<html><header><title>How to use DataPortal.Create with paramenters</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>How to use DataPortal.Create with paramenters</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/2230.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>edika2000 posted on Monday, January 29, 2007</h2>There is a way to pass a parameters to the DataPortal.Create method?<br>I need to pass a value from the parent to initialize a child business object.<br><br>public void MyObject NewOne(string parentvalue)<br>{<br>&nbsp;&nbsp;&nbsp; return DataPortal.Create&lt;MyObject&gt;(parentvalue)<br>}<br><br>protected override void DataPortal_Create(parentvalue)<br>{<br>&nbsp;&nbsp;&nbsp; ValidationRules.CheckRules();<br>&nbsp;&nbsp;&nbsp; MarkAsChild();<br>&nbsp;&nbsp;&nbsp; _mylocalvalue=parentvalue;<br>}<br><br><br>I've tried also using the criteria object but not work.<br>Anyone have suggestion?<br>Thanks<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>SonOfPirate replied on Monday, January 29, 2007</h2><P>The expected method is to use the Criteria&nbsp;object.&nbsp; You would define your own object inheriting from CriteriaBase that includes properties for whatever parameters you need to pass.&nbsp; In the DataPortal_Create(object criteria) method, you'll cast the criteria object to your type and access the properties.</P>
<P>Here's an example of how you'd do this:</P>
<P><CODE>public void MyObject NewOne(string parentValue)<BR>{<BR>&nbsp; &nbsp; return DataPortal.Create&lt;MyObject&gt;(new MyCriteria(parentValue));<BR>}<BR>&nbsp; &nbsp; <BR>protected override void DataPortal_Create(object criteria)<BR>{<BR>&nbsp; &nbsp; string parentValue&nbsp;= ((MyCriteria)criteria).ParentValue;<BR>&nbsp; &nbsp; // Rest of code<BR>}<BR></CODE></P>
<P>HTH</P>
<P>&nbsp;</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>William replied on Monday, January 29, 2007</h2><P>You can pass the criteria object to your DataPortal_Create(). However, there is no overridable DataPortal_Create(object criteria). Instead, the framework will search for a method of name DataPortal_Create(Criteria cri), which takes an argument.</P>
<P><FONT face="Courier New" size=2>[Serializable]<BR>public class MyObject<BR>{<BR>&nbsp; [Serializable]<BR>&nbsp; private class Criteria<BR>&nbsp; {<BR>&nbsp;&nbsp;&nbsp; public readonly string ParentValue;<BR><BR>&nbsp;&nbsp;&nbsp; public Criteria(string parentValue)<BR>&nbsp;&nbsp;&nbsp; {<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; this.ParentValue = parentValue;<BR>&nbsp;&nbsp;&nbsp; }<BR>&nbsp; }<BR><BR>&nbsp; private string _parentValue;<BR><BR>&nbsp; public static MyObject NewMyObject(string parentValue)<BR>&nbsp; {<BR>&nbsp;&nbsp;&nbsp; return DataPortal.Create&lt;MyObject&gt;(<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; new Criteria(parentValue));<BR>&nbsp; }<BR><BR>&nbsp; private void DataPortal_Create(Criteria cri)<BR>&nbsp; {<BR>&nbsp;&nbsp;&nbsp;&nbsp;_parentValue = cri.ParentValue;<BR>&nbsp;&nbsp;&nbsp; ...<BR>&nbsp; }<BR>}</FONT></P>
<P>Hope this helps.</P>
<P>Regards,<BR>William</P>
<P>&nbsp;</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>edika2000 replied on Monday, January 29, 2007</h2>Thanks William, <br>for this hint. I've spend day's searching for an alternative solution.<br><br>Thank you very much<br><br>Edika<br><br><br><br><br><br></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
