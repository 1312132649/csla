<html><header><title>Async_ExceptionOccurred after minute+ of waiting - how to diagnose / what causes it?</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Async_ExceptionOccurred after minute+ of waiting - how to diagnose / what causes it?</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/11088.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>skagen00 posted on Wednesday, January 25, 2012</h2><p>Have a nasty problem that manifests for exactly one user to-date - doesn&#39;t happen when they login via another PC.&nbsp; I would love any pointers as to where I should take my diagnosing efforts.&nbsp; It&#39;s a production site and I don&#39;t have an easy ability to throw in a lot of diagnostic code.</p>
<p>Have not seen this error anywhere else in the application.</p>
<p>This is an out-of-browser CSLA Silverlight app.</p>
<p>Is there something I should be looking for with Async_ExceptionOccurred?&nbsp;</p>
<p>**The error message doesn&#39;t come up for a good minute+ **&nbsp;</p>
<p>It&#39;s never executing the callback method - it gets to this call we&#39;re pretty sure.</p>
<p>&nbsp;</p>
<p><span style="font-family:Consolas;color:#2b91af;font-size:x-small;"><span style="font-family:Consolas;color:#2b91af;font-size:x-small;"><span style="font-family:Consolas;color:#2b91af;font-size:x-small;"><span style="font-family:Consolas;color:#2b91af;font-size:x-small;"><span style="font-family:Consolas;color:#2b91af;font-size:x-small;"><span style="font-family:Consolas;color:#2b91af;font-size:x-small;"><span style="font-family:Consolas;color:#2b91af;font-size:x-small;"><span style="font-family:Consolas;color:#2b91af;font-size:x-small;"><span style="font-family:Consolas;color:#2b91af;font-size:x-small;"><span style="font-family:Consolas;color:#2b91af;font-size:x-small;"><span style="font-family:Consolas;color:#2b91af;font-size:x-small;"><span style="font-family:Consolas;color:#2b91af;font-size:x-small;"><span style="font-family:Consolas;color:#2b91af;font-size:x-small;"><span style="font-family:Consolas;color:#2b91af;font-size:x-small;"><span style="font-family:Consolas;color:#2b91af;font-size:x-small;"><span style="font-family:Consolas;color:#2b91af;font-size:x-small;"><span style="font-family:Consolas;color:#2b91af;font-size:x-small;"><span style="font-family:Consolas;color:#2b91af;font-size:x-small;"><span style="font-family:Consolas;color:#2b91af;font-size:x-small;"><span style="font-family:Consolas;color:#2b91af;font-size:x-small;"><span style="font-family:Consolas;color:#2b91af;font-size:x-small;"><span style="font-family:Consolas;color:#2b91af;font-size:x-small;"><span style="font-family:Consolas;color:#2b91af;font-size:x-small;"><span style="font-family:Consolas;color:#2b91af;font-size:x-small;">
<p>&nbsp;</p>
</span></span></span></span></span></span></span></span></span></span></span></span></span><span style="font-family:Consolas;color:#2b91af;font-size:x-small;"><span style="font-family:Consolas;color:#2b91af;font-size:x-small;"><span style="font-family:Consolas;color:#2b91af;font-size:x-small;"><span style="font-family:Consolas;color:#2b91af;font-size:x-small;"><span style="font-family:Consolas;color:#2b91af;font-size:x-small;"><span style="font-family:Consolas;color:#2b91af;font-size:x-small;"><span style="font-family:Consolas;color:#2b91af;font-size:x-small;"><span style="font-family:Consolas;color:#2b91af;font-size:x-small;"><span style="font-family:Consolas;color:#2b91af;font-size:x-small;"><span style="font-family:Consolas;color:#2b91af;font-size:x-small;"><span style="font-family:Consolas;color:#2b91af;font-size:x-small;">
<p>&nbsp;</p>
</span></span></span></span></span></span></span></span></span></span></span></span><span style="font-family:Consolas;color:#2b91af;font-size:x-small;"><span style="font-family:Consolas;color:#2b91af;font-size:x-small;"><span style="font-family:Consolas;color:#2b91af;font-size:x-small;"><span style="font-family:Consolas;color:#2b91af;font-size:x-small;"><span style="font-family:Consolas;color:#2b91af;font-size:x-small;"><span style="font-family:Consolas;color:#2b91af;font-size:x-small;"><span style="font-family:Consolas;color:#2b91af;font-size:x-small;"><span style="font-family:Consolas;color:#2b91af;font-size:x-small;"><span style="font-family:Consolas;color:#2b91af;font-size:x-small;"><span style="font-family:Consolas;color:#2b91af;font-size:x-small;">
<p>&nbsp;</p>
</span></span></span></span></span></span></span></span></span></span></span>
<p>&nbsp;</p>
</span></span></span></span></span></span></span></span></span><span style="font-family:Consolas;"><span style="font-family:Consolas;">CompanyPrincipal.Login(clientTextBox.Text, loginTextBox.Text, passwordTextBox.Password, (o1, e1) =&gt; { ** this code&nbsp;never gets&nbsp;executed** });</span></span></p>
<p>&nbsp;CompanyIdentity&nbsp;inherits CslaIdentityBase and CompanyPrincipal inherits CslaPrincipal.&nbsp;</p>
<p>CompanyPrincipal.Login() looks like:&nbsp;</p>
<p><span style="font-family:Consolas;color:#808080;font-size:x-small;"><span style="font-family:Consolas;color:#808080;font-size:x-small;"><span style="font-family:Consolas;color:#808080;font-size:x-small;">
<p>public static void Login(string clientId, string userId, string password, EventHandler&lt;EventArgs&gt; completed)</p>
<p>{</p>
<p>&nbsp;&nbsp; CompanyIdentity.GetIdentity(clientId, userId.ToUpper(), password, (o, e) =&gt;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (e.Error != null)</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; SetPrincipal(CompanyIdentity.UnauthenticatedIdentity());</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; throw e.Error;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</p>
</span></span></span></p>
<p><span style="font-family:Consolas;font-size:x-small;"><span style="font-family:Consolas;font-size:x-small;"></span></span><span style="font-family:Consolas;color:#808080;font-size:x-small;"><span style="font-family:Consolas;color:#808080;font-size:x-small;"><span style="font-family:Consolas;color:#808080;font-size:x-small;">
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; SetPrincipal(e.Object);</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; completed(null, EventArgs.Empty);</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; });</p>
<p>}</p>
</span></span></span></p>
<p>&nbsp;</p>
<p>EXCEPTION OCCURRED<br />[Async_ExceptionOccurred]<br />Arguments:<br />Debugging resource strings are unavailable.&nbsp; Often the key and<br />arguments provide sufficient information to diagnose the<br />problem.&nbsp; See http://go.microsoft.com/fwlink/?linkid=106663&amp;Version=5.0.61118.00&amp;File=System.dll&amp;Key=Async_ExceptionOccurred<br />Log Details: Logging the error failed.<br />Exception Details: [Async_ExceptionOccurred]<br />Arguments:<br />Debugging resource strings are unavailable. Often the key and<br />arguments provide sufficient information to diagnose the<br />problem.&nbsp; See <a href="http://go.microsoft.com/fwlink/?linkid=106663&amp;Version=5.0.61118.00&amp;File=System.dll&amp;Key=Async_ExceptionOccurred">http://go.microsoft.com/fwlink/?linkid=106663&amp;Version=5.0.61118.00&amp;File=System.dll&amp;Key=Async_ExceptionOccurred</a></p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Wednesday, January 25, 2012</h2><p>It might be a timeout issue in the WCF client code. One thing you might be able to do is turn on WCF trace logging so you can see if WCF successfully round-trips the data portal call, or if the server just never responds.</p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
