<html><header><title>Csla.Linq Sum bug</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Csla.Linq Sum bug</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/8403.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>jureleskovec posted on Monday, January 25, 2010</h2>Sum doesn't work for the 'decimal?' (nullable decimal) type. It throws error that it can't convert decimal? to Int32:<br><br>decimal? sum = invoiceItems.Sum(ii =&gt; i.Ammount);&nbsp; // Ammount is 'decimal?'<br><br>-- Jure<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>richardb replied on Monday, January 25, 2010</h2><P>You might be able to use the GetValueOrDefault property on the decimal type, which will return zero if it is null.</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>AaronErickson replied on Monday, January 25, 2010</h2>In the short term, the best thing you can probably do is use the static alternative:<br><br>var sum = Enumerable.Sum(invoiceItems, i =&gt; i.Amount);<br><br>There is an issue that affected certain older versions of the framework that was picking the wrong overload of Enumerable in the L2C logic.&nbsp; Most of those issues have been fixed in various releases up to 3.8.&nbsp; Do you have a version number of the framework you are working with?<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>jureleskovec replied on Monday, January 25, 2010</h2>Oh, yes. The version is 3.6.2.<br><br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>AaronErickson replied on Monday, January 25, 2010</h2>I would be interested if you end up with the same issue with the current version (3.8.x) - otherwise, hopefully the above workaround will work for you.<br></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
