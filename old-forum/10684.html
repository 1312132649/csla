<html><header><title>Read-Only entities with an editable treeview pattern</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Read-Only entities with an editable treeview pattern</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/10684.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>crackity_jones666 posted on Wednesday, September 14, 2011</h2><p>Hello!</p>
<p>We are working for quite a while on an editable Treeview (which include move and rename features) in silverlight using MVVM patterns.</p>
<p>We decided, from a scalability perspective, to rely on&nbsp;read-only entities to bind the treeview.&nbsp; In fact, we created,&nbsp;into the UI layer, a bunch of decorators on top of those entites.&nbsp; Those decorators allowed us to add some specific UI&nbsp;attributes related to a treeview node (like IsExpanded, for example) without adding those non-sense attributes to our business ou read-only&nbsp;objects in the BLL.&nbsp; The decorators also allowed us to decorate an Enum to a class&nbsp;so that it could be view as a normal node within the treeView hierarchy and have a list of children. (so that each entity having the same enum value are located below this enum node)</p>
<p>We created some commands to persist move and rename action in the database. Those command actions occurs only on the server side and we don&#39;t want to refresh the whole grid to ensure consistancy between the server and client.&nbsp; So we have to add logic to the client to correctly represent the server changes if no error occurs.</p>
<p>Now we are working on the business / validation rules.&nbsp; One thing that we loved about the mvvm ideas that comes up with csla is the fact that&nbsp;those rules can be interpreted directly on the client when you edit a business entity.&nbsp;&nbsp;We can then provide the user with an appropriate feedback right before he clicks the save button.&nbsp; Now, for the treeview, like we use ReadOnly entities, we are not able to translate those rules. </p>
<p>A concrete example of a rule could be : You should not be able to move an entity that has a certain&nbsp;enum value (so&nbsp;under this enum value node) if you are not a member of a whatever LDAP group.&nbsp; </p>
<p>Yes the move will fail on server side, but&nbsp;I would definitely like to provide immediate feedback to the user before he drops the entity (and trigger the move command).&nbsp;</p>
<p>As you see, we added a lot of complexity to be able to work with readonly entites in a treeview, and it&#39;s not over.&nbsp; So I would like to take a step back, even if I&nbsp;really don&#39;t wish to&nbsp;reimplement everything and discuss with the community about a better solution.</p>
<p>Did you guys ever went through such a situation?&nbsp; Is there a way to have a cleaner solution?&nbsp; Did I messed everything up?&nbsp; Am I too pure about it or should I care less about having duplicated rule logic (in business entity and on the mvvm side) to provide immediate feedback to the user?</p>
<p>Thanks in advance!</p>
<p>&nbsp;</p>
<p>&nbsp;</p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
