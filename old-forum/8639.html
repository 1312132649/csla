<html><header><title>Csla Light BasicHttpBinding and object size.</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Csla Light BasicHttpBinding and object size.</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/8639.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>Eblanchette posted on Wednesday, March 10, 2010</h2><p>Hello,</p>
<p>I recently had problems regarding a &quot;not found&quot; exception when calling the rootlist.BeginSave method from the silverlight UI. &nbsp;I have found that the problem is directly linked to the size of the object to save. &nbsp;If I have a collection of 1000 objects, it does not work, but with only 2 objects, it works.</p>
<p>This problem is easily solved by using the binaryXML binding using silverlight only(not using csla light)</p>
<p>With Csla light, on the other hand, it seems that even if the client side and server side are correctly configured to use binaryxml binding, the problem still occurs. &nbsp;I have found that Csla.DataportalClient.WcfProxy had the basicHttpBinding hardcoded into it and I wondered why...</p>
<p>There are many possible solutions to my problem, one is to use compression on my objects, or just send the dirty items to the beginsave method.</p>
<p>So I have 2 questions :&nbsp;</p>
<p><ol>
<li>Could it be that every object of my big collection is being sent to the windows dataportal and breaking the size limit for a sent message over binaryxml binding(weird because fetch works perfectly)?</li>
<li>Why is basichttp hardcoded into csla.dataportalclient.wcfproxy?</li>
</ol></p>
<p>Thank you!</p></div><div style='padding:0 15 3 15;background-color:lightgreen'><h2>RockfordLhotka replied on Wednesday, March 10, 2010</h2><p>&quot;easily solved&quot; is an overstatement. BinaryXML helps, but is far from a complete solution. The FAQ has quite a bit of information</p>
<p><a href="http://www.lhotka.net/cslanet/faq/DataPortalFaq.ashx">http://www.lhotka.net/cslanet/faq/DataPortalFaq.ashx</a></p>
<p>If are you running current code, you are using binary xml, because that&#39;s the default for the SL data portal. If you are using older code, well, you should keep current. CSLA .NET for Silverlight was created originally with SL2, which didn&#39;t have these options, and CSLA continues to evolve as SL is evolving - which is incredibly fast.</p>
<p>But even with binary xml, you need compression and you need to raise the (really low) default message size limits, at least for anything beyond the simplest demo or POC.</p>
<p>Fortunately the SL data portal is specifically designed to make it easy to plug in compression - see the <a href="http://store.lhotka.net">Silverlight video series</a> or numerous posts on this forum for info.</p>
<p>In 3.8.3 the data portal has been opened up further, so it is possible to create completely new proxy/host pairs, like is possible in .NET. This was meaningless in the early days of SL, but makes sense now due to the increasing number of possible network communication protocols (WCF and other) available. And it is important because it enables the use of third-party WCF channels, among other things.</p></div><div style='padding:0 15 3 15;background-color:lightgreen'><h2>skagen00 replied on Thursday, March 11, 2010</h2><p>I just wanted to add that you&#39;d be surprised at how much verbosity there is in the serialized objects - to give you relevant comparison, I had a read-only list of 2000 or so items (larger than I&#39;d personally like) and the thing was around 15MB. After compression, it was 200K, much more &quot;doable&quot;. </p>
<p>I&#39;d say the typical compressions I&#39;ve run into are anywhere from 90%-96% - so definitely explore this route!</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Eblanchette replied on Thursday, March 11, 2010</h2><p>Compression is definately the way to go. &nbsp;It solved the problem. </p>
<p>I still wonder why basichttpbinding is hardcoded into wcfportal tough.</p>
<p>Thanks for the prompt answers.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Thursday, March 11, 2010</h2><p>Again, this code was created with SL2 where the only option was basicHttpBinding.</p>
<p>In January of 2009 however, WcfProxy was altered so you could create your own WCF channel factory and/or WCF proxy. So you can use any binding you&#39;d like, basicHtttp is simply the default. If you are still seeing it as hardcoded, you need to upgrade to more current code.</p>
<p>CSLA 3.8.3 removes <em>all</em> restrictions on the bindings by allowing you to create your own proxy/host pair, so you can pretty much do anything you&#39;d like.</p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
