<html><header><title>Exception hidden with &quot;The underlying connection was closed...&quot;</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Exception hidden with &quot;The underlying connection was closed...&quot;</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/10786.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>jh72i posted on Wednesday, October 19, 2011</h2><p class="MsoNormal" style="MARGIN:0cm 0cm 0pt;"><span style="FONT-SIZE:10pt;mso-bidi-font-size:11.0pt;"><span style="font-family:Calibri;">Maybe this has been covered already but here&rsquo;s something that messed me up this morning. I was trying to set up a wpf app with a remote portal and kept getting the cryptic &ldquo;</span></span><span style="FONT-FAMILY:Consolas;FONT-SIZE:9pt;">The underlying connection was closed: The connection was closed unexpectedly.</span><span style="FONT-SIZE:10pt;mso-bidi-font-size:11.0pt;"><span style="font-family:Calibri;">&rdquo; </span></span></p>
<p class="MsoNormal" style="MARGIN:0cm 0cm 0pt;"><span style="FONT-SIZE:10pt;mso-bidi-font-size:11.0pt;"><span style="font-family:Calibri;">&nbsp;</span></span></p>
<p class="MsoNormal" style="MARGIN:0cm 0cm 0pt;"><span style="FONT-SIZE:10pt;mso-bidi-font-size:11.0pt;"><span style="font-family:Calibri;">Exception Stack trace showed the issue to be somewhere at:</span></span></p>
<p class="MsoNormal" style="MARGIN:0cm 0cm 0pt;"><span style="FONT-SIZE:10pt;mso-bidi-font-size:11.0pt;"><span style="font-family:Calibri;">&nbsp;</span></span></p>
<p class="MsoNormal" style="MARGIN:0cm 0cm 0pt;"><span style="FONT-SIZE:10pt;mso-bidi-font-size:11.0pt;"><span style="font-family:Calibri;"><span style="mso-spacerun:yes;">&nbsp; </span>at Csla.Server.Hosts.IWcfPortal.Fetch(FetchRequest request)</span></span></p>
<p class="MsoNormal" style="MARGIN:0cm 0cm 0pt;"><span style="FONT-SIZE:10pt;mso-bidi-font-size:11.0pt;"><span style="font-family:Calibri;"><span style="mso-spacerun:yes;">&nbsp;&nbsp; </span>at Csla.DataPortalClient.WcfProxy.Fetch(Type objectType, Object criteria, DataPortalContext context)</span></span></p>
<p class="MsoNormal" style="MARGIN:0cm 0cm 0pt;"><span style="FONT-SIZE:10pt;mso-bidi-font-size:11.0pt;"><span style="font-family:Calibri;">&nbsp;</span></span></p>
<p class="MsoNormal" style="MARGIN:0cm 0cm 0pt;"><span style="FONT-SIZE:10pt;mso-bidi-font-size:11.0pt;"><span style="font-family:Calibri;">Debugging through the code showed that, indeed, a <em>valid</em> exception was being thrown but the details were getting lost somewhere between the server and client...</span></span></p>
<p class="MsoNormal" style="MARGIN:0cm 0cm 0pt;"><span style="FONT-SIZE:10pt;mso-bidi-font-size:11.0pt;"><span style="font-family:Calibri;">&nbsp;</span></span></p>
<p class="MsoNormal" style="MARGIN:0cm 0cm 0pt;"><span style="FONT-SIZE:10pt;mso-bidi-font-size:11.0pt;"><span style="font-family:Calibri;">From Client proxy.Fetch:</span></span></p>
<p class="MsoNormal" style="MARGIN:0cm 0cm 0pt;"><span style="FONT-SIZE:10pt;mso-bidi-font-size:11.0pt;"><span style="font-family:Calibri;">&nbsp;</span></span></p>
<p class="MsoNormal" style="MARGIN:0cm 0cm 0pt;"><span style="FONT-SIZE:10pt;mso-bidi-font-size:11.0pt;"><span style="font-family:Calibri;">\csla\DataPortal.cs</span></span></p>
<p class="MsoNormal" style="MARGIN:0cm 0cm 0pt;"><span style="FONT-SIZE:10pt;mso-bidi-font-size:11.0pt;"><span style="font-family:Calibri;">&nbsp;</span></span></p>
<p class="MsoNormal" style="MARGIN:0cm 0cm 0pt;mso-layout-grid-align:none;"><span style="FONT-FAMILY:&#39;Courier New&#39;;FONT-SIZE:8pt;"><span style="mso-spacerun:yes;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="COLOR:blue;">try</span></span></p>
<p class="MsoNormal" style="MARGIN:0cm 0cm 0pt;mso-layout-grid-align:none;"><span style="FONT-FAMILY:&#39;Courier New&#39;;FONT-SIZE:8pt;"><span style="mso-spacerun:yes;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>{</span></p>
<p class="MsoNormal" style="MARGIN:0cm 0cm 0pt;mso-layout-grid-align:none;"><span style="FONT-FAMILY:&#39;Courier New&#39;;FONT-SIZE:8pt;"><span style="mso-spacerun:yes;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>result = <span style="background-color:#ffff00;">proxy.Fetch</span>(objectType, criteria, dpContext);</span></p>
<p class="MsoNormal" style="MARGIN:0cm 0cm 0pt;mso-layout-grid-align:none;"><span style="FONT-FAMILY:&#39;Courier New&#39;;FONT-SIZE:8pt;"><span style="mso-spacerun:yes;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>}</span></p>
<p class="MsoNormal" style="MARGIN:0cm 0cm 0pt;mso-layout-grid-align:none;"><span style="FONT-FAMILY:&#39;Courier New&#39;;FONT-SIZE:8pt;"><span style="mso-spacerun:yes;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="COLOR:blue;">catch</span> (Server.<span style="COLOR:#2b91af;">DataPortalException</span> ex)</span></p>
<p class="MsoNormal" style="MARGIN:0cm 0cm 0pt;mso-layout-grid-align:none;"><span style="FONT-FAMILY:&#39;Courier New&#39;;FONT-SIZE:8pt;"><span style="mso-spacerun:yes;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>{</span></p>
<p class="MsoNormal" style="MARGIN:0cm 0cm 0pt;mso-layout-grid-align:none;"><span style="FONT-FAMILY:&#39;Courier New&#39;;FONT-SIZE:8pt;">&hellip;..</span></p>
<p class="MsoNormal" style="MARGIN:0cm 0cm 0pt;mso-layout-grid-align:none;"><span style="FONT-FAMILY:&#39;Courier New&#39;;FONT-SIZE:8pt;"><span style="mso-spacerun:yes;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>}</span></p>
<p class="MsoNormal" style="MARGIN:0cm 0cm 0pt;mso-layout-grid-align:none;"><span style="FONT-FAMILY:&#39;Courier New&#39;;FONT-SIZE:8pt;"><span style="mso-spacerun:yes;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="COLOR:blue;">catch</span> (<span style="COLOR:#2b91af;">Exception</span> ex)</span></p>
<p class="MsoNormal" style="MARGIN:0cm 0cm 0pt;mso-layout-grid-align:none;"><span style="FONT-FAMILY:&#39;Courier New&#39;;FONT-SIZE:8pt;"><span style="mso-spacerun:yes;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>{</span></p>
<p class="MsoNormal" style="MARGIN:0cm 0cm 0pt;mso-layout-grid-align:none;"><span style="FONT-FAMILY:&#39;Courier New&#39;;FONT-SIZE:8pt;">**** true exception details lost at this stage ****</span></p>
<p class="MsoNormal" style="MARGIN:0cm 0cm 0pt;mso-layout-grid-align:none;"><span style="FONT-FAMILY:&#39;Courier New&#39;;FONT-SIZE:8pt;"><span style="mso-spacerun:yes;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>OnDataPortalInvokeComplete(<span style="COLOR:blue;">new</span> <span style="COLOR:#2b91af;">DataPortalEventArgs</span>(dpContext, objectType, <span style="COLOR:#2b91af;">DataPortalOperations</span>.Fetch, <span style="background-color:#ffff00;">ex</span>));</span></p>
<p class="MsoNormal" style="MARGIN:0cm 0cm 0pt;mso-layout-grid-align:none;"><span style="FONT-FAMILY:&#39;Courier New&#39;;FONT-SIZE:8pt;"><span style="mso-spacerun:yes;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="COLOR:blue;">throw</span>;</span></p>
<p class="MsoNormal" style="MARGIN:0cm 0cm 0pt;mso-layout-grid-align:none;"><span style="FONT-FAMILY:&#39;Courier New&#39;;FONT-SIZE:8pt;"><span style="mso-spacerun:yes;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>}</span></p>
<p class="MsoNormal" style="MARGIN:0cm 0cm 0pt;mso-layout-grid-align:none;"><span style="FONT-FAMILY:&#39;Courier New&#39;;FONT-SIZE:8pt;">&nbsp;</span></p>
<p class="MsoNormal" style="MARGIN:0cm 0cm 0pt;"><span style="FONT-SIZE:10pt;mso-bidi-font-size:11.0pt;"><span style="font-family:Calibri;">The exception gets raised from:</span></span></p>
<p class="MsoNormal" style="MARGIN:0cm 0cm 0pt;"><span style="FONT-SIZE:10pt;mso-bidi-font-size:11.0pt;"><span style="font-family:Calibri;">&nbsp;</span></span></p>
<p class="MsoNormal" style="MARGIN:0cm 0cm 0pt;"><span style="FONT-SIZE:10pt;mso-bidi-font-size:11.0pt;"><span style="font-family:Calibri;">\csla\server\DataPortal.cs</span></span></p>
<p class="MsoNormal" style="MARGIN:0cm 0cm 0pt;"><span style="FONT-SIZE:10pt;mso-bidi-font-size:11.0pt;"><span style="font-family:Calibri;">&nbsp;</span></span></p>
<p class="MsoNormal" style="MARGIN:0cm 0cm 0pt;mso-layout-grid-align:none;"><span style="FONT-FAMILY:&#39;Courier New&#39;;FONT-SIZE:8pt;"><span style="mso-spacerun:yes;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="mso-spacerun:yes;">&nbsp;&nbsp;</span><span style="COLOR:blue;">if</span> (<span style="COLOR:#2b91af;">ApplicationContext</span>.AuthenticationType == <span style="COLOR:#a31515;">&quot;Windows&quot;</span>)</span></p>
<p class="MsoNormal" style="MARGIN:0cm 0cm 0pt;mso-layout-grid-align:none;"><span style="FONT-FAMILY:&#39;Courier New&#39;;FONT-SIZE:8pt;"><span style="mso-spacerun:yes;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>{</span></p>
<p class="MsoNormal" style="MARGIN:0cm 0cm 0pt;mso-layout-grid-align:none;"><span style="FONT-FAMILY:&#39;Courier New&#39;;FONT-SIZE:8pt;"><span style="mso-spacerun:yes;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="COLOR:green;">// When using integrated security, Principal must be null</span></span></p>
<p class="MsoNormal" style="MARGIN:0cm 0cm 0pt;mso-layout-grid-align:none;"><span style="FONT-FAMILY:&#39;Courier New&#39;;FONT-SIZE:8pt;"><span style="mso-spacerun:yes;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="COLOR:blue;">if</span> (context.Principal != <span style="COLOR:blue;">null</span>)</span></p>
<p class="MsoNormal" style="MARGIN:0cm 0cm 0pt;mso-layout-grid-align:none;"><span style="FONT-FAMILY:&#39;Courier New&#39;;FONT-SIZE:8pt;"><span style="mso-spacerun:yes;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>{</span></p>
<p class="MsoNormal" style="MARGIN:0cm 0cm 0pt;mso-layout-grid-align:none;"><span style="FONT-FAMILY:&#39;Courier New&#39;;FONT-SIZE:8pt;"><span style="mso-spacerun:yes;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>System.Security.<span style="COLOR:#2b91af;">SecurityException</span> ex =</span></p>
<p class="MsoNormal" style="MARGIN:0cm 0cm 0pt;mso-layout-grid-align:none;"><span style="FONT-FAMILY:&#39;Courier New&#39;;FONT-SIZE:8pt;"><span style="mso-spacerun:yes;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="COLOR:blue;">new</span> System.Security.<span style="COLOR:#2b91af;">SecurityException</span>(<span style="COLOR:#2b91af;">Resources</span>.NoPrincipalAllowedException);</span></p>
<p class="MsoNormal" style="MARGIN:0cm 0cm 0pt;mso-layout-grid-align:none;"><span style="FONT-FAMILY:&#39;Courier New&#39;;FONT-SIZE:8pt;"><span style="mso-spacerun:yes;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="COLOR:green;">//ex.Action = System.Security.Permissions.SecurityAction.Deny;</span></span></p>
<p class="MsoNormal" style="MARGIN:0cm 0cm 0pt;mso-layout-grid-align:none;"><span style="FONT-FAMILY:&#39;Courier New&#39;;FONT-SIZE:8pt;"><span style="mso-spacerun:yes;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="background-color:#ffff00;"><span style="color:blue;">throw</span> ex;</span></span></p>
<p class="MsoNormal" style="MARGIN:0cm 0cm 0pt;mso-layout-grid-align:none;"><span style="FONT-FAMILY:&#39;Courier New&#39;;FONT-SIZE:8pt;"><span style="mso-spacerun:yes;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>}</span></p>
<p class="MsoNormal" style="MARGIN:0cm 0cm 0pt;mso-layout-grid-align:none;"><span style="FONT-FAMILY:&#39;Courier New&#39;;FONT-SIZE:8pt;">&nbsp;</span></p>
<p class="MsoNormal" style="MARGIN:0cm 0cm 0pt;"><span style="FONT-SIZE:10pt;mso-bidi-font-size:11.0pt;"><span style="font-family:Calibri;">And the response does appear to include the exception details:</span></span></p>
<p class="MsoNormal" style="MARGIN:0cm 0cm 0pt;"><span style="FONT-SIZE:10pt;mso-bidi-font-size:11.0pt;"><span style="font-family:Calibri;">&nbsp;</span></span></p>
<p class="MsoNormal" style="MARGIN:0cm 0cm 0pt;"><span style="FONT-SIZE:10pt;mso-bidi-font-size:11.0pt;"><span style="font-family:Calibri;">\csla\server\hosts\wcfportal.cs</span></span></p>
<p class="MsoNormal" style="MARGIN:0cm 0cm 0pt;"><span style="FONT-SIZE:10pt;mso-bidi-font-size:11.0pt;"><span style="font-family:Calibri;">&nbsp;</span></span></p>
<p class="MsoNormal" style="MARGIN:0cm 0cm 0pt;mso-layout-grid-align:none;"><span style="FONT-FAMILY:&#39;Courier New&#39;;FONT-SIZE:8pt;"><span style="mso-spacerun:yes;">&nbsp;</span><span style="mso-spacerun:yes;">&nbsp;&nbsp; </span>[<span style="COLOR:#2b91af;">OperationBehavior</span>(Impersonation = <span style="COLOR:#2b91af;">ImpersonationOption</span>.Allowed)]</span></p>
<p class="MsoNormal" style="MARGIN:0cm 0cm 0pt;mso-layout-grid-align:none;"><span style="FONT-FAMILY:&#39;Courier New&#39;;FONT-SIZE:8pt;"><span style="mso-spacerun:yes;">&nbsp;&nbsp;&nbsp; </span><span style="COLOR:blue;">public</span> <span style="COLOR:#2b91af;">WcfResponse</span> Fetch(<span style="COLOR:#2b91af;">FetchRequest</span> request)</span></p>
<p class="MsoNormal" style="MARGIN:0cm 0cm 0pt;mso-layout-grid-align:none;"><span style="FONT-FAMILY:&#39;Courier New&#39;;FONT-SIZE:8pt;"><span style="mso-spacerun:yes;">&nbsp;&nbsp;&nbsp; </span>{</span></p>
<p class="MsoNormal" style="MARGIN:0cm 0cm 0pt;mso-layout-grid-align:none;"><span style="FONT-FAMILY:&#39;Courier New&#39;;FONT-SIZE:8pt;"><span style="mso-spacerun:yes;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Csla.Server.<span style="COLOR:#2b91af;">DataPortal</span> portal = <span style="COLOR:blue;">new</span> Csla.Server.<span style="COLOR:#2b91af;">DataPortal</span>();</span></p>
<p class="MsoNormal" style="MARGIN:0cm 0cm 0pt;mso-layout-grid-align:none;"><span style="FONT-FAMILY:&#39;Courier New&#39;;FONT-SIZE:8pt;"><span style="mso-spacerun:yes;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="COLOR:blue;">object</span> result;</span></p>
<p class="MsoNormal" style="MARGIN:0cm 0cm 0pt;mso-layout-grid-align:none;"><span style="FONT-FAMILY:&#39;Courier New&#39;;FONT-SIZE:8pt;"><span style="mso-spacerun:yes;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="COLOR:blue;">try</span></span></p>
<p class="MsoNormal" style="MARGIN:0cm 0cm 0pt;mso-layout-grid-align:none;"><span style="FONT-FAMILY:&#39;Courier New&#39;;FONT-SIZE:8pt;"><span style="mso-spacerun:yes;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>{</span></p>
<p class="MsoNormal" style="MARGIN:0cm 0cm 0pt;mso-layout-grid-align:none;"><span style="FONT-FAMILY:&#39;Courier New&#39;;FONT-SIZE:8pt;"><span style="mso-spacerun:yes;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>result = <span style="background-color:#ffff00;">portal.Fetch</span>(request.ObjectType, request.Criteria, request.Context);</span></p>
<p class="MsoNormal" style="MARGIN:0cm 0cm 0pt;mso-layout-grid-align:none;"><span style="FONT-FAMILY:&#39;Courier New&#39;;FONT-SIZE:8pt;"><span style="mso-spacerun:yes;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>}</span></p>
<p class="MsoNormal" style="MARGIN:0cm 0cm 0pt;mso-layout-grid-align:none;"><span style="FONT-FAMILY:&#39;Courier New&#39;;FONT-SIZE:8pt;"><span style="mso-spacerun:yes;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="COLOR:blue;">catch</span> (<span style="COLOR:#2b91af;">Exception</span> ex)</span></p>
<p class="MsoNormal" style="MARGIN:0cm 0cm 0pt;mso-layout-grid-align:none;"><span style="FONT-FAMILY:&#39;Courier New&#39;;FONT-SIZE:8pt;"><span style="mso-spacerun:yes;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>{</span></p>
<p class="MsoNormal" style="MARGIN:0cm 0cm 0pt;mso-layout-grid-align:none;"><span style="FONT-FAMILY:&#39;Courier New&#39;;FONT-SIZE:8pt;"><span style="mso-spacerun:yes;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="background-color:#ffff00;">result = ex;</span></span></p>
<p class="MsoNormal" style="MARGIN:0cm 0cm 0pt;mso-layout-grid-align:none;"><span style="FONT-FAMILY:&#39;Courier New&#39;;FONT-SIZE:8pt;"><span style="mso-spacerun:yes;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>}</span></p>
<p class="MsoNormal" style="MARGIN:0cm 0cm 0pt;mso-layout-grid-align:none;"><span style="FONT-FAMILY:&#39;Courier New&#39;;FONT-SIZE:8pt;"><span style="mso-spacerun:yes;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="COLOR:blue;">return</span> <span style="COLOR:blue;">new</span> <span style="COLOR:#2b91af;">WcfResponse</span>(<span style="background-color:#ffff00;">result</span>);</span></p>
<p class="MsoNormal" style="MARGIN:0cm 0cm 0pt;mso-layout-grid-align:none;"><span style="FONT-FAMILY:&#39;Courier New&#39;;FONT-SIZE:8pt;"><span style="mso-spacerun:yes;">&nbsp;&nbsp;&nbsp; </span>}</span></p>
<p class="MsoNormal" style="MARGIN:0cm 0cm 0pt;mso-layout-grid-align:none;"><span style="FONT-FAMILY:&#39;Courier New&#39;;FONT-SIZE:8pt;">&nbsp;</span></p>
<p class="MsoNormal" style="MARGIN:0cm 0cm 0pt;"><span style="FONT-SIZE:10pt;mso-bidi-font-size:11.0pt;"><span style="font-family:Calibri;">&nbsp;<span style="FONT-SIZE:10pt;mso-bidi-font-size:11.0pt;"><span style="font-family:Calibri;">I&#39;m wondering am i missing something in how a client can figure out what a server exception actually is? If this were production I&#39;d be scratching my head ferociously.</span></span></span></span></p>
<p class="MsoNormal" style="MARGIN:0cm 0cm 0pt;"><span style="FONT-SIZE:10pt;mso-bidi-font-size:11.0pt;"><span style="font-family:Calibri;"><span style="FONT-SIZE:10pt;mso-bidi-font-size:11.0pt;"></span></span></span></p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JonnyBee replied on Wednesday, October 19, 2011</h2><p>Hi,</p>
<p>Look at <i>Samples\Net\cs\CustomerErrorHandling</i> on how to catch and transform non serializable exception or non existing exceptions on the client machine to a generic exception the client can handle.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>jh72i replied on Wednesday, October 19, 2011</h2><p>Thanks Jonny. I&#39;ll certainly take a look at that.</p>
<p>As an aside is there any way on this forum to PM you?</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>jh72i replied on Wednesday, October 19, 2011</h2><p>Having thought about this for a second...I&#39;m using WPF so surely the SecurityException <em>is</em> available on the client side?</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JonnyBee replied on Wednesday, October 19, 2011</h2><p>But is SecurityException and all the inner exceptions both Serializable and existing on the client. </p>
<p>When using WebSphere MQ and Teradata (or other custom DataProviders) their exceptions will not exist on the client side.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>jh72i replied on Thursday, October 20, 2011</h2><p>Hi Jonny,<br />Well in this case there are no inner exceptions.&nbsp;The SecurityException is created right there in Rocky&#39;s code and thrown:</p>
<p><span style="font-family:Courier New;font-size:x-small;">System.Security.<span style="COLOR:#2b91af;">SecurityException</span> ex =</span><span style="FONT-FAMILY:&#39;Courier New&#39;;FONT-SIZE:8pt;"><span style="mso-spacerun:yes;"> </span><span style="COLOR:blue;">new</span> System.Security.<span style="COLOR:#2b91af;">SecurityException</span>(<span style="COLOR:#2b91af;">Resources</span>.NoPrincipalAllowedException);</span><span style="FONT-FAMILY:&#39;Courier New&#39;;FONT-SIZE:8pt;"><span style="mso-spacerun:yes;"><br /></span><span style="BACKGROUND-COLOR:#ffff00;"><span style="COLOR:blue;">throw</span> ex;</span></span></p>
<p>So I suppose, as this is rich windows client, I would have expected to see this exception come back in some form rather than the generic &quot;the underlying connection, etc....&quot; exception.</p>
<p>I&#39;ll tag it for revisit when I get time and see if I cannot figure out where exactly it is getting lost.</p>
<p>As always, I appreciate you taking the time to reply.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>tmg4340 replied on Thursday, October 20, 2011</h2><p>What you&#39;re running into is one of the tenets of WCF - by default, exceptions thrown on the server do not&nbsp;flow to the client.&nbsp; There are configuration options you can set to let exceptions flow through, but in its default state this is what you get.&nbsp; And that&#39;s regardless of what type of client is connecting to the service.</p>
<p>HTH</p>
<p>- Scott</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>jh72i replied on Friday, October 21, 2011</h2><p>That certainly makes sense. Thanks for that.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JonnyBee replied on Wednesday, October 19, 2011</h2><p>You can PM me on jonny.bekkum(a)gmail.com</p>
<p>&nbsp;</p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
