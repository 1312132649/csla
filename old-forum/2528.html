<html><header><title>Custom http handler and AJAX</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Custom http handler and AJAX</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/2528.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>somayajulu posted on Thursday, March 15, 2007</h2><P><FONT face=Arial size=2>Hi,</FONT></P>
<P><FONT face=Arial size=2>I have a web application that uses a custom http handler. I have a gridview&nbsp;which displays data using custom&nbsp;paging and sorting.&nbsp;In grid view's pageindexchanging and sorting events, I'm redirecting the page to the custom http handler and the required paging and sorting would be done.</FONT></P>
<P><FONT face=Arial size=2>Now I want to provide paging and sorting&nbsp;with AJAX fuctionality&nbsp;without bypassing the custom http handler.&nbsp;How can&nbsp;I achieve&nbsp;this? Does ASP.Net AJAX update panel help?</FONT></P>
<P><FONT face=Arial size=2>Any help regarding this is appeciated.</FONT></P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Bayu replied on Thursday, March 15, 2007</h2>Hi there,<br><br>Currently I am very much into AJAX as well. First I worked with the ASP.Net AJAX kit (<a href="http://ajax.asp.net">http://ajax.asp.net</a>), but I felt a bit too detached from the core using it. So I switched to an approach that is based on jQuery (<a href="http://jquery.com">http://jquery.com</a>). It forced me to dive much deeper into the nasty details, but subsequently I felt much more in control.<br><br>But that's just me. ;-)<br><br>Maybe you should have a look at: <a href="http://ajax.asp.net/ajaxtoolkit/PagingBulletedList/PagingBulletedList.aspx">http://ajax.asp.net/ajaxtoolkit/PagingBulletedList/PagingBulletedList.aspx</a><br><br>It is for a bulleted-list, but maybe you can redesign it to make it work for your case.<br><br><br>Regards,<br>Bayu<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>somayajulu replied on Thursday, March 15, 2007</h2><P><FONT face=Arial size=2>Thanks Bayu,</FONT></P>
<P><FONT face=Arial size=2>That's a good one. However in my case, I'm considering to use the Grid itself. Is there a way to acheive the AJAX functionality with the Grid&nbsp;without bypassing custom http handler?</FONT></P>
<P><FONT face=Arial size=2>Regards,</FONT></P>
<P><FONT face=Arial size=2>Som.</FONT></P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Bayu replied on Thursday, March 15, 2007</h2>Allright,<br><br>Which 'Grid' do you mean? <br>The standard Asp.Net GridView? Let's assume this is what you mean.<br><br>I had a look, what I noticed is the following:<br>- the GridView throws a cancellable PageIndexChanging event<br>- you can set the Cancel property on the EventArgs to true to prevent default paging to occur<br>- instead you can call your HttpHandler asynchronously (i.e. through AJAX)<br>- when this call returns you can set the datasource of your Grid to the newly recieved data<br><br>This might work, but I guess there will be one (potentially showstopping) problem here: the Grid might not allow you to show page numbers without having the actual data..... (ouch). I don't know if you can force page indices to appear, but it could very well be that these can only be derived from data that is actually present. You could try if subclassing gives you some more control here then is available through the properties, but I'm afraid you will get stuck here. Of course this breaks your idea of one-page-at-a-time fetching.<br><br>A possible solution:<br>- don't use the page indices that are provided by the GridView<br>- it's straightforward to create some page-index buttons of your own programmatically and show these beneath the GridView as if they are part of it<br>- then you can use the AJAX thingie as I described earlier and set the datasource of your GridView as is appropriate<br><br><br>As you notice the solution is to kind of 'work around' the standard asp control. Also the ASP.Net Ajax toolkit does not (yet) provide a ajax-enabled gridcontrol. This is one of the primary reasons why I discarded the whole asp.net-ajax thing and went for an open-source alternative. <br><br><br>A possible (yet perhaps too costly) alternative would be to buy a 3rd party control like those delivered by Infragistics. These are (supposed to be) fully Ajax-enabled.<br><br><br>Hope this helps.<br><br>Regards,<br>Bayu<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>somayajulu replied on Thursday, March 15, 2007</h2><P><FONT face=Arial size=2>Hi Bayu,</FONT></P>
<P><FONT face=Arial size=2>Nice ideas. I would like to bring to your notice a couple of things:<BR>a.&nbsp;I'm not using the default paging of the GridView. <BR>b. I have implemented Custom Paging with the help of CslaDataSource control. I'm using CSLA.Net version 2.1.3</FONT></P>
<P><FONT face=Arial size=2>AJAX functionality is working fine with the GridView if I use the update panel. However, at present I'm able to do so bypassing the custom HttpHandler.</FONT></P>
<P><FONT face=Arial size=2>The problem is with calling the custom HttpHander asynchronously. At present, I'm using a Response.Redirect to call the custom HttpHandler. This will&nbsp;result in&nbsp;a page redirection. </FONT></P>
<P><FONT face=Arial size=2>Is there a workaround to this so that I call the custom HttpHandler asynchronously whenever any event is triggered?</FONT></P>
<P><FONT face=Arial size=2>Can this be done like the following:<BR>a. Use the ASP.Net AJAX update panel and add the GridView in the ContentTemplate.<BR>b. Add paging and sorting events of the GridView to the triggers list of update panel<BR>c.&nbsp;Send&nbsp;a request through HttpWebRequest and get&nbsp;the response&nbsp;using HttpWebResponse in those events.<BR>d. Bind the data to the CslaDataSource after getting the response back</FONT></P>
<P><FONT face=Arial size=2>Please let me know if I'm wrong.</FONT></P>
<P><FONT face=Arial size=2>Regards,<BR>Som.</FONT></P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Bayu replied on Thursday, March 15, 2007</h2><BLOCKQUOTE><div><img src="/Themes/alternate1/images/icon-quote.gif"> <strong>somayajulu:</strong></div><div><br><p>Nice ideas. I would like to bring to your notice a couple of things:<br>a.&nbsp;I'm not using the default paging of the GridView. <br>b. I have implemented Custom Paging with the help of CslaDataSource control. I'm using CSLA.Net version 2.1.3</p>
<p>AJAX functionality is working fine with the GridView if I use the update panel. However, at present I'm able to do so bypassing the custom HttpHandler.</p>
<p></div></BLOCKQUOTE><br></p><p>Ah, good that you have it working already!<br>I didn't understand that from your earlier posts. So I guess my previous post is a bit off-track. ;-)<br></p><p><BLOCKQUOTE><div><img src="/Themes/alternate1/images/icon-quote.gif"> <strong>somayajulu:</strong></div><div><br>
</p><p>The problem is with calling the custom HttpHander asynchronously. At present, I'm using a Response.Redirect to call the custom HttpHandler. This will&nbsp;result in&nbsp;a page redirection. </p>
<p>Is there a workaround to this so that I call the custom HttpHandler asynchronously whenever any event is triggered?</p><p></div></BLOCKQUOTE></p><p>Right, so <span>that</span>'s the problem. <br></p><p>By making use of the UpdatePanel you saved yourself a whole bunch of work you would have to do otherwise, as you simply plugged-in a full block of off-the-shelf AJAX logic. All this is fine, but now that you want to modify some part of the behavior you get stuck because as far as I know there is no clean way to get behind the scenes of this UpdatePanel. This again relates to my uneasiness with this stuff from MS as I prefer to get into all the nasty details, especially with this kind of cutting-edge technology that is so sensitive to the used browser and platform.</p><p>Anyways, I am a afraid I can't offer you a solution here.This UpdatePanel is one huge black-boxed piece of AJAX logic that implements the befamed 'adaptive rendering logic', and I don't know of a straightforward way to hook into this without causing more pain than providing cure.<br></p><p>
<BLOCKQUOTE><div><img src="/Themes/alternate1/images/icon-quote.gif"> <strong>somayajulu:</strong></div><div><br>
</p>
<p>Can this be done like the following:<br>a. Use the ASP.Net AJAX update panel and add the GridView in the ContentTemplate.<br>b. Add paging and sorting events of the GridView to the triggers list of update panel<br>c.&nbsp;Send&nbsp;a request through HttpWebRequest and get&nbsp;the response&nbsp;using HttpWebResponse in those events.<br>d. Bind the data to the CslaDataSource after getting the response back</p></div></BLOCKQUOTE><br><br>Trial and error is the way to go I am afraid. I have don't sufficient experience with the UpdatePanel to predict how it will work. I don't know what your handler does, but another way to get some logic between your data and UI is by using an Object DataSource. If that is of any use depends on your scenario.<br><br>In my app I display lots of data in grids and most of this data is loaded dynamically and asynchronously from a HttpHandler. But as I said before, I don't use ASP.Net on the client-side, it's all built on top of jQuery (which btw is very easy to learn).<br><br>Maybe someone can be of more help?<br><br>Regards,<br>Bayu<br><br></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
