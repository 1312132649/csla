<html><header><title>Is CSLA the right tool for a web-only environment?</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Is CSLA the right tool for a web-only environment?</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/10528.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockyRocks posted on Friday, July 15, 2011</h2><p>I&#39;m a big proponent of CSLA and have used it a lot. However, I&#39;ve just moved company and I&#39;m asking myself whether it is the right tool for the job here. I&#39;ve been told that at the new place everything must be delivered on the web. Note that by web delivery I am talking about WebForms or MVC - sadly Silverlight can&#39;t be used.</p>
<p>In a web-only world, some of the stuff that CSLA offers is either not helpful, or less than ideal. Whoa! Bear with me here. </p>
<p>Some of the issues are:</p>
<p><span style="text-decoration:underline;">Validation</span></p>
<p>The validation model is less useful on the web. Validation rule execution at the time of each property update is less appropriate on the web because a page postback is effectively a batch operation. Therefore a one-time &quot;validate all&quot; approach might be more efficient. At least some validation has to happen on the client and CSLA doesn&#39;t make reuse of validation rules easy. Use of Data Annotations or Enterprise Library Validation Application Block make this slightly easier as they support the idea of exposing rules externally; see <a href="http://www.codeproject.com/KB/validation/DataAnnotations.aspx">http://www.codeproject.com/KB/validation/DataAnnotations.aspx</a> for an example (not sure I recommend this, but anyway ...)</p>
<p><span style="text-decoration:underline;">Data Binding</span></p>
<p>The strong data binding support could remain useful in WebForms, but less useful than it is for richer UIs. I personally don&#39;t make as much use of binding as I would like in WebForms because I want to encode all output and sanitize all input and they are jobs for a layer above the business layer, in my opinion. Data binding is no use at all in MVC - it doesn&#39;t really fit with the underlying concepts as far as I can see.</p>
<p><span style="text-decoration:underline;">N-level undo</span></p>
<p>N-level undo is pretty much useless. No harm in it being there, but no help because of the way that people expect the UI to work on the web.</p>
<p>You still get:</p>
<p>Encapsulation and scope best practices<br />Data portal is there in case it is required<br />Some assistance with centralisation of authorisation rules<br />State tracking with minimal code impact</p>
<p>I think the case for CSLA is weaker in a web-only environment. Don&#39;t get me wrong, there&#39;s nothing that STOPS you using CSLA. However, making use of a framework does have a price (such as compromising your architectual choices and keeping up with breaking changes, to name but two examples.) It is a healthy practice to continually question what is the best technology choice in any given situation, so I am checking my justifications.</p>
<p>What are other people&#39;s experiences in this respect? Are the compromises still worth the payback? Do people continue to use CSLA despite these shortcomings (in the UI technologies?)</p>
<p>How/where do people deal with encoding output and sanitizing input in a web UI? Has anyone tried something like MVVM to help?</p>
<p>Cheers.</p>
<p>Andrew</p>
<p>(shortened repost to save people valuable reading time!)</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Friday, July 15, 2011</h2><p>Just so you know, what MVC calls model binding is basically databinding.&nbsp; So its still useful (just use Html.EditorFor(x=&gt;x.CslaProperty).</p>
<p>The validation is still really important.&nbsp; Data annontations are great for simple things, but if you have business rules you&#39;ll have some more complex onees that you&#39;ll only want to run on the server.&nbsp;&nbsp; The only difference is that all the properties will be set as a batch in a postback vs. one at a time while moving from field to field.&nbsp; The business will want complex rules no matter what UI you use.&nbsp; </p>
<p>N-level undo I haven&#39;t used in in rich clients, but for those that need it, its good to know its there.</p>
<p>The rest of your post clearly indicates the benefits you still get from it, and I agree with those points.&nbsp; You still get a lot of value out of what you are using, and you don&#39;t need to re-invent the wheel for those features you&#39;d still need anyway if you didn&#39;t use Csla.</p>
<p>My experience has been that Csla has been useful in a web app.&nbsp; The structure of each BO helps you keep clear separation of layers, meaning your BO library will live long after MVC is replaced with the next big revolution.</p>
<p>I&#39;ve already replace my DAL layer.&nbsp; Didn&#39;t need to touch rules or the UI, it went very smoothly and I just had to worry about the data portal methods.&nbsp; I&#39;ve also (later) ported from WebForms to MVC.&nbsp; Again, this was pretty painless.&nbsp; I didn&#39;t change my BOs much, and where i did, it&#39;s because i had a bit of business logic creep into the UI.&nbsp; It actually made the app much simplier, because MVC itself requires less code that WebForms (all that plumbing and event handlers, etc).</p>
<p>So my short answer is yes, it still provides a lot of value, and if you were not no use it, you&#39;d be forced to re-implement the missing pieces yourself (validation, data portal, etc).</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockyRocks replied on Tuesday, July 19, 2011</h2><p>Hi Andy,</p>
<p>Thanks for your response. Your points are all interesting.</p>
<p>MVC - data binding is used then, but of course it is only one-way binding. The cleverness of CSLA is in providing two way binding, which is a bit more involved and would not be used in MVC. The .NET 2.0 controls in WebForms support two-way data binding, but then the question of sanitization and validation against web vulnerabilities raise their head (and where those risks&nbsp;are mitigated).</p>
<p>I agree that there will always be a need for complex validation. I don&#39;t know how well you know data annotations but I understand the framework is straightforward to extend; you end up creating a class for a custom data annotations validation instead of a method for CSLA, but as far as&nbsp;I can see there is good support there. As data annotation uses reflection&nbsp;I think validation could be performed on combinations of many variables as complex validation would often require. Reflection isn&#39;t great, but that&#39;s what data binding uses and that is considered acceptable. There is no support for dependent properties in DA, but they are not required during batch validation.</p>
<p>I am entirely with you on how CSLA encourages good application structure, but my point was simply that you don&#39;t have to use CSLA to achieve that, it just helps.</p>
<p>I think I am more comfortable that CSLA is still the way, but any more thoughts would be welcome.</p>
<p>Many thanks,</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>Andrew</p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
