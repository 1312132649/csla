<html><header><title>Apparent PropertyStatus Bug</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Apparent PropertyStatus Bug</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/10762.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>MadGerbil posted on Tuesday, October 11, 2011</h2><p>I&#39;ve a collection of objects in a datagrid which is bound to a CollectionViewSource.&nbsp; The details of the selected item (or row) are shown in a details grid.&nbsp;&nbsp; I can select an item on the grid and the details show up in the details grid.&nbsp; This works well as a master/detail listing.</p>
<p>If I break a rule on the first item in the details grid the little read circle with exclamation point appears&nbsp;beside the field with the bad value.&nbsp; I can navigate through the different items on the list and break different rules on different fields&nbsp;and everything stays in sync.&nbsp; As I move through the list the UI shows valid and invalid values (with or without the property status) as expected.</p>
<p>The one exception is a field that has a Dependency rule.&nbsp; If I break the dependency rule on one row the rule is broken on all objects (or appears to be broken on all objects) as I flip through the different records.</p>
<p>For example, if a First Name is required if a Last name is provided&nbsp;if I fill in the&nbsp;Last&nbsp;Name (while&nbsp;First Name is blank) I get&nbsp;the error&nbsp;status on the First name as expected but it shows up as broken on all items in the collection.&nbsp; I&#39;ve two items in the collection - one seems to impact the rules on that one field for the whole collection.&nbsp;&nbsp; All of the other rules (non-Dependency property) work on an individual bases as expected.</p>
<p>Now what is even stranger is that if I place the Broken Rules collection for the entire collection into a Messagebox the broken rules seem to be working correctly.&nbsp; That is, if I break that field on two objects I get two broken rules for that field.&nbsp; If I fix one, the Broken Rules collection is reduced by that one item - even though teh UI shows the error status as error for all items in the collection.</p>
<p>It appears that the PropertyStatus box is out of sync with dependency rules - all the others work fine.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JonnyBee replied on Tuesday, October 11, 2011</h2><p>Which version of CSLA are you using?&nbsp; </p>
<p>I have updated PropertyStatus in CSLA 4.2 Beta to keep better sync and also update properly when using tab controls.<br />Business Rules and updates to the UI is also improved in CSLA 4.2 so it would really be helpful if you could test your project with the 4.2 Beta.</p>
<p>If it still fails then please post us a test/sample project to investigate/debug on.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>MadGerbil replied on Tuesday, October 11, 2011</h2><p>I&#39;m using 4.1.0.</p>
<p>(Edited: Originally put 4.0.1)</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JonnyBee replied on Tuesday, October 11, 2011</h2><p>I spent a number of hours digging into bugs in PropertyStatus last summer so this control is updated and should be down ported into your version. </p>
<p>The updates to Business Rules for 4.2 (and especially concerning async rules that us AddOutValues) may also solve some issues here. </p>
<p>So there are some known bugs in 4.0.x/4.1.x and it would really be helpful to get feedback on whether 4.2 solves your issues or not.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>MadGerbil replied on Tuesday, October 11, 2011</h2><p>I just tested it and it seems to work really well.&nbsp; :D</p>
<p>Are there other changes I should know about or should the rest of this work like 4.1.0 when it comes to WPF/Silverlight?</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JonnyBee replied on Tuesday, October 11, 2011</h2><p>The rule engine has some nice new features and a great rule library is available from <a href="http://cslagenfork.codeplex.com%20%20">http://cslagenfork.codeplex.com<br /></a></p>
<p>And also look at the RuleTutorial sample (Samples\Net\cs\RuleTutorial)</p>
<p>I have a blog post on the updates: <a href="http://jonnybekkum.wordpress.com/2011/08/29/csla-4-2-rules-update/">http://jonnybekkum.wordpress.com/2011/08/29/csla-4-2-rules-update/</a></p>
<p>And of course the change log for 4.2: <a href="http://www.lhotka.net/Article.aspx?area=4&amp;id=2607a4ef-e6a9-4801-aa0b-518c51267339%20">http://www.lhotka.net/Article.aspx?area=4&amp;id=2607a4ef-e6a9-4801-aa0b-518c51267339</a></p>
<p>AFAIK, there&#39;s a number of bugfixes and new features -&nbsp; no breaking changes for WPF/Silverlight.</p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
