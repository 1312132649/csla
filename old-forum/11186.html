<html><header><title>Csla and Windows Azure via WCF</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Csla and Windows Azure via WCF</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/11186.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>PavelU posted on Thursday, February 23, 2012</h2><p>Hello.</p>
<p>I&#39;m trying to adjust our project for Windows Azure , and I found a big issue, that can put it in jeopardy.</p>
<p>Windows Azure load balancer kills any idle connections that wait for one minute for service to response.</p>
<p>Sinc dataportalproxy sends requests, and gracely waits for response, and when dataportal receives request and doesn&#39;t talk to proxy while waiting for operation to be completed - load balancer kicks in, and closes connection, since nobody&#39;s talking for a long time:)</p>
<p>It becomes an issue especially when we are doing some time consumming operations, but possibly can be a problem even with some reporting queries.</p>
<p>We are currently using Csla 3.8, so I don&#39;t know if version 4 solves this problem or if it was addressed by Rocky.</p>
<p>Here :&nbsp;<a href="http://code.msdn.microsoft.com/WCF-Azure-NetTCP-Keep-Alive-09f50fd9">http://code.msdn.microsoft.com/WCF-Azure-NetTCP-Keep-Alive-09f50fd9</a></p>
<p>I found solution, but since I &nbsp;have only basic knowledge of WCF I would probably use some advice from some more experienced developers :)</p>
<p>Can anyone help me ?</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>sergeyb replied on Thursday, February 23, 2012</h2><p>This is just my opinion, but any operation that takes longer than a few seconds will annoy the user.&nbsp; I try very hard to keep my calls to at most a few seconds.&nbsp; If you have a long running process, you should just leave a marker in database or a message in Azure service bus and have a worker process that picks up on that signal and performs time consuming work.&nbsp; My 2 cents.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>PavelU replied on Thursday, February 23, 2012</h2><p>Thanks for your opinion.</p>
<p>We are considering this possibility, but there are a few things that are bugging us:</p>
<p>1. Our solution works seamlessly with localproxy and iis hosted wcf . there is almost no additional code. Adding Workers would add some extra effort on server and client side, and we opt to avoid that.</p>
<p>2. Those time consuming operations are for instance : creating database, converting data from other systems - we are using scenario in wchich we call Command that executes some sub operations and provides information about work progress, wchich is read by client application and displayed for user, so there is no problem for user to wait for work to be finished.</p>
<p>3. If we move our functionality to some worker we loose ApplicationContext.ClientContext informations, wchich are used for transfering important informations.</p>
<p>&nbsp;</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>sergeyb replied on Thursday, February 23, 2012</h2><p>Those are all valid reasons.&nbsp; I think you can continue on your path then.&nbsp; What I was trying to convey is that there is a reason why Azure behaves the way it does.&nbsp; They are trying to conserve valuable resources on the cloud.&nbsp; As a result, they encourage everyone to follow a different pattern of creating apps for the cloud.&nbsp; Hense, I would also encourage everyone, not just you specifically, to adapt those patterns.&nbsp; Again, the decision is ultimately yours, and I am just expressing my opinion on the subject matter.</p>
<p>Thanks.</p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
