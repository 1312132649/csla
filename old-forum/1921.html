<html><header><title>Missing DataPortal_Create(XXXX) a lot...</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Missing DataPortal_Create(XXXX) a lot...</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/1921.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>Izhido posted on Thursday, December 07, 2006</h2>Hi guys!<br><br>I'm having this problem, and was hoping someone could help me find the correct solution for it.<br><br>You see, I just recently upgraded my application to use CSLA 2.1. A BIG improvement, especially on the validation/authorization rules issue (per-instance vs per-type rule loading). Everything was being cool... until I compiled the application <img src="/emoticons/emotion-8.gif" alt="Indifferent [:|]" />. I didn't noticed it when reading the <a href="http://lhotka.net/Article.aspx?area=4&amp;id=f12cc951-0452-42d1-96a6-cfa7656863b1">change log</a>, but there it was. <br><br>What I didn't see was this:<br><br>"<span id="ctl00_ContentPlaceHolder1_BodyLabel">I also changed the <span class="CodeInline"><span><font color="#008000" face="Courier New">virtual</font></span></span>/<span class="CodeInline"><span><font color="#008000" face="Courier New">Overridable</font></span></span> <span class="CodeInline"><span><font color="#008000" face="Courier New">DataPortal_Create(object)</font></span></span> method declarations in <span class="CodeInline"><span><font color="#008000" face="Courier New">BusinessBase</font></span></span> and <span class="CodeInline"><span><font color="#008000" face="Courier New">BusinessListBase</font></span></span> to <span class="CodeInline"><span><font color="#008000" face="Courier New">DataPortal_Create()</font></span></span>, because that’s the more common default behavior."<br><br>OUCH! <br><br>Well, actually only one of my BOs use a DataPortal_Create(XXXX) that expects to use the criteria object to gather more information. The problem is, I fully expect there will appear more and more of these objects on my application. So, now I'm at a loss of what to do next. I mean, was it <span>that important</span> to remove this perfectly useful method? <br><br>My question: now that DataPortal_Create(XXXX)&nbsp; is gone, do you guys know of other ways to submit information other than the Criteria object to a DataPortal_Create() method (and ONLY to that specific method call), that have the same effect as if a Criteria object has been submitted to it? Preferably, one that does not force me to alter CSLA's sources (something I really prefer to avoid)? I know, I know... "use DataPortal_Fetch(XXXX) instead"... a useful solution, but not very elegant, and one that basically "clashes" with CSLA's best practices. <br><br>Any pointers you can give me to the solution will be highly appreciated. Thanks!<br></span></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>xal replied on Thursday, December 07, 2006</h2>The old behaviour is there... the change is, when you don't pass a criteria, it will look for:<br>dataportal_xxxx() instead of dataportal_xxx(ByVal crit <b><u>as Object</u></b>).<br><br>Before, if you didn't pass a criteria, it falled back to a method that took a criteria of type object, now it falls back to a method with NO parameters. When you DO pass criteria, it will look for the appropiate methods.<br><br>Andrés<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Thursday, December 07, 2006</h2>I'm not sure I follow.&nbsp; You need to call DP_C, and want to pass it an object that doesn't subclass CriteriaBase?&nbsp; What's the reason for not wanting to create a subclass of CriteriaBase?<br><br>Andy<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Izhido replied on Thursday, December 07, 2006</h2>xal: Ummm... that's interesting. The compile error I got after migrating was that I cannot override DataPortal_Create(XXXX) since it does not exist on BusinessBase. Checking with the "Object Browser" of VS, I could see in fact it does not exist. Should I understand, from what you told me, that Csla will look (probably through Reflection) for a "DataPortal_Create(XXXX)" method and, if it exists, will call it? Because if it is, then all I have to do is to remove the "Overrides " part of the method declaration. Is that it?<br><br>ajj: No, no. I think you didn't get it. All criteria objects I use on my application actually subclass from CriteriaBase. What I noticed was that, although the DataPortal.Create(XXXX) call actually expects a Criteria parameter, there is no longer any corresponding DataPortal_Create(XXXX) on the BusinessBase class, as of 2.1. And, somehow, I was counting on it still existing for one of my BOs. Although, if I understood xal correctly, that probably is not important anymore. <br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Thursday, December 07, 2006</h2>ahh, ok...<br><br>The solution to your problem is simple.&nbsp; Just change your protected override method that is given an error to private.&nbsp; That will fix the compile error.<br><br>Also, DataPortal.Create CAN be called without any parameters at all.&nbsp; If you do, it will look for an override of DataPortal_Create(). <br><br>Sorry for my confusion.<br><br>HTH<br>Andy<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Izhido replied on Thursday, December 07, 2006</h2>xal: Thanks! I completely forgot about "Overloads ". You're absolutely right!<br>

<br>

ajj: Yes, I know that. It's just that this particular BO actually requires a DP_C with parameters, the way I designed it. Thanks anyway!<br><br>- Izhido<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Thursday, December 07, 2006</h2>Well, just glad you got it working.&nbsp; <img src="/emoticons/emotion-1.gif" alt="Smile [:)]" /><br><br>I'm a C# only I person, so I was only thinking of what might be wrong that would cause C# not to compile.&nbsp; Fortunately Andres is a VB guy and got you to the proper solution.<br><br>I've been having a much harder time reading VB since .Net 2.. especially where there's more than one generic type on a class.&nbsp; <img src="/emoticons/emotion-5.gif" alt="Wink [;)]" /><br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Izhido replied on Thursday, December 07, 2006</h2>Hehehe...<br>I know exactly what you're talking about:<br><br><font face="Courier New" size="2">&nbsp;&nbsp;&nbsp; Public Class ConsultasTablas <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Inherits Colecciones.Catalogos.Bases.ConsultasTablasBase(Of ConsultasTablas, Objetos.Catalogos.ConsultaTabla)<br></font><br>subclasses:<br><br><font face="Courier New" size="2">Public Class ConsultasTablasBase(Of ColeccionFinal As MyAppColeccion(Of ColeccionFinal, ObjetoFinal), ObjetoFinal As MyAppObjeto(Of ObjetoFinal)) <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Inherits MyAppColeccion(Of ColeccionFinal, ObjetoFinal)</font><br><br>in turn subclasses:<br><br><font face="Courier New" size="2">Public Class MyAppColeccion(Of ColeccionFinal As Csla.BusinessListBase(Of ColeccionFinal, ObjetoFinal), ObjetoFinal As MyAppObjeto(Of ObjetoFinal))<br>&nbsp;&nbsp;&nbsp; Inherits Csla.BusinessListBase(Of ColeccionFinal, ObjetoFinal)</font><br><br>Would you believe this is real code in my app? <img src="/emoticons/emotion-2.gif" alt="Big Smile [:D]" /><img src="/emoticons/emotion-2.gif" alt="Big Smile [:D]" /><img src="/emoticons/emotion-2.gif" alt="Big Smile [:D]" /><br><br>- Izhido<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Thursday, December 07, 2006</h2>Ya, I believe it.&nbsp; Vb has always been a bit wordy for me.. just one of the reasons I like C#.<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>xal replied on Thursday, December 07, 2006</h2>Actually, you have to change it to overloads if you do use a criteria.<br><br>The way the dp works is:<br>If you pass NO criteria, it'll cal a dp_xxx that takes no params.<br>If you pass a criteria it will first look for a method that has a parameter of the same type as your criteria, if it finds that, that's it,. If not, it calls a dp_xxx method that takes a parameter of type Object.<br><br>Just to clarify, the criteria does not need to inherit from CriteriaBase... (unless you're doing something funny with it, like creating the class outside your business class and not calling the strong typed -generic- dp methods).<br><br>Andrés<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Thursday, December 07, 2006</h2><BLOCKQUOTE><div><img src="/Themes/basicblue/images/icon-quote.gif"> <strong>xal:</strong></div><div>Actually, you have to change it to overloads if you do use a criteria.</div></BLOCKQUOTE><br><br>Only if you're using VB though&nbsp;<img src="/emoticons/emotion-5.gif" alt="Wink [;)]" /> , although the parent seems to work with both.<br></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
