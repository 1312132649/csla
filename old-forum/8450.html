<html><header><title>SL 3.8.2  Object.Save fails in the InvokeMethod</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>SL 3.8.2  Object.Save fails in the InvokeMethod</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/8450.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>Jav posted on Monday, February 01, 2010</h2>This is my first attempt to try and save an object graph to the DB.  The code in MainPage.xaml is:<br /><br />Button x:Name="cmdSubmit"<br />                            Content="Submit"<br />                            Csla:InvokeMethod.MethodName="Save"<br />                            Csla:InvokeMethod.TriggerEvent="Click" /><br /><br />The object is a BusinessBase object.<br />The execution stops in the CallMethod method of InvokeMethod class on line 3.  The target looks like a perfectly sound parent object, and the methodName is Save, but the targetMethod comes back null with the following error:<br /><br />System.MissingMethodException was unhandled by user code<br />  Message="Save"<br />  StackTrace:<br />       at Csla.Silverlight.InvokeMethod.CallMethod(Object sender, EventArgs e)<br />       at System.Windows.Controls.Primitives.ButtonBase.OnClick()<br />       at System.Windows.Controls.Button.OnClick()<br />       at System.Windows.Controls.Primitives.ButtonBase.OnMouseLeftButtonUp(MouseButtonEventArgs e)<br />       at System.Windows.Controls.Control.OnMouseLeftButtonUp(Control ctrl, EventArgs e)<br />       at MS.Internal.JoltHelper.FireEvent(IntPtr unmanagedObj, IntPtr unmanagedObjArgs, Int32 argsTypeIndex, String eventName)<br />  InnerException:<br /><br />I do not have a Save Method in my object.  But looking at the demos, it appears that it is not necessary.  <br /><br />Can't understand what is the problem.<br /><br />Jav<br /></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>triplea replied on Tuesday, February 02, 2010</h2>Do you use a CslaDataProvider on your page? Also, you probably have to set the DataContext of the parent container to the provider.</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Jav replied on Tuesday, February 02, 2010</h2>Thanks for your help.  <br /><br />Yes I do use a CslaDataProvider, and I do have the DataContext on the page which is providing and acquiring data from the UI controls on the page.  I also know that the properties on my objects are being properly set with the data.  Now I am trying to save that info back to the DB.<br /><br />As for the DataContext, I even tried placing my Submit button by itself in a Canvas and setting the DataContext of the Canvas but to no avail.<br /><br />In fact in the Csla.Silverlight.InvokeMethod.CallMethod, both the target, i.e., the object that is to be saved and the MethodName are set properly.  The problem comes on the next line when the code tries to find the 'MethodName' method on the 'target'.<br /><br />Jav</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Jav replied on Tuesday, February 02, 2010</h2>I might have discovered what my problem was.  The DataContext in the LayoutRoot of the page is:<br /><br />DataContext="{Binding Source={StaticResource MyObjectData}, Path=Data}"<br /><br />As I mentioned in the previous post, I did enclose the Submit button in a Canvas with its DataContext set, but I set it by simply copying and pasting the line above.<br /><br />When I changed the Canvas DataContext to:<br /><br />DataContext="{Binding Source={StaticResource MyObjectData}}"<br /><br />without the Path, that error has disappeared and the code proceeds all the way to my DataPortal_xyz methods - of course it gets stuck there - but that's my problem.<br /><br />Jav<br /><br /></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>slh4342 replied on Wednesday, March 10, 2010</h2><p>I am having the same problem, but when I remove path=data, I lose the binding to my items</p>
<p>&lt;Grid&nbsp; x:Name=&quot;grdDates&quot; DataContext=&quot;{Binding Source={StaticResource PQIProviderDetailAccess}}&quot; &gt;</p>
<p>&lt;basics:DatePicker&nbsp; Text=&quot;{Binding Path=CreateDate, Mode=TwoWay}&quot; Grid.Row=&quot;2&quot; Grid.Column=&quot;1&quot; /&gt;<br />&lt;basics:DatePicker&nbsp; Text=&quot;{Binding OpenDate, Mode=TwoWay}&quot;&nbsp; Grid.Row=&quot;3&quot; Grid.Column=&quot;1&quot; /&gt;</p>
<p>&lt;Button x:Name=&quot;SaveButton&quot; Content=&quot;Save Dates&quot; Width=&quot;100&quot; <br />Grid.Row=&quot;22&quot; Grid.Column=&quot;0&quot; Grid.ColumnSpan=&quot;2&quot;<br />csla:InvokeMethod.TriggerEvent=&quot;Click&quot;<br />csla:InvokeMethod.MethodName=&quot;Save&quot;/&gt;</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Wednesday, March 10, 2010</h2><p>The DataContext of your form overall needs to be the Data property of the data provider.</p>
<p>But the DataContext of InvokeMethod needs to be the data provider itself, since it is the data provider that implements the method you are trying to invoke.</p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
