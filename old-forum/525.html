<html><header><title>Custom Identity - two ideas - which is more 'correct' ? </title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Custom Identity - two ideas - which is more 'correct' ? </h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/525.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>brettswift posted on Sunday, July 02, 2006</h2>I'm putting some extra fields in my Identity ... email, phone, enabled, etc. <br><br>Obviously there will be strict rules - only the user can edit their own password, only admins can reset the password etc. <br><br>So, 2 choices:<br><br>1) Convert custom IIdentity class from ReadonlyBase to EditableRoot, and set validation / authorization rules inside this. - allow your users to edit your IIdentity class (being very careful with authorization settings).<br><br>2) Keep custom IIdentity class as is, just add properties, and have another EditableRoot User BO class. <br><br><br>thoughts - pros/cons.<br>1) a)Pro: one class - less to modify later<br>&nbsp;&nbsp;&nbsp; b)Pro:&nbsp; in UI code, can convert principal.user to CustomIdentity directly and access email/phone properties.<br>&nbsp;&nbsp;&nbsp; c)Have to use the IIdentity object as child collection when the User is a foreign key to other tables. (like 2b below). <br>&nbsp;&nbsp;&nbsp; <br><br>2) <br>a) Pro: Easier to manage when the User is a foreign key in other tables&nbsp; ?&nbsp; <br><br>b) Con: In Project Tracker - I'm thinking there may be some odd stuff happening when you have a project, that has a child collection of PTIdentity objects?&nbsp; Might be better to keep them as "Resource" objects - but the resources would come from the User&nbsp; table...&nbsp; hmm<br><br><br><br>I'm tending to go with option 1, because its usually not good to duplicate code, but I want to throw this out there in case there are situations like 2b, where I may run into problems later... any thoughts?&nbsp; Is there a best practice in this scenario ? <br><br><br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Jurjen replied on Sunday, July 02, 2006</h2><P><FONT face=Verdana size=2>I would go for option 2.<BR>I don't think it would be a good idea to have a editableroot as iidentity, too much overhead. </FONT></P>
<P><FONT face=Verdana size=2>What I've done is create a 3 tables : myUser - myRole - myUserRole <BR><BR>myUser contains fields : ID, UserName, password, email, telephone, etc... AND IsActive<BR>myRole contains fields : ID, Role<BR>myUserRole contains fields : ID, RoleID, UserID</FONT></P>
<P><FONT face=Verdana size=2>Since CSLA Login procedure expects tables USER and ROLE, I've created two VIEWS (USER and ROLE) on the above mentioned tables. This way I've decoupled what I want to store about users and what the CSLA Security expects. As a bonus the VIEW USER only shows Users that are Active so it's easy to disable a user without having to delete it.<BR><BR>For the above mentioned tables you can easily create/generate BO's to do the maintenance on these tables (including password changes).</FONT></P>
<P><FONT face=Verdana size=2>I would extend your Identy class with a Collection (hashtable) so you can add as many/few properties as you'd like without having to change your Identity class each time you think of another property you'd like to add.</FONT></P>
<P><FONT face=Verdana size=2>HTH<BR>Jurjen.</FONT></P></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
