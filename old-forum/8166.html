<html><header><title>core CSLA 3.8 vidoes / design questions</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>core CSLA 3.8 vidoes / design questions</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/8166.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>djjlewis posted on Tuesday, December 15, 2009</h2>Hi,<br><br>I've recently purchased the core CSLA .NET 3.8 video series and have been watching the first three available videos and following along with the code samples download and I've noticed a couple of slight differences in the csla object patterns used in the samples than those shown in the project tracker app.<br><br>The first one that springs to mind is that when child lists and items are are created there is a call directly to DataPortal.CreateChild&lt;ChildType&gt;(parms...) rather than calling a LineItems.GetLineItems() factory method and then the factory method of LineItems doing the call to DataPortal.CreateChild. This is also the case when LineItems adds in a specific line item it would directly call DataPortal.CreateChild&lt;LineItem&gt;(). I can see that it eliminates an extra call but just wondered if this is now the "preferred" approach or whether or not one way should favoured over another? <br><br>I appreciate that these are just demo apps so I'm probably reading too much into this, but another thing I noticed is that none of the collection classes implement a default private constructor - was there a specific reason for this or just ignored as it's a demo app ;-)<br><br>Can I also just confirm that the best approach for dealing with managed properties is to always read class properties directly but wrapped inside a BypassPropertyChecks (so long as they are not needed) rather than calling ReadProperty, and that read-only properties are implemented by using a private setter that calls LoadProperty rather than using LoadProperty at various places within a class (thus eliminating calls to ReadProperty on the whole and greatly reducing the number of calls you would make to both LoadProperty)<br><br>Regards,<br><br>Dan.<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Tuesday, December 15, 2009</h2><P><BLOCKQUOTE><div><img src="/Themes/default/images/icon-quote.gif"> <strong>djjlewis:</strong></div><div><BR>The first one that springs to mind is that when child lists and items are are created there is a call directly to DataPortal.CreateChild&lt;ChildType&gt;(parms...) rather than calling a LineItems.GetLineItems() factory metho and then the factory method of LineItems doing the call to DataPortal.CreateChild. This is also the case when LineItems adds in a specific line item it would directly call DataPortal.CreateChild&lt;LineItem&gt;(). I can see that it eliminates an extra call but just wondered if this is now the "preferred" approach or whether or not one way should favoured over another? <BR></div></BLOCKQUOTE></P>
<P>Well they are just demo apps, that's true. But I wrote them using the style of coding that I've been using lately.</P>
<P>The super-consistent factory model used in ProjectTracker was primarily in response to comments from the <EM>previous</EM> book where there was confusion around the different implementations between parent and child types. I wanted to clearly illustrate that version 3.5+ allows complete structural parity between parent and child types.</P>
<P>But in practice I confess that I usually don't implement the internal factory methods on child types, preferring instead to directly use the child data portal functionality.</P>
<P><BLOCKQUOTE><div><img src="/Themes/default/images/icon-quote.gif"> <strong>djjlewis:</strong></div><div><BR>I appreciate that these are just demo appa so I'm probably reading too much into this, but another thing I noticed is that none of the collection classes implement a default private constructor - was there a specific reason for this or just ignored as it's a demo app ;-)<BR><BR></div></BLOCKQUOTE></P>
<P>That's an oversight on my part... I keep switching between .NET and SL. In SL you can't have private default constructors, and technically they aren't <EM>required</EM> in .NET either. The value of having a non-public default ctor in .NET is to remind developers to use the factory methods. But in SL developers don't (can't) have that crutch, and I suppose I'm slowly falling out of the habit of declaring the ctor at all in most cases...</P>
<P>CSLA doesn't really care - as long as you <EM>have a default ctor</EM> it doesn't matter what scope it is (except on SL where it must be public).</P>
<P><BLOCKQUOTE><div><img src="/Themes/default/images/icon-quote.gif"> <strong>djjlewis:</strong></div><div><BR>Can I also just confirm that the best approach for dealing with managed properties is to always read class properties directly but wrapped inside a BypassPropertyChecks (so long as they are not needed) rather than calling ReadProperty, and that read-only properties are implemented by using a private setter that calls LoadProperty rather than using LoadProperty at various places within a class (thus eliminating calls to ReadProperty on the whole and greatly reducing the number of calls you would make to both LoadProperty)<BR><BR></div></BLOCKQUOTE></P>
<P>When I wrote the 2008 book the BypassPropertyChecks concept was introduced quite late in the process. Rather than risking tons of errata in the book, I didn't use it to speak of (or at all?) because I was so far into the book at the time - and ProjectTracker is the demo for the book, not necessarily the demo for CSLA .NET in general - so the most important thing is that ProjectTracker match the book.</P>
<P>But let's face it, the code is a <EM>lot</EM> easier to read if you use BypassPropertyChecks, and if your read-only properties have a private setter that calls LoadProperty().</P>
<P>I think it is safe to say that the 4.0 snippets for a read-only property will conform to that model :)</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>djjlewis replied on Wednesday, December 16, 2009</h2>Prefect. Thanks for the clarification Rocky.<br><br>Regards,<br><br>Dan.<br></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
