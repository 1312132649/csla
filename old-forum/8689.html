<html><header><title>Getting WindowsPrincipal for server call</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Getting WindowsPrincipal for server call</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/8689.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>cds posted on Thursday, March 18, 2010</h2><p>I&#39;m implementing some SQL Server replication stuff that happens from a Silverlight app and am running into problems with security.</p>
<p>So, the user clicks a button which triggers an Update operation on the server and at that point I need to interact with SQL Server (using RMO - the replication API). </p>
<p>However, when I try this I get an exception when it tries to load the module - complaining that Type is not resolved for member: (my custom Principal) object. So, obviously the RMO code is expecting there to be a WindowsPrincipal as Thread.CurrentPrincipal.</p>
<p>Now, I&#39;ve managed to work around this by calling LogonUser and Impersonate, and then creating a new WindowsPrincipal using the WindowsIdentity and seting the Thread.CurrentPrincipal to my new principal. But to do this requires that I somehow store the credentials - i.e. username, domain, password.</p>
<p>Is there any way I can&nbsp;get access to the Principal/Identity that WCF is running as? I specifically don&#39;t want the&nbsp;identity of the user executing the application - I don&#39;t know whether they&#39;ll have the&nbsp;correct rights.&nbsp;(That&#39;s probably a basic question, but most of this security stuff is pretty foreign to me!)</p>
<p>Thanks,</p>
<p>Craig</p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
