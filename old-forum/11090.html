<html><header><title>Multiple DataContext</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Multiple DataContext</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/11090.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>sakt posted on Wednesday, January 25, 2012</h2><p>All,</p>
<p>We are facing scenario where we need to fetch data from two different databases. We had data context set up in our design by loading the dbml file for one database. And fetch is happening in factory methods using this data context. Could someone please assist on how to handle scenario of multiple dbml files (i.e two databases)</p>
<p>Thanks and Regards,</p>
<p>Sakt</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Wednesday, January 25, 2012</h2><p>You&#39;d write code like this in your DataPortal_Fetch or DAL implementation invoked by DataPortal_Fetch:</p>
<pre style="font-family:Consolas;background:white;color:black;font-size:13px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:blue;">using</span>&nbsp;(<span style="color:blue;">var</span>&nbsp;ctx&nbsp;=&nbsp;<span style="color:#2b91af;">ObjectContextManager</span>&lt;<span style="color:#2b91af;">SqlDbEntities</span>&gt;.GetManager(<span style="color:#a31515;">&quot;SqlDbEntities&quot;</span>))<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:blue;">var</span>&nbsp;data1&nbsp;=&nbsp;(<span style="color:blue;">from</span>&nbsp;r&nbsp;<span style="color:blue;">in</span>&nbsp;ctx.ObjectContext.People<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:blue;">where</span>&nbsp;r.Id&nbsp;==&nbsp;id<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:blue;">select</span>&nbsp;r).First();<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:green;">//&nbsp;load&nbsp;business&nbsp;object&nbsp;properties&nbsp;from&nbsp;data1&nbsp;object</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:blue;">using</span>&nbsp;(<span style="color:blue;">var</span>&nbsp;ctx&nbsp;=&nbsp;<span style="color:#2b91af;">ObjectContextManager</span>&lt;<span style="color:#2b91af;">SqlDbEntities</span>&gt;.GetManager(<span style="color:#a31515;">&quot;OtherEntities&quot;</span>))<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:blue;">var</span>&nbsp;data2&nbsp;=&nbsp;(<span style="color:blue;">from</span>&nbsp;r&nbsp;<span style="color:blue;">in</span>&nbsp;ctx.ObjectContext.OtherPeople<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:blue;">where</span>&nbsp;r.Id&nbsp;==&nbsp;id<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:blue;">select</span>&nbsp;r).First();<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:green;">//&nbsp;load&nbsp;business&nbsp;object&nbsp;properties&nbsp;from&nbsp;data2&nbsp;object</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br /></pre></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>sakt replied on Thursday, January 26, 2012</h2><p>Hi,</p>
<p>Thank you very much for the reply. In my case, we have dbml file for database1&nbsp;in our data layer . Hence I understand that we would need to one more dbml file for other database2 and access the same using the code in Dataportal_Fetch.</p>
<p>Please note that my understanding is right as im newbie to the same. Also I would like to let you know that from the other database2, we are just going to get data from table. There will be no Add,update and delete operations involved.</p>
<p>Regards,</p>
<p>Sakt</p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
