<html><header><title>Delete + IsDirty - RemoveItem, Order of Operations Problem</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Delete + IsDirty - RemoveItem, Order of Operations Problem</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/3576.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>lacota posted on Friday, September 21, 2007</h2><P>Hello</P>
<P>I am using v2.1.4 of csla. I have a collection derived from businesslistbase bound to a grid on a form. The form has a save button that is disabled until the following conditions are met (IsValid and IsDirty). When the user deletes an item from the grid the listchanged and removingitem events are raised. Unfortunately the events&nbsp;are raised before the item is placed in the Deleted List (See csla code below)&nbsp;&nbsp;&nbsp;</P>
<P>&nbsp;protected override void RemoveItem(int index)<BR>&nbsp;&nbsp;&nbsp; {<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // when an object is 'removed' it is really<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // being deleted, so do the deletion work<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; C child = this[index];<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; base.RemoveItem(index);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; CopyToDeletedList(child);<BR>&nbsp;&nbsp;&nbsp; }</P>
<P>As a result, if I put my code to enable or disable buttons in either of the above events, the IsDirty flag will still be false when checked.</P>
<P>Is this a bug or a feature? Is there a more elegant workaround than placing a call to check the business object state in all my button click event handlers?</P>
<P>Thanks</P>
<P>&nbsp;</P>
<P>&nbsp;</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Friday, September 21, 2007</h2>Yes, this is fixed in 3.0.1 or 3.0.2.</div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
