<html><header><title>How to extract info from DataPortalException.BusinessObject to understand an exception</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>How to extract info from DataPortalException.BusinessObject to understand an exception</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/7839.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>jgamba posted on Wednesday, October 21, 2009</h2>Dear all...<br /><br />My staff are building a exception Custom Handler for understand the info contained in <br />DataPortalException.BusinessObject at UI Layer. I found this thread http://forums.lhotka.net/forums/thread/22952.aspx, there Rocky comments about this topic:<br /><br />"This is part of the behavior of the DataPortalException - it brings back the object as it was at the time of the exception. The purpose behind doing this is to provide you with complete information for debugging or otherwise attempting to understand the reason for the exception."<br /><br />My concern is: any reference code about?<br /><br />Say you that I have a parent object with children objects, so one of them fails saving, I want to signal exactly to the end-user how to identify the erroneous child with Additional information to understand the reason for an exception.<br /><br />thanks in advance</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Thursday, October 22, 2009</h2><P>I have never viewed that feature as a way to generate end-user output. I have always viewed it as a way for a developer to debug or troubleshoot an issue during development.</P>
<P>I'm not sure there's any way to automate around this. Every object graph is different, and generally speaking there's no sure way to know which object in the graph caused the failure.</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Henrik replied on Friday, October 23, 2009</h2>You need to know which exception is raised, for example a duplicate primary key SQLException. You’ll need to catch this in the DataPortal_xxx method. To solve it you’ll need to create a new specific exception subclass like: ItemAlreadyExistsException, that can carry the child objects unique id/primary key. When you catch the exception, you stuff the unique child id into the exception and the UI will then be able to identify which child that caused the exception. <br /><br />Notice though, that this will only  work for the first child object that causes an exception. A better way would be to add a validation rule that checks for duplicate keys, invalid data or whatever. This way you’ll be able to display the validation errors for each object.<br /><br />Cheers<br />/Henrik</div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
