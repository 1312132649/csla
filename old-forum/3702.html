<html><header><title>Databinding killing performance</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Databinding killing performance</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/3702.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 posted on Friday, October 12, 2007</h2>Hi,<br><br>I have a winforms app and a screen that edits a quote, or invoice. <br><br>My problem is that databinding and property changed events are making things really slow.&nbsp; I am fixing some of it; for example, operations which delete multiple lines or group multiple lines, I turn off RaiseListChangeEvents on both the BindingSource and the collection itself.&nbsp; that seems to help a bit.<br><br>Other areas though include adding a single line.&nbsp; In my case, the Quote object has a Total, SubTotal, and Tax, which if a single line is added, those are changed.&nbsp; The Quote listens for a ListChanged event from its Items collection, and raises property changed event for the Items property itself.. that seems to cause it to requery the totals fine.<br><br>I'd like to speed things up a bit more.. any ideas?&nbsp; <br><br>Oh, another thing.&nbsp; I have three Contact (sold, ship, bill) properties on the Quote which are also BusinessBase objects.&nbsp; These objects in turn contain three more objects (one for address, two for phone / fax numbers).&nbsp; The Contact object though uses a facade to hide the Address and Phone classes, but the Address and Phone classes still call PropertyHasChanged (to get rule checking and dirty flagging).&nbsp; Should I change the hidden classes to just do rules and dirty manually, and have the Contact class raise the propertychange on its own?&nbsp; The Contact property listens to its child objects and raises the appropiate property changed on its behalf... but i'm thinking that perhaps its more efficient to just have the contact object do that part?&nbsp; <br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Friday, October 12, 2007</h2><P>Are you sure your object model reflects your use case? While sometimes you do need UI helper objects to reshape a business object model, more often than not, a business object model will be very close to the UI's requirements, because both the UI and objects were created for the same use case.</P>
<P>In other words, why do some of your objects have sub-objects? Do they exist due to the requirements of the use case? Or due to the shape of the underlying data? If the latter, your object model may be overly complex.</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Friday, October 12, 2007</h2>Well, the use case is like this.&nbsp; product bundles must show on the grid each product which makes up the bundle.&nbsp; You can't do anything to the items that make up the bundle, but you can change the price of the bundle itself and move it up or down on the list.&nbsp; If its moved up or down, all the sub items most move as well and stay in the same order as they originally were added (bundle item order is specified by the product administrator).&nbsp; Also, users can create ad-hoc bundles by grouping non-bundle items together.&nbsp; <br><br>When a bundle is removed, all the items must go with it.&nbsp; Items in a bundle can't have their order changed.&nbsp; Groups are similar, except you can take a sub item out of the group and it should be added back at the end of the list. <br><br>Additionally, depending on which form is printed, sub items must be shown or hidden.&nbsp; Basically, customers shouldn't see sub items, but internally we have to.<br><br>So perhaps my object model is screwy, but I'd still have problems with a flat list, keeping the sub items together and indivisible and such.<br><br>Also, some of the slowness is not related to the line items at all; its related to other parts of the document (sold to, ship to, bill to).<br></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
