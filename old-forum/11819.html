<html><header><title>CSLA .NET and Microsoft Unity (IoC, DI)</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>CSLA .NET and Microsoft Unity (IoC, DI)</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/11819.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>BeyondNet posted on Tuesday, February 05, 2013</h2><p>Good Afternoom</p>
<p>I need to test with respect to possibility to use ASP .NET MVC 4 + CSLA .NET 4.3 + Repository Pattern. In my tests found the following problem with &quot;Microsoft Unity&quot;. &nbsp;I have a message&nbsp; error when I use use the Data Portal with WCF (3 Tiers):</p>
<p><em>System.Runtime.Serialization.InvalidDataContractException: Type &#39;System.Collections.Generic.IEnumerable`1[Microsoft.Practices.Unity.ContainerRegistration]&#39; cannot be serialized. Consider marking it with the DataContractAttribute attribute, and marking all of its members you want serialized with the DataMemberAttribute attribute.&nbsp; If the type is a collection, consider marking it with the CollectionDataContractAttribute.&nbsp; See the Microsoft .NET Framework documentation for other supported types.</em></p>
<p>Please, do you mind if you give me some suggestions.&nbsp;</p>
<p>&nbsp;</p>
<p>P.D. I&#39;m using the attribute Serializable()</p>
<p>Best Regards</p>
<p>&nbsp;</p>
<p>&nbsp;</p></div><div style='padding:0 15 3 15;background-color:lightgreen'><h2>JonnyBee replied on Wednesday, February 06, 2013</h2><p>An Interface is NOT serializable. So for a comparison with f.ex MEF you must mark the injected Repository and eventual IoC container as NonSerialized and NotUndoable. </p>
<p><b>&nbsp;&nbsp;&nbsp; [NonSerialized, NotUndoable]</b><br />&nbsp;&nbsp;&nbsp; private IRootDataAccess _myRootDataAccess;<br /><br />&nbsp;&nbsp;&nbsp; [EditorBrowsable(EditorBrowsableState.Never)]<br />&nbsp;&nbsp;&nbsp; [Import(typeof(IRootDataAccess))]<br />&nbsp;&nbsp;&nbsp; private IRootDataAccess MyRootDataAccess<br />&nbsp;&nbsp;&nbsp; {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; get { return _myRootDataAccess; }<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; set { _myRootDataAccess = value; }<br />&nbsp;&nbsp;&nbsp; }</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>BeyondNet replied on Wednesday, February 06, 2013</h2><p>JonnyBee thanks for response.</p>
<p>Can you help me with some sample?&nbsp;</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JonnyBee replied on Wednesday, February 06, 2013</h2><p>Download the source from <a href="http://cslacontrib.codeplex.com">http://cslacontrib.codeplex.com</a>&nbsp; </p>
<p>There is a separate CslaContrib.Mef project that contains base classes and MEF IoC container <br />and in the Samples download&nbsp;you will find both Repository and ObjectFactory sample.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>BeyondNet replied on Wednesday, February 06, 2013</h2><p>Jonny</p>
<p>&nbsp;</p>
<p>Thanks for your advise</p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
