<html><header><title>Difference between List.GetAll() and DataPortal_Fetch</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Difference between List.GetAll() and DataPortal_Fetch</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/11462.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>harrykod posted on Monday, July 09, 2012</h2><p>I have a patient class which has a child class notes.</p>
<p>When the patient loads i can load the child class too and make edits and save them back.</p>
<p>But when i have to do a search on all the notes and return only a few with matching criteria i call the GetAll() in my NotesList class. The search does return the records but the updates i make to the searched results do not seem to get saved. Can somebody help me understand why this is happening and how to fix it?</p></div><div style='padding:0 15 3 15;background-color:lightgreen'><h2>RockfordLhotka replied on Monday, July 09, 2012</h2><p>I&#39;m not sure exactly what GetAll does, but I suspect (from your description) that it returns a new list that only references the filtered items.</p>
<p>That new list isn&#39;t a BusinessListBase subclass, and so can&#39;t be saved. It isn&#39;t a CSLA object at all probably.</p>
<p>You need to use a scheme that returns a <em>bound list</em>, and CSLA does help you with this. If you use LINQ queries to do your filter, you can use the ToSyncList extension method.</p>
<p>This will actually work on any ObservableCollection (such as BusinessListBase), and it creates a new list that is &quot;bound&quot; to the original list. So changes to this new list impact the original list too. Then you can save the original list and any changes to the bound list will be saved.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>harrykod replied on Tuesday, July 10, 2012</h2><p class="MsoNormal" style="line-height:normal;margin:0in 0in 10pt;mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;"><span style="font-family:&#39;Arial&#39;,&#39;sans-serif&#39;;color:black;font-size:9pt;mso-fareast-font-family:&#39;Times New Roman&#39;;">This is my code in the CSLA Notes.cs</span></p>
<p class="MsoNormal" style="line-height:normal;margin:0in 0in 10pt;mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;"><span style="font-family:&#39;Arial&#39;,&#39;sans-serif&#39;;color:black;font-size:9pt;mso-fareast-font-family:&#39;Times New Roman&#39;;">&nbsp;</span><span style="font-family:Consolas;color:blue;font-size:10pt;mso-fareast-font-family:&#39;Times New Roman&#39;;mso-bidi-font-family:Arial;">public</span><span style="font-family:Consolas;color:black;font-size:10pt;mso-fareast-font-family:&#39;Times New Roman&#39;;mso-bidi-font-family:Arial;"> </span><span style="font-family:Consolas;color:blue;font-size:10pt;mso-fareast-font-family:&#39;Times New Roman&#39;;mso-bidi-font-family:Arial;">static</span><span style="font-family:Consolas;color:black;font-size:10pt;mso-fareast-font-family:&#39;Times New Roman&#39;;mso-bidi-font-family:Arial;"> </span><span style="font-family:Consolas;color:#2b91af;font-size:10pt;mso-fareast-font-family:&#39;Times New Roman&#39;;mso-bidi-font-family:Arial;">Notes</span><span style="font-family:Consolas;color:black;font-size:10pt;mso-fareast-font-family:&#39;Times New Roman&#39;;mso-bidi-font-family:Arial;"> GetAll(</span><span style="font-family:Consolas;color:blue;font-size:10pt;mso-fareast-font-family:&#39;Times New Roman&#39;;mso-bidi-font-family:Arial;">long</span><span style="font-family:Consolas;color:black;font-size:10pt;mso-fareast-font-family:&#39;Times New Roman&#39;;mso-bidi-font-family:Arial;"> eID, </span><span style="font-family:Consolas;color:blue;font-size:10pt;mso-fareast-font-family:&#39;Times New Roman&#39;;mso-bidi-font-family:Arial;">string </span><span style="font-family:Consolas;color:black;font-size:10pt;mso-fareast-font-family:&#39;Times New Roman&#39;;mso-bidi-font-family:Arial;">notes1) {</span><span style="font-family:&#39;Arial&#39;,&#39;sans-serif&#39;;color:black;font-size:9pt;mso-fareast-font-family:&#39;Times New Roman&#39;;"></span></p>
<p class="MsoNormal" style="line-height:normal;margin:0in 0in 10pt;mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;"><span style="font-family:Consolas;color:blue;font-size:10pt;mso-fareast-font-family:&#39;Times New Roman&#39;;mso-bidi-font-family:Arial;">return </span><span style="font-family:Consolas;color:#2b91af;font-size:10pt;mso-fareast-font-family:&#39;Times New Roman&#39;;mso-bidi-font-family:Arial;">DataPortal</span><span style="font-family:Consolas;color:blue;font-size:10pt;mso-fareast-font-family:&#39;Times New Roman&#39;;mso-bidi-font-family:Arial;">.FetchChild&lt;</span><span style="font-family:Consolas;color:#2b91af;font-size:10pt;mso-fareast-font-family:&#39;Times New Roman&#39;;mso-bidi-font-family:Arial;">Notes</span><span style="font-family:Consolas;color:blue;font-size:10pt;mso-fareast-font-family:&#39;Times New Roman&#39;;mso-bidi-font-family:Arial;">&gt;(encounterID, notes1); </span></p>
<p class="MsoNormal" style="line-height:normal;margin:0in 0in 0pt;"><span style="font-family:Consolas;color:blue;font-size:10pt;mso-fareast-font-family:&#39;Times New Roman&#39;;mso-bidi-font-family:Arial;">} </span></p>
<p class="MsoNormal" style="line-height:normal;margin:0in 0in 10pt;mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;"><span style="font-family:Consolas;color:blue;font-size:10pt;mso-fareast-font-family:&#39;Times New Roman&#39;;mso-bidi-font-family:Arial;">This is calling&nbsp;</span></p>
<p class="MsoNormal" style="line-height:normal;margin:0in 0in 10pt;mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;"><span style="font-family:Consolas;color:blue;font-size:10pt;mso-fareast-font-family:&#39;Times New Roman&#39;;mso-bidi-font-family:Arial;">protected void DataPortal_Fetch(</span><span style="font-family:Consolas;color:#2b91af;font-size:10pt;mso-fareast-font-family:&#39;Times New Roman&#39;;mso-bidi-font-family:Arial;">NoteSearchCriteria</span><span style="font-family:Consolas;color:blue;font-size:10pt;mso-fareast-font-family:&#39;Times New Roman&#39;;mso-bidi-font-family:Arial;"> criteria) </span></p>
<p class="MsoNormal" style="line-height:normal;margin:0in 0in 10pt;mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;"><span style="font-family:Consolas;color:blue;font-size:10pt;mso-fareast-font-family:&#39;Times New Roman&#39;;mso-bidi-font-family:Arial;">{&nbsp;</span><span style="font-family:Consolas;color:#2b91af;font-size:10pt;mso-fareast-font-family:&#39;Times New Roman&#39;;mso-bidi-font-family:Arial;">DataPortal</span><span style="font-family:Consolas;color:blue;font-size:10pt;mso-fareast-font-family:&#39;Times New Roman&#39;;mso-bidi-font-family:Arial;">.FetchChild&lt;</span><span style="font-family:Consolas;color:#2b91af;font-size:10pt;mso-fareast-font-family:&#39;Times New Roman&#39;;mso-bidi-font-family:Arial;">Notes</span><span style="font-family:Consolas;color:blue;font-size:10pt;mso-fareast-font-family:&#39;Times New Roman&#39;;mso-bidi-font-family:Arial;">&gt;(criteria.EID, criteria.Notes1);&nbsp;}&nbsp;</span></p>
<p class="MsoNormal" style="line-height:normal;margin:0in 0in 10pt;mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;"><span style="font-family:Consolas;color:blue;font-size:10pt;mso-fareast-font-family:&#39;Times New Roman&#39;;mso-bidi-font-family:Arial;">&nbsp;which in turn is calling the </span></p>
<p class="MsoNormal" style="line-height:normal;margin:0in 0in 10pt;mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;"><span style="font-family:Consolas;color:blue;font-size:10pt;mso-fareast-font-family:&#39;Times New Roman&#39;;mso-bidi-font-family:Arial;">protected void Child_Fetch(long encounterID,string&nbsp;notes1) {</span></p>
<p class="MsoNormal" style="line-height:normal;margin:0in 0in 10pt;mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;"><span style="font-family:Consolas;color:blue;font-size:10pt;mso-fareast-font-family:&#39;Times New Roman&#39;;mso-bidi-font-family:Arial;">using (var ctx = Csla.Data.</span><span style="font-family:Consolas;color:#2b91af;font-size:10pt;mso-fareast-font-family:&#39;Times New Roman&#39;;mso-bidi-font-family:Arial;">ObjectContextManager</span><span style="font-family:Consolas;color:blue;font-size:10pt;mso-fareast-font-family:&#39;Times New Roman&#39;;mso-bidi-font-family:Arial;">&lt;P.Models.Enco.Data.</span><span style="font-family:Consolas;color:#2b91af;font-size:10pt;mso-fareast-font-family:&#39;Times New Roman&#39;;mso-bidi-font-family:Arial;">EncoEntities</span><span style="font-family:Consolas;color:blue;font-size:10pt;mso-fareast-font-family:&#39;Times New Roman&#39;;mso-bidi-font-family:Arial;">&gt;.GetManager(P.Models.Data.</span><span style="font-family:Consolas;color:#2b91af;font-size:10pt;mso-fareast-font-family:&#39;Times New Roman&#39;;mso-bidi-font-family:Arial;">EncoEntities</span><span style="font-family:Consolas;color:blue;font-size:10pt;mso-fareast-font-family:&#39;Times New Roman&#39;;mso-bidi-font-family:Arial;">.Name)) </span></p>
<p class="MsoNormal" style="line-height:normal;margin:0in 0in 10pt;mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;"><span style="font-family:Consolas;color:#2b91af;font-size:10pt;mso-fareast-font-family:&#39;Times New Roman&#39;;mso-bidi-font-family:Arial;">IEnumerable</span><span style="font-family:Consolas;color:blue;font-size:10pt;mso-fareast-font-family:&#39;Times New Roman&#39;;mso-bidi-font-family:Arial;">&lt;PMIS.Models.Encounters.Data.</span><span style="font-family:Consolas;color:#2b91af;font-size:10pt;mso-fareast-font-family:&#39;Times New Roman&#39;;mso-bidi-font-family:Arial;">Notes</span><span style="font-family:Consolas;color:blue;font-size:10pt;mso-fareast-font-family:&#39;Times New Roman&#39;;mso-bidi-font-family:Arial;">&gt; data = null; </span></p>
<p class="MsoNormal" style="line-height:normal;margin:0in 0in 10pt;mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;"><span style="font-family:Consolas;color:blue;font-size:10pt;mso-fareast-font-family:&#39;Times New Roman&#39;;mso-bidi-font-family:Arial;">data = ctx.ObjectContext.GetNotes(encounterID,notes1);</span></p>
<p class="MsoNormal" style="line-height:normal;margin:0in 0in 0pt;mso-layout-grid-align:none;"><span style="font-family:Consolas;color:blue;font-size:10pt;mso-fareast-font-family:&#39;Times New Roman&#39;;mso-bidi-font-family:Arial;">&nbsp;</span><span style="font-family:Consolas;font-size:9.5pt;">ReadData(data);</span></p>
<p class="MsoNormal" style="line-height:normal;margin:0in 0in 0pt;mso-layout-grid-align:none;"><span style="font-family:Consolas;font-size:9.5pt;">}</span></p>
<p class="MsoNormal" style="line-height:normal;margin:0in 0in 0pt;"><span style="font-family:Consolas;color:blue;font-size:10pt;mso-fareast-font-family:&#39;Times New Roman&#39;;mso-bidi-font-family:Arial;">&nbsp;&nbsp;In my view model i have the following code:</span><span style="font-family:&#39;Arial&#39;,&#39;sans-serif&#39;;color:black;font-size:9pt;mso-fareast-font-family:&#39;Times New Roman&#39;;"></span></p>
<p class="MsoNormal" style="line-height:normal;margin:0in 0in 10pt;mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;"><span style="font-family:&#39;Arial&#39;,&#39;sans-serif&#39;;color:black;font-size:9pt;mso-fareast-font-family:&#39;Times New Roman&#39;;">&nbsp;</span></p>
<p class="MsoNormal" style="line-height:normal;margin:0in 0in 10pt;mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;"><span style="font-family:Consolas;color:black;font-size:10pt;mso-fareast-font-family:&#39;Times New Roman&#39;;mso-bidi-font-family:Arial;">Model =&nbsp;</span><span style="font-family:Consolas;color:#2b91af;font-size:10pt;mso-fareast-font-family:&#39;Times New Roman&#39;;mso-bidi-font-family:Arial;">Notes</span><span style="font-family:Consolas;color:black;font-size:10pt;mso-fareast-font-family:&#39;Times New Roman&#39;;mso-bidi-font-family:Arial;">.GetAll(1, e.MethodParameter.ToString()); </span></p>
<p class="MsoNormal" style="line-height:normal;margin:0in 0in 6pt;"><span style="font-family:Consolas;color:black;font-size:10pt;mso-fareast-font-family:&#39;Times New Roman&#39;;mso-bidi-font-family:Arial;">It does give me the results but the parent object is set to null. </span><span style="font-family:&#39;Arial&#39;,&#39;sans-serif&#39;;color:black;font-size:9pt;mso-fareast-font-family:&#39;Times New Roman&#39;;"></span></p>
<p class="MsoNormal" style="margin:0in 0in 10pt;"><span style="font-family:Calibri;font-size:small;">&nbsp;</span></p>
<p>&nbsp;</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Tuesday, July 10, 2012</h2><p>Are you sure your code is correct in the post? It looks like you are calling FetchChild from a root factory method - and that&#39;s not right. If that code is correct, your DataPortal_Fetch method will never be called at all, and the data portal won&#39;t work correctly at all.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>harrykod replied on Tuesday, July 10, 2012</h2><p>I am sorry. You are right. The dataportal_fetch is not called at all. The GetAll() is calling the Child_Fetch directly. So how can i search my BusinessListBase subclass and not create a new list?</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JonnyBee replied on Tuesday, July 10, 2012</h2><p>Hi, </p>
<p>1. Preferrably by sending search criteria as parameter to the DataPortal.Fetch&lt;T&gt; (and in turn&nbsp; passed on to DataPortal_Fetch Method) so that the database Query will use Your search criterias in the SQL. </p>
<p>2. If WindowsForms .- I prefer to use the FilteredBindingList class to do filtering on the Client..</p>
<p>3. Non-WindowsForms - you can filter a list on the Client (if list is already fetched) by using linq-2-objects and the Linq Exstension .ToSyncList() &nbsp;</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>harrykod replied on Wednesday, July 11, 2012</h2><p class="MsoNormal"><span style="font-size:small;"><span style="font-family:Calibri;">I modified my code as follows:</span></span></p>
<p class="MsoNormal"><span style="font-family:Consolas;font-size:9.5pt;">In my view model I am using the BeginRefresh to update the model asynchronously.</span></p>
<p class="MsoNormal"><span style="font-family:Consolas;font-size:9.5pt;">&nbsp;</span></p>
<p class="MsoNormal"><span style="font-family:Consolas;font-size:9.5pt;">BeginRefresh(callback =&gt; <span style="color:#2b91af;">Notes</span>.GetAll(1, e.MethodParameter.ToString(), callback));</span></p>
<p class="MsoNormal"><span style="font-family:Consolas;font-size:9.5pt;">&nbsp;</span></p>
<p class="MsoNormal"><span style="font-family:Consolas;font-size:9.5pt;">In my CSLA Model Notes.cs, I have defined my GetAll as follows:</span></p>
<p class="MsoNormal"><span style="font-family:Consolas;color:blue;font-size:9.5pt;">public</span><span style="font-family:Consolas;font-size:9.5pt;"> <span style="color:blue;">static</span> <span style="color:blue;">void</span> GetAll(<span style="color:blue;">long</span> encounterID, <span style="color:blue;">string</span> notes1, <span style="color:#2b91af;">EventHandler</span>&lt;<span style="color:#2b91af;">DataPortalResult</span>&lt;<span style="color:#2b91af;">Notes</span>&gt;&gt; callback)</span></p>
<p class="MsoNormal"><span style="font-family:Consolas;font-size:9.5pt;"><span style="mso-spacerun:yes;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>{</span></p>
<p class="MsoNormal"><span style="font-family:Consolas;font-size:9.5pt;"><span style="mso-spacerun:yes;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="color:#2b91af;">DataPortal</span>.BeginFetch&lt;<span style="color:#2b91af;">Notes</span>&gt;(<span style="color:blue;">new</span> <span style="color:#2b91af;">Note</span> { EncounterID = encounterID, Notes1 = notes1 }, callback);</span></p>
<p class="MsoNormal"><span style="font-family:Consolas;font-size:9.5pt;"><span style="mso-spacerun:yes;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>}</span></p>
<p class="MsoNormal"><span style="font-family:Consolas;font-size:9.5pt;">&nbsp;</span></p>
<p class="MsoNormal"><span style="font-family:Consolas;font-size:9.5pt;">And my DataPortal_Fetch as:</span></p>
<p class="MsoNormal"><span style="font-family:Consolas;color:blue;font-size:9.5pt;">protected</span><span style="font-family:Consolas;font-size:9.5pt;"> <span style="color:blue;">void</span> DataPortal_Fetch(<span style="color:#2b91af;">Note</span> criteria)</span></p>
<p class="MsoNormal"><span style="font-family:Consolas;font-size:9.5pt;"><span style="mso-spacerun:yes;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>{</span></p>
<p class="MsoNormal"><span style="font-family:Consolas;font-size:9.5pt;"><span style="mso-spacerun:yes;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="color:blue;">using</span> (<span style="color:blue;">var</span> ctx = Csla.Data.<span style="color:#2b91af;">ObjectContextManager</span>&lt;PMIS.Models.Encounters.Data.<span style="color:#2b91af;">EncounterEntities</span>&gt;.GetManager(PMIS.Models.Data.<span style="color:#2b91af;">EncounterEntities</span>.Name))</span></p>
<p class="MsoNormal"><span style="font-family:Consolas;font-size:9.5pt;"><span style="mso-spacerun:yes;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>{</span></p>
<p class="MsoNormal"><span style="font-family:Consolas;font-size:9.5pt;"><span style="mso-spacerun:yes;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="color:#2b91af;">IEnumerable</span>&lt;PMIS.Models.Encounters.Data.<span style="color:#2b91af;">Notes</span>&gt; data = <span style="color:blue;">null</span>;</span></p>
<p class="MsoNormal"><span style="font-family:Consolas;font-size:9.5pt;"><span style="mso-spacerun:yes;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>data = ctx.ObjectContext.Notes.Where(n =&gt; n.EncounterID == criteria.EncounterID &amp;&amp; n.Notes1.Contains(criteria.Notes1));</span></p>
<p class="MsoNormal"><span style="font-family:Consolas;font-size:9.5pt;">&nbsp;</span></p>
<p class="MsoNormal"><span style="font-family:Consolas;font-size:9.5pt;"><span style="mso-spacerun:yes;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>ReadData(data);</span></p>
<p class="MsoNormal"><span style="font-family:Consolas;font-size:9.5pt;">&nbsp;</span></p>
<p class="MsoNormal"><span style="font-family:Consolas;font-size:9.5pt;"><span style="mso-spacerun:yes;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>}</span></p>
<p class="MsoNormal"><span style="font-family:Consolas;font-size:9.5pt;"><span style="mso-spacerun:yes;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>}</span></p>
<p class="MsoNormal"><span style="font-family:Consolas;font-size:9.5pt;">&nbsp;</span></p>
<p class="MsoNormal"><span style="font-family:Consolas;font-size:9.5pt;">The ReadData is defined as follows:</span></p>
<p class="MsoNormal"><span style="font-family:Consolas;font-size:9.5pt;">&nbsp;</span></p>
<p class="MsoNormal"><span style="font-family:Consolas;color:blue;font-size:9.5pt;">private</span><span style="font-family:Consolas;font-size:9.5pt;"> <span style="color:blue;">void</span> ReadData(<span style="color:#2b91af;">IEnumerable</span>&lt;PMIS.Models.Encounters.Data.<span style="color:#2b91af;">Notes</span>&gt; data)</span></p>
<p class="MsoNormal"><span style="font-family:Consolas;font-size:9.5pt;"><span style="mso-spacerun:yes;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>{</span></p>
<p class="MsoNormal"><span style="font-family:Consolas;font-size:9.5pt;"><span style="mso-spacerun:yes;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>RaiseListChangedEvents = <span style="color:blue;">false</span>;</span></p>
<p class="MsoNormal"><span style="font-family:Consolas;font-size:9.5pt;">&nbsp;</span></p>
<p class="MsoNormal"><span style="font-family:Consolas;font-size:9.5pt;"><span style="mso-spacerun:yes;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="color:blue;">foreach</span> (<span style="color:blue;">var</span> item <span style="color:blue;">in</span> data)</span></p>
<p class="MsoNormal"><span style="font-family:Consolas;font-size:9.5pt;"><span style="mso-spacerun:yes;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="mso-spacerun:yes;">&nbsp;&nbsp;</span>{</span></p>
<p class="MsoNormal"><span style="font-family:Consolas;font-size:9.5pt;"><span style="mso-spacerun:yes;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="color:blue;">this</span>.Add(<span style="color:#2b91af;">Note</span>.Get(item));</span></p>
<p class="MsoNormal"><span style="font-family:Consolas;font-size:9.5pt;"><span style="mso-spacerun:yes;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>}</span></p>
<p class="MsoNormal"><span style="font-family:Consolas;font-size:9.5pt;">&nbsp;</span></p>
<p class="MsoNormal"><span style="font-family:Consolas;font-size:9.5pt;"><span style="mso-spacerun:yes;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>RaiseListChangedEvents = <span style="color:blue;">true</span>;</span></p>
<p class="MsoNormal"><span style="font-family:Consolas;font-size:9.5pt;"><span style="mso-spacerun:yes;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>}</span></p>
<p class="MsoNormal"><span style="font-family:Consolas;font-size:9.5pt;">&nbsp;</span></p>
<p class="MsoNormal"><span style="font-family:Consolas;font-size:9.5pt;">The readData is calling the Get method in my Note.cs defined as follows:</span></p>
<p class="MsoNormal"><span style="font-family:Consolas;color:blue;font-size:9.5pt;">internal</span><span style="font-family:Consolas;font-size:9.5pt;"> <span style="color:blue;">static</span> <span style="color:#2b91af;">Note</span> Get(PMIS.Models.Encounters.Data.<span style="color:#2b91af;">Notes</span> data)</span></p>
<p class="MsoNormal"><span style="font-family:Consolas;font-size:9.5pt;"><span style="mso-spacerun:yes;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>{</span></p>
<p class="MsoNormal"><span style="font-family:Consolas;font-size:9.5pt;"><span style="mso-spacerun:yes;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="color:blue;">return</span> <span style="color:#2b91af;">DataPortal</span>.FetchChild&lt;<span style="color:#2b91af;">Note</span>&gt;(data);</span></p>
<p class="MsoNormal"><span style="font-family:Consolas;font-size:9.5pt;"><span style="mso-spacerun:yes;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>}</span></p>
<p class="MsoNormal"><span style="font-family:Consolas;font-size:9.5pt;">This is calling the Child_Fetch in Note.cs</span></p>
<p class="MsoNormal"><span style="font-family:Consolas;font-size:9.5pt;">&nbsp;</span></p>
<p class="MsoNormal"><span style="font-family:Consolas;color:blue;font-size:9.5pt;">private</span><span style="font-family:Consolas;font-size:9.5pt;"> <span style="color:blue;">void</span> Child_Fetch(PMIS.Models.Encounters.Data.<span style="color:#2b91af;">Notes</span> data)</span></p>
<p class="MsoNormal"><span style="font-family:Consolas;font-size:9.5pt;"><span style="mso-spacerun:yes;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>{</span></p>
<p class="MsoNormal"><span style="font-family:Consolas;font-size:9.5pt;"><span style="mso-spacerun:yes;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>ReadData(data);</span></p>
<p class="MsoNormal"><span style="font-family:Consolas;font-size:9.5pt;"><span style="mso-spacerun:yes;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>}</span></p>
<p class="MsoNormal"><span style="font-family:Consolas;font-size:9.5pt;">The ReadData in Note.cs is to load all the property values.</span></p>
<p class="MsoNormal"><span style="font-family:Consolas;font-size:9.5pt;"><span style="mso-spacerun:yes;">&nbsp; </span><span style="color:blue;">private</span> <span style="color:blue;">void</span> ReadData(PMIS.Models.Encounters.Data.<span style="color:#2b91af;">Notes</span> data, <span style="color:blue;">bool</span> includeChildren = <span style="color:blue;">true</span>)</span></p>
<p class="MsoNormal"><span style="font-family:Consolas;font-size:9.5pt;"><span style="mso-spacerun:yes;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>{</span></p>
<p class="MsoNormal"><span style="font-family:Consolas;font-size:9.5pt;"><span style="mso-spacerun:yes;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>LoadProperty(NotesIDProperty, data.NotesID);</span></p>
<p class="MsoNormal"><span style="font-family:Consolas;font-size:9.5pt;"><span style="mso-spacerun:yes;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>}</span></p>
<p class="MsoNormal"><span style="font-family:Consolas;font-size:9.5pt;">&nbsp;</span></p>
<p class="MsoNormal"><span style="font-family:Consolas;font-size:9.5pt;">Again my model does get updated but my Parent which in this case is Encounter is set to null.</span></p>
<p class="MsoNormal"><span style="font-family:Consolas;font-size:9.5pt;">&nbsp;Some Additional information about my project.</span></p>
<p class="MsoNormal"><span style="font-family:Consolas;font-size:9.5pt;">I have the following object&nbsp;structure </span></p>
<p><span style="font-family:Consolas;font-size:9.5pt;">
<p class="MsoNormal" style="margin:0in 0in 10pt;"><span style="font-size:small;"><span style="font-family:Calibri;">P</span></span></p>
<p class="MsoNormal" style="margin:0in 0in 10pt;"><span style="font-size:small;"><span style="font-family:Calibri;"><span style="mso-tab-count:1;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>PI</span></span></p>
<p class="MsoNormal" style="margin:0in 0in 10pt;"><span style="font-size:small;"><span style="font-family:Calibri;"><span style="mso-tab-count:2;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Encounter</span></span></p>
<p class="MsoNormal" style="margin:0in 0in 10pt;"><span style="font-size:small;"><span style="font-family:Calibri;"><span style="mso-tab-count:3;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Notes</span></span></p>
<p class="MsoNormal" style="margin:0in 0in 10pt;"><span style="font-size:small;"><span style="font-family:Calibri;">In my WPF form there is one Save Button that triggers Model.Save in my Parent &quot;P&quot; object which in turn loads all my child objects. Only when i search my notes, i understand it is not loading from the encounter and hence the parent is being set to null. Please help me with this issue as i need to get this done soon.</span></span></p>
<p class="MsoNormal">&nbsp;</p>
</span></p>
<p class="MsoNormal">&nbsp;</p>
<p class="MsoNormal"><span style="font-family:Consolas;font-size:9.5pt;"></span></p>
<p class="MsoNormal"><span style="font-family:Consolas;font-size:9.5pt;">&nbsp;</span></p>
<p class="MsoNormal"><span style="font-family:Consolas;font-size:9.5pt;">&nbsp;</span></p>
<p class="MsoNormal"><span style="font-family:Consolas;font-size:9.5pt;">&nbsp;</span></p>
<p class="MsoNormal"><span style="font-family:Calibri;font-size:small;">&nbsp;</span></p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>harrykod replied on Wednesday, July 11, 2012</h2><p>JonnyBee, i have usedf your approach and my results are updated they still loose their parent.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>harrykod replied on Wednesday, July 11, 2012</h2><p>Alright i have finally figured out how to set the parent but my update still does not work!!!</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JonnyBee replied on Thursday, July 12, 2012</h2>Hi,

Your callback in the viewmodel must set the Notes property on the Encounter object to make it part of the object structure. 
</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>harrykod replied on Thursday, July 12, 2012</h2><p>Okay. But my notes has a different view model than my encounters. How can i set the Notes property on the Encounter object. </p>
<p>JonnyBee can you give me an example?</p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
