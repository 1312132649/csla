<html><header><title>Trying to setup the WCF data Portal getting machine actively refused connection</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Trying to setup the WCF data Portal getting machine actively refused connection</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/3829.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>checlark posted on Thursday, November 01, 2007</h2>I am trying to setup the WCF data portal but I am getting the machine actively refused connection error. Anyone else ran into this problem? I realize that many factors could cause this, but I dont want to jack my machine up trying different things so really what I am asking is for some suggestions as to where to start. I figure it has to be permissions or firewall issue. Any ideas would be helpful.</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Thursday, November 01, 2007</h2>If you are hosting the WCF data portal in IIS and ASP.NET, then a good place to start is to put a simple aspx page into that virtual root and try to access it from a browser. That will help establish that you have IIS, ASP.NET, http and port 80 all working.</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>checlark replied on Thursday, November 01, 2007</h2><P>Hey Rocky,</P>
<P>I tried the aspx pages and was able to access them.</P>
<P>Here is the error as I get it.</P>
<P>An exception of type 'System.ServiceModel.EndpointNotFoundException' occurred in mscorlib.dll but was not handled in user code</P>
<P>Additional information: Could not connect to <A href="http://192.168.0.217:3564/IndicoWCFHost/WcfPortal.svc">http://192.168.0.217:3564/IndicoWCFHost/WcfPortal.svc</A>. TCP error code 10061: No connection could be made because the target machine actively refused it.</P>
<P>The method of occurance is <FONT color=#5105b7 size=2>DataPortalResult</FONT><B><FONT color=#0000ff size=2> </B></FONT><FONT color=#5105b7 size=2>Fetch in WcfProxy.cs and the line of code being executed is <FONT color=#5105b7 size=2></P>
<P>WcfResponse</FONT><B><FONT color=#0000ff size=2> </B></FONT><FONT color=#5105b7 size=2>response</FONT><B><FONT color=#0000ff size=2> </FONT><FONT color=#ff0000 size=2>= </FONT></B><FONT color=#5105b7 size=2>svr</FONT><B><FONT color=#ff0000 size=2>.</B></FONT><FONT color=#5105b7 size=2>Fetch</FONT><B><FONT color=#0000ff size=2>(</FONT><FONT color=#460046 size=2>new</FONT><FONT color=#0000ff size=2> </B></FONT><FONT color=#5105b7 size=2>FetchRequest</FONT><B><FONT color=#0000ff size=2>(</B></FONT><FONT color=#5105b7 size=2>objectType</FONT><B><FONT color=#0000ff size=2>, </B></FONT><FONT color=#5105b7 size=2>criteria</FONT><B><FONT color=#0000ff size=2>, </B></FONT><FONT color=#5105b7 size=2>context</FONT><B><FONT color=#0000ff size=2>));</P></B></FONT></FONT></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Thursday, November 01, 2007</h2><P>But you are able, from that same client machine, to navigate to something like</P>
<P><A href="http://192.168.0.217:3564/IndicoWCFHost/testpage.aspx">http://192.168.0.217:3564/IndicoWCFHost/testpage.aspx</A></P>
<P>??</P>
<P>Oh, and did you notice "Indico" should probably be "Indigo"?</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>checlark replied on Thursday, November 01, 2007</h2>Yes, I can navigate to the test pages. Indico is my company's name.</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>checlark replied on Thursday, November 01, 2007</h2>Sorry, just tried it using the port number with the test pages&nbsp;with no luck. Without port number works fine. Also tried the service itself without port number and had no luck. As a final note, I did open up port 3564 in windows firewall.</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Thursday, November 01, 2007</h2>






 

 
  
 




<div class=Section1>

<p class=MsoNormal><span>It certainly sounds like a port/firewall/security issue. At
which point you are out of my area of expertise. I know there are traffic
sniffers and ways you can turn on tracing in WCF to watch what&#8217;s
happening in more detail. Juval Lowy&#8217;s book on WCF can probably help with
some of the WCF tracing configuration options &#8211; a google search (or
others on this forum) may have good ideas for TCP packet sniffers.<o:p></o:p></span></p>

<p class=MsoNormal><span><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span>Rocky<o:p></o:p></span></p>

<p class=MsoNormal><span><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span><o:p>&nbsp;</o:p></span></p>

<div>

<p class=MsoNormal><b><span>From:</span></b><span> checlark
[mailto:cslanet@lhotka.net] <br>
<b>Sent:</b> Thursday, November 01, 2007 3:40 PM<br>
<b>To:</b> rocky@lhotka.net<br>
<b>Subject:</b> Re: [CSLA .NET] Trying to setup the WCF data Portal getting
machine actively refused connection<o:p></o:p></span></p>

</div>

<p class=MsoNormal><o:p>&nbsp;</o:p></p>

<p class=MsoNormal>Sorry, just tried it using the port number with the test
pages&nbsp;with no luck. Without port number works fine. Also tried the service
itself without port number and had no luck. As a final note, I did open up port
3564 in windows firewall.<br>
<br>
<o:p></o:p></p>

</div>



</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>checlark replied on Thursday, November 01, 2007</h2>Thanks for the advice Rocky, I will check into it.</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Wendy replied on Friday, February 01, 2008</h2><P>I have the same problem.&nbsp; How do you fixed it??</P>
<P>Wendy M. A.</P>
<P>&nbsp;</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Stuart replied on Saturday, February 23, 2008</h2>I got the PT project and CSLA (version 3) up and running under XP/VS2005&nbsp;SP1&nbsp;without much effort. Then I tried it under Vista Ultimate&nbsp;recieved the same error. I've tried it with and without UAC turned on,&nbsp;&nbsp;messed about with IIS 7 for a while, downloaded the hot fixes and so on. Another Vista challenge, Rocky?</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Saturday, February 23, 2008</h2>






 

 
  
 




<div class=Section1>

<p class=MsoNormal><span>It could be a Vista thing, though I&#8217;m running everything
under Vista just fine. I remember having to mess around with IIS7 to get it
working though &#8211; you have to set up the virtual root as an application
and all the same stuff as in IIS6, but of course the admin tools are all
different.<o:p></o:p></span></p>

<p class=MsoNormal><span><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span>I&#8217;m running with UAC on btw, so it isn&#8217;t UAC that&#8217;s
the issue &#8211; the challenges I had were with figuring out the new admin
tool layout.<o:p></o:p></span></p>

<p class=MsoNormal><span><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span>Rocky<o:p></o:p></span></p>

<p class=MsoNormal><span><o:p>&nbsp;</o:p></span></p>

<div>

<p class=MsoNormal><b><span>From:</span></b><span> Stuart
[mailto:cslanet@lhotka.net] <br>
<b>Sent:</b> Saturday, February 23, 2008 9:09 AM<br>
<b>To:</b> rocky@lhotka.net<br>
<b>Subject:</b> Re: [CSLA .NET] Trying to setup the WCF data Portal getting
machine actively refused connection<o:p></o:p></span></p>

</div>

<p class=MsoNormal><o:p>&nbsp;</o:p></p>

<p class=MsoNormal>I got the PT project and CSLA (version 3) up and running
under XP/VS2005&nbsp;SP1&nbsp;without much effort. Then I tried it under Vista
Ultimate&nbsp;recieved the same error. I've tried it with and without UAC
turned on,&nbsp;&nbsp;messed about with IIS 7 for a while, downloaded the hot
fixes and so on. Another Vista challenge, Rocky?<br>
<br>
<o:p></o:p></p>

</div>



</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajayubbott replied on Wednesday, February 04, 2009</h2><P><FONT face=Verdana size=2>Hi,</FONT></P>
<P><FONT face=Verdana size=2>I am also having similar problem while running <STRONG>PTWeb</STRONG> application. The following error appears past the Login screen: -</FONT></P>
<P><FONT face=Verdana><FONT size=2><EM><STRONG>No connection could be made because the target machine actively refused it 127.0.0.1:4147</STRONG><BR></EM><STRONG>Description: </STRONG>An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. <BR><BR><B>Exception Details: </B>System.Net.Sockets.SocketException: No connection could be made because the target machine actively refused it 127.0.0.1:4147<BR><BR><STRONG>Source File: </STRONG>C:\Visual Studio Projects\csla\Source\DataPortalClient\WcfProxy.cs<B> &nbsp;&nbsp; Line: </B>130 </FONT></FONT></P>
<P><FONT face=Verdana size=2>The environment on my machine is: -<BR>Windows XP Professional SP3, IIS 5.1, IE 6.0.2900, CSLA.Net 3.6</FONT></P>
<P><FONT face=Verdana size=2>I have gone through the threads on similar error on this forum and have installed the PTWeb application in the IIS as per the install document.</FONT></P>
<P><FONT face=Verdana size=2>Kindly advise</FONT></P>
<P><FONT face=Verdana size=2>Thank you,</FONT></P>
<P><BR></P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Wednesday, February 04, 2009</h2>






 





<div class=Section1>

<p class=MsoNormal><span>Check the port number of the WcfHost project and the client&#8217;s
config file. Obviously the port numbers must match, and Visual Studio sometimes
changes the port on a web site behind the scenes.<o:p></o:p></span></p>

<p class=MsoNormal><span><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span>Rocky<o:p></o:p></span></p>

</div>



</div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
