<html><header><title>SL v3.6.1  DataProvider_DataChanged</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>SL v3.6.1  DataProvider_DataChanged</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/6726.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>davido_xml posted on Thursday, April 02, 2009</h2><P>Hi,</P>
<P>I use the DataProvider_DataChanged event so I can be sure&nbsp;an async&nbsp;operation&nbsp;has completed before I update another part of the applicaiton. Unfortunately the event seems to get raised twice for each operation. This&nbsp;makes me&nbsp;code module level booleans to record "has this already happened" quite a bit which is not great :(</P>
<P>A few questions:</P>
<P>1) Are there alternative events that only get called once e.g. Loaded, Saved etc.</P>
<P>2) Is there a way to examine the parameters in DataProvider_DataChanged to&nbsp;distinguish between the first and second call?</P>
<P>3) Does everyone else experience this double calling? How do you deal with it?</P>
<P>&nbsp;</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Thursday, April 02, 2009</h2>This sounds like a bug to me. Can you see if you still have the issue with 3.6.2 - if so I'll add it as a bug.</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Thursday, April 02, 2009</h2>This is how the Wpf CslaDataProvider acts as well.&nbsp; <br><br>I dug into the CslaDataProvider to figure out why Infragistics grids don't display column headers / sample data.&nbsp; The provider doesn't behave quite like the ObjectDataProvider does in certain aspects.<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>davido_xml replied on Thursday, April 02, 2009</h2><P>I still get duplicate calls in v3.6.2</P>
<P>I will try a few things with v3.6.2 and update if I come up with anything</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>davido replied on Monday, April 06, 2009</h2><P>As far as I can see the two calls are being driven by the highlighted lines below. Changing .Error or .ObjectInstance has the ability to call OnDataChanged. </P><FONT color=#0000ff size=2><FONT color=#0000ff size=2>
<P>private</FONT></FONT><FONT size=2> </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>void</FONT></FONT><FONT size=2> QueryCompleted(</FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>object</FONT></FONT><FONT size=2> sender, </FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>EventArgs</FONT></FONT><FONT size=2> e)</P>
<P>{</P>
<P></FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>IDataPortalResult</FONT></FONT><FONT size=2> eventArgs = e </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>as</FONT></FONT><FONT size=2> </FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>IDataPortalResult</FONT></FONT><FONT size=2>;</P>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2><U>this</U></FONT></FONT><FONT size=2><U>.Error = eventArgs.Error;</U></P>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2><U>this</U></FONT></FONT><FONT size=2><U>.ObjectInstance = eventArgs.Object;</U></P>
<P>RefreshCanOperationsValues();</P>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>this</FONT></FONT><FONT size=2>.IsBusy = </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>false</FONT></FONT><FONT size=2>;</P>
<P>}</P></FONT></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Monday, April 06, 2009</h2>






 





<div class=Section1>

<p class=MsoNormal><span>See what a second pair of eyes can do. That is a very good
observation and is a problem. Glancing at the code though, implementing a&nbsp;
solution is going to take a bit of refactoring&#8230;<o:p></o:p></span></p>

<p class=MsoNormal><span><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span>Thank you!<o:p></o:p></span></p>

<p class=MsoNormal><span><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span>Rocky<o:p></o:p></span></p>

</div>



</div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
