<html><header><title>How to check Authorization Rules across objects?</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>How to check Authorization Rules across objects?</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/11269.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>CrikeyMoses posted on Thursday, March 29, 2012</h2><p>Hi we are using CSLA 4.2 for Silverlight,</p>
<p>We have a tab control with tabs for&nbsp;various&nbsp;objects. So lets say the first Tab is &quot;Employee&quot;, which displays general information about an &quot;Employee&quot; (object), the second tab is &quot;Cash&quot; (object).</p>
<p>So we have an Authorization Rule that checks if you can &quot;Get&quot; the Cash object applied like this<br />BusinessRules.AddRule(new Csla.Rules.CommonRules.IsInRole(AuthorizationActions.GetObject, new List&lt;string&gt; { &quot;CashView&quot; }));</p>
<p>I want to hide the Cash tab if your Authorization rules don&#39;t allow you to see it, but unfortunately when you first come into the Employee tab, the Cash object has not yet been created, thus that rules have not yet been applied. I check the rule as follows:<br /> Csla.Rules.BusinessRules.HasPermission(Csla.Rules.AuthorizationActions.GetObject, typeof(Cash))<br />How is it possible for me to check the rule on another object before that object has been initialized?</p>
<p>I can check to see if the current user IsInRole like this:<br />Csla.ApplicationContext.User.IsInRole(&quot;CashView&quot;)<br />I just dont think this is the way to go...&nbsp;</p>
<p>Hopefully someone understands what i&#39;m trying to do here... Any help will be appreciated, thanks in advance</p></div><div style='padding:0 15 3 15;background-color:lightgreen'><h2>RockfordLhotka replied on Thursday, March 29, 2012</h2><p>The per-type rules (like GetObject) don&#39;t need an object instance because they are static.</p>
<p>Notice that Csla.Rules.BusinessRules.HasPermission accepts a typeof() parameter - not an object instance, just an object type.</p>
<p>Also notice that the method that establishes per-type rules in your business class is static. That method is invoked automatically by the business rules engine if the rules for the type aren&#39;t already known.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>CrikeyMoses replied on Friday, March 30, 2012</h2><p>Ahhh, i missed the &quot;Using AddObjectAuthorizationRules&quot; chapter in CSLA 4.2 Object e-book.</p>
<p>Thanks mate.</p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
