<html><header><title>Asyncronous Save (like AutoSave) on a EBL</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Asyncronous Save (like AutoSave) on a EBL</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/7426.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>Jack posted on Saturday, August 08, 2009</h2><P>Just curious if anybody has a proven and reliable method for AutoSaving the IsDirty set of data in the background and continuing on without interrupting the user.&nbsp; I'm planning on using a CommandBO to send my data to the server and have it update the database.&nbsp; My only real problem is that I need to keep insync the last_update_timestamp for concurrency.</P>
<P>I was going to try something along the lines of:</P>
<P>Option A:<BR>1) Add three new properties:&nbsp;<BR>&nbsp;<BR>&nbsp;&nbsp;&nbsp;&nbsp;- LastUpdateDate<BR>&nbsp;&nbsp;&nbsp;&nbsp;- AutoSavingFlag<BR>&nbsp;&nbsp;&nbsp;&nbsp;- AutoSavingIsDirtyFlag<BR>&nbsp;<BR>&nbsp;&nbsp;&nbsp;a) copy my UpdateDate property to the LastUpdateDate property in my Get/LoadData</P>
<P>&nbsp;&nbsp;&nbsp;b) Modify OnPropertyChanged to do:<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;If !(ProperyName="AutoSaveFlag") AutoSavingIsDirty = AutoSavingFlag </P>
<P>2) On AutoSave or AsyncSave<BR>&nbsp;&nbsp;&nbsp;&nbsp;a) set a AutoSaveCommand UpdateDate property to DateTime.Now</P>
<P>&nbsp;&nbsp;&nbsp;&nbsp;b) flag all dirty data with:<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;i)&nbsp;&nbsp; UpdateDate = AutoSaveCommand.UpdateDate<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ii)&nbsp; AutoSavingIsDirtyFlag = False<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;iii) AutoSavingFlag = True<BR>&nbsp;&nbsp;<BR>&nbsp;&nbsp;&nbsp;&nbsp;c) fire off my AutoSaveCommandBO <BR>&nbsp;<BR>3) on the completion of my AutoSaveCommand&nbsp;<BR>&nbsp;<BR>&nbsp;&nbsp;&nbsp;a) if fail, then notify user + undo data from step 2b<BR>&nbsp;&nbsp;&nbsp;b) if pass, then&nbsp;for all AutoSaving data</P>
<P>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;i) set the&nbsp;UpdateDate = LastUpdateDate</P>
<P>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ii)&nbsp;Set IsDirty = !AutoSavingIsDirtyFlag&nbsp;&nbsp;<BR>&nbsp;&nbsp;&nbsp; <BR>Option B:&nbsp;&nbsp;&nbsp; <BR>Same basic premise but instead of using AutoSaveDirty flags I would clone each piece of dirty data and then try to compare it to its self after the AutoSave completed...</P>
<P>Any pitfalls, ideas, advice?</P>
<P>I don't actually care too much if my IsDirty logic isn't too precise as the cost to update the same data again is nil.&nbsp; All the data gets send from the client to the server either way.</P>
<P>Thanks</P>
<P>jack</P></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
