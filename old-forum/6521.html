<html><header><title>Cascading Lists - CSLA</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Cascading Lists - CSLA</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/6521.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>DivisibleByZero posted on Thursday, February 26, 2009</h2>I have a question concerning CSLA and cascading lists, i.e. lists that are dependent on each other.<br><br>Example:<br>Car Make and Model.<br><br>CarMakes : ReadOnlyListBase&lt;CarMakes, CarMake&gt;<br>&nbsp; public static CarMakes GetList()<br><br>CarModels : ReadOnlyListBase&lt;CarModels, CarModel&gt;<br>&nbsp; public static CarModels GetList(CarMake make)<br><br><br>Lets say we also have a business object that will store this information:<br><br>CarOrder<br>&nbsp;&nbsp; public CarMake Make { get; set }&nbsp; //CSLA GetProperty/SetProperty<br>&nbsp;&nbsp; public CarModel Model { get; set }&nbsp; //CSLA GetProperty/SetProperty<br><br>The Make property is bound to the ComboBox cboMakes SelectedItem<br>The Model property is bound to the ComboBox cboModels SelectedItem<br>On my Windows Form we can load up the Makes right away because it is not dependent on anything:<br><br>Form_Load:<br>&nbsp;&nbsp;&nbsp;&nbsp; _order = CarOrder.NewOrder();<br>&nbsp;&nbsp; &nbsp; makesBindingSource.DataSource = CarMakes.GetList();<br>&nbsp;&nbsp;&nbsp; orderBindingSource.DataSource = _order;<br><br>My question is how should I go about loading the second list? How do I know when the Make has changed?&nbsp; Do I subscribe to the makesBindingSource.CurrentChanged event and load the BindingSource at that point?<br><br>Is there anything else I have to worry about when I bind this second list? Do I need to unbind the orderBindingSource first and then bind the models, then rebind the orderBindingSource?<br><br>Any help would be appreciated.<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Friday, February 27, 2009</h2>I'd have your CarOrder have a read-only CarMake property.&nbsp; It's set when you set the model.. which contains information about it's Make.&nbsp; <br><br>Alternately, if your use case really does allow selecting make &amp; model separately, whenever Make is set Model should be blanked.&nbsp; I'd go with strings personally... I've found this much easier to deal with.&nbsp; Your validation rule for Make will check the list of possible makes and set a broken rule if the make doesn't exist, and&nbsp; your model will check the model's list, filtered by the current make.&nbsp; <br><br>This should make your UI much easier too... I went down your path originally.. and it got to be a real pain.&nbsp; <br><br>HTH<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>DivisibleByZero replied on Friday, February 27, 2009</h2>The car example isn't completely analagous, but I can't just store a string. Besides, that's not what this question was about. The question is how do&nbsp; I change the lists for the combobox based on the first item changing. I was asking specifically if you'd handle an event such as BindingSource.CurrentChanged or ComboBox.SelectedItem changed. I realize that is putting a lot of logic in the UI layer to refilter the results, but I'm not sure how else to do it.&nbsp; Possibly adding an event in the CarOrder object called MakeChanged?&nbsp; Another part of the question was wondering if there is anything I need to worry about when changing the binding list of the second dropdown...such as if I need to unbind the carorder before doing that, etc.?<br><br><br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Friday, February 27, 2009</h2>Well... the best way to get an answer to your question is to post your actual use case.<br><br>Anyway, to answer your question, I usually end up watching the ComboBox.SelectionChanged event, and the changing the filter on the "Model"'s combobox's DataSource.&nbsp; That's not as easy as you would think though, because the event fires when you wouldn't expect it to.. for example when the screen is first displayed.&nbsp; This can end up resetting your Model's combobox items unexpectedly, which then causes the Model combobox to shove an empty value into the Model property of your BO... and instantely your BO is in a dirty state that doesn't reflect the initally loaded state.<br><br>I've handled this by going to Infragistics UltraComboEditor and using flags to indicate that the BO is being bound to the UI and the events that normally filter the Model combobox will not do anything in this case.&nbsp; This is in WinForms, BTW.&nbsp; I'm not sure if you're run into the same situation with Wpf though, because the databinding there makes more sense... but I haven't actually done this yet in wpf either.<br><br>HTH<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>DivisibleByZero replied on Friday, February 27, 2009</h2>I don't think the actual use case really matters. Lets say that CarMake has a property called CountryOfOrigin. Maybe there is a business rule in CarOrder that says if the country is USA then you can't choose a certain color. Storing Make as a String "Ford" isn't going to tell me that. <br><br><br>Anybody else have any ideas on this?<br><br></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
