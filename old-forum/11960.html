<html><header><title>Best approach to validation of sensitive values, but not transmitting them</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Best approach to validation of sensitive values, but not transmitting them</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/11960.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>NightOwl888 posted on Saturday, April 27, 2013</h2><p>I am attempting to rework the AccountController in the MVC4 default template so it uses CSLA rather than SimpleMembership because SimpleMembership didn&#39;t meet my requirements.</p>
<p>I am replacing the command-based architecture with CSLA business objects. Right now I am working with the UserRegister business object, which codifies the Register User scenario.</p>
<p>However, I have run into a snag in that I want to validate that the user entered a password and a confirm password field that matches, but I don&#39;t want to send these two values to the DataPortal (there is a business rule attached to these properties that automatically fills in PasswordHash and PasswordSalt properties when a password is entered).</p>
<p>I don&#39;t want to encrypt the connection or the channel to the dataportal - I just want to ensure that the password values are not in the request at all. So, what is the best approach to achieve this?</p>
<p><b>Clarification</b>: If the DataPortal is running on the client, there is no issue - I just want to eliminate these values from the serialization stream if they are sent across the network. At the same time, I want to ensure validation still passes. Note that I also want to use the real password value for the login scenario that is executed in the same request, so I will also need client-side (controller) access to the password value.</p>
<p>I am using MVC4, .NET 4.5, and CSLA 4.5.20.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JonnyBee replied on Saturday, April 27, 2013</h2><p>Hi,</p>
<p>You could change the password property to private backing field and add NonSerialized attribute to the backing field.&nbsp;</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>NightOwl888 replied on Saturday, April 27, 2013</h2><p>I thought of that, but I couldn&#39;t find any examples in the CSLA 4 book that show how to make a property with a private backing field that also has a static accessor property so the validation and hashing rules can run on it. Can you show me just how that would be done?</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JonnyBee replied on Sunday, April 28, 2013</h2><p>Csla 4 ships with a set of snippets and templates. See the Csla Cheat Sheet here&nbsp;<a href="http://www.lhotka.net/files/csla40/CSLA4CheatSheet.pdf"><span>http://www.lhotka.net/files/csla40/CSLA4CheatSheet.pdf</span></a></p>
<p>The snippet you want is <b>cslapropp</b>&nbsp;</p>
<p>Here is how the property should be defined:</p>
<pre style="font-family:Consolas;font-size:13;color:black;background:white;">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:blue;">public</span>&nbsp;<span style="color:blue;">static</span>&nbsp;<span style="color:blue;">readonly</span>&nbsp;<span style="color:#2b91af;">PropertyInfo</span>&lt;<span style="color:blue;">string</span>&gt;&nbsp;PasswordProperty&nbsp;= <br />           RegisterProperty&lt;<span style="color:blue;">string</span>&gt;(c&nbsp;=&gt;&nbsp;c.Password,&nbsp;<span style="color:#2b91af;">RelationshipTypes</span>.PrivateField);
&nbsp;&nbsp;&nbsp;&nbsp;[<span style="color:#2b91af;">NonSerialized</span>]
&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:blue;">private</span>&nbsp;<span style="color:blue;">string</span>&nbsp;_password&nbsp;=&nbsp;PasswordProperty.DefaultValue;
&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:blue;">public</span>&nbsp;<span style="color:blue;">string</span>&nbsp;Password
&nbsp;&nbsp;&nbsp;&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:blue;">get</span>&nbsp;{&nbsp;<span style="color:blue;">return</span>&nbsp;GetProperty(PasswordProperty,&nbsp;_password);&nbsp;}
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:blue;">set</span>&nbsp;{&nbsp;SetProperty(PasswordProperty,&nbsp;<span style="color:blue;">ref</span>&nbsp;_password,&nbsp;<span style="color:blue;">value</span>);&nbsp;}
&nbsp;&nbsp;&nbsp;&nbsp;}</pre></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>NightOwl888 replied on Sunday, April 28, 2013</h2><p>You beat me to it. I found the same answer it on page 35 of the &quot;Objects&quot; ebook. I have confirmed it does not send the password value to the DataPortal - not even if it is running on the client.</p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
