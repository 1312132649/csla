<html><header><title>Why does the server-side csla.dll affect my compile of the XAML using CslaDataProvider?</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Why does the server-side csla.dll affect my compile of the XAML using CslaDataProvider?</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/11815.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>RobKraft posted on Monday, February 04, 2013</h2><p>We have been compiling the server side of our Silverlight App using 32bit for years.&nbsp; We need to support a 64bit only reference in our next release so we changed our server side code to compile with AnyCpu.&nbsp; In doing so we found a strange problem.</p>
<p>Our Silverlight XAML that references CslaDataProvider fails to compile when the AnyCpu version of Csla.Dll is in the Gac.&nbsp; It only compiles successfully when the 32bit version of Csla.Dll is in the Gac.&nbsp; The error we get is:&nbsp;&nbsp;&quot;The tag &#39;CslaDataProvider&#39; does not exist in XML namespace &#39;clr-namespace:Csla.Silverlight;assembly=Csla&#39;.&quot;</p>
<p>This stumps me primarily because the XAML/ClientSide/SilverLight code should not even look in the GAC for DLLs.</p>
<p>The code compiles successfully on our build server.&nbsp; I think the problem only occurs when compiling in the Visual Studio IDE.&nbsp; </p>
<p>Have any of you seen something like this?&nbsp; Can you offer an explanation?</p>
<p>We are using Csla 3.8.3.&nbsp; We have not changed this version for years and don&#39;t plan to in the short term.</p>
<p>Thanks in advance for your time!</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Monday, February 04, 2013</h2><p>I haven&#39;t seen this, but I also never use the GAC except in very rare server-side scenarios, and never on a dev machine.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Tuesday, February 05, 2013</h2><p>I think there are actually two GACs; one 32-bit, and one 64-bit.&nbsp; I&#39;d make sure that you have the required assemblies in both.&nbsp; (Actually, there&#39;s an MSIL GAC too).&nbsp; If you have a 32-bit specific version, gacutil will put in the 32-bit only GAC.&nbsp; If its anycpu, it should go to the MSIL one.&nbsp; </p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RobKraft replied on Wednesday, February 06, 2013</h2><p>Thanks for the suggestion Andy, but if we put Csla.dll in both GACs then it works sometimes and sometimes it does not work.&nbsp; I couldn&#39;t determine why that occurred.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JonnyBee replied on Wednesday, February 06, 2013</h2><p>Do you use addins in Visual Studio like R# or other intellisense providers. </p>
<p>I have seen similar problems earlier with R#. If you have try to suspend/deactivate these components and reopen the solution and compile.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RobKraft replied on Thursday, February 07, 2013</h2><p>Thanks for the suggestion JonnyBee, but I have absolutely zero add-ins in VStudio. </p>
<p>I reviewed the reason why we are putting the Csla.dll in the GAC and it is because we use Cassini to debug and we have custom Identity/principal classes.&nbsp; I am pondering trying the workaround from this thread: <a href="http://forums.lhotka.net/forums/p/157/29700.aspx">http://forums.lhotka.net/forums/p/157/29700.aspx</a>&nbsp;so that we don&#39;t have to have any of our DLLs in the GAC, but we have some customizations to our Custom Identity class and I&#39;m not sure this will work.</p>
<p>&nbsp;</p>
<p>&nbsp;</p></div><div style='padding:0 15 3 15;background-color:lightgreen'><h2>RockfordLhotka replied on Thursday, February 07, 2013</h2><p>Can you switch to IIS Express? It is way better than Cassini, including not having that assembly loading bug (oh, sorry, feature).</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RobKraft replied on Monday, February 11, 2013</h2><p>Good call Rocky!&nbsp; We tested IIS Express and it seems to work for us and we don&#39;t need any files in the GAC!&nbsp; Thanks!</p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
