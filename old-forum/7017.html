<html><header><title>Object is Still Being Edited</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Object is Still Being Edited</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/7017.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>Frazer posted on Thursday, May 28, 2009</h2><P>When I try to save changes to my BO, I get a ValidationException:&nbsp; Object is still being edited...</P>
<P>As I have no need in my application for undo, I do not make explicit calls to BO.BeginEdit.</P>
<P>Basically, my logic is as follows:</P>
<P>BO.SomeProperty = "new value";<BR>BO.Save();</P>
<P>Am I missing a concept - or should I be looking for an error in my BO implementation?</P>
<P>&nbsp;</P>
<P>&nbsp;</P>
<P>&nbsp;</P>
<P>&nbsp;</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Frazer replied on Thursday, May 28, 2009</h2><P>When I examine BO.EditLevel, it has a value of 1.</P>
<P>This would suggest to me that BeginEdit has been called.&nbsp; As I mentioned in my previous post, I do not call BeginEdit explicitly in my code - so... what am I missing here?&nbsp;&nbsp; </P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>rsbaker0 replied on Thursday, May 28, 2009</h2><P>If your object is bound to the user interface, then the calls to the IEditableObject interface by the data bindings are automatically raising the edit level of your object. </P>
<P>You have to unbind your object before saving it, and then rebind the result returned from saving afterwards. If you search the forum for CslaActionExtender or RebindUI, I think you'll find threads on this. </P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Thursday, May 28, 2009</h2><P>The <A href="http://store.lhotka.net">Using CSLA .NET 3.0</A> ebook has a chapter specifically covering this sort of issue. </P>
<P>Based on that information, Miguel created the CslaActionExtender control for CSLA 3.6 to take care of most of the details - because it turns out to be a pain to deal with the unbind/rebind issues by hand.</P>
<P>CslaActionExtender is covered to some degree in the <EM>Expert 2008 Business Objects</EM> book, though that book doesn't have a specific focus on Windows Forms.</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JoeFallon1 replied on Thursday, May 28, 2009</h2>In addition to the other comments code like this is  always wrong:<br /><br />BO.Save();<br /><br />It should always be:<br />mBO = mBO.Save();<br /><br />You have to update the local variable with the returned BO from the DataPortal.<br /><br />Joe<br /><br /><br /></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Frazer replied on Friday, May 29, 2009</h2><P>Thanks to all who responded - I have been able to get this working the help provided.&nbsp; Joe's post explained why my updates didn't seem to be persisting and I was using a dynamic editable list as a datasource for a listview - which explained the EditLevel != 0.&nbsp; </P>
<P>&nbsp;</P></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
