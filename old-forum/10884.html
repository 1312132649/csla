<html><header><title>How to pass a customer object from client to server?</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>How to pass a customer object from client to server?</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/10884.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>xc_lw posted on Wednesday, November 16, 2011</h2><p>I create a class MyClass,and driver from a interface IMyInterface,and MyClass has an Enum property, like bellow:</p>
<p>public Enum MyEnum</p>
<p>{</p>
<p>&nbsp;&nbsp;&nbsp; One=1,</p>
<p>&nbsp;&nbsp;&nbsp; Two=2</p>
<p>}</p>
<p>public class MyClass : IMyInterface</p>
<p>{</p>
<p>&nbsp;&nbsp;&nbsp; public MyClass() { }</p>
<p>&nbsp;&nbsp; public MyEnum EnumProperty {get; set;}</p>
<p>&nbsp;&nbsp; /*</p>
<p>&nbsp;&nbsp; Implement&nbsp;IMyInterface</p>
<p>*/&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </p>
<p>}</p>
<p>I use MyClass as a parameter of a Fetch method,like this</p>
<p>public static void Fetch(MyClass para,EventHandler&lt;DataPortalResult&lt;MyBusinessObject&gt;&gt; callback)</p>
<p>{</p>
<p>&nbsp; return DataPortal.BeginFetch&lt;MyBusinessObject&gt;(para,callback);</p>
<p>}</p>
<p>But this no work, It raise an error:MyClass is not a KnownType.</p>
<p>But the wcf service file is in csla project,where I can use the KnowTypeAttribute to register MyClass?</p>
<p>I use [Serializable()] attribute in MyClass,it still no work.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>edore replied on Wednesday, November 16, 2011</h2><p>MyClass must either :</p>
<p>a) implement IMobileObject</p>
<p>b) inherit from MobileObject or any other&nbsp;existing class in Csla&nbsp;implementing IMobileObject.&nbsp; For instance, CriteriaBase seems a wise choice if your parameter is in fact a criteria...</p>
<p>and remember, each property in MyClass must use a managed backing field or you must override OnGetState/OnSetState/OnGetChildren/OnSetChildren and serialize each property manually...&nbsp; which is pretty painful code to write! <img src="http://forums.lhotka.net/emoticons/emotion-5.gif" alt="Wink" /></p>
<p>Finally, your enum properties should be declared as int and casted as your enum type.&nbsp; Here&#39;s a sample :</p>
<p>&nbsp;</p>
<pre style="font-family:Consolas;background:white;color:black;font-size:13px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:blue;">public</span>&nbsp;<span style="color:blue;">static</span>&nbsp;<span style="color:#2b91af;">PropertyInfo</span>&lt;<span style="color:blue;">int</span>&gt;&nbsp;ProjectStatusProperty&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;RegisterProperty&lt;<span style="color:blue;">int</span>&gt;(o&nbsp;=&gt;&nbsp;o.ProjectStatus,&nbsp;<span style="color:#2b91af;">ProjectResources</span>.ProjectStatus);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:blue;">public</span>&nbsp;<span style="color:#2b91af;">ProjectStatus</span>&nbsp;ProjectStatus
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:blue;">get</span>&nbsp;{&nbsp;<span style="color:blue;">return</span>&nbsp;(&nbsp;<span style="color:#2b91af;">ProjectStatus</span>)&nbsp;GetProperty(ProjectStatusProperty);&nbsp;}
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:blue;">set</span>&nbsp;{&nbsp;SetProperty(ProjectStatusProperty,(<span style="color:blue;">int</span>)&nbsp;<span style="color:blue;">value</span>);&nbsp;}
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</pre></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
