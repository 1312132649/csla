<html><header><title>Load Balancing and Csla Authentication</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Load Balancing and Csla Authentication</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/5762.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>decius posted on Friday, November 07, 2008</h2><P>In a load balancing scenario, if the client gets sent to a new server on the next postback, is it possible to somehow maintain that Principal&nbsp; authentication when they're transfered to a new server?</P>
<P>We're trying to follow the ProjectTracker Security pretty closely, but I'm worried about how to solve that problem for Load Balancing Scenarios.</P>
<P>Thanks</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>decius replied on Friday, November 07, 2008</h2><P>What we're doing at the moment to resolve this possibility is to simply check to see if the user is signed in still on every page.&nbsp; This seems like a lot of unnecessary data access.&nbsp; Is there a way to avoid that?</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Friday, November 07, 2008</h2><P>The web is a challenging environment due to its very nature. The technology pretends like state doesn't exist, when in reality state does exist. This means we (you in this case) have to come up with your own scheme for dealing with state.</P>
<P>When building a load balanced cluster you can not maintain state on the web server. So you must either maintain it in a shared state store, or in the data stream flowing to/from the browser (through hidden fields, cookies, etc).</P>
<P>Obviously the data stream flowing to/from the browser runs over the slowest network link, and so you want to minimize what you put there. Typically you wouldn't serialize the principal to/from the browser.</P>
<P>Which means your only option is to put that state in a shared state store in your data center. There are two main approaches here. You can either re-create the state from the real database on each page request, or you can read/write the state to some temporary (but shared) location on each page request.</P>
<P>The first option means hitting your security database on each page request to reload the principal. That's probably pretty easy to implement, and isn't a bad solution if your database isn't overtaxed.</P>
<P>The second option can be done in <EM>many</EM> different ways. I discuss a few in the <EM>Business Objects</EM> book, and vendors are always coming up with new ones.</P>
<P>None of this, btw, is a CSLA issue - it is just the nature of the web itself. Any competent web consultant or good web book should provide you with many good options on how to manage state in a load balanced cluster.</P>
<P>(one thing I'll call out is <A href="http://code.msdn.microsoft.com/velocity">Velocity</A> - a Microsoft caching solution - not out yet, but perhaps worth considering)</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>decius replied on Friday, November 07, 2008</h2>Thanks again for the fabulous advice.&nbsp; I guess I was hoping for a magical Csla soup that solved my problem lol.&nbsp; I appreciate the valuable info and will start reading more into it, thanks Rocky.</div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
