<html><header><title>Prompting user during business method execution</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Prompting user during business method execution</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/4994.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>triplea posted on Thursday, June 19, 2008</h2><P>I an object diagram that looks roughly like this:</P>
<P>Customer (BusinessBase)<BR>|<BR>|--------&gt; ProductList (BusinesListBase) ---&gt; Product (BusinessBase)<BR>|--------&gt; SystemList (BusinesListBase) ---&gt; System (BusinessBase)</P>
<P>The idea is that when a Product is added/removed from ProductList, some logic kicks off that either adds or removes a System from SystemList. That works fine but I would like (specially in the case of removing a Product) to prompt the user with an "Are you sure?" message. The problem is that Product-System relationship is not 1-1 so removing a Product doesnt necessarily mean that a system needs to be removed, only under certain conditions.</P>
<P>Initially I thought I would&nbsp;raise an event when my logic detected that a system needs to be removed. But that doesn't really work so I am a bit baffled... Any ideas on how this should be tackled?</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>KKoteles replied on Thursday, June 19, 2008</h2><P>triplea,</P>
<P>Sorry I don't have a lot of time right now to work out a better answer; however, it sounds like you want to have one object subscribe to an event from another.&nbsp; I almost had a similar need a while back - and I found this in Rocky's blog:&nbsp; <A href="http://www.lhotka.net/weblog/IAmWorkingOnMyUsingCSLANET30EbookAndWroteSomeContentThatIDontThinkImGoingToUseInTheBook.aspx">http://www.lhotka.net/weblog/IAmWorkingOnMyUsingCSLANET30EbookAndWroteSomeContentThatIDontThinkImGoingToUseInTheBook.aspx</A><A href="http://www.lhotka.net/weblog/default,date,2007-08-23.aspx"></A>&nbsp;.</P>
<P>Hopefully this is either close to what you are looking for - or at least gives you some ideas.</P>
<P>Ken</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>triplea replied on Friday, June 20, 2008</h2><P>Thanks Ken but that's not exactly what I am looking for :-)</P>
<P>The problem is that the UI needs to be notified and "intercept" the flow of a business rule. I guess it makes sense that this wouldn't be possible but the only workaround in my use case that I could find is:</P>
<UL>
<LI>User removed a product (from the UI)</LI>
<LI>Prior to removing the item from the list I have a method called ShouldSystemBeDeleted() which returns true if the System should be removed as well. If the method returns true I display a prompt on the UI.</LI>
<LI>If the user chooses to continue then the actual Product removal takes place (which internally will remove the System).</LI></UL>
<P>This works but&nbsp;I dont like it&nbsp;since the UI is supposed to know that a system will be removed. Too much responsibility for the UI I find!</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Fintanv replied on Friday, June 20, 2008</h2><P>I respectfully disagree.&nbsp; I think that this is exactly the sort of responsibility that the UI should have.&nbsp; It is soliciting input from the user to make a decision (hence "UI" <img src="/emoticons/emotion-5.gif" alt="Wink [;)]" />).&nbsp; Putting some sort of method/property on your business object that will let the UI query it to see if the dialog should be displayed, preserves your business logic encapsulation.&nbsp; </P>
<P>Sometimes there is no perfect solution, you simply go with the "least worst".</P>
<P>All the best,</P>
<P>Fintan</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>triplea replied on Friday, June 20, 2008</h2>Disagreeing if absolutely fine :-) You are quite right with your UI definition but (and there is always a but) in my use case things are slightly different. By performing 1 action (removing a Product) another action may or may not be triggered (from within the BL of course) which the UI cannot determine unless it queries the object. Its the fact that the UI developer should know that to query the object that I dont like, not the fact that this method/property should be there in the first place. So yet again you were right that the "least worst" approach is the only way sometimes!</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Friday, June 20, 2008</h2>Well, the UI developer would need to do SOMETHING to display the prompt, right?&nbsp; If you don't want them to have to "know" they need to ask some object to display the prompt, then you can just have the prompt always display.&nbsp; "Warning, this action may remove a system as well."&nbsp; Also at some point it's expected that the user knows the use case and work flow as well.. so perhaps this is also partly a training issue.<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>SomeGuy replied on Friday, June 20, 2008</h2><P>Rather than trying to intercept the business logic, you could raise an event after the Product and System were removed and display a message stating what happened. The user would then have the option to cancel their edits or save the object.</P>
<P>&nbsp;</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Dawn replied on Saturday, June 21, 2008</h2>You can override ProductList.RemoveItem(int index), raise a CancelableEvent. <br></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
