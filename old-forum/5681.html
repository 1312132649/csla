<html><header><title>Adding logic to Business Object</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Adding logic to Business Object</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/5681.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>AndyW posted on Monday, October 27, 2008</h2><P>&nbsp;</P>
<P>I have a BusinessBaseList bound to a Grid control, one of the columns is a check box.&nbsp;&nbsp;Only one row can can have a tick in the checkbox, so if a user puts a tick in another row, the previous checked row must have the value removed.</P>
<P>I have currently got this working by looping around the row collection of the grid and setting all rows other then the newly checked to unchecked.</P>
<P>Although this is working, our next stage is to create a web front end as well as the windows version.</P>
<P>So we really need this logic in the business object, what would be the best way to achieve this?&nbsp; </P>
<P>Thanks</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>sergeyb replied on Monday, October 27, 2008</h2>









 

 
  
 




<div class=Section1>

<p class=MsoNormal><span>The easiest way is probably a business rule.&nbsp; In the rule
check the new value, and if it is try, loop through all other rows in parent
list and set them to false( if they are true).<o:p></o:p></span></p>

<p class=MsoNormal><span><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><b><span>Sergey Barskiy<o:p></o:p></span></b></p>

<p class=MsoNormal><b><i><span>Principal Consultant<o:p></o:p></span></i></b></p>

<p class=MsoNormal><span>office: 678.405.0687 |
mobile:&nbsp;404.388.1899</span><span><o:p></o:p></span></p>

<p class=MsoNormal><span><img width=119 height=26 id="Picture_x0020_1" alt="cid:_2_0648EA840648E85C001BBCB886257279"><br>
</span><b><span>Microsoft Worldwide Partner of the Year |</span></b><span> </span><b><span>Custom
Development Solutions, Technical Innovation</span></b><span><o:p></o:p></span></p>

<p class=MsoNormal><span><o:p>&nbsp;</o:p></span></p>

<div>

<p class=MsoNormal><b><span>From:</span></b><span> AndyW
[mailto:cslanet@lhotka.net] <br>
<b>Sent:</b> Monday, October 27, 2008 10:58 AM<br>
<b>To:</b> Sergey Barskiy<br>
<b>Subject:</b> [CSLA .NET] Adding logic to Business Object<o:p></o:p></span></p>

</div>

<p class=MsoNormal><o:p>&nbsp;</o:p></p>

<p>&nbsp;<o:p></o:p></p>

<p>I have a BusinessBaseList bound to a Grid control, one of the columns is a
check box.&nbsp;&nbsp;Only one row can can have a tick in the checkbox, so if a
user puts a tick in another row, the previous checked row must have the value
removed.<o:p></o:p></p>

<p>I have currently got this working by looping around the row collection of
the grid and setting all rows other then the newly checked to unchecked.<o:p></o:p></p>

<p>Although this is working, our next stage is to create a web front end as
well as the windows version.<o:p></o:p></p>

<p>So we really need this logic in the business object, what would be the best
way to achieve this?&nbsp; <o:p></o:p></p>

<p>Thanks<o:p></o:p></p>

<p class=MsoNormal><br>
<br>
<o:p></o:p></p>

</div>



</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>AndyW replied on Tuesday, November 11, 2008</h2><P>Thanks Sergey,</P>
<P>I have it working in most part, but I do not know how to get the value of the child object that has changed.</P>
<P>For instance everytime a checkbox is clicked the Custom Rule is fired and sets all the checkboxes to false, however I am unsure of how to ignore the child row that has changed.</P>
<P>Here is my custom validation rule that is set in the parent object.</P><FONT size=2>
<P></FONT><FONT color=#0000ff size=2>private</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>static</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>bool</FONT><FONT size=2> IsHomepageCheck&lt;T&gt;(T target, Csla.Validation.</FONT><FONT color=#008080 size=2>RuleArgs</FONT><FONT size=2> e) </FONT><FONT color=#0000ff size=2>where</FONT><FONT size=2> T : </FONT><FONT color=#008080 size=2>Article<BR></FONT><FONT size=2>{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT color=#0000ff size=2>foreach</FONT><FONT size=2> (</FONT><FONT color=#008080 size=2>ArticleImage</FONT><FONT size=2> artImg </FONT><FONT color=#0000ff size=2>in</FONT><FONT size=2> target._articleImages)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT size=2>artImg.IsHomepage = </FONT><FONT color=#0000ff size=2>false</FONT><FONT size=2>;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</FONT></P>
<P><FONT color=#0000ff size=2>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>true</FONT><FONT size=2>;<BR>}</FONT></P>
<P><FONT size=2>As you can see I am setting all the items to false, but I need to ignore the item that has been changed.</FONT></P>
<P><FONT size=2>Thanks</FONT></P>
<P><FONT size=2>Andy</P></FONT></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>sergeyb replied on Tuesday, November 11, 2008</h2>









 

 
  
 




<div class=Section1>

<p class=MsoNormal><span>I think you would need the Equals check and move the rule to
articleImage level<o:p></o:p></span></p>

<p><span>private</span><span> <span>static</span> <span>bool</span> IsHomepageCheck&lt;T&gt;(T target,
Csla.Validation.<span>RuleArgs</span> e) <span>where</span> T : <span>ArticleImage<br>
</span>{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span>foreach</span> (<span>ArticleImage</span> artImg <span>in</span>
(<span>ArticleImageList</span>)target.Parent))<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;If (!(artImg.Equals(target)
&amp;&amp; artImg.IsHomepage == true)<o:p></o:p></span></p>

<p><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;artImg.IsHomepage
= <span>false</span>;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span><o:p></o:p></p>

<p><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return</span><span> <span>true</span>;<br>
}</span><o:p></o:p></p>

<p class=MsoNormal><span><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><b><span>Sergey Barskiy<o:p></o:p></span></b></p>

<p class=MsoNormal><b><i><span>Principal Consultant<o:p></o:p></span></i></b></p>

<p class=MsoNormal><span>office: 678.405.0687 |
mobile:&nbsp;404.388.1899</span><span><o:p></o:p></span></p>

<p class=MsoNormal><span><img width=119 height=26 id="Picture_x0020_1" alt="cid:_2_0648EA840648E85C001BBCB886257279"><br>
</span><b><span>Microsoft Worldwide Partner of the Year |</span></b><span> </span><b><span>Custom
Development Solutions, Technical Innovation</span></b><span><o:p></o:p></span></p>

<p class=MsoNormal><span><o:p>&nbsp;</o:p></span></p>

<div>

<p class=MsoNormal><b><span>From:</span></b><span> AndyW
[mailto:cslanet@lhotka.net] <br>
<b>Sent:</b> Tuesday, November 11, 2008 8:09 AM<br>
<b>To:</b> Sergey Barskiy<br>
<b>Subject:</b> Re: [CSLA .NET] RE: Adding logic to Business Object<o:p></o:p></span></p>

</div>

<p class=MsoNormal><o:p>&nbsp;</o:p></p>

<p>Thanks Sergey,<o:p></o:p></p>

<p>I have it working in most part, but I do not know how to get the value of
the child object that has changed.<o:p></o:p></p>

<p>For instance everytime a checkbox is clicked the Custom Rule is fired and
sets all the checkboxes to false, however I am unsure of how to ignore the
child row that has changed.<o:p></o:p></p>

<p>Here is my custom validation rule that is set in the parent object.<o:p></o:p></p>

<p><span>private</span><span> <span>static</span> <span>bool</span> IsHomepageCheck&lt;T&gt;(T target,
Csla.Validation.<span>RuleArgs</span> e) <span>where</span> T : <span>Article<br>
</span>{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span>foreach</span> (<span>ArticleImage</span> artImg <span>in</span>
target._articleImages)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;artImg.IsHomepage
= <span>false</span>;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span><o:p></o:p></p>

<p><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return</span><span> <span>true</span>;<br>
}</span><o:p></o:p></p>

<p><span>As you can see I am setting all the items to
false, but I need to ignore the item that has been changed.</span><o:p></o:p></p>

<p><span>Thanks</span><o:p></o:p></p>

<p><span>Andy<o:p></o:p></span></p>

<p class=MsoNormal><br>
<br>
<o:p></o:p></p>

</div>



</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>AndyW replied on Wednesday, November 12, 2008</h2><P>Thanks&nbsp;Sergey, all is now working, much appreciated :-)</P>
<P>&nbsp;</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>rsbaker0 replied on Wednesday, November 12, 2008</h2><P>I could be wrong, but I see potential problems with that implementation if you were ever to call check rules manually on an object in the child list. It looks like it would unconditionally set any existing IsHomePage value in the list that was true to false. </P></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
