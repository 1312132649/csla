<html><header><title>Injecting Business Rules ... possible?</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Injecting Business Rules ... possible?</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/6797.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>raz0rf1sh posted on Wednesday, April 15, 2009</h2>We have a situation where different roles that are editing an object follow a different set of business rules.  For example, when entering a purchase order, Managers are authorized up to X$, while regulars Users are authorized up to X$, considerably less than managers.<br /><br />My thought was if I could somehow inject the business rules I should be able to handle this?  Just wondering if this is possible and interested in seeing how other users handle this situation.</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Wednesday, April 15, 2009</h2>Injection might be fancy.. but I would just make the rule method take the users role into account when doing the check.</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>nermin replied on Wednesday, April 15, 2009</h2>But what is preventing you to implement a custom validation method that inside checks for <br />(IPrincipal)user.IsInRole("Manager") and based on that compares to one max value or otherwise to another (one assigned to regular users).<br /> <br />After all this custom validation rules are nothing but a static methods that follow predefined signature.<br /> <br />Nermin<br /> <br /> <br /><br />________________________________<br /><br />From: raz0rf1sh [mailto:cslanet@lhotka.net]<br />Sent: Wed 4/15/2009 12:53 PM<br />To: Nermin Dibek<br />Subject: [CSLA .NET] Injecting Business Rules ... possible?<br /><br /><br /><br />We have a situation where different roles that are editing an object follow a different set of business rules.  For example, when entering a purchase order, Managers are authorized up to X$, while regulars Users are authorized up to X$, considerably less than managers.<br /><br />My thought was if I could somehow inject the business rules I should be able to handle this?  Just wondering if this is possible and interested in seeing how other users handle this situation.<br /><br /></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Wednesday, April 15, 2009</h2><P>I agree with Nermin.</P>
<P>And if you want better factoring, there are several object-oriented techniques you could use - to avoid having a simple if..else structure in the rule method.</P>
<P>You could have the rule as the current user token (Identity) for its authorized amount.</P>
<P>Of you could have a PurchaseOrderAuthorizationManager object, and ask it the question.</P>
<P>Either of these latter two options could be using models where the authorized amount is stored in a different class based on the type of user, or where the amount was loaded from a config table in the database (because I assume these aren't hard-coded values).</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>tiago replied on Friday, April 17, 2009</h2><P>I think injectiing business rules is a very interesting possibility. Suppose you have a standard application you sell to different clients and each one needs different business rules. Using injection you could do just that.</P>
<P>The point is: has anyone tryed it yet?</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>raz0rf1sh replied on Saturday, April 18, 2009</h2>Thanks for all the feedback! I too was looking at trying to us DI to have custom rules ... I also thought it would be nice, if the rules were interfaced base ... to inject my own rules engine.</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Sunday, April 19, 2009</h2>The problem with making rules interface based, is that you'd have to have a<br />class per rule. And that would prevent you from putting rule methods into<br />your business classes, which is often a nice technique.<br /><br />You can make a pretty good OOD case that a rule is a thing with a<br />responsibility, so you should have to instantiate an object to invoke a<br />rule. But there's so much overhead and code limitation around that approach<br />that I decided not to go that way.<br /><br />However, there's absolutely nothing stopping you from creating a generic<br />rule method that did instantiate an object to execute a rule. To make it<br />really generic, the rule method would accept some "rule name" that your DI<br />or IoC framework would translate into an actual type so you could create an<br />instance of that type. But that's easily done with a specific RuleArgs<br />subclass.<br /><br />Rocky<br /><br />-----Original Message-----<br />From: raz0rf1sh [mailto:cslanet@lhotka.net] <br />Sent: Saturday, April 18, 2009 7:09 AM<br />To: rocky@lhotka.net<br />Subject: Re: [CSLA .NET] Injecting Business Rules ... possible?<br /><br />Thanks for all the feedback! I too was looking at trying to us DI to have<br />custom rules ... I also thought it would be nice, if the rules were<br />interfaced base ... to inject my own rules engine.<br /><br /></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
