<html><header><title>Server-side Data Portal hooks</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Server-side Data Portal hooks</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/10935.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>Jaans posted on Wednesday, November 30, 2011</h2><p>Hi All</p>
<p>Is there some way I could hook an event / override to the server side of the data portal to allow me to validate some information about the request?</p>
<p>For example I might need to get a custom session property off of the ApplicationContext.User to slide / expire the session. There are some other useful trace / audit logging options I can think of here.</p>
<p>Thanks,<br />Jaans</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JonnyBee replied on Thursday, December 01, 2011</h2><p>Hi Jaans, </p>
<p>You can hook into the DataPortal using the <span style="font-family:Consolas;color:#a31515;"><span style="font-family:Consolas;color:#a31515;"><span style="font-family:Consolas;color:#a31515;"><span style="font-size:x-small;">CslaAuthorizationProvider&nbsp;<span style="font-family:Arial;color:#000000;">in Web.Config.</span></span></span></span></span></p>
<p><span style="font-size:x-small;">This will be the first call on the server for Authorizing the request (but you can do other stuff as well - f.ex logg the request).</span></p>
<p><span style="font-size:x-small;">Unfortunately, there is no similar hook for when the DataPortal has finished serving the request in the standard DataPortalProxys. </span></p>
<p><span style="font-size:x-small;">You can hook into the dataportal with custom exception handling (for transformation to serializable exception and/or exception logging) using the <span style="font-family:Consolas;color:#a31515;font-size:x-small;"><span style="font-family:Consolas;color:#a31515;font-size:x-small;"><span style="font-family:Consolas;color:#a31515;font-size:x-small;">CslaDataPortalExceptionInspector </span></span></span>setting. See Samples\Net\cs\CustomErrorHandling sample.</span></p>
<p><span style="font-size:x-small;">You can, however, implement your own DataPortalProxy and&nbsp;any custom logging/trace etc that you want. </span></p>
<p><span style="font-size:x-small;"></span></p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Jaans replied on Thursday, December 01, 2011</h2><p>Thanks Johnny!</p>
<p>I&#39;ll check out the CslaAuthorizationProvider and see if it fits my needs.</p>
<p>Is it a CSLA 4 only thing or is it available in CSLA 3?</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Jaans replied on Thursday, December 01, 2011</h2><p>FWIW -&nbsp;It&#39;s available in CSLA 3.8.4 also.</p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
