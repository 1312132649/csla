<html><header><title>MissingMethodException from TriggerAction</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>MissingMethodException from TriggerAction</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/11057.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>TSF posted on Friday, January 13, 2012</h2><p>I&#39;m trying to use a ChildWindow for the first time in SL4, and I&#39;m getting a MissingMethodException raised from a trigger action within the child window.&nbsp; I&#39;m not sure if this is right or wrong, but the only way I could figure out how to get my child window&#39;s data context to use&nbsp;the parent window&#39;s data context was to do this in the parent view&#39;s code-behind:</p>
<p style="padding-left:30px;">childWindow.DataContext = myViewModel;<br />childWindow.Show();</p>
<p>In the child window&#39;s trigger action, the MethodName is equal to a public method in the parent&#39;s view model.&nbsp; But when I click on the button in the child window, the trigger action throws the MissingMethodException:&nbsp; at Csla.Xaml.TriggerAction.CallMethod...</p>
<p>Can a trigger action be used in a child window?&nbsp; If so,&nbsp;what&nbsp;am I doing wrong?&nbsp; Thanks.</p></div><div style='padding:0 15 3 15;background-color:lightgreen'><h2>RockfordLhotka replied on Friday, January 13, 2012</h2><p>In the current code TriggerAction will write binding errors to the debug window in Visual Studio, just like other controls write their binding errors. This should include the method name and data context value - and that information might be quite helpful in troubleshooting your issue.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>TSF replied on Friday, January 13, 2012</h2><p>Thank you.&nbsp; That was helpful to get a little further.&nbsp; What I found is the following, which isn&#39;t what I expected.&nbsp; It looks like it is trying to find the method by looking in the underlying model (my business object) rather than in my VM:</p>
<h4 style="padding-left:30px;">Csla.Xaml.TriggerAction Error: CallMethod path error: &#39;AddGadget&#39; method not found on &#39;Test.Business.GadgetInfo&#39;, DataContext &#39;Test.Business.GadgetInfo&#39;</h4>
<p>The only thing I can think of is this:&nbsp; this particular&nbsp;trigger action is in a DataTemplate used by an ItemsControl.&nbsp; And the ItemsControl&#39;s ItemSource is set to {Binding MyList}.&nbsp; To clarify, in the data template, I have a button and then this trigger action:</p>
<p style="padding-left:30px;">&lt;csla:TriggerAction MethodName=&quot;AddGadget&quot;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MethodParameter=&quot;{Binding GadgetName}&quot;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TargetControl=&quot;{Binding ElementName=btnAddGadget}&quot;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TriggerEvent=&quot;Click&quot;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DataContext=&quot;{Binding}&quot;/&gt;</p>
<p>The {Binding} in the trigger action&#39;s DataContext&nbsp;must be referring to the GadgetInfo object instead of the view model.&nbsp; But in reality I sort of want both:&nbsp; I want the MethodParameter to refer to the GadgetInfo object, but I also want to have the MethodName refer to a method <em>on the VM </em>and not the GadgetInfo object.&nbsp; Is this just a case of bad design on my part?&nbsp;&nbsp;Is there a way to refer to the binding&#39;s parent so that&nbsp;the&nbsp;MethodName&nbsp;refers to&nbsp;a method on the VM instead of the Model?&nbsp; Thanks.</p>
<p>&nbsp;</p>
<p>&nbsp;</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>TSF replied on Friday, January 13, 2012</h2><p>In answer to my previous question, this is what I came up with.&nbsp; Feels a little messy, though:</p>
<p style="padding-left:30px;">&lt;DataTemplate x:Key=&quot;gadgetDataTemplate&quot;&gt;</p>
<p style="padding-left:60px;">...<br />&lt;Button Name=&quot;btnAddGadget&quot; <strong>Tag=&quot;{Binding GadgetName}&quot;</strong> Content=&quot;Add Gadget&quot; /&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />&lt;csla:TriggerAction MethodName=&quot;AddGadget&quot;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>MethodParameter=&quot;{Binding Tag, ElementName=btnAddGadget}&quot;<br /></strong>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TargetControl=&quot;{Binding ElementName=btnAddGadget}&quot;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TriggerEvent=&quot;Click&quot; <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>DataContext=&quot;{Binding DataContext, ElementName=ic}&quot;</strong>/&gt;<br />...</p>
<p style="padding-left:30px;">&lt;/DataTemplate&gt;</p>
<p style="padding-left:30px;">&lt;ItemsControl Name=&quot;ic&quot;<br />&nbsp;&nbsp;&nbsp; DataContext=&quot;{Binding}&quot;<br />&nbsp;&nbsp;&nbsp;&nbsp;ItemsSource=&quot;{Binding GadgetList}&quot; <br />&nbsp;&nbsp;&nbsp;&nbsp;ItemTemplate=&quot;{StaticResource gadgetDataTemplate}&quot;&nbsp;&nbsp;/&gt;</p>
<p>I changed the TA&#39;s data context to that of the ItemsControl so that it would pick up the VM instead of the GadgetInfo BO.&nbsp; Because I still needed to get the MethodParameter equal to the current item&#39;s name (GadgetName), I bound that to the button&#39;s Tag property because the button&#39;s data context was the list of GadgetInfo objects.&nbsp; Finally, I referenced that tag property in the TA&#39;s MethodParameter.&nbsp; Round about way of doing it but it worked.</p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
