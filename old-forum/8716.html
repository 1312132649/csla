<html><header><title>Setting Properties of Editable Child</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Setting Properties of Editable Child</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/8716.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>nj609eagle posted on Wednesday, March 24, 2010</h2><p>We have a person object, the Person object has a child&nbsp;object Email.&nbsp; the Email object is an editable Child.</p>
<p>When we load the Person object for someone that does not have an email, we get an empty object.&nbsp; isNew-=false.</p>
<p>When we set the Email address and save the person, the email goes to ChildUpdate, which fails because of missing key&#39;s to teh stored procedure.</p>
<p>Shouldn&#39;t the empty object be considered new?</p></div><div style='padding:0 15 3 15;background-color:lightgreen'><h2>ajj3085 replied on Wednesday, March 24, 2010</h2><p>No, since you probably created the Email as part of a fetch (and its Child_Fetch runs), MarkOld is called, which means it exists in the db. </p>
<p>You&#39;ll need some logic in your Person&#39;s Fetch routine that creates a new Email, and its state will be correct.&nbsp; </p>
<p>The only thing to watch for is that this means your Person will always be dirty (new objects are dirty by definition).&nbsp; So you&#39;ll either have to live with it, or call MarkClean after you create the new Email object (likely in the Email object&#39;s Create factory method, not in the Child_Create).</p></div><div style='padding:0 15 3 15;background-color:lightgreen'><h2>rsbaker0 replied on Wednesday, March 24, 2010</h2><p>Another possibility is to &quot;lazy load&quot; the child object. So, you don&#39;t instantiate it until someone references the property, and it will properly be New and not get marked old. The trade off is an additional round trip to the server to fetch the address, so this works well in some cases (when the email address is shown only on a form&nbsp; or property page somewhere) and very&nbsp;poorly in others (you want to show the email address in a grid with a list of the employees). </p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
