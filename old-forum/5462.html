<html><header><title>Invalid for root objects - use Delete instead Exception</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Invalid for root objects - use Delete instead Exception</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/5462.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>Burim Ratkoceri posted on Thursday, September 25, 2008</h2>Hi,<br>I have a BusinessListBase derived collection that is holding BusinessBase derived objects.<br>I have overridden the AddNewCore to allow Add New Row for a DevExpress Data Grid that I am using.<br>When I click on the blank space for the new row, the row does get created with no problem. If I decide to cancel the adding of the row (by hitting ESC as and example) the collection tries to mark the child object for deferred deletion and this is where I am getting the exception. <br>If I am creating the child object by using DataPortal.CreateChild&lt;&gt; instead of DataPortal.Create&lt;&gt;&nbsp; I don't have a problem which makes sence. However I don't understand why the parent property of the child object is correctly set upon Add (I have tested and confirmed that) but still the object is being recognized as a root object when DeleteChild is called on the business base.<br>Shouldn't the fact that it belongs to a collection make it a child object and not root?<br><br>Thanks,<br>Burim Ratkoceri<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Thursday, September 25, 2008</h2>No, being in a collection does not automatically mean the object is a child.&nbsp; Only calling MarkAsChild makes an instance a child object.&nbsp; You can have instances in EditableRootListBase, and none of the items in it are child objects.. they are root objects.<br><br>CreateChild will call MarkAsChild for you.. Create does not.&nbsp; That is why one works at the other does not.<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Burim Ratkoceri replied on Thursday, September 25, 2008</h2>Thanks ajj3085,<br />It seems logical, however why does the BusinessBase derived class reports the collection as its parent through the parent property?<br /><br />Burim</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Thursday, September 25, 2008</h2>Being added to the collection sets the parent.<br><br>There's two concepts you're confusing here.<br><br>On is parent child, which is a containment relationship.&nbsp; The child is contained in the parent.&nbsp; This is what BLB sets when an instance is added.<br><br>The other is root and child.&nbsp; In this relationship, child objects aren't loaded or saved independently.&nbsp; The root is the controller for them, and usually also starts and commits the database transaction as well.&nbsp;&nbsp; By default, all Csla objects are root objects, unless MarkAsChild is called.&nbsp; <br><br>You can get more detail in one of the earlier chapters of the book.<br><br>HTH<br>Andy<br></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
