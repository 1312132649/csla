<html><header><title>Prism 2 and CSLA</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Prism 2 and CSLA</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/6985.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>greengumby posted on Friday, May 22, 2009</h2><P>Hi,</P>
<P>Does anyone have any advice or have seen sample apps of how to integrate CSLA with Prism 2 for a large Silverlight Application.</P>
<P>Many Thanks</P>
<P>Jeremy</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>triplea replied on Friday, May 22, 2009</h2><P>The only place I found some reference on this was here: <A href="http://www.codingandcoffee.com/">http://www.codingandcoffee.com/</A></P>
<P>But the example being build is using Prism 1 and the blog has gone a bit quite. Also (since its Prism 1) its for WPF and not SL. But I used it as a statring point and got a lot from it.</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Jack replied on Friday, May 22, 2009</h2>Jeremy,<br><br>I am having success - it is going slowly but I believe/hope that I am almost through most of the technical challenges.&nbsp; I am quite happy with how it looks like it will work out but it has been a tough learning curve.&nbsp; CSLA + XAML + Silverlight + CAL + CodeGen is a lot to start with (no prior knowledge before Nov) and a huge jump from a simple winforms application.<br><br>Also going from MDI and child windows to a single UI page has been challenging.<br><br>I have tackled my bigger more complex UseCases first which didn't help either but taught me a lot.&nbsp; I really struggled with the concept of getting all my data in the parent and then pushing it out to the children/grandchildren and having the children/grandchildren as independent injectable views.&nbsp; It was hard to wrap my head around lazyloading certain data vs. retrieving the data and then passing it out to an injected view when it is created on demand (say open an infrequently used tab object).<br><br>That so much in Silverlight is async is also a bit of a mind warp but it is also really cool.&nbsp; I have some windows that open like data portals with each piece retrieving and spinning up on its own.&nbsp; It looks really cool to see it all arrive to the screen in chunks. <br><br>So far I have done the following:<br><br>a single CSLADataProvider for each view<br>a single presenter for each view<br>use the CSLADataProvider as my model <br><br>All views created with Dependency Injection.<br><br>I create the presenter/view, kick off the data retrieval or set the Model.objectInstance, drop it into a region or content holder, and that is it.<br><br>I've only done one level of regions off a shell and used a single 3rd party popup window control for details although some of my details windows are composite views and that is where I used the ContentControls.&nbsp; I do plan on expanding that later so just about everything is a region.&nbsp; I haven't really experimented too much with toggling back &amp; forth between to views in the same region (switching core pages) and optimizing that experience.&nbsp; I am caching my BO's but recreating views a lot.&nbsp; Not an issue at the moment but I can likely improve on that.<br>
<br>I would say that leanring and staring to use Interfaces vs. Inheritance was the biggest help.&nbsp; Without Interfaces the whole disconnected / injected model doesn't work.<br><br>Simple one BO/View are fairly straightforward but it gets much harder with complex UI.<br><br>When I have a child view I set the CSLADataProvider to ManageLifetime = false and I either retrieve data on demand or I push the data from the parent into the ObjectInstance after creating my presenter.<br><br>One big hurdle was with updates and EditLevel and keeping that in sync.&nbsp; The end result was a I tied a single managerBO to a single dataprovider on a MasterView and used that to do all the DataPortal updates.&nbsp; On any save, because the data gets auto-cloned, you have to reset all the child DataProvider.objectInstance.<br><br>What would be nice is a concept of a parent/child CSLA DataProvider that know how to re-sync the objectinstance so that the EditLevels are all in sync.&nbsp; I basically use a controller object to manage the interactions between the masterView and the childViews and when I instantiate a new view I link it to the masterDataProvider's Data_Saved event so I know to refresh the view's data after a save.<br><br>I sometimes wonder if it would just be easier to have a single view with multiple dataProviders but I am really liking the separation of views.&nbsp; Especially since I'm new to XAML and Blend I can keep each piece simple.<br><br>I'm not doing too much with the unitTesting (which I should) but as a maintenance piece I think it will be awesome to be able to test without the UI.<br><br>Anyhow those are some rambling thoughts - I'm sure I could do things more elegantly and I'll change and refactor as things make more sense but I do think they work fairly well together and as more people play with both and ask for updates it should get better.<br><br>I'll also add that my inability to generate design time data is killing me.&nbsp; I'm having to wire up a lot of stuff just to see what its going to look like and then update the XAML.&nbsp; <br><br>jack<br><br></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
