<html><header><title>Minor errata in project.Save() method</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Minor errata in project.Save() method</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/607.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>Mark posted on Wednesday, July 12, 2006</h2><P>From the ProjectTracker 'Project' class...</P>
<P>public override Project Save()<BR>{<BR>&nbsp;&nbsp; if (IsDeleted &amp;&amp; !CanDeleteObject())<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; throw new System.Security.SecurityException("User not authorized to remove a project");<BR>&nbsp;&nbsp; else if (IsNew &amp;&amp; !CanAddObject())<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; throw new System.Security.SecurityException("User not authorized to add a project");<BR>&nbsp;&nbsp; else if (!CanEditObject())<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; throw new System.Security.SecurityException("User not authorized to update a project");<BR>&nbsp;&nbsp; return base.Save();<BR>}</P>
<P>If, for some reason, the user didn't have edit rights but did have add rights, this code&nbsp;will throw an error.&nbsp; The last 'else if' check should probably read...</P>
<P>else if (!IsNew &amp;&amp; !CanEditObject())</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Monday, July 17, 2006</h2><P>I guess in my mind that scenario isn't valid - if you can't edit then you can't add <img src="/emoticons/emotion-1.gif" alt="Smile [:)]" /></P>
<P>You can certainly adapt this to meet other requirements, that's the point really. But I don't think this is incorrect.</P>
<P>At a higher level, this is a great illustration of how something simple can be interpreted in different ways - with possibly major differences in functionality. I see Add as a subset of Edit, where you are seeing Add and Edit as orthogonal. The real arbiter would have to be the business decision maker (if there was one in this case), and that detail would need to become part of the use case.</P>
<P>I think this is why the Agile people often talk about the code being the documentation - because the idea of coming up with some meta-language for describing business requirements at this level of detail has thus far proven elusive - and yet software can't be created without this level of requirement being described by the business decision maker...</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Mark replied on Monday, July 17, 2006</h2><P>For ProjectTracker it might be valid, but for other projects, maybe not so much.&nbsp; :-)&nbsp; The fault is mainly mine -&nbsp; I blindly copied and pasted that code into my business objects without analyzing the code - which is where I ran into the problem.</P>
<P>I have a business object that is "add-only".&nbsp; Once it's created, no editing/deleting is allowed (a reversing transaction is created if it has to be "un-done").&nbsp;&nbsp; Since I was using the de-facto code from ProjectTracker, I received a nice SecurityException during the Save() process, since the user obviously didn't have edit rights but did have add rights.</P>
<P>For what it's worth...</P></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
