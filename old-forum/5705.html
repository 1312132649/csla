<html><header><title>Custom PropertyInfo&lt;T&gt; derived classes?</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Custom PropertyInfo&lt;T&gt; derived classes?</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/5705.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>rsbaker0 posted on Thursday, October 30, 2008</h2><P>I was curious if anyone is implementing their own derived classes from the new&nbsp;<FONT color=#2b91af size=2><FONT color=#2b91af size=2>PropertyInfo</FONT></FONT><FONT size=2>&lt;T&gt; </FONT>class for supporting managed fields?</P>
<P>Is there some reason I shouldn't do this? Child objects and lists will often be derivable from a foreign key relationship in the database, and I was thinking specifying the relationship in the PropertyInfo to allow for a centralized fetching infrastructure. </P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>skagen00 replied on Thursday, October 30, 2008</h2>Just to chime in and say that we are using derived PropertyInfos without any trouble. </div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JoeFallon1 replied on Thursday, October 30, 2008</h2><P>I did it as an experiment to see how each PropertyInfo could track its current value as well as its original value. I found I also had to create a subclass for FieldData to implement the new IsDirty behavior which compares the current and orginal values and if they are the same then it is not dirty.</P>
<P>This means that each property could check its state for dirty and if you change it but then change it back it is no longer dirty. This is not true of CSLA BOs in general. Once you change them, they are always dirty. Even if you revert the value to its original value. This disregards the Undo feature of course since that does restore the total state. I am talking about UI changes to a field over time.</P>
<P>I thought I posted some sample code for this a while back.</P>
<P>You may want to search for:</P><FONT color=#0000ff size=2><FONT color=#0000ff size=2>
<P>Inherits</FONT></FONT><FONT size=2> FieldData(</FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>Of</FONT></FONT><FONT size=2> T)</P></FONT>
<P>Joe</P>
<P>&nbsp;</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>rsbaker0 replied on Thursday, October 30, 2008</h2><BLOCKQUOTE><div><img src="/Themes/default/images/icon-quote.gif"> <strong>JoeFallon1:</strong></div><div>
<P>I did it as an experiment to see how each PropertyInfo could track its current value as well as its original value. I found I also had to create a subclass for FieldData to implement the new IsDirty behavior which compares the current and orginal values and if they are the same then it is not dirty.</P>
<P>This means that each property could check its state for dirty and if you change it but then change it back it is no longer dirty. </P>
<P></div></BLOCKQUOTE></P>
<P>Excellent! This will be very helpful. </P>
<P>I had rolled my own implementation for caching the original values when I started using CSLA 2.1, so even more of my infrastructure can be eliminated if I switch over to managed properties. </P>
<P>I make&nbsp;use of the "is it really dirty" concept for some fields in business rules, skipping the logic if the user didn't make a change to a field, and if they do and break the rule, they can "fix" it by putting the original value back.</P>
<P>Thanks.</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JoeFallon1 replied on Thursday, October 30, 2008</h2><P>Let me know if you want to see the sample code I wrote. It may or may not be helpful. You can decide.</P>
<P>Or if you find the posted version.</P>
<P>I am not really using it. I was just testing out the idea.</P>
<P>Joe</P>
<P>&nbsp;</P></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
