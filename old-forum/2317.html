<html><header><title>Where I should Put this valiadtion rule ?</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Where I should Put this valiadtion rule ?</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/2317.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>AAKLebanon posted on Sunday, February 11, 2007</h2><P>I have this problem: let's say that i have a collection of child items, for example an ArrivalSheet that is a collection of ArrivalDetail objects.&nbsp;an ArrivalDetail object represent the Startour and EndHour for a specific Employee(this is a payroll project...), and of course, the date of the arrival to the work.</P>
<P>so i have a tabl like this:</P>
<P>Date&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;StartHour&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;EndHour</P>
<P>1/1/2007&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;7 AM&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4 PM</P>
<P>2/1/2007&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;7:30 AM&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3 PM</P>
<P>...</P>
<P>now, i want to ensure that not 2 ArrivalDetail overides each other, for example, it is not acceptable to say that:</P>
<P>1/1/2007&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;7 AM&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4 PM</P>
<P>1/1/2007&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;9 AM&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2 PM</P>
<P>so, where i can put this validation rule ? i found that it is not good to put this rule in the ArrivalDetail class, because this will make this class responsible for the others in the collection.</P>
<P>I found that i must put this rule in the Collection class, that is in the ArivalSheet. but now the problem is, with what property should this rule be associated ? and when it will be cheked ?</P>
<P>&nbsp;</P>
<P>I think this is a common problem in other domains also, for example, if a want to ensure that a Product Name is unique in a collection of Products, where&nbsp;I put this rule ?</P>
<P>&nbsp;</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>d0tnetdude replied on Sunday, February 11, 2007</h2>We've had to do something like this before, if the class doesn't have a parent then we do put the rule in the collection and perform the rule validation on the ListChanged event of the collection.&nbsp; From what I remember this event will fire when any of the children are added, updated or deleted.</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>skagen00 replied on Monday, February 12, 2007</h2><P>Exactly - do it on the list changed. </P>
<P>I have an almost identical situation to yours (mine has to do with date ranges overlapping) - on the listchanged, I cycle through the items as necessary to determine which ones overlap - I then have the collection set an internal setter to indicate on each child that overlaps that it overlaps. I tie a broken rule on each child to this property, so that when displaying a list of the children, it can be flagged which ones are invalid. That is, the ones that overlap. </P>
<P>&nbsp;</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>AAKLebanon replied on Monday, February 12, 2007</h2>Thinks for you, and I am interested in your approch,I will try to make the same think.</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>xal replied on Monday, February 12, 2007</h2>I wrote something quite a while ago that handles this particular case and a few others. There are some complexities in writing something like this that may not be obvious at first sight, so it took a few revisions until I got it to a point where it was flexible, fast and responsive (and of course, yields the correct results).<br><br>I will try to write something on this subject if I find the time.<br><br>Andr√©s<br></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
