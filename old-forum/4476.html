<html><header><title>how to get validation rule error description</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>how to get validation rule error description</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/4476.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>pillesoft posted on Friday, March 07, 2008</h2>Dear All,<br><br>i'm new to csla and to c# too. using csla 3.0.3.<br>i've created my first business objects, actually it is also a project object.<br>it has two smartdate properties. empty values are not allowed.<br>i've created a validation rule like this:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ValidationRules.AddRule&lt;Project&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; IsDateEmpty&lt;Project&gt;, "ProjStart");<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ValidationRules.AddRule&lt;Project&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; IsDateEmpty&lt;Project&gt;, "ProjFinish");<br><br>&nbsp;&nbsp;&nbsp; private static bool IsDateEmpty&lt;T&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; T target, Csla.Validation.RuleArgs e) where T : Project<br>&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (target._projstart.IsEmpty)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; e.Description =<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "Start date can't be empty";<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return false;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; else if (target._projfinish.IsEmpty)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; e.Description =<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "Finish date can't be empty";<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return false;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; else<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return true;<br>&nbsp;&nbsp;&nbsp; }<br><br>i think it is working fine, however may be not this one is the most efficient solution. any proposal welcome.<br>at the moment i don't have any GUI, only a console project to test my objects.<br>here when i save a new project object, which date value is empty i receive a ValidationRule exception, but the description is the default: Object can not be saved, or similar.<br>i saw in the ProjectTracker example, that the GUI has an errorprovider, which displays the correct validation rule description<br>but i cannot get the same in my Test console project.<br>please help me regarding this problem.<br><br>Ivan<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>steve981 replied on Friday, March 07, 2008</h2>Hi, the description of the validation rules broken is in the BrokenRulesCollection property of the business object, I think the following code may help you<br><br>&nbsp;&nbsp;&nbsp;&nbsp; try<br>&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; businessObject.Save();<br>&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; catch (Csla.Validation.ValidationException ex)<br>&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; foreach (Csla.Validation.BrokenRule brokenRule in businessObject.BrokenRulesCollection)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Console.WriteLine(brokenRule.Property + ": " + brokenRule.Description);<br>&nbsp;&nbsp;&nbsp; }<br><br>Regards,<br>Steven Walker<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>pillesoft replied on Monday, March 10, 2008</h2>thank you Steve, this is exactly what i expected for<br><br>Ivan<br></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
