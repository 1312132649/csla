<html><header><title>CSLA 3.6, performance issues in IIS6 on 2008</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>CSLA 3.6, performance issues in IIS6 on 2008</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/6800.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>Angthorn posted on Thursday, April 16, 2009</h2><P><FONT face=Arial size=2>Hi Guys,</FONT></P>
<P><FONT face=Arial size=2>We have recently moved the bulk of our legacy systems from the old CSLA v1 to the latest version of the code base. All is great :) but i have significant performance issues when i deploy our dataportals to a windows 2008 server running iis 6. The exact same code and deployement method running on an older server running iis 5 with less cpu power and resources is running much faster.</FONT></P>
<P><FONT face=Arial size=2>The kind of difference i am seeing are along the lines of:</FONT></P>
<P><FONT face=Arial size=2>Starting the application, time to get to the front screen of the app from application start-up:</FONT></P>
<P><FONT face=Arial size=2>on IIS 5&nbsp;&nbsp;&nbsp;&nbsp;--&nbsp;&nbsp;&nbsp;approx. 3.5 seconds</FONT></P>
<P><FONT face=Arial size=2>on IIS 6&nbsp;&nbsp;&nbsp;--&nbsp;&nbsp;&nbsp;not sure, about 4 minutes, long enough to boil the kettle anyhow</FONT></P>
<P><FONT face=Arial size=2>I do not claim to be a pro at setting up IIS 6, so was hoping someone out there may be able to give me some suggestions. At present IIS 6 is running pretty much with its defaults, the applications are all large C# back office systems using the CSLA as the data tier under IIS on a remote server. A relatively small number of client machine's, approx 90. But the speeds above are with just my machine on the system.</FONT></P>
<P><FONT face=Arial size=2>So then, anyone know of any magic switch?</FONT></P>
<P><FONT face=Arial size=2>cheers,</FONT></P>
<P><FONT face=Arial size=2>John Thompson</FONT></P>
<P><FONT face=Arial size=2>Senior Software Architect</FONT></P>
<P><FONT face=Arial size=2>play.com</FONT></P>
<P><FONT face=Arial size=2></FONT>&nbsp;</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Thursday, April 16, 2009</h2>I assume you mean IIS7, since 7 is the version that ships with Win2k8.  So you're testing IIS5 performance vs. 7?  There's quite a bit that has changed.  <br /><br />First thing is I would check your event logs, and see if there's any differences in your web.config.  </div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Angthorn replied on Sunday, April 19, 2009</h2><P>Yeah, it is i guess an unusual setup but as IIS7 is/was not approved at the time of the machine being setup my it team installed IIS6 rather than leaving 7 on the 2008 box. Maybe this is a cause for concern :S</P>
<P>regards,</P>
<P>J</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Monday, April 20, 2009</h2>Hmm... I didn't know you could even install IIS6 on Win2k8.  How did they manage that?  <br /><br />Did they actually install IIS6, or did they install the IIS6 compat. features?</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Angthorn replied on Tuesday, April 21, 2009</h2><P>Thanks for the pointers guys.</P>
<P>I got to the bottom of the problem, probably a dumb ass mistake lol, but i had Windows Authentication set to false where i needed it to be set to true. All is sorted now :)</P>
<P>JT</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>pblaylock replied on Thursday, April 16, 2009</h2>I would check your network settings, especially DNS. Possibly it is getting stuck resolving names of remote machines for db connection etc? Check your CPU usage while the app is starting, are you seeing any prolonged spikes related to iis/asp worker processes? Also 2008 comes with a lot of things turned off/blocked by default, check your event logs as already suggested.</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Angthorn replied on Sunday, April 19, 2009</h2><P>Ok thanks, i will check into the networking side of things.</P>
<P>Whilst the app is starting the CPU is cycling at 100% on the worker process for the duration of start-up. Have no idea why, the usage on the IIS5 install barely registers on the cpu monitor.</P>
<P>Regards,</P>
<P>&nbsp;</P>
<P>J</P></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
