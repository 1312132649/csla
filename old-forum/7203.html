<html><header><title>ValidationRules.CheckRules in the portal calls</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>ValidationRules.CheckRules in the portal calls</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/7203.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>Wbmstrmjb posted on Tuesday, June 30, 2009</h2>Normally ValidationRules.CheckRules() is called from within Create and Fetch but this poses a problem for me and remoting since one of my rules checks information on the "client" (web server) and that information is not available on the "server" (application server).  The firing of the rules throws an exception since the data isn't there.<br /><br />One solution I thought of is to expose a method for calling ValidationRules.CheckRules on the BO and inside the static Get function, call it after it has loaded.  Another option is to remove it all together from the Fetch since an object from the db should be valid.<br /><br />Does anyone have experience with this scenario and what is the best practice to handle it?  Thanks.</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Tuesday, June 30, 2009</h2><P>The "correct" answer is to make the rules smarter.</P>
<P>If a rule can only run on the client (or server) then use ApplicationContext.ExecutionLocation in the rule to make sure the rule only really runs when it can actually run.</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Wbmstrmjb replied on Wednesday, July 01, 2009</h2>Thanks Rocky.<br /><br />The reason for the "one sided" rule check is that a translation needs to be done on one of the properties.  Maybe we are going about it wrong.  Here is the scenario (cut down as to not bore you too bad):<br /><br />We have values for status (like Purchased, Rejected, etc.) and these statuses are effectivedated in the database because they can be turned off, have their name modified, etc.  So each status has both an ID (which is primary key, auto-inc) and a Key which is always the same for a given value.  As an example:<br /><br />ID  KEY   NAME            STARTDT    ENDDT<br />1    1      Purchased       06/01/09  06/20/09<br />2    2      Rejected       06/01/09   <br />3    1     Bought           06/20/09<br /><br />That is a basic example.  So the ID is stored in the record of the actual item.  One check needs to make sure the item is "Purchased" which really means has a Key of "1".  But the record has the ID (either 1 or 3 depending on when it was made) in it.  So we have a translator that carries the pairing of ID and Key and translates back and forth when needed.  The translator is carried in the HttpApplication.Application cache.  Obviously it does not exist on the Application server across the portal.<br /><br />Is this a valid time to use your suggestion or are we doing something wrong?<br /><br />Thanks.</div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
