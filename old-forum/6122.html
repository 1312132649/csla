<html><header><title>Design Clarification</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Design Clarification</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/6122.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>pac posted on Sunday, January 11, 2009</h2>Hi, <br />  <br />I have a use case where, <br />  <br />When a user is creating a new person, if the user hasn't chosen to use an already existing Family record then I want to create a new family using the address data details entered against that person before insert so I have a guid to assign to that members required foreign key family field.<br /><br />Where would be the best place to have this routine in the BusinessBase of the person? Please keep in mind that I do not want to update this family record on every save, I just want to insert it if it is not there on the creation of a new member.<br /><br />Sorry this is probably quite a newbie question.. but that is what I am at this point in time :)<br /></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>daniel_higgins replied on Sunday, January 11, 2009</h2>I just want to point out that you can use a third class that specifically handles the business rules around the creation of a Person. </div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Monday, January 12, 2009</h2>Well, assuming you'll have a BO that lets you edit family data, you could have an internal method off of Family that the Person BO can use for this purpose.&nbsp; <br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>pac replied on Monday, January 12, 2009</h2>Thanks for the reply ajj!<br /><br />Yes we do have a family BO and can call a method from there to insert the family data.<br />Where would the call to the family BO sit? Would we put it into the DataPortal_Insert of the Person, checking the familyFK for Guid.Empty and call the Family BO function passing in the details of which we want saved? Or is there a more correct place to call this function?<br /><br />Also would this be something you would expect the internal family method to look like?<br /><br />public static Guid CreateFamilyfromPersonDetails(person tempperson)<br />{<br />     FamilyBase NewFamily = NewFamilyBase();<br />     NewFamily.FamilyName = tempperson.Surname;<br />     NewFamily.Address1 = tempperson.Address1;<br />     NewFamily.Address2 = tempperson.Address2;<br />     .....<br />     NewFamily.Save();<br />     return NewFamily.ID;<br />}<br /><br />Calling it like so? <br /><br />if (FKFamily == Guid.Empty) <br />{<br />  FKFamily = FamilyBase.CreateFamilyfromPersonDetails(this);<br />}<br /><br />Sorry again I know this is probably quite basic, we have the Business Objects 2008 book on order which should arrive in the next couple of days so we hopefully won't have to bother you with these types of questions again :P</div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
