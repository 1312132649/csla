<html><header><title>Any ideas why WPFToolkit sorting does not work with ObjectDataProvider or Wpf.CslaDataProvider</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Any ideas why WPFToolkit sorting does not work with ObjectDataProvider or Wpf.CslaDataProvider</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/5877.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>GeorgeG posted on Tuesday, November 25, 2008</h2><P>I am using wpftoolkit grid but the sorting does not work when click on the header columns to sort. This is what I am using</P>
<P>&lt;ObjectDataProvider x:Key="OrdersObjectDataProvider" <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ObjectType="{x:Type business:Orders}" <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; IsInitialLoadEnabled="False"<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; IsAsynchronous="False"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; MethodName="GetOrdersNone"&gt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/ObjectDataProvider&gt;</P>
<P>DataGrid Grid.Row="1" Margin="6,37,0,4" Name="dataGridOrders" <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; CellStyle="{StaticResource DataGridCellStyle}"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; AutoGenerateColumns="False"<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; SelectionUnit="Cell"<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; CanUserSortColumns="True"<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ItemsSource="{Binding Source={StaticResource OrdersObjectDataProvider}}" &gt;</P>
<P>private ObjectDataProvider _odp = new ObjectDataProvider();</P>
<P>_odp = this.FindResource( "OrdersObjectDataProvider" ) as ObjectDataProvider;<BR>_odp.DataChanged += new EventHandler( odp_DataChanged );</P>
<P>_odp.Refresh();</P>
<P>private void odp_DataChanged( object sender, EventArgs e ) {<BR>&nbsp;if (_odp.Error != null)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; throw _odp.Error;</P>
<P>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; this.dataGridOrders.DataContext = _odp; }<BR></P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>GeorgeG replied on Monday, December 01, 2008</h2><P>I have posted a question in the codeplex group and this is what I got back </P>
<P>"BindingList does not implementing sorting (or filtering), you can confirm this by testing the BindingList.SupportsSorting methods which returns false. When using a BindingList it is up to you to implement sorting.<BR>BindingList is the old collection that is used for databinding. Within WPF you should use ObservableCollection which does implement sorting and will allow your grid to sort."</P>
<P>&nbsp;</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Tuesday, December 02, 2008</h2>Well, that's not quite true.&nbsp; You can set SupportsSorting to true and implement sorting.&nbsp; This is what SortedBindingList does.<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>GeorgeG replied on Tuesday, December 02, 2008</h2><P>With windows forms we use SortedBindingList and something like this would work<BR>Csla.SortedBindingList&lt;Destination&gt; sortedList =<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; new Csla.SortedBindingList&lt;Destination&gt;( destinations );<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; sortedList.ApplySort( "Short_nm", ListSortDirection.Ascending );<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; this.destinationsBindingSource.DataSource = sortedList;</P>
<P>How would you do something similar with WPF using CslaDataProvider or ObjectDataProvider?</P>
<P>Thanks</P>
<P>&nbsp;</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Tuesday, December 02, 2008</h2>In another thread I was just saying how differences between WPF and Windows Forms could eventually force me to have two different versions of CSLA .NET. This is an example, where I can't switch to ObservableCollection because that would break Windows Forms, but WPF doesn't fully support BindingList either...</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>CharlesChatt replied on Tuesday, July 06, 2010</h2><p>You could use something like this to wrap the list ... and support sorting --</p>
<p>var someCollection =<br />&nbsp;&nbsp;&nbsp;&nbsp; from someObject in someObjectList<br />&nbsp;&nbsp;&nbsp;&nbsp; select someObject;</p>
<p><br />DataGrid.ItemsSource = someCollection;</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Tuesday, July 06, 2010</h2><p>Unfortunately it isn&#39;t that simple. The result of a LINQ query is an IEnumerable&lt;T&gt;, which is the most basic collection type in .NET. That breaks all sorts of semantics, including auto-sorting, but also CSLA persistence.</p>
<p>CSLA 3.5-3.8 addresses this by changing the LINQ query to return a LinqBindingList&lt;T&gt; - but that implements IBindingList and is still not WPF-friendly.</p>
<p>CSLA 4 changes all collection base types to ObservableCollection&lt;T&gt;, so all CSLA collection types default to supporting WPF (and Siilverlight, ASP.NET Web Forms and ASP.NET MVC). There are now alternate base types for Windows Forms developers, because that&#39;s now the odd technology that requires IBindingList.</p>
<p>So the long-term answer is to move to CSLA 4. The short-term answer is really quite complex, since it requires that you wrap an IBindingList collection with ObservableCollection semantics. There are some blog posts out there about how to do this, but none of the answers are particularly good.</p>
<p>Microsoft really made life difficult when they decided that WPF would only provide partial support for IBindingList and/or that Windows Forms would provide absolutely no support for ObservableCollection...</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>CharlesChatt replied on Tuesday, July 06, 2010</h2><p class="MsoNormal" style="margin:0in 0in 10pt;"><span style="font-family:Calibri;font-size:x-small;"><span style="line-height:115%;font-size:11pt;">Our current implementation (3.8.3) has an info list of read-only items.<span style="mso-spacerun:yes;">&nbsp; </span>We initially had a linq filtered list bound to the grid &hellip;. and sorting worked.<span style="mso-spacerun:yes;">&nbsp; </span>Then we changed the implementation to bind the grid directly to the list, and suddenly, sorting was disabled.</span></span></p>
<p class="MsoNormal" style="margin:0in 0in 10pt;"><span style="font-family:Calibri;font-size:x-small;"><span style="line-height:115%;font-size:11pt;">Great solution &hellip; nope, we&rsquo;d rather use the ObservableCollection&hellip;. but for now, it&rsquo;s a simple solution for a read-only list <span style="mso-spacerun:yes;">&nbsp;&nbsp;</span>Yet, as you clearly point out, persistence and other benefits are removed in doing so.</span></span></p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Tuesday, July 06, 2010</h2><p>Oh, you know why - I think the DataGrid detects that the source is a super-dumb list and wraps it in a CollectionViewSource or something. They specifically don&#39;t do that for an IBindingList.</p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
