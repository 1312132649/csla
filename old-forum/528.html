<html><header><title>Connecting to Remote Portal</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Connecting to Remote Portal</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/528.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>Cslah posted on Monday, July 03, 2006</h2><P><FONT face=Tahoma size=2>I have an interesting bug that I'm trying to fix (Csla 1.5). Our app uses a login dialog that allows the user to connect to a DB locally or type in the URL for a remote&nbsp;dataportal. We change the connection string in the config file to accomidate this. A user can log out and log back in to get to another dataportal.<BR><BR>I'll point out before I go too far that we had to modify Csla to not use a connection string from the app.config file. .Net loads the config file ONCE during startup and will not load it again until you restart your application. Thus, changing the connection string won't take effect in a login dialog where the user can dynamically specify where they want to connect. To do this we made a connection.xml file and have our app read/write to it. We made Csla read from this file as well. This solved that problem.<BR><BR>Now, however, I have a bug that if you typed in the wrong address you're stuck with it until you restart.&nbsp;Csla seems to ALWAYS use the first portal address you used.<BR><BR>For some reason I think this might be in the ApplicationContext object somewhere? Is there a way to 'clear out' the connection to just start from scratch without restarting the app?&nbsp;I tried the .Clear() method on:<BR><BR></FONT><FONT face="Courier New" size=2>CSLA.ApplicationContext.Clear()<BR></FONT><FONT face="Courier New" size=2>CSLA.ApplicationContext.ClientContext.Clear()<BR>CSLA.ApplicationContext.GlobalContext.Clear()</FONT></P>
<P><FONT face=Tahoma><FONT size=2>None of these seem to work though, and I'm still stuck with the&nbsp;URL that the user first typed in.<BR><BR>Anyhow know how I can 'reset' things without restarting?<BR><BR>Thanks,<BR>Brian</FONT></P></FONT></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Tuesday, July 18, 2006</h2>It is in the client-side DataPortal class. That class contains code to cache the first data portal server object that is created, and then it just uses the cached instance. You'll need to modify the client-side DataPortal class to not cache the object.</div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
