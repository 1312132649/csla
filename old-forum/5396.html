<html><header><title>Idea for AuthorizationRules</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Idea for AuthorizationRules</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/5396.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>AzStan posted on Saturday, September 13, 2008</h2><P>I ran into an interesting problem recently.&nbsp; My Windows Form features a CheckBox control bound to a read-only property (no set accessor).&nbsp;The form also features a ReadWriteAuthorization control.&nbsp; The unanticipated result is that the checkbox control&nbsp;is enabled when <FONT size=2>ResetControlAuthorization() </FONT>is called on the ReadWriteAuthorization control.</P>
<P>Looking further, it seems that the implementation of Csla.Security.IAuthorizeReadWrite interface in BusinessBase does not check to see if the property is hard-wired for writing.&nbsp; This is understandable, because to do so would require reflection, and an associated performance penalty.</P>
<P>On the other hand, it seems counterintuitive to call a method named CanWriteProperty() and get a result of true, when the underlying property is hard-wired as read-only.</P>
<P>It would be easy enough to just turn off the readwriteauthorization for that one control.&nbsp; Simple, but carries a small penalty in reduced code maintainablility, and doesn't get to the issue.</P>
<P>I'm tempted to override CanWriteProperty in my custom base class and use reflection to check the Property, but this could have a big performance penalty.</P>
<P>It would be nice to be able to override CanWriteProperty and to be able to include the reflection based result in the Authorization Cache.&nbsp; Maybe Rocky could&nbsp;modify the&nbsp;_writeResultCache member&nbsp;in BusinessBase to be protected instead of private?&nbsp; I've had a few reasons to want protected access to that cached dictionary of authorization values.</P>
<P>Alternatively, Rocky could rewrite CanWriteProperty in BusinessBase to check if the property in question is Read-only.&nbsp; Though it would require reflection, the result could be cached with the Authorization result.</P>
<P>Discussion anyone?</P>
<P>&nbsp;</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>rsbaker0 replied on Saturday, September 13, 2008</h2><P>My $0.02...</P>
<P>I'd think that either the ReadWriteAuthorization&nbsp;or your own implementation could cache the property information so that any performance penalty is incurred once for each property bound to a control on the form. You wouln't have to reflect each time -- just reflect once and save the information about which properties don't have an accessible setter somewhere. </P></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
