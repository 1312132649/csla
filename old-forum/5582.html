<html><header><title>Problems with class properties of child objects in CSLA 3.6 Beta 1</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Problems with class properties of child objects in CSLA 3.6 Beta 1</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/5582.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>jmcd posted on Tuesday, October 14, 2008</h2>I'm currently working with CSLA 3.6 Beta 1 and having a problem with business objects which contain child business objects.<br><br>I have a business object called CompanyList which inherits from BusinessBase and contains a list of Company <br>objects (also Business objects).&nbsp; The CompanyList object has a factory method called GetCompanies which performs<br>a DataPortal Fetch, loading all Company business objects into the CompanyList instance.<br><br>When I call the factory method and get the instance of the CompanyList back, the Company objects have problems<br>with their properties (they only have two: ID and Name).&nbsp; When trying to access the properties, the following exception is raised:<br><br>System.InvalidOperationException: One or more properties are not registered for this type<br>with inner exception System.IndexOutOfRangeException: Index was outside the bounds of the array.<br><br>When I fetch Company objects by themselves, they do not have this problem, all properties work and have the correct values.<br><br>I have spent time debugging through the framework and noticed that the Company objects have<br>properly working properties at the point before they are serialized before being transferred back to the client-side DataPortal.<br><br>This led me to investigate the OnDeserializedInternal method of BusinessBase which (I believe) reconstructs the properties of a Business object upon deserialization.&nbsp; From the behaviour I've seen, it would appear that OnDeserializedInternal gets called for the CompanyList but not on the Company objects that are in the list that belongs to it. &nbsp;<br><br>To overcome this, in CompanyList, I overrode the OnDeserializedInternal method so that it would call the OnDeserializedInternal methods of each of the items in the list of Company objects and then make a call back to the base OnDeserializedInternal method.&nbsp; This raises a similar exception but it seems (from the exception stack) to be related to XML de-serialization.<br><br>Am I approaching this wrong or are there any suggestions that may help me get to the bottom of this issue?<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>triplea replied on Tuesday, October 14, 2008</h2><P>Seems like you need to do the _dummy trick:</P>
<P><A HREF="/forums/thread/26807.aspx">http://forums.lhotka.net/forums/thread/26807.aspx</A></P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>jmcd replied on Tuesday, October 14, 2008</h2>Thanks! That did the trick.<br></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
