<html><header><title>Multiple Data Portals</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Multiple Data Portals</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/1755.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>David posted on Monday, November 13, 2006</h2><P>I have a Windows Forms application that normally runs off the network and therefore uses a local SQL Server database. However, when I connect to the network I need to save a BO to an external database on a web server.</P>
<P>To handle this I created a second class library within my solution with a single shared function that accepts the BO and saves it to the database on the web server. With everything running locally (the web server is currently on my LAN) it all works fine.</P>
<P>I then tried to configure the <STRONG>new</STRONG> class library to run remotely, but I canâ€™t see how to configure the client so that my main class library is local and the new one is remote. When I add the following lines to app.config it always looks to the server for the data portal.</P>
<P>&lt;add key="CslaDataPortalProxy" value="Csla.DataPortalClient.RemotingProxy, Csla"/&gt;<BR>&lt;add key="CslaDataPortalUrl" value="<A href='http://www.mysite.com/remotinghost/RemotingPortal.rem"/'>http://www.mysite.com/remotinghost/RemotingPortal.rem"/</A>&gt;</P>
<P>I guess I could create a second Windows forms app to handle the remote upload and call that from my main app. Not very elegant but it does give me separate app.config file and therefore solves the problem. Is this the only solution or is it possible to configure the class libraries to use different servers?<BR></P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Sean D replied on Tuesday, November 14, 2006</h2><P>Hi David,</P>
<P>I ran into a similar situation recently. </P>
<P>As long as the SQL Server is accessible locally to the WinForms application, then you can simply mark those objects as [RunLocal()]. Note: This means that the data access methods will be run on the clients' machine. So they must have access to the database server (via ADO.NET or Enterprise Library). </P>
<P>If you configure the main DataPortal to be remote, then the other business objects will be run on the remote server (which will require access to the database).</P>
<P>I hope this helps.</P>
<P>My situation, albeit similar, has yet another issue. My Winforms app doesn't have direct access to the database layer. Therefore the objects that I create on my client machine ([RunLocal()] call webservices methods in the DataPortal_XYZ calls, and the rest (run remotely) execute on the application server that is beside, and has access to, the database server.</P>
<P>This solution works OK. </P>
<P>See this thread for further details:</P>
<P><A HREF="/forums/thread/8972.aspx">http://forums.lhotka.net/forums/thread/8972.aspx</A></P>
<P>&nbsp;</P>
<P>Regards,</P>
<P>Sean</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>David replied on Tuesday, November 14, 2006</h2><P>Sean - thanks for the suggestions. The problem with using RunLocal for me is that all of my objects bar one are required to RunLocal, so I could see this approach&nbsp;leading to maintenance issues that I would rather avoid.</P>
<P>I tried my earlier suggestion of creating a second WinForms application, but that didn't work either.&nbsp;I called it from the first app and passed it a copy of my object but it&nbsp;used the same dataportal as the main app.</P>
<P>In the end I read chapter 11 and wrote a web service to handle the remote requirement. This approach doesn't use the data portal at all so has removed my original problem.&nbsp;It was a lot more work than I had hoped as I discovered it is not that trivial to pass a complex BO to a&nbsp;web service. On the positive side it was an interesting learning experience and works like a charm.</P>
<P>David</P></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
