<html><header><title>Serialization of BOs that contain XElements</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Serialization of BOs that contain XElements</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/7497.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>OpticTygre posted on Sunday, August 23, 2009</h2>Hi all.  I have some BOs that inherit from my base BOs, which in turn inherit from BusinessBase and BusinessListBase.  Each of my base BOs - let's call them MyBusinessBase and MyBusinessListBase contain 2 private member variables of type XElement.<br /><br />All of my classes are marked as Serializable, and each of the private variables of type XElement have been marked as NonSerialized.<br /><br />Instantiating my BO works fine, however, when I attempt to set the datasource of my bindingsource (WinForms), I receive the error:<br /><br />Type 'System.Xml.Linq.XElement' in Assembly 'System.Xml.Linq, Version=3.5.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089' is not marked as serializable.<br /><br />This error is thrown in the CSLA BinaryFormatterWrapper class when the serialize method is called.<br /><br />Any clue what's going on here?  Thanks!</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JonnyBee replied on Sunday, August 23, 2009</h2>Hi,<br><br>You must also mark these fields as [NotUndoable]. When BeginEdit is called the n-level undo code will make a snapshot of you BO graph and that is when you get this error. <br><br>[NotUndoable] must also be applied to fields that may point back into top levels in you structure (likely to cause recusive calls in serializing and give "out of memory" exception). <br><br>/jonnybee<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>OpticTygre replied on Monday, August 24, 2009</h2>Thanks, Jonny.  Makes perfect sense to me.  With that, and a little code cleanup, it seems to have solved the issue.</div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
