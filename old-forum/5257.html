<html><header><title>ContextManager cannot find connection string from web.config</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>ContextManager cannot find connection string from web.config</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/5257.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>lublenok posted on Monday, August 18, 2008</h2><P>Hi all,</P>
<P>I am new to CSLA.NET, but I've already been impressed by the features it offers. I have the following problem: </P>
<P>I am using .Net 3.5 SP1 + VS2008 SP1 + CSLA.Net 3.5.1</P>
<P>I've developed a business layer and data access layer using LINQ-to-SQL pretty much the same way as shown in the reference project (ProjectTrackerCS). I've set up a unit test project, and unit tests work fine. Now, I have a web project, which I configured as follows:</P><FONT color=#0000ff size=2>
<P>&lt;</FONT><FONT color=#a31515 size=2>appSettings</FONT><FONT color=#0000ff size=2>&gt;<BR>&nbsp;&nbsp;&nbsp;&lt;</FONT><FONT color=#a31515 size=2>add</FONT><FONT color=#0000ff size=2> </FONT><FONT color=#ff0000 size=2>key</FONT><FONT color=#0000ff size=2>=</FONT><FONT size=2>"</FONT><FONT color=#0000ff size=2>CslaAuthentication</FONT><FONT size=2>"</FONT><FONT color=#0000ff size=2> </FONT><FONT color=#ff0000 size=2>value</FONT><FONT color=#0000ff size=2>=</FONT><FONT size=2>"</FONT><FONT color=#0000ff size=2>Csla</FONT><FONT size=2>"</FONT><FONT color=#0000ff size=2>/&gt;<BR>&nbsp;&nbsp;&nbsp;&lt;!--</FONT><FONT color=#008000 size=2>&lt;add key="CslaDataPortalProxy" value="Csla.DataPortalClient.WcfProxy, Csla"/&gt;</FONT><FONT color=#0000ff size=2>--&gt; <BR>&lt;/</FONT><FONT color=#a31515 size=2>appSettings</FONT><FONT color=#0000ff size=2>&gt;</P>
<P>&lt;</FONT><FONT color=#a31515 size=2>connectionStrings</FONT><FONT color=#0000ff size=2>&gt;<BR>&nbsp;&nbsp;&nbsp;&lt;</FONT><FONT color=#a31515 size=2>add</FONT><FONT color=#0000ff size=2> </FONT><FONT color=#ff0000 size=2>name</FONT><FONT color=#0000ff size=2>=</FONT><FONT size=2>"<FONT color=#0000ff>App</FONT></FONT><FONT size=2>"</FONT><FONT color=#0000ff size=2> </FONT><FONT color=#ff0000 size=2>connectionString</FONT><FONT color=#0000ff size=2>=</FONT><FONT size=2>"</FONT><FONT color=#0000ff size=2>...</FONT><FONT size=2>" </FONT><FONT color=#ff0000 size=2>providerName</FONT><FONT color=#0000ff size=2>=</FONT><FONT size=2>"</FONT><FONT color=#0000ff size=2>System.Data.SqlClient</FONT><FONT size=2>"</FONT><FONT color=#0000ff size=2> /&gt;<BR>&nbsp;&nbsp;&nbsp;&lt;</FONT><FONT color=#a31515 size=2>add</FONT><FONT color=#0000ff size=2> </FONT><FONT color=#ff0000 size=2>name</FONT><FONT color=#0000ff size=2>=</FONT><FONT size=2>"</FONT><FONT color=#0000ff size=2>Security</FONT><FONT size=2>"</FONT><FONT color=#0000ff size=2> </FONT><FONT color=#ff0000 size=2>connectionString</FONT><FONT color=#0000ff size=2>=</FONT><FONT size=2>"</FONT><FONT color=#0000ff size=2>...</FONT><FONT size=2>" </FONT><FONT color=#ff0000 size=2>providerName</FONT><FONT color=#0000ff size=2>=</FONT><FONT size=2>"</FONT><FONT color=#0000ff size=2>System.Data.SqlClient</FONT><FONT size=2>"</FONT><FONT color=#0000ff size=2> /&gt;<BR>&lt;/</FONT><FONT color=#a31515 size=2>connectionStrings</FONT><FONT color=#0000ff size=2>&gt;</P></FONT>
<P>When I try to run a test page in the web project, I get a null reference exception. When I debug this error, it turns out that it occurs in Csla.Data.ContextManager, line 62:</P><FONT size=2>
<P></FONT><FONT color=#0000ff size=2>var</FONT><FONT size=2> conn = ConfigurationManager.ConnectionStrings[database].ConnectionString;</FONT></P>
<P>In the watch window I can see that the ConfigurationManager.ConnectionStrings collection consists of only one element (some default db connection), but it does not see my two connection strings. Nor does it see any app settings. It seems that it doesn't see my web.config at all. The value of the database variable is correct.</P>
<P>I also tried to uncomment <FONT color=#008000 size=2>&lt;add key="CslaDataPortalProxy" value="Csla.DataPortalClient.WcfProxy, Csla"/&gt;<FONT color=#000000 size=3>, but to no avail</FONT></FONT></P>
<P>Do you have any idea what I am doing wrong?</P>
<P>Thanks a lot in advance!<BR>Leonid</P>
<P>&nbsp;</P></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
