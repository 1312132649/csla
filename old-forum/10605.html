<html><header><title>Adding complex methods to business objects</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Adding complex methods to business objects</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/10605.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>dan_morey posted on Thursday, August 11, 2011</h2><p>I need a little help with designing a test application that I am writing.</p>
<p>I have created a &quot;Policy&quot; object that handles all of the CRUD operations for a policy. Now I want to add the ability to Transact a policy, and I&#39;m not sure how to design this.</p>
<p>The first thought is to just add a few functions to the &quot;Policy&quot; object (&quot;CanTransact&quot; and &quot;&nbsp;
Transact&quot;) and put all the code in there. However, I think this breaks the single responsibility principle.</p>
<p>This leads me to believe that it should go into it&#39;s own class (e.g. &quot;PolicyTransact&quot;). If I do this what CSLA object does this use. Is it a command class or a businessbase? It won&#39;t have any data itself (just the policy object passed into it) so I&#39;m thinking it will be a command class. Or would it not be a CSLA class at all?</p>
<p>Once that is created, how would I call this? Do I just have it seperate and pass in whatever policy object I want to transact, or do I still have a transact &nbsp;function on the Policy object that does it for me. I&#39;m thinking of keeping it separate but using it in a public function might help keep this extra class more visible (to whoever is using the Policy class).</p>
<p>Any help will be appreciated. I&#39;m just trying not to start doing something that will cause me more problems further down the line.</p></div><div style='padding:0 15 3 15;background-color:lightgreen'><h2>RockfordLhotka replied on Thursday, August 11, 2011</h2><p>I recommend <em>designing</em> (not necessarily implementing) each user scenario (use case, user story, etc) independently.</p>
<p>So you apparently have an <em>edit a policy</em> user scenario, and your PolicyEdit (that&#39;s what I&#39;d name it anyway)&nbsp;class supports that scenario&nbsp;- that&#39;s good.&nbsp;You probably also have PolicyList and PolicyInfo types so the user can select the policy to edit. Or something along that line anyway.</p>
<p>Now you have a <em>transact a policy</em> user scenario. Presumably you need PolicyList and PolicyInfo types so the user can select the policy to transact. And you need a PolicyTransactor class to transact the policy.</p>
<p>This PolicyTransactor class probably is a command stereotype, and its Transact method probably accepts a PolicyInfo object so it fits nicely into the object model.</p>
<p>The PolicyInfo class might be reused across these user scenarios. The PolicyList type might be different (or at least have two factory methods) because I assume the second user scenario would only retrieve policies that can be transacted.</p>
<p>Your actual user scenarios may vary, and therefore the specifics may vary - but hopefully this gives you some idea of how I&#39;d approach the design anyway.</p></div><div style='padding:0 15 3 15;background-color:lightgreen'><h2>paul_rockerdale replied on Thursday, August 11, 2011</h2><p>If the PoilcyTransact doesn&#39;t contain any data and simply process an action&nbsp;then I would use the command class. I&#39;m assuming that your transact-policy action will&nbsp;do a database update;&nbsp;so&nbsp;by using a command class you automatically get all the CSLA goodness of a data portal, security and authorization. Rocky uses an OrderShipper command object to process an Order&#39;s shipping request&nbsp;in an example project for CSLA4. The OrderShipper command class has a Ship method that recevies an orderId and updates the invoice lines with a shipping date and returns a shipping number.</p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
