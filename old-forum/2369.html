<html><header><title>Question about Project Tracker's PTPrincipal.Login function</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Question about Project Tracker's PTPrincipal.Login function</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/2369.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>monkmonk posted on Friday, February 16, 2007</h2><font face="Arial">I've searched and didn't see any mention of this. <br><br>In the Project Tracker 2.1 WinForms sample's PTPrincipal.Login method the CSLA.ApplicationContext.User is only set if the if the user is authenticated. The code is shown below. <br></font><br><font face="Courier New" size="2">Public Shared Function Login( _<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ByVal username As String, ByVal password As String) As Boolean<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Dim identity As PTIdentity = PTIdentity.GetIdentity(username, password)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; If identity.IsAuthenticated Then<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Dim principal As New PTPrincipal(identity)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Csla.ApplicationContext.User = principal<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; End If<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Return identity.IsAuthenticated<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; End Function<br><br><font face="Arial"><font size="3">This doesn't make sense to me. If the user was logged on to a domain wouldn't any check in the application for IsAuthenticated return true? It seems to me that a better alternative would be to return an unauthenticated identity. <br><br>Can someone help enlighten me?<br><br>Thanks, <br><br>MM<br><br><br></font></font></font></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Saturday, February 17, 2007</h2><P>If you were using Windows security you'd be correct - and of course you wouldn't need this code at all.</P>
<P>But this is using custom authentication and a custom principal, not Windows security. So the Windows principal object isn't being used here at all.</P></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
