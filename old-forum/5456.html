<html><header><title>nesting DataSources?</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>nesting DataSources?</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/5456.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>decius posted on Wednesday, September 24, 2008</h2><P>This is sort of a UI developmental question.&nbsp; I'm hoping to be pointed in the right direction, as I'm sure this is a common task.</P>
<P>For instance on the UI side, I need to bind&nbsp;child Csla List&nbsp;objects to a DetailsView. These are children of a Csla.BusinessBase that are of type Csla.BusinessListBase...</P>
<P>what I've been doing is making&nbsp;a new CslaDataSource for each one that piggybacks off the root i.e.:</P>
<P>e.BusinessObject = GetParentObject().SomeListObject</P>
<P>This seems excessive to me because for objects with several children, I end up making a TON of new CslaDataSources.&nbsp; What's the common approach for this? Is it necessary to do this for EVERY CslaList object? or is there an easier way?</P>
<P>&nbsp;</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>PC Tech replied on Monday, October 06, 2008</h2>This is the approach that we take in our web forms UI. We have a separate CslaDataSource control for each child list or child object in our root object. I don't know if there is a better way of going about it than that considering that the controls need to get their schema from somewhere at design-time anyway and the only way I know to do that is by setting their datasource.</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>k2so replied on Monday, October 06, 2008</h2>this is the approach I used as well.<br><br>I wonder if there's any easier or more reusable solns too.<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ozitraveller replied on Monday, October 06, 2008</h2><P>Are you saying there these child collections are not internal to the parent object?</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>decius replied on Tuesday, October 14, 2008</h2><P><STRONG>ozitraveller, </STRONG>In some situations yes, some no.&nbsp; Regardless, I still end up having to make a new CslaDataSource for EACH child object, which adds a lot of code to the UI to maintain.&nbsp;&nbsp;Perhaps i'm using child objects unconventionally, but I see no&nbsp;better option for my data...</P>
<P>Thanks for the reply.</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>cousinanthony replied on Wednesday, February 11, 2009</h2><P>I know it has been a little while since that thread was posted.&nbsp; I am currently dealing with a similar issue.&nbsp; I really am not<SPAN>&nbsp; </SPAN>concerned with having multiple <SPAN>&nbsp;</SPAN>cslaDatasource on the page.<SPAN>&nbsp; </SPAN>This seems to be the cases with Windows applications.<SPAN>&nbsp; </SPAN>My issues is that haven’t figured out is how do perform an update on the parent and all child object with a single update button.<o:p></o:p></P>
<P>I really don’t like the editable grid approach where you would click an edit update button on each row in the grid and also have a separate update button if you are updating the individual information.<SPAN>&nbsp; </SPAN><o:p></o:p></P>
<P>Currently I have a Individual class which has properties for first name, mi, last name etc. It also contains two child properties for Addresses and Phone Numbers.&nbsp; An individual can have 0 or more addresses and 0 or more from numbers<o:p></o:p></P>
<P>On my Web Based form I want the user to be able to update all of this information at once.<SPAN>&nbsp; </SPAN>I have a asp:formView on my page which is bound to a CslaDataSource which is set to an instance of the Individual<o:p></o:p></P>
<P>I also have a asp:repeater control nested inside the Formview which is bound to another cslaDataSource which is set to the <SPAN>&nbsp;</SPAN>instance of the Individual.Addresses property.<o:p></o:p></P>
<P>The data displays fine and I can update any of the individual fields without any problem; however if changes are made to any of the address fields, these changes are not saved.<SPAN>&nbsp; </SPAN>I know it is because the clsaDatasource_Update method is never triggered for the address instance and this is because the Update is associated with the form view.<o:p></o:p></P>
<P>My question is how can you traverse those updates to all the child cslaDataSoruce?<o:p></o:p></P>
<P>Is there a better was to do this?<o:p></o:p></P>
<P><o:p>&nbsp;</o:p></P>
<P>Thanks<o:p></o:p></P>
<P>&nbsp;</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JoeFallon1 replied on Wednesday, February 11, 2009</h2><P>I do not use the cslaDataSource control in my web app.</P>
<P>I have many web&nbsp;forms with grids and repeaters that bind just fine to CSLA business objects and collections. The unbinding code simply finds the right object in the collection using e.DataSetIndex and then determines the value in each control and sets them to the BO property. I think there is a lot of FindControl code in there too. In other words it is done "manually" I guess. </P>
<P>Here is a small example:</P>
<P>In Page Load:<BR><FONT color=#0000ff size=2><FONT color=#0000ff size=2>If</FONT></FONT><FONT size=2> IsPostBack </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>Then<BR></FONT></FONT><FONT size=2>&nbsp; UnbindGrid()<BR></FONT><FONT size=2><FONT color=#0000ff>End</FONT> <FONT color=#0000ff><FONT color=#0000ff>If</FONT></FONT></FONT></P>
<P>In the code behind:</P>
<P><FONT color=#0000ff size=2><FONT color=#0000ff size=2>Private</FONT></FONT><FONT size=2> </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>Sub</FONT></FONT><FONT size=2> UnbindGrid()<BR></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>For</FONT></FONT><FONT size=2> </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>Each</FONT></FONT><FONT size=2> dgi </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>As</FONT></FONT><FONT size=2> DataGridItem </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>In</FONT></FONT><FONT size=2> dg.Items<BR></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>&nbsp; If</FONT></FONT><FONT size=2> dgi.ItemType = ListItemType.Item </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>OrElse</FONT></FONT><FONT size=2> dgi.ItemType = ListItemType.AlternatingItem </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>Then<BR></FONT></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2><BR></FONT></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>&nbsp;&nbsp;&nbsp; Dim</FONT></FONT><FONT size=2> mItem </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>As</FONT></FONT><FONT size=2> MyBO = mData.MyColl.Item(dgi.DataSetIndex)<BR><BR></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>&nbsp;&nbsp;&nbsp; Dim</FONT></FONT><FONT size=2> objTxt123 </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>As</FONT></FONT><FONT size=2> TextBox = </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>CType</FONT></FONT><FONT size=2>(dgi.FindControl(</FONT><FONT color=#ff00ff size=2><FONT color=#ff00ff size=2>"txt123"</FONT></FONT><FONT size=2>), TextBox)<BR></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>&nbsp;&nbsp;&nbsp; Dim</FONT></FONT><FONT size=2> objChkABC </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>As</FONT></FONT><FONT size=2> Checkbox = </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>CType</FONT></FONT><FONT size=2>(dgi.FindControl(</FONT><FONT color=#ff00ff size=2><FONT color=#ff00ff size=2>"chkABC"</FONT></FONT><FONT size=2>), Checkbox)</FONT></P>
<P><FONT size=2>&nbsp;&nbsp;&nbsp; mItem.123Property = objTxt123 .Text<BR>&nbsp;&nbsp;&nbsp; mItem.ABC Property= objChkABC .Checked<BR></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>&nbsp; End</FONT></FONT><FONT size=2> </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>If<BR></FONT></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>Next<BR></FONT></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>End</FONT></FONT><FONT size=2> </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>Sub</P></FONT></FONT>
<P>Joe</P>
<P>&nbsp;</P></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
