<html><header><title>WPF / WCF &amp; Compression :(</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>WPF / WCF &amp; Compression :(</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/8049.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>peteisace posted on Thursday, November 26, 2009</h2>hi, i'm sure i'm being quite stupid, but i would love some (detailed if possible) help with sorting out some compression for the WCF dataportal.<br /><br />first - the app is a WPF windows app, using a WCF dataportal for the dataaccess. however, once the WCF service has been moved to the real server, the performance is horrid.<br /><br />as such, i'd like to experiement with compression on the WCF service. but i don't know how...<br /><br />all the examples i've seen are for the silverlight projects. my knowledge of WCF is actually nothing, and i get the impression it can be a bit of a config hell hole.<br /><br />i don't think i can modify / inherit a CSLA portal / proxy class because it's a standard WCFPortal, not the Silverlight one. Is that correct?<br /><br />i've been looking at the WCF extensions project on Codeplex, but as of yet have been unable to configure it. has anybody tried using this with the CSLA WcfPortal?<br /><br />what should be the approach here - try and inject something as a before / after on the WCF side (some new custom binding, or binding extension or something), or try and modify a CSLA class? i'm NOT and will not be using the Silverlight portal, just the standard WcfPortal. i don't believe this has compression out of the box? <br /><br />i'm not using 3.8 as of yet, so there's no binary xml or anything. frankly i'm looking for some bog standard gzip compression and see if that improves things.<br /><br />like i said, i know practically nothing about Wcf, and i'm not overly au fait with the CSLA dataportal implementation.<br /><br />Any pointers, guidelines, anything in fact would be extremely welcome. i fear a week  of pooring over a config file are about to happen...<br /><br />Help me, Obi-Wan Kenobi; you're my only hope</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Thursday, November 26, 2009</h2><P>I love the Star Wars reference :)</P>
<P>The .NET WCF data portal channel is "closer to the metal" than the Silverlight version. In other words, .NET and WCF do essentially all the work, where in the SL case CSLA has to do more work because the built-in functionality just doesn't exist.</P>
<P>The advantage of the SL approach is that we were able to provide clear places to inject compression. The drawback of the SL approach is that there's more overhead in general. I would prefer if Microsoft implemented a NetDataContractSerializer in SL so we could just switch back to the .NET model...</P>
<P>The advantage of the .NET approach (what you are using) is that there's less overhead in general. The drawback is that .NET is doing all the work, so we can't inject steps into the process. Unless we incur the same overhead as on SL, we can't provide comparable compression options.</P>
<P>However, you can just purchase third-party WCF channels that do compression, and that's what I recommend. Why mess around with this at all, just buy a compressed channel and be done with it.</P>
<P>You might also be able to find ways to do compression in WCF yourself. WCF is incredibly extensible, and the data portal is just using standard WCF functionality. So any technique people use to compress WCF messages will almost certainly work with the data portal as well as any other WCF scenario.</P>
<P>In other words, on the .NET side CSLA gives all responsibiilty to WCF, which is good, because it means you can just use standard WCF techniques to get compression - totally independent of CSLA.</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>DocJames replied on Thursday, November 26, 2009</h2><br />Hi,<br /><br />My application is a ClickOnce Windows Forms application, with a WCF Data portal on the server.<br /><br />I'm using the WCF-Xtensions from Noemax for compression. It works out-of-the-box with the Data portal.<br /><br />Let me know if you want to see the config files I'm using.<br /><br />Thanks,<br />Jimmy<br /></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>peteisace replied on Thursday, November 26, 2009</h2>hi, thanks for the replies.<br><br>i got it working using the codeplex stuff in the end, which provides acceptable compression (compressed message was about 18% of the original size on the test that i did).<br><br>it turns out that it's not that difficult to integrate - and it's open source, so i can change the compression behaviour / algorithm if necessary.<br><br>i'm happy to post what i did, the servicemodel entries in the config files that i used (client &amp; server) to get this running, if it would be of any use to anybody; i think there's a few posts around this area. happy to accept though, that the way i've done it might not be optimal.<br><br>finally starting to see the point in WCF too :)<br><br><br><br><br><br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>shawndewet replied on Friday, November 27, 2009</h2>Please do post your ServiceModel config sections for the client and server...I'm also starting to figure out the WCF Dataportal and I'd love to see what you've done.<br /><br />Also, would you please let me know what tool you used to measure that the compressed data was 18% of the uncompressed data?</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JohnB replied on Friday, October 28, 2011</h2><p>Peteisace,</p>
<p>I know the post is old but I&#39;m curious if you&#39;re still using WCF an compression? I spoken to others on the forum about this and I would like to know what you ended up using as a final solution.</p>
<p>Regards,<br />John&nbsp;</p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
