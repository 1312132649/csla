<html><header><title>Re: Just need some help with PTWin</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Re: Just need some help with PTWin</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/1172.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>ozitraveller posted on Friday, September 08, 2006</h2><P>Hi </P>
<P>I hope someone can help me. This the first time I have tried to get ProjcetTracker running.</P>
<P>I have changed the db connection string to my local server with SQL2005, and then compiled and ran the project which produced the following error message.</P>
<P>Also I'm really only interested in PTWin running locally at the moment, which bits of the solution do I need if I only want to run PTWin?</P>
<P>Thanks</P>
<P>Ozi</P>
<P>&lt;add name="PTracker"&nbsp;<BR>&nbsp;&nbsp;&nbsp;connectionString="Data Source=Test\SQL2005;Integrated Security=True;User Instance=True"<BR>&nbsp;&nbsp;&nbsp;providerName="System.Data.SqlClient" /&gt;<BR>&lt;add name="Security"&nbsp;<BR>&nbsp;&nbsp;&nbsp;connectionString="Data Source=Test\SQL2005;Integrated Security=True;User Instance=True"<BR>&nbsp;&nbsp;&nbsp;providerName="System.Data.SqlClient" /&gt;</P>
<P>Csla.DataPortalException was unhandled<BR>&nbsp; Message="DataPortal.Fetch failed"<BR>&nbsp; Source="Csla"<BR>&nbsp; StackTrace:<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at System.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at System.Data.SqlClient.SqlInternalConnectionTds.CompleteLogin(Boolean enlistOK)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at System.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(SqlConnection owningObject, SqlConnectionString connectionOptions, String newPassword, Boolean redirectedUserInstance)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, Object providerInfo, String newPassword, SqlConnection owningObject, Boolean redirectedUserInstance)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnection owningConnection, DbConnectionPool pool, DbConnectionOptions options)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at System.Data.ProviderBase.DbConnectionPool.GetConnection(DbConnection owningObject)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at System.Data.ProviderBase.DbConnectionFactory.GetConnection(DbConnection owningConnection)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at System.Data.ProviderBase.DbConnectionClosed.OpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at System.Data.SqlClient.SqlConnection.Open()<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at ProjectTracker.Library.Security.PTIdentity.DataPortal_Fetch(Criteria criteria) in D:\_CLSA\ProjectTracker20cs\ProjectTracker.Library\Security\PTIdentity.cs:line 95<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at Csla.MethodCaller.CallMethod(Object obj, MethodInfo info, Object[] parameters) in d:\csla20cs\csla20cs\Csla\DataPortal\MethodCaller.cs:line 68<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at Csla.MethodCaller.CallMethod(Object obj, String method, Object[] parameters) in d:\csla20cs\csla20cs\Csla\DataPortal\MethodCaller.cs:line 49<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at Csla.Server.SimpleDataPortal.Fetch(Type objectType, Object criteria, DataPortalContext context) in d:\csla20cs\csla20cs\Csla\DataPortal\Server\SimpleDataPortal.cs:line 102<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at Csla.DataPortal.Fetch(Type objectType, Object criteria) in d:\csla20cs\csla20cs\Csla\DataPortal\Client\DataPortal.cs:line 191<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at Csla.DataPortal.Fetch[T](Object criteria) in d:\csla20cs\csla20cs\Csla\DataPortal\Client\DataPortal.cs:line 138<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at ProjectTracker.Library.Security.PTIdentity.GetIdentity(String username, String password) in D:\_CLSA\ProjectTracker20cs\ProjectTracker.Library\Security\PTIdentity.cs:line 57<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at ProjectTracker.Library.Security.PTPrincipal.Login(String username, String password) in D:\_CLSA\ProjectTracker20cs\ProjectTracker.Library\Security\PTPrincipal.cs:line 15<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at PTWin.LoginForm.OK_Click(Object sender, EventArgs e) in D:\_CLSA\ProjectTracker20cs\PTWin\LoginForm.cs:line 23<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at System.Windows.Forms.Control.OnClick(EventArgs e)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at System.Windows.Forms.Button.OnClick(EventArgs e)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at System.Windows.Forms.Button.PerformClick()<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at System.Windows.Forms.Form.ProcessDialogKey(Keys keyData)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at System.Windows.Forms.TextBoxBase.ProcessDialogKey(Keys keyData)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at System.Windows.Forms.Control.PreProcessMessage(Message&amp; msg)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at System.Windows.Forms.Control.PreProcessControlMessageInternal(Control target, Message&amp; msg)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at System.Windows.Forms.Application.ThreadContext.PreTranslateMessage(MSG&amp; msg)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at System.Windows.Forms.Application.ThreadContext.System.Windows.Forms.UnsafeNativeMethods.IMsoComponent.FPreTranslateMessage(MSG&amp; msg)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at System.Windows.Forms.Application.ComponentManager.System.Windows.Forms.UnsafeNativeMethods.IMsoComponentManager.FPushMessageLoop(Int32 dwComponentID, Int32 reason, Int32 pvLoopData)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at System.Windows.Forms.Application.ThreadContext.RunMessageLoopInner(Int32 reason, ApplicationContext context)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at System.Windows.Forms.Application.ThreadContext.RunMessageLoop(Int32 reason, ApplicationContext context)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at System.Windows.Forms.Form.ShowDialog(IWin32Window owner)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at PTWin.MainForm.DoLogin() in D:\_CLSA\ProjectTracker20cs\PTWin\MainForm.cs:line 321<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at PTWin.MainForm.MainForm_Load(Object sender, EventArgs e) in D:\_CLSA\ProjectTracker20cs\PTWin\MainForm.cs:line 33<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at System.Windows.Forms.Form.OnLoad(EventArgs e)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at System.Windows.Forms.Form.OnCreateControl()<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at System.Windows.Forms.Control.CreateControl(Boolean fIgnoreVisible)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at System.Windows.Forms.Control.CreateControl()<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at System.Windows.Forms.Control.WmShowWindow(Message&amp; m)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at System.Windows.Forms.Control.WndProc(Message&amp; m)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at System.Windows.Forms.ScrollableControl.WndProc(Message&amp; m)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at System.Windows.Forms.ContainerControl.WndProc(Message&amp; m)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at System.Windows.Forms.Form.WmShowWindow(Message&amp; m)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at System.Windows.Forms.Form.WndProc(Message&amp; m)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at System.Windows.Forms.Control.ControlNativeWindow.OnMessage(Message&amp; m)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at System.Windows.Forms.Control.ControlNativeWindow.WndProc(Message&amp; m)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at System.Windows.Forms.NativeWindow.DebuggableCallback(IntPtr hWnd, Int32 msg, IntPtr wparam, IntPtr lparam)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at System.Windows.Forms.SafeNativeMethods.ShowWindow(HandleRef hWnd, Int32 nCmdShow)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at System.Windows.Forms.Control.SetVisibleCore(Boolean value)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at System.Windows.Forms.Form.SetVisibleCore(Boolean value)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at System.Windows.Forms.Control.set_Visible(Boolean value)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at System.Windows.Forms.Application.ThreadContext.RunMessageLoopInner(Int32 reason, ApplicationContext context)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at System.Windows.Forms.Application.ThreadContext.RunMessageLoop(Int32 reason, ApplicationContext context)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at System.Windows.Forms.Application.Run(Form mainForm)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at PTWin.Program.Main() in D:\_CLSA\ProjectTracker20cs\PTWin\Program.cs:line 17<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at System.AppDomain.nExecuteAssembly(Assembly assembly, String[] args)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at System.AppDomain.ExecuteAssembly(String assemblyFile, Evidence assemblySecurity, String[] args)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at System.Threading.ThreadHelper.ThreadStart_Context(Object state)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at System.Threading.ThreadHelper.ThreadStart()<BR></P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>figuerres replied on Saturday, September 09, 2006</h2><P>for a "standard" sql server the connection string should be about like this:</P>
<P>&nbsp;&nbsp;&lt;add name="NameInAPP" <BR>connectionString="Data Source=NameOfServer;<BR>Initial Catalog=NameOfDatabase;<BR>Integrated Security=True;"<BR>&nbsp;&nbsp;&nbsp;providerName="System.Data.SqlClient" /&gt;</P>
<P>&nbsp;</P>
<P>UserInstance and the filename are used with express to load and unlaod the file on-the-fly.</P>
<P>the "catalog" is the name of the DB as shown in sql manager.</P>
<P>the Data Source is the server name, if it's std SQL - not an "instance" then it's the name of the server like&nbsp; MYSERVER</P>
<P>if you have sql instances then you do the MYSERVER\ThisVersion</P>
<P>HTH<BR><BR></P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Saturday, September 09, 2006</h2><BLOCKQUOTE><div><img src="/Themes/default/images/icon-quote.gif"> <strong>ozitraveller:</strong></div><div><p>Csla.DataPortalException was unhandled<br>&nbsp; Message="DataPortal.Fetch failed"<br>&nbsp; Source="Csla"<br>&nbsp; StackTrace:<br></p></div></BLOCKQUOTE><br><br>You need to look at the BusinessException or InnerException of that exception object to get the full details about the failure.<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ozitraveller replied on Saturday, September 09, 2006</h2><P>Thanks for the quick replies guys. </P>
<P>And I found the problem, Initial Catalog is missing from the connection string. It comes from being&nbsp;in heavy development in another language, and trying to do this as well. Can't see the wood for the trees!</P>
<P>It's all working now.</P>
<P>thanks</P>
<P>Ozi</P>
<P>&nbsp;</P></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
