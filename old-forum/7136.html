<html><header><title>RegisterProperty with lambdaExpression doesn't work as it used to work in Csla 3.6.2</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>RegisterProperty with lambdaExpression doesn't work as it used to work in Csla 3.6.2</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/7136.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>rfcdejong posted on Friday, June 19, 2009</h2><P>It seems that&nbsp;the RegisterProperty has changed</P>
<P>When i look at the 3.6.1 version and compare it with 3.6.2 the following is differend:</P>
<P><FONT color=#0000ff size=2><FONT color=#0000ff size=2>protected</FONT></FONT><FONT size=2> </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>static</FONT></FONT><FONT size=2> </FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>PropertyInfo</FONT></FONT><FONT size=2>&lt;P&gt; RegisterProperty&lt;P&gt;(</FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>Expression</FONT></FONT><FONT size=2>&lt;</FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>Func</FONT></FONT><FONT size=2>&lt;T, P&gt;&gt; propertyLambdaExpression, </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>string</FONT></FONT><FONT size=2> friendlyName)</FONT></P>
<P><FONT size=2>And 3.6.2<BR></FONT><FONT color=#0000ff><FONT color=#0000ff><BR><FONT size=2>protected</FONT></FONT></FONT><FONT size=2> <FONT color=#0000ff><FONT color=#0000ff>static</FONT></FONT> <FONT color=#2b91af><FONT color=#2b91af>PropertyInfo</FONT></FONT>&lt;P&gt; RegisterProperty&lt;P&gt;(<FONT color=#2b91af><FONT color=#2b91af>Expression</FONT></FONT>&lt;<FONT color=#2b91af><FONT color=#2b91af>Func</FONT></FONT>&lt;T, <FONT color=#0000ff><FONT color=#0000ff>object</FONT></FONT>&gt;&gt; propertyLambdaExpression, <FONT color=#0000ff><FONT color=#0000ff>string</FONT></FONT> friendlyName)</FONT></P>
<P>This results into&nbsp;<STRONG>All&nbsp;Property Registrations</STRONG> giving an error when registering without explicitly specified argument:</P><FONT size=2>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>internal</FONT></FONT><FONT size=2> </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>static</FONT></FONT><FONT size=2> </FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>PropertyInfo</FONT></FONT><FONT size=2>&lt;</FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>AAND_TYPE_MENU</FONT></FONT><FONT size=2>&gt; aandTypeMenuProperty = RegisterProperty(c =&gt; c.AandTypeMenu, </FONT><FONT color=#a31515 size=2><FONT color=#a31515 size=2>"Type menu"</FONT></FONT><FONT size=2>);</P></FONT><FONT size=2><FONT size=2><FONT size=2>
<P>error CS0411: The type arguments for method 'Csla.BusinessBase&lt;U4A.Ceedrie.Business.Infrastructure.Entities.Menu&gt;.RegisterProperty&lt;P&gt;(System.Linq.Expressions.Expression&lt;System.Func&lt;U4A.Ceedrie.Business.Infrastructure.Entities.Menu,object&gt;&gt;, Csla.RelationshipTypes)' cannot be inferred from the usage. Try specifying the type arguments explicitly.</P></FONT></FONT></FONT></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>rfcdejong replied on Friday, June 19, 2009</h2><P>I found the change causing the compile errors.</P>
<P>Issue ID 314&nbsp;"Consider a new overload of RegisterProperty to get compile checking on property names"<BR><A href="http://www.lhotka.net/cslabugs/edit_bug.aspx?id=314">http://www.lhotka.net/cslabugs/edit_bug.aspx?id=314</A><BR><BR>As example for the ReadOnlyBase the differences are under:<BR><A href="http://www.lhotka.net/cslabugs/svn_diff.aspx?id=4716">http://www.lhotka.net/cslabugs/svn_diff.aspx?id=4716</A><BR><BR><STRONG>Can this be reverted or added as overloads?<BR></STRONG><BR>Anyway it should had been a "breaking change". Having 1000+ property registrations it's alot of work going to an upgrade.&nbsp;I ran into this issue because i'm analysing the impact of going to Silverlight, ofcourse i took the newest version 3.6.3.</P>
<P>PS: If it's really better to use "object" instead of "P" i don't really mind and we just spend a few hours changing those, but it isn't needed since our properties are always of the same type as the propertyinfo.</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Saturday, June 20, 2009</h2><P>This change was made to address a direct issue - but I don't remember the specifics right now.</P>
<P>I am not adverse to adding it as an overload if that would work - why don't you try that idea and see if it works (with the same <EM>and different</EM> property/field types).</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>rfcdejong replied on Saturday, June 20, 2009</h2>i'm not sure if they will work as overload, since i didn't try it.<br />Anyway using the generic as payload for the lambda expression is more strict and offered the posibility of leaving away a specific declaration. The object is just more flexibel and allows a differend type of registered propertyinfo on another property type.<br /><br />It doesn't matter that much for us atm, we didn't released anything yet and a find and replace isn't hard.. And i love refactoring :)</div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
