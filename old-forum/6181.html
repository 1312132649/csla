<html><header><title>NON-CSLA Programming Question</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>NON-CSLA Programming Question</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/6181.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>wjcomeaux posted on Friday, January 16, 2009</h2><P>You guys come up with some of the best designs I've seen so here goes.</P>
<P>We are implementing a process that I am designing with a state manager. At any time a merchant can be in some state regarding credit processing (Accepted, ReadyForProcessing, Cancelled, SwitchingProcessors, etc).</P>
<P>We are building the business objects with CSLA and that all works well, however we want the GUI programmer to have access to only a single interface called something like ICreditProcessor</P>
<P>The state manager would return the proper (current)&nbsp;state as an ICreditProcessor instance and then raise an event that the GUI hears and appropriately refreshes the binding for values, editability and visibility..</P>
<P>For databinding the only way we have come up with would be for ICreditProcessor to allow things like IsMerchantNameEditable, IsMerchantNameVisible, IsSICCodeEditable, IsSICCodeVisible, etc for everything we'd want to bind to.</P>
<P>We thought about a dictionary&lt;string, bool&gt; where string is the property name and then we databind to something like EditableFieldDictionary["MerchantName"]. But that won't work.</P>
<P>Neither will databinding to a function like<BR>IsPropertyEditable("MerchantName") that in turns searches the dictionary or performs some business logic.</P>
<P>So, how would you guys approach this?</P>
<P>Thanks,<BR>Will</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>rfcdejong replied on Saturday, January 17, 2009</h2>It depends which GUI u are using, if it's WPF then the required code will be less. Let the GUI programmer search for "Style.Triggers" combined with WPF databinding.</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>wjcomeaux replied on Monday, January 19, 2009</h2>Straight up windows forms and/or ASP.NET. we haven't evolved into WPF users here yet =)</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JonnyBee replied on Tuesday, January 20, 2009</h2>You could use the ReadWriteAuthorizationProvider to help you with this. <br><br>Ovveride the CanReadProperty (similiar to Is&lt;propertyname&gt;Visible) and CanWriteProperty(similar to Is&lt;propertyname&gt;Editable) in your BO's. <br><br>The RWAM will extend the usual edit controls (not the DataGridView) and hence set:<br>- ReadOnly or Enabled if not CanWriteProperty<br>- Blank (or actually type.Default) in not CanReadProperty. <br><br>In DataBindingSorce.CurrentItemChanged event (is called whenever CurrentChanged or a property is changed) you could just add :<br>- RWAM.ResetControlAuthorization();<br><br>You will get a new property on each control (this is an Extender Control) like "Apply authorization on RWAM1" -&nbsp; that must be set to true for the controls that the RWAM should control the above mentioned properties for. <br><br>Or you could adapt your own version of the RWAM - tailored to suit your needs. <br><br>/jonny <br><br><br></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
