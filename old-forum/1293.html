<html><header><title>Shared Authorization Rules Clear the Cache</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Shared Authorization Rules Clear the Cache</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/1293.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>Grant.Argy posted on Wednesday, September 20, 2006</h2><P>Our application will be servicing companies that may have 1000's of employees and up to 100 different roles plus around a 1000 field authorization rules. This equates to around 100,000 rules to take into account when setting the shared rules.</P>
<P>To improve the performance and take this issue away we have created a generic internal role and a stored proc that returns a joined authorization list based on the user that logs in. The only problem is that when a user logs out and logs in as another we need to clear the shared authorization rules.</P>
<P>We don't want to use instance rules because they will be called on every instance, so we have modified the CSLA to have an accesible method that clears this cache.</P>
<P>I would prefer to not make mods to the framework any other suggestions.</P>
<P>Thanks</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>DansDreams replied on Thursday, September 21, 2006</h2>I don't understand.&nbsp; The <EM>rules</EM> themselves change based on who logs in?</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Grant.Argy replied on Thursday, September 21, 2006</h2>Except as explained initially I don't put every role authorization rule in as there are about 100,000 I only put in the rules related to the user</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JoeFallon1 replied on Thursday, September 21, 2006</h2><P>Hi,</P>
<P>Is this a WinForms or Web app?</P>
<P>It is not clear what "cache" you are talking about. Could you briefly outline the process for logging in, what rules get written where and how you currently "clear the cache"? What does your code look like? How does your custom Principal object fit into this equation? It has the list of Roles (and permissions?).</P>
<P>My best guess is that you are going to be stuck modifying the framework unless you can convince Rocky to change the way some of these classes are written. He is open to suggestions so if you can present things in a way that would allow you to derive from his class and then override a method he would consider it. He has really made CSLA 2.x much more extensible than 1.x.</P>
<P>Joe</P>
<P>&nbsp;</P></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
