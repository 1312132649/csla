<html><header><title>[3.5.1] ChildDataPortal MarkOld</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>[3.5.1] ChildDataPortal MarkOld</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/5424.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>Adalton4 posted on Thursday, September 18, 2008</h2><P>Hi,</P>
<P>&nbsp;</P>
<P>In the ChildDataPortal method 'Fetch', the call to MarkOld() is done before the actual call to the Child_Fetch method in the child object. This is inconsistent with the logic in the Update method, where it is called after the call to the child objects Update_Child or Child_Insert methods. I have overridden my MarkOld() methods to set some concurrency fields and other stuff who must be fired after they are loaded. So now i am forced with writing a manual call to MarkOld() in the Child_Fetch method, but wasn't it the intention to make this stuff automated?</P>
<P>&nbsp;</P>
<P>Thanks in advance for your response.</P>
<P>&nbsp;</P>
<P>Averell</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Thursday, September 18, 2008</h2>But it's consistent with the normal DataPortal Fetch.<br><br>This is done because there are many cases where business rules change after the object is saved.&nbsp; When rules are check in a Fetch, these rules will be wrong if the MarkOld call was done after the DP_F, because IsNew was true.&nbsp; The change was made to allow for this, and it makes sense.<br><br>MarkOld is called AFTER the insert / update, because the object now exists in the database.&nbsp; So IsNew is set to false after the actual insert has completed.&nbsp; Again, this makes sense, because IsNew indicates if the object exists in the database.<br><br>So, when you consider what IsNew means, the calling of MarkOld / MarkNew is consistent.<br><br>I would say that MarkOld isn't the appropriate place to set your concurrency fields; you should be doing that in the fetch, or possibly in the DataPortalComplete method.<br></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
