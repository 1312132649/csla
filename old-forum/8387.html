<html><header><title>New Child and IsDirty always = True question</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>New Child and IsDirty always = True question</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/8387.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>Pavel posted on Wednesday, January 20, 2010</h2>Hi everybody,<br><br>I have a child collection. <br>As soon as I create a new child and add it to ChildParent, my Child&nbsp; IsDirty=True even if child properties contain no value.<br><br>But here is my problem.<br>I want to check IsDirty status before processing my children before saving.<br><br>I do not want to read all property values, I assume then if for my Child IsDirty=False then it works for me.<br>But it always True.<br><br>How to resolve this issue?<br><br>thanks,<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Pavel replied on Wednesday, January 20, 2010</h2>Is MarkOld the only solution?<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Marjon1 replied on Wednesday, January 20, 2010</h2>MarkOld() on the child will work for you but probably isn't the best option. If you don't want your objects to be valid without the user entering in at least one value, then a validation rule should be added to enforce that rule. Otherwise there is nothing stopping a user typing in a value, then removing it and then still being able to save. <br /><br />Your parent then should become invalid as well, if you are using managed properties.</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Thursday, January 21, 2010</h2>You should probably read the first few chapters of the book.&nbsp; In a nutshell though, IsDirty indicates if the object has been modified from what's in the database.&nbsp; Since a new object by definition does not exist in the database, it's dirty.&nbsp; What you want is IsValid, which is driven off of ValidationRules.</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Pavel replied on Thursday, January 21, 2010</h2><BLOCKQUOTE><div><img src="/Themes/default/images/icon-quote.gif"> <strong>ajj3085:</strong></div><div>You should probably read the first few chapters of the book.&nbsp; In a nutshell though, IsDirty indicates if the object has been modified from what's in the database.&nbsp; Since a new object by definition does not exist in the database, it's dirty.&nbsp; What you want is IsValid, which is driven off of ValidationRules.</div></BLOCKQUOTE><br><br>Sometimes it is a wrong assumption that a new object is always IsDirty=True.<br>I would see it Dirty only if any value changed or entered.<br>If object is empty I would not save it to a database anyway.<br><br>Another question is:<br>I mark my object as MarkOld(), but if user enters value and later removes it object will be IsDirty=True even if there is no value in any properties.<br>Validation is not working for me as empty or Null value accepted.<br>I would like to see it IsDirty=False.<br><br>I am a new to a CSLA, and sometimes reading a well written book cannot help to resolve an issue.<br>Experience is more than that.<br><br><br><br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Pavel replied on Thursday, January 21, 2010</h2><BLOCKQUOTE><div><img src="/Themes/default/images/icon-quote.gif"> <strong>Dan Billingsley:</strong></div><div>

Now, the subtle thing I hear you say is more just that you want your persistence behavior to be that an invalid item is ignored if it is New when a save is attempted.</div></BLOCKQUOTE><br><br>Exactly, object available but users enter values as it required, as a result some Child in collection never touched.<br>I would prefer to check status IsDirty before doing anything to the child object.<br><br>I accept the CSLA rules and&nbsp; now I am thinking how to go around. --))<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Thursday, January 21, 2010</h2><P>Well, my explaination as to why you're seeing the IsDirty / IsValid is based on how Csla defines what dirty or valid means.&nbsp; And if you want to know the reasoning behind those choices, your only option is the book.</P>
<P>If you are trying to require a property value be entered and its not, I would check your AddBusinessRules override and property definitions.&nbsp; </P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Pavel replied on Thursday, January 21, 2010</h2><BLOCKQUOTE><div><img src="/Themes/default/images/icon-quote.gif"> <strong>ajj3085:</strong></div><div><p><br></p>
<p>If you are trying to require a property value be entered and its not, I would check your AddBusinessRules override and property definitions.&nbsp; </p></div></BLOCKQUOTE><br><br>Unfortunately, an empty value accepted as well as any numeric value and I cannot use Validation to catch it.<br>Thanks for help and it looks like I have to write a few lines of codes. There is no a simple way to resolve my reqs.<br><br><br></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
