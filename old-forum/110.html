<html><header><title>Undo in web app?</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Undo in web app?</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/110.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>Gigatron posted on Monday, May 15, 2006</h2><P>Shouldn't I be using&nbsp;BeginEdit(), ApplyEdit() and CancelEdit() in a web application if storing my objects in session variables?&nbsp; For example, I have a parent and child.&nbsp; The child is edited and the parent Save is called.&nbsp; The business rules of the parent fail, but yet the child values have already been modified.&nbsp; So what happens is, my form view control still shows the child values that the user entered even though the validation failed at the parent.&nbsp; Isn't there a way to cancel(undo, rollback or whatever) the child objects to their orginal states?&nbsp; </P>
<P>It's just I'm using Rocky's web example as a basis for learning and I don't see him using any undo capabilities.&nbsp; I know, I could just reload the objects, but I want&nbsp;to do as much caching as I can to minimize trips to database.</P>
<P>Any suggestions on what I might be doing wrong?</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Monday, May 15, 2006</h2><P>If you are using a Local data portal proxy, then you should use the same Clone() technique as in the Windows Forms chapter. BeginEdit() really isn't a solution here - because what you need is to get the object graph back to the state it was before trying to save it to the database.</P>
<P>Dim temp As Parent = _parent.Clone()<BR>_parent&nbsp;= temp.Save()</P>
<P>(wrapped in Try..Catch of course)</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Gigatron replied on Tuesday, May 16, 2006</h2>Thanks, that works great Rocky.&nbsp; I think I am getting confused on what really is a child object.&nbsp; I have a 1 to 1 relationship between parent/child, there is no collection, so both are from&nbsp;BusinessBase.&nbsp; I'm assuming the child should not set MarkAsChild(), as I can't delete the child from my parent.&nbsp; Anyone have any examples of 1-to-1 parent/child relationships I could look at?</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>xal replied on Tuesday, May 16, 2006</h2>In that case it doesn't necesarily have to be a child.... you can just count it as part of your object's data. (Whether it is required or not)<br>Then your sp would handle the insert / update / delete logic. Sometimes some relations feel like child objects, but they really aren't...<br><br>Andr√©s<br></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
