<html><header><title>Design Question (Validation)</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Design Question (Validation)</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/10742.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>MadGerbil posted on Thursday, October 06, 2011</h2><p>I&#39;ve a collection that I show in a datagrid using Silverlight.</p>
<p>Let&#39;s say the collection is an Address collection and I&#39;ve 3 columns that need to be validated: City, State, ZipCode.&nbsp;&nbsp; Each of these columns needs to validate against a list.&nbsp;&nbsp; Those lists are in tables in my database.&nbsp;&nbsp; What is the best way to load up those lists so that I may write business rules against them.</p>
<p>Don&#39;t get distracted by the example.&nbsp; Obviously, the State list is a well known list that isn&#39;t likely to change anytime soon so one would likely put that in a combobox and be done with it; however, this is only an example of the problem - for the sake of this example assume the State list changes frequently.</p>
<p>So here are my thoughts:</p>
<p>1: I could load up the 3 lists on each Address object.&nbsp;&nbsp; On the plus side, the rule code is easy to write and the object is self-contained.&nbsp; On the down side it really bloats the object graph, needlessly repeating collections that will be the same across all objects.</p>
<p>2: I could load up the 3 lists into a static field on the Address object.&nbsp; This would cut down on the bloat but I don&#39;t know if it&#39;s the correct way to handle this thing.&nbsp; Is serialization a problem here?&nbsp; I dunno.</p>
<p>3: The lists could be on the AddressList collection object.&nbsp; I could reference those lists in the rules by using the Address object&#39;s parent.&nbsp;&nbsp; </p>
<p>4: I could use asynchronous rules to query the database when an item needs to be validated.&nbsp; This seems unnecessary (only one user is likely to be using this part of the overall system so I don&#39;t have concurrency concerns) and I don&#39;t know if I want a *busy* indicator coming up every time a record is edited.&nbsp; </p>
<p>Thoughts?</p></div><div style='padding:0 15 3 15;background-color:lightgreen'><h2>JonnyBee replied on Thursday, October 06, 2011</h2><p>Hi,
</p>
<p>Another option is to let the actual lists &quot;cache&quot; themselves, in the same way as NameValueLists do and also provide a way of &quot;ClearCache&quot; so that when the &quot;editable object&quot; of the items in the list is changed you can also clear the list (especially as this is a single user application).</p>
<p>Your BO and Rules would just fetch the list as usual (only the list class will know if it is already fetched or if it needs to access the database). </p>
<p>In a multi-user system I would prefer option 4 and do a check with the actual data in the database.</p>
<p>&nbsp;</p>
<p>&nbsp;</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>MadGerbil replied on Thursday, October 06, 2011</h2>The cache approach is probably the best fit for my application.   Is there a sample of that somewhere?</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JonnyBee replied on Thursday, October 06, 2011</h2><p>Look at ProductCategory class in InventoryDemo project in Silverlight samples.</p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
