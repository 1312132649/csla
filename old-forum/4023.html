<html><header><title>WCF Problem</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>WCF Problem</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/4023.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>Yuhnke posted on Tuesday, December 11, 2007</h2>I have successfully implemented a client application using a csla library with remoting(Listener Service not IIS).<br>I am running in to a problem when trying to change the application over to WCF.<br><br>I have changed my client config to :<br><br>&lt;appSettings&gt;<br>&nbsp;&nbsp;&nbsp; &lt;add key="CslaAuthentication" value="Csla"/&gt;<br>&nbsp;&nbsp;&nbsp; &lt;add key="CslaDataPortalProxy" value="Csla.DataPortalClient.WcfProxy, Csla"/&gt;<br>&nbsp;&nbsp;&nbsp; &lt;add key="CslaSerializationFormatter" value="NetDataContractSerializer"/&gt;<br>&lt;/appSettings&gt;<br><br>&nbsp;&nbsp;&nbsp; &lt;system.serviceModel&gt;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;client&gt;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;endpoint name="WcfDataPortal"<br>&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; address="net.tcp://blabla.blah:32784/WcfHost/WcfPortal.svc" binding="netTcpBinding"&nbsp; <br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; contract="Csla.Server.Hosts.IWcfPortal"/&gt;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;/client&gt;<br>&nbsp;&nbsp;&nbsp; &lt;/system.serviceModel&gt;<br><br>I have changed my server config to :<br><br>&lt;configuration&gt;<br>&nbsp; &lt;system.serviceModel&gt;<br>&nbsp;&nbsp;&nbsp; &lt;services&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;service<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; name="Csla.Server.Hosts.WcfPortal"<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; behaviorConfiguration="metadataSupport"&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;host&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;baseAddresses&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;add baseAddress="net.tcp://blablablah:32784"/&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/baseAddresses&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/host&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;endpoint name="WcfDataPortal"<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; address="net.tcp://blablablah:32784/WcfHost/WcfPortal.svc"<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; binding="netTcpBinding"<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; contract="Csla.Server.Hosts.IWcfPortal"/&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/service&gt;<br>&nbsp;&nbsp;&nbsp; &lt;/services&gt;<br>&nbsp; &lt;/system.serviceModel&gt;<br>&nbsp;<br>&nbsp; &lt;appSettings&gt;<br>&nbsp;&nbsp;&nbsp; &lt;add key="CslaAuthentication" value="Csla"/&gt;<br>&nbsp; &lt;/appSettings&gt;<br><br>I am getting an error in the proxy.Fetch function on the svr.fetch***<br><br>public DataPortalResult Fetch(Type objectType, object criteria, DataPortalContext context)<br>&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ChannelFactory&lt;IWcfPortal&gt; cf = new ChannelFactory&lt;IWcfPortal&gt;(_endPoint);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; IWcfPortal svr = cf.CreateChannel();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; *****WcfResponse response =<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; svr.Fetch(new FetchRequest(objectType, criteria, context));<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cf.Close();<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; object result = response.Result;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (result is Exception)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; throw (Exception)result;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return (DataPortalResult)result;<br>&nbsp;&nbsp;&nbsp; }<br><br>The error I am getting is:<br><br>There was an error running this application, the error has been logged: System.InvalidOperationException: Cannot serialize the DataTable. DataTable name is not set.<br><br>This call happens to be a function retrieving a NameValueListBase.<br>&nbsp;Any help would be appreciated.<br></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
