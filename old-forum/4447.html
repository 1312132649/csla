<html><header><title>Best Practice For Copy Operation</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Best Practice For Copy Operation</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/4447.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>DamReev posted on Monday, March 03, 2008</h2><P>I'm trying to copy objects which have children, but I'm running into some issues. I need to be able to do a deep copy and rollback EditLevels without rollingback changes.</P>
<P>I have the following:</P>
<P><FONT face="Courier New" color=#000080>class Activity:BusinessBase&lt;Activity&gt;{<BR>&nbsp;public int ActivityId{get{...}set{...}}<BR>&nbsp;public ActivityType ActivityType{get{...}set{...}}<BR>&nbsp;public ParticipantList Participants {get{...} set{...}}<BR>&nbsp;public ActivityNote Note {get{...}set{...}}<BR>&nbsp;<BR>&nbsp;public TActivity As&lt;TActivity&gt;() where TActivity:Activity{<BR>&nbsp;&nbsp;TActivity activity = ActivityFactory.NewActivity&lt;TActivity&gt;();<BR>&nbsp;&nbsp;Csla.Data.DataMapper.Map(this, activity, true, "ActivityType");<BR>&nbsp;&nbsp;activity._activityId = this._activityId;<BR>&nbsp;&nbsp;if (this.IsNew) activity.MakeNew();<BR>&nbsp;&nbsp;else activity.MarkOld();<BR>&nbsp;&nbsp;if (this.IsDirty) activity.MarkDirty();<BR>&nbsp;&nbsp;if (this.IsChild) activity.MarkAsChild();<BR>&nbsp;&nbsp;if (this.IsDeleted) activity.MarkDeleted();<BR>&nbsp;&nbsp;return activity;<BR>&nbsp;}<BR>}</FONT></P>
<P><FONT face="Courier New" color=#000080>class Meeting:Activity{<BR>&nbsp;public MeetingType MeetingType{get{...}set{...}}<BR>&nbsp;public string Location{get{...}set{...}}<BR>}</FONT></P>
<P><FONT face="Courier New" color=#000080>class Call:Activity{<BR>&nbsp;public CallType CallType{get{...}set{...}}<BR>}</FONT></P>
<P><FONT face="Courier New" color=#000080></FONT></P>
<P>I would like to call the <FONT face="Courier New">As&lt;TActivity&gt;()</FONT> method to create a new Call which is pretty much a clone of the Meeting and I want to databind this Call to my UI (with a&nbsp;BindingSource)&nbsp;in place of the Meeting object it was copied from. However when I try to databind I run into issues with edit levels. Is there a way for me to reset the editlevels of all the child objects (Note and ParticipantsList, which contains Participant child objects) that have been "cloned"? I want all objects to be in the same state they would be in as if I had populated the object from the database or I had just created a brand new object.</P></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
