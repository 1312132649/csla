<html><header><title>I am not sure how to diagnose this problem</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>I am not sure how to diagnose this problem</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/1735.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>jspurlin posted on Friday, November 10, 2006</h2>I have an app that uses permissions. I do not touch anything in the core framework, I create a permissions management system in the library project for the app.&nbsp; The permissions are enumerated and the populate three list boxes:&nbsp; PermissionCategory, AvailablePermissions, PermissionsAssignedToRole.<br><br>Here is something to note:&nbsp; they do not use the csla:DataSource control: calls and databinding are handled in code behind. <br><br>Everything works as expected except for one thing: When I try to "select" a duplicate item from the listbox AvailablePermissions and add that permission to the PermissionsAssignedToRole listbox, stepping through the code works like the ProjectTracker example.&nbsp; <br><br>In the PTracker project, if I create another role with an identical Id, the exception is thrown <br><br>if (!IsValid)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; throw new Validation.ValidationException(Resources.NoSaveInvalidException);<br>and control is returned to the page.<br><br>In my project the exception is thrown and then falls through to the next line of code which isn't handled<br><br>(<font color="#0000ff">both PTracker and my project thr</font><font color="#0000ff">ow this exception</font>)<br>if (!IsValid)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; throw new Validation.ValidationException(Resources.NoSaveInvalidException);<br><br>(<font color="#0000ff">PTracker exits here and returns control and the error message to the page, my project then falls through and tries to execute this line, but the object is not valid</font>)<br>&nbsp;if (IsDirty)<br>&nbsp;&nbsp; result = (T)DataPortal.Update(this);<br><br>The one obvious difference is that I calling and binding in the code-behind without use of the csla datasource. I am sure my implementation is not completely correct, and I was wondering is anyone would have advice how to handle this.<br><br>For example, testing if the item is valid before "if(IsDirty)" also throws an unhandled error.<br><br>Thank you,<br>John Spurlin<br></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
