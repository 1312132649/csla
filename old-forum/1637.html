<html><header><title>Sending CommandObjects to different servers</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Sending CommandObjects to different servers</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/1637.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>davidk posted on Tuesday, October 31, 2006</h2><P>I'm looking for a way to send CommandObjects to different servers.&nbsp; My command objects perform tasks on things like the file system so they need to run on servers other than the application server.&nbsp; All my regular objects need to be loaded/saved through the application server using default CSLA functionality but I need to have a way to send command objects to a machine that is not the application server.&nbsp; I'm trying to find a way to do this without changing anymore of the CSLA code than necessary so I can easily migrate to new versions of the framework as they are released.&nbsp; It's easy enough at runtime to pass the target server name to the command object it's just a matter of getting that command object routed to the proper destination.&nbsp; Any ideas?&nbsp; Have I made my requirement clear?</P>
<P>&nbsp;</P>
<P>Thanks for any input.</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Bayu replied on Tuesday, October 31, 2006</h2>Hi,<br><br>I believe the command objects of CSLA are strictly for use with dataportal related functionality. <br><br>So I guess you just seek another way of communicating to other machines:<br><br>- you could do what CSLA does, use remoting;<br>&nbsp;&nbsp;&nbsp; - then you would have to setup a remoting channel<br>&nbsp;&nbsp;&nbsp; - when that's done you can submit anything through it that is marked as Serializable<br>&nbsp;&nbsp;&nbsp; - performance is great<br>&nbsp;&nbsp;&nbsp; - however, remoting is platform specific<br><br>- you could also create a web-service<br>&nbsp;&nbsp;&nbsp; - your target machine would need to run a webserver and expose a webservice on it<br>&nbsp;&nbsp;&nbsp; - it's xml-based (soap), so should be platform independent<br>&nbsp;&nbsp;&nbsp; - performance is reasonable<br><br>- you could setup Messaging<br>&nbsp;&nbsp;&nbsp; - simple and light-weight<br>&nbsp;&nbsp;&nbsp; - never done this, but it should not be too hard<br>&nbsp;&nbsp;&nbsp; - I believe this one is platform specific again, but I don't know for sure<br>&nbsp;&nbsp;&nbsp; - is typically asynchronous, so I don't know if it is of use to you<br>&nbsp;&nbsp;&nbsp; - deals automatically with broken network communications<br><br>- the hardcore way: setup your own TCPListener<br>&nbsp;&nbsp;&nbsp; - and use a TCPClient to submit data to the listener<br>&nbsp;&nbsp;&nbsp; - you can send anything you like, but you will have to implement a protocol yourself<br>&nbsp;&nbsp;&nbsp; - performance is superior<br>&nbsp;&nbsp;&nbsp; - platform indepent (unless you choose a platform specific protocol like serialization)<br><br><br>Hopefully this gives you some leads (or keywords to search for on Google ;-) ). Depending on your use case different approaches could be preferred. What do you need? Synchronous or is asynchronous fine as well? Do you need platform indepence or is that not a constraint? What is your performance requirement? <br><br>Regards,<br>Bayu<br><br><br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>davidk replied on Tuesday, October 31, 2006</h2><P>Thanks bayu.</P>
<P>Prior to adopting CSLA I implemented this functionality with custom TCPListener and TCPClient which worked but since platform independence wasn't an issue I eventually changed it to use remoting.&nbsp; There is just so much plumbing already done in CSLA that I was hoping to leverage it now that I am using&nbsp;the framework&nbsp;but it sounds like implementing my own remoting code outside of CSLA may be the best way to make this happen.&nbsp; I just wanted to make sure there wasn't some existing hook in the framework for something like this before I went off on my own.&nbsp; </P>
<P>The jobs that I am running will run asynchronously.&nbsp; Here is a simple&nbsp;example - every evening I want to compress files on a file server based on some criteria that the user has defined through the front-end.&nbsp; The code on the application server handles starting this compression job when it is due but the job needs to run on the file server for performance reasons.&nbsp; So, at the designated time the app server sends a command object to the file server, the file server runs the compression job, then calls back to the app server with the results.&nbsp; The app server sticks the results in the database so that the next time the user opens the front-end he can see that the job ran successfully, how long it took, etc.&nbsp; Sounds like what I'll do is have the app server invoke the job through remoting on the file server then have the file server update the status of the job (a csla business object) so the results are saved to the database.&nbsp; So, the job is a csla object and the file server can update it using existing csla functionality but I'll have to launch the job outside of csla.</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Bayu replied on Tuesday, October 31, 2006</h2><BLOCKQUOTE><div><img src="/Themes/alternate1/images/icon-quote.gif"> <strong>davidk:</strong></div><div><p>I just wanted to make sure there wasn't some existing hook in the framework for something like this before I went off on my own.&nbsp; </p>
<p></div></BLOCKQUOTE></p>None that I now of .... so I think you will have to do it yourself. However, you <i>are </i>in fact leveraging a framework .... it's just not csla. ;-) Having experience with TCP Listeners (which you have too apparently) this is already quite a timesaver.<br><br><p><BLOCKQUOTE><div><img src="/Themes/alternate1/images/icon-quote.gif"> <strong>davidk:</strong></div><div></p><p>The jobs that I am running will run asynchronously.&nbsp; Here is a simple&nbsp;example - every evening I want to compress files on a file server based on some criteria that the user has defined through the front-end.&nbsp; The code on the application server handles starting this compression job when it is due but the job needs to run on the file server for performance reasons.&nbsp; So, at the designated time the app server sends a command object to the file server, the file server runs the compression job, then calls back to the app server with the results.&nbsp; The app server sticks the results in the database so that the next time the user opens the front-end he can see that the job ran successfully, how long it took, etc.&nbsp; Sounds like what I'll do is have the app server invoke the job through remoting on the file server then have the file server update the status of the job (a csla business object) so the results are saved to the database.&nbsp; So, the job is a csla object and the file server can update it using existing csla functionality but I'll have to launch the job outside of csla.</p></div></BLOCKQUOTE><br><br>You could opt for messaging if you also want to be robust to failing network connections. But it sounds like you have it quite under control already. Nice!<br><br>Bayu<br></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
