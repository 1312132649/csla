<html><header><title>PropertyStatus CanWrite issue</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>PropertyStatus CanWrite issue</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/10373.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>Turntwo posted on Saturday, May 14, 2011</h2><p>Ran into an issue with PropertyStatus and the CanWrite property today, and wasn&#39;t able to figure out what was happening. </p>
<p>The issue is that a WPF Window is opened with a default BusinessObject using CslaDataProvider.&nbsp; Then the key value is updated (Property of the Window), which changes the factory parameter on the CslaDataProvider causing a new Business Object to be retrieved.&nbsp; When setting a property on the BO, CanWriteProperty returns false, however when PropertyStatus calls CanWriteProperty is returns True, because the PS is still attached to the old object (debug shows the CanWriteProperty call is occurring on the default BO) - even though this call is occurring after the call from the setter.&nbsp;&nbsp; </p>
<p>I debugged the PropertyStatus control, and it appears that the Source is being reset properly with the new DataContext - so I don&#39;t know what the issue is.What is even weirder is that only the one property refers to the old object, the other properties don&#39;t have this problem (iarw in UpdateState is the correct object for all but this one property).</p>
<p>I resolved the issue by setting the DP to InitialLoad=false so the default BO doesn&#39;t get loaded (except when the dialog is used to create a new entry).&nbsp; But I&#39;m still confused as to why PS isn&#39;t associating to the new object correctly, and worried that this is causing errors elsewhere in my application (although it appears to be working elsewhere).&nbsp; </p>
<p>Probably not enough information to resolve the issue, but if anyone has an idea I&#39;d love to hear it.&nbsp; </p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JonnyBee replied on Sunday, May 15, 2011</h2><p>Hi,</p>
<p>I have been working on the PropertyStatus (PS) and have a fix ready for WPF but need more testing on SL and WP. </p>
<p>There is several issues:&nbsp; <a href="http://www.lhotka.net/cslabugs/edit_bug.aspx?id=926%20">http://www.lhotka.net/cslabugs/edit_bug.aspx?id=926</a></p>
<p>If you wish to test my updated PropertyStatus then contact me privately.<br />When I&nbsp; have this ready for SL and WP it will be updated in the Repository.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Sunday, May 15, 2011</h2><p>It is also worth noting that some of this might be solved by SL5&nbsp;- at least the DataContextChanged event is now supposed to be available.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Turntwo replied on Sunday, May 15, 2011</h2><p>Excellent.&nbsp; For now I&#39;ll stick with my workaround, but would definitely be interested in the fixes when you are complete.&nbsp; </p>
<p>If you want me to test it in my scenario, I would be willing to do that (I can back out the workaround pretty easily).</p>
<p>Thanks, </p>
<p>Jason</p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
