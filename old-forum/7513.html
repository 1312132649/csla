<html><header><title>Cannot Serialize Decimal Array Property</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Cannot Serialize Decimal Array Property</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/7513.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>Gareth posted on Wednesday, August 26, 2009</h2>Hi, I have some decimal[] properties in my Silverlight business object and I'm getting some serialization errors, as shown below.<br /><br />I've defined my property like...<br /><br />private static PropertyInfo(decimal[]) SellPriceProperty = RegisterProperty(decimal[])(c => c.SellPrice);<br />public decimal[] SellPrice<br />{<br />    get { return GetProperty(SellPriceProperty); }<br />    set { SetProperty(SellPriceProperty, value); }<br />}<br /><br />and I'm initialising the array length in the DataPortal Create method.<br /><br />I'm not sure how to tell it how to serialize the property. Can someone point me in the right direction?<br /><br />Thanks,<br />Gareth.<br /><br /><br />---------------------------<br />Oops<br />---------------------------<br />An error has occured:<br /><br />System.Runtime.Serialization.SerializationException: Type 'System.Decimal[]' with data contract name 'ArrayOfdecimal:http://schemas.microsoft.com/2003/10/Serialization/Arrays' is not expected. Add any types not known statically to the list of known types - for example, by using the KnownTypeAttribute attribute or by adding them to the list of known types passed to DataContractSerializer.<br /><br />   at System.Runtime.Serialization.XmlObjectSerializerWriteContext.SerializeAndVerifyType(DataContract dataContract, XmlWriterDelegator xmlWriter, Object obj, Boolean verifyKnownType, RuntimeTypeHandle declaredTypeHandle)</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Wednesday, August 26, 2009</h2><P>It appears that Decimal isn't a type that is natively known to the DataContractSerializer. Or at least it can't understand an array of them.</P>
<P>You'll need to change that array to be a MobileList&lt;T&gt; - hopefully that works. If not, you'll need to create your own type that implements IMobileObject (which is a bit tricky).</P>
<P>The reason for all this, is that there isn't a BinaryFormatter or NDCS in Silverlight, so we had to create our own serializer for CSLA .NET for Silverlight. Since we don't own the .NET or SL platforms, our serializer has limitations you don't find in BF/NDCS...</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Gareth replied on Thursday, August 27, 2009</h2>Thanks Rocky, that does appear to have sorted the problem.<br /><br />Regards,<br />Gareth.<br /></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
