<html><header><title>Few comments on root/child objects</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Few comments on root/child objects</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/1232.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>Bahadir posted on Saturday, September 16, 2006</h2>Hi,<br><br>I've read the Expert C# 2005 Business Objects book and enjoyed it. Few comments though.<br><br>1) Although I am a total novice, I think that a child and root object should have been made more uniform, i.e. look like each other. This simplifies design.<br><br>a) For instance there's an optimisation that a root collects child data in a single database transaction and passes the DataReader to the child. This is an optimisation that reduces clarity. In my opinion this could have been discussed with an inline paragraph, or just mentioned later in an enhancements section. As a novice it increased complication for me.<br><br>b) A child doesn't have data access criteria like a root. For instance a ProjectResource object updates the database via an Update(Parent parent) and in the process involved is both a local field, _resourceid and a parent field, parent.Id. Don't you think the local field also need be passed by a criteria object?<br><br>I encountered these issues while converting a root to a child. If you disagree I would like to know your opinion.<br><br>Thanks, <br>Bahadir<br><br><br><br><br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JoeFallon1 replied on Saturday, September 16, 2006</h2><P>The first time you read the book you don't really understand the depth of the framework Rocky has created. It really takes stepping through the code in a live example to graspmany of the concepts. Project Tracker is a good place to start. But designing a small app and implememnting your own BOs is a better place. Then you can understand things better. YMMV.</P>
<P>a.) This is not an optimization but a key part of the design which Rocky has spent over a decade evolving.&nbsp;A Root fetches its own data plus its children's data. Grandchildren actullay add complications and there a couple of approved solutions there. Some people populate a dtaaset with relations and then use that to "hydrate" their BOs. I open a 2nd reader and let children get their own children. </P>
<P>b.) The Parent refernece passed to the child is most useful when using Identity values as the PK and you insert the Parent record first. Then you get back the newly created key and need to pass it to the child BO so it uses it when being inserted 2nd. I have not run into cases where I need the parent for anything else. So I created an IParent Interface witha Key Property and pass that when required. Works fine for me.</P>
<P>&nbsp;</P>
<P>&nbsp;</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Bahadir replied on Sunday, September 17, 2006</h2>Hi,<br><br>Thanks, after spending some more time on it I'm convinced passing the data readers are a key part in root/child relationship.<br><br>Is there any smaller working code example (preferably a website) than the ProjectTracker? For example, a very basic implementation with one root collection and its children or a similar combination? Once I fully figure out this pattern it should be simpler to build on it.<br><br>Thanks,<br>Bahadir<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Monday, September 18, 2006</h2><BLOCKQUOTE><div><img src="/Themes/basicblue/images/icon-quote.gif"> <strong>JoeFallon1:</strong></div><div>a.) This is not an optimization but a key part of the design which Rocky has spent over a decade evolving.&nbsp;A Root fetches its own data plus its children's data. Grandchildren actullay add complications and there a couple of approved solutions there. Some people populate a dtaaset with relations and then use that to "hydrate" their BOs. I open a 2nd reader and let children get their own children.</div></BLOCKQUOTE><br><br>Actually it is an optimzation and not a key part of the design.&nbsp; There's no Csla reason each individual object can't get its own data, just like the root did.&nbsp; Its just that you add more database hits and reduce performance.<br><br>Indeed, you could argue that you are somewhat breaking encapsulation by allowing the root to get its children's data.&nbsp; Ideally, the root wouldn't know much at all about its chlidren.<br></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
