<html><header><title>Ambiguous match found. Error on Dataportal Fetch.</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Ambiguous match found. Error on Dataportal Fetch.</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/5106.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>eloew posted on Wednesday, July 16, 2008</h2><P>Ambiguous match found. Error on Dataportal Fetch.</P>
<P>The GetParameterTypes method in the MethodCaller does not recognise the DataRow[]. It returns a DataRow only. <BR>It then looks for a method with the same number of parameters, of which I have two so I get the "Ambiguous match found."</P>
<P>My current workaround was to add a extra unused param to the GetIssueComments GetIssueComments(DataRow[] rows) &amp; Child_Fetch(DataRow[] rows). <BR>Is there a better way to get around this problem? </P>
<P><BR>//Code that causes Ambiguous match found. Error<BR>internal static IssueComments GetIssueComments(DataRow[] rows)<BR>{<BR>&nbsp;return DataPortal.FetchChild&lt;IssueComments&gt;(rows);<BR>}</P>
<P>internal static IssueComments GetIssueComments(DataRowCollection rows)<BR>{<BR>&nbsp;return DataPortal.FetchChild&lt;IssueComments&gt;(rows);<BR>}</P>
<P><BR>private void Child_Fetch(DataRow[] rows)<BR>{<BR>&nbsp;...<BR>}</P>
<P>private void Child_Fetch(System.Data.DataRowCollection rows)<BR>{<BR>&nbsp;...<BR>}</P>
<P><BR>//Workaround code<BR>internal static IssueComments GetIssueComments(DataRow[] rows)<BR>{<BR>&nbsp;return DataPortal.FetchChild&lt;IssueComments&gt;(rows,0);<BR>}</P>
<P>internal static IssueComments GetIssueComments(DataRowCollection rows)<BR>{<BR>&nbsp;return DataPortal.FetchChild&lt;IssueComments&gt;(rows);<BR>}</P>
<P><BR>private void Child_Fetch(DataRow[] rows, int unused)<BR>{<BR>&nbsp;...<BR>}</P>
<P>private void Child_Fetch(System.Data.DataRowCollection rows)<BR>{<BR>&nbsp;...<BR>}</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Thursday, July 17, 2008</h2><P>That's probably your best workaround right now.</P>
<P>You wouldn't believe how complex it is to dynamically invoke methods when you choose to support the concept of a param array... Well you might if you've ever tried to write that code :)</P>
<P>But it is nuts, because it is difficult (at best) to differentiate between a param array and a regular array. Obviously it can be done, and obviously I haven't yet quite replicated the behavior of the C# and VB compilers in this regard...</P>
<P>I did think I had it figured out - but obviously not - so I'll add this to the wish list as something I'll need to revisit.</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>eloew replied on Thursday, July 17, 2008</h2>Thanks for the replay, and also thanks for the CSLA &amp; wonderfull books.</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>decius replied on Thursday, October 06, 2011</h2><p>Hi Rocky, was this resolved since? I&#39;m experiencing similar problems with a create that has a IEnumerable&lt;byte[]&gt; as its only parameter and can&#39;t seem to nail down what&#39;s happening. </p>
<p>There&#39;s only one DataPortal_Create but I still have an ambiguous match which is confusing. I tried wrapping it in a SingleCriteria value and even adding dummy-like parameters, but no luck.</p>
<p>As a work around, Instead of sending the bytes through the factory method, I think I&#39;ll just make the factory method create empty and then add the files after the factory returns the empty new object.But I thought this behavior was odd.</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>public class ImportFiles : Csla.BusinessListBase&lt;ImportFiles, ImportFile&gt;<br />&nbsp;&nbsp;&nbsp; {<br />#if !SILVERLIGHT<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; internal static ImportFiles New(IEnumerable&lt;byte[]&gt; files)<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; {<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; return Csla.DataPortal.Create&lt;ImportFiles&gt;(files);<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }<br /><br />#endif<br />#if SILVERLIGHT<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; internal static void New(IEnumerable&lt;byte[]&gt; files, EventHandler&lt;DataPortalResult&lt;ImportFiles&gt;&gt; callback)<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; {<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; var dp = new DataPortal&lt;ImportFiles&gt;(DataPortal.ProxyModes.LocalOnly);<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; dp.CreateCompleted += callback;<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; dp.BeginCreate(files);<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }<br />#endif<br /><br />#if !SILVERLIGHT<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; [RunLocal()]<br />#endif<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; private void DataPortal_Create(IEnumerable&lt;byte[]&gt; files)<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; {<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; AddRange(<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; from x in files<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; select ImportFile.New(x));<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }<br /><br />&nbsp;&nbsp;&nbsp; }</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Thursday, October 06, 2011</h2><p>You are talking about the root data portal, and the original thread was about the child data portal.</p>
<p>Andres provided a solution for the <em>child data portal</em> that is in 4.2, where arrays should now work as expected.</p>
<p>But the rules for the <em>root data portal</em> are different. The criteria parameter you provide to the root data portal is serialized to the server, and so must be a serializable type. This means it must implement IMobileObject if you want to support Silverlight/WP7/WinRT.</p>
<p>The concrete type of your IEnumerable&lt;byte[]&gt; would have to implement IMobileObject - and you can&#39;t guarantee that with your code.</p>
<p>I&#39;d suggest using Csla.Core.MobileList as your parameter type - thus allowing a list, but ensuring it is serializable.</p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
