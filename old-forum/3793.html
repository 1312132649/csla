<html><header><title>SOAP security negotiation - please help</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>SOAP security negotiation - please help</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/3793.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>janigorse posted on Sunday, October 28, 2007</h2>Hi,<br><br>I have a following situation:<br><br>- WCF host with clsa.dll and aplicaiton dll on workstation machine, it is hosted on IIS5<br>- WinForms application I tried to run, is on my laptop machine<br><br>I'm trying to use workstation machine as a server. <br><br>config files are:<br><br>server web.config:<br><br>&lt;?xml version="1.0"?&gt;<br>&lt;configuration&gt;<br>&nbsp; &lt;appSettings&gt;<br>&nbsp;&nbsp;&nbsp; &lt;add key="CslaAuthentication" value="Csla"/&gt;<br>&nbsp; &lt;/appSettings&gt;<br>&nbsp; &lt;connectionStrings&gt;<br>&nbsp;&nbsp;&nbsp; &lt;add<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; name="Reservations"<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; connectionString="Data Source=APOLOSERVER\APOLO;Initial Catalog=Reservations;Integrated Security=True;User Instance=False"<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; providerName="System.Data.SqlClient" /&gt;<br>&nbsp; &lt;/connectionStrings&gt;<br>&nbsp; &lt;system.serviceModel&gt;<br>&nbsp;&nbsp;&nbsp; &lt;services&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;!-- Before deployment, you should remove the returnFaults behavior configuration to avoid disclosing information in exception messages --&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;service name="Csla.Server.Hosts.WcfPortal" behaviorConfiguration="returnFaults"&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;endpoint contract="Csla.Server.Hosts.IWcfPortal" binding="wsHttpBinding"/&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/service&gt;<br>&nbsp;&nbsp;&nbsp; &lt;/services&gt;<br>&nbsp;&nbsp;&nbsp; &lt;behaviors&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;serviceBehaviors&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;behavior name="returnFaults"&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;serviceDebug includeExceptionDetailInFaults="true"/&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/behavior&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/serviceBehaviors&gt;<br>&nbsp;&nbsp;&nbsp; &lt;/behaviors&gt;<br>&nbsp; &lt;/system.serviceModel&gt;<br>&lt;/configuration&gt;<br><br>client app.config:<br>&lt;?xml version="1.0"?&gt;<br>&lt;configuration&gt;<br>&nbsp; &lt;configSections&gt;<br>&nbsp; &lt;/configSections&gt;<br>&nbsp; &lt;appSettings&gt;<br>&nbsp;&nbsp;&nbsp; &lt;add key="CslaAuthentication" value="Csla"/&gt;<br>&nbsp;&nbsp;&nbsp; &lt;add key="CslaDataPortalProxy" value="Csla.DataPortalClient.WcfProxy, Csla"/&gt;<br>&nbsp; &lt;/appSettings&gt;<br>&nbsp; &lt;system.serviceModel&gt;<br>&nbsp;&nbsp;&nbsp; &lt;client&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;endpoint name="WcfDataPortal"<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; address="http://apolo.getmyip.com:80/ReservationsWCFHost/ReservationsWCFService.svc"<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; binding="wsHttpBinding"<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; contract="Csla.Server.Hosts.IWcfPortal" /&gt;<br>&nbsp;&nbsp;&nbsp; &lt;/client&gt;<br>&nbsp; &lt;/system.serviceModel&gt;<br>&nbsp; &lt;system.diagnostics&gt;<br>&nbsp;&nbsp;&nbsp; &lt;sources&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;!-- This section defines the logging configuration for My.Application.Log --&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;source name="DefaultSource" switchName="DefaultSwitch"&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;listeners&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;add name="FileLog"/&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;!-- Uncomment the below section to write to the Application Event Log --&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;!--&lt;add name="EventLog"/&gt;--&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/listeners&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/source&gt;<br>&nbsp;&nbsp;&nbsp; &lt;/sources&gt;<br>&nbsp;&nbsp;&nbsp; &lt;switches&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;add name="DefaultSwitch" value="Information"/&gt;<br>&nbsp;&nbsp;&nbsp; &lt;/switches&gt;<br>&nbsp;&nbsp;&nbsp; &lt;sharedListeners&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;add name="FileLog" type="Microsoft.VisualBasic.Logging.FileLogTraceListener, Microsoft.VisualBasic, Version=8.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a, processorArchitecture=MSIL" initializeData="FileLogWriter"/&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;!-- Uncomment the below section and replace APPLICATION_NAME with the name of your application to write to the Application Event Log --&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;!--&lt;add name="EventLog" type="System.Diagnostics.EventLogTraceListener" initializeData="APPLICATION_NAME"/&gt; --&gt;<br>&nbsp;&nbsp;&nbsp; &lt;/sharedListeners&gt;<br>&nbsp; &lt;/system.diagnostics&gt;<br>&nbsp;&nbsp;&nbsp; &lt;runtime&gt;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1"&gt;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;dependentAssembly&gt;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;assemblyIdentity name="Csla" publicKeyToken="93BE5FDC093E4C30" culture="neutral"/&gt;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;bindingRedirect oldVersion="0.0.0.0-3.0.2.0" newVersion="3.0.2.0"/&gt;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;/dependentAssembly&gt;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;/assemblyBinding&gt;<br>&nbsp;&nbsp;&nbsp; &lt;/runtime&gt;<br>&lt;/configuration&gt;<br><br><br><br>When I run WinForms application i get this error:<br><br>SOAP security negotiation with 'http://apolo.getmyip.com/ReservationsWCFHost/ReservationsWCFService.svc' for target 'http://apolo.getmyip.com/ReservationsWCFHost/ReservationsWCFService.svc' failed. See inner exception for more details.<br><br>Could you please help me identifying what's wrong, couse when I run a WCF host on my laptop it works just fine.<br><br><br>Jani<br></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
