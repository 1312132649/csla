<html><header><title>ReadWriteAuthorization and control properties text and visible bound</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>ReadWriteAuthorization and control properties text and visible bound</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/223.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>SoftwareArchitect posted on Tuesday, May 30, 2006</h2>I have a User object that has Username and Password property procedures.&nbsp; If the username is the fixed app user (like 'administrator'), then the Username property cannot be modified.&nbsp; I do this with a custom authorization rule where I set a DenyWrite rule (I deny all writes if the username is that special name).<br><br>The username property should be able to be read in any event; however, there are times when the username textbox should be hidden.&nbsp; So, I created a UsernameVisible property in my object and I return true/false from that based on some business rules.<br><br>Here is the glitch....I bind my txtUsername.Text property to the business object's UserName property.&nbsp; I then bind my txtUsername.Visible property to the object's UsernameVisible property.<br><br>The ReadWriteAuthorization loops through the bindings of the textbox, and first uses the value of the CanWrite("Username") to set the ReadOnly property of the control..which is perfect; however, it then uses the CanWrite("UsernameVisible") result to set the ReadOnly property (which always is true).<br><br>&nbsp;So, the txtUsername control is ALWAYS enabled because all users can read the UsernameVisible property.&nbsp; If I remove the databind to Visible the enabled/disabled works ok.&nbsp; But I still would like to have the logic to show/hide the control in the business object and not in the front end. <br><br>Any ideas?&nbsp; Questions?<br><br>Thanks,<br>Mike<br><br><br><br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>xal replied on Tuesday, May 30, 2006</h2>Sounds like you're mixing UI with busines logic.<br>
<br>
The UsernameVisible property is not part of your business object data and shouldn't be exposed as such. It's actually some kind of a rule. An authorization rule that applies to username.<br>So, if anything you should deny reading (through authorization rules) to whoever in that specific scenario.<br>Or you can hold that UserNameVisible private to your object and do something like:<br><br>Public Property UserName() as string<br>Get<br>If UserNameVisible then<br>&nbsp;&nbsp;&nbsp; Return mUserName<br>Else<br>&nbsp;&nbsp;&nbsp; Return String.Empty<br>End If<br><br>End Get<br>...<br>End Property<br><br><br>(Of course, with all the security stuff I ommited).<br><br>Andr√©s<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>SoftwareArchitect replied on Thursday, June 01, 2006</h2>Thanks for the response but I am still missing something...I may not have explained the situation correctly...<br><br>This is really modifying the business object to control the presentation behavior and perhaps I shouldn't even attempt to do so...<br><br>The problem is, that the state of the business object determines the authorization rule.&nbsp; The object is an application settings object.&nbsp; If the securitymode (property read from the db) equal 3, then the username textbox should not be shown (the username property in this case is NEVER allowed to be changed).&nbsp; If the securitymode = 2 then it should be shown but since it is read only it will be disabled.<br><br>I hope that makes more sense.&nbsp; Basically when authorization rules are applied, the object has no state so I am trying to work out how the business object can control (or should it?) the presentation of the username.<br><br>Thanks,<br>Mike<br><br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>hurcane replied on Thursday, June 01, 2006</h2>This is a question that can spark endless debate. I think the business object should make available the information necessary to support the UI. The business object should also work without a UI.<br><br>Do your security modes exist only for the UI? Are they interpreted by the business logic in any other ways? Is there going to be a security mode 1 or 4 in the future?<br><br>You could expose the SecurityMode property and write code on the form to set the properties of the control without using data binding. This is simple, but will cause problems if the meaning of SecurityMode will change in the future. If the meaning of SecurityMode is never going to change, then this is probably the simplest implementation.<br><br>The other option is to expose Enabled and Visible properties on the business object. Each property translates the SecurityMode. This is also fairly simple. If the meaning of SecurityMode is going to change in the future, you would not have to edit the UI (in theory) when the meaning changes.<br><br>Neither of these options is right or wrong. You have to decide which is the "best fit" for your situation.<br><br></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
