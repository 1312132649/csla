<html><header><title>DataPortal_Delete has to return a value to the front end</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>DataPortal_Delete has to return a value to the front end</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/12336.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>simisreedharan posted on Monday, January 27, 2014</h2><p>How could i achieve this? I have the value returned from the sp assigned to a property say ResultCode of the business object. What should i do to get this value on front end?</p>
<p>Thanks</p>
<p>Simi</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>cfarren replied on Monday, January 27, 2014</h2><p>Is the object your deleting a parent object, child object or list object?</p>
<p>Can you do a LoadProperty on the ResultCode property with the returned value from the stored proc?</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>simisreedharan replied on Monday, January 27, 2014</h2><p>It is a parent object. Actually the property is loaded with value. My doubt is how could i return this value to the front end. Because the static method for Delete is returning void (no parameters).&nbsp;</p>
<p>Thanks</p>
<p>Simi</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>cfarren replied on Monday, January 27, 2014</h2><p>How does the UI tell your business object that it needs to be deleted?</p>
<p>The Delete method marks the object ready for deletion. The DataPortal_Delete/DeleteSelf methods are not called until the object is saved. The save method returns a new instance of the business object that contains the saved values so you can use your saved business object to get the value of the ResultCode property.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>simisreedharan replied on Tuesday, January 28, 2014</h2><p>I am using immediate deletion as jonny said.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JonnyBee replied on Tuesday, January 28, 2014</h2><p>First of all you have to understand the difference between deferred and immediate deletion. </p>
<ul>
<li>Immediate deletion occurs when you call DataPortal.Delete yourself. </li>
<li>Deferred deletion is when you first call &lt;obj&gt;.MarkDeleted and later call &lt;obj&gt;.Save()</li>
</ul>
<p>And speaking in general terms, by definition&nbsp; - a data access operation is either successful or throws an exception. This is also what triggers transactions to be successful or rollback when you use TransactionScope.</p>
<p><b>So you should define your own serializable exception </b>and in your data access code (ex DataPortal_Delete) check the resultcode and if not success throw the exception. This exception may contain the resultcode and other information that you wish to return to the client.&nbsp; (CSLA will by default also return the &lt;obj&gt; as it was in the DataPortalException that wraps the business exception (your exception)). This behaviour may be configured to NOT return the &lt;obj&gt;.&nbsp; </p>
<p>IE: <b>YOUR data access code</b> should be responsible for determining whether the save/delete was successful and if not successful throw an exception. </p>
<p>Whether your stored procedure returns a resultcode or whatever result should <b>NOT </b>be known at the UI level.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>simisreedharan replied on Tuesday, January 28, 2014</h2><p>Thanks Jonny. This clarifies my doubt.</p>
<p>Thanks</p>
<p>Simi</p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
