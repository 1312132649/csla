<html><header><title>Lists and Root/Child Objects</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Lists and Root/Child Objects</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/1810.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>DougZ posted on Tuesday, November 21, 2006</h2>If you have a Read-Only List object that is used when searching for an individual object in the list, are those individual objects always Child objects simply because they were found with the List?&nbsp; Here is my scenario:<br><br>In a web app, a user views a list of recruits (RecruitList), selects one (Recruit) to edit, and clicks "OK".&nbsp; This brings up a page with text boxes and such populated with the Recruit's data.&nbsp; The user edits the data as appropriate and clicks "Save".&nbsp; Is Recruit an Editable Child or an Editable Root?<br><br>Thanks,<br>Doug<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>guyroch replied on Tuesday, November 21, 2006</h2><P>Typically you'll have a ReadOnlyList (RecruitList) to allow the user to view and select a Recruit from the list to edit.&nbsp; You will also have a root BusinessBase (Recruit).&nbsp; You will instantiate this root object with the Id selected from the ReadOnlyList by the user and allow the user to edit this Recruit object in another form.</P>
<P>Does this make any sense to you?</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>DougZ replied on Tuesday, November 21, 2006</h2>Yes, that makes sense.&nbsp; Now, let me give you a different scenario:<br><br>A user views a list of recruits (RecruitList) and selects one (Recruit) to
edit.&nbsp; When he/she selects one, textboxes below the list (on the same form) are populated with data from the selected Recruit.&nbsp; The user edits the data in the textboxes and clicks "Save".&nbsp; The list refreshes to include the updated Recruit's data.&nbsp; In this case, from what I can tell, Recruit would be an Editable Child.&nbsp; Is that correct?&nbsp; Could RecruitList be a Read-Only List, or must it be an Editable Child List?&nbsp; On a side note, what is an EditableRootList (included in the Templates solution)?<br><br>Thanks,<br>Doug<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>guyroch replied on Tuesday, November 21, 2006</h2><P><BLOCKQUOTE><div><img src="/Themes/default/images/icon-quote.gif"> <strong>DougZ:</strong></div><div>Could RecruitList be a Read-Only List, or must it be an Editable Child List?&nbsp;<BR></div></BLOCKQUOTE></P>
<P>Yes, RecruiteList can be a ReadOnlyList.&nbsp; In fact my scenario is using a ReadOnlyList and a root BusniessBase and not an Editable Child List.</P>
<P>The Objects responsibility are as follows:</P>
<P>ReadOnlyList (RecruitList)-&gt; To allow the user to view and select 1 recruit object, and nothing else.</P>
<P>BusinessBase (Recruit) -&gt; To allow the user to Edit/Add/Delete a given recruit object.</P>
<P>The workflow would be something like this...</P>
<P>1. Load RecruitList</P>
<P>2. Display RecruitList and allow the user to select one recruit</P>
<P>3. Call the Recruit.GetRecruit(Id) factory method with the selected recruit Id as a parameter.&nbsp; This will cause you Recruit object to load itself.</P>
<P>4. Display the editable Recruit object and allow the user to edit it.</P>
<P>5. Call the Recruit.Save() method on your Recruit object</P>
<P>6. Update your RecruitList by reloading it again.&nbsp; Theorically the only way you can _modify_ a ReadOnlyList is inside the DataPortal_Fetch method because Rocky provided some protection to enforce the _readonly_ in the ReadOnlyList.&nbsp; Look closely at the code sample and you'll notice a boolean propertry called 'Readonly' (I think) in the DataPortal_Fetch.</P>
<P>&nbsp;</P>
<P>&nbsp;</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JoeFallon1 replied on Tuesday, November 21, 2006</h2><P><BLOCKQUOTE><div><img src="/Themes/default/images/icon-quote.gif"> <strong>DougZ:</strong></div><div>Yes, that makes sense.&nbsp; Now, let me give you a different scenario:<BR><BR>A user views a list of recruits (RecruitList) and selects one (Recruit) to edit.&nbsp; When he/she selects one, textboxes below the list (on the same form) are populated with data from the selected Recruit.&nbsp; The user edits the data in the textboxes and clicks "Save".&nbsp; The list refreshes to include the updated Recruit's data.&nbsp; In this case, from what I can tell, Recruit would be an Editable Child.&nbsp; Is that correct?&nbsp; Could RecruitList be a Read-Only List, or must it be an Editable Child List?&nbsp; On a side note, what is an EditableRootList (included in the Templates solution)?<BR></div></BLOCKQUOTE></P>
<P>The workflow advice in the other thread is spot on.</P>
<P>You are mixing a few things together here.</P>
<P>The scenario should be:</P>
<P>A user views a Web page with a list of recruits. This is most likely a DataGrid bound directly to your ReadOnlyList. (Note the ReadOnlyList contains a bunch of RecruitInfo objects which are the data for each row.. They are NOT editable in any way. They are used for display.)</P>
<P>You should NOT have a "bunch of text boxes" on the same form as your datagrid. So your point about picking something from the list and having the text boxes filed in for editing is a mistake.</P>
<P>Your web page should have a Select button for each row of data. When the user clicks the button to Select the Recruit to edit you postback and trap the ID value and store it in Session and then re-direct to your edit page. The edit page grabs the ID from Session (if it does not find it then it re-directs to a message page or a main menu page.) Once you have the ID value you instantiate a Root level editable BO using the ID to Fetch that record from the DB. Your form is populated with data which the user edits. When the user clicks Save you can check if the BO IsValid or not. If not, list out the BrokenRules for the user so they can fix the page. If it IsValid then do the Save and let the user know it succeeded. then navigate them back to the menu or the datagrid.</P>
<P>Joe</P>
<P>&nbsp;</P>
<P>&nbsp;</P>
<P>&nbsp;</P>
<P>&nbsp;</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>DougZ replied on Wednesday, November 22, 2006</h2>guyroch,<br><br>The workflow you listed is very helpful.<br><br>Joe,<br><br>Yeah, I kind of switched to a Windows Forms environment for that second scenario.&nbsp; I can't really think of a scenario in a web app where I would use Editable Child List objects and/or Editable Child objects.&nbsp; Can you?<br><br>Do one of you know what an Editable Root List is?<br><br>Thanks,<br>Doug<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Bayu replied on Wednesday, November 22, 2006</h2><BLOCKQUOTE><div><img src="/Themes/alternate1/images/icon-quote.gif"> <strong>DougZ:</strong></div><div><br>Yeah, I kind of switched to a Windows Forms environment for that second scenario.&nbsp; I can't really think of a scenario in a web app where I would use Editable Child List objects and/or Editable Child objects.&nbsp; Can you?<br><br></div></BLOCKQUOTE><br><br>Invoices.<br><br>Just before submitting the invoice to the client you can allow the user of your web-app to 'clean up' the line-item descriptions (spell-checking, fixing typos, etc). For this view you would display the entire Invoice (EditableRoot) with all its lineitems (EditableChildren) in a grid-like control where the user can edit each lineitem description, commit the update and then submit the invoice.<br><br>Bayu<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>DougZ replied on Wednesday, November 22, 2006</h2>Bayu,<br><br>Great!&nbsp; I appreciate the insight.&nbsp; <br><br>Thanks,<br>Doug<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>DougZ replied on Wednesday, November 22, 2006</h2>In a couple of my messages in this thread, I asked what an Editable Root List is.&nbsp; What I meant to ask is, "What is an Editable Root <b>Parent</b>?" I know what an Editable Root List is.&nbsp; So, what is the difference between an Editable Root and an Editable Root Parent?<br><br>Thanks,<br>Doug<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Bayu replied on Wednesday, November 22, 2006</h2><BLOCKQUOTE><div><img src="/Themes/alternate1/images/icon-quote.gif"> <strong>DougZ:</strong></div><div>In a couple of my messages in this thread, I asked what an Editable Root List is.&nbsp; What I meant to ask is, "What is an Editable Root <b>Parent</b>?" I know what an Editable Root List is.&nbsp; So, what is the difference between an Editable Root and an Editable Root Parent?<br><br></div></BLOCKQUOTE><br><br>There is no such object sterotype as an 'EditableRoot Parent'.<br><br>Perhaps you were confused by some of us referring to the parent of an EditableChild, which would usually be just an EditableRoot.<br><br>Bayu<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>DougZ replied on Wednesday, November 22, 2006</h2>Bayu,<br><br>There is a C# template in the latest Templates solution called EditableRootParent.cs.&nbsp; That's what I am referring to.&nbsp; Also, in the Templates solution, read-only objects are split into ReadOnlyChild.cs and ReadOnlyRoot.cs.&nbsp; Any thoughts?<br><br>This is what is confusing.&nbsp; The templates in the Templates solution aren't 100% in agreement with what's in the book and what's on OneLittleVictory.&nbsp; That's why I was wondering in the Business Object Stereotypes thread if there was a good, up-to-date source of clear and concise descriptions of the stereotypes.&nbsp; It would help those of us who are not yet CSLA literate understand how to use the framework and templates.<br><br>Thanks,<br>Doug<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Bayu replied on Wednesday, November 22, 2006</h2><BLOCKQUOTE><div><img src="/Themes/alternate1/images/icon-quote.gif"> <strong>DougZ:</strong></div><div>Bayu,<br><br>There is a C# template in the latest Templates solution called EditableRootParent.cs.&nbsp; That's what I am referring to.&nbsp; Also, in the Templates solution, read-only objects are split into ReadOnlyChild.cs and ReadOnlyRoot.cs.&nbsp; Any thoughts?<br><br>This is what is confusing.&nbsp; The templates in the Templates solution aren't 100% in agreement with what's in the book and what's on OneLittleVictory.&nbsp; That's why I was wondering in the Business Object Stereotypes thread if there was a good, up-to-date source of clear and concise descriptions of the stereotypes.&nbsp; It would help those of us who are not yet CSLA literate understand how to use the framework and templates.<br><br>Thanks,<br>Doug<br></div></BLOCKQUOTE><br><br>Ahhhhhhhhh,<br><br>Now I get your point. :-)<br><br>Well, I had a look:<br><br>EditableRoot vs EditableRootParent<br>- they are both EditableRoot objects and follow that stereo-type<br>- it's just that the ~Parent version already showcases how you would add a collection of EditableChildren<br>- so wrt EditableRoot, the EditableRootParent templates adds the following:<br>&nbsp;&nbsp;&nbsp; - there is already a local variable in place (at the top)<br>&nbsp;&nbsp;&nbsp; - there is a readonly property added that exposes your children<br>&nbsp;&nbsp;&nbsp; - and IsValid and IsDirty have been extended to also take your child collection into account<br><br>Then ReadOnlyRoot vs ReadOnlyChild:<br>- they both follow the ReadOnlyBase stereotype<br>- but what is shown is the different loading patterns<br>- you see, only root objects (editable or not) are the ones to actually do the DB-CRUD <br>- so what you see in ReadOnlyRoot is that the object is populated using the classic dataportal_fetch method<br>- but that an EditableChild will never directly call the DB itself, its parent object (or grand-parent, etc) will invoke a factory method that accepts a datareader (this ultimately routes to the private Fetch method)<br><br>Does this clarify some?<br><br>Bayu<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>DougZ replied on Wednesday, November 22, 2006</h2>Bayu,<br><br>Your help has been invaluable.&nbsp; Yes, that clarifies a lot.&nbsp; Now, I just need to figure out how to apply these stereotypes to the objects in my design.&nbsp; Thanks again, and I will probably post some more questions as I move further along.<br><br>Thanks,<br>Doug<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Bayu replied on Wednesday, November 22, 2006</h2>Sure, bring it on! ;-)<br>You're welcome.<br><br>Bayu<br></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
