<html><header><title>Did anyone use a RemotingPortal over ipc channel when the server lives in another AppDomain in the same process with the client?</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Did anyone use a RemotingPortal over ipc channel when the server lives in another AppDomain in the same process with the client?</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/8046.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>markell posted on Wednesday, November 25, 2009</h2>Dear sirs and ladies.<br><br>I would like to speed up the integration tests of my csla based client server application by moving the server into a dedicated AppDomain in the same process with the client.The integration tests employ two AppDomains, both of which should communicate with the same server AppDomain. I think the right way to do so is by using the RemotingProxy over the IPC channel. But I am not sure how to do so.<br><br>Did anyone do it already?<br><br>Thanks.<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Wednesday, November 25, 2009</h2>You might look at the AppDomainProxy sample project in the Samples download. It runs the "server side" code in a separate AppDomain and on a separate thread, thus simulating a remote call without the need for anything to actually be remote.</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>markell replied on Saturday, November 28, 2009</h2>Hi Rocky,<br>I have examined the code (and even ran it, after fixing a few bugs). But, it has a serious flaw. My unit tests employ two app domains, which speak to the same server. This way I can test simultaneous access from two users to the same server.When the server runs in a separate process, the two unit test app domains are talking to the same server AppDomain, thus they share the same static server data.<br><br>When, however, I use the sample proxy, each unit test app domain speaks to a different server instance living in a dedicated app domain - they do not share the same static server data.<br><br>The problem exists because the sample proxy creates a server app domain. If another unit test app domain executes the proxy, then a new server app domain is created. The two servers share the same database, but they have different static data, which is not good for me.<br><br>Another solution is needed. Any ideas?<br><br>Thanks.<br><br>P.S.<br>The solution I see is not&nbsp; very beautiful. It involves transferring a MarshalByRefObject denoting the server portal between the unit test app domains, so that all of them talk to the same server portal. I just hope there is a better solution.<br></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
