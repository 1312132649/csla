<html><header><title>IsDirty</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>IsDirty</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/8185.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>KJosh posted on Friday, December 18, 2009</h2>Hi,<br>&nbsp;&nbsp; I loaded by object using factory method by passing customer id. <br>&nbsp; Customer cust = Customer.GetCustomer('456').<br>&nbsp; cust = cust.Save();<br>&nbsp; With out making any changes to cust if I call save on cust variable why it is not calling DataPortal_Update of&nbsp; <br>&nbsp; Customer class. When I debugged found that IsDirty property on cust variable is false. Is this a bug?<br><br>Thanks in advance.<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>rsbaker0 replied on Friday, December 18, 2009</h2>Based on what you have posted above, this is correct. <br /><br />A freshly fetched but unmodified object generally is considered "clean" until at least one property has been changed. Since you didn't change any properties, IsDirty will be indeed be false.<br /><br />The default implementation of Save() explicitly tests for IsDirty, and it is a NOP if the object hasn't been changed. </div><div style='padding:0 15 3 15;background-color:powderblue'><h2>KJosh replied on Friday, December 18, 2009</h2>The problem is when I want to add an existing customer I am adding one method to the Customers which inheritingfrom BusinessListBase:<br><br>Customers : BusinessListBase&lt;Customers, Customer&gt;<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp; Public void AddExisitngCustomer(string customerId)<br>&nbsp;&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; this.Add(Customer.GetCustomer(customerId);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>}<br><br>When Save is called, in DataPortal_Update I need to create the association between customer and my main object. Customer row already existed in database. I just want to create association. But it is not calling the Dataportal_Update. How to achieve these type of situations like adding existing one?<br><br>Thnaks<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Friday, December 18, 2009</h2><P>You need to mark the customer object as being changed (dirty) after you retrieve it. You can do that by setting a property, or you could add an internal method to your Customer class like:</P>
<P>internal void Assocate()<BR>{<BR>&nbsp; MarkDirty();<BR>}</P>
<P>Then in your collection:</P>
<P>public void AddExistingCustomer(string customerId)<BR>{<BR>&nbsp; var cust = Customer.GetCustomer(customerId);<BR>&nbsp; this.Add(cust);<BR>&nbsp; cust.Associate();<BR>}</P>
<P>That will tell the customer object it has been "changed", so the DP_Update() method will be run.</P></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
