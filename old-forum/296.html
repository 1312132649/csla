<html><header><title>Empty SmartDate .ToString problem</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Empty SmartDate .ToString problem</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/296.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>Massong posted on Wednesday, June 07, 2006</h2><P>Hi all,</P>
<P>I’ve a small problem with the SmartDate structure in CSLA 2.0. I read an empty SmartDate from a SQL Server 2000 database and even though <EM>emptyIsMin</EM> is set to false and the date value is “#12/31/9999 11:59:59 PM#” the <EM>DateToString</EM> function doesn’t return an empty string.</P>
<P>The debugger shows that <EM>value</EM> is “#12/31/9999 11:59:59 PM#” and that <EM>Date.MaxValue</EM> is “#12/31/9999 11:59:59 PM#”, but <EM>value = Date.MaxValue</EM> returns false.</P>
<P>So I checked the ticks and they are different: <EM>value</EM>: 3155378975999970000 and <EM>Date.MaxValue</EM>: 3155378975999999999.</P>
<P>How can this be? Does anybody else have this problem?</P>
<P>Thanks,<BR>Christian<BR></P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Wednesday, June 07, 2006</h2>FWIW, the MinValue for DateTime shouldn't have 9999 as the year.<br><br>At any rate, yes, this is a problem in that the Sql DateTime column doesn't have the persision of the .Net DateTime.&nbsp; So in your tests, you'll probably have to round out the least significate portion of the .Net DateTime.<br><br>However you're talking about DB data.&nbsp; If you want to store an empty date in the database, store a null.&nbsp; When you load a null you then create an empty SmartDate for the business object's property value.<br><br>HTH<br>Andy<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Massong replied on Wednesday, June 07, 2006</h2><P class=MsoNormal><SPAN><o:p>Hi Andy,</o:p></SPAN></P>
<P class=MsoNormal><SPAN><o:p></o:p></SPAN>&nbsp;</P>
<P class=MsoNormal><SPAN><o:p>thank you for your reply. We don’t use empty minimum dates in our projects – only empty maximum dates. So I have never noticed that I have used <EM>myDate.Date</EM> to store the date into the database instead of <EM>myDate.DBValue</EM>. While Date.MaxValue is a valid SQL Date that causes no errors – Date.MinValue is an invalid SQL Date that would have caused errors. Thank you for your hint to the precision of the SQL DateTime.</o:p></SPAN></P>
<P class=MsoNormal><SPAN><o:p></o:p></SPAN>&nbsp;</P>
<P class=MsoNormal><SPAN><o:p>Thanks,<BR>Christian</o:p></SPAN></P></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
