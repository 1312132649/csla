<html><header><title>Big Entities and How to Deal with them.</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Big Entities and How to Deal with them.</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/5309.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>DeHaynes posted on Wednesday, August 27, 2008</h2><P class=MsoNormal><FONT face=Calibri>Let me start off by saying that I know this is not a CSLA question, but this is the best group of Business Object knowledgeable people I know.</FONT></P>
<P class=MsoNormal><FONT face=Calibri>Also, I apologize if this topic has already been covered someplace I haven’t found.</FONT></P>
<P class=MsoNormal><FONT face=Calibri>I am looking at building a n-tier architecture for my company.<SPAN>&nbsp; </SPAN>The problem is that our main business accounts are data heavy.<SPAN>&nbsp; </SPAN>Plus we have a web application that interacts with all the aspects of the account.<SPAN>&nbsp; </SPAN>As a web application it asks for the same information over and over when pages are reposted.<SPAN>&nbsp; </SPAN>I feel like this is a waste because often times, only parts of the data are actually needed.<SPAN>&nbsp; </SPAN>The solution that is currently in place utilizes a bunch of different versions of the account depending on the purpose.<SPAN>&nbsp; </SPAN></FONT></P>
<P class=MsoNormal><o:p><FONT face=Calibri>&nbsp;</FONT></o:p></P>
<P class=MsoNormal><FONT face=Calibri>My idea is to create an account entity but have many sub-classes to it.<SPAN>&nbsp; </SPAN>For instance, I could have the Configuration class, Notes class, and the Documents class, etc.<SPAN>&nbsp; </SPAN>Configuration would be a single private member, but Notes and Documents would be collections private members.<SPAN>&nbsp; </SPAN>I would leave Configuration null until someone tried to access one of the properties of it.<SPAN>&nbsp; </SPAN>Then the public property code would execute what was needed to retrieve that class’s information.<SPAN>&nbsp; </SPAN>This would result in a lighter class because most of the class would be null, unless it is requested.<SPAN>&nbsp; </SPAN>In addition, if I know I am going to be dealing with a group of configurations, I can deal with them alone and skip loading the whole client.</FONT></P>
<P class=MsoNormal><o:p><FONT face=Calibri>&nbsp;</FONT></o:p></P>
<P class=MsoNormal><FONT face=Calibri>Anyone have any opinions? Ideas?</FONT></P>
<P class=MsoNormal><o:p><FONT face=Calibri>&nbsp;</FONT></o:p></P>
<P class=MsoNormal><FONT face=Calibri>Thanks</FONT></P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>rsbaker0 replied on Wednesday, August 27, 2008</h2><P>It sounds to me like you are on the right track on at least two things you are doing. First implementing a "bunch of different versions of the account depending on the purpose<SPAN>" seems to be exactly what the CSLA veterans here advocate -- tailoring objects to the specific use case, with it being OK to have multiple objects that map to the same database tables. </SPAN></P>
<P><SPAN>The second technique you are using -- delaying loading of an object until it is used -- is often referred to as "lazy loading" and is one of my personal favorite techniques. You can combine this with tagging the same fields as [Nonserialized] where appropriate so that you avoid transmitting them over the data portal. This is reasonable technique for read-only child collections but not a good idea for something that can be edited. </SPAN></P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>pfeds replied on Thursday, August 28, 2008</h2><P>It would seem to me that your Account object has numerous behaviours.&nbsp; With behavioural modelling you ideally want to break it down so that each object has only one behaviour.&nbsp; This may lead to you having a number of Account objects that each have their own individual behaviour or purpose, and will therefore map easily to any use cases you may have. What stumps a lot of people is that this is likely to involve "duplicate" code, although this isn't strictly true.&nbsp; It is likely that&nbsp;a number of objects share the same properties and retrieve the same data, but they do so for different reasons (behaviours).</P>
<P>So with that in mind think about the parts of your account object and see if you can break it down.&nbsp; As a start point you could have <FONT face="Courier New" size=2>Account, AccountInfo <FONT face="Times New Roman" size=3>(lightweight &amp; read-only),</FONT> <FONT face="Times New Roman" size=3>and&nbsp;</FONT>AccountList <FONT face="Times New Roman" size=3>(read-only list of AccountInfo).</FONT></FONT></P>
<P>From what you've said, I think you can seperate a lot of functionality from the "Account" object.&nbsp; Configuration, Notes, and Documentation could be made into objects in their own right.&nbsp; You still could provide methods in an Account class such as <FONT face="Courier New" size=2>public AccountConfiguration GetAccountConfiguration().</FONT></P>
<P>Also consider the following:</P>
<P><FONT face="Courier New" size=2>AccountNotesList : List&lt;AccountNote&gt;</FONT></P>
<P><FONT face="Courier New" size=2>AccountDocumentList : List&lt;AccountDocument&gt;</FONT></P>
<P>Hopefully by breaking these different objects away from a huge "Account" object will keep your code far more maintainable. Also consider the different behaviours of the "Account" object and see if you can break it up, such as <FONT face="Courier New" size=2>Purpose1Account</FONT> or <FONT face="Courier New" size=2>Purpose2Account</FONT>.</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>DeHaynes replied on Tuesday, September 02, 2008</h2>Thanks for the help to both of you.</div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
