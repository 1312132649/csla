<html><header><title>WPF:  Binding help</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>WPF:  Binding help</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/5607.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 posted on Thursday, October 16, 2008</h2>Hi,<br><br>I have a user control (PartEdit) which will contain another user control (purchase history).&nbsp; The part edit includes the purchase history control in this manner:<br><br>&lt;invwpf:PurchaseHistoryView Part="{Binding Source={StaticResource PartData}, Path=Data}" /&gt;<br><br>Where PartData is a CslaDataProvider resource in PartEdit, and the Data will be the Part business object.&nbsp; Part on PurchaseHistoryView is a dependency property:<br><br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; public static readonly DependencyProperty PartProperty =<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; DependencyProperty.Register( <br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; "Part", <br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; typeof( Part ), <br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; typeof( PurchaseHistoryView ),<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; new PropertyMetadata( PartPropertyChanged )<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; );<br><br>The PartPropertyChanged never seems to be called.. so I'm guessing the binding isn't working for some reason... but I don't see any binding errors in the Output window.&nbsp; I've also tried adding a "BindsDirectlyToSource" but that doesn't seem to make a difference.<br><br>Any ideas?<br><br>Thanks<br>Andy<br><br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>cclark replied on Thursday, October 16, 2008</h2><P>You might try adding in a coerce value callback to see what value if any you get:</P><FONT color=#0000ff size=2><FONT color=#0000ff size=2>
<P>public</FONT></FONT><FONT size=2> </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>static</FONT></FONT><FONT size=2> </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>readonly</FONT></FONT><FONT size=2> </FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>DependencyProperty</FONT></FONT><FONT size=2> SmartValueProperty = </FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>DependencyProperty</FONT></FONT><FONT size=2>.Register(</FONT><FONT color=#a31515 size=2><FONT color=#a31515 size=2>"SmartValue"</FONT></FONT><FONT size=2>, </P>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>typeof</FONT></FONT><FONT size=2>(</FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>object</FONT></FONT><FONT size=2>), </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>typeof</FONT></FONT><FONT size=2>(</FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>SmartCombo</FONT></FONT><FONT size=2>), </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>new</FONT></FONT><FONT size=2> </FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>FrameworkPropertyMetadata</FONT></FONT><FONT size=2>(</FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>null</FONT></FONT><FONT size=2>, </FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>FrameworkPropertyMetadataOptions</FONT></FONT><FONT size=2>.BindsTwoWayByDefault, </P>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>new</FONT></FONT><FONT size=2> </FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>PropertyChangedCallback</FONT></FONT><FONT size=2>(OnSelectedValueChanged), </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>new</FONT></FONT><FONT size=2> </FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>CoerceValueCallback</FONT></FONT><FONT size=2>(CoerceSelectedValue)));</FONT></P>
<P><FONT size=2><FONT size=3>Note that sometimes null values invalidate bindings.</FONT></P></FONT></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Friday, October 17, 2008</h2>Hmm, I may try that.&nbsp;&nbsp; I did add a ValidationCallback that always returned true... and it never got called either.&nbsp; For now I've just added some code in the DataProviders DataChanged event handler.&nbsp; But it would be nice to have it in xaml.<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>vschuhma replied on Friday, October 17, 2008</h2><P>Hi Andy,</P>
<P>&nbsp;</P>
<P>just a stupid question. Did you use the SetValue(PartProperty) on your set?</P>
<P>Best Regards</P>
<P>Volker</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Friday, October 17, 2008</h2>Yes, but databinding doesn't appear to call the property set I've defined, I believe it calls SetValue directly.. which is why you're not supposed to do any other code in the property setter you create for the instance.<br></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
