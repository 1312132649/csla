<html><header><title>Binding in Csla and Silverlight</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Binding in Csla and Silverlight</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/7532.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>CyclingFoodmanPA posted on Friday, August 28, 2009</h2><P>First of all, the Csla/Silverlight Videos Rock.&nbsp; If you are developing a Csla application with Silverlight and have not bought the videos BUY THEM NOW!&nbsp; I have gotten lots of things working, including compression in no time after going watching the videos.&nbsp; I had expected some problems (hey, Murphy is everywhere and he always messes with my projects) even after going through the videos but things are going smoothly.&nbsp; I do have one question Rocky or whoever else answers this.&nbsp; There is a layout grid as follows:</P><FONT color=#0000ff size=2><FONT color=#0000ff size=2>
<P>&lt;</FONT></FONT><FONT color=#a31515 size=2><FONT color=#a31515 size=2>Grid</FONT></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2> </FONT></FONT><FONT color=#ff0000 size=2><FONT color=#ff0000 size=2>x:Name</FONT></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>=</FONT></FONT><FONT size=2>"</FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>LayoutRoot</FONT></FONT><FONT size=2>"</FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2> </FONT></FONT><FONT color=#ff0000 size=2><FONT color=#ff0000 size=2>DataContext</FONT></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>=</FONT></FONT><FONT size=2>"</FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>{Binding Source={StaticResource data}, Path=Data}</FONT></FONT><FONT size=2>"</FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>&gt;<BR><FONT color=#000000 size=3>and the actual data grid is as follows:</FONT><BR><FONT color=#0000ff size=2><FONT color=#0000ff size=2>&lt;</FONT></FONT><FONT color=#a31515 size=2><FONT color=#a31515 size=2>swcd:DataGrid</FONT></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2> </FONT></FONT><FONT color=#ff0000 size=2><FONT color=#ff0000 size=2>x:Name</FONT></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>=</FONT></FONT><FONT color=#000000 size=2>"</FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>LineItemsDataGrid</FONT></FONT><FONT color=#000000 size=2>"</FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2> </FONT></FONT><FONT color=#ff0000 size=2><FONT color=#ff0000 size=2>AutoGenerateColumns</FONT></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>=</FONT></FONT><FONT color=#000000 size=2>"</FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>False</FONT></FONT><FONT size=2><FONT color=#000000>"</FONT></FONT><FONT color=#ff0000 size=2><FONT color=#ff0000 size=2>Margin</FONT></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>=</FONT></FONT><FONT color=#000000 size=2>"</FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>5</FONT></FONT><FONT color=#000000 size=2>"</FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2> </FONT></FONT><FONT color=#ff0000 size=2><FONT color=#ff0000 size=2>HorizontalScrollBarVisibility</FONT></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>=</FONT></FONT><FONT color=#000000 size=2>"</FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>Hidden</FONT></FONT><FONT color=#000000 size=2>"</FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2> </FONT></FONT><FONT color=#ff0000 size=2><FONT color=#ff0000 size=2>VerticalScrollBarVisibility</FONT></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>=</FONT></FONT><FONT color=#000000 size=2>"</FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>Visible</FONT></FONT><FONT size=2><FONT color=#000000>" </FONT></FONT><FONT color=#ff0000 size=2><FONT color=#ff0000 size=2>ItemsSource</FONT></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>=</FONT></FONT><FONT color=#000000 size=2>"</FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>{Binding}</FONT></FONT><FONT color=#000000 size=2>"</FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>&gt;</P></FONT></FONT></FONT></FONT>
<P><FONT color=#0000ff size=2><FONT color=#0000ff size=2><FONT color=#000000 size=3>Why was the binding set up this way?&nbsp; I tried the following and it works also:<BR><FONT color=#0000ff size=2><FONT color=#0000ff size=2>&lt;</FONT></FONT><FONT color=#a31515 size=2><FONT color=#a31515 size=2>Grid</FONT></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2> </FONT></FONT><FONT color=#ff0000 size=2><FONT color=#ff0000 size=2>x:Name</FONT></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>=</FONT></FONT><FONT size=2>"</FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>LayoutRoot</FONT></FONT><FONT size=2>"</FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>&gt;<BR><FONT color=#000000 size=3>and the data grid is as follows:<BR><FONT color=#0000ff size=2><FONT color=#0000ff size=2>&lt;</FONT></FONT><FONT color=#a31515 size=2><FONT color=#a31515 size=2>controls:DataGrid</FONT></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2> </FONT></FONT><FONT color=#ff0000 size=2><FONT color=#ff0000 size=2>x:Name</FONT></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>=</FONT></FONT><FONT size=2>"</FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>PaddsDataGrid</FONT></FONT><FONT size=2>"&nbsp; </FONT><FONT color=#ff0000 size=2><FONT color=#ff0000 size=2>AutoGenerateColumns</FONT></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>=</FONT></FONT><FONT size=2>"</FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>False</FONT></FONT><FONT size=2>" </FONT><FONT color=#ff0000 size=2><FONT color=#ff0000 size=2>AlternatingRowBackground</FONT></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>=</FONT></FONT><FONT size=2>"</FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>LightGreen</FONT></FONT><FONT size=2>" </FONT><FONT color=#ff0000 size=2><FONT color=#ff0000 size=2>HorizontalAlignment</FONT></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>=</FONT></FONT><FONT size=2>"</FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>Left</FONT></FONT><FONT size=2>" </FONT><FONT color=#ff0000 size=2><FONT color=#ff0000 size=2>HorizontalScrollBarVisibility</FONT></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>=</FONT></FONT><FONT size=2>"</FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>Hidden</FONT></FONT><FONT size=2>"</FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2> </FONT></FONT><FONT color=#ff0000 size=2><FONT color=#ff0000 size=2>VerticalScrollBarVisibility</FONT></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>=</FONT></FONT><FONT size=2>"</FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>Visible</FONT></FONT><FONT size=2>" </FONT><FONT color=#ff0000 size=2><FONT color=#ff0000 size=2>ItemsSource</FONT></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>=</FONT></FONT><FONT size=2>"</FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>{Binding Source={StaticResource Padds}, Path=Data}</FONT></FONT><FONT size=2>" </FONT><FONT color=#ff0000 size=2><FONT color=#ff0000 size=2>Margin</FONT></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>=</FONT></FONT><FONT size=2>"</FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>5</FONT></FONT><FONT size=2>"&nbsp; <FONT color=#ff0000>W</FONT></FONT><FONT color=#ff0000 size=2><FONT color=#ff0000 size=2>idth</FONT></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>=</FONT></FONT><FONT size=2>"</FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>Auto</FONT></FONT><FONT size=2>"</FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>&gt;<BR><BR><FONT color=#000000 size=3>They both work, but what was your reason for doing it this way?&nbsp; Once I got things working, I started changing things to see what would happen and it worked both ways.</FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></P>
<P><FONT color=#0000ff size=2><FONT color=#0000ff size=2><FONT color=#000000 size=3><FONT color=#0000ff size=2><FONT color=#0000ff size=2><FONT color=#000000 size=3><FONT color=#0000ff size=2><FONT color=#0000ff size=2><FONT color=#000000 size=3>Thanks,</FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></P>
<P><FONT color=#0000ff size=2><FONT color=#0000ff size=2><FONT color=#000000 size=3><FONT color=#0000ff size=2><FONT color=#0000ff size=2><FONT color=#000000 size=3><FONT color=#0000ff size=2><FONT color=#0000ff size=2><FONT color=#000000 size=3>CyclingFoodmanPA</FONT></P></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>SonOfPirate replied on Sunday, August 30, 2009</h2><P>Your question goes to the "art" of UI development.&nbsp; You are correct that both scenarios work as expected and are valid approaches.&nbsp; I can't speak for Rocky, but typically you'll want to set the DataContext at the LayoutRoot level so the data source is available to all controls in the page/user control.&nbsp; When there is only one control bound to the source, this can seem unnecessary but imagine a page where you have multiple controls bound to the same source, such as a master/details view.&nbsp; In this case, you want to bind at a level higher than both the master (presumably standard fields in a grid layout) and the details (possibly a data grid).</P>
<P>I said this is more art than science because you could chose to always do it the same way regardless of the actual layout or alter your approach per implemenation so you only set the data source at the highest level it is needed.&nbsp; This is personal preference.</P>
<P>That said, I understand there are performance implications when setting the DataContext at the root level because of the way Silverlight "bubbles" the object down the control tree.&nbsp; I don't know the details myself but have read that doing so with heavily nested controls can degrade performance.&nbsp; So, take that for what it's worth.</P>
<P>Hope that helps...</P>
<P>&nbsp;</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Monday, August 31, 2009</h2><P>Yeah, the whole XAML thing is new enough that I don't think there's one "best practice" out there.</P>
<P>And maybe there won't be.</P>
<P>If you are hand-coding the XAML it typically makes most sense to set the datacontext at a container level so you can create sub-regions on the form and manage the datacontext values easily.</P>
<P>If you are using tool-based (Blend or code-gen) it might make more sense to explicitly set each control (though I rather doubt it - as it makes dynamic changes harder).</P>
<P>And then there's the whole MVVM pattern thing - which says you should bind your UI to one or more ViewModel objects, which expose the underlying Model (business object) as a property. This seems to be where things are going - certainly it is the trendy idea at the moment.</P>
<P>You can think of CslaDataProvider as a generic ViewModel object - in which case you'd want to set your overall datacontext to the data provider, and set your individual control binding paths to Data.Property - so Data.Name, Data.City, Data.State, etc.</P>
<P>The advantage of this, is that you can (in CSLA 3.8) use InvokeMethod or the new Invoke trigger action to execute the Save/Cancel/etc methods on the data provider based on the ambient datacontext, because the ambient datacontext is the data provider.</P>
<P>The new (in 3.8) ViewModel&lt;T&gt; is an alternative to the data provider, and arguably makes this even a little easier.</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>CyclingFoodmanPA replied on Tuesday, September 01, 2009</h2><P>Thanks for the response Rocky.&nbsp; I am doing hand-coding now and hope to get a tool to do it, but wanted the experience of hand-coding it first to understand what is going on.&nbsp; Geeze, now I am getting excited about 3.8 to see what it does.&nbsp; My brain is going to go in overload!</P>
<P>CyclingFoodmanPA</P>
<P>&nbsp;</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>CyclingFoodmanPA replied on Tuesday, September 01, 2009</h2><P>Thanks SonOfPirate, you made some good points.</P>
<P>CyclingFoodmanPA</P></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
