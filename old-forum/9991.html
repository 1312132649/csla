<html><header><title>Silverlight client IP address and/or host name</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Silverlight client IP address and/or host name</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/9991.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>JonM posted on Wednesday, January 26, 2011</h2><p>Is there any way go get the IP address or hostname of a SL client?&nbsp; It seems like the dataportal show be able to know this.&nbsp; Any ideas?</p></div><div style='padding:0 15 3 15;background-color:lightgreen'><h2>RockfordLhotka replied on Wednesday, January 26, 2011</h2><p>If you are hosting the data portal in IIS then it is effectively running in ASP.NET. Because that&#39;s the case, you can have a server-side assembly that references System.Web and thereby has access to the ASP.NET object model, and through the ASP.NET object model you can get at information about the request (probably via HttpContext.Current).</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JonM replied on Saturday, January 29, 2011</h2><p>That sounds like a good idea.&nbsp; I am using IIS for my dataportal I&#39;ve added a reference to System.Web on my server CSLA library.&nbsp; In the data portal code I&#39;m trying to get at the System.Web.HttpContext.Current.&nbsp; It is null.&nbsp; I&#39;m not sure what that means.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Saturday, January 29, 2011</h2><p>I think there&#39;s something you need to do in order to get WCF to enable some of these features (like HttpContext). I don&#39;t know the details off the top of my head though, sorry.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>tmg4340 replied on Saturday, January 29, 2011</h2><p>If you&#39;re using WCF, you need to use the <span id="nsrTitle">AspNetCompatibilityRequirementsAttribute.&nbsp; But that would have to be set on the WCF service, which would be the WCF DataPortal implementation for SL - right?&nbsp; And I thought it was already set...</span></p>
<p><span>Maybe I&#39;m missing something obvious, but I know that attribute has to be applied somewhere.</span></p>
<p><span>- Scott<br /></span></p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JonM replied on Saturday, January 29, 2011</h2><p>I&#39;m looking at the CSLA source code.&nbsp; The attribute is on the Csla.Server.Hosts.Silverlight.WcfPortal class.&nbsp; [AspnetCompatiblityRequirements(RequirementsMode = Allowed)].&nbsp;&nbsp; I tried setting it to required but that kills my data portal with a page not found error.&nbsp; hmm..</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Saturday, January 29, 2011</h2><p>I don&#39;t think you need to change the data portal host. I think you need to change your web.config.</p>
<p>Look at the Windows authn example from the Core 3.8 video series, or (probably) the Windows authn test project under Source\Csla.Silverlight.test\SecurityTest.</p>
<p>The reason that attribute was added was so the SL data portal could (optionally) support impersonation. I think the same web.config settings used to get that working are what you need (or similar anyway).</p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
