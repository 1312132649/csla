<html><header><title>Remote Proxy Performance</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Remote Proxy Performance</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/1595.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>DevilDog74 posted on Wednesday, October 25, 2006</h2><P>I am using v 2.0 of CSLA.&nbsp; I am using the remote proxy configuration.&nbsp; The first call into a fetch or create method is slow.&nbsp; After that subsequent calls are lightning fast.&nbsp; </P>
<P>When my remote server is deployed to the local IIS performance was slow.&nbsp; Then I added a call into System.Configuration.ConfigurationManger.GetSection("appSettings") in the clients program.cs code.&nbsp; This sped things up considerably.&nbsp; </P>
<P>My client application is located in florida.&nbsp; When I point my client to my application server in indianapolis, the first call takes about 20 seconds to complete.&nbsp; Subsequent calls are sub-second.&nbsp; My local network in florida is connected to indianapolis via a&nbsp;MPLS.&nbsp; </P>
<P>Does anyone have any thoughts on how to get process to speed up?</P>
<P>&nbsp;</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>guyroch replied on Tuesday, October 31, 2006</h2><P>I've seen that in the past, but it was related to the database connection when the _database_ was on a different server than the application (remote) server.&nbsp; If you can, create a database on the same physical server as you application&nbsp; (remote) server and change your connection string to point to this new database instance, and monitor the performance.&nbsp; If its always fast, first time and subsequent times, then your problem is related to the database connection over the wire and not necessarily Csla per say.</P>
<P>Again, I'm not sure if it will make a diferrence for you, but this is one scenario I faced last year.</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Bayu replied on Tuesday, October 31, 2006</h2><BLOCKQUOTE><div><img src="/Themes/alternate1/images/icon-quote.gif"> <strong>guyroch:</strong></div><div><p>I've seen that in the past, but it was related to the database connection when the _database_ was on a different server than the application (remote) server.&nbsp; If you can, create a database on the same physical server as you application&nbsp; (remote) server and change your connection string to point to this new database instance, and monitor the performance.&nbsp; If its always fast, first time and subsequent times, then your problem is related to the database connection over the wire and not necessarily Csla per say.</p>
<p>Again, I'm not sure if it will make a diferrence for you, but this is one scenario I faced last year.</p></div></BLOCKQUOTE><br><br>Hey man,<br><br>You are a lightning fast cowboy indeed dude! <img src="/emoticons/emotion-4.gif" alt="Stick out tongue [:P]" /><br>However, this time my reply is not entirely obsoleted by yours. <img src="/emoticons/emotion-11.gif" alt="Cool [H]" /><br><br>Just kidding.<br><br>See ya!<br>Bayu<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>guyroch replied on Tuesday, October 31, 2006</h2>Just changed my avatar -&gt; it's now a cowboy :)</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>DevilDog74 replied on Tuesday, October 31, 2006</h2><P>Connection pooling is enabled and is being used.&nbsp; In the dev environment, the DB is on the same machine.&nbsp;I cannot put a DB on the application server in the production envoironment, because the database lives on a SAN.&nbsp; The SAN is on the same rack as the application servers so I dont think the delay is comming from the connection string being created.</P>
<P>I did a test where I created a root CSLA object that makes no database calls.&nbsp; I put a button on my form that creates an instance of the CSLA object using one of the factory methods.&nbsp; The initial load time was pretty much identical to when I call into a CSLA object that does make DB calls.&nbsp; So, I feel confident that the bulk of the delay is in the creation of the remote proxy and not the data access code.</P>
<P>So for example, when I create an instance of and object that makes no DB calls, the first execution takes 18 seconds.&nbsp; When I create an instance of an object that makes DB calls, the first execution takes 20 seconds.&nbsp; </P>
<P>Any other thoughts?</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>guyroch replied on Tuesday, October 31, 2006</h2><P>Could this be related to JIT compile?</P>
<P>I'm afraid this is the end of for me, this is a bit beyond my area of expertise.</P>
<P>&nbsp;</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Bayu replied on Tuesday, October 31, 2006</h2>Wow,<br><br>That sounds like way beyond my knowledge .... <br><br>Following guyroch's remark, I do know that there is some setting that you can use for ASP.Net apps in order to query every aspx once whenever IIS is rebooted. This in order to trigger the compilation of these pages and shorten the response times for the first user. <br><br>It sounds pretty similar to what you encounter here. <br><br>I guess you would a need some real expert for an adequate answer on this. Maybe post your question on a relevant MSDN forum?<br><br>(see also <a href="http://forums.microsoft.com/MSDN/default.aspx?SiteID=1">http://forums.microsoft.com/MSDN/default.aspx?SiteID=1</a>).<br><br>Bayu<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>DevilDog74 replied on Tuesday, October 31, 2006</h2><P>There is no ASP.NET page to compile.</P>
<P>All that lives on the application server is the CSLA assembly, and my business library with CSLA objects in the business library.&nbsp; IIS is simply the remote host for the server side code that gets executed by the CSLA runtime.</P>
<P>I was hoping that the creator of CSLA might be able to chime in with some know scenarios.&nbsp; Thanks for the link to the MSDN site.&nbsp; </P>
<P>Thanks for the replies, maybe&nbsp;Rocky will get to this some day.</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Bayu replied on Tuesday, October 31, 2006</h2>It could be that the first time your app server needs to setup a DB connection and that with subsequent calls the connection can be reused. You can never prevent that creating connections to your DB takes some time, moving your DB to your app-server may yield some benefit but your sysadmin may object for security reasons. <br><br>What you <i>can </i>do is improve connection reuse by implementing/enabling connection pooling. Some DBs natively support this and then all you would need to do is alter the connection string, in some other cases you may have to implement it manually. The concept of connection pooling is simple: your app-server always keeps a minimum level of open connections to your DB, so whenever a user request comes in the connection is available immediately. After a request has been processed the connection is not closed as you would normally do, but you keep it for future use to serve another request.<br><br>Bayu<br><br></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
