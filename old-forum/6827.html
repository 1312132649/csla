<html><header><title>NHibernate 2.0 and CSLA 3.6 - virtual public members</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>NHibernate 2.0 and CSLA 3.6 - virtual public members</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/6827.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>sturdytree posted on Tuesday, April 21, 2009</h2><P>I'm starting a project using CSLA.Net 3.6 and NHibernate 2.0.</P>
<P>A first hurdle seems to be NHibernate requiring all public members to be virtual for it to use lazy loading, whereas BusinessBase includes non-virtual members (e.g. IsNew property)&nbsp;. I know I can turn off lazy loading, but assuming I don't want to, are there any workarounds?<BR><BR>At this stage I&nbsp;don't know&nbsp;whether the NHibernate.Mapping.Attributes extension also requires virtual public members for lazy loading but am investigating.</P>
<P>&nbsp;</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>sturdytree replied on Tuesday, April 21, 2009</h2>One option I forgot to mention is to simply change the CSLA members to be virtual (there do not appear to be that many changes needed as would make this impractical).<BR><BR>However, the only downside I can think of is there might be a performance penalty for a virtual method as compared to one not marked virtual.</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JoeFallon1 replied on Wednesday, April 22, 2009</h2>I have read many threads on NHibernate in the past and they all seemed positive.<br /><br />My advice:<br />1. Search for those threads and review them.<br /><br />2. Do NOT modify CSLA. In the long run you will thank me for this one! Once you begin modifying CSLA then upgrading to the latest version becomes more and more difficult. The goal should be to try and use it "as is".<br /><br />Joe<br /></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>sturdytree replied on Wednesday, April 22, 2009</h2><P>Joe,</P>
<P>Much appreciated - I think I agree amending CSLA&nbsp;would be&nbsp;the last resort!<BR><BR>I have actually searched CSLA forums and Google on the main question on how to get around the fact that Businessbase has non-virtual public properties and NHibernate requires them to be virtual so as to be able to implement lazy loading. Unfortunately, there seems very little comment on this.<BR><BR>I can only think developers must decide to turn lazy loading off (or use their own lazy loading code)?<BR></P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Kevin Fairclough replied on Wednesday, April 22, 2009</h2>Hi,<br><br>I haven't been working on this for a little while, but AFAIK you have to manually do lazy loading, using the pattern suggested by Rocky, which intern means NHibernate needs to manually re-query server-side.<br><br>In my hibernate.cfg.xml I have the following at the moment<br>&lt;property name="use_proxy_validator"&gt;false&lt;/property&gt;<br><br>Regards<br>Kevin<br></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
