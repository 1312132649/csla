<html><header><title>How to support login like in SqlManagementStudio?</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>How to support login like in SqlManagementStudio?</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/11763.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>alex.enjoy posted on Wednesday, December 26, 2012</h2><p>Hello,</p>
<p>I want to support both, windows-domain-user and user/password login in my application.<br />At the same time. Like it is possible with the login form of the SQL-ManagementStudio.</p>
<p>The user should be able to select between &quot;login using windows credentials&quot; and &quot;login using user/password&quot;.<br />How can such a scenario be implemented using CSLA?&nbsp;</p>
<p>The application has to work in any deployment mode, 1-tier, 2-tier and 3-tier.</p>
<p>Thanks, and best wishes for the coming year, <br />Alex.</p>
<p>&nbsp;</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JonnyBee replied on Wednesday, December 26, 2012</h2><p>The simplest solution is to look at the ASP.NET Membership/Role provider model and probably add your own MembershipProvider for Windows Authentication&nbsp; and check the users credentials is valid and then check&nbsp; roles before granting access to the application. </p>
<p>If you want to configure WindowsAuthetication as builtin in WCF that is a whole other story and not an easy path to take. You will need separate endpoints for each authentication mode and it&#39;s hard to configure windows authentication in N-level config</p>
<p>&nbsp;</p>
<p>&nbsp;</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>alex.enjoy replied on Wednesday, December 26, 2012</h2><p>Jonny,</p>
<p>I do not really understand what you wrote.<br />Yes, it seems the WCF thing is complicated and I&#39;ll try to avoid it.</p>
<p>But reading your first answer part, I think you wrote about a web solution.<br />My application is a WPF solution. Maybe there will be more clients using Silverlight, WinRT, ASP or whatever... But that is another story so far.</p>
<p>With 1-tier I meant a (notebook) client, on which the SQL-DB is replicated to and the WPF-Client uses the CSLA local dataportal mode.<br />This is the configuration for disconnected road-warrior clients, maybe not even part of the windows domain.</p>
<p>On the other side will be a Windows-Domain network in 3-tier mode.<br />The client runs the WPF UI, which is takling to the CSLA server, which is connected to a dedicated SQL server.<br />I do not need authentication down to the SQL server, this connection will be the same for all.&nbsp;</p>
<p>There is a user database where I want to store the Domain SID of the user when it is assocciated to a domain user.<br />In windows logon, the user does not need to input his password for the application again.<br />Do you think it will be okay to automatically pass the SID as password in this mode?&nbsp;<br />The server could look if this SID matches an active user with the given name...</p>
<p>Is there any sample where I could look at?</p>
<p>thanks, alex.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JonnyBee replied on Wednesday, December 26, 2012</h2><p>The ASP.NET Membership provider is an API that can be used in any .NET application (or serverside).</p>
<p>More info can be found here:<br /><a href="http://www.asp.net/web-forms/tutorials/security/membership/creating-the-membership-schema-in-sql-server-cs">Creating the membership schema in sql server</a><br /><a href="http://www.theproblemsolver.nl/usingthemembershipproviderinwinforms.htm">Using the ASP.NET membership provider in a Windows forms application</a> <br /><a href="http://www.codeproject.com/Articles/165159/Custom-Membership-Providers">Custom Membership Providers</a></p>
<p>Your updated description may seem more closer to ProjectTracker which uses its own Security database for users / authentication.<br />You could start out from this and add LDAP/AD queries to authenticate user, password and load roles when users ticks off for Windows Authentication&nbsp; - and use a custom principal object.&nbsp;</p>
<p>I would be very careful as to use the users SID as you describe.</p>
<p>You may also want to check the API against LDAP/AD and remember - a users roles may change or the user may be deleted or disabled in the domain or how to handle thrust between different domains?</p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
