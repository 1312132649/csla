<html><header><title>aspnet connections</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>aspnet connections</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/3709.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>jhw posted on Sunday, October 14, 2007</h2><P>I have a web application that cannot conect to the sql database.</P>
<P>&nbsp;</P>
<P>I have a web.config connetions string: <FONT color=#0000ff size=2></P>
<P>&lt;</FONT><FONT color=#a31515 size=2>add</FONT><FONT color=#0000ff size=2> </FONT><FONT color=#ff0000 size=2>name</FONT><FONT color=#0000ff size=2>=</FONT><FONT size=2>"</FONT><FONT color=#0000ff size=2>Thompson</FONT><FONT size=2>"</FONT><FONT color=#0000ff size=2> </FONT><FONT color=#ff0000 size=2>connectionString</FONT><FONT color=#0000ff size=2>=</FONT><FONT size=2>"</FONT><FONT color=#0000ff size=2>User Id=sa;Data Source=jhw-laptop\MyDatabse;Integrated Security=True;User Instance=False; pwd=MyPassword; initial catalog=Thompson;</FONT><FONT size=2>" </FONT><FONT color=#ff0000 size=2>providerName</FONT><FONT color=#0000ff size=2>=</FONT><FONT size=2>"</FONT><FONT color=#0000ff size=2>System.Data.SqlClient</FONT><FONT size=2>"</FONT><FONT color=#0000ff size=2> /&gt;</FONT></P>
<P><FONT color=#000000 size=2>This is basically copied from the vb2005 book. The connection string works good in app.config in a console app for testing. For the 1st week it worked good in the web app. Now I can no longer log into the database as it is trying to use the aspnet account. </FONT></P>
<P>I could add the aspnet user to the database and add all the permissions, but should I have to do this? Shouldn't the web application be accessing the database through the specified config username and password, instead of using the aspnet account. </P>
<P>It is strange that it worked for a week before failing because login fails for aspnet account.</P>
<P>&nbsp;</P>
<P>Heath</P>
<P><FONT color=#0000ff size=2>&nbsp;</P></FONT></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>jhw replied on Sunday, October 14, 2007</h2><P>I think it failed when I added the asp:loginStatus and the asso√ß PTMembership provider.. Could it be that I am using a localhost for development,&nbsp;and have not moved the database files to the app_data directory? When Rocky said: move the database file to the app_data, does that mean moving the mdf and ldf files to the app_data folder and changing the file path in sql server? </P>
<P>So I moved the database to the app_data folder and used the attach database system in web.config. It is still trying to connect with the aspnet account. I know this because it gives me an execute denied error as I added the aspnet account to the database, but did not give it any permissions.</P>
<P>So should it be trying to access the database via aspnet account? My understanding is that is should be through the account in the connectionstring of web.config. So why is it trying to use aspnet?</P>
<P>Thanks</P>
<P>Heath</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Sunday, October 14, 2007</h2><P>I'd recommend adding another database file to your web project using Visual Studio. Then you can see the connection string it creates on your behalf and use it as a template for your connection string to your own database.</P>
<P>Also, it is possible that there's an NTFS folder permission issue. The ASPNET account needs write access to your app_data folder or it can't write to your database.</P></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
