<html><header><title>Batch processing in CSLA 1.5 - requeing failed jobs?</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Batch processing in CSLA 1.5 - requeing failed jobs?</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/904.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>lewischris posted on Tuesday, August 15, 2006</h2><P>Hi,</P>
<P>We are using a rudimentary in-house MSMQ batch processing engine currently. I am keen to look at the&nbsp;batch processing engine from the .NET 1.1 CSLA framework but looking through the code there doesn't appear to be a mechanism to move or automatically requeue 'failed' request messages onto a 'failed jobs' queue?</P>
<P>Our engine currently requeues request messages on a 'pending investigation' queue if they fail for any reason. This allows us to find out what the failure was (possibly a data integrity issue, or possibly just a 'database was busy' timeout, etc.), if possible fix it and then re-submit the request.</P>
<P>Anyone have any comments or suggestions about this.</P>
<P>Thanks for any help.</P>
<P>Chris</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>rhoeting replied on Tuesday, August 15, 2006</h2>The batch queue mechanism in CSLA 1.5 is pretty basic, but light years ahead of what you get out of the box on windows.&nbsp; We use it quite a bit and see it as a good starting point under which new stuff can be easily added if need be.<br><br>Rob <br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>lewischris replied on Tuesday, August 15, 2006</h2><P>Thanks Rob.</P>
<P>How do you cope with batch requests that fail - do you just report the failure and move on (which I think is what the batch processor does) or are you able to recover failed jobs for further re-processing?</P>
<P>This is the key question for us, as we cannot afford to 'lose' failed batch request messages. As I mentioned, we currently have a batch processor that 'saves' failed jobs and allows them to be subsequently re-queued if necessary.</P>
<P>Chris</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Tuesday, August 15, 2006</h2>Chris,<br><br>You should be able to add functionality to the batch processor to do this.&nbsp; I think it makes sense to drop the message into an Investigation queue if the batch fails; just add this functionality in the catch portion of a try which wraps the execution of the job.<br><br>Andy<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>rhoeting replied on Tuesday, August 15, 2006</h2><P>It's an ok solution, but not great.&nbsp; We've created a "BatchBase" class which encapsulates the plumbing which simplifies the creation and execution of batch jobs.&nbsp; One piece of this base class&nbsp;is a logging mechamism which persists info to a few simple tables.&nbsp; So as jobs are started, completed, failed,&nbsp;information is logged.&nbsp; The tables can be queried to determine success or failure.&nbsp;&nbsp;If failure is detected&nbsp;jobs need to be manually submitted.&nbsp; </P>
<P>Not ideal, but at the same time, it wouldn't be a huge leap to automate the checking and automatic resubmission of jobs.</P>
<P>Hope this helps.</P>
<P>Rob</P></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
