<html><header><title>How do I serialize a CLSA object to XML?</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>How do I serialize a CLSA object to XML?</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/4442.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>SouthSpawn posted on Saturday, March 01, 2008</h2>Can anyone post a function to do this?<BR><BR>Thanks,<BR>Mark</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>tmg4340 replied on Saturday, March 01, 2008</h2><P><FONT face=Tahoma size=2>Well... the short answer is "in general, you don't."</FONT></P>
<P><FONT face=Tahoma size=2>But since that's proably not very helpful... <img src="/emoticons/emotion-1.gif" alt="Smile [:)]" /></FONT></P>
<P><FONT face=Tahoma size=2>This is a rather broad question, and it might help us to know a bit more about what you're trying to accomplish.&nbsp; But there are a few problems you'll run into, no matter what your reasons for trying:</FONT></P>
<P><FONT face=Tahoma size=2>1. XML serialization doesn't really adhere to the "NonSerialized" attribute, at least not how it's used in CSLA.&nbsp; That's because XML serialization doesn't care about fields - it only cares about properties.</FONT></P>
<P><FONT face=Tahoma size=2>2. More specifically,&nbsp;XML serialization&nbsp;only cares about read/write properties.&nbsp; This means that any read-only properties in your BO won't be serialized at all.&nbsp; And any data you might want in your XML stream that's not referenced by any property also won't be there.</FONT></P>
<P><FONT face=Tahoma size=2>3. XML serialization requires a default public constructor.</FONT></P>
<P><FONT face=Tahoma size=2>Alas, all is not lost.&nbsp; If you take a look at the "IXmlSerializable" interface, you will see that it allows you to customize the XML serialization and deserialization of your object to include whatever data you want, in whatever format you want.&nbsp; It can be time-consuming, since you have to implement the interface on every object you want to serialize to XML in your object graph.&nbsp; But you can get it done.&nbsp; However, that won't get you around the public-constructor limitation - you're pretty much stuck on that one.&nbsp; And while that's not a definite no-no for CSLA objects, it is heavily discouraged.</FONT></P>
<P><FONT face=Tahoma size=2>But just because you <EM>can</EM> do it doesn't mean you <EM>should</EM>.&nbsp; Thus, my original question: what are you trying to accomplish?</FONT></P>
<P><FONT face=Tahoma size=2>- Scott</FONT></P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>SouthSpawn replied on Sunday, March 02, 2008</h2><DIV>Basically, I wanted to save the object as an XML field into the database.</DIV>
<DIV>Just in case I need to grab that XML someday and send to another system such as a AS400 system.</DIV></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Sunday, March 02, 2008</h2><P>In that case, if it were me I'd look at using the XLinq capabilities of .NET 3.5 to implement DataPortal_XYZ methods that create and store/retrieve the XML.</P>
<P>It is true that it is difficult or impossible to use the standard XmlSerializer, and it is unwise to try and use the DataContractSerializer (because you'll get fields you don't want like _isDirty, and you can't surpress that without breaking CSLA).</P>
<P>Besides, what you are describing is data access, pure and simple, and so it is a mapping problem between your data storage mechanism and your object model - which is the purpose of the code in (or called by) the DataPortal_XYZ methods.</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>SouthSpawn replied on Tuesday, March 04, 2008</h2><DIV>Rocky,</DIV>
<DIV>&nbsp;</DIV>
<DIV>This is a little new to me.</DIV>
<DIV>&nbsp;</DIV>
<DIV>Can you point me to a good online resource that talks about this and shows examples?<BR><BR>Thanks,<BR>Mark</DIV></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
