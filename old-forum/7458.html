<html><header><title>business objects dilemma:  read-only vs read/write</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>business objects dilemma:  read-only vs read/write</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/7458.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>opedog posted on Friday, August 14, 2009</h2>I'm part of a team tasked to revamping our old VB6 UI/COBOL database application to modern times.&nbsp; Before I was hired, the decision was made (largely on sales, I'm sure) to redo the UI before the database.&nbsp; So, now we're using WPF and MVVM to great effect, it's been amazing so far, especially using CSLA as our Model layer.<br><br>However, because our development is side-by-side with the next version of the old product, we're constrained a bit.&nbsp; We can't make any changes (or minimal changes) to the calls made to the COBOL database.&nbsp; This has been fine so far, albeit pining back to the glory days of SQL Server if you can believe it.<br><br>Where I've hit a particularly nasty roadblock regarding our BO design is in dealing with "light" business objects returned in lists and their "full" counterparts.&nbsp; Let me try and construct an example:<br><br>Let's say we have a person object in the DB with a bunch of fields.&nbsp; When we do a search on that table, we don't return all the fields, so we populate our lite object with these.&nbsp; These fields may or may not be a subset of the full person.&nbsp; We may have done a join or two to retrieve some other information specific to the search.&nbsp; But, if we want to edit our person object, we have to make another call to get the full version to populate the UI.&nbsp; This leaves us with two objects and attempting to juggle their state in 1 VM, all the while trying to keep the person list in sync on whatever parent object it sits after delete, edit, and add.&nbsp; Originally, I made our lite person object derive from ReadOnlyBase&lt;&gt;.&nbsp; But now that I'm dealing with the same list behavior you'd have with a list of full BOs except with half full, half lite, I'm thinking I should've just made both the lite and full versions derive from BusinessBase&lt;&gt; and simply made the lite version setter properties private.<br><br>Has anyone else out there come across and found a solution for this?&nbsp; After sleeping on it, I've come up with this potential solution.&nbsp; What if we wrap the full and lite version of our BO in another BO, like this:<br><br>public class PersonFull : BusinessBase&lt;PersonFull&gt;<br>{<br>&nbsp; ...<br>}<br>public class PersonLite : BusinessBase&lt;PersonLite&gt;<br>{<br>&nbsp; ...<br>}<br><br>public class Person : BusinessBase&lt;Person&gt;<br>{<br>&nbsp; public PersonFull PersonFull;<br>&nbsp;&nbsp; &nbsp;public PersonLite PersonLite;<br>}<br>public class PersonList : BusinessListBase&lt;PersonList, Person&gt;<br>{<br>}<br><br>Obviously everything would be CSLA registered properties and such, but for the sake of brevity they're fields there.&nbsp; In this case Person and PersonList would hold all the factory methods.&nbsp; After a search operation PersonList would be populated by Person objects whose PersonLite members were all populated and the PersonFull objects were all null.&nbsp; If we needed to get the full version, we simply tell the Person object to do so, and now we have our PersonFull object so we can populate the edit UI.&nbsp; If the Person object is to be deleted, we can easily do this with the CSLA delete procedures in place, while still maintaining the integrity of our lists across all the VMs that are listening to it.<br><br>So, I hope this made sense to everyone, and if anyone has a different solution they've successfully employed or criticism of this one, by all means!<br><br>Thanks!<br><br>(repost from: http://stackoverflow.com/questions/1278697/c-csla-business-object-dilemma-read-only-vs-read-write)<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>pondosinat replied on Friday, August 14, 2009</h2><P>I've seen&nbsp;the approach in a WPF app where&nbsp;the search results grids are populated with the full blown editable objects, which could then be opened up and edited. I've also&nbsp;worked with the Readonly list approach you mentioned earlier. Design wise, I think the latter makes more sense because the&nbsp;read to write ratio tends to be very imbalanced --&nbsp;people are usually constantly searching your objects, but only&nbsp;open up&nbsp;to edit&nbsp;maybe 1% of the&nbsp;objects&nbsp;they've searched. Readonly lists are much more lightweight then even small editable objects. So scalability becomes a big issue.</P>
<P>Of course, I'm over simplifying a bit since this is a general question. HTH.</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>opedog replied on Friday, August 14, 2009</h2>Right, but the dilemma comes in when I need to edit one of my read-only objects, so I do a full get from the DB.&nbsp; Then what?&nbsp; Now I've got 2 copies of the same data in 2 different places.&nbsp; After the edit's save, now I've got 2 copies of different data in 2 different places.<br><br>The same goes for a delete.&nbsp; I display my list of read-only objects in the view with the option for the user to delete them, but when they do I'm constrained by the ReadOnlyListBase&lt;&gt; inability to delete objects.&nbsp; Sure, I can remove objects from ROLB by adding a remove method and make it call a delete function on the BO or something, but I don't want to have to do that more than once and I have several of these lists with similar behavior.<br><br>It's the same with an add.&nbsp; You have to force an add into a ROLB, and even then I'd have to go through the process of converting a full BO into a lite one, which would be a pain in itself since the lite version is a ReadOnlyBase&lt;&gt;.<br><br>So, I'm thinking I'm limiting myself here by using ROB and ROLB.<br></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
