<html><header><title>Does DataPortal_Fetch call MarkOld?</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Does DataPortal_Fetch call MarkOld?</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/10874.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>tiago posted on Monday, November 14, 2011</h2><p>Hi Rocky,</p>
<p>In <em>Using CSLA4-02 Objects</em>, about the MarkOld method&nbsp;you say that DataPortal takes care of it on Insert and Update. I guess this means DataPortal_Insert/Child_Insert and DataPortal_Update/Child_Update&nbsp;take care of calling MarkOld.</p>
<p>What about DataPortal_Fetch? Does it also takes care of calling this method? BTW I can&#39;t see a single example of MarkOld usage either on PTracker or EncapsulatedInvoke/EncapsulatedInvokeDto.</p></div><div style='padding:0 15 3 15;background-color:lightgreen'><h2>JonnyBee replied on Monday, November 14, 2011</h2><p>This is the code from f.ex SimpleDataPortal - so yes, MarkOld is called on the object before DataPortal_Fetch: </p>
<pre style="font-family:Consolas;background:#fafafa;color:black;font-size:13px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:green;">//&nbsp;create&nbsp;an&nbsp;instance&nbsp;of&nbsp;the&nbsp;business&nbsp;object.</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;obj&nbsp;=&nbsp;<span style="color:blue;">new</span>&nbsp;<span style="color:#2b91af;">LateBoundObject</span>(objectType);
 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;target&nbsp;=&nbsp;obj.Instance&nbsp;<span style="color:blue;">as</span>&nbsp;<span style="color:#2baaaf;">IDataPortalTarget</span>;
 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:blue;">if</span>&nbsp;(target&nbsp;!=&nbsp;<span style="color:blue;">null</span>)
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;target.DataPortal_OnDataPortalInvoke(eventArgs);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;target.MarkOld();
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:blue;">else</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;obj.CallMethodIfImplemented(<span style="color:#a31515;">&quot;DataPortal_OnDataPortalInvoke&quot;</span>,&nbsp;eventArgs);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;obj.CallMethodIfImplemented(<span style="color:#a31515;">&quot;MarkOld&quot;</span>);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:green;">//&nbsp;tell&nbsp;the&nbsp;business&nbsp;object&nbsp;to&nbsp;fetch&nbsp;its&nbsp;data</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:blue;">if</span>&nbsp;(criteria&nbsp;<span style="color:blue;">is</span>&nbsp;<span style="color:#2b91af;">EmptyCriteria</span>)
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;obj.CallMethod(<span style="color:#a31515;">&quot;DataPortal_Fetch&quot;</span>);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:blue;">else</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;obj.CallMethod(<span style="color:#a31515;">&quot;DataPortal_Fetch&quot;</span>,&nbsp;criteria);
 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:blue;">if</span>&nbsp;(target&nbsp;!=&nbsp;<span style="color:blue;">null</span>)
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;target.DataPortal_OnDataPortalInvokeComplete(eventArgs);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:blue;">else</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;obj.CallMethodIfImplemented(
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#a31515;">&quot;DataPortal_OnDataPortalInvokeComplete&quot;</span>,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;eventArgs);
 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:green;">//&nbsp;return&nbsp;the&nbsp;populated&nbsp;business&nbsp;object&nbsp;as&nbsp;a&nbsp;result</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:blue;">return</span>&nbsp;<span style="color:blue;">new</span>&nbsp;<span style="color:#2b91af;">DataPortalResult</span>(obj.Instance);</pre></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
