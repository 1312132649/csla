<html><header><title>Is it possible to use two different data sources with two different concrete DALs</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Is it possible to use two different data sources with two different concrete DALs</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/12113.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>pecen posted on Wednesday, August 14, 2013</h2><p>Hi,</p>
<p>What would be the proper way to code if you have two different data sources? </p>
<p>For instance, in my project I have a SQL2008R2 Data Source with the main data, and a XML file which defines the filter conditions of what to retrieve from the main database. I.e. the XML file have the criterias defined which&nbsp;I use when I want to select what to retrieve from the SQL database. </p>
<p>As it is now I have implemented both&nbsp;in my concrete Dal called&nbsp;DalSql, but I would rather have the XML implementation in its own concrete Dal.&nbsp;&nbsp;</p>
<p>In my abstract Dal&nbsp;I have one interface called IOrtSettings, which defines methods for retrieving data from the&nbsp;SQL database, and one &nbsp;interface called IOrtSettingsFilter which defines which OrtSettings to retrieve. These interfaces are then implemented in the concrete Dal, DalSql.&nbsp; </p>
<p>Below is an example of the XML-file used with filter conditions. The CategoryId and VariableId fields are columns in a table in the SQL database, and the values are used to define what should be retrieved. </p>
<p>These filter options (MapDto&#39;s below) can also vary from client to client, so there is a scenario where you use an admin interface to set new&nbsp;filter options, which are then written to the XML-file, or delete existing filter options in the XML-file. </p>
<p>My problem is that since the XML-file have its own edit scenario, I&#39;m not sure the way I&#39;ve made my implementation is the best way to do it. It works, but shouldn&#39;t the XML-part have it&#39;s own area, like its own concrete Dal, for instance a DalXml?</p>
<p><br />&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;<br />&lt;OrtSettingsFilter xmlns=&quot;<a href="http://www.ortivus.com">http://www.ortivus.com</a>&quot; xmlns:xsd=&quot;<a href="http://www.w3.org/2001/XMLSchema">http://www.w3.org/2001/XMLSchema</a>&quot; xmlns:xsi=&quot;<a href="http://www.w3.org/2001/XMLSchema-instance">http://www.w3.org/2001/XMLSchema-instance</a>&quot;&gt; <br />&nbsp; &lt;MapDto&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp; &lt;CategoryId&gt;Ortivus&lt;/CategoryId&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp; &lt;VariableId&gt;SW-options&lt;/VariableId&gt;<br />&nbsp;&lt;/MapDto&gt;<br />&nbsp;&lt;MapDto&gt;<br />&nbsp;&nbsp; &lt;CategoryId&gt;MMM&lt;/CategoryId&gt;<br />&nbsp;&nbsp; &lt;VariableId&gt;MMMLocation&lt;/VariableId&gt;<br />&nbsp;&lt;/MapDto&gt;<br />&nbsp;&lt;MapDto&gt;<br />&nbsp;&nbsp; &lt;CategoryId&gt;MMM&lt;/CategoryId&gt;<br />&nbsp;&nbsp; &lt;VariableId&gt;MMMName&lt;/VariableId&gt;<br />&nbsp;&lt;/MapDto&gt;<br />&nbsp;&lt;MapDto&gt;<br />&nbsp;&nbsp; &lt;CategoryId&gt;Hardware&lt;/CategoryId&gt;<br />&nbsp;&nbsp; &lt;VariableId&gt;MU1&lt;/VariableId&gt;<br />&nbsp;&lt;/MapDto&gt;<br />&nbsp;&lt;MapDto&gt;<br />&nbsp;&nbsp; &lt;CategoryId&gt;InstalledMSI&lt;/CategoryId&gt;<br />&nbsp;&nbsp; &lt;VariableId&gt;Ortivus MMM&lt;/VariableId&gt;<br />&nbsp;&lt;/MapDto&gt;<br />&nbsp;&lt;/OrtSettingsFilter&gt;</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JonnyBee replied on Thursday, August 15, 2013</h2><p>Hi,</p>
<p>So you are considering to create a separate assembly (and interfaces) for the Xml filter and configuration handling?&nbsp;</p>
<p>Basically - it is a matter of how YOU want to structure your code. </p>
<p>How much work is involved to separate the DAL code and XML filer/configuration?</p>
<p>Do you plan on creating multiple implementations of the DAL to support a number of databases?&nbsp;</p>
<p>If you are not going to create multiple implementations of the dal - you could just as well have one DAL assembly and still have the XML code isolated into it&#39;s own namespaces inside the DAL assembly. Again - it is how you structure the code - and I would create a separate assembly if I needed to use this code in several DAL assemblies.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>pecen replied on Sunday, August 18, 2013</h2><p>Hi, and thanks for your reply. </p>
<p>Yes, that&#39;s what I&#39;m thinking as well, a matter of how one wants to structure the code. My thougt was to create a separate assembly for the Xml handling, so that not every concrete Dal have to also include code for handling the Xml config-file (although it is re-usable), and what if in the future it will be decided to use another format/db/source for the config part.</p>
<p>Today I have just one Dal assembly, and have the Xml-code isolated in its own namespace like you suggest. It just seems like I should take another approach with future possible maintenance issues&nbsp;in mind.</p>
<p>Again, the main question I haved&nbsp;is, if you have chosen the Encapsulated Invoke DTO approach, is it possible to have several Dal&#39;s, or is the proper way to take another approach?</p>
<p>/p</p>
<p>&nbsp;</p>
<p>&nbsp;</p></div><div style='padding:0 15 3 15;background-color:lightgreen'><h2>JonnyBee replied on Sunday, August 18, 2013</h2><p>Hi,</p>
<p>In a repository pattern you would typically use interfaces and an IoC container so it is a question of configuring the IoC container to provide classes from the appropriate DAL assembly. Your DTO&#39;s should not change if you use another database but the IoC conainer will be configured to use a different set of classes. &nbsp;</p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
