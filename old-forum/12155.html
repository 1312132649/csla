<html><header><title>Configuration data</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Configuration data</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/12155.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>Brendt posted on Thursday, September 19, 2013</h2><p>Good day.</p>
<p>i would like some guidance in the following please. i would like to be able to load configuration data through having my businessLibrary and Factory classes. i have all my other classes (eg. customer classes) which use the Factory implantation, but i am unsure on how to proceed with the configuration aspect of things. </p>
<p>i would like to load configuration data from my database when my application loads and have that information readily available throughout my entire application, irrespective of which form or class i am currently working in.&nbsp;</p>
<p>would/could i create a static class (of businessbase) class and just call it every time i need it (how could this be done) </p>
<p>or</p>
<p>should i have it like all other classes in my application BusinessLibrary classes and instantiate it and just pass the object to every form and class that would need this data?</p>
<p>any help or advice in this regard would be highly appreciated.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JonnyBee replied on Thursday, September 19, 2013</h2><p>A couple of techniques worth considering </p>
<ol>
<li>A static Context class with a static property for the config class (somewhat a variant of Singelton)<br />(or you can also use ApplicationContext in CSLA)</li>
<li>Use the Singelton pattern to make the config class hold just one instance <br />See: <a href="http://sourcemaking.com/design_patterns/singleton">http://sourcemaking.com/design_patterns/singleton</a> <br />And: <a href="http://msdn.microsoft.com/en-us/library/ff650316.aspx">MSDN Implementing Singleton in C#</a></li>
<li>Use an IOC container and set configuration to single/shared instance </li>
</ol></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>skagen00 replied on Thursday, September 19, 2013</h2><p>In our application (Silverlight) we do this in the startup - our class is called something along the lines of &quot;ConfigurationData&quot;.&nbsp; It has a number of children BOs - mostly BLBs - which contain configuration data.</p>
<p>When calling the fetch on this, like ConfigurationData.GetConfigurationData, the criteria is set of &quot;hash&quot; codes of sorts from what was kept in IsolatedStorage from the last application run.&nbsp; (Note that 32-bit and 64-bit implementations of string GetHashCode() are different so you have to do something about that, it&#39;s not that hard).&nbsp;</p>
<p>On the data access side of this ConfigurationData fetch, it does a factory fetch of each of the configurationdata components individually and gets the hash code - if they match, &quot;null&quot; is sent back for that part of configurationdata - telling the client they have the most recent version.&nbsp; This allows our pre-load of configuration data to be pretty economical when things haven&#39;t changed - not a ton of stuff ends up coming back to the client in most cases.</p>
<p>Each component of the data, when &quot;changed&quot;, is loaded into the ConfigurationData object.&nbsp; When everything gets back to the client then IsolatedStorage is updated for the next time.</p>
<p>The callback of the GetConfigurationData is when we move our application UI into the main content of the root visual.&nbsp; Before then, we have a &quot;loading application data&quot; UI w/ spinner.</p>
<p>Using hashcodes to check for changes&nbsp;as well as lumping everything into one main business object (with various child components) and one intiial call ends up being a very efficient way of handling this.</p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
