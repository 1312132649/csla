<html><header><title>Asynchronous Rule Question - CSLA 4</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Asynchronous Rule Question - CSLA 4</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/9911.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>mosgath posted on Monday, January 03, 2011</h2><p>I am new to CSLA and working in CSLA 4.&nbsp; What is the best way to implement a rule that triggers asynchronously for a property and that passes all properties of the property&#39;s parent to the command that is triggered?</p>
<p>I have gone the path of creating a Rule object that calls a Command Object asynchronously (using DataPortal) and setting a property on the command object equal to the business object using the RuleContext.Target.&nbsp; However, since the IsAsync property on the rule is set to true, the Target property is null on the client side and the property on the Command object will not be valid.</p>
<p>The entire contents of the parent object is required by a third party service that is being called by the Command Object to perform the validation.&nbsp; I have multiple types of validations that require this.</p>
<p>Would this be&nbsp;a place to use the ProvideTargetWhenAsync=True or is there a better way?&nbsp; </p>
<p>&nbsp;</p>
<p>&nbsp;</p></div><div style='padding:0 15 3 15;background-color:lightgreen'><h2>JonnyBee replied on Monday, January 03, 2011</h2><p>If you need the entire object then yes - you should set ProvideTargetWhenAsync = true. </p>
<p>This will make the&nbsp; rule engine supply the context.Target property to the async rule.</p>
<p>If you are going to set any out values in the business object (other than result) then use OutputValues.</p>
<p>&nbsp;</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>mosgath replied on Monday, January 03, 2011</h2><p>Thanks JonnyBee.&nbsp; </p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JonnyBee replied on Tuesday, January 04, 2011</h2><p>Just one more thing you must be aware of: </p>
<p><b>In Async rules - Your code must call context.Complete in the async callback (or sync code that does not start an async operation). </b></p>
<p><b>Otherwise the RuleEnginge will consider the Async opertion is still running, the field is still busy and you cannot set a new value into that field !! </b></p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
