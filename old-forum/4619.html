<html><header><title>General design questions</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>General design questions</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/4619.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>dmostert posted on Saturday, April 05, 2008</h2>Hi,<br><br>I've got 2 general design questions.<br><br>1) If you hava a validation rule to check if an amount property (e.g. Investment Amount) is within a valid range, but the range also depends on other properties on the object, would you register the rule on each property that affects the range as well as the amount property? Or what other options exists?<br><br>2) If a child collection of this object needs to be notified / informed of the changed amount property (e.g. to update the&nbsp; percentage split of the investment amount into a collection of selected funds), what is the best way to accomplish this? Should the parent as part of it's "setter" update the child collection, or should the child collection register a PropertyChanged event? Or, again, what other options exists?<br><br>I'm busy re-engineering a Delphi solution into C# .NET and I'm evaluating my current ideas / methods againts options that is available in .NET.<br><br>Thanks,<br>Dawid<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JoeFallon1 replied on Saturday, April 05, 2008</h2><P>For #1 - some of it depends on the user experience you are looking for. If you always want instant feedback then you should probably do things along the lines you described. If you want to set all the properties on screen first (like in a web form) and then only figure it out once they have all been posted you can do something like this:</P>
<P>Create a rule which is assigned to a dummy property - call it anything you want. "My Fake Account Property". Then you need to make sure this 1 rule is called whenever you call IsValid - so override it and call this rule first and then call MyBase.IsValid. This way the rule is only checked once when all properties are set rather than multiple times as each property is changed. This design also works well for screens where there are many checkboxes and your rule is that at least 1 of them must be checked.</P>
<P>Joe</P>
<P>&nbsp;</P>
<P>&nbsp;</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JonnyBee replied on Sunday, April 06, 2008</h2><P>Assuming you are using CSLA 3.0 I would&nbsp;</P>
<P>1) Rules<BR>A. Create a new rule inside my object to validate the field&nbsp;&nbsp;and use ValidationRules.AddRule(...<BR>B. Register Validationrules.DependantProperty from the amount property to&nbsp;the other properties that this rule depends on. This&nbsp;will assure that the ValidationRule is also&nbsp;executed whenever one of these properties are changed - You may even&nbsp;declare that the dependancy is bidirectional. &nbsp;</P>
<P>2) Child collection<BR>The simple solution is to call the method in the children from the property setter on your parent. Adding an event will require you to also recreate events in OnDeserialized on your object if you are going for n-tier business objects. </P>
<P>/jonny</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>dmostert replied on Wednesday, April 09, 2008</h2>Thanks,<br><br>Both ideas basically confirm my own ideas...<br><br><br></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
