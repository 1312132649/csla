<html><header><title>Csla-&gt;telerik radGrid binding on AddNew - ideas?</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Csla-&gt;telerik radGrid binding on AddNew - ideas?</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/4251.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>mongo posted on Tuesday, January 29, 2008</h2><P>I'm hoping someone can point me in the right direction.</P>
<P>I have a telerik grid (under ASP.NET)&nbsp;configured on my page setup along with a CslaDataSource configured to my BusinessListBase derived class.&nbsp; This has one level of objects in a collection of BusinessBase objects- nothing fancy here.</P>
<P>When I click the "Add new item" item, I would hope that a new BusinessObject would get created and bound to for the initial value display.&nbsp;&nbsp;&nbsp;I am hoping that I have the opportunity to load default values in the DataPortal.&nbsp; </P>
<P>I am not seeing anything that sticks out - I tried overriding the AddNewCore() method on the collection to see if the grid was making a call but nothing came through.&nbsp; I'm guessing I'm probably missing something obvious here.</P>
<P>Thank you,</P>
<P>-Steve</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Tuesday, January 29, 2008</h2><P>Web data binding doesn't normally end up invoking AddNewCore(), because they don't use IBindingList.</P>
<P>Do you know what postback event occurs when you click "Add new item"? That is most likely where you'll need to put a bit of code to ask your collection for a new item - and you could call IBindingList yourself if that seems easiest - or implement some other public method on your collection that creates/adds a new item.</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>mongo replied on Tuesday, January 29, 2008</h2><P>This makes perfect sense - an AddNew-style event is not readily apparent on the telerik control so I am pursuing this with telerik.&nbsp; Once I have an approach, I'll post it here in case others are looking for the same behavior.</P>
<P>Thank you<BR>-Steve</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>mongo replied on Wednesday, January 30, 2008</h2><P>Thanks Rocky,</P>
<P>The telerik article that deals with this is located here: <A href="http://www.telerik.com/help/aspnet/grid/grdInsertingValuesInPlaceAndEditForms.html">http://www.telerik.com/help/aspnet/grid/grdInsertingValuesInPlaceAndEditForms.html</A></P>
<P>If that link isn't available down the road, here is the general idea with Telerik:</P>
<P>There are two events on the grid that you can hook - InsertCommand and ItemCommand.&nbsp; The easiest command to hook is ItemCreated because it's far less noisy than ItemCommand.&nbsp; In InsertCommand, you can test to see if the item in question is being inserted (as opposed to editing a pre-existing object) and assign a new business object to it.&nbsp; If you have an inline or form based edit, you will get this command fired once for each element being rendered.&nbsp; If you are using a custom control, you will see this event fired once for the control.&nbsp; If you are using a custom control, you must float the "public object DataItem" property on your control to get the data object assigned for binding purposes.</P>
<P>The code in the ItemCreated event looks something like this:</P>
<P>if( e.Item.OwnerTableView.IsItemInserted )<BR>&nbsp;&nbsp;&nbsp;&nbsp;e.Item.DataItem = MyBusinessObject.CreateNewObject(...);</P>
<P>You'll then need to adjust your CslaDataSource_UpdateObject(...) command to behave appropriately (insert vs. update).</P>
<P>Thanks again,</P>
<P>-Steve</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>mongo replied on Wednesday, January 30, 2008</h2><P>I need to correct - </P>
<P>You do not need to modify UpdateObject event on your datasource to handle Inserts and Updates.&nbsp; The InsertObject event will be properly raised.</P>
<P>Also,&nbsp; the telerik Grid methods are <EM>ItemCreated</EM> and ItemCommand -&nbsp;as opposed to InsertCommand as I incorrectly stated earlier.</P></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
