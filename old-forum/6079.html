<html><header><title>Linq To SQL weirdness ??</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Linq To SQL weirdness ??</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/6079.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>lukky posted on Sunday, January 04, 2009</h2>Hi,<br><br>I have to admit that I'm getting my feet into something for which I have very little knowledge.<br><br>In my desire to find a set of working templates to build my application based on CSLA 3.6, I have tested the CSLAContrib/CodeSmith templates (amongst others).<br><br>Those templates make use of L2S as the data layer, and this is the part where I get lost easily.<br><br>When one updates changes to a BO (by Calling Save() ), the DataPortal_Update() method attaches a new entity to the context. It then fills the fields of this new entity from the BO fields, and finally calls DataContext.SubmitChanges().<br><br>When I ran the code for the first time, I kept receiving a ChangeConflictException on the call to DataContext.SubmitChanges(). After a bit of investigation, and after setting the DataContext.Log to the Console, I found that it had to do with the "Update Check" property of each Entity member (available in the L2S Designer Property pane). It seems that I have to set this property to "Never" in order for the Update to work properly.<br><br>A quick look at the ProjectTracker project confirmed that this is exactly what needs to be done, as each Entity Member in the PT L2S model is set to "Never".<br><br>It so happens that my current project doesn't require any type of concurrency checking (last write wins), so this is all fine for me.<br><br>For future reference, because I'm sure to need this some day, could someone explain how we could achieve Optimistic Concurrency with L2S ?<br><br>Thank you<br><br><br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Monday, January 05, 2009</h2>Do you have any timestamp fields?&nbsp;&nbsp;&nbsp; Also, you mention that your code uses Attach.&nbsp; What does your call look like?&nbsp; It sounds like by default that L2S uses optimistic concurrency, but it can use timestamps to tell if the record in the database has changed. See: <a href="http://msdn.microsoft.com/en-us/library/bb399373.aspx">http://msdn.microsoft.com/en-us/library/bb399373.aspx</a><br><br>So... what does your Attach statement look like, and what is the definition of your DTO class?<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>lukky replied on Monday, January 05, 2009</h2>Hi,<br><br>No, I don't have any Timestamp field, at least not in the application I'm currently working on, which doesn't require concurrency checking. I'm only trying to understand better the use of Linq to SQL.<br><br>I don't know if you're familiar with the CSLAContrib CodeSmith templates. My code is based on those.<br><br>Here is for example the DataPortal_Update method for a BusinessBase object:<br><br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; protected override void DataPortal_Update()<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; bool cancel = false;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; OnUpdating(ref cancel);<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; if (cancel) return;<br><br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; using (var mgr = ContextManager&lt;CentreClient.DAL.vittoria_prodDataContext&gt;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; .GetManager(Database.vittoria_prod))<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; var data = new CentreClient.DAL.Customer() <br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; CUST_id = ReadProperty&lt;int&gt;(CustIdProperty)<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; };<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; mgr.DataContext.Customers.Attach(data);<br><br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; OnMemberReading(data);<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; if (IsSelfDirty)<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; data.CUST_NO = ReadProperty&lt;string&gt;(CustNoProperty);<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; data.CUST_pallet = ReadProperty&lt;int&gt;(CustPalletProperty);<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; data.CUST_acombacp = ReadProperty&lt;int&gt;(CustAcombacpProperty);<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; data.CUST_NAME = ReadProperty&lt;string&gt;(CustNameProperty);<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; data.CUST_shipdelay = ReadProperty&lt;int&gt;(CustShipdelayProperty);<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; data.CUST_segment = ReadProperty&lt;int&gt;(CustSegmentProperty);<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; data.CUST_noteclient = ReadProperty&lt;string&gt;(CustNoteclientProperty);<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; data.CUST_notecommande = ReadProperty&lt;string&gt;(CustNotecommandeProperty);<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; data.CUST_notefacture = ReadProperty&lt;string&gt;(CustNotefactureProperty);<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; data.CUST_noteboncommande = ReadProperty&lt;string&gt;(CustNoteboncommandeProperty);<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; data.CUST_notebilltransport = ReadProperty&lt;string&gt;(CustNotebilltransportProperty);<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; data.CUST_noteSales = ReadProperty&lt;string&gt;(CustNotesalesProperty);<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; data.CUST_groupid = ReadProperty&lt;int&gt;(CustGroupidProperty);<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; data.CUST_groupno = ReadProperty&lt;string&gt;(CustGroupnoProperty);<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; data.CUST_devise = ReadProperty&lt;string&gt;(CustDeviseProperty);<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; data.CUST_noteFacPopup = ReadProperty&lt;string&gt;(CustNotefacpopupProperty);<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; data.CUST_datecreated = ReadProperty&lt;SmartDate&gt;(CustDatecreatedProperty);<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; data.CUST_dateupdated = ReadProperty&lt;SmartDate&gt;(CustDateupdatedProperty);<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; data.CUST_taxgroup = ReadProperty&lt;string&gt;(CustTaxgroupProperty);<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; data.CUST_taxidFed = ReadProperty&lt;string&gt;(CustTaxidfedProperty);<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; data.CUST_taxidProv = ReadProperty&lt;string&gt;(CustTaxidprovProperty);<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; data.CUST_termcp = ReadProperty&lt;int&gt;(CustTermcpProperty);<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; data.CUST_sales = ReadProperty&lt;int&gt;(CustSalesProperty);<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; data.ACTIVE = ReadProperty&lt;bool&gt;(ActiveProperty);<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; OnMemberRead();<br><br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; mgr.DataContext.SubmitChanges();<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; if (IsSelfDirty)<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; LoadProperty&lt;int&gt;(CustIdProperty, data.CUST_id);<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }//using<br><br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; OnUpdated();<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }<br><br>Sorry if this is a bit long.<br><br>So, we can see that we create a new entity, and attach it to the DataContext. This code is different than the ProjectTracker sample code, which looks like this:<br><br>protected override void DataPortal_Update()<br>&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; using (var ctx = ContextManager&lt;ProjectTracker.DalLinq.PTrackerDataContext&gt;.GetManager(ProjectTracker.DalLinq.Database.PTracker))<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // insert project data<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; System.Data.Linq.Binary lastChanged = null;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ctx.DataContext.updateProject(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ReadProperty(IdProperty),<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ReadProperty(NameProperty),<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ReadProperty(StartedProperty),<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ReadProperty(EndedProperty),<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ReadProperty(DescriptionProperty),<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; _timestamp,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ref lastChanged);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; _timestamp = lastChanged.ToArray();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // update child objects<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; FieldManager.UpdateChildren(this);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; }<br><br>Of course, both don't apply to the same database/table, so the fields are different, but we can see the different logic being used.<br><br>I'd like to understand what happens with both ways, and why one would chose one over the other. Maybe if you have some link on the subject. <br><br>My first impression is that in the first case, we assume that we work with a different DataContext, and need to attach the entity before applying the changes. In the PT sample, we seem to assume that we're using the same DataContext. Is this correct ? If so, does it mean that I need to code differently if I'm going to run the DataPortal on a remote machine than when I run it locally on the user's computer ?<br><br>I know I'm asking a lot of question. Blame it on my 3274th gray hair <img src="/emoticons/emotion-10.gif" alt="Embarrassed [:$]" /><br><br>Regards.<br><br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>raz0rf1sh replied on Monday, January 05, 2009</h2>Hi lukky!<br /><br />We also ran into some weird issues ... which I talked about in my post http://forums.lhotka.net/forums/thread/29300.aspx.<br /><br />We had to mark the update check to Never, we also had to allow NULL values, which don't really exist in our database, but we had to so we could reset certain values back to zero.  And we had to do a null check when we did our Fetch.  Everything works fine ... just seems hackish!</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Tuesday, January 06, 2009</h2>Hmm, i don't see anything odd.&nbsp; Maybe you do just need the update check set to Never. <br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>lukky replied on Tuesday, January 06, 2009</h2>Maybe, maybe not&nbsp; <img src="/emoticons/emotion-4.gif" alt="Stick out tongue [:P]" /><br><br>I wish I had time to investigate this.<br><br>Regards<br><br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>greengumby replied on Tuesday, January 13, 2009</h2><P>I had the same issues with LINQ and the update. Found out LINQ only updates fields that have changed.</P>
<P>For example</P>
<P>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; var data = new mm_V2.DAL.LINQ.Person.House()&nbsp; <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; { <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; IDHouse = ReadProperty&lt;Guid&gt;(IDHouseProperty) <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }; <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; data.rowversion = _rowversion; <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; mgr.DataContext.Houses.Attach(data);</P>
<P>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (IsSelfDirty)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; data.Description = ReadProperty&lt;string&gt;(DescriptionProperty);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; data.active = ReadProperty&lt;bool&gt;(ActiveProperty);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</P>
<P>So what was happening is the data.active field was initialized to false and then my ActiveProperty<BR>was false also.</P>
<P>When SubmitChanges was called LINQ looked at the field thought no change had happened and did not update this field. So this problem occured for me when setting data back to default values.</P>
<P><BR>Got around it my reloading the original values from db</P>
<P>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; var data = mgr.DataContext.Houses.Single<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (p =&gt; p.IDHouse == ReadProperty&lt;Guid&gt;(IDHouseProperty));<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; data.rowversion = _rowversion;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;<BR>&nbsp;&nbsp;OnMemberReading(data);</P>
<P><BR>Im taking an extra hit to the db but its not a real db intensive section so I am not concerned.</P>
<P><BR>&nbsp;</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>lukky replied on Wednesday, January 14, 2009</h2>Yes,<br><br>bool fields seem to be problematic when you have to Attach an entity back to the DataContext.<br><br>I ended up calling the DataContext.Attach(data, true);&nbsp; overload. The "true" forces the DataContext to see the entity as dirty, so it includes all the fields in the query.<br><br>Regards.<br></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
