<html><header><title>Need help for MobileProxy Configuration </title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Need help for MobileProxy Configuration </h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/12891.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>HK.Lee posted on Thursday, May 28, 2015</h2><p>Hi All,</p>
<p>In my WPF project with CSLA v 4.70, I configured mobileProxy same with Project tracker .</p>
<p>However, when I try to fetch some simple readonly list, Dataportal_fetch has never been touched. </p>
<p>On debugging,&nbsp;error was fired at following line of fetch method of mobileproxy.cs.</p>
<p>#if !NET40<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; response = await proxy.FetchAsync(request).ConfigureAwait(false);<br />#else</p>
<p>and&nbsp;&nbsp;stack trace&nbsp;shows </p>
<p>Csla.DataPortalClient.MobileProxy.&lt;Fetch&gt;d__8.MoveNext()&nbsp;file d:\DotNetApps\CNS\Source\Business\Csla\Csla\DataPortalClient\MobileProxy.cs:line 327</p>
<p>and inner error message says &#39; returned internal server error 500..&#39;</p>
<p>I tried&nbsp;both calling method of&nbsp; async and callback fetch, but&nbsp;had same error.</p>
<p>&nbsp;&nbsp; CNS.Business.Entity.LineProcessInfoList.GetLineProcessInfoList(new Business.Entity.LineProcessCriteria(true, 1), (o, args) =&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (args.Error == null)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; lines = args.Object;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; });</p>
<p>&nbsp;var list = await CNS.Business.Entity.LineProcessInfoList.GetLineProcessInfoListAsync(new Business.Entity.LineProcessCriteria(true, 1));</p>
<p>Pls give me any advise what I missed or share your experience. Following is each config.</p>
<p>app.config</p>
<p>&nbsp; &lt;appSettings&gt;<br />&nbsp;&nbsp;&nbsp; &lt;add key=&quot;CslaDataPortalProxy&quot; value=&quot;Csla.DataPortalClient.MobileProxy, Csla&quot;/&gt;<br />&nbsp;&nbsp;&nbsp; &lt;add key=&quot;CslaDataPortalUrl&quot; value=&quot;<a href="http://localhost:3969/slPortal.svc&quot;/">http://localhost:3969/slPortal.svc&quot;/</a>&gt;<br />&nbsp; &lt;/appSettings&gt;</p>
<p>web.config</p>
<p>&nbsp;&lt;appSettings&gt;<br />&nbsp;&nbsp;&nbsp; &lt;add key=&quot;CslaAuthentication&quot; value=&quot;Csla&quot; /&gt;<br />&nbsp; &lt;/appSettings&gt;<br />&nbsp; &lt;system.serviceModel&gt;<br />&nbsp;&nbsp;&nbsp; &lt;serviceHostingEnvironment multipleSiteBindingsEnabled=&quot;true&quot; /&gt;<br />&nbsp;&nbsp;&nbsp; &lt;services&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;service name=&quot;Csla.Server.Hosts.WcfPortal&quot; behaviorConfiguration=&quot;returnFaults&quot;&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;endpoint binding=&quot;wsHttpBinding&quot; bindingConfiguration=&quot;wsHttpBinding_IWcfPortal&quot;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; contract=&quot;Csla.Server.Hosts.IWcfPortal&quot; /&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/service&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;service name=&quot;Csla.Server.Hosts.Mobile.WcfPortal&quot; behaviorConfiguration=&quot;returnFaults&quot;&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;endpoint binding=&quot;basicHttpBinding&quot; bindingConfiguration=&quot;basicHttpBinding_IWcfPortal&quot;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; contract=&quot;Csla.Server.Hosts.Mobile.IWcfPortal&quot; /&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/service&gt;<br />&nbsp;&nbsp;&nbsp; &lt;/services&gt;<br />&nbsp;&nbsp;&nbsp; &lt;bindings&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;basicHttpBinding&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;binding name=&quot;basicHttpBinding_IWcfPortal&quot; maxReceivedMessageSize=&quot;2147483647&quot; maxBufferPoolSize=&quot;2147483647&quot;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; maxBufferSize=&quot;2147483647&quot;&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;readerQuotas maxBytesPerRead=&quot;2147483647&quot; maxArrayLength=&quot;2147483647&quot; maxStringContentLength=&quot;2147483647&quot;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; maxNameTableCharCount=&quot;2147483647&quot; maxDepth=&quot;2147483647&quot; /&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/binding&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/basicHttpBinding&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;wsHttpBinding&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;binding name=&quot;wsHttpBinding_IWcfPortal&quot; maxReceivedMessageSize=&quot;2147483647&quot;&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;readerQuotas maxBytesPerRead=&quot;2147483647&quot; maxArrayLength=&quot;2147483647&quot; maxStringContentLength=&quot;2147483647&quot;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; maxNameTableCharCount=&quot;2147483647&quot; maxDepth=&quot;2147483647&quot; /&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/binding&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/wsHttpBinding&gt;<br />&nbsp;&nbsp;&nbsp; &lt;/bindings&gt;<br />&nbsp;&nbsp;&nbsp; &lt;behaviors&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;serviceBehaviors&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;behavior name=&quot;returnFaults&quot;&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;serviceDebug includeExceptionDetailInFaults=&quot;true&quot; /&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/behavior&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/serviceBehaviors&gt;<br />&nbsp;&nbsp;&nbsp; &lt;/behaviors&gt;</p>
<p>Any advice would be highly appreciated.</p>
<p>TIA</p>
<p>HK.Lee</p>
<p>&nbsp;</p>
<p>&nbsp;</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>HK.Lee replied on Friday, May 29, 2015</h2><p>I found I missed to set Csla.ApplicationContext.User on debug as diffrently with silverlight, so added</p>
<p>Csla.ApplicationContext.User = new Csla.Security.UnauthenticatedPrincipal(); </p>
<p>at bootstrapper,however it shows another error at wcf channel&#39;s response.</p>
<p>When I remove all settings of system.web at web.config, it runs fine.</p>
<p>I didn&#39;t dig in which setting has an influene&nbsp;but now it&#39;s solved.</p>
<p>Pls refer if anyone who has same trouble like me.</p>
<p>HK.Lee</p>
<p>&nbsp;</p></div><div style='padding:0 15 3 15;background-color:lightgreen'><h2>JonnyBee replied on Saturday, May 30, 2015</h2><p>Hi,</p>
<p>It is a matter of configuration error in your web.config.</p>
<p>MobileProxy on the client is NOT compatible with WcfProxy on the serverside. You must use the corresponding MobilePortal on the server &nbsp;to make it work or use the WcPortal on the client.&nbsp;</p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
