<html><header><title>CSLA Light Serialization Woes</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>CSLA Light Serialization Woes</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/8242.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>solidgranite posted on Wednesday, December 30, 2009</h2>Hi All<br /><br />I've encountered a roadblock with CSLA Light.<br /><br />I need to serialize a dictionary (inside a Criteria object (I'm using it to store column/values for SQL filter) from CSLA Light to CSLA.NET.  I've used Paul Welter's XML Serializable Generic Dictionary for this purpose (http://weblogs.asp.net/pwelter34/archive/2006/05/03/444961.aspx)<br /><br />I've read in Rocky's book that WCF provides NetDataContractSerializer so that an exact clone of the original object graph can be sent over the wire.  It suggests I use the UseNetDataContract attribute provided by CSLA to tell WCF to use this alternative serializer.<br /><br />Problem is that MobileFormatter uses DataContractSerializer and hence my serializable dictionary isn't serialized correctly.<br /><br />I'm clearly missing something.  How are other people storing values for their SQL column filters in their Criteria objects so that they can be successfully serialized from Silverlight to .NET?<br /><br />Thanks  in advance!<br /><br />Paul</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Saturday, January 02, 2010</h2><P>MobileFormatter sort of uses the DCS, but first it converts your object model into a set of data transfer objects. This is necessary, because there's no workable private reflection in Silverlight, so it isn't normally possible to serialize private field values in objects.</P>
<P>I have some blog posts on this topic, which you can find from the FAQ</P>
<P><A href="http://www.lhotka.net/cslanet/faq/SilverlightFaq.ashx">http://www.lhotka.net/cslanet/faq/SilverlightFaq.ashx</A></P>
<P>In the end this means that MobileFormatter only works with primitive values, values we special-cased (like Decimal, Guid, etc) and types that implement Csla.Core.IMobileObject.</P>
<P>Because it can be hard to implement IMobileObject correctly, there are several base types in Csla.Core that already do the work for you, including MobileObject, MobileList and MobileDictionary.</P>
<P>You may be able to use MobileDictionary for your purposes - or at least use its code as a template to enhance your existing dictionary type so it implements IMobileObject.</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>solidgranite replied on Wednesday, January 06, 2010</h2>Hi Rocky<br><br>Thanks for the information about the Csla.Core classes.<br><br>MobileDictionary did the trick!<br><br>Cheers<br><br>Paul<br></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
