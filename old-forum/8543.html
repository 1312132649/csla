<html><header><title>How to use an object as FactoryParameter in a (xaml) CslaDataProvider </title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>How to use an object as FactoryParameter in a (xaml) CslaDataProvider </h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/8543.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>Peer posted on Wednesday, February 17, 2010</h2><p>Hello Everyone,</p>
<p>I have a SL testproject&nbsp; which I use for learning purposes. In the Xaml page for locating an address I&#39;v two CslaDataProviders:</p>
<p>1: AddressListData<br />2: AddressListCriteria (BusinessBase with 7 criteria properties)</p>
<p>there are also Textbox controls which are bound to properties of dataprovider 2 to enter the individual criteria.</p>
<p>When I click a button, the refresh() of the static resource #1 is invoked (by invokemethod), this works fine, but no parameters (criteriaobject) is transfered to the factorymethod (getAddressList(AdressListCriteria))&nbsp;and thereby not to the&nbsp;dataportal, it is simply not implemented yet...</p>
<p>&lt;csla:CslaDataProvider x:Key=&quot;AddressListData&quot;&nbsp;&nbsp;&nbsp; &lt;------dataprovider #1<br />ObjectType=&quot;TmnOsis.Eos.Business.AddressList, Business&quot;<br />FactoryMethod=&quot;GetAddressList&quot; <br />IsInitialLoadEnabled=&quot;False&quot;<br />DataChangedHandler=&quot;{StaticResource DataErrorDialog}&quot;&gt;<br />&nbsp;&lt;csla:CslaDataProvider.FactoryParameters&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;s:Object&gt;???????????&lt;/s:Object&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;------ How should I implement the object in dataprovider #2 <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/csla:CslaDataProvider.FactoryParameters&gt;<br />&lt;/csla:CslaDataProvider&gt;</p>
<p>&nbsp;</p>
<p>Questions:</p>
<p>1:<br />How do I implement the Factoryparameter in the #1 dataprovider to use #2 as parameter?</p>
<p>2:<br />Is this the proper way to do this or is there a better strategy. I even thougt of implementing the criteria properties in the AddressList class so the whole thing is build in just one class instead of two. I had to redefine the AddressLictCriteria from &quot;CriteriaBase&quot; (which worked fine in my unittest) to &quot;BusinessBase&quot; because of the csla serialization strategy (crossing tiers) in Csla for SilverLight. The AddresList itself has no additional properties so why not combine it in the AddressList ? I&nbsp;Guess this combining is a bad idea because of the&nbsp;OOP philosofy&nbsp;, or are there other reasons&nbsp;not to&nbsp;combine this functionality ?</p>
<p>&nbsp;Thank you!<br />Peer</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Wednesday, February 17, 2010</h2><p>This is a hard problem that has no easy answer. I think this is one reason everyone is abandoning the data provider model in favor of the MVVM pattern. Not that MVVM necessarily makes the answer trivial - but it is far easier than trying to get it to work with a data provider.</p>
<p>Basically you need to figure out how you are going to navigate to the next form. Then decide how you create that form. Then decide how you want to pass your parameters to that form (through a constructor, an Initialize() method or something). Then in the code-behind for the second form, take the parameters and use them to load the FactoryParameters collection of the data provider.</p>
<p>It is not ideal, but it can be done.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Peer replied on Thursday, February 18, 2010</h2><p>Thank you for your reply :) , though I do not understand the full meaning of your answer. Actualy I&#39;m a bit astonished why it is so hard to accomplish surch a simple (functional) concept.</p>
<p>The first remark is very important for me, because I&#39;m in a POC process and this&nbsp; sets me on the right (MVVM)&nbsp;track BUT&nbsp;not knowing why and where I&#39;m going to. I will&nbsp; read a few MVVM consideration articles today.&nbsp;By the way:&nbsp; How should I interpred this 6 months old &nbsp;thread (<a href="http://forums.lhotka.net/forums/p/7187/34360.aspx#34360">http://forums.lhotka.net/forums/p/7187/34360.aspx#34360</a>) about MVVM. What has changed the importance of this pattern?</p>
<p>About the problem:<br />After searching the forum again I found an unaswered thread about excacly the same issue:<br /><a href="http://forums.lhotka.net/forums/p/7769/37044.aspx#37044">http://forums.lhotka.net/forums/p/7769/37044.aspx#37044</a><br />I do not want to navigate&nbsp;&nbsp;to a next page, I simply want to refresh the current form by &nbsp;refreshing (requery) dataprovider 1&nbsp;&nbsp;using the properties in dataprovider 2&nbsp;as searchcriteria. (dataprovider 2 is an BuisinessBase object containing 7 optional properties to find an address). I&nbsp;Instantiated this object in&nbsp;dataprovider 2 and bound the properties to textboxes.</p>
<p>What I&#39;m intending to&nbsp;do for now&nbsp;is remove dataprovider 2,&nbsp;extend the GetaddressList() factory Method(dataprovider 1)&nbsp;with 7 parameters, and declare these parameters in the dataprovider1 as Factoryparameters.&nbsp;In the factorymethod I will create a new AddressListCriteria object and fill the properties with the parametervalues. </p>
<p>Do you think my thoughs are in line with the Csla concept?</p>
<p>Thank you :)<br />Peer</p>
<p>&nbsp;</p></div><div style='padding:0 15 3 15;background-color:lightgreen'><h2>RockfordLhotka replied on Thursday, February 18, 2010</h2><p>In WPF you can use &quot;reverse binding&quot; to bind something like a TextBox.Text property to a factory parameter property. This concept doesn&#39;t exist in SL. I think it doesn&#39;t exist in SL because the data provider concept doesn&#39;t really exist in SL - we created it in CSLA because I thought the data provider was the way Microsoft was going.</p>
<p>The SL data provider was specifically designed to look like the WPF data
 provider - because Microsoft defined what a data provider would look 
like and how it would work in WPF. The factory parameters are simply passed as parameters to the factory method. This is like the WPF ObjectDataProvider that passes the parameters to the constructor.</p>
<p>However, and this is important, Microsoft is not going with the data provider concept. The Visual Studio 2010 XAML designer doesn&#39;t use or support the data provider concept.</p>
<p>I never thought the WPF answer was very good, but of course the lack of <i>any answer</i> in SL is worse. The only real-world answer in WPF or Silverlight though, is to use code-behind to set the factory parameter list.</p>
<p>I am considering removing the data provider types in CSLA 4. This will break people using the data provider - but these types are increasingly useless and misleading, given that Microsoft isn&#39;t using this concept and so it will slowly become more and more trouble over time.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Peer replied on Friday, February 19, 2010</h2><p>Rocky, thanks for the streight and complete answer, It&#39;s appreciated and sets me on the right track. Maybe it is an Idea to inform the community (more specific: people who are learnig&nbsp;with&nbsp;the Video&#39;s)&nbsp;about this possible step. I have to focus on another technique.&nbsp;You gave me a hint (&nbsp;MVVM) in an earlier reply so I&#39;ll go on whith that. Two steps ahead, 1 step back ! ... Is the MVVMExperimentSL solution a good example using this pattern ? I read the thread about the videos so Maybe I should be patient and concentrate for now&nbsp;on Csla core techniques...</p>
<p>If you step back&nbsp; and have an overview of the whole SL development it is pretty obvious it is far from mature. Techniques will be exchanged in the next years and we will be running and cleaning up the mess.&nbsp;(It probably&nbsp;keeps us&nbsp;in good shape ;) )</p>
<p>Peer</p></div><div style='padding:0 15 3 15;background-color:lightgreen'><h2>RockfordLhotka replied on Friday, February 19, 2010</h2><p>Magenic has some customers (2 specifically that I&#39;ve seen) who are very far along with large Silverlight apps. Very cool, very large apps - fun to see!</p>
<p>And there are quite a lot of organizations with WPF apps - and they have the exact same challenges in terms of data provider vs MVVM vs other options.</p>
<p>I guess the point is that the lack of &quot;best practices&quot; understanding applies to both SL and WPF, and exists because relatively few people have been using either technology until recently. It wasn&#39;t until 2009 that serious interest in these technologies started to occur, and I think in 2010 there&#39;ll be a veritable explosion of interest.</p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
