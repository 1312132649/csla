<html><header><title>ComponentModel.DataAnnotations - stopped working?</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>ComponentModel.DataAnnotations - stopped working?</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/9568.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>Q Johnson posted on Thursday, September 23, 2010</h2><p>I&#39;ve been having uneven (and now, none at all) success with these.</p>
<p>I&#39;ve got all my properties decorated with the Required attribute and I call CheckRules at the end of my Child_Fetch routine.&nbsp; I haven&#39;t added any Validation Rules because my understanding is that they are unnecessary for this simple kind of validation to work (and this is somewhat verified by my early testing).</p>
<p>When I first did this, my Parent Object&#39;s IsValid was set False and I was able to iterate the BrokenRules collection for all except the first member of the child collection (which actually had the most validation failures, oddly enough).&nbsp; So I thought I was enjoying some real success and only needed to do a little tweaking.&nbsp; </p>
<p>But I made some changes to my code generation template, and although the output looks good to my viewing, NO validation failure are being caught in spite of the fact that all four members of the collection have at least one problem.&nbsp; Interrogation of the IsValid property for the parent and each child returns True every time.</p>
<p>So now I don&#39;t know why it won&#39;t work now OR why it DID work before.&nbsp; Any ideas?</p>
<p>Thanks.</p></div><div style='padding:0 15 3 15;background-color:lightgreen'><h2>RockfordLhotka replied on Thursday, September 23, 2010</h2><p>On thing to keep in mind is that the attributes do have to be merged into the CSLA business rules subsystem. This is automatically handled by the base AddBusinessRules() method, but if you override this method and don&#39;t call the base, then the attributes won&#39;t work as expected (or at all).</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Q Johnson replied on Thursday, September 23, 2010</h2><p>If I understand you correctly, as long as I am not overriding AddBussinessRules, this should be working, right?</p>
<p>I don&#39;t have a single line of code in that method.&nbsp; Should I be calling the base explicitly? ( I wasn&#39;t doing that when&nbsp;this was briefly working.)</p>
<p>If it had NEVER worked, it wouldn&#39;t be nearly as frustrating! &lt;g&gt;</p></div><div style='padding:0 15 3 15;background-color:lightgreen'><h2>Marjon1 replied on Thursday, September 23, 2010</h2><p>If in your template you have&nbsp;overridden AddBusinessRules, <b>your first line should be MyBase.AddBusinessRules()</b> otherwise you will run problems with the DataAnnotation rules not working. Don&#39;t forget your own base class for BusinssBase, if you have done anything in there as well.</p>
<p>&nbsp;</p></div><div style='padding:0 15 3 15;background-color:lightgreen'><h2>RockfordLhotka replied on Friday, September 24, 2010</h2><p>If you don&#39;t override the method, then it should work just fine.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Q Johnson replied on Friday, September 24, 2010</h2><p>Unfortunately that isn&#39;t the case.&nbsp; I am not overriding and it isn&#39;t working.</p>
<p>I&#39;m pulling about 30 property values for the four EditableChild document objects&nbsp;that are pulled&nbsp;out of a database from various related tables&nbsp;by the query in my EditableRootList parent object.&nbsp; </p>
<p>I&#39;m marking ALL the properties as required.&nbsp; And I&#39;m calling CheckRules in the Child_Fetch routine after the values get loaded.</p>
<p>The first of the four documents is missing about 20 of the items.&nbsp; The others are missing about half a dozen.</p>
<p>And yet ERL&nbsp;parent IsValid and so are each individual EC.&nbsp; I can access the properties and determine that they are empty, but they don&#39;t trigger the creation of any BrokenRule objects, which I would just LOVE to display for the user so they can go back to the salt mines and re-work their data entry.</p>
<p>I&#39;ll keep slugging away.&nbsp; But I&#39;m sure hoping for some inspiration from you veterans of the CSLA 3.8.x world.&nbsp; (Reminder info to save you from scrolling up: VS 2008, VB.NET, SQL 2008, CSLA 3.8.3, Win7 64-bit.</p>
<p>Have a great weekend.&nbsp; If I solve this today, I will, too &lt;g&gt;.</p>
<p>&nbsp;</p></div><div style='padding:0 15 3 15;background-color:lightgreen'><h2>JonnyBee replied on Friday, September 24, 2010</h2><p>HI,</p>
<p>Can you post som code sample for us. Hard to figure out what is happening in your objects without seeing the code.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Q Johnson replied on Friday, September 24, 2010</h2><p>I think I&#39;ve got it now.&nbsp; My Validation Rules section used to have the code in the method commented out but the declaration was still there!&nbsp; I didn&#39;t realize that by just have a declaration of an empty method that I was overriding that base method.&nbsp; When I commented out the declaration (actually someone showed me this) it all started working just fine.</p>
<p>So, as you all seem to have known somehow, I WAS overriding, even though I thought I wasn&#39;t.&nbsp; I was telling the truth when I said I didn&#39;t have any code in the routine.&nbsp; But I did have it declared.&nbsp; </p>
<p>A buddy of mine calls these BPEs.&nbsp; bone-headed programmer errors.</p>
<p>Thanks for following up and have a great weekend all!!!</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
