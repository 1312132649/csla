<html><header><title>CSLA 1.5x for .Net2.0 listchaged/isdirty events remoting vs. non-remoting</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>CSLA 1.5x for .Net2.0 listchaged/isdirty events remoting vs. non-remoting</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/1832.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>Skeeboe posted on Saturday, November 25, 2006</h2>Ugh!<br>I'm using <span id="ctl00_ContentPlaceHolder1_BodyLabel"></span><a href="http://www.lhotka.net/Articles.aspx?id=9afdbf7e-661b-478a-a599-9195c2788566">CSLA .NET version 1.51 for .NET 2.0 RC0</a> as my base for all our work. We're looking to start Csla 2.1.1 with our newest project but for now I'm using 1.51 for .NET 2.0.<br><br>I have two events in a BO that listen for the isdirtychanged event (for the root) and the listchanged event for any of the children. If virtually any property changes in the root or children, I run a calculate function that returns an updated payment. This works great until we decided we want to look at remoting again.<br><br>With remoting turned on the events DO NOT FIRE on the client side. From testing I can see they do fire on the server side, but that doesn't help much.<br><br>I looked at 1.52 and 1.53 (which are still for .Net 1.1) and they mention "<span id="ctl00_ContentPlaceHolder1_BodyLabel">This is a minor update
to verison 1.51 to fix some bugs with cascading events from child
objects up through their parent collection." and 1.53 </span><span id="ctl00_ContentPlaceHolder1_BodyLabel">"</span><span id="ctl00_ContentPlaceHolder1_BodyLabel"><span id="lblText">This
is a minor update to version 1.52 to fix some bugs with cascading
events from child objects and serialization." </span></span><span id="ctl00_ContentPlaceHolder1_BodyLabel">Again these are based on .Net 1.1 and even still have the old c# code in there for bindingbase and bindingcollectionbase.<br><br></span><span id="ctl00_ContentPlaceHolder1_BodyLabel"><span id="lblText">I looked through previous forum messages and saw http://forums.lhotka.net/forums/thread/4084.aspx. That is for Csla 2.0.3 though and doesn't address the same issue. <br><br>Does anyone have any code to address this issue? I appreciate all your help.<br></span></span></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Skeeboe replied on Monday, November 27, 2006</h2>Rocky, Anyone? Any help would be appreciated.<br><br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JonM replied on Monday, November 27, 2006</h2>I'm using the CSLA.net 1.5x on .NET 2.0.&nbsp; First of all I would strongly recommend making sure you are using the newest version 1.53.&nbsp; Are you using the UpdateParent code blocks in your collections?</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Skeeboe replied on Tuesday, November 28, 2006</h2>I thought 1.53 was only for .net 1.1? I'm not familiar with the UpdateParent code. <br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Skeeboe replied on Monday, December 04, 2006</h2>I downloaded 1.53 but its still appears to only be a .NET 1.1 product. Is there a 1.53 version set to work with .NET 2.0?<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Tuesday, December 05, 2006</h2>Version 1.53 should work just fine with .Net 2.0.&nbsp; <br><br>Does it no longer compile?<br><br>Per your original problem, it sounds like you need to hook up the events again after deserialization.&nbsp; In 2.x you override OnDeserialized... in 1.53 it looks like you can override Deserialized.<br><br>So override it and be sure to call base.Deserialized first, and then hook up your event handlers again.<br><br>HTH<br>Andy<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Skeeboe replied on Tuesday, December 05, 2006</h2>When you download the 1.53 zip file and click on the solution, its in .NET 1.1 format, so .NET 2.0 wants to convert it. Whereas if you download the 1.51 for&nbsp; for .NET RC0 (or Beta2) the solution is already in 2.0 format. Also the 2.0 versions don't have the C# code for binding, it was updated for the .Net2.0 style of binding. That of course is what I'm having an issue with. The listchanged and isdirty events fire in remoting but only on the server.<br><br>Where can I see code that I could use as a guide for overriding OnDeserialized?<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Tuesday, December 05, 2006</h2>That's ok, just do the conversion.&nbsp; I actually tried the conversion this afternoon, and except for the web sample, everything went fine.&nbsp; Then it was just a matter of cleaning up the Obsoleted warnings (which is a good idea, because apparently GetEnumerator from some MSMQ class is buggy).<br><br>Overriding Deserialized is simple.&nbsp; Here's a sample that illistrates the concept (Event is the actual event you need to rehook).<br><br>override ISerializationNotification.Deserialized() {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; base.Deserialzed();<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if ( MyChild != null ) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; MyChild.Event += new EventHandler( MyChild_Event );<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>}<br></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
