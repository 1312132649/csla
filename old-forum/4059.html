<html><header><title>How do I get the framework to save this?</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>How do I get the framework to save this?</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/4059.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>ataylorm posted on Tuesday, December 18, 2007</h2><P>Alrighty,&nbsp; </P>
<P>So here I am without sleep for 2 days and I still can't figure this out.&nbsp; So I'm back to beg for a little help.</P>
<P>So I have a User class, and the user class has a sub class Address which is created as a list Addresses.&nbsp; This allows User to have 1 or 50 different addresses on file.</P>
<P>Due to speed requirements for the system we are saving the addresses in the database as such</P>
<P><STRONG>User Table:</STRONG></P>
<P>GUID<BR>TimeStamp<BR><BR><STRONG>UserAddresses Table:</STRONG></P>
<P>UserGUID<BR>AddressGUID<BR>FieldID<BR>FieldValue<BR>TimeStamp</P>
<P>So what happens here is that when they save an address, we get a timestamp (unix style 32 bit) which we then update user with, and instead of updating records in UserAddresses we insert all new records (for all fields, not just the edited ones) that have the updated timestamp and a clean up processes goes in and deletes the old records after 90 days (gives us&nbsp;a live history type as well as performance boost).</P>
<P>The problem I am having is that if say someone changes the street, and zipcode for an address, I want to only insert all new records once, not once for each edit.</P>
<P>Any ideas how I do this?&nbsp; I can send a copy of the code if you need.</P>
<P>Thanks!</P>
<P>Andrew</P>
<P>&nbsp;</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ataylorm replied on Tuesday, December 18, 2007</h2><P><FONT color=#0000ff size=2>Here is a look at the specific source code in question.</FONT></P>
<P><FONT color=#0000ff size=2></FONT>&nbsp;</P>
<P><FONT color=#0000ff size=2>using</FONT><FONT size=2> System;<BR></FONT><FONT color=#0000ff size=2>using</FONT><FONT size=2> System.Collections.Generic;<BR></FONT><FONT color=#0000ff size=2>using</FONT><FONT size=2> Csla;<BR></FONT><FONT color=#0000ff size=2>using</FONT><FONT size=2> Csla.Data;<BR></FONT><FONT color=#0000ff size=2>using</FONT><FONT size=2> Csla.Validation;<BR></FONT><FONT color=#0000ff size=2>using</FONT><FONT size=2> ProjectUnicorn.Library.Utilities;<BR></FONT><FONT color=#0000ff size=2>using</FONT><FONT size=2> System.Data;<BR></FONT><FONT color=#0000ff size=2>using</FONT><FONT size=2> UnicornData;<BR></FONT><FONT color=#0000ff size=2>namespace</FONT><FONT size=2> ProjectUnicorn.Library<BR>{<BR>[</FONT><FONT color=#2b91af size=2>Serializable</FONT><FONT size=2>()]<BR></FONT><FONT color=#0000ff size=2>public</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>class</FONT><FONT size=2> </FONT><FONT color=#2b91af size=2>User</FONT><FONT size=2> : Csla.BusinessBase&lt;User&gt;<BR>{<BR></FONT><FONT color=#0000ff size=2>#region</FONT><FONT size=2> Properties<BR></FONT><FONT color=#008000 size=2>//Do we need to have any comments in property declarations?<BR></FONT><FONT color=#0000ff size=2>private</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>string</FONT><FONT size=2> _UserID = </FONT><FONT color=#a31515 size=2>""</FONT><FONT size=2>;<BR></FONT><FONT color=#0000ff size=2>private</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>string</FONT><FONT size=2> _UserName = </FONT><FONT color=#a31515 size=2>""</FONT><FONT size=2>;<BR></FONT><FONT color=#0000ff size=2>private</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>string</FONT><FONT size=2> _Password = </FONT><FONT color=#a31515 size=2>""</FONT><FONT size=2>;<BR></FONT><FONT color=#0000ff size=2>private</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>string</FONT><FONT size=2> _FirstName = </FONT><FONT color=#a31515 size=2>""</FONT><FONT size=2>;<BR></FONT><FONT color=#0000ff size=2>private</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>string</FONT><FONT size=2> _LastName = </FONT><FONT color=#a31515 size=2>""</FONT><FONT size=2>;<BR></FONT><FONT color=#0000ff size=2>private</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>string</FONT><FONT size=2> _EmailAddress = </FONT><FONT color=#a31515 size=2>""</FONT><FONT size=2>;<BR></FONT><FONT color=#0000ff size=2>private</FONT><FONT size=2> SmartDate _BirthDate;<BR></FONT><FONT color=#0000ff size=2>private</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>int</FONT><FONT size=2> _Rolls = 0;<BR></FONT><FONT color=#0000ff size=2><BR>#region</FONT><FONT size=2> Get/Set<BR></FONT><FONT color=#0000ff size=2><BR>public</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>string</FONT><FONT size=2> UserID<BR>{<BR></FONT><FONT color=#0000ff size=2>&nbsp;&nbsp;&nbsp; &nbsp;get</FONT><FONT size=2> { </FONT><FONT color=#0000ff size=2>return</FONT><FONT size=2> _UserID; }<BR></FONT><FONT color=#0000ff size=2>&nbsp;&nbsp;&nbsp;&nbsp; set<BR></FONT><FONT size=2>&nbsp;&nbsp;&nbsp; {<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; _UserID = </FONT><FONT color=#0000ff size=2>value</FONT><FONT size=2>;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PropertyHasChanged(</FONT><FONT color=#a31515 size=2>"UserID"</FONT><FONT size=2>);<BR>&nbsp;&nbsp;&nbsp;}<BR>}<BR></FONT><FONT color=#0000ff size=2>public</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>string</FONT><FONT size=2> UserName<BR>{<BR></FONT><FONT color=#0000ff size=2>get</FONT><FONT size=2> { </FONT><FONT color=#0000ff size=2>return</FONT><FONT size=2> _UserName; }<BR></FONT><FONT color=#0000ff size=2>set<BR></FONT><FONT size=2>{<BR>_UserName = </FONT><FONT color=#0000ff size=2>value</FONT><FONT size=2>;<BR>PropertyHasChanged(</FONT><FONT color=#a31515 size=2>"UserName"</FONT><FONT size=2>);<BR>}<BR>}<BR></FONT><FONT color=#0000ff size=2>public</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>string</FONT><FONT size=2> Password<BR>{<BR></FONT><FONT color=#0000ff size=2>get</FONT><FONT size=2> { </FONT><FONT color=#0000ff size=2>return</FONT><FONT size=2> _Password; }<BR></FONT><FONT color=#0000ff size=2>set<BR></FONT><FONT size=2>{<BR>_Password = </FONT><FONT color=#0000ff size=2>value</FONT><FONT size=2>;<BR>PropertyHasChanged(</FONT><FONT color=#a31515 size=2>"Password"</FONT><FONT size=2>);<BR>}<BR>}<BR></FONT><FONT color=#0000ff size=2>public</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>string</FONT><FONT size=2> FirstName<BR>{<BR></FONT><FONT color=#0000ff size=2>get</FONT><FONT size=2> { </FONT><FONT color=#0000ff size=2>return</FONT><FONT size=2> _FirstName; }<BR></FONT><FONT color=#0000ff size=2>set<BR></FONT><FONT size=2>{<BR>_FirstName = </FONT><FONT color=#0000ff size=2>value</FONT><FONT size=2>;<BR>PropertyHasChanged(</FONT><FONT color=#a31515 size=2>"FirstName"</FONT><FONT size=2>);<BR>}<BR>}<BR></FONT><FONT color=#0000ff size=2>public</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>string</FONT><FONT size=2> LastName<BR>{<BR></FONT><FONT color=#0000ff size=2>get</FONT><FONT size=2> { </FONT><FONT color=#0000ff size=2>return</FONT><FONT size=2> _LastName; }<BR></FONT><FONT color=#0000ff size=2>set<BR></FONT><FONT size=2>{<BR>_LastName = </FONT><FONT color=#0000ff size=2>value</FONT><FONT size=2>;<BR>PropertyHasChanged(</FONT><FONT color=#a31515 size=2>"LastName"</FONT><FONT size=2>);<BR>}<BR>}<BR></FONT><FONT color=#0000ff size=2>public</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>string</FONT><FONT size=2> EmailAddress<BR>{<BR></FONT><FONT color=#0000ff size=2>get</FONT><FONT size=2> { </FONT><FONT color=#0000ff size=2>return</FONT><FONT size=2> _EmailAddress; }<BR></FONT><FONT color=#0000ff size=2>set<BR></FONT><FONT size=2>{<BR>_EmailAddress = </FONT><FONT color=#0000ff size=2>value</FONT><FONT size=2>;<BR>PropertyHasChanged(</FONT><FONT color=#a31515 size=2>"EmailAddress"</FONT><FONT size=2>);<BR>}<BR>}<BR></FONT><FONT color=#0000ff size=2>public</FONT><FONT size=2> SmartDate BirthDate<BR>{<BR></FONT><FONT color=#0000ff size=2>get</FONT><FONT size=2> { </FONT><FONT color=#0000ff size=2>return</FONT><FONT size=2> _BirthDate; }<BR></FONT><FONT color=#0000ff size=2>set<BR></FONT><FONT size=2>{<BR>_BirthDate = </FONT><FONT color=#0000ff size=2>value</FONT><FONT size=2>;<BR>PropertyHasChanged(</FONT><FONT color=#a31515 size=2>"BirthDate"</FONT><FONT size=2>);<BR>}<BR>}<BR></FONT><FONT color=#0000ff size=2>public</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>int</FONT><FONT size=2> Rolls<BR>{<BR></FONT><FONT color=#0000ff size=2>get</FONT><FONT size=2> { </FONT><FONT color=#0000ff size=2>return</FONT><FONT size=2> _Rolls; }<BR></FONT><FONT color=#0000ff size=2>set<BR></FONT><FONT size=2>{<BR>_Rolls = </FONT><FONT color=#0000ff size=2>value</FONT><FONT size=2>;<BR>PropertyHasChanged(</FONT><FONT color=#a31515 size=2>"Rolls"</FONT><FONT size=2>);<BR>}<BR>}<BR>&nbsp;<BR></FONT><FONT color=#0000ff size=2>#endregion<BR>#endregion<BR>#region</FONT><FONT size=2> Subclasses<BR>[</FONT><FONT color=#2b91af size=2>Serializable</FONT><FONT size=2>()]<BR></FONT><FONT color=#0000ff size=2>public</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>class</FONT><FONT size=2> </FONT><FONT color=#2b91af size=2>UserAccount</FONT><FONT size=2> : User<BR>{<BR></FONT><FONT color=#0000ff size=2>#region</FONT><FONT size=2> Properties<BR></FONT><FONT color=#0000ff size=2>private</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>string</FONT><FONT size=2> _PhoneNumber = </FONT><FONT color=#a31515 size=2>""</FONT><FONT size=2>;<BR></FONT><FONT color=#0000ff size=2>private</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>string</FONT><FONT size=2> _MobileNumber = </FONT><FONT color=#a31515 size=2>""</FONT><FONT size=2>;<BR></FONT><FONT color=#0000ff size=2>private</FONT><FONT size=2> </FONT><FONT color=#2b91af size=2>List</FONT><FONT size=2>&lt;Address&gt; _addresses = </FONT><FONT color=#0000ff size=2>new</FONT><FONT size=2> </FONT><FONT color=#2b91af size=2>List</FONT><FONT size=2>&lt;Address&gt;();<BR></FONT><FONT color=#0000ff size=2>#region</FONT><FONT size=2> Get/Set<BR></FONT><FONT color=#0000ff size=2>public</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>string</FONT><FONT size=2> PhoneNumber<BR>{<BR></FONT><FONT color=#0000ff size=2>get</FONT><FONT size=2> { </FONT><FONT color=#0000ff size=2>return</FONT><FONT size=2> _PhoneNumber; }<BR></FONT><FONT color=#0000ff size=2>set<BR></FONT><FONT size=2>{<BR>_PhoneNumber = </FONT><FONT color=#0000ff size=2>value</FONT><FONT size=2>;<BR>PropertyHasChanged(</FONT><FONT color=#a31515 size=2>"PhoneNumber"</FONT><FONT size=2>);<BR>}<BR>}<BR></FONT><FONT color=#0000ff size=2>public</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>string</FONT><FONT size=2> MobileNumber<BR>{<BR></FONT><FONT color=#0000ff size=2>get</FONT><FONT size=2> { </FONT><FONT color=#0000ff size=2>return</FONT><FONT size=2> _MobileNumber; }<BR></FONT><FONT color=#0000ff size=2>set<BR></FONT><FONT size=2>{<BR>_MobileNumber = </FONT><FONT color=#0000ff size=2>value</FONT><FONT size=2>;<BR>PropertyHasChanged(</FONT><FONT color=#a31515 size=2>"MobileNumber"</FONT><FONT size=2>);<BR>}<BR>}<BR></FONT><FONT color=#0000ff size=2>public</FONT><FONT size=2> </FONT><FONT color=#2b91af size=2>List</FONT><FONT size=2>&lt;Address&gt; Addresses<BR>{<BR></FONT><FONT color=#0000ff size=2>get</FONT><FONT size=2> { </FONT><FONT color=#0000ff size=2>return</FONT><FONT size=2> _addresses; }<BR></FONT><FONT color=#0000ff size=2>set<BR></FONT><FONT size=2>{<BR>_addresses = </FONT><FONT color=#0000ff size=2>value</FONT><FONT size=2>;<BR>PropertyHasChanged(</FONT><FONT color=#a31515 size=2>"Addresses"</FONT><FONT size=2>);<BR>}<BR>}<BR></FONT><FONT color=#0000ff size=2>public</FONT><FONT size=2> Address getDefaultAddress()<BR>{<BR></FONT><FONT color=#0000ff size=2>foreach</FONT><FONT size=2> (Address addr </FONT><FONT color=#0000ff size=2>in</FONT><FONT size=2> _addresses)<BR>{<BR></FONT><FONT color=#0000ff size=2>if</FONT><FONT size=2> (addr.IsDefault)<BR></FONT><FONT color=#0000ff size=2>return</FONT><FONT size=2> addr;<BR>}<BR></FONT><FONT color=#0000ff size=2>return</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>null</FONT><FONT size=2>;<BR>}<BR></FONT><FONT color=#0000ff size=2>#endregion<BR>#endregion<BR>#region</FONT><FONT size=2> Methods<BR>&nbsp;<BR></FONT><FONT color=#0000ff size=2>#endregion<BR>#region</FONT><FONT size=2> Addresses<BR></FONT><FONT color=#0000ff size=2>public</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>class</FONT><FONT size=2> </FONT><FONT color=#2b91af size=2>Address</FONT><FONT size=2> : UserAccount<BR>{<BR></FONT><FONT color=#0000ff size=2>public</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>override</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>string</FONT><FONT size=2> ToString()<BR>{<BR></FONT><FONT color=#0000ff size=2>string</FONT><FONT size=2> tmp = _address1;<BR></FONT><FONT color=#0000ff size=2>if</FONT><FONT size=2> (_address2 != </FONT><FONT color=#0000ff size=2>null</FONT><FONT size=2>)<BR>{<BR>tmp += (</FONT><FONT color=#a31515 size=2>"\r\n"</FONT><FONT size=2> + _address2);<BR>}<BR></FONT><FONT color=#0000ff size=2>if</FONT><FONT size=2> (_address3 != </FONT><FONT color=#0000ff size=2>null</FONT><FONT size=2>)<BR>{<BR>tmp += (</FONT><FONT color=#a31515 size=2>"\r\n"</FONT><FONT size=2> + _address3);<BR>} tmp += (</FONT><FONT color=#a31515 size=2>"\r\n"</FONT><FONT size=2> + _city);<BR>tmp += (</FONT><FONT color=#a31515 size=2>", "</FONT><FONT size=2> + _state);<BR>tmp += (</FONT><FONT color=#a31515 size=2>" "</FONT><FONT size=2> + _zipcode);<BR>tmp += (</FONT><FONT color=#a31515 size=2>"\r\nIs Default: "</FONT><FONT size=2> + _isDefault);<BR></FONT><FONT color=#0000ff size=2>return</FONT><FONT size=2> tmp;<BR>}<BR></FONT><FONT color=#0000ff size=2>#region</FONT><FONT size=2> Address Properties<BR></FONT><FONT color=#0000ff size=2>private</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>string</FONT><FONT size=2> _addressname;<BR></FONT><FONT color=#0000ff size=2>private</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>string</FONT><FONT size=2> _address1;<BR></FONT><FONT color=#0000ff size=2>private</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>string</FONT><FONT size=2> _address2;<BR></FONT><FONT color=#0000ff size=2>private</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>string</FONT><FONT size=2> _address3;<BR></FONT><FONT color=#0000ff size=2>private</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>string</FONT><FONT size=2> _city;<BR></FONT><FONT color=#0000ff size=2>private</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>string</FONT><FONT size=2> _state;<BR></FONT><FONT color=#0000ff size=2>private</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>string</FONT><FONT size=2> _zipcode;<BR></FONT><FONT color=#0000ff size=2>private</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>bool</FONT><FONT size=2> _isDefault = </FONT><FONT color=#0000ff size=2>false</FONT><FONT size=2>;<BR>&nbsp;<BR></FONT><FONT color=#0000ff size=2>public</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>string</FONT><FONT size=2> AddressName<BR>{<BR></FONT><FONT color=#0000ff size=2>get</FONT><FONT size=2> { </FONT><FONT color=#0000ff size=2>return</FONT><FONT size=2> _addressname; }<BR>}<BR></FONT><FONT color=#0000ff size=2>public</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>string</FONT><FONT size=2> Address1<BR>{<BR></FONT><FONT color=#0000ff size=2>get</FONT><FONT size=2> { </FONT><FONT color=#0000ff size=2>return</FONT><FONT size=2> _address1; }<BR></FONT><FONT color=#0000ff size=2>set<BR></FONT><FONT size=2>{<BR>_address1 = </FONT><FONT color=#0000ff size=2>value</FONT><FONT size=2>;<BR>PropertyHasChanged(</FONT><FONT color=#a31515 size=2>"Address1"</FONT><FONT size=2>);<BR>}<BR>}<BR></FONT><FONT color=#0000ff size=2>public</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>string</FONT><FONT size=2> Address2<BR>{<BR></FONT><FONT color=#0000ff size=2>get</FONT><FONT size=2> { </FONT><FONT color=#0000ff size=2>return</FONT><FONT size=2> _address2; }<BR></FONT><FONT color=#0000ff size=2>set<BR></FONT><FONT size=2>{<BR>_address2 = </FONT><FONT color=#0000ff size=2>value</FONT><FONT size=2>;<BR>PropertyHasChanged(</FONT><FONT color=#a31515 size=2>"Address2"</FONT><FONT size=2>);<BR>}<BR>}<BR></FONT><FONT color=#0000ff size=2>public</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>string</FONT><FONT size=2> Address3<BR>{<BR></FONT><FONT color=#0000ff size=2>get</FONT><FONT size=2> { </FONT><FONT color=#0000ff size=2>return</FONT><FONT size=2> _address3; }<BR></FONT><FONT color=#0000ff size=2>set<BR></FONT><FONT size=2>{<BR>_address3 = </FONT><FONT color=#0000ff size=2>value</FONT><FONT size=2>;<BR>PropertyHasChanged(</FONT><FONT color=#a31515 size=2>"Address3"</FONT><FONT size=2>);<BR>}<BR>}<BR></FONT><FONT color=#0000ff size=2>public</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>string</FONT><FONT size=2> City<BR>{<BR></FONT><FONT color=#0000ff size=2>get</FONT><FONT size=2> { </FONT><FONT color=#0000ff size=2>return</FONT><FONT size=2> _city; }<BR></FONT><FONT color=#0000ff size=2>set<BR></FONT><FONT size=2>{<BR>_city = </FONT><FONT color=#0000ff size=2>value</FONT><FONT size=2>;<BR>PropertyHasChanged(</FONT><FONT color=#a31515 size=2>"City"</FONT><FONT size=2>);<BR>}<BR>}<BR></FONT><FONT color=#0000ff size=2>public</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>string</FONT><FONT size=2> State<BR>{<BR></FONT><FONT color=#0000ff size=2>get</FONT><FONT size=2> { </FONT><FONT color=#0000ff size=2>return</FONT><FONT size=2> _state; }<BR></FONT><FONT color=#0000ff size=2>set<BR></FONT><FONT size=2>{<BR>_state = </FONT><FONT color=#0000ff size=2>value</FONT><FONT size=2>;<BR>PropertyHasChanged(</FONT><FONT color=#a31515 size=2>"State"</FONT><FONT size=2>);<BR>}<BR>}<BR></FONT><FONT color=#0000ff size=2>public</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>string</FONT><FONT size=2> Zipcode<BR>{<BR></FONT><FONT color=#0000ff size=2>get</FONT><FONT size=2> { </FONT><FONT color=#0000ff size=2>return</FONT><FONT size=2> _zipcode; }<BR></FONT><FONT color=#0000ff size=2>set<BR></FONT><FONT size=2>{<BR>_zipcode = </FONT><FONT color=#0000ff size=2>value</FONT><FONT size=2>;<BR>PropertyHasChanged(</FONT><FONT color=#a31515 size=2>"Zipcode"</FONT><FONT size=2>);<BR>}<BR>}<BR></FONT><FONT color=#0000ff size=2>public</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>bool</FONT><FONT size=2> IsDefault<BR>{<BR></FONT><FONT color=#0000ff size=2>get</FONT><FONT size=2> { </FONT><FONT color=#0000ff size=2>return</FONT><FONT size=2> _isDefault; }<BR></FONT><FONT color=#0000ff size=2>set<BR></FONT><FONT size=2>{<BR>_isDefault = </FONT><FONT color=#0000ff size=2>value</FONT><FONT size=2>;<BR>PropertyHasChanged(</FONT><FONT color=#a31515 size=2>"IsDefaultAddress"</FONT><FONT size=2>);<BR>}<BR>}<BR></FONT><FONT color=#0000ff size=2>#endregion</FONT><FONT size=2> Address Properties<BR>}<BR>&nbsp;<BR></FONT><FONT color=#0000ff size=2>#endregion</FONT><FONT size=2> Addresses<BR>}<BR>&nbsp;<BR></FONT><FONT color=#0000ff size=2>#region</FONT><FONT size=2> Business Methods<BR></FONT><FONT color=#008000 size=2>/* <BR>* The Business Methods region will contain the methods that are used by <BR>* UI code (or other client-level code) to interact with the business <BR>* object. This includes any properties that allow retrieval or changing <BR>* of values in the object, as well as methods that operate on the object's <BR>* data to perform business processing.<BR>*/<BR></FONT><FONT size=2></FONT><FONT color=#0000ff size=2>private</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>int</FONT><FONT size=2> _id = 0;<BR></FONT><FONT color=#0000ff size=2>private</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>byte</FONT><FONT size=2>[] _timestamp = </FONT><FONT color=#0000ff size=2>new</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>byte</FONT><FONT size=2><img src="/emoticons/emotion-29.gif" alt="Music [8]" />;<BR>[System.ComponentModel.DataObjectField(</FONT><FONT color=#0000ff size=2>true</FONT><FONT size=2>, </FONT><FONT color=#0000ff size=2>true</FONT><FONT size=2>)]<BR></FONT><FONT color=#0000ff size=2>public</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>int</FONT><FONT size=2> Id<BR>{<BR>[System.Runtime.CompilerServices.</FONT><FONT color=#2b91af size=2>MethodImpl</FONT><FONT size=2>(System.Runtime.CompilerServices.</FONT><FONT color=#2b91af size=2>MethodImplOptions</FONT><FONT size=2>.NoInlining)]<BR></FONT><FONT color=#0000ff size=2>get<BR></FONT><FONT size=2>{<BR>CanReadProperty(</FONT><FONT color=#0000ff size=2>true</FONT><FONT size=2>);<BR></FONT><FONT color=#0000ff size=2>return</FONT><FONT size=2> _id;<BR>}<BR>}<BR></FONT><FONT color=#0000ff size=2>public</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>override</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>bool</FONT><FONT size=2> IsValid<BR>{<BR></FONT><FONT color=#0000ff size=2>get</FONT><FONT size=2> { </FONT><FONT color=#0000ff size=2>return</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>base</FONT><FONT size=2>.IsValid; }<BR></FONT><FONT color=#008000 size=2>// If this object contains child objects, then:<BR></FONT><FONT size=2></FONT><FONT color=#008000 size=2>// get { return base.IsValid &amp;&amp; [child object].IsValid; }<BR></FONT><FONT size=2>}<BR></FONT><FONT color=#0000ff size=2>public</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>override</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>bool</FONT><FONT size=2> IsDirty<BR>{<BR></FONT><FONT color=#0000ff size=2>get</FONT><FONT size=2> { </FONT><FONT color=#0000ff size=2>return</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>base</FONT><FONT size=2>.IsDirty; }<BR></FONT><FONT color=#008000 size=2>// If this object contains child objects, then:<BR></FONT><FONT size=2></FONT><FONT color=#008000 size=2>// get { return base.IsDirty || _assignments.IsDirty; }<BR></FONT><FONT size=2>}<BR></FONT><FONT color=#0000ff size=2>protected</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>override</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>object</FONT><FONT size=2> GetIdValue()<BR>{<BR></FONT><FONT color=#0000ff size=2>return</FONT><FONT size=2> _id;<BR>}<BR></FONT><FONT color=#0000ff size=2>public</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>bool</FONT><FONT size=2> CreateAccount(</FONT><FONT color=#0000ff size=2>string</FONT><FONT size=2> strUserName, </FONT><FONT color=#0000ff size=2>string</FONT><FONT size=2> strPassword, </FONT><FONT color=#0000ff size=2>string</FONT><FONT size=2> strEmailAddress, SmartDate dtDateOfBirth, </FONT><FONT color=#0000ff size=2>int</FONT><FONT size=2> intRoles)<BR>{<BR></FONT><FONT color=#0000ff size=2>return</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>true</FONT><FONT size=2>;<BR>}<BR></FONT><FONT color=#0000ff size=2>public</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>bool</FONT><FONT size=2> CheckUsernameAvailability(</FONT><FONT color=#0000ff size=2>string</FONT><FONT size=2> strUserName)<BR>{<BR>DataView tmpReturnedData;<BR>DataTools.UserData tmpData = </FONT><FONT color=#0000ff size=2>new</FONT><FONT size=2> DataTools.UserData();<BR>tmpReturnedData = </FONT><FONT color=#0000ff size=2>new</FONT><FONT size=2> DataView();<BR>tmpReturnedData.Table = tmpData.GetUserByUserName(strUserName).Tables[</FONT><FONT color=#a31515 size=2>"users"</FONT><FONT size=2>];<BR></FONT><FONT color=#0000ff size=2>if</FONT><FONT size=2> (tmpReturnedData.Table.Rows.Count == 0)<BR>{<BR></FONT><FONT color=#0000ff size=2>return</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>true</FONT><FONT size=2>;<BR>}<BR></FONT><FONT color=#0000ff size=2>else<BR></FONT><FONT size=2>{<BR></FONT><FONT color=#0000ff size=2>return</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>false</FONT><FONT size=2>;<BR>}<BR>}<BR></FONT><FONT color=#0000ff size=2>public</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>bool</FONT><FONT size=2> CheckEmailAddressAvailability(</FONT><FONT color=#0000ff size=2>string</FONT><FONT size=2> strEmailAddress)<BR>{<BR>DataView tmpReturnedData;<BR>DataTools.UserData tmpData = </FONT><FONT color=#0000ff size=2>new</FONT><FONT size=2> DataTools.UserData();<BR>tmpReturnedData = </FONT><FONT color=#0000ff size=2>new</FONT><FONT size=2> DataView();<BR>tmpReturnedData.Table = tmpData.GetUserByEmailAddress(strEmailAddress).Tables[</FONT><FONT color=#a31515 size=2>"users"</FONT><FONT size=2>];<BR></FONT><FONT color=#0000ff size=2>if</FONT><FONT size=2> (tmpReturnedData.Table.Rows.Count == 0)<BR>{<BR></FONT><FONT color=#0000ff size=2>return</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>true</FONT><FONT size=2>;<BR>}<BR></FONT><FONT color=#0000ff size=2>else<BR></FONT><FONT size=2>{<BR></FONT><FONT color=#0000ff size=2>return</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>false</FONT><FONT size=2>;<BR>}<BR>}<BR>&nbsp;<BR></FONT><FONT color=#0000ff size=2>public</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>void</FONT><FONT size=2> DisableAccount(</FONT><FONT color=#0000ff size=2>long</FONT><FONT size=2> UserID, </FONT><FONT color=#0000ff size=2>string</FONT><FONT size=2> strReason)<BR>{<BR>}<BR></FONT><FONT color=#0000ff size=2>public</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>bool</FONT><FONT size=2> UpdateAccount()<BR>{<BR>&nbsp;<BR></FONT><FONT color=#0000ff size=2>return</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>true</FONT><FONT size=2>;<BR>}<BR>&nbsp;<BR></FONT><FONT color=#0000ff size=2>#endregion<BR>#region</FONT><FONT size=2> Validation Rules<BR></FONT><FONT color=#008000 size=2>/* <BR>* The Validation Rules region will contain the AddBusinessRules() method, and <BR>* any custom rule methods required by the object.<BR>*/<BR></FONT><FONT size=2></FONT><FONT color=#0000ff size=2>protected</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>override</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>void</FONT><FONT size=2> AddBusinessRules()<BR>{<BR>&nbsp;<BR>ValidationRules.AddRule(</FONT><FONT color=#0000ff size=2>new</FONT><FONT size=2> RuleHandler(CommonRules.StringMaxLength),<BR></FONT><FONT color=#0000ff size=2>new</FONT><FONT size=2> CommonRules.MaxLengthRuleArgs(</FONT><FONT color=#a31515 size=2>"Address1"</FONT><FONT size=2>, 50));<BR>ValidationRules.AddRule(</FONT><FONT color=#0000ff size=2>new</FONT><FONT size=2> RuleHandler(CommonRules.StringMaxLength),<BR></FONT><FONT color=#0000ff size=2>new</FONT><FONT size=2> CommonRules.MaxLengthRuleArgs(</FONT><FONT color=#a31515 size=2>"Address2"</FONT><FONT size=2>, 50));<BR>ValidationRules.AddRule(</FONT><FONT color=#0000ff size=2>new</FONT><FONT size=2> RuleHandler(CommonRules.StringMaxLength),<BR></FONT><FONT color=#0000ff size=2>new</FONT><FONT size=2> CommonRules.MaxLengthRuleArgs(</FONT><FONT color=#a31515 size=2>"Address3"</FONT><FONT size=2>, 50));<BR>ValidationRules.AddRule(</FONT><FONT color=#0000ff size=2>new</FONT><FONT size=2> RuleHandler(CommonRules.StringMaxLength),<BR></FONT><FONT color=#0000ff size=2>new</FONT><FONT size=2> CommonRules.MaxLengthRuleArgs(</FONT><FONT color=#a31515 size=2>"City"</FONT><FONT size=2>, 30));<BR>ValidationRules.AddRule(</FONT><FONT color=#0000ff size=2>new</FONT><FONT size=2> RuleHandler(CommonRules.StringMaxLength),<BR></FONT><FONT color=#0000ff size=2>new</FONT><FONT size=2> CommonRules.MaxLengthRuleArgs(</FONT><FONT color=#a31515 size=2>"State"</FONT><FONT size=2>, 30));<BR>ValidationRules.AddRule(</FONT><FONT color=#0000ff size=2>new</FONT><FONT size=2> RuleHandler(CommonRules.StringMaxLength),<BR></FONT><FONT color=#0000ff size=2>new</FONT><FONT size=2> CommonRules.MaxLengthRuleArgs(</FONT><FONT color=#a31515 size=2>"Zipcode"</FONT><FONT size=2>, 10));<BR>&nbsp;<BR>ValidationRules.AddRule(</FONT><FONT color=#0000ff size=2>new</FONT><FONT size=2> RuleHandler(CommonRules.StringMaxLength),<BR></FONT><FONT color=#0000ff size=2>new</FONT><FONT size=2> CommonRules.MaxLengthRuleArgs(</FONT><FONT color=#a31515 size=2>"FirstName"</FONT><FONT size=2>, 30));<BR>ValidationRules.AddRule(</FONT><FONT color=#0000ff size=2>new</FONT><FONT size=2> RuleHandler(CommonRules.StringMaxLength),<BR></FONT><FONT color=#0000ff size=2>new</FONT><FONT size=2> CommonRules.MaxLengthRuleArgs(</FONT><FONT color=#a31515 size=2>"LastName"</FONT><FONT size=2>, 30));<BR>ValidationRules.AddRule(</FONT><FONT color=#0000ff size=2>new</FONT><FONT size=2> RuleHandler(CommonRules.StringMaxLength),<BR></FONT><FONT color=#0000ff size=2>new</FONT><FONT size=2> CommonRules.MaxLengthRuleArgs(</FONT><FONT color=#a31515 size=2>"EmailAddress"</FONT><FONT size=2>, 100));<BR>}<BR></FONT><FONT color=#0000ff size=2>#endregion<BR>#region</FONT><FONT size=2> Authorization Rules<BR></FONT><FONT color=#008000 size=2>/* <BR>* The Authorization Rules region will contain the AddAuthorizationRules() method. <BR>* It will also contain a standard set of static methods indicating whether the <BR>* current user is authorizaed to get, add, save, or delete this type of business <BR>* object.<BR>*/<BR></FONT><FONT size=2></FONT><FONT color=#0000ff size=2>protected</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>override</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>void</FONT><FONT size=2> AddAuthorizationRules()<BR>{<BR></FONT><FONT color=#008000 size=2>// AuthorizationRules.AllowWrite();<BR></FONT><FONT size=2>}<BR></FONT><FONT color=#0000ff size=2>public</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>static</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>bool</FONT><FONT size=2> CanAddObject()<BR>{<BR></FONT><FONT color=#0000ff size=2>bool</FONT><FONT size=2> result = </FONT><FONT color=#0000ff size=2>false</FONT><FONT size=2>;<BR></FONT><FONT color=#0000ff size=2>return</FONT><FONT size=2> result;<BR>}<BR></FONT><FONT color=#0000ff size=2>public</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>static</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>bool</FONT><FONT size=2> CanGetObject()<BR>{<BR></FONT><FONT color=#0000ff size=2>bool</FONT><FONT size=2> result = </FONT><FONT color=#0000ff size=2>true</FONT><FONT size=2>;<BR></FONT><FONT color=#0000ff size=2>return</FONT><FONT size=2> result;<BR>}<BR></FONT><FONT color=#0000ff size=2>public</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>static</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>bool</FONT><FONT size=2> CanDeleteObject()<BR>{<BR></FONT><FONT color=#0000ff size=2>bool</FONT><FONT size=2> result = </FONT><FONT color=#0000ff size=2>false</FONT><FONT size=2>;<BR></FONT><FONT color=#0000ff size=2>return</FONT><FONT size=2> result;<BR>}<BR></FONT><FONT color=#0000ff size=2>public</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>static</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>bool</FONT><FONT size=2> CanEditObject()<BR>{<BR></FONT><FONT color=#0000ff size=2>bool</FONT><FONT size=2> result = </FONT><FONT color=#0000ff size=2>false</FONT><FONT size=2>;<BR></FONT><FONT color=#0000ff size=2>return</FONT><FONT size=2> result;<BR>}<BR></FONT><FONT color=#0000ff size=2>#endregion<BR>#region</FONT><FONT size=2> Factory Methods<BR></FONT><FONT color=#008000 size=2>/* <BR>* The Factory Methods region will contain the static factory methods to create or <BR>* retrieve the object, along with the static delete method (if the object is <BR>* editable. It will also contain the default constructor for the class, which must <BR>* be scoped as non-public (i.e. private or protected) to force the use of the factory <BR>* methods when creating the business object.<BR>*/<BR></FONT><FONT size=2></FONT><FONT color=#0000ff size=2>public</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>static</FONT><FONT size=2> User NewUser()<BR>{<BR></FONT><FONT color=#0000ff size=2>if</FONT><FONT size=2> (!CanAddObject())<BR></FONT><FONT color=#0000ff size=2>throw</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>new</FONT><FONT size=2> System.Security.</FONT><FONT color=#2b91af size=2>SecurityException</FONT><FONT size=2>(<BR></FONT><FONT color=#a31515 size=2>"User not authorized to add a user"</FONT><FONT size=2>);<BR></FONT><FONT color=#0000ff size=2>return</FONT><FONT size=2> DataPortal.Create&lt;User&gt;();<BR>}<BR></FONT><FONT color=#0000ff size=2>public</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>static</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>void</FONT><FONT size=2> DeleteUser(</FONT><FONT color=#0000ff size=2>int</FONT><FONT size=2> id)<BR>{<BR></FONT><FONT color=#0000ff size=2>if</FONT><FONT size=2> (!CanDeleteObject())<BR></FONT><FONT color=#0000ff size=2>throw</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>new</FONT><FONT size=2> System.Security.</FONT><FONT color=#2b91af size=2>SecurityException</FONT><FONT size=2>(<BR></FONT><FONT color=#a31515 size=2>"User not authorized to remove a user"</FONT><FONT size=2>);<BR>DataPortal.Delete(</FONT><FONT color=#0000ff size=2>new</FONT><FONT size=2> Criteria(id));<BR>}<BR></FONT><FONT color=#0000ff size=2>public</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>static</FONT><FONT size=2> User GetUser(</FONT><FONT color=#0000ff size=2>int</FONT><FONT size=2> id)<BR>{<BR></FONT><FONT color=#0000ff size=2>if</FONT><FONT size=2> (!CanGetObject())<BR></FONT><FONT color=#0000ff size=2>throw</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>new</FONT><FONT size=2> System.Security.</FONT><FONT color=#2b91af size=2>SecurityException</FONT><FONT size=2>(<BR></FONT><FONT color=#a31515 size=2>"User not authorized to view a user"</FONT><FONT size=2>);<BR></FONT><FONT color=#0000ff size=2>return</FONT><FONT size=2> DataPortal.Fetch&lt;User&gt;(</FONT><FONT color=#0000ff size=2>new</FONT><FONT size=2> Criteria(id));<BR>}<BR></FONT><FONT color=#0000ff size=2>public</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>override</FONT><FONT size=2> User Save()<BR>{<BR></FONT><FONT color=#0000ff size=2>if</FONT><FONT size=2> (IsDeleted &amp;&amp; !CanDeleteObject())<BR></FONT><FONT color=#0000ff size=2>throw</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>new</FONT><FONT size=2> System.Security.</FONT><FONT color=#2b91af size=2>SecurityException</FONT><FONT size=2>(<BR></FONT><FONT color=#a31515 size=2>"User not authorized to remove a user"</FONT><FONT size=2>);<BR></FONT><FONT color=#0000ff size=2>else</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>if</FONT><FONT size=2> (IsNew &amp;&amp; !CanAddObject())<BR></FONT><FONT color=#0000ff size=2>throw</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>new</FONT><FONT size=2> System.Security.</FONT><FONT color=#2b91af size=2>SecurityException</FONT><FONT size=2>(<BR></FONT><FONT color=#a31515 size=2>"User not authorized to add a user"</FONT><FONT size=2>);<BR></FONT><FONT color=#0000ff size=2>else</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>if</FONT><FONT size=2> (!CanEditObject())<BR></FONT><FONT color=#0000ff size=2>throw</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>new</FONT><FONT size=2> System.Security.</FONT><FONT color=#2b91af size=2>SecurityException</FONT><FONT size=2>(<BR></FONT><FONT color=#a31515 size=2>"User not authorized to update a user"</FONT><FONT size=2>);<BR></FONT><FONT color=#0000ff size=2>return</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>base</FONT><FONT size=2>.Save();<BR>}<BR></FONT><FONT color=#0000ff size=2>protected</FONT><FONT size=2> User()<BR>{<BR>}<BR></FONT><FONT color=#0000ff size=2>#endregion<BR>#region</FONT><FONT size=2> Data Access<BR></FONT><FONT color=#008000 size=2>/* <BR>* The Data Access region will contain the DataPortal_* methods. It will also contain <BR>* the Criteria class used to create, retrieve, or delete the object.<BR>*/<BR></FONT><FONT size=2>[</FONT><FONT color=#2b91af size=2>Serializable</FONT><FONT size=2>()]<BR></FONT><FONT color=#0000ff size=2>private</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>class</FONT><FONT size=2> </FONT><FONT color=#2b91af size=2>Criteria<BR></FONT><FONT size=2>{<BR></FONT><FONT color=#0000ff size=2>private</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>int</FONT><FONT size=2> _id;<BR></FONT><FONT color=#0000ff size=2>public</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>int</FONT><FONT size=2> Id<BR>{<BR></FONT><FONT color=#0000ff size=2>get</FONT><FONT size=2> { </FONT><FONT color=#0000ff size=2>return</FONT><FONT size=2> _id; }<BR>}<BR></FONT><FONT color=#0000ff size=2>public</FONT><FONT size=2> Criteria(</FONT><FONT color=#0000ff size=2>int</FONT><FONT size=2> id)<BR>{ _id = id; }<BR>}<BR></FONT><FONT color=#008000 size=2>// Use [RunLocal()] for objects that do not need to get populated with default data from the DB<BR></FONT><FONT size=2>[RunLocal()]<BR></FONT><FONT color=#0000ff size=2>protected</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>override</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>void</FONT><FONT size=2> DataPortal_Create()<BR>{<BR></FONT><FONT color=#008000 size=2>// nothing to initialize<BR></FONT><FONT size=2>ValidationRules.CheckRules();<BR>}<BR></FONT><FONT color=#0000ff size=2>private</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>void</FONT><FONT size=2> DataPortal_Fetch(Criteria criteria)<BR>{<BR>}<BR></FONT><FONT color=#0000ff size=2>protected</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>override</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>void</FONT><FONT size=2> DataPortal_Insert()<BR>{<BR>}<BR></FONT><FONT color=#0000ff size=2>protected</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>override</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>void</FONT><FONT size=2> DataPortal_Update()<BR>{<BR>}<BR></FONT><FONT color=#0000ff size=2>protected</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>override</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>void</FONT><FONT size=2> DataPortal_DeleteSelf()<BR>{<BR>DataPortal_Delete(</FONT><FONT color=#0000ff size=2>new</FONT><FONT size=2> Criteria(_id));<BR>}<BR></FONT><FONT color=#0000ff size=2>private</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>void</FONT><FONT size=2> DataPortal_Delete(Criteria criteria)<BR>{<BR>}<BR></FONT><FONT color=#0000ff size=2>protected</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>override</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>void</FONT><FONT size=2> OnDeserialized(System.Runtime.Serialization.</FONT><FONT color=#2b91af size=2>StreamingContext</FONT><FONT size=2> context)<BR>{<BR>}<BR>&nbsp;<BR></FONT><FONT color=#0000ff size=2>#endregion<BR>#region</FONT><FONT size=2> Exists<BR></FONT><FONT color=#008000 size=2>/* <BR>* The Exists region will contain static methods to determine whether a specific instance<BR>* of the business object exists.<BR>*/<BR></FONT><FONT size=2></FONT><FONT color=#0000ff size=2>public</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>static</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>bool</FONT><FONT size=2> Exists(</FONT><FONT color=#0000ff size=2>string</FONT><FONT size=2> id)<BR>{<BR></FONT><FONT color=#0000ff size=2>return</FONT><FONT size=2> ExistsCommand.Exists(id);<BR>}<BR>[</FONT><FONT color=#2b91af size=2>Serializable</FONT><FONT size=2>()]<BR></FONT><FONT color=#0000ff size=2>private</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>class</FONT><FONT size=2> </FONT><FONT color=#2b91af size=2>ExistsCommand</FONT><FONT size=2> : CommandBase<BR>{<BR></FONT><FONT color=#0000ff size=2>private</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>string</FONT><FONT size=2> _id;<BR></FONT><FONT color=#0000ff size=2>private</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>bool</FONT><FONT size=2> _exists;<BR></FONT><FONT color=#0000ff size=2>public</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>bool</FONT><FONT size=2> ResourceExists<BR>{<BR></FONT><FONT color=#0000ff size=2>get</FONT><FONT size=2> { </FONT><FONT color=#0000ff size=2>return</FONT><FONT size=2> _exists; }<BR>}<BR></FONT><FONT color=#0000ff size=2>public</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>static</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>bool</FONT><FONT size=2> Exists(</FONT><FONT color=#0000ff size=2>string</FONT><FONT size=2> id)<BR>{<BR>ExistsCommand result;<BR>result = DataPortal.Execute&lt;ExistsCommand&gt;(</FONT><FONT color=#0000ff size=2>new</FONT><FONT size=2> ExistsCommand(id));<BR></FONT><FONT color=#0000ff size=2>return</FONT><FONT size=2> result.ResourceExists;<BR>}<BR></FONT><FONT color=#0000ff size=2>private</FONT><FONT size=2> ExistsCommand(</FONT><FONT color=#0000ff size=2>string</FONT><FONT size=2> id)<BR>{<BR>_id = id;<BR>}<BR></FONT><FONT color=#0000ff size=2>protected</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>override</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>void</FONT><FONT size=2> DataPortal_Execute()<BR>{<BR>_exists = </FONT><FONT color=#0000ff size=2>false</FONT><FONT size=2>;<BR>}<BR>}<BR></FONT><FONT color=#0000ff size=2>#endregion<BR></FONT><FONT size=2>}<BR>}<BR></P></FONT></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Tuesday, December 18, 2007</h2>Your design seems off to me.&nbsp; Address inherits UserAccount?&nbsp; A physical street address should be have like a user's login account?&nbsp; Don't inherit to get properties, inherit from subclasses to get behavior (methods), and even then you need to be careful about it.<br><br>Read the chapter in the book about designing the project tracker library.&nbsp; That will help guide you on how to build your BOs.<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ataylorm replied on Tuesday, December 18, 2007</h2>Did that because it was the only way we could find to get the PropertyHasChanged to work and was suggested by other users on this board.</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Wednesday, December 19, 2007</h2>PropertyHasChanged doesn't require all objects inhert from each other.&nbsp; I'd be suprised if that was the recommended design.&nbsp; <br><br>I'd recommend something like this:<br><br>[Serializable]<br>public sealed class UserAccount : BusinessBase&lt;UserAccount&gt; {<br>&nbsp;&nbsp;&nbsp; public UserAddresses Addresses { get; } // Be sure to listen to ListChanged events in UserAccount<br>}<br><br>[Serializable]<br>
public sealed class UserAddresses : BusinessListBase&lt;UserAddresses, UserAddress&gt; {<br>&nbsp;&nbsp;&nbsp; private UserAddresses() { MarkAsChild(); // this is important }<br>}<br><br>[Serializable]<br>public sealed class UserAddress : BusinessBase&lt;UserAddress&gt; {<br>&nbsp;&nbsp;&nbsp; private UserAddress() { MarkAsChild(); // this is important }<br>
}<br>
<br>Of course fill in the relevent properties and fields.&nbsp; The pattern you should follow for properties is this:<br><br>public string AddressLine1 {<br>&nbsp;&nbsp;&nbsp; get {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; string result;<br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if ( CanReadProperty( "AddressLine1" ) ) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; result = addressLine1;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; else {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; result = "";<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return result;<br>&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; set {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; CanWriteProperty( "AddressLine1", true );<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if ( addressLine1 != value ) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; addressLine1 = value;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; PropertyHasChanged( "AddressLine1" );<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; }<br>}<br><br>HTH<br>Andy<br></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
