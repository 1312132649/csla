<html><header><title>Large Child Collection Object</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Large Child Collection Object</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/12702.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>damtur posted on Monday, July 21, 2014</h2><p>Hi</p>
<p>I have a screen in Silverlight which is comprised of a header record, and then a datagrid which might contain up to 1000 records.</p>
<p>The user doesn&#39;t want to use paging and would prefer to just scroll down the list of records in the datagrid and enter a value in one of the cells for what could be just a handful of records.</p>
<p>When the user clicks Save the entire object is transported back to the server, including the 1000 odd records. This is resulting in some poor performance (even with compression).</p>
<p>Is there any technique you might suggest to handle this kind of suggestion?</p>
<p>The question is being asked...&quot;why are we transporting back every record if we&#39;re only editing three?&quot;.&nbsp;</p>
<p>Thanks&nbsp;</p>
<p>Damien</p></div><div style='padding:0 15 3 15;background-color:lightgreen'><h2>JonnyBee replied on Monday, July 21, 2014</h2><p>Hi,</p>
<p>Look at the DiifGram sample in the samples folder (or fork the entire repository on GitHub).</p>
<p>This samples is showing a technique for just what you want - only sending back a few records from a large list.&nbsp;</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>damtur replied on Tuesday, July 22, 2014</h2><p>I think this will help. Thanks for that.</p>
<p>Just out of curiosity, has there ever been any thought put into the option of &#39;flagging&#39; your objects to only transfer if changed?</p>
<p>I understand there are many occasions where we want the entire graph transferred to the server, but in our application there&#39;s plenty of times we don&#39;t really need to.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JonnyBee replied on Wednesday, July 23, 2014</h2><p>No, </p>
<p>it has been suggested previously but is not planned. </p>
<p>You must also remember that CSLA requires a &quot;binary formatter&quot; and supports both .NET builtin formatters (BinaryFormatter and NetDataContractSerializer) plus the CSLA specific formatters. If CSLA was to only send &quot;flagged&quot; objects it would require that CSLA created a new object structure with only the objects to send and then serialize that structure and then when the result came back (deserialized) to update the original object structure.&nbsp;</p>
<p>Remember also that&nbsp;</p>
<p>var newInstanceOfStructure = OldInstance.Save()</p>
<p>IE: Save should return a new instance of the complete structure.&nbsp;</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>StefanCop replied on Tuesday, July 22, 2014</h2><p>Hi, </p>
<p>Are you sure poor performance is caused by serialization and communication?</p>
<p>Using WPF we found that 70% performance is WPF (mainly layouting) and &quot;only&quot; 30% the DataPortal calls. We would have expected the other way round...</p>
<p>The idea of DiffGram is certainly a good one. </p>
<p>We&#39;re caching static data (lookup data) but don&#39;t include them (using a non-serialized backing field). </p>
<p>Stefan</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Thursday, July 24, 2014</h2><p>One more thing to consider; right now you have 1000 or more child items in a root object but the user only edits a few at a time.&nbsp; Are you sure its really necessary to have this design?&nbsp; That is to say, does each child really need to be saved in the context of its parent, or can the child be saved independently?&nbsp; That was something I struggled with at first with Csla.&nbsp; While line items on an order probably can&#39;t be saved outside the context of a containing order, a list of notes associated with a contact can probably allow each note to be saved independently; the fact that a note must be tied to a contact does not mean that a Contact class must contain a child list of ContactNotes.</p>
<p>Whenever you have thousands of rows on the screen it raises a flag to me that they probably aren&#39;t going to be children.&nbsp; Thinking about the order, is it likely for an order to ever have thousands of line items?&nbsp; Probably not.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>tiago replied on Sunday, July 27, 2014</h2><p><div style='padding-left: 50px;background-color:silver'><b>Andy<br></b></p>
<p>One more thing to consider; right now you have 1000 or more child items in a root object but the user only edits a few at a time.&nbsp; Are you sure its really necessary to have this design?&nbsp; That is to say, does each child really need to be saved in the context of its parent, or can the child be saved independently?&nbsp; That was something I struggled with at first with Csla.&nbsp; While line items on an order probably can&#39;t be saved outside the context of a containing order, a list of notes associated with a contact can probably allow each note to be saved independently; the fact that a note must be tied to a contact does not mean that a Contact class must contain a child list of ContactNotes.</p>
<p>Whenever you have thousands of rows on the screen it raises a flag to me that they probably aren&#39;t going to be children.&nbsp; Thinking about the order, is it likely for an order to ever have thousands of line items?&nbsp; Probably not.</p>
<div style="clear:both;"></div>
<p></div></p>
<p>If the child can be saved independently of the parent, the design can use DynamicRootList / DynamicRoot stereotypes.</p>
<p>DynamicRootList &nbsp;loads its children as any parent object would do, but doesn&#39;t save them, The save part is handled by DynamicRoot objecs themselves. This binds beautifully to datagrids.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>damtur replied on Monday, July 28, 2014</h2><p>All good suggestions. Thanks gents. </p>
<p>You could argue that it&#39;s poor UI design, but for a program like a Stocktake or Purchase Order, this is how they prefer to work with their data ie bulk select records and update only those they&#39;re interested in.</p>
<p>Users don&#39;t want to individually select records in these kinds of screens. They want to bulk select ie by a category, instead. This saves then a great deal of time when entering data.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Tuesday, July 29, 2014</h2><p><div style='padding-left: 50px;background-color:silver'><b>Damien Turnbull<br></b>
<p>All good suggestions. Thanks gents. </p>
<p>You could argue that it&#39;s poor UI design, but for a program like a Stocktake or Purchase Order, this is how they prefer to work with their data ie bulk select records and update only those they&#39;re interested in.</p>
<p>Users don&#39;t want to individually select records in these kinds of screens. They want to bulk select ie by a category, instead. This saves then a great deal of time when entering data.</p>
<div style="CLEAR:both;"></div>
</div></p>
<p>My suggestion isn&#39;t so much that you abandon the current UI, just re-evaluate if the object which represents a row should be a Csla child object instead of a root; as suggested above and DynamicListBase allows you to do this which will save each row as the user leaves it.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>damtur replied on Wednesday, July 30, 2014</h2><p>If we went with a DynamicListBase, I&#39;m assuming it would mean we&#39;d lose the ability for the user to undo their changes?</p>
<p>Our UI has a cancel button which we then use to tap into CSLA&#39;s n-level undo functionality.</p></div><div style='padding:0 15 3 15;background-color:lightgreen'><h2>tiago replied on Sunday, August 03, 2014</h2><p>Hi Damien,</p>
<p>You are right. Binding DynamicListBase to a DataGrid each row is saved as soon as you leave the row. So no undo is available for that row, after it&#39;s saved.</p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
