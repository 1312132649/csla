<html><header><title>User defined properties in business objects</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>User defined properties in business objects</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/1486.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>kobruleht posted on Saturday, October 14, 2006</h2><P>In my application I have about 100 tables like table of customers</P>
<P>CREATE TABLE Customer ( id CHAR(10), name CHAR(20), address CHAR(50) );</P>
<P>Data is edited in WinForm DataGrid . I have table of grid column descriptions</P>
<P>CREATE TABLE InputForm ( Form CHAR(20), FieldName CHAR(20), Caption CHAR(20), Width NUMERIC(2) );<BR>INSERT INTO InputForm VALUES ( 'Customer', 'name', 'Customer Name', 100 );<BR>INSERT INTO InputForm VALUES ( 'Customer', 'address', 'Customer Address', 200 );</P>
<P>My end users can add new fields and input data to those fields at runtime:</P>
<P>ALTER TABLE Customer ADD COLUMN EndUserSpecificField CHARACTER(20);</P>
<P>INSERT INTO InputForm VALUES ( 'Customer', 'EndUserSpecificField', 'Special field value', 10 );</P>
<P>Where to find sample how to create such application in C# ?</P>
<P>I looked into CSLA but havent found any sample aboutnusing dynamic business object properties.</P>
<P>Business object properties are defined statically only, like in Project.cs</P>
<P>private Guid _id;<BR>private string _name = string.Empty;<BR>private SmartDate _started;</P>
<P>etc.</P>
<P>Andrus.<BR></P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Brian Criswell replied on Saturday, October 14, 2006</h2>Just create a child list of custom properties.&nbsp; Every object that can have custom properties would have one of these lists.<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>SonOfPirate replied on Monday, October 16, 2006</h2><P>A good example of this can be found in the .NET Framework System.Web.UI.WebControls.WebControl class where an Attributes property is defined to allow users to add their own attributes/properties to a control.&nbsp; This allows the control to be extensible in the way you are describing.&nbsp; In your case, you will have to add the necessary logic to handle selecting and updating the data to/from the DB for these "added" properties just like WebControl uses the Attributes collection during rendering to append the name/value pairs to the HTML output stream.</P>
<P>Something else to consider - use a set of separate child tables in your DB to accomodate this rather than allowing your code to make schema changes.&nbsp; It's just a preferencial thing, but I prefer to have an Attributes table listing the available/defined attributes then another table referencing the parent table (customers), the attribute and specifying the value for that instance.&nbsp; This maps well to your object model as well as you can have a CustomerAttributesCollection object that is responsible for managing these values for your BO.</P>
<P>Hope that helps.</P>
<P>&nbsp;</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>kobruleht replied on Monday, October 16, 2006</h2><P><EM>use a set of separate child tables in your DB to accomodate this rather than allowing your code to make schema changes.</EM></P>
<P>Thank you. This may be great idea. However, this requires extra coding for custom attributes.</P>
<P>So I think I put all business object database based-attributes to a list. I think best is to&nbsp;create a single, universal business object which work with any tables.</P>
<P>It would be nice if framework has such a object which can be called from admin menu. This allows framework to edit any table, without additonal encoding. This turns framework into poweful free DBA tool which can be extended by users.</P>
<P>Andrus.</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Monday, October 16, 2006</h2><BLOCKQUOTE><div><img src="/Themes/basicblue/images/icon-quote.gif"> <strong>kobruleht:</strong></div><div>It would be nice if framework has such a object which can be called
from admin menu. This allows framework to edit any table, without
additonal encoding. This turns framework into poweful free DBA tool
which can be extended by users.</div></BLOCKQUOTE><br><br>That's not the goal of Csla.&nbsp; In fact, objects you build using Csla many times do not map directly to the tables at all.&nbsp; This is because we're modeling business behaviors, not modeling data.&nbsp; <br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>SonOfPirate replied on Monday, October 16, 2006</h2><P>Andrus, what you are describing is an application or use of the framework and not something that a framework is intended to do.&nbsp; You can certainly extend the framework to add your own custom classes that can be used to perform DBA tasks, but remember that the classes in a framework should be those that will be reused in multiple applications.&nbsp; If the functionality you are describing is something for a single client application, then that is where the classes should be located.</P>
<P>And, as Andy said, your classes should be modeling behavior not simply mapping data.&nbsp; So, the behavior you are talking about are DBA tasks which is fine, just be sure you want this exposed and that it belongs in a "framework".</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Brian Criswell replied on Monday, October 16, 2006</h2><BLOCKQUOTE><div><img src="/Themes/default/images/icon-quote.gif"> <strong>kobruleht:</strong></div><div><p><em>use a set of separate child tables in your DB to accomodate this rather than allowing your code to make schema changes.</em></p>
<p>Thank you. This may be great idea. However, this requires extra coding for custom attributes.</p>
<p>So I think I put all business object database based-attributes to a list. I think best is to&nbsp;create a single, universal business object which work with any tables.</p>
<p>It would be nice if framework has such a object which can be called from admin menu. This allows framework to edit any table, without additonal encoding. This turns framework into poweful free DBA tool which can be extended by users.</p>
<p>Andrus.</p></div></BLOCKQUOTE><br>To be fair, when I suggested a list, I was suggesting a list that would pull the custom attributes from the custom attributes table.&nbsp; Their would be two tables/objects.&nbsp; One would include the custom attributes that the user defines for the different object types.&nbsp; The other would store values against a combination of an attribute and instance of an object.&nbsp; This would create a universal attribute system that could be assigned against any object.<br></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
