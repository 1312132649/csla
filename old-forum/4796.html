<html><header><title>Databinding Question</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Databinding Question</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/4796.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>Husker Dan posted on Monday, May 05, 2008</h2><P>I have an object model that look like this</P>
<P><FONT face="Courier New">ParentList</FONT></P>
<P><FONT face="Courier New">&nbsp;&nbsp;&nbsp;Parent</FONT></P>
<P><FONT face="Courier New">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ChildList</FONT></P>
<P><FONT face="Courier New">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Child</FONT></P>
<P>On my Windows Form I have an Infragistics Ultra Tree on the left side of my form&nbsp;that I bind to my object. That displays just fine. The user can select a child and when they do, there are edit controls on the right side of my form that the I want to bind the selected child to do. However, I can't seem to get this to work.</P>
<P>I have a BindingSource I use for the tree and it's data source is set to the parent list. I have a BindingSource I want to use for the edit controls but I can't figure out what to set it to so I can see the child. All I can get is the Child List.</P>
<P>Any help would be appreciated.</P>
<P>Thanks!</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Patrick.Roeper replied on Monday, May 05, 2008</h2>Dan,<br><br>My first suggestion would be to drop the tree control and use an ultraGrid without the column headers; the 2 controls will look identical. I ran into a lot of issues in the past with databinding and drag/drop stuff with the tree control, and tech support always recommended to use a Grid instead.<br><br>After you switch to the grid control, you should be able to see your childList as a 2nd band of the grid. If this is not the case let me know.<br><br>Patrick<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Husker Dan replied on Monday, May 05, 2008</h2><P>Patrick,</P>
<P>Thanks for the response.</P>
<P>However, I don't think that my original post was clear. I am not having an issue with the tree. It display just fine. The issue I am having (and maybe it is a tree isue) it linking the selected child to the edit controls on the right side of my form via Binding Sources.</P>
<P>The user selects a child but the edit controls are not binding to that child correctly. All I seem to get is some child list level junk.</P>
<P>Is that the same problem that led you to use the tree?</P>
<P>&nbsp;</P>
<P>Thanks again!</P>
<P>Dan</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>pillesoft replied on Monday, May 05, 2008</h2>Dear Dan,<br><br>i use similar GUI, but i use normal treeview.<br>so, if your problem doesn't relate to tree my solution may help you.<br>&nbsp;&nbsp;&nbsp; private void treeView1_AfterSelect(object sender, TreeViewEventArgs e)<br>&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (_opermode != OperationMode.VIEW)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (MessageBox.Show(this, "Cancel Data Input?", this.Text,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; MessageBoxButtons.YesNo,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; MessageBoxIcon.Warning,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; MessageBoxDefaultButton.Button2) == DialogResult.Yes)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (e.Node.Tag is WorkpackRO)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; CancelWorkpack();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; else if (e.Node.Tag is ProjectRO)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; CancelProject();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; else<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (e.Node.Tag is WorkpackRO)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; panelProject.Visible = false;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; int id = ((WorkpackRO)e.Node.Tag).Id;<br><br><b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ReBindWorkpack(id);</b><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; splitContainer2.Visible = true;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; else if (e.Node.Tag is ProjectRO)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; splitContainer2.Visible = false;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; panelProject.Visible = true;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; int id = ((ProjectRO)e.Node.Tag).Id;<br><br><b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ReBindProject(id);</b><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; }<br><br>the ReBindxxxx() methods could be interesting:<br>&nbsp;&nbsp;&nbsp; private void ReBindWorkpack(int id)<br>&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; this.workpackBindingSource.RaiseListChangedEvents = false;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; this.workpackBindingSource.DataSource = null;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; _workpack = Workpack.GetWorkpack(id);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; this.workpackBindingSource.DataSource = _workpack;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; this.workpackBindingSource.RaiseListChangedEvents = true;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; this.workpackBindingSource.ResetBindings(false);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; this.childrenWPsBindingSource.RaiseListChangedEvents = false;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; this.childrenWPsBindingSource.DataSource = null;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; WorkpackChildren chilwps = _workpack.ChildrenWPs;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; this.childrenWPsBindingSource.DataSource = chilwps;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; this.childrenWPsBindingSource.RaiseListChangedEvents = true;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; this.childrenWPsBindingSource.ResetBindings(false);<br><br>&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; private void ReBindProject(int id)<br>&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; this.projectBindingSource.RaiseListChangedEvents = false;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; this.projectBindingSource.DataSource = null;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; _project = Project.GetProject(id);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; this.projectBindingSource.DataSource = _project;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; this.projectBindingSource.RaiseListChangedEvents = true;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; this.projectBindingSource.ResetBindings(false);<br>&nbsp;&nbsp;&nbsp; }<br><br>as you see i make a rebinding always<br>this works for me.<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Husker Dan replied on Monday, May 05, 2008</h2><P>Thanks for the response.</P>
<P>I see what your code is doing. However, I have one question. I have read in more than one post that we need to keep the binding source controls linked together. So one binding source would become the datasource for another binding source. Your code does not seem to do this.</P>
<P>So, what is the rule when it comes to multiple binding sources?</P>
<P>&nbsp;</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>pillesoft replied on Tuesday, May 06, 2008</h2>Dear Dan,<br><br>i don't know what you mean, i'm relatively new in c# coming from VFP world.<br>i don't know how correct my solution, unfortunately i have sometimes databinding problem (you can find some posts from me regarding databinding)<br><br>this solution works so far for me, however if somebody has a more accurate solution i'm ready to change also.<br><br>Ivan<br></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
