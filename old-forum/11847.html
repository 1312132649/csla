<html><header><title>WCF Over WebSphere MQ</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>WCF Over WebSphere MQ</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/11847.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>dragonlips posted on Tuesday, February 19, 2013</h2><p>Hello</p>
<p>We&#39;re about to embark on testing the possible use of having the standard CSLA DataPortal exposed on a WCF channel using IBM&#39;s WebSphere MQ WCF provider. The idea is to have a transactional asynchronous communication channel due to very poor legacy database performance resulting in things timing out and needing re-tried.</p>
<p>So posting here to see if anyone else has attempted such a feet and could provide a glowing orb of knowledge that would help us&nbsp;expedite the success or dismissal of this option.</p>
<p>thanks!&nbsp;</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Sunday, February 24, 2013</h2><p>I love your avatar graphic - SPOON!! :)</p>
<p>The data portal only really requires a synchronous binding. But I&#39;m guessing that the MQ binding is async, so it probably won&#39;t work, at least not easily.</p>
<p>To put it another way, the <em>client-side</em> data portal proxy must appear to be synchronous. So you could perhaps simulate this behavior with some thread locking, though that&#39;s very tricky.</p>
<p>All that said, in version 4.5 and higher the data portal does support the async/await behaviors of .NET 4.5. And the data portal in 4.5.11 and higher has two internal implementations: sync and async.</p>
<p>The async implementation consistently flows async calls through to the WCF call. This <em>might</em> mean that you can use an async binding - as long as the task representing the WCF call doesn&#39;t complete until the result is returned from the server.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JonnyBee replied on Monday, February 25, 2013</h2><p><div style='padding-left: 50px;background-color:silver'><b>dragonlips<br></b>The idea is to have a transactional asynchronous communication channel due to very poor legacy database performance resulting in things timing out and needing re-tried.
<div style="CLEAR:both;"></div>
</div></p>
<p>I believe you will get into problems using this as a channel for the DataPortal. </p>
<p>I have used WebSphere MQ on a number of occasions as a messaging transport layer but never the WCF channel. Our apps require high throughput and we were recommended to use the MQ .NET Classes rather than the WCF channel by IBM.</p>
<p>I believe&nbsp;your DataAccess classes should rather transform data into a XmlMessage on MQ and send to a queue. Then you have a separate application to read from the queue and do whatever updates are necessary. And if it fails - then put the message back into queue for new processing later. </p>
<p>The CSLA DataPortal is syncronous,&nbsp; meaning that the client must have a well defined response&nbsp;or&nbsp;your app will get a TimeoutException and is left in an undetermined state. </p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>dragonlips replied on Monday, February 25, 2013</h2><p>Thank you both. I was hoping to be able to leverage the asynchronous nature of the the Q as well as distributed transactions on the communication channel as a slick way to get the behavior. Apparently not such a good option. Very sad. It would have made for a slick solution.</p>
<p>So we&#39;ll go back to plan B which is exactly as you describe JonnyBee. I was just hoping to avoid having a side process for ease of maintenance/management.</p>
<p>Thanks</p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
