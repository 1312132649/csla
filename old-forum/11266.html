<html><header><title>Validation rule: check for inputproperties=null?</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Validation rule: check for inputproperties=null?</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/11266.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>JCardina posted on Wednesday, March 28, 2012</h2><p>I&#39;ve noticed in the Ebook that Rocky does not check if InputProperties=null, for example:</p>
<p>&nbsp;public class ValidPrefix : Csla.Rules.BusinessRule <br />&nbsp;&nbsp;&nbsp; { <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; public string Prefix { get; private set; } <br />&nbsp; <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; public ValidPrefix(Csla.Core.IPropertyInfo primaryProperty, string prefix) <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; : base(primaryProperty) <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; { <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; InputProperties = new List&lt;Csla.Core.IPropertyInfo&gt; { PrimaryProperty }; //&lt;--NO CHECK IF NULL</p>
<p>&nbsp;</p>
<p>However when trying to research something on the forums here I noticed Jonny and others consistently do this:</p>
<pre style="font-family:Consolas;background:none repeat scroll 0% 0% #fafafa;color:black;font-size:13px;"><span style="color:blue;">if</span>&nbsp;(InputProperties&nbsp;==&nbsp;<span style="color:blue;">null</span>)
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;InputProperties&nbsp;=&nbsp;<span style="color:blue;">new</span>&nbsp;<span style="color:#2b91af;">List</span>&lt;<span style="color:#2baaaf;">IPropertyInfo</span>&gt;();<br /><br /></pre>
<p>My question is which way should it be done?</p>
<pre style="font-family:Consolas;background:none repeat scroll 0% 0% #fafafa;color:black;font-size:13px;"></pre></div><div style='padding:0 15 3 15;background-color:lightgreen'><h2>JonnyBee replied on Wednesday, March 28, 2012</h2><p>Hi,</p>
<p>When you start to subclass rules you will prefer to use the latter one and keep a consistent programming model so that you do not destroy InputProperties from the base rule.&nbsp; </p>
<p>If you never subclass a rule the first one will also work fine. </p>
<p>I am however going to change the programming model a bit for CSLA 4.5 - so that InputProperties and AffectedProperties are always treated the same and immediately get an instance. I do not fancy having to always make sure that InputProperties have an instance (no instance created&nbsp; by default) and AffectedProperties always have an instance. And this fails at runtime  with a NullReferenceException - not in the compiler.</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JCardina replied on Wednesday, March 28, 2012</h2><p>Thank you Jonny!</p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
