<html><header><title>When to create a new CSLA business class</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>When to create a new CSLA business class</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/6117.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>bpb2221 posted on Friday, January 09, 2009</h2>I am running into a situation where I have more than one way to retrieve data for a BusinessBase or BusinessListBase class.&nbsp; Most of them have more than one criteria object.&nbsp; Since the DataPortal_Fetch is overloaded to accept only one criteria, <b>what do you do if you want to have multiple methods of fetching objects?</b><br><br>Do you override the subroutine?<br>Do you create a whole new class to get the data?<br>Or am I over thinking this and I should just create an extra function in my class (BusinessBase or BusinessListBase)&nbsp; to retrieve my data?<br><br>A good example would be fetching an object(s) between two between certain dates.<br><br>Thanks in advance. <br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Friday, January 09, 2009</h2>I'm not sure I follow... you can have:<br><br>DataPortal_Fetch( SingleCriteria&lt;MyBB, int&gt; idCriteria );<br>DataPortal_Fetch( SingleCriteria&lt;MyBB, string&gt; partNumberCriteria );<br>DataPortal_Fetch( SpecialCriteria criteria );<br><br>etc.&nbsp; and the dataportal will use the appropriate one.<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>bpb2221 replied on Friday, January 09, 2009</h2>Hypothetical situation: Lets say I have a WaterBottles class (BusinessListBase).<br><br>I have two ways to get a collection of WaterBottle (BusinessBase) objects .&nbsp; I can find them by unique water bottle id or by the date produced between two dates (ie return all water bottles produced between 1/1/2009 and 1/9/2009).&nbsp; <br><br>Would you have two fetch methods in your WaterBottles (BusinessListBase) class?<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JoeFallon1 replied on Friday, January 09, 2009</h2><P>Yes.</P>
<P>Many of my list clases have multiple Shared methods.</P>
<P>In my dataportal fetch I call a Private Fetch method after I figure out the right SQL statement from the various options/crtieria. So all each method does is tka ethe criteria and buid the right command and then they all "funnel down" to the same Fetch method which executes the command and fills the collection.</P>
<P>A key assumption here is that each of the different commnads fills the complete object. You can partially fill an object but should provide default values for null fields in that case.</P>
<P>Joe</P>
<P>&nbsp;</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>SonOfPirate replied on Saturday, January 10, 2009</h2><P>To play the role of OO advocate...&nbsp; Take a look at the model you are using and assess the use case and behavior for your class when retrieved using the two criteria.&nbsp; Are they the same?&nbsp; If not, then consider that you should probably have two classes.</P>
<P>Perhaps, for instance, the first case where you retrieve the WaterBottle by ID is used to edit the properties of a WaterBottle instance whereas the case where you are using the production date in your criteria is part of a search.&nbsp; These are two distinct use cases and OO evangelists would proport having two classes.&nbsp; In my case, I would have a WaterBottle class with a&nbsp;Fetch by ID that is used for editing then have some form of a SearchResultsList that contains read-only, lightweight WaterBottleInfo instances.&nbsp; The list would be responsible for retrieving the items by production date and making the list available to your UI.&nbsp;&nbsp;&nbsp;Your UI could instantiate a WaterBottle instance from the ID property of a child item if necessary.&nbsp; This is the pattern used in the ProjectTracker sample app.</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>bpb2221 replied on Monday, January 12, 2009</h2>Thanks for the answer SOP.<br><br>I know the purist will say separate it all. &nbsp; When I show people the two classes for a read-only combobox (Info &amp; List), like sample project in the book, people are thinking it is over engineered.&nbsp;&nbsp; I agree with you though and think that functionality should be separated.&nbsp; <br><br>When you refer to a <i>'lightweight WaterBottleInfo instances', </i>do you mean an instance of the water bottle object with less properties than what the class defines? <br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Monday, January 12, 2009</h2>Is the use case really different though?&nbsp; Whether finding by unique id or date range, you're still asking for a list of results and the same list will be displayed the same way with the same data. So i'd say simply have overloads of your factory method.&nbsp; Of course if the use case is to go right to the editable object in the case of the unique id, your UI should know to call the factory method on the BB class, but that's because you're opening a different screen.<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>bpb2221 replied on Monday, January 12, 2009</h2>@ajj3085:<br>Here is a more explicit explanation of what is going on with the Water Bottle objects.<br><br>The unique ID would be for an editable business base.&nbsp; So it would pull every property of the Water Bottle object.&nbsp; This would be passed to a datasource on a form for editing.<br><br>The collection (between two dates) would be for a report.&nbsp; It would not pull every property of a Water Bottle object into the collection.&nbsp; This would be passed as a read only collection to a datasource on a report.&nbsp; In my case, ActiveReports. <br><br>In your opinion, would these two situations warrant two different classes? <br><br><br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Monday, January 12, 2009</h2>Well, it sounds like two use cases.<br><br>One you enter criteria (the unique id) and the user expects that water bottle to be dispalyed on screen for editing.&nbsp; So your WaterBottle would subclass BusinessBase and have a static factory that gets by id.<br><br>The other use case is that you're looking for all matching waterbottles.&nbsp; In that case, I'd think you'd have a WaterBottleList : BusinessListBase&lt;WaterBottleList, WaterBottleInfo&gt; and WaterBottleInfo : ReadOnlyBase.&nbsp; The list class would have a factory method that takes the search criteria.&nbsp; Of course, if you want the list to display even you enter the unique id you'd have a factory method for that as well.&nbsp; For example maybe they just need the "summary" the WaterBottleInfo providers and don't need to use the fullblown editable WaterBottle.<br><br>HTH<br>Andy<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>maxal replied on Monday, January 12, 2009</h2>I would create my own criteria class with all necessary properties and then have one DataPortal_Fetch method to analyze this criteria, doing the fetch one way or another.<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>SonOfPirate replied on Monday, January 12, 2009</h2><P>Andy's description of a WaterBottleInfo class is what I meant by lightweight object.&nbsp; It <EM>could</EM> have the same properties but none of the BO methods, etc. Since it is designed to simply display a list of water bottles in a list or grid, you can limit it to the properties that you want to display.&nbsp; The list manages all interaction.&nbsp; All you need is to bind each row to the same Unique ID that you will use to instantiate the individual instance of your WaterBottle class (BO) for editing.</P></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
