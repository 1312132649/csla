<html><header><title>Sibling Class</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Sibling Class</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/7602.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>rxelizondo posted on Thursday, September 10, 2009</h2><P>Hi,</P>
<P>I was wondering if someone could give me some advice regarding some CSLA design issue I am having.</P>
<P>Supposed that you have two classes with the following properties as follows:</P>
<P>Class Car<BR>{<BR>&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Model;<BR>&nbsp;&nbsp;&nbsp;&nbsp;Int&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Year;<BR>&nbsp;&nbsp;&nbsp;&nbsp;CarEngine TheEngine;<BR>}</P>
<P>Class CarEngine<BR>{<BR>&nbsp;Int&nbsp;&nbsp;&nbsp; HorsePower;<BR>&nbsp;Int&nbsp;&nbsp;&nbsp; NumberOfCylindes;<BR>}</P>
<P>The classes above are just **make believe**, overly simplified classes to **illustrate** the issue.</P>
<P>In order to make my life simpler, I decided that I was going to have one table containing columns to hold all the info for the classes listed below as follows:</P>
<P>Table Columns:<BR>&nbsp;&nbsp;&nbsp;Model<BR>&nbsp;&nbsp;&nbsp;Year<BR>&nbsp;&nbsp;&nbsp;HorsePower<BR>&nbsp;&nbsp;&nbsp;NumberOfCylindes</P>
<P>And there lies my predicament. I am currently using the Car class to implement all DataPortal_XYZ methods, so when the time comes for saving the data the DataPortal_Update function on my Car class gets the values from the CarEngine class and plops them in the one table.</P>
<P>So I have zero DataPortal_XYZ methods on the CarEngine class and for some reason that feels somewhat disturbing to me, like if I was doing something wrong since it does not fit the template.</P>
<P>What do you guys thing, any one has any suggestions?</P>
<P>Thanks.<BR></P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Thursday, September 10, 2009</h2>are you using DTOs to save to the database (like linq2sql classes)?  If so you could use field manager and pass in the DTO so the engine can add its values.<br /><br />It could also be that you could merge the car and engine classes too.. is there any reason to have them seperated?<br /><br />Or you could leave things as is.. I don't inherently see anything wrong.<br /><br />I realise you are just trying illistrate, but its possible in doing so you're leaving out an important detail.<br /><br />OH... and at the very least... does your use case really call for having seperate objects?  It might not..</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JoeFallon1 replied on Thursday, September 10, 2009</h2><P>I have done something similar. I have a top level BO that represents 28 of 30 columns in a table. It contains a child object that represents the other two. The child object has special code in it to store a byte array into a column in the same row. It also stores a text string related to the byte array. (Think Image and contentType.)</P>
<P>The top level BO does an Insert for the 28 fields and omits the other&nbsp;2 fields from the SQL. The DB fields are nullable or have default values. Then the child does and Update of the newly created row but only sends the data for the two fields. It gets the rowId from the parent.</P>
<P>The main reason I did this is that sending a byte array to SQL Server is best done with parameterized SQL. My standard SQL is dynamic and you can;t really mix the two styles. This has worked out quite well and the top level BO is used in many places and the byte array changes to whatever is required. (Logo image, form image, etc.)</P>
<P>Joe</P>
<P>&nbsp;</P></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
