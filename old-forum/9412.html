<html><header><title>CSLA Silverlight ASP.NET Forms Authentication and needing cookie pass-through to client</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>CSLA Silverlight ASP.NET Forms Authentication and needing cookie pass-through to client</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/9412.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>Adam posted on Friday, August 20, 2010</h2><p>CSLA Silverlight ASP.NET Forms Authentication and needing cookie pass-through to client<br />Hi,<br />We have a CSLA Silverlight application with ASP.NET Forms Authentication (logon page and all of app is in Silverlight).&nbsp; Authentication (and authorisation) works.<br />We have extended our application to include some reports, using&nbsp; SSRS 2008 R2 with custom ASP.NET Forms Authentication.&nbsp; These reports work via an asp.net logon test page.<br />We now need to couple these two together, which we believe we can achieve by using an ASP.NET Forms authentication cookie.&nbsp; We have made changes to the web.config files, but a cookie is never present on the Silverlight side and so we cannot authenticate the logged in user for reports.<br />Has anyone out there managed to do something similar and get a cookie in the Silverlight side?&nbsp; Any help would be much appreciated.&nbsp; <br />We have tried several variations in web.config files, currently the authentication section in both the application WCF web.config and application web web.config are the same as follows:<br /><br />&lt;authentication mode=&quot;Forms&quot;&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;forms &nbsp;&nbsp;&nbsp; name=&quot;sqlAuthCookie&quot;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; loginUrl=&quot;MSA.aspx&quot;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; protection=&quot;All&quot;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; timeout=&quot;60&quot;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; path=&quot;/&quot; /&gt;<br />&nbsp;&nbsp;&nbsp; &lt;/authentication&gt;<br />&nbsp;&nbsp;&nbsp; &lt;machineKey validationKey=&quot; ... &quot;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; decryptionKey=&quot; ... &quot;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; validation=&quot;SHA1&quot; /&gt;<br />&nbsp;&nbsp;&nbsp; &lt;!-- Deny anonymous user--&gt;<br />&nbsp;&nbsp;&nbsp; &lt;authorization&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;deny users =&quot;?&quot; /&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;allow users = &quot;*&quot; /&gt;<br />&nbsp;&nbsp;&nbsp; &lt;/authorization&gt;<br />&nbsp;&nbsp;&nbsp; <br />Can anyone advise please?<br /><br />Adam</p>
<p>Just to note I am using SL 3.5, CSLA 3.7, SSRS 2008 R2, IIS7</p></div><div style='padding:0 15 3 15;background-color:lightgreen'><h2>tmg4340 replied on Friday, August 20, 2010</h2><p>Are you creating the Forms cookie in your SL app?&nbsp; I think&nbsp;you need to get your SL app to write the Forms Authentication cookie.&nbsp; Then you should be good to go.</p>
<p>It&#39;s an older post, relating to Silverlight 2, but it should still work:</p>
<p><a href="http://interviews.dotnetthread.com/2009/02/implementing-forms-authentication-in.html">http://interviews.dotnetthread.com/2009/02/implementing-forms-authentication-in.html</a></p>
<p>HTH</p>
<p>- Scott</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Adam replied on Monday, August 23, 2010</h2><p>Thanks Scott this was exactly what I needed :)</p>
<p>Kind Regards</p>
<p>Adam Perkins</p>
<p><a href="http://www.flexiblesoftwaresolutions.co.uk">www.flexiblesoftwaresolutions.co.uk</a></p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
