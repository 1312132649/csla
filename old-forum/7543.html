<html><header><title>CSLA Light: Is it possible to send a Business Base class as a criteria object</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>CSLA Light: Is it possible to send a Business Base class as a criteria object</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/7543.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>starwar46 posted on Monday, August 31, 2009</h2>Hi there,<br /><br />Your help is needed, I am trying to pass a Business Base class(Customer) as a criteria to fetch another entity(Order), there are some properties on Customer which I want to make use of while querying for Order. I have written the code by following some leads on forum but I am getting error:<br /><br />public class NwndSingleCriteria : CriteriaBase<br />        where C : BusinessBase<br />    {<br />        private static PropertyInfo NwndBusinessProperty = RegisterProperty(typeof(NwndSingleCriteria), new PropertyInfo("NwndBusiness", "Business Entity"));<br />        public C NwndBusiness<br />        {<br />            get { return ReadProperty(NwndBusinessProperty); }<br />        }<br />        <br />        public NwndSingleCriteria(C value)<br />            : base(typeof(B))<br />        {<br />            LoadProperty(NwndBusinessProperty, value);            <br />        }<br /><br />        #if SILVERLIGHT<br />   <br />    { }<br />#else<br />        protected NwndSingleCriteria()<br />    { }<br />#endif<br /><br />        #region MobileFormatter<br /><br />        <br />        protected override void OnGetState(SerializationInfo info, StateMode mode)<br />        {<br />            base.OnGetState(info, mode);<br />            info.AddValue("Nwnd.Business.Base._value", NwndBusiness);<br />        }<br />        <br />        protected override void OnSetState(SerializationInfo info, StateMode mode)<br />        {<br />            base.OnSetState(info, mode);<br />            //NwndBusiness = info.GetValue("Nwnd.Business.Base._value");<br />        }<br /><br />        #endregion<br /><br />the error that I am getting is:<br /><br /> Message="Type 'Nwnd.Business.Customer' with data contract name 'Customer:http://schemas.datacontract.org/2004/07/Nwnd.Business' is not expected. Add any types not known statically to the list of known types - for example, by using the KnownTypeAttribute attribute or by adding them to the list of known types passed to DataContractSerializer."<br /><br /><br />Please let me know if thats even possible?<br /><br />Thanks</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>sergeyb replied on Monday, August 31, 2009</h2>I have done something similar, but I did not use CriteriaBase.  Simply have your BB object that you use as criteria and just pass it along to dp.BeginFetch()<br /><br />Sergey Barskiy<br />Principal Consultant<br />office: 678.405.0687 | mobile:&#160;404.388.1899<br /><br />Microsoft Worldwide Partner of the Year | Custom Development Solutions, Technical Innovation<br /><br />-----Original Message-----<br />From: starwar46 [mailto:cslanet@lhotka.net] <br />Sent: Monday, August 31, 2009 1:40 PM<br />To: Sergey Barskiy<br />Subject: [CSLA .NET] CSLA Light: Is it possible to send a Business Base class as a criteria object<br /><br />Hi there,<br /><br />Your help is needed, I am trying to pass a Business Base class(Customer) as a criteria to fetch another entity(Order), there are some properties on Customer which I want to make use of while querying for Order. I have written the code by following some leads on forum but I am getting error:<br /><br />public class NwndSingleCriteria : CriteriaBase<br />        where C : BusinessBase<br />    {<br />        private static PropertyInfo NwndBusinessProperty = RegisterProperty(typeof(NwndSingleCriteria), new PropertyInfo("NwndBusiness", "Business Entity"));<br />        public C NwndBusiness<br />        {<br />            get { return ReadProperty(NwndBusinessProperty); }<br />        }<br />        <br />        public NwndSingleCriteria(C value)<br />            : base(typeof(B))<br />        {<br />            LoadProperty(NwndBusinessProperty, value);            <br />        }<br /><br />        #if SILVERLIGHT<br />   <br />    { }<br />#else<br />        protected NwndSingleCriteria()<br />    { }<br />#endif<br /><br />        #region MobileFormatter<br /><br />        <br />        protected override void OnGetState(SerializationInfo info, StateMode mode)<br />        {<br />            base.OnGetState(info, mode);<br />            info.AddValue("Nwnd.Business.Base._value", NwndBusiness);<br />        }<br />        <br />        protected override void OnSetState(SerializationInfo info, StateMode mode)<br />        {<br />            base.OnSetState(info, mode);<br />            //NwndBusiness = info.GetValue("Nwnd.Business.Base._value");<br />        }<br /><br />        #endregion<br /><br />the error that I am getting is:<br /><br /> Message="Type 'Nwnd.Business.Customer' with data contract name 'Customer:http://schemas.datacontract.org/2004/07/Nwnd.Business' is not expected. Add any types not known statically to the list of known types - for example, by using the KnownTypeAttribute attribute or by adding them to the list of known types passed to DataContractSerializer."<br /><br /><br />Please let me know if thats even possible?<br /><br />Thanks<br /><br /></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Monday, August 31, 2009</h2>I believe you need to implement ICriteria as well, otherwise BusinessBase&lt;T&gt; should work fine as a criteria object.</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>starwar46 replied on Monday, August 31, 2009</h2>hey thanks, that was so simple.</div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
