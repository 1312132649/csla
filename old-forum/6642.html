<html><header><title>Enhancement to ErrorDialog</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Enhancement to ErrorDialog</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/6642.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>Jack posted on Thursday, March 19, 2009</h2>Any thoughts of letting it attach to multiple data providers?&nbsp; I like the idea of creating it once on a 'master' type page and then as I open various views or even create data providers in code then I can add them to the dialog source.<br><br>Thanks<br><br>jack<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Thursday, March 19, 2009</h2><P>I've thought about that as well, but I'm not entirely sure how to actually make it work without causing a memory leak. Maybe we can figure it out.</P>
<P>The current model is this:</P>
<P>&lt;csla:ErrorDialog x:Key="dialog"&nbsp;... /&gt;</P>
<P>&lt;csla:CslaDataProvider ... DataChangedHandler="{StaticResource dialog}" ... /&gt;</P>
<P>What happens is that the data provider sets the error dialog's DataContext (or Source in SL) property to the data provider, allowing the error dialog to hook the data provider's DataChanged event.</P>
<P>Hooking an event basically sets up a reference from the data provider to the error dialog.</P>
<P>Hmm. Maybe there isn't an issue here. When a form is unloaded, any data provider controls would go away, and so they'd release their reference to the error dialog when the GC destroyed them.</P>
<P>Right now the error dialog maintains a reference to the data provider, but it really wouldn't need to do so, because it could be a passive event listener.</P>
<P>To make this work, the ErrorDialog would need to not hook the event based on the DataContext property - because that's out of my control. It could do it like the SL version, via a Source property.</P>
<P>The only wierd part of this, is that then the Source property wouldn't <EM>actually</EM> reflect the source. I'd be using a property like a method, and that's pretty lame.</P>
<P>But I could go a step further and drop the Source and DataContext properties (or at least ignore DataContext), and have an actual Register() method, that is invoked by the CslaDataProvider when its DataChangedHandler property is set. Yeah, that'd be a pretty small change from how it works right now, and would still result in an intuitive model.</P>
<P>Of course 3.6.2 is <EM>supposed</EM> to be feature-complete, and yet if I wait for 3.6.3 then this would be a clear breaking change over the current model... Choices, choices...</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Jack replied on Friday, March 20, 2009</h2>I like the register idea.&nbsp; <br><br>It would be nice too if there reference was maintained on the DataProvider so that you could get at the ErrorDialog from code.&nbsp; I'm planning on extending it to add some logging etc. <br><br>It would also allow you to unregister if you created/destroyed a dataprovider in code.<br><br>jack<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Saturday, March 21, 2009</h2>I put this change into svn, and will probably do a 3.6.2 RC release this weekend that will include it.</div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
