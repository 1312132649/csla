<html><header><title>typeof( BusinessBase&lt;T&gt; ) ???</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>typeof( BusinessBase&lt;T&gt; ) ???</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/38.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>dredge posted on Tuesday, May 09, 2006</h2><P>In previous CSLA versions, I would use typeof(BusinessBase) quite often, to ensure the object I was looking at was a BusinessBase CSLA object. With the new generics in place, I can't call typeof(BusinessBase&lt;T&gt;) without knowing the actual Type that T is. This presents a problem, because I don't know the Type... I just know that I want to ensure it's a BusinessBase.</P>
<P>Should I be using typeof(Core.BusinessBase) since this is a concrete class that BusinessBase&lt;T&gt; inherits from? or is there a way to use typeof(Businessbase&lt;T&gt;) without knowing the actual T type?</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>xal replied on Tuesday, May 09, 2006</h2>Well, it took me some time to find it, but I did!<br>Here's a link to a thread where I posted a solution to your problem not long ago:<br>http://www.searchcsla.com/Details.aspx?msn_id=26406<br><br><br>It made me mad too :D<br><br>Andrés<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Jav replied on Tuesday, May 09, 2006</h2><P>You should be creating your BusinessBase derived classes like this</P>
<P>Public Class MyClass<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Inherits Csla.BusinessBase(<EM><STRONG>Of MyClass</STRONG></EM>)</P>
<P>Now if you want to check theType of an object&nbsp; you can use</P>
<P>If TypeOf obj Is MyClass Then<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.......</P>
<P>Jav</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>dredge replied on Tuesday, May 09, 2006</h2><P>Jav,</P>
<P>Thanks for the info,&nbsp;but you're&nbsp;a little off. Both of you assume that I have a specific type derived from BusinessBase, that I am checking against. I am trying to check against BusinessBase directly, not a derived type. </P>
<P>FYI - I found two ways of working this.</P>
<P>1) My previous thought of using Core.BusinessBase works just fine.</P>
<P>2) Type t = typeof(BusinessBase&lt;&gt;); if (obj.GetType().IsSubClassOf(t)){ do something }</P>
<P>I wasn't aware that I could use typeof(BusinessBase&lt;&gt;) without specifying a Type T in the &lt;&gt;, previously. Thanks to Xal for his post pointing me in this direction.</P>
<P>This doesn't completley solve my problem, though. I also want to be able to convert an object from Objct type, to BusinessBase&lt;T&gt; type, without knowing the &lt;T&gt; Type... </P>
<P>BusinessBase&lt;&gt; obj = (BusinessBase&lt;&gt;)</P>
<P>This code doesn't work, and I haven't quite figured out if I can work around this, without using Core.BusinessBase.</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Mark replied on Tuesday, May 09, 2006</h2><P>It sounds like you're trying to get polymorphic behavior out of a generic - which is going to cause all sorts of headaches, since generics aren't polymorphic (as you've discovered).</P>
<P>What is your goal in casting from object to BusinessBase&lt;T&gt;?&nbsp; If it's to access&nbsp;common functions across all your business objects, either use Core.BusinessBase or create your own interface that defines the common functions you wish to call (let's say ICustomBusinessObject or some such...)</P>
<P>&nbsp;</P>
<P>&nbsp;</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Jav replied on Tuesday, May 09, 2006</h2><P>aaah.&nbsp; There is also the Interface iBusinessObject, have you tried using (vb)&nbsp;If TypeOf obj Is Csla.Core.IBusinessObject Then ....</P>
<P>Jav</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>xal replied on Tuesday, May 09, 2006</h2>I'm intrigued... why exactly do you need to cast to BusinessBase&lt;&gt; ?<br>There are some interfaces that can help you, but.... are you by any chance trying to create custom controls? or classes / methods that do something to your business objects?<br><br>If that's the case, why not go the generic route?<br><br>If it's a method, its as easy as using a constraint in the method (such as Dataportal methods have)<br><br>Something like<br>Public Sub SaveMyBO(Of T as Csla.BusinessBase(Of T))(ByVal bo as T)<br>bo.Save()<br>End Sub<br><br>Constraints in c# use a where clause instead of "as" like vb does.<br><br><br>If it's a class then it's the same thing. Although if it's controls / forms inheritance that you're after, then you'll want to read this:<br>http://groups.msn.com/cslanet/general.msnw?action=get_message&amp;mview=0&amp;ID_Message=26430&amp;LastModified=4675571209386681035<br><br><br>Andrés</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>dredge replied on Tuesday, May 09, 2006</h2><P>the basic scenario is that I've got a method that accepts an Object parameter. If this parameter is&nbsp;derived from&nbsp;BusinessObject, then I need to get to the methods on that BusinessObject. If the Object is not a BusinessObject, then i do other stuff with it.</P>
<P>The basic code i wanted was:</P>
<P>public void MyMethod(object obj){<BR>&nbsp; if (obj.GetType().IsSubClassOf(typeof(BusinessBase&lt;&gt;)){<BR>&nbsp;&nbsp;&nbsp;&nbsp;DoWorkHere();<BR>&nbsp; }<BR>}</P>
<P>And that all works fine... except, that I wanted to be able to cast the Object parameter to a BusinessBase&lt;T&gt; object directly, so I could call methods of BusinessBase&lt;T&gt;. But, like previous replies have stated, generics are not polymorphic, so I can't directly accomplish what I wanted. I ended up using Core.BusinessBase&nbsp;instead of BusinessBase&lt;T&gt;&nbsp;and it works fine.</P>
<P>public void MyMethod(object obj){<BR>&nbsp; if (obj.GetType().IsSubClassOf(typeof(BusinessBase&lt;&gt;)){<BR>&nbsp;&nbsp;&nbsp; Core.BusinessBase bb =&nbsp;(Core.BusinessBase)obj;<BR>&nbsp; }<BR>}</P>
<P>Thanks to all for the pointers and responses. I wasn't aware that generics weren't polymorphic, previously.</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>DogSpots replied on Tuesday, May 09, 2006</h2><P><FONT face=Tahoma size=2>Here's&nbsp;an article at MSDN that might help:<BR></FONT><A href="http://msdn2.microsoft.com/en-us/library/b8ytshk6(VS.80).aspx"><FONT face=Tahoma size=2><STRONG>How to: Examine and Instantiate Generic Types with Reflection</STRONG></FONT> </A></P>
<P><FONT face=Tahoma size=2>This will allow you to write code to create a generic without knowing the exact type of the generic at design-time.&nbsp; This is pretty powerful, but be sure you actually need it before you march off in this direction.&nbsp; The whole point of generics is to give you a strongly typed object to work with and with this you are purposely circumventing that so that you can work with base objects instead.</FONT></P>
<P><FONT face=Tahoma size=2>I've used this technique to get around the fact that I cannot create a generic windows control.&nbsp; When I set the datasource property of my control to a BusinessListBase&lt;T,C&gt;, I automatically create a&nbsp;generic helper object that is strongly typed to T and C whatever T and&nbsp;C might be.&nbsp; Then, I interact with my helper instead of the control.</FONT></P>
<P><FONT face=Tahoma size=2>Good luck.</FONT></P>
<P>&nbsp;</P></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
