<html><header><title>CSLA 4 OnChildChanged SL4</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>CSLA 4 OnChildChanged SL4</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/9449.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>JJLoubser posted on Monday, August 30, 2010</h2><p>is there any reason why the OnChildChanged will not work in CSLA 4 SL4?</p>
<p>//parent&nbsp;</p>
<p>public partial class OrgStructureER : BusinessBase&lt;OrgStructureER&gt;<br />&nbsp;&nbsp;&nbsp; {</p>
<p>protected override void OnChildChanged(Csla.Core.ChildChangedEventArgs e)</p>
<p>{</p>
<p>// not throwing</p>
<p>}</p>
<p>we change properties in this child:</p>
<p>private static readonly PropertyInfo&lt;CompanyEC&gt; CompanyProperty = RegisterProperty&lt;CompanyEC&gt;(p =&gt; p.Company, RelationshipTypes.Child);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; public CompanyEC Company<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; get<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //if (FieldManager.FieldExists(CompanyProperty))<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return ReadProperty(CompanyProperty);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //else<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //&nbsp;&nbsp;&nbsp; return null;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; set<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; LoadProperty(CompanyProperty, value);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</p>
<p>// child is a BusinessBase</p>
<p>I tried al&nbsp;the diffrent&nbsp;RelationshipTypes... not working ...</p>
<p>&nbsp;</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>tmg4340 replied on Monday, August 30, 2010</h2><p>OnChildChanged is designed to work with child collections.&nbsp; You have a single instance of an object as a child.&nbsp; In that case, CSLA won&#39;t manage that for you.&nbsp; You have to hook into the change events yourself.</p>
<p>HTH</p>
<p>- Scott</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JJLoubser replied on Monday, August 30, 2010</h2><p>sorry scott your answer is incorrect, we test it with a normal TestER and TestChildEC, it works, but for our advance&nbsp;objects with ER to EC with ECL it is not working...</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Monday, August 30, 2010</h2><p>Your failure scenario is:</p>
<p>BB (root) with BB (child) with BLB (child) with (BB) child</p>
<p>And when a child of the BLB is changed, the event doesn&#39;t cascade up to the root?</p></div><div style='padding:0 15 3 15;background-color:lightgreen'><h2>JJLoubser replied on Tuesday, August 31, 2010</h2><p>Sorry guys, found my mistake, I used LoadProperty instead of SetProperty in my child objects. Everything works fine now. BB(root) with BB (child) with BLB(child) recursive works, BB(root) onChildChange works for all children BB(child) and BLB(child).&nbsp;</p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
