<html><header><title>Silverlight - How do I create child object via data portal asynchronously?</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Silverlight - How do I create child object via data portal asynchronously?</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/9790.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>Jaans posted on Monday, November 22, 2010</h2><p>I using CSLA 3.8.4 and Silverlight 4</p>
<p>I need to go over the data portal back to the server when the child object is created. Normally for root objects I would do something like the snipped below&nbsp;inside the factory, but I cannot find the async (BeginXXX) for a child?<br /><br />Am I just missing something simple ?<br /><br />Thanks!</p>
<pre style="font-family:consolas;"><span style="color:blue;">internal</span>&nbsp;<span style="color:blue;">static</span>&nbsp;<span style="color:blue;">void</span>&nbsp;<span style="color:darkcyan;">New</span>(&nbsp;<span style="color:darkblue;">EventHandler</span>&lt;<span style="color:darkblue;">DataPortalResult</span>&lt;<span style="color:darkblue;">Task</span>&gt;&gt;&nbsp;callback&nbsp;)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:blue;">var</span>&nbsp;dp&nbsp;=&nbsp;<span style="color:blue;">new</span>&nbsp;<span style="color:darkblue;">DataPortal</span>&lt;<span style="color:darkblue;">Task</span>&gt;();<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dp.<span style="color:magenta;">CreateCompleted</span>&nbsp;<span style="color:darkcyan;">+=</span>&nbsp;callback;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dp.<span style="color:darkcyan;">BeginCreate</span>();<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:green;">//&nbsp;Where&nbsp;is&nbsp;dp.BeginCreateChild()?</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</pre></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JonnyBee replied on Monday, November 22, 2010</h2><p>Hi,</p>
<p>You should call the regular BeginCreate method - and make sure to call MarkAsChild in your DataPortal_Create() method or &lt;ObjectFactory&gt;.MarkAsChild(obj) in if using ObjectFactory classes.</p>
<p>&nbsp;</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Jaans replied on Monday, November 22, 2010</h2><p>Thanks for the reply Jonny</p>
<p>I&#39;m not using the ObjectFactory and I already have the following in my data portal for my child (for non Silverlight scenarios:&nbsp;the application has a mix of Silverlight, WPF and ASP.NET clients):</p>
<p>
<p><span style="font-family:Consolas;color:#0000ff;font-size:x-small;"><span style="font-family:Consolas;color:#0000ff;font-size:x-small;"><span style="font-family:Consolas;color:#0000ff;font-size:x-small;"><span style="font-family:Consolas;color:#0000ff;font-size:x-small;"><span style="font-family:Consolas;color:#0000ff;font-size:x-small;"><span style="font-family:Consolas;color:#0000ff;font-size:x-small;">
<p>protected <span style="font-family:Consolas;font-size:x-small;"><span style="font-family:Consolas;font-size:x-small;"></span></span><span style="font-family:Consolas;color:#0000ff;font-size:x-small;"><span style="font-family:Consolas;color:#0000ff;font-size:x-small;"><span style="font-family:Consolas;color:#0000ff;font-size:x-small;">override</span></span></span><span style="font-family:Consolas;font-size:x-small;"><span style="font-family:Consolas;font-size:x-small;"> </span></span><span style="font-family:Consolas;color:#0000ff;font-size:x-small;"><span style="font-family:Consolas;color:#0000ff;font-size:x-small;"><span style="font-family:Consolas;color:#0000ff;font-size:x-small;">void</span></span></span><span style="font-family:Consolas;font-size:x-small;"><span style="font-family:Consolas;font-size:x-small;"> </span></span><span style="font-family:Consolas;color:#008b8b;font-size:x-small;"><span style="font-family:Consolas;color:#008b8b;font-size:x-small;"><span style="font-family:Consolas;color:#008b8b;font-size:x-small;">Child_Create</span></span></span><span style="font-family:Consolas;font-size:x-small;"><span style="font-family:Consolas;font-size:x-small;">() { ... }</span></span></p>
</span></span></span></span></span></span></p>
</p>
<p>Are you saying I need add another method in the data portal that follows the pattern for root (non-child) objects ie. DataPortal_Create() ?</p>
<p>I guess I could just call Child_Create() from the DataPortal_Create() after marking the &quot;root&quot; object as child - right?</p>
<p>Ps: The above usage of Child_Create() is my understanding of what should be created for child objects, but I&nbsp;may be mixing old school CSLA and newer usages of CSLA as a matter of ignorance.</p>
<p>Many thanks,<br />Jaans</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>pgroenenstein replied on Thursday, December 09, 2010</h2><p>Jaans</p>
<p>Did you actually got a answer on this? I need it too!</p>
<p>Thanks</p>
<p>&nbsp;</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Jaans replied on Thursday, December 09, 2010</h2><p>I basically implemented it as I would for a root object.</p>
<p>On the (child) factory I called the BeginCreate (as per original post above) and in the DataPortal_Create implementation, I called MarkAsChild() as Jonny suggested. So, I don&#39;t have a Child_Create() method&nbsp;in the dataportal, because it won&#39;t be called.</p>
<p>Unless I&#39;m missing something with all of this, I personally I really don&#39;t like doing this - the Silverlight / Async behavior is not somewhat inconsistent with the pattern for the Sync implementation. Furthermore, I would expect the framework to have a BeginCreateChild() or similar method that like it&#39;s syncrhonous counterpart, will appropriately call the MarkAsChild() method.</p>
<p>With the above I cannot implement the object as a &quot;Switchable&quot; object&nbsp; (Yes I know, switchable is like a anti-pattern, but there are few occasions that make it very ideal). Also,&nbsp;this really messes about my code generation templates.</p>
<p>I&#39;m unable to confirm whether this anomaly is present for CSLA 4.0 since I ran into this issue on 3.8.4.</p>
<p>Hope that helps.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>skumarsamy replied on Sunday, October 02, 2011</h2><p>Is There any sample codes for creating a child object and assigning to the parent object?</p>
<p>I&#39;m looking for that please</p>
<p>regards</p>
<p>kumar</p></div><div style='padding:0 15 3 15;background-color:lightgreen'><h2>RockfordLhotka replied on Sunday, October 02, 2011</h2>My recommended solution for this is to use a command object that goes to the server, creates the child, and returns the child as a property. I demonstrate how to do this in the Using CSLA 4 ebook series.</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>skumarsamy replied on Sunday, October 02, 2011</h2><p>Thanks for your kind reply. But I don&#39;t get the point what is the best way to use your framework. I will explain.</p>
<p>I have your Expert Business Objects Book that version is 2008</p>
<p>I have your eBook series gives me knowledge of OO, that is with broken pieces of documents &amp; codes that never sync with the samples. Your libraries have conflicts with my 2010 VS and different projects with different libraries when project codes linked then the code breaks.</p>
<p>I have your video series that is also broken and that helps to understand, but when comes to real world scenario the series doesn&#39;t helps fully to our potential. If there is one PET Shop kind of example with all the patterns and code samples would be greatly appriciated.</p>
<p>When tried to get your code base build and use those libraries there also the conflicts remain same, if get from NUGet Manager, there also conflicts. All your samples are running no issues in that.</p>
<p>I tried implementing a base class to be inherited through out my object model, i don&#39;t see any good portion to get my things done.</p>
<p>I still appriciate &amp; acknowledge the work and the effort that you and your team have put. But too many samples too many libraries, no API documents, no single Instance example makes me tired.</p>
<p>Is there any best way to approach your books, videos, examples, codes and the most important the Framework.</p>
<p>thanks</p>
<p>kumar&nbsp;</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Sunday, October 02, 2011</h2><p>I am sorry you are having a hard time with the 2008 book and the ebook series. </p>
<p>I am sure you are aware that the 2008 book covers the framework and ProjectTracker as it was about 4 years ago. It should not be a surprise that it is no longer entirely accurate for current code. This is the sad reality of computer books - they age rapidly due to changes in technology.</p>
<p>In terms of the ebook series, books 1-4 are complete at this time, and have code samples that should work fine. If the code samples aren&#39;t working, please let me know specifically what is wrong.</p>
<p>Book 6 is in final draft, and is essentially complete, with working code. Again, if the code isn&#39;t working please provide specific details.</p>
<p>Books 5 and 7 are not done, that is true.</p>
<p>The 4.1 samples should all work. Jonny went through them all during the 4.1 dev process. They are all bound to the assemblies in the Dependencies folder that is downloaded along with the samples. If they are not working, please provide specific details.</p>
<p>If you try to bind the 4.1 samples against other versions of the CSLA assemblies they may fail. This is because CSLA has been evolving for the past 10+ years, and continues to evolve. Although we try to keep the samples up to date, there are only so many hours in each day. And I&#39;m too old any longer to believe in that weekends provide infinite time - as pleasant as that myth was, I must confess it was never true...</p>
<p>From time to time I have considered creating a commercial version of CSLA, so I could hire developers and people to write documentation. That&#39;s not a business model I have chosen to follow. The advantage is that CSLA remains open source (free as in speech and beer). The drawback is that the team of volunteers that maintain and enhance the framework (including me) all have real jobs too, and so we can only spend so much time on the framework, samples, books, and videos.</p>
<p>It is what it is.</p></div><div style='padding:0 15 3 15;background-color:lightgreen'><h2>RockfordLhotka replied on Sunday, October 02, 2011</h2><p>To more directly answer your question though, look in the Using CSLA 4: ASP.NET MVC ebook (and the associated sample code), at the ProjectResourceEditCreator and ResourceAssignmentEditCreator command objects. These types implement the correct pattern to create/fetch a child object from the server. They aren&#39;t used asynchronously in the web app, but the code pattern is consistent.</p>
<p><a href="http://www.lhotka.net/cslacvs/viewvc.cgi/core/trunk/Samples/NET/cs/ProjectTracker/ProjectTracker.Library/ProjectResourceEditCreator.cs?view=markup">http://www.lhotka.net/cslacvs/viewvc.cgi/core/trunk/Samples/NET/cs/ProjectTracker/ProjectTracker.Library/ProjectResourceEditCreator.cs?view=markup</a></p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
