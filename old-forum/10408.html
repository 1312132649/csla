<html><header><title>&quot;Validation&quot; rule with exception</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>&quot;Validation&quot; rule with exception</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/10408.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>Lazaro posted on Wednesday, June 01, 2011</h2><p style="margin:0in 0in 10pt;" class="MsoNormal"><span style="font-size:small;"><span style="font-family:Calibri;">Hello,</span></span></p>
<p style="margin:0in 0in 10pt;" class="MsoNormal"><span style="font-size:small;"><span style="font-family:Calibri;">I am using CSLA 4 and I need to create an authorization rule (or at least a rule that throws an exception if it does not pass) that would not allow setting a property if the value being set is not part of a specific domain (Ex. list).</span></span></p>
<p style="margin:0in 0in 10pt;" class="MsoNormal"><span style="font-size:small;"><span style="font-family:Calibri;">Ex. <em>There is an integer that should be part of a list that was fetched from the database.</em></span></span></p>
<p style="margin:0in 0in 10pt;" class="MsoNormal"><span style="font-size:small;"><span style="font-family:Calibri;">The problem is that when the authorization rule executes it does not know the future value that will be set to the property. </span></span></p>
<p style="margin:0in 0in 10pt;" class="MsoNormal"><span style="font-size:small;"><span style="font-family:Calibri;">Note: Validation Rules are not an option because by the time they execute the value is set and does not throw exceptions. </span></span></p>
<p style="margin:0in 0in 10pt;" class="MsoNormal"><span style="font-size:small;"><span style="font-family:Calibri;">What would be an elegant way to implement this without breaking the CSLA standards?</span></span></p>
<p style="margin:0in 0in 0pt;" class="MsoNormal"><span style="font-size:small;"><span style="font-family:Calibri;">Thanks,</span></span></p>
<p style="margin:0in 0in 0pt;" class="MsoNormal"><span style="font-size:small;"><span style="font-family:Calibri;">Lazaro</span></span></p></div><div style='padding:0 15 3 15;background-color:lightgreen'><h2>RockfordLhotka replied on Wednesday, June 01, 2011</h2><p>You need to think about the consequences of such an action. This is less about &quot;CSLA standards&quot; than it is about what data binding expects.</p>
<p>Data binding (generally speaking) doesn&#39;t like exceptions to occur in property setters. So if you go down this road, you may find that extra work is required in the UI to work around the exception, or the fact that the poor user is locked into that field and can&#39;t get out without using Task Manager to stop the process (depending on the UI technology).</p>
<p>Additionally, data binding (generally speaking) doesn&#39;t like to put a value into a property and to then have the value not be there, or to be different - at least not without a PropertyChanged event reporting that the value has been changed (reverted).</p>
<p>And that is, I think, the answer. Create a business rule (not validation) that reverts the property to its previous value. That requires tracking the previous value, but will &quot;prevent&quot; it from being set to an invalid value without violating the expectations of data binding.</p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
