<html><header><title>3.5 SP1 causing problems with DynamicMethodDelegate?</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>3.5 SP1 causing problems with DynamicMethodDelegate?</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/5337.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 posted on Wednesday, September 03, 2008</h2>Hi,<br><br>I've upgraded to 3.5 SP1, and now I'm getting AccessViolationExceptions.&nbsp; I've traced the exceptions back to some use of reflection where the <a href="http://www.codeproject.com/KB/cs/dynamicmethoddelegates.aspx">DynamicMethodDelegate</a> is involved.&nbsp; I haven't specifically narrowed down where the problem is, because frustratingly enough attaching a debugger causes the exception to go away.&nbsp; Argh!<br><br>Anyone else encounter this?<br><br>Andy<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Wednesday, September 03, 2008</h2>Is it a trust issue? Are you somehow not running in FullTrust when outside the debugger?</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Thursday, September 04, 2008</h2>The code should be running under full trust.&nbsp; It's a locally installed ClickOnce application, and I have this in my deployment manifest:<br><br>&nbsp; &lt;trustInfo&gt;<br>&nbsp;&nbsp;&nbsp; &lt;security&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;applicationRequestMinimum&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;PermissionSet Unrestricted="true" ID="Custom" SameSite="site" /&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;defaultAssemblyRequest permissionSetReference="Custom" /&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/applicationRequestMinimum&gt;<br>&nbsp;&nbsp;&nbsp; &lt;/security&gt;<br>&nbsp; &lt;/trustInfo&gt;<br><br>It's confusing, because the same code was running just fine prior to SP1.&nbsp; <br><br>I'm not sure I'll pursue this much longer though.. my use of the DMD that is causing a problem is in my custom DAL assembly, that I was replacing with Linq to Sql anyway.&nbsp; So I've just gotten more aggressive in porting everything to Linq.<br><br>Oddly, your implementation of DMD works fine..<br></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
