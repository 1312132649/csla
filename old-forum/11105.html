<html><header><title>Fetch a parent list with its children in 1 reader</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Fetch a parent list with its children in 1 reader</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/11105.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>vbbeta posted on Monday, January 30, 2012</h2><p>Hey guys i&#39;m trying to figure out if there is a way to fetch a Parent list (e.g Customer Sales)&nbsp;together&nbsp;with its&nbsp;children&nbsp;(e.g Sales Items) in 1&nbsp;data-reader&nbsp;without going back to the database and opening a new reader for each child item&nbsp;</p></div><div style='padding:0 15 3 15;background-color:lightgreen'><h2>JonnyBee replied on Monday, January 30, 2012</h2><p>Sure you can, at least with SQL Server. </p>
<p>Just make sure to set MARS (multiple active result sets) on in your connection string.</p></div><div style='padding:0 15 3 15;background-color:lightgreen'><h2>vbbeta replied on Monday, January 30, 2012</h2><p>Hi thanks for the answer i appriciate this&nbsp;</p>
<p>but let me ask you how do i set this up in a DataPortal_Fetch of two class what do i need to pass in at the child level object Is It a reader or a Command</p>
<p>&nbsp;</p></div><div style='padding:0 15 3 15;background-color:lightgreen'><h2>JonnyBee replied on Monday, January 30, 2012</h2><p>Read more about MARS here:</p>
<p><a href="http://msdn.microsoft.com/en-us/library/haa3afyz%28v=vs.71%29.aspx">http://msdn.microsoft.com/en-us/library/haa3afyz%28v=vs.71%29.aspx</a></p></div><div style='padding:0 15 3 15;background-color:lightgreen'><h2>pbusch replied on Monday, January 30, 2012</h2><p>You&nbsp;might also want to check&nbsp;this dnrTV episode&nbsp;(<a href="http://www.dnrtv.com/default.aspx?showNum=60">http://www.dnrtv.com/default.aspx?showNum=60</a>).&nbsp; Rocky did a presentation on using CSLA.net as a Data Access Layer.&nbsp; Around 12:40 into the episode he talks how to&nbsp;query for the Parent-Child-GrandChild all from the parent.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>tiago replied on Monday, January 30, 2012</h2><p>Have a look at DeepLoad sample <a href="http://cslagenfork.codeplex.com/releases/view/79758">http://cslagenfork.codeplex.com/releases/view/79758</a></p>
<p>This code was generated by CslaGenFork but you can use it as an example of fecthing a data structure 6 levels deep in a single round trip to the database. And it uses a single data reader...</p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
