<html><header><title>Struggling with Child object concept in CSLA</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Struggling with Child object concept in CSLA</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/4013.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>RameshKandukuri posted on Monday, December 10, 2007</h2><P>I have been evaluating and playing with CSLA from last one week. Please correct me if my observations are wrong. </P>
<P>Whether an object is child or parent(root) has to made at the design time (when&nbsp; you write code for that object's class). Being a child or parent affects how that object is persisted in a database. A child's inert/update/delete logic HAS to be always called from within a parent - since we cannot call Save method inside a child.&nbsp;Is this right? </P>
<P>This means if&nbsp; I need to just edit a single child object, the parent object has to be updated too.&nbsp;But&nbsp;a child object&nbsp;need not to be loaded from a full parent object instance. It can be, but not all the time. A ParentId is sometimes enough for a child object to stand on its own.&nbsp;It depends on the UI design (that particular use case).&nbsp;It is a UI behavior in my opinion.&nbsp;</P>
<P>The framework need to allow even a child object to stand on its own. Can&nbsp;I have Static Factory methods on the child to call Delete/Update/Insert directly on&nbsp;the child object?</P>
<P>Thank you.</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Q Johnson replied on Monday, December 10, 2007</h2><P>Your struggle will be over when you let go of the idea that an entity in your problem domain is only modeled in your code in one way, one time.</P>
<P>An Invoice is a good example.&nbsp; If you show the user a Customer (parent) with a list of available Invoices (children), you could allow them to select a single invoice and open it in a new screen/dialog for editing - as a an Editable Root Object (which will probably be a PARENT in this context with Line Item children, right?).</P>
<P>You model the items in your problem domain in the appropriate manner for the behavior you are modeling.&nbsp;&nbsp;<STRONG>When</STRONG> the item is behaving as a child, it should be coded as a child.&nbsp;&nbsp;<STRONG>When</STRONG> it is behaving as a parent, code it as a parent.&nbsp; </P>
<P>It's all about the behavior.</P>
<P>Have fun with CSLA.</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RameshKandukuri replied on Monday, December 10, 2007</h2><P>Thank you&nbsp;"Q" &nbsp;for the reply.</P>
<P><STRONG>When</STRONG> the item is behaving as a child, it should be coded as a child.&nbsp;&nbsp;<STRONG>When</STRONG> it is behaving as a parent, code it as a parent.&nbsp; " I totally get this and hence lies my challenge.&nbsp;If my object has both Parent and Child behaviors do we then create 2 separate classes - Same Invoice class behaving as Child and also as a root. Or is there a way to represent both the behaviors in one class?</P>
<P>&nbsp;</P>
<P>Thank you.</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Q Johnson replied on Tuesday, December 11, 2007</h2><BLOCKQUOTE><div><img src="/Themes/default/images/icon-quote.gif"> <strong>RameshKandukuri:</strong></div><div>
<P>If my object has both Parent and Child behaviors do we then create 2 separate classes - Same Invoice class behaving as Child and also as a root. Or is there a way to represent both the behaviors in one class?</P>
<P></div></BLOCKQUOTE></P>
<P>You are going to have a hard time letting go of the "my object" idea - as we all did at some point.&nbsp; But you don't have a <STRONG>single</STRONG> object here.&nbsp; Objects should be defined by their behaviors and you have potentially <STRONG>several</STRONG> here.</P>
<P>So <STRONG>YES</STRONG>,&nbsp;create them as separate classes <STRONG>because they&nbsp;have separate behavior</STRONG>.&nbsp; [After you have worked with the framework for a while, you can consider whether you want to experiment with the "switchable" object.&nbsp; But frankly, that over-simplifies the behaviors in my opinion.&nbsp; It seems to presuppose that the object behaves only one way as a root object and only one way as a child object.]&nbsp; </P>
<P>The Invoice we used in the earlier example certainly could behave very differently in different child scenarios.&nbsp; When it's a child of customer, it may&nbsp;only need to offer properties for identification and description.&nbsp; [Presumably if the user makes a selection of the object based on that information, they will get a UI element (form, dialog, user control, whatever) that exposes the Invoice as a root object with much richer properties for which the user has chosen it.]</P>
<P>But that Invoice might also be one in a collection of many Invoices being processed for printing, or against which aging is being performed&nbsp;for the calculation of late payment charges.&nbsp; </P>
<P>The view taken&nbsp;by nearly everyone here&nbsp;is that these are fundamentally different behaviors and should be coded in different classes.&nbsp; Many here subscribe to the "one responsibility per class" design paradigm.&nbsp; Others are not quite so strict.&nbsp; But almost no one here would consider implementing the behaviors mentioned here in&nbsp;a single&nbsp;class.&nbsp; And they reap big benefits in terms of clarity and ease of maintenance for doing so.</P>
<P>It will probably help you to try and think of NAMES that make sense in describing the behaviors for classes.&nbsp; That way you aren't confused by referring to them&nbsp;mentally as "Invoice" all the time.&nbsp; In fact, it would probably be best to NEVER call them just "Invoice."&nbsp;You may like CustomerInvoice (a child), InvoiceHeader (root object), PaperInvoice (another child), and AgeInvoice (yet another child), for example.&nbsp; But whatever&nbsp;choices&nbsp;you make, be sure they help keep your focus on <STRONG>modeling behavior</STRONG>.</P>
<P>If you are rolling your eyes thinking of the huge amount of code you have to write for all these classes, I have two assurances for you.&nbsp; First, the classes are going to be much smaller.&nbsp; After all, you will be exposing only the properties and methods needed for the limited functionality of their single (or at least limited) responisibility.&nbsp; Second, before long you are probably going to join the large number of folks here that use code generation tools that will basically eliminate your concern about volumes of code-writing time.&nbsp; They won't design your objects or code every line for you.&nbsp; But they take all the grunt work out of the considerable task of private data, public properties, and CRUD methods.&nbsp; You'll only have to actively&nbsp;focus on the behavior that's unique to&nbsp;each particular class.&nbsp; But get a project or two done by hand before you tackle another technology and its learning curve.&nbsp; </P>
<P>Good luck with CSLA!&nbsp;&nbsp;&nbsp;</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>tna55 replied on Monday, December 10, 2007</h2><P>Hi,</P>
<P>I am new here as well so do not consider my suggestions are not really concrete and more experienced people might have othe remarks.</P>
<P>I think that if you have some object that can be independently saved/deleted then that is not a child object. It may be a child 'record in database' but that does not mean it is a child 'object'. </P>
<P>For example Sale and SaleLineItem are parent child because&nbsp;SaleLineItem cannot be edited independently.&nbsp;Editing or deleting SaleLineItem would mean that you are basically editing&nbsp;the Sale as a whole. </P>
<P>May be if you can give us an example of what parent and child objects you have and the use-case then it would be easier to see where you are coming from.</P>
<P>Tahir</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Plowking replied on Monday, December 10, 2007</h2>You can make a switchable root/child object, but often it is bad design to do so. i.e. you are doing it to try and achieve reuse.<br><br>The framework doesn't limit you to handling parent child relationships in any particular way, you can decide how to control it if you wish or use the markAsChild concept described in the books. When it comes to data access the framework gives you the dataportal methods which are cool if you want a remote data portal and are generally good to use anyway from a consistancy in design viewpoint.<br><br>CSLA doesn't limit OO programming in anyway, it merely gives you an enriched framework offering functionality that is lacking in the .NET framework (i.e. the .NET framework is not perfect for making business object based applications "Out of the box")<br><br>Ian<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ayubu replied on Monday, December 10, 2007</h2><P>From the UI perspective it makes sense to access the object via its parent and CSLA encourages that. </P>
<P>In your case you can make your class "switchable" so in some circumstances it can be retrieved on itself while in others it can be accessed via the parent.</P></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
