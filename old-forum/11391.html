<html><header><title>How to hide or protect the connection string in a WPF project?</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>How to hide or protect the connection string in a WPF project?</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/11391.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>lazaroms posted on Wednesday, May 30, 2012</h2><p>Hi people:</p>
<p>I have a web app developed with CSLA 3.6. Now I need to develop a local module wich will work with the same BO and database.</p>
<p>The subject is <i>my question</i>. You know the connection string is readable in the app.config file of WPF application, just open it in the notepad anda then you&#39;ll have all you need to access the database, even with Excel. That&#39;s not what I want neither my client.</p>
<p>How can I hide the connection string in the app.config file or what I must do to avoid that security leak?</p>
<p>&nbsp;</p>
<p>Thanks in advance for your time reading my post.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>tiago replied on Wednesday, May 30, 2012</h2><p>Hi,</p>
<p>Definitely this isn&#39;t a Csla question. Have a look at <a href="http://msdn.microsoft.com/en-us/library/dx0f3cf2(v=vs.85).aspx">How to: Secure Connection Strings When Using Data Source Controls</a>&nbsp;or ask google </p>
<p>encrypting the connection string in web.config&nbsp; </p>
<p>&lt;edit&gt;</p>
<p>or</p>
<p>encrypting the connection string in app.config</p>
<p>&lt;/edit&gt;</p>
<p>Regards,</p></div><div style='padding:0 15 3 15;background-color:lightgreen'><h2>RockfordLhotka replied on Wednesday, May 30, 2012</h2><p>This can also be an architectural question.</p>
<p>Ultimately even &quot;encrypting&quot; the connection string on a client workstation is really just fancy encoding. This is because the key to decrypt the data must also be on the client workstation. So any half-decent hacker or good developer would be able to get the key and decrypt the data.</p>
<p>Like any security question you must do THREAT analysis. What is the scenario you are trying to prevent? Who is the attacker? What is the cost of a breach? What is the cost of mitigation? Is it worth addressing?</p>
<p>If your &quot;attacker&quot; is end users or even typical IT admin types, then encryption is probably quite sufficient. And you don&#39;t need to get fancy either - simple encryption is sufficient because you are relying on their ignorance of getting the key and writing a few lines of code as your barrier.</p>
<p>If your attacker is a developer and/or hacker that can gain access to the client workstation, then encryption is basically useless.</p>
<p>That brings us back to architecture. These days the primary reason for using 3-tier deployments with an app server isn&#39;t scalability, it is security. By using an app server, the connection string is moved off the client workstation to the app server. Usually that server is physically more secure, making it much harder for a developer or hacker to gain access to anything in the config file - with or without encryption.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>lazaroms replied on Wednesday, May 30, 2012</h2><p><div style='padding-left: 50px;background-color:silver'><b>RockfordLhotka<br></b></p>
<p>...That brings us back to architecture. These days the primary reason for using 3-tier deployments with an app server isn&#39;t scalability, it is security. By using an app server, the connection string is moved off the client workstation to the app server. Usually that server is physically more secure, making it much harder for a developer or hacker to gain access to anything in the config file - with or without encryption.</p>
<div style="clear:both;"></div>
<p></div></p>
<p><b>Thank you Rocky for your response, it was a very good explanation and I still need your help.</b><br /><br />I wrote this post because I thought it could be an architectural matter, not a simply connection strings encrypting.<br /><br />I decided to get in the architecture because hackers does not have hacker badge :-), so any employee could be one. Also, this system manages some critical information and it could be an operational disaster if an intruder gains unauthorized access to the database.<br /><br />At this point, I have some new questions.<br /><br />The web app is based in the Optimal Performance Web Client architecture, now I need a local app to interact with the same database using the same bussiness objects.<br /><br />The scenario is as follow:<br /><br />database<br />MyAppLibrary<br />MyApp (connection string in web.config file)<br /><br />And now I also have <br /><br />same database (in hosting)<br />MyAppLibrary (local delivered in end user machine I think)<br />MyWPFApp (connection string in app.config file)<br /><br /><i>Is possible to set a constant inside the BO MyAppLibrary with the connection string?</i> Maybe overriding some method from CSLA (I apologize if it sounds crazy) I know if I change the database server I will have to deliver again the WPFapp but does not a problem to me.<br /><br />If the preceding solution is not possible then I must implement the application server solution. My web app is running now and it won&#39;t be good to stop for few days and re-design the system. Will the application server implementation bring any changes to the web app?</p>
<p>&nbsp;</p>
<p>Thank a lot Rocky</p>
<p>&nbsp;</p>
<p>Lazaro M.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Wednesday, May 30, 2012</h2><p>If your threat is from a hacker, then putting the connection string as a constant in code won&#39;t help. Ildasm will reveal it with almost no effort...</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>lazaroms replied on Wednesday, May 30, 2012</h2><p>Thanks Rocky. I hope not bother you so much.</p>
<p>And this question&nbsp; Will the application server implementation bring any changes to the web app?</p>
<p>Please do you have in your site information with more details about &quot;Configuring the Data Portal Server&quot; than in &quot;Expert VB 2008<br />Business Objects&quot; book?</p>
<p>I&#39;ve been looking at WcfHost website in the ProjectTracker and the WcfPortal.svc has just one line: &lt;% @ServiceHost Service=&quot;Csla.Server.Hosts.WcfPortal&quot; %&gt;</p>
<p>and in the WcfHost references there are two wich get me a little confused: PTWfActivities and PTWorkflow.</p>
<p>&nbsp;</p>
<p>Thanks a lot.</p>
<p>Lazaro M</p></div><div style='padding:0 15 3 15;background-color:lightgreen'><h2>RockfordLhotka replied on Thursday, May 31, 2012</h2><p>You don&#39;t need to change your web app at all if you don&#39;t want to.</p>
<p>Just set up an app server to support the smart client workstations.</p>
<p>There&#39;s a lot more information in the &#39;Using CSLA 4&#39; ebooks on <a href="http://store.lhotka.net">http://store.lhotka.net</a> - one of the books is entirely focused on data portal configuration options.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>lazaroms replied on Thursday, May 31, 2012</h2><p>Thanks a lot Rocky.<br />I&#39;ve read all concerning in &quot;Expert VB 2008 Business Objects&quot; book and I think I understood this matter.<br />I&#39;m going to try hoping I&#39;ve got the main point.<br />You explained very well in that book and I&#39;m begging it&#39;ll as simple as it looks.<br /><br />I bought CSLA 4 books but I&#39;m still working in CSLA 3.6, because for moving into CSLA 4 I need to learn C# first.<br />I&#39;m VB developer and my job can wait for me learning both things at the same time, at least not now.<br /><br />Thank very much for your help, your time and your patience.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Thursday, May 31, 2012</h2><p>Unless moving to C# is a personal goal, there&#39;s no reason you can&#39;t continue to use VB with CSLA 4.</p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
