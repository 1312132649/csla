<html><header><title>Validating objects that a Csla BO contains</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Validating objects that a Csla BO contains</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/2157.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>NoviceCoder posted on Wednesday, January 17, 2007</h2><P>Hi,</P>
<P>I was wondering if the Csla framework made it possible for BOs (classes that inherint from <FONT color=#2b91af size=3></P>
<P>BusinessBase<FONT color=#000000>&lt;</FONT><FONT color=#000000>T</FONT></FONT><FONT size=3>&gt;) to validate objects contained within them, for example</FONT></P>
<P><FONT size=3>I have a Customer class that contains an <FONT color=#2b91af size=3>AddressInfo <FONT color=#000000>object. This object simply contains fields and properties (address, city, region etc.)&nbsp;so that it can be used by many different classes, Customer being one of them.</FONT></FONT></FONT></P>
<P><FONT size=3><FONT color=#2b91af size=3><FONT color=#000000>Now, as far as I know, validating properties can only be done on the BO itself. Same thing I think with authorization.</FONT></FONT></FONT></P>
<P><FONT size=3><FONT color=#2b91af size=3><FONT color=#000000>Is there a way to validate/authorize objects contained within the framework's business objects?</FONT></FONT></FONT></P>
<P>In addition, are there there going to be any issues with databinding those composed objects?</P>
<P><FONT size=3><FONT color=#2b91af size=3><FONT color=#000000>Thanks,</FONT></FONT></FONT></P>
<P><FONT size=3><FONT color=#2b91af size=3><FONT color=#000000>Ben</FONT></P></FONT></FONT></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Wednesday, January 17, 2007</h2>Well you'd have an Address object (AddressInfo would usually be for display purposes only) which has its own business and authorization rules.&nbsp; The parent BO would override its IsDirty and IsValid properties so that it takes the Address' IsDirty and IsValid states into consideration.<br><br>HTH<br>Andy<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JoeFallon1 replied on Wednesday, January 17, 2007</h2><P>In CSLA 1.x a user contributed some code to allow a given BO to validate all contained BOs and their contained BOs and on down the chain.</P>
<P>I posted a version of this code for CSLA 2.x a few months back.</P>
<P>The idea is that this allows you to do a few things:</P>
<P>1. Skip the override for IsDirty.</P>
<P>2. Get a list of all broken rules for a top level BO and all its contained BOs.</P>
<P>Search the forum for sample code.</P>
<P>It may be simpler to just do the overrides for now though.</P>
<P>Joe</P>
<P>&nbsp;</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>NoviceCoder replied on Wednesday, January 17, 2007</h2><P>I see.</P>
<P>So, my Address class has to be a BO too. Well, that's a bit of an overkill for such a simple class.</P>
<P>I might have lots of classes like this in my app, so turning each and every one of them into a BO might have some overhead to the application.</P>
<P>Wouldn't it be much simpler if&nbsp; ValidationRules class defined an overload for AddRule() that accepted, in addition, an object to perform the validations upon? I&nbsp;saw&nbsp;the code for the ValidationRules class and I think that the target is just a System.Object instance, not a Csla framework BO, making any object viable candidate for validation. So that means that the ValidationRules class would simply maintain a collection of objects to validate and their corresponding properties, isn't that so? In addition, this way, the BO gets a fine grained control as to which properties to validate and every BO can implement it as they see fit.</P>
<P>Ben</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Thursday, January 18, 2007</h2><BLOCKQUOTE><div><img src="/Themes/basicblue/images/icon-quote.gif"> <strong>NoviceCoder:</strong></div><div>So, my Address class has to be a BO too. Well, that's a bit of an overkill for such a simple class.</div></BLOCKQUOTE><br><br>Why would you say that?&nbsp; It has its own set of behaviors.&nbsp; It fulfils a purpose in your use case.&nbsp; It might be a simple class, but that doesn't disqualify it as a BO.&nbsp; Especially since it probably should support remoting, n-level undo, etc.<br><br><BLOCKQUOTE><div><img src="/Themes/basicblue/images/icon-quote.gif"> <strong>NoviceCoder:</strong></div><div>I might have lots of classes like this in my app, so turning each and
every one of them into a BO might have some overhead to the application.</div></BLOCKQUOTE><br><br>Yes, you likely will have a lot of classes.&nbsp; Likely a few per use case.&nbsp; That's expected.&nbsp; Its not overhead, because its necessary to properly build your application.&nbsp; <br><br><BLOCKQUOTE><div><img src="/Themes/basicblue/images/icon-quote.gif"> <strong>NoviceCoder:</strong></div><div>Wouldn't it be much simpler if&nbsp; ValidationRules class defined an
overload for AddRule() that accepted, in addition, an object to perform
the validations upon?</div></BLOCKQUOTE><br><br>It would be simplier, but you're violating one of the most basic OO principals, that each object is soley responsible for its own state, and that other objects may not directly change its state.&nbsp; In other words, its a very bad design.&nbsp; That would be true even if Csla was not in the mix at all.<br><br><BLOCKQUOTE><div><img src="/Themes/basicblue/images/icon-quote.gif"> <strong>NoviceCoder:</strong></div><div>I&nbsp;saw&nbsp;the code for the ValidationRules class and I think that the
target is just a System.Object instance, not a Csla framework BO,
making any object viable candidate for validation. So that means that
the ValidationRules class would simply maintain a collection of objects
to validate and their corresponding properties, isn't that so? In
addition, this way, the BO gets a fine grained control as to which
properties to validate and every BO can implement it as they see fit.</div></BLOCKQUOTE><br><br>The eventual rule method that runs is typically defined in the BO itself.&nbsp; There are some common methods to facilitate reuse however.<br><br>The problem is you've now just made the ValidationRules class more complex.&nbsp; Not only does it need to track the broken rules, it has to track the objects for which to check rules.&nbsp; What happens when the object VR is tracking goes out of scope?&nbsp; What happens as the object is remoted?&nbsp; You've violated the Single responsiblity principal, and VR will now become much more difficult to maintain.&nbsp; <br><br>And that's really the whole point of proper OO design and BO design; to make software more maintainable.<br></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
