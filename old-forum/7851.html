<html><header><title>Parent/Child Validation Dependency</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Parent/Child Validation Dependency</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/7851.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>tkarsjens posted on Thursday, October 22, 2009</h2>I am positive this has been asked before and that I have read it here. But I can't find it...<br /><br />I have a parent with a child object. The child object is an address, so it is used with this particular parent object as well as with other parent objects.<br /><br />My rule is - when the status field of Parent is not draft, the child address must have all fields filled in.<br /><br />The child (address) does not have a reference to the parent since the class of the parent varies.<br /><br />How can I do this?</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JoeFallon1 replied on Thursday, October 22, 2009</h2><P>Simple.</P>
<P>You create the rule in the Parent object.</P>
<P>That rule then checks the status of the parent. If it is draft then it returns True. In any other case it evaluates all the fields of the contained Address object (or asks it if it IsValid or IsFilledIn) and then returns the appropriate response. If not all filled in you set e.Description with your erro message and you are done.</P>
<P>Joe</P>
<P>&nbsp;</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>tkarsjens replied on Friday, October 23, 2009</h2>Hi Joe - That solution doesn't work because if the required fields are filled into the address object, the parent is not re-validated.</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Thursday, October 22, 2009</h2><P>What you are saying is that you have a constraint on the Address type, where sometimes all fields are required and sometimes all fields are not required.</P>
<P>This constraint can't (shouldn't) be implemented with knowledge of other objects, therefore it must be encapsulated within Address itself. That probably means a property on Address like AllFieldsRequired, and the validation rules in Address should take AllFieldsRequired into account.</P>
<P>If your Address type is that smart, then your parent types can simply set AllFieldsRequired to true/false depending on whether they want the Address to be required or not.</P>
<P>This keeps Address entirely ignorant of the driving rules - it just knows about its behavior.</P>
<P>And it keeps the parents focused on the constraint, not the behavioral implementation.</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>tkarsjens replied on Friday, October 23, 2009</h2>Thanks Rocky - that's the path I was going down but wanted to make sure that it was the best way to do it.</div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
