<html><header><title>CSLA ObservableBindingList&lt;T&gt; causes System.Xml.XmlException due to auto property</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>CSLA ObservableBindingList&lt;T&gt; causes System.Xml.XmlException due to auto property</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/10511.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>Sevans posted on Monday, July 11, 2011</h2><p>I think I came across an issue in Csla.Core.ObservableBindingList&lt;T&gt;.&nbsp; Any derived business objects (like anything derived from ReadOnlyListBase&lt;&gt;) throws a System.Xml.XmlException when it&#39;s serialized across the wire in WCF.&nbsp; It seems to be due to the auto properties of AllowEdit, AllowNew, and AllowRemove.&nbsp; Since auto properties get a &quot;odd&quot; backing field that contains the &lt; and &gt; symbols, when they&#39;re serialized as XML they silently fail.&nbsp; Changing these properties to have a backing field with a &quot;normal&quot; name makes the exception disappear.</p>
<p>While it doesn&#39;t seem to have a major performance issue, it&#39;s still quite annoying to litter up the Output window when debugging.</p>
<p>I&#39;m wondering if this is an issue that people just ignore since everything still works, or is there&#39;s a configuration attribute we might have missed in setting up our WcfPortal?&nbsp; I&#39;d be happy to share our WCF configuration information if it&#39;d help.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Tuesday, July 12, 2011</h2><p>This is using the data portal, or directly trying to serialize the objects through WCF? Direct serialization through WCF won&#39;t work - that is just not a supported scenario (<a href="http://www.lhotka.net/cslanet/faq/DataPortalFaq.ashx">http://www.lhotka.net/cslanet/faq/DataPortalFaq.ashx</a>). </p>
<p>And is this pure .NET, or is it a Silverlight client?</p>
<p>In pure .NET, the BinaryFormatter or NetDataContractSerializer must be used. The NDCS is used by the data portal&#39;s WCF channel.</p>
<p>With a Silverlight client, the serialization is handled by the MobileFormatter, which is part of CSLA .NET itself. This is a whole other process.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Sevans replied on Tuesday, July 12, 2011</h2><p>This is using the DataPortal over WCF.&nbsp; We&#39;re just doing a DataPortal.BeginFetch() on the Silverlight client to retrieve the full list.&nbsp; This is using CSLA 4.1, targeting .NET 4 and SL4 (if it has an impact...)</p>
<p>Like I mentioned, this is a Silverlight client, but I&#39;m not 100% sure it&#39;s just Silverlight causing it.</p>
<p>We do have the WCF configuration set up to use binary message encoding over HTTP, so the binary formatter is likely being used.&nbsp; We did extend the WcfPortal for some additional logging, but the exception is being thrown before that point.</p>
<p>The exception is thrown in Csla.DataPortalClient.WcfProxy.Fetch(Type, object, DataPortalContext), specifically the line `response = svr.Fetch(new FetchRequest(objectType, criteria, context));` (around line 148 in that file).&nbsp; The stack trace for it is below (bolded the line it&#39;s caught at).&nbsp; According to the Visual Studio threads debugger, it&#39;s on a thread under the w3wp.exe process; so it appears to be on the server side serialization.&nbsp; <strong>What other information would be useful to help figure this out?</strong></p>
<p>&nbsp;&nbsp;&nbsp;&nbsp; System.Xml.dll!System.Xml.XmlConvert.VerifyNCName(string name, System.Xml.ExceptionType exceptionType) + 0xb5 bytes&nbsp;&nbsp;&nbsp; <br />&nbsp;&nbsp;&nbsp;&nbsp; System.Runtime.Serialization.dll!System.Runtime.Serialization.DataContract.IsValidNCName(string name) + 0x27 bytes&nbsp;&nbsp;&nbsp; <br />&nbsp;&nbsp;&nbsp;&nbsp; System.Runtime.Serialization.dll!System.Runtime.Serialization.DataContract.EncodeLocalName(string localName = &quot;&lt;AllowEdit&gt;k__BackingField&quot;) + 0x1d bytes&nbsp;&nbsp;&nbsp; <br />&nbsp;&nbsp;&nbsp;&nbsp; System.Runtime.Serialization.dll!System.Runtime.Serialization.ClassDataContract.ClassDataContractCriticalHelper.ImportDataMembers() + 0x2e1 bytes&nbsp;&nbsp;&nbsp; <br />&nbsp;&nbsp;&nbsp;&nbsp; System.Runtime.Serialization.dll!System.Runtime.Serialization.ClassDataContract.ClassDataContractCriticalHelper.ClassDataContractCriticalHelper(System.Type type) + 0x10d bytes&nbsp;&nbsp;&nbsp; <br />&nbsp;&nbsp;&nbsp;&nbsp; System.Runtime.Serialization.dll!System.Runtime.Serialization.ClassDataContract.ClassDataContract(System.Type type) + 0x1f bytes&nbsp;&nbsp;&nbsp; <br />&nbsp;&nbsp;&nbsp;&nbsp; System.Runtime.Serialization.dll!System.Runtime.Serialization.CollectionDataContract.GetSharedTypeContract(System.Type type) + 0x60 bytes&nbsp;&nbsp;&nbsp; <br />&nbsp;&nbsp;&nbsp;&nbsp; System.Runtime.Serialization.dll!System.Runtime.Serialization.CollectionDataContract.CollectionDataContract(System.Type type, System.Runtime.Serialization.CollectionKind kind, System.Type itemType, System.Reflection.MethodInfo getEnumeratorMethod, System.Reflection.MethodInfo addMethod, System.Reflection.ConstructorInfo constructor, bool isConstructorCheckRequired) + 0x48 bytes&nbsp;&nbsp;&nbsp; <br />&nbsp;&nbsp;&nbsp;&nbsp; System.Runtime.Serialization.dll!System.Runtime.Serialization.CollectionDataContract.IsCollectionOrTryCreate(System.Type type, bool tryCreate, out System.Runtime.Serialization.DataContract dataContract = null, out System.Type itemType, bool constructorRequired) + 0x935 bytes&nbsp;&nbsp;&nbsp; <br />&nbsp;&nbsp;&nbsp;&nbsp; System.Runtime.Serialization.dll!System.Runtime.Serialization.DataContract.DataContractCriticalHelper.CreateDataContract(int id = 63, System.RuntimeTypeHandle typeHandle, System.Type type = {Name = &quot;ObservableBindingList`1&quot; FullName = &quot;Csla.Core.ObservableBindingList`1[[FAC.Phoebe.Billing.BLL.ReadOnly.ContactInfo, FAC.Phoebe.Billing.BLL, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]&quot;}) + 0x149 bytes&nbsp;&nbsp;&nbsp; <br />&nbsp;&nbsp;&nbsp;&nbsp; System.Runtime.Serialization.dll!System.Runtime.Serialization.DataContract.DataContractCriticalHelper.GetDataContractSkipValidation(int id, System.RuntimeTypeHandle typeHandle, System.Type type) + 0x57 bytes&nbsp;&nbsp;&nbsp; <br />&nbsp;&nbsp;&nbsp;&nbsp; System.Runtime.Serialization.dll!System.Runtime.Serialization.ClassDataContract.ClassDataContractCriticalHelper.ClassDataContractCriticalHelper(System.Type type = {Name = &quot;ReadOnlyObservableBindingList`1&quot; FullName = &quot;Csla.Core.ReadOnlyObservableBindingList`1[[FAC.Phoebe.Billing.BLL.ReadOnly.ContactInfo, FAC.Phoebe.Billing.BLL, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]&quot;}) + 0x251 bytes&nbsp;&nbsp;&nbsp; <br />&nbsp;&nbsp;&nbsp;&nbsp; System.Runtime.Serialization.dll!System.Runtime.Serialization.ClassDataContract.ClassDataContract(System.Type type) + 0x1f bytes&nbsp;&nbsp;&nbsp; <br />&nbsp;&nbsp;&nbsp;&nbsp; System.Runtime.Serialization.dll!System.Runtime.Serialization.CollectionDataContract.GetSharedTypeContract(System.Type type) + 0x60 bytes&nbsp;&nbsp;&nbsp; <br />&nbsp;&nbsp;&nbsp;&nbsp; System.Runtime.Serialization.dll!System.Runtime.Serialization.CollectionDataContract.CollectionDataContract(System.Type type, System.Runtime.Serialization.CollectionKind kind, System.Type itemType, System.Reflection.MethodInfo getEnumeratorMethod, System.Reflection.MethodInfo addMethod, System.Reflection.ConstructorInfo constructor, bool isConstructorCheckRequired) + 0x48 bytes&nbsp;&nbsp;&nbsp; <br />&nbsp;&nbsp;&nbsp;&nbsp; System.Runtime.Serialization.dll!System.Runtime.Serialization.CollectionDataContract.IsCollectionOrTryCreate(System.Type type, bool tryCreate, out System.Runtime.Serialization.DataContract dataContract = null, out System.Type itemType, bool constructorRequired) + 0x935 bytes&nbsp;&nbsp;&nbsp; <br />&nbsp;&nbsp;&nbsp;&nbsp; System.Runtime.Serialization.dll!System.Runtime.Serialization.DataContract.DataContractCriticalHelper.CreateDataContract(int id = 62, System.RuntimeTypeHandle typeHandle, System.Type type = {Name = &quot;ReadOnlyObservableBindingList`1&quot; FullName = &quot;Csla.Core.ReadOnlyObservableBindingList`1[[FAC.Phoebe.Billing.BLL.ReadOnly.ContactInfo, FAC.Phoebe.Billing.BLL, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]&quot;}) + 0x149 bytes&nbsp;&nbsp;&nbsp; <br />&nbsp;&nbsp;&nbsp;&nbsp; System.Runtime.Serialization.dll!System.Runtime.Serialization.DataContract.DataContractCriticalHelper.GetDataContractSkipValidation(int id, System.RuntimeTypeHandle typeHandle, System.Type type) + 0x57 bytes&nbsp;&nbsp;&nbsp; <br />&nbsp;&nbsp;&nbsp;&nbsp; System.Runtime.Serialization.dll!System.Runtime.Serialization.ClassDataContract.ClassDataContractCriticalHelper.ClassDataContractCriticalHelper(System.Type type = {Name = &quot;ReadOnlyListBase`2&quot; FullName = &quot;Csla.ReadOnlyListBase`2[[FAC.Phoebe.Billing.BLL.ReadOnly.ContactInfoList, FAC.Phoebe.Billing.BLL, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[FAC.Phoebe.Billing.BLL.ReadOnly.ContactInfo, FAC.Phoebe.Billing.BLL, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]&quot;}) + 0x251 bytes&nbsp;&nbsp;&nbsp; <br />&nbsp;&nbsp;&nbsp;&nbsp; System.Runtime.Serialization.dll!System.Runtime.Serialization.ClassDataContract.ClassDataContract(System.Type type) + 0x1f bytes&nbsp;&nbsp;&nbsp; <br />&nbsp;&nbsp;&nbsp;&nbsp; System.Runtime.Serialization.dll!System.Runtime.Serialization.CollectionDataContract.GetSharedTypeContract(System.Type type) + 0x60 bytes&nbsp;&nbsp;&nbsp; <br />&nbsp;&nbsp;&nbsp;&nbsp; System.Runtime.Serialization.dll!System.Runtime.Serialization.CollectionDataContract.CollectionDataContract(System.Type type, System.Runtime.Serialization.CollectionKind kind, System.Type itemType, System.Reflection.MethodInfo getEnumeratorMethod, System.Reflection.MethodInfo addMethod, System.Reflection.ConstructorInfo constructor, bool isConstructorCheckRequired) + 0x48 bytes&nbsp;&nbsp;&nbsp; <br />&nbsp;&nbsp;&nbsp;&nbsp; System.Runtime.Serialization.dll!System.Runtime.Serialization.CollectionDataContract.IsCollectionOrTryCreate(System.Type type, bool tryCreate, out System.Runtime.Serialization.DataContract dataContract = null, out System.Type itemType, bool constructorRequired) + 0x935 bytes&nbsp;&nbsp;&nbsp; <br />&nbsp;&nbsp;&nbsp;&nbsp; System.Runtime.Serialization.dll!System.Runtime.Serialization.DataContract.DataContractCriticalHelper.CreateDataContract(int id = 61, System.RuntimeTypeHandle typeHandle, System.Type type = {Name = &quot;ReadOnlyListBase`2&quot; FullName = &quot;Csla.ReadOnlyListBase`2[[FAC.Phoebe.Billing.BLL.ReadOnly.ContactInfoList, FAC.Phoebe.Billing.BLL, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[FAC.Phoebe.Billing.BLL.ReadOnly.ContactInfo, FAC.Phoebe.Billing.BLL, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]&quot;}) + 0x149 bytes&nbsp;&nbsp;&nbsp; <br />&nbsp;&nbsp;&nbsp;&nbsp; System.Runtime.Serialization.dll!System.Runtime.Serialization.DataContract.DataContractCriticalHelper.GetDataContractSkipValidation(int id, System.RuntimeTypeHandle typeHandle, System.Type type) + 0x57 bytes&nbsp;&nbsp;&nbsp; <br />&nbsp;&nbsp;&nbsp;&nbsp; System.Runtime.Serialization.dll!System.Runtime.Serialization.ClassDataContract.ClassDataContractCriticalHelper.ClassDataContractCriticalHelper(System.Type type = {Name = &quot;ContactInfoList&quot; FullName = &quot;FAC.Phoebe.Billing.BLL.ReadOnly.ContactInfoList&quot;}) + 0x251 bytes&nbsp;&nbsp;&nbsp; <br />&nbsp;&nbsp;&nbsp;&nbsp; System.Runtime.Serialization.dll!System.Runtime.Serialization.ClassDataContract.ClassDataContract(System.Type type) + 0x1f bytes&nbsp;&nbsp;&nbsp; <br />&nbsp;&nbsp;&nbsp;&nbsp; System.Runtime.Serialization.dll!System.Runtime.Serialization.CollectionDataContract.GetSharedTypeContract(System.Type type) + 0x60 bytes&nbsp;&nbsp;&nbsp; <br />&nbsp;&nbsp;&nbsp;&nbsp; System.Runtime.Serialization.dll!System.Runtime.Serialization.CollectionDataContract.CollectionDataContract(System.Type type, System.Runtime.Serialization.CollectionKind kind, System.Type itemType, System.Reflection.MethodInfo getEnumeratorMethod, System.Reflection.MethodInfo addMethod, System.Reflection.ConstructorInfo constructor, bool isConstructorCheckRequired) + 0x48 bytes&nbsp;&nbsp;&nbsp; <br />&nbsp;&nbsp;&nbsp;&nbsp; System.Runtime.Serialization.dll!System.Runtime.Serialization.CollectionDataContract.IsCollectionOrTryCreate(System.Type type, bool tryCreate, out System.Runtime.Serialization.DataContract dataContract = null, out System.Type itemType, bool constructorRequired) + 0x935 bytes&nbsp;&nbsp;&nbsp; <br />&nbsp;&nbsp;&nbsp;&nbsp; System.Runtime.Serialization.dll!System.Runtime.Serialization.DataContract.DataContractCriticalHelper.CreateDataContract(int id = 60, System.RuntimeTypeHandle typeHandle, System.Type type = {Name = &quot;ContactInfoList&quot; FullName = &quot;FAC.Phoebe.Billing.BLL.ReadOnly.ContactInfoList&quot;}) + 0x149 bytes&nbsp;&nbsp;&nbsp; <br />&nbsp;&nbsp;&nbsp;&nbsp; System.Runtime.Serialization.dll!System.Runtime.Serialization.DataContract.DataContractCriticalHelper.GetDataContractSkipValidation(int id, System.RuntimeTypeHandle typeHandle, System.Type type) + 0x57 bytes&nbsp;&nbsp;&nbsp; <br />&nbsp;&nbsp;&nbsp;&nbsp; System.Runtime.Serialization.dll!System.Runtime.Serialization.XmlObjectSerializerContext.GetDataContract(System.RuntimeTypeHandle typeHandle, System.Type type) + 0x66 bytes&nbsp;&nbsp;&nbsp; <br />&nbsp;&nbsp;&nbsp;&nbsp; System.Runtime.Serialization.dll!System.Runtime.Serialization.XmlObjectSerializerReadContextComplex.GetDataContract(System.RuntimeTypeHandle typeHandle, System.Type type) + 0x76 bytes&nbsp;&nbsp;&nbsp; <br />&nbsp;&nbsp;&nbsp;&nbsp; System.Runtime.Serialization.dll!System.Runtime.Serialization.XmlObjectSerializerReadContextComplex.InternalDeserializeInSharedTypeMode(System.Runtime.Serialization.XmlReaderDelegator xmlReader = {System.Runtime.Serialization.XmlReaderDelegator}, int declaredTypeID = 11, System.Type declaredType = {Name = &quot;Object&quot; FullName = &quot;System.Object&quot;}, string name, string ns) + 0xb4 bytes&nbsp;&nbsp;&nbsp; <br />&nbsp;&nbsp;&nbsp;&nbsp; System.Runtime.Serialization.dll!System.Runtime.Serialization.XmlObjectSerializerReadContextComplex.InternalDeserialize(System.Runtime.Serialization.XmlReaderDelegator xmlReader, int declaredTypeID, System.RuntimeTypeHandle declaredTypeHandle, string name, string ns) + 0xa0 bytes&nbsp;&nbsp;&nbsp; <br />&nbsp;&nbsp;&nbsp;&nbsp; [Lightweight Function]&nbsp;&nbsp;&nbsp; <br />&nbsp;&nbsp;&nbsp;&nbsp; System.Runtime.Serialization.dll!System.Runtime.Serialization.ClassDataContract.ReadXmlValue(System.Runtime.Serialization.XmlReaderDelegator xmlReader = {System.Runtime.Serialization.XmlReaderDelegator}, System.Runtime.Serialization.XmlObjectSerializerReadContext context) + 0x30 bytes&nbsp;&nbsp;&nbsp; <br />&nbsp;&nbsp;&nbsp;&nbsp; System.Runtime.Serialization.dll!System.Runtime.Serialization.XmlObjectSerializerReadContext.ReadDataContractValue(System.Runtime.Serialization.DataContract dataContract, System.Runtime.Serialization.XmlReaderDelegator reader) + 0x13 bytes&nbsp;&nbsp;&nbsp; <br />&nbsp;&nbsp;&nbsp;&nbsp; System.Runtime.Serialization.dll!System.Runtime.Serialization.XmlObjectSerializerReadContextComplex.InternalDeserializeInSharedTypeMode(System.Runtime.Serialization.XmlReaderDelegator xmlReader, int declaredTypeID, System.Type declaredType, string name, string ns) + 0x1cb bytes&nbsp;&nbsp;&nbsp; <br />&nbsp;&nbsp;&nbsp;&nbsp; System.Runtime.Serialization.dll!System.Runtime.Serialization.XmlObjectSerializerReadContextComplex.InternalDeserialize(System.Runtime.Serialization.XmlReaderDelegator xmlReader, int declaredTypeID, System.RuntimeTypeHandle declaredTypeHandle, string name, string ns) + 0xa0 bytes&nbsp;&nbsp;&nbsp; <br />&nbsp;&nbsp;&nbsp;&nbsp; [Lightweight Function]&nbsp;&nbsp;&nbsp; <br />&nbsp;&nbsp;&nbsp;&nbsp; System.Runtime.Serialization.dll!System.Runtime.Serialization.ClassDataContract.ReadXmlValue(System.Runtime.Serialization.XmlReaderDelegator xmlReader = {System.Runtime.Serialization.XmlReaderDelegator}, System.Runtime.Serialization.XmlObjectSerializerReadContext context) + 0x30 bytes&nbsp;&nbsp;&nbsp; <br />&nbsp;&nbsp;&nbsp;&nbsp; System.Runtime.Serialization.dll!System.Runtime.Serialization.XmlObjectSerializerReadContext.ReadDataContractValue(System.Runtime.Serialization.DataContract dataContract, System.Runtime.Serialization.XmlReaderDelegator reader) + 0x13 bytes&nbsp;&nbsp;&nbsp; <br />&nbsp;&nbsp;&nbsp;&nbsp; System.Runtime.Serialization.dll!System.Runtime.Serialization.XmlObjectSerializerReadContextComplex.InternalDeserializeInSharedTypeMode(System.Runtime.Serialization.XmlReaderDelegator xmlReader, int declaredTypeID, System.Type declaredType, string name, string ns) + 0x1cb bytes&nbsp;&nbsp;&nbsp; <br />&nbsp;&nbsp;&nbsp;&nbsp; System.Runtime.Serialization.dll!System.Runtime.Serialization.XmlObjectSerializerReadContextComplex.InternalDeserialize(System.Runtime.Serialization.XmlReaderDelegator xmlReader, System.Type declaredType, string name, string ns) + 0x96 bytes&nbsp;&nbsp;&nbsp; <br />&nbsp;&nbsp;&nbsp;&nbsp; System.Runtime.Serialization.dll!System.Runtime.Serialization.NetDataContractSerializer.InternalReadObject(System.Runtime.Serialization.XmlReaderDelegator xmlReader, bool verifyObjectName) + 0x7d bytes&nbsp;&nbsp;&nbsp; <br />&nbsp;&nbsp;&nbsp;&nbsp; System.Runtime.Serialization.dll!System.Runtime.Serialization.XmlObjectSerializer.InternalReadObject(System.Runtime.Serialization.XmlReaderDelegator reader, bool verifyObjectName, System.Runtime.Serialization.DataContractResolver dataContractResolver) + 0x10 bytes&nbsp;&nbsp;&nbsp; <br />&nbsp;&nbsp;&nbsp;&nbsp; System.Runtime.Serialization.dll!System.Runtime.Serialization.XmlObjectSerializer.ReadObjectHandleExceptions(System.Runtime.Serialization.XmlReaderDelegator reader, bool verifyObjectName, System.Runtime.Serialization.DataContractResolver dataContractResolver) + 0x63 bytes&nbsp;&nbsp;&nbsp; <br />&nbsp;&nbsp;&nbsp;&nbsp; System.Runtime.Serialization.dll!System.Runtime.Serialization.NetDataContractSerializer.ReadObject(System.Xml.XmlDictionaryReader reader, bool verifyObjectName) + 0x2f bytes&nbsp;&nbsp;&nbsp; <br />&nbsp;&nbsp;&nbsp;&nbsp; System.ServiceModel.dll!System.ServiceModel.Dispatcher.DataContractSerializerOperationFormatter.DeserializeParameterPart(System.Xml.XmlDictionaryReader reader, System.ServiceModel.Dispatcher.DataContractSerializerOperationFormatter.PartInfo part = {System.ServiceModel.Dispatcher.DataContractSerializerOperationFormatter.PartInfo}, bool isRequest) + 0x38 bytes&nbsp;&nbsp;&nbsp; <br />&nbsp;&nbsp;&nbsp;&nbsp; System.ServiceModel.dll!System.ServiceModel.Dispatcher.DataContractSerializerOperationFormatter.DeserializeParameter(System.Xml.XmlDictionaryReader reader, System.ServiceModel.Dispatcher.DataContractSerializerOperationFormatter.PartInfo part, bool isRequest) + 0x2a bytes&nbsp;&nbsp;&nbsp; <br />&nbsp;&nbsp;&nbsp;&nbsp; System.ServiceModel.dll!System.ServiceModel.Dispatcher.DataContractSerializerOperationFormatter.DeserializeBody(System.Xml.XmlDictionaryReader reader = {System.Xml.XmlReader.XmlReaderDebuggerDisplayProxy}, System.ServiceModel.Channels.MessageVersion version, string action, System.ServiceModel.Description.MessageDescription messageDescription, object[] parameters = {object[0]}, bool isRequest = false) + 0xac bytes&nbsp;&nbsp;&nbsp; <br />&nbsp;&nbsp;&nbsp;&nbsp; System.ServiceModel.dll!System.ServiceModel.Dispatcher.OperationFormatter.DeserializeBodyContents(System.ServiceModel.Channels.Message message = {System.ServiceModel.Channels.BufferedMessage}, object[] parameters, bool isRequest) + 0xae bytes&nbsp;&nbsp;&nbsp; <br />&nbsp;&nbsp;&nbsp;&nbsp; System.ServiceModel.dll!System.ServiceModel.Dispatcher.OperationFormatter.DeserializeReply(System.ServiceModel.Channels.Message message, object[] parameters) + 0xd9 bytes&nbsp;&nbsp;&nbsp; <br />&nbsp;&nbsp;&nbsp;&nbsp; System.ServiceModel.dll!System.ServiceModel.Dispatcher.ProxyOperationRuntime.AfterReply(ref System.ServiceModel.Dispatcher.ProxyRpc rpc = {System.ServiceModel.Dispatcher.ProxyRpc}) + 0x45 bytes&nbsp;&nbsp;&nbsp; <br />&nbsp;&nbsp;&nbsp;&nbsp; System.ServiceModel.dll!System.ServiceModel.Channels.ServiceChannel.HandleReply(System.ServiceModel.Dispatcher.ProxyOperationRuntime operation = {System.ServiceModel.Dispatcher.ProxyOperationRuntime}, ref System.ServiceModel.Dispatcher.ProxyRpc rpc = {System.ServiceModel.Dispatcher.ProxyRpc}) + 0x102 bytes&nbsp;&nbsp;&nbsp; <br />&nbsp;&nbsp;&nbsp;&nbsp; System.ServiceModel.dll!System.ServiceModel.Channels.ServiceChannel.Call(string action, bool oneway, System.ServiceModel.Dispatcher.ProxyOperationRuntime operation, object[] ins, object[] outs, System.TimeSpan timeout) + 0x34c bytes&nbsp;&nbsp;&nbsp; <br />&nbsp;&nbsp;&nbsp;&nbsp; System.ServiceModel.dll!System.ServiceModel.Channels.ServiceChannelProxy.InvokeService(System.Runtime.Remoting.Messaging.IMethodCallMessage methodCall = {System.Runtime.Remoting.Messaging.Message}, System.ServiceModel.Dispatcher.ProxyOperationRuntime operation = {System.ServiceModel.Dispatcher.ProxyOperationRuntime}) + 0x59 bytes&nbsp;&nbsp;&nbsp; <br />&nbsp;&nbsp;&nbsp;&nbsp; System.ServiceModel.dll!System.ServiceModel.Channels.ServiceChannelProxy.Invoke(System.Runtime.Remoting.Messaging.IMessage message = {System.Runtime.Remoting.Messaging.Message}) + 0x65 bytes&nbsp;&nbsp;&nbsp; <br />&nbsp;&nbsp;&nbsp;&nbsp; mscorlib.dll!System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(ref System.Runtime.Remoting.Proxies.MessageData msgData, int type = 1) + 0xee bytes&nbsp;&nbsp;&nbsp; <br /><strong>&gt;&nbsp;&nbsp;&nbsp; Csla.dll!Csla.DataPortalClient.WcfProxy.Fetch(System.Type objectType = {Name = &quot;ContactInfoList&quot; FullName = &quot;FAC.Phoebe.Billing.BLL.ReadOnly.ContactInfoList&quot;}, object criteria = {Csla.Server.EmptyCriteria}, Csla.Server.DataPortalContext context = {Csla.Server.DataPortalContext}) Line 148 + 0x2b bytes&nbsp;&nbsp;&nbsp; C#<br /></strong>&nbsp;&nbsp;&nbsp;&nbsp; Csla.dll!Csla.DataPortal.Fetch(System.Type objectType = {Name = &quot;ContactInfoList&quot; FullName = &quot;FAC.Phoebe.Billing.BLL.ReadOnly.ContactInfoList&quot;}, object criteria = {Csla.Server.EmptyCriteria}) Line 215 + 0x12 bytes&nbsp;&nbsp;&nbsp; C#<br />&nbsp;&nbsp;&nbsp;&nbsp; Csla.dll!Csla.DataPortal.Fetch(System.Type objectType = {Name = &quot;ContactInfoList&quot; FullName = &quot;FAC.Phoebe.Billing.BLL.ReadOnly.ContactInfoList&quot;}) Line 186 + 0xe bytes&nbsp;&nbsp;&nbsp; C#<br />&nbsp;&nbsp;&nbsp;&nbsp; Csla.dll!Csla.Server.Hosts.Silverlight.SilverlightRequestProcessor.Fetch(Csla.Server.Hosts.Silverlight.SilverlightCriteriaRequest request = {Csla.Server.Hosts.Silverlight.SilverlightCriteriaRequest}) Line 144 + 0x9 bytes&nbsp;&nbsp;&nbsp; C#<br />&nbsp;&nbsp;&nbsp;&nbsp; Csla.dll!Csla.Server.Hosts.Silverlight.WcfPortal.Fetch(Csla.Server.Hosts.Silverlight.CriteriaRequest request = {Csla.Server.Hosts.Silverlight.CriteriaRequest}) Line 102 + 0xe bytes&nbsp;&nbsp;&nbsp; C#<br />&nbsp;&nbsp;&nbsp;&nbsp; [Lightweight Function]&nbsp;&nbsp;&nbsp; <br />&nbsp;&nbsp;&nbsp;&nbsp; System.ServiceModel.dll!System.ServiceModel.Dispatcher.SyncMethodInvoker.Invoke(object instance, object[] inputs, out object[] outputs) + 0x33f bytes&nbsp;&nbsp;&nbsp; <br />&nbsp;&nbsp;&nbsp;&nbsp; System.ServiceModel.dll!System.ServiceModel.Dispatcher.DispatchOperationRuntime.InvokeBegin(ref System.ServiceModel.Dispatcher.MessageRpc rpc = {System.ServiceModel.Dispatcher.MessageRpc}) + 0x137 bytes&nbsp;&nbsp;&nbsp; <br />&nbsp;&nbsp;&nbsp;&nbsp; System.ServiceModel.dll!System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage5(ref System.ServiceModel.Dispatcher.MessageRpc rpc = {System.ServiceModel.Dispatcher.MessageRpc}) + 0x5e bytes&nbsp;&nbsp;&nbsp; <br />&nbsp;&nbsp;&nbsp;&nbsp; System.ServiceModel.dll!System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage41(ref System.ServiceModel.Dispatcher.MessageRpc rpc) + 0x6c bytes&nbsp;&nbsp;&nbsp; <br />&nbsp;&nbsp;&nbsp;&nbsp; System.ServiceModel.dll!System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage4(ref System.ServiceModel.Dispatcher.MessageRpc rpc) + 0x89 bytes&nbsp;&nbsp;&nbsp; <br />&nbsp;&nbsp;&nbsp;&nbsp; System.ServiceModel.dll!System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage31(ref System.ServiceModel.Dispatcher.MessageRpc rpc) + 0x59 bytes&nbsp;&nbsp;&nbsp; <br />&nbsp;&nbsp;&nbsp;&nbsp; System.ServiceModel.dll!System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage3(ref System.ServiceModel.Dispatcher.MessageRpc rpc) + 0x3b bytes&nbsp;&nbsp;&nbsp; <br />&nbsp;&nbsp;&nbsp;&nbsp; System.ServiceModel.dll!System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage2(ref System.ServiceModel.Dispatcher.MessageRpc rpc) + 0x4e bytes&nbsp;&nbsp;&nbsp; <br />&nbsp;&nbsp;&nbsp;&nbsp; System.ServiceModel.dll!System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage11(ref System.ServiceModel.Dispatcher.MessageRpc rpc) + 0x125 bytes&nbsp;&nbsp;&nbsp; <br />&nbsp;&nbsp;&nbsp;&nbsp; System.ServiceModel.dll!System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage1(ref System.ServiceModel.Dispatcher.MessageRpc rpc) + 0x34 bytes&nbsp;&nbsp;&nbsp; <br />&nbsp;&nbsp;&nbsp;&nbsp; System.ServiceModel.dll!System.ServiceModel.Dispatcher.MessageRpc.Process(bool isOperationContextSet = false) + 0xff bytes&nbsp;&nbsp;&nbsp; <br />&nbsp;&nbsp;&nbsp;&nbsp; System.ServiceModel.dll!System.ServiceModel.Dispatcher.ChannelHandler.DispatchAndReleasePump(System.ServiceModel.Channels.RequestContext request = {System.ServiceModel.Activation.HostedHttpContext}, bool cleanThread, System.ServiceModel.OperationContext currentOperationContext) + 0x44b bytes&nbsp;&nbsp;&nbsp; <br />&nbsp;&nbsp;&nbsp;&nbsp; System.ServiceModel.dll!System.ServiceModel.Dispatcher.ChannelHandler.HandleRequest(System.ServiceModel.Channels.RequestContext request, System.ServiceModel.OperationContext currentOperationContext) + 0x127 bytes&nbsp;&nbsp;&nbsp; <br />&nbsp;&nbsp;&nbsp;&nbsp; System.ServiceModel.dll!System.ServiceModel.Dispatcher.ChannelHandler.AsyncMessagePump(System.IAsyncResult result) + 0x43 bytes&nbsp;&nbsp;&nbsp; <br />&nbsp;&nbsp;&nbsp;&nbsp; System.ServiceModel.dll!System.ServiceModel.Dispatcher.ChannelHandler.OnAsyncReceiveComplete(System.IAsyncResult result) + 0x44 bytes&nbsp;&nbsp;&nbsp; <br />&nbsp;&nbsp;&nbsp;&nbsp; System.Runtime.DurableInstancing.dll!System.Runtime.Fx.AsyncThunk.UnhandledExceptionFrame(System.IAsyncResult result) + 0x32 bytes&nbsp;&nbsp;&nbsp; <br />&nbsp;&nbsp;&nbsp;&nbsp; System.Runtime.DurableInstancing.dll!System.Runtime.AsyncResult.Complete(bool completedSynchronously) + 0xfd bytes&nbsp;&nbsp;&nbsp; <br />&nbsp;&nbsp;&nbsp;&nbsp; System.Runtime.DurableInstancing.dll!System.Runtime.InputQueue&lt;System.ServiceModel.Channels.RequestContext&gt;.AsyncQueueReader.Set(System.Runtime.InputQueue&lt;System.ServiceModel.Channels.RequestContext&gt;.Item item) + 0x44 bytes&nbsp;&nbsp;&nbsp; <br />&nbsp;&nbsp;&nbsp;&nbsp; System.Runtime.DurableInstancing.dll!System.Runtime.InputQueue&lt;System.ServiceModel.Channels.RequestContext&gt;.EnqueueAndDispatch(System.Runtime.InputQueue&lt;System.ServiceModel.Channels.RequestContext&gt;.Item item, bool canDispatchOnThisThread) + 0x1aa bytes&nbsp;&nbsp;&nbsp; <br />&nbsp;&nbsp;&nbsp;&nbsp; System.Runtime.DurableInstancing.dll!System.Runtime.InputQueue&lt;System.ServiceModel.Channels.RequestContext&gt;.EnqueueAndDispatch(System.ServiceModel.Channels.RequestContext item, System.Action dequeuedCallback, bool canDispatchOnThisThread) + 0x5e bytes&nbsp;&nbsp;&nbsp; <br />&nbsp;&nbsp;&nbsp;&nbsp; System.ServiceModel.dll!System.ServiceModel.Channels.SingletonChannelAcceptor&lt;System.ServiceModel.Channels.IReplyChannel,System.ServiceModel.Channels.ReplyChannel,System.ServiceModel.Channels.RequestContext&gt;.Enqueue(System.ServiceModel.Channels.RequestContext item, System.Action dequeuedCallback, bool canDispatchOnThisThread) + 0x6b bytes&nbsp;&nbsp;&nbsp; <br />&nbsp;&nbsp;&nbsp;&nbsp; System.ServiceModel.dll!System.ServiceModel.Channels.HttpChannelListener.HttpContextReceived(System.ServiceModel.Channels.HttpRequestContext context = {System.ServiceModel.Activation.HostedHttpContext}, System.Action callback) + 0x1b4 bytes&nbsp;&nbsp;&nbsp; <br />&nbsp;&nbsp;&nbsp;&nbsp; System.ServiceModel.Activation.dll!System.ServiceModel.Activation.HostedHttpTransportManager.HttpContextReceived(System.ServiceModel.Activation.HostedHttpRequestAsyncResult result) + 0xbe bytes&nbsp;&nbsp;&nbsp; <br />&nbsp;&nbsp;&nbsp;&nbsp; System.ServiceModel.Activation.dll!System.ServiceModel.Activation.HostedHttpRequestAsyncResult.HandleRequest() + 0x1cf bytes&nbsp;&nbsp;&nbsp; <br />&nbsp;&nbsp;&nbsp;&nbsp; System.ServiceModel.Activation.dll!System.ServiceModel.Activation.HostedHttpRequestAsyncResult.BeginRequest() + 0x27 bytes&nbsp;&nbsp;&nbsp; <br />&nbsp;&nbsp;&nbsp;&nbsp; System.ServiceModel.Activation.dll!System.ServiceModel.Activation.HostedHttpRequestAsyncResult.OnBeginRequest(object state) + 0x49 bytes&nbsp;&nbsp;&nbsp; <br />&nbsp;&nbsp;&nbsp;&nbsp; System.Runtime.DurableInstancing.dll!System.Runtime.IOThreadScheduler.ScheduledOverlapped.IOCallback(uint errorCode, uint numBytes, System.Threading.NativeOverlapped* nativeOverlapped) + 0x78 bytes&nbsp;&nbsp;&nbsp; <br />&nbsp;&nbsp;&nbsp;&nbsp; System.Runtime.DurableInstancing.dll!System.Runtime.Fx.IOCompletionThunk.UnhandledExceptionFrame(uint error, uint bytesRead, System.Threading.NativeOverlapped* nativeOverlapped) + 0x39 bytes&nbsp;&nbsp;&nbsp; <br />&nbsp;&nbsp;&nbsp;&nbsp; mscorlib.dll!System.Threading._IOCompletionCallback.PerformIOCompletionCallback(uint errorCode, uint numBytes, System.Threading.NativeOverlapped* pOVERLAP) + 0x74 bytes&nbsp;&nbsp;&nbsp; <br />&nbsp;&nbsp;&nbsp;&nbsp; [Native to Managed Transition]&nbsp;&nbsp;&nbsp; <br />&nbsp;&nbsp;&nbsp;&nbsp; [Appdomain Transition]&nbsp;&nbsp;&nbsp; <br />&nbsp;&nbsp;&nbsp;&nbsp; [Native to Managed Transition]&nbsp;&nbsp;&nbsp; <br />&nbsp;</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Tuesday, July 12, 2011</h2><p>So you also have a Windows Forms client to this business layer?</p>
<p>It is possible that there&#39;s a bug in the bindinglist code that is causing issues with MobileFormatter. I <em>think</em> we have tests for all those types, but because the bindinglist types exist purely for legacy support of Windows Forms, it is possible we missed a test for this type in Silverlight...</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Tuesday, July 12, 2011</h2><p>I&#39;ve added a bug to look into this.</p>
<p>Fwiw, the Silverlight data portal always uses the MobileFormatter, which copies all field values into a DTO graph, and that DTO graph is what&#39;s serialized by WCF (by the DataContractSerializer). There is no BinaryFormatter or NetDataContractSerializer on Silverlight - they just don&#39;t exist.</p>
<p>I&#39;m somewhat confused as to why your stack trace has no mention of MobileFormatter at all. Nor does it appear to be serializing the DTO graph. It is almost like it is trying to directly serialize the collection - and that should never happen (can&#39;t happen actually - because you&#39;d get a serialization exception).</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Sevans replied on Tuesday, July 12, 2011</h2><p>We don&#39;t have a WinForms front end, but if I can find a spare moment during this sprint I might try to build one out to see if the problem exists that way too.&nbsp; We only have a Silverlight front end, that calls a derived WcfPortal hosted in the web application, which handles (de)compression and passes the call to an Application Host service.</p>
<p>The reason (I think) it doesn&#39;t mention the mobile formatter is that it&#39;s not happening in the Silverlight side of the call.&nbsp; It&#39;s happening on the server side (which is in/behind the Application Host in our set up).&nbsp; So in our&nbsp;base/Silverlight object we have something like this (in ContactInfoList.cs, which is shared between the .NET and Silverlight projects):</p>
<pre style="font-family:Consolas;background:white;color:black;font-size:13px;">&nbsp;&nbsp;&nbsp;&nbsp;[<span style="color:#2b91af;">Serializable</span>]
&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:blue;">public</span>&nbsp;<span style="color:blue;">partial</span>&nbsp;<span style="color:blue;">class</span>&nbsp;<span style="color:#2b91af;">ContactInfoList</span>&nbsp;:&nbsp;<span style="color:#2b91af;">ReadOnlyListBase</span><span style="color:purple;">&lt;</span><span style="color:#2b91af;">ContactInfoList</span>,&nbsp;<span style="color:#2b91af;">ContactInfo</span><span style="color:purple;">&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:blue;">public</span>&nbsp;<span style="color:blue;">static</span>&nbsp;<span style="color:blue;">void</span>&nbsp;GetContacts(<span style="color:#2b91af;">EventHandler</span><span style="color:purple;">&lt;</span><span style="color:#2b91af;">DataPortalResult</span><span style="color:purple;">&lt;</span><span style="color:#2b91af;">ContactInfoList</span><span style="color:purple;">&gt;&gt;</span>&nbsp;callback)
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#2b91af;">DataPortal</span><span style="color:purple;">.</span>BeginFetch(callback);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
&nbsp;&nbsp;&nbsp;&nbsp;}
</pre>
<p>Then in the server-side/.NET portion of the class (in ContactInfoList.NET.cs, which exists only in the .NET project) we something like the following:</p>
<pre style="font-family:Consolas;background:white;color:black;font-size:13px;"><pre style="font-family:Consolas;background:white;color:black;font-size:13px;">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:blue;">public</span>&nbsp;<span style="color:blue;">partial</span>&nbsp;<span style="color:blue;">class</span>&nbsp;<span style="color:#2b91af;">ContactInfoList</span>
&nbsp;&nbsp;&nbsp;&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:blue;">private</span>&nbsp;<span style="color:blue;">static</span>&nbsp;<span style="color:#2b91af;">IContactRepository</span>&nbsp;GetRepository()
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:blue;">return</span>&nbsp;OurNamespace.<span style="color:#2b91af;">DalFactory</span><span style="color:purple;">.</span>GetManager()<span style="color:purple;">.</span>GetProvider<span style="color:purple;">&lt;</span><span style="color:#2b91af;">IContactRepository</span><span style="color:purple;">&gt;</span>();
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:blue;">private</span>&nbsp;<span style="color:blue;">void</span>&nbsp;DataPortal_Fetch()
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:blue;">this</span><span style="color:purple;">.</span>Populate(GetRepository()<span style="color:purple;">.</span>GetContacts());
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:blue;">private</span>&nbsp;<span style="color:blue;">void</span>&nbsp;Populate(<span style="color:#2b91af;">IEnumerable</span><span style="color:purple;">&lt;</span><span style="color:#2b91af;">ContactInfoDTO</span><span style="color:purple;">&gt;</span>&nbsp;data)
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:blue;">if</span>&nbsp;(data&nbsp;<span style="color:purple;">==</span>&nbsp;<span style="color:blue;">null</span>)
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:blue;">return</span>;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IsReadOnly&nbsp;<span style="color:purple;">=</span>&nbsp;<span style="color:blue;">false</span>;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:blue;">var</span>&nbsp;raiseListChangedEvents&nbsp;<span style="color:purple;">=</span>&nbsp;RaiseListChangedEvents;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;RaiseListChangedEvents&nbsp;<span style="color:purple;">=</span>&nbsp;<span style="color:blue;">false</span>;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:blue;">foreach</span>&nbsp;(<span style="color:blue;">var</span>&nbsp;item&nbsp;<span style="color:blue;">in</span>&nbsp;data)
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Add(<span style="color:#2b91af;">DataPortal</span><span style="color:purple;">.</span>FetchChild<span style="color:purple;">&lt;</span><span style="color:#2b91af;">ContactInfo</span><span style="color:purple;">&gt;</span>(item));
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;RaiseListChangedEvents&nbsp;<span style="color:purple;">=</span>&nbsp;raiseListChangedEvents;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IsReadOnly&nbsp;<span style="color:purple;">=</span>&nbsp;<span style="color:blue;">true</span>;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
&nbsp;&nbsp;&nbsp;&nbsp;}
</pre>
<pre style="font-family:Consolas;background:white;color:black;font-size:13px;"></pre>
<p>Trying to toss a break point in any of these parts of the class doesn&#39;t help find the exception.  It is (or at least appears to be) happening on the server side when the DataPortal is building out the result to send back to the client as part of the callback.</p>
<p>And although it shouldn&#39;t matter, for the sake of completeness here&#39;s the shared code for the ContactInfo class:</p>
<pre style="font-family:Consolas;background:white;color:black;font-size:13px;"></pre>
<pre style="font-family:Consolas;background:white;color:black;font-size:13px;"><pre style="font-family:Consolas;background:white;color:black;font-size:13px;">&nbsp;&nbsp;&nbsp;&nbsp;[<span style="color:#2b91af;">Serializable</span>]
&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:blue;">public</span>&nbsp;<span style="color:blue;">partial</span>&nbsp;<span style="color:blue;">class</span>&nbsp;<span style="color:#2b91af;">ContactInfo</span>&nbsp;:&nbsp;<span style="color:#2b91af;">ReadOnlyBase</span><span style="color:purple;">&lt;</span><span style="color:#2b91af;">ContactInfo</span><span style="color:purple;">&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:blue;">public</span>&nbsp;<span style="color:blue;">static</span>&nbsp;<span style="color:blue;">readonly</span>&nbsp;<span style="color:#2b91af;">PropertyInfo</span><span style="color:purple;">&lt;</span><span style="color:blue;">int</span><span style="color:purple;">&gt;</span>&nbsp;FamilyMemberIDProperty&nbsp;<span style="color:purple;">=</span>&nbsp;RegisterProperty<span style="color:purple;">&lt;</span><span style="color:blue;">int</span><span style="color:purple;">&gt;</span>(c&nbsp;<span style="color:purple;">=&gt;</span>&nbsp;c<span style="color:purple;">.</span>ContactID);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:blue;">public</span>&nbsp;<span style="color:blue;">int</span>&nbsp;ContactID
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:blue;">get</span>&nbsp;{&nbsp;<span style="color:blue;">return</span>&nbsp;GetProperty(FamilyMemberIDProperty);&nbsp;}
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:blue;">private</span>&nbsp;<span style="color:blue;">set</span>&nbsp;{&nbsp;LoadProperty(FamilyMemberIDProperty,&nbsp;<span style="color:blue;">value</span>);&nbsp;}
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:blue;">public</span>&nbsp;<span style="color:blue;">static</span>&nbsp;<span style="color:blue;">readonly</span>&nbsp;<span style="color:#2b91af;">PropertyInfo</span><span style="color:purple;">&lt;</span><span style="color:blue;">int</span><span style="color:purple;">&gt;</span>&nbsp;LocationIDProperty&nbsp;<span style="color:purple;">=</span>&nbsp;RegisterProperty<span style="color:purple;">&lt;</span><span style="color:blue;">int</span><span style="color:purple;">&gt;</span>(c&nbsp;<span style="color:purple;">=&gt;</span>&nbsp;c<span style="color:purple;">.</span>LocationID);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:blue;">public</span>&nbsp;<span style="color:blue;">int</span>&nbsp;LocationID
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:blue;">get</span>&nbsp;{&nbsp;<span style="color:blue;">return</span>&nbsp;GetProperty(LocationIDProperty);&nbsp;}
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:blue;">private</span>&nbsp;<span style="color:blue;">set</span>&nbsp;{&nbsp;LoadProperty(LocationIDProperty,&nbsp;<span style="color:blue;">value</span>);&nbsp;}
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:blue;">public</span>&nbsp;<span style="color:blue;">static</span>&nbsp;<span style="color:blue;">readonly</span>&nbsp;<span style="color:#2b91af;">PropertyInfo</span><span style="color:purple;">&lt;</span><span style="color:blue;">string</span><span style="color:purple;">&gt;</span>&nbsp;FirstNameProperty&nbsp;<span style="color:purple;">=</span>&nbsp;RegisterProperty<span style="color:purple;">&lt;</span><span style="color:blue;">string</span><span style="color:purple;">&gt;</span>(c&nbsp;<span style="color:purple;">=&gt;</span>&nbsp;c<span style="color:purple;">.</span>FirstName);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:blue;">public</span>&nbsp;<span style="color:blue;">string</span>&nbsp;FirstName
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:blue;">get</span>&nbsp;{&nbsp;<span style="color:blue;">return</span>&nbsp;GetProperty(FirstNameProperty);&nbsp;}
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:blue;">private</span>&nbsp;<span style="color:blue;">set</span>&nbsp;{&nbsp;LoadProperty(FirstNameProperty,&nbsp;<span style="color:blue;">value</span>);&nbsp;}
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:blue;">public</span>&nbsp;<span style="color:blue;">static</span>&nbsp;<span style="color:blue;">readonly</span>&nbsp;<span style="color:#2b91af;">PropertyInfo</span><span style="color:purple;">&lt;</span><span style="color:blue;">string</span><span style="color:purple;">&gt;</span>&nbsp;MiddleInitialProperty&nbsp;<span style="color:purple;">=</span>&nbsp;RegisterProperty<span style="color:purple;">&lt;</span><span style="color:blue;">string</span><span style="color:purple;">&gt;</span>(c&nbsp;<span style="color:purple;">=&gt;</span>&nbsp;c<span style="color:purple;">.</span>MiddleInitial);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:blue;">public</span>&nbsp;<span style="color:blue;">string</span>&nbsp;MiddleInitial
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:blue;">get</span>&nbsp;{&nbsp;<span style="color:blue;">return</span>&nbsp;GetProperty(MiddleInitialProperty);&nbsp;}
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:blue;">private</span>&nbsp;<span style="color:blue;">set</span>&nbsp;{&nbsp;LoadProperty(MiddleInitialProperty,&nbsp;<span style="color:blue;">value</span>);&nbsp;}
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:blue;">public</span>&nbsp;<span style="color:blue;">static</span>&nbsp;<span style="color:blue;">readonly</span>&nbsp;<span style="color:#2b91af;">PropertyInfo</span><span style="color:purple;">&lt;</span><span style="color:blue;">string</span><span style="color:purple;">&gt;</span>&nbsp;LastNameProperty&nbsp;<span style="color:purple;">=</span>&nbsp;RegisterProperty<span style="color:purple;">&lt;</span><span style="color:blue;">string</span><span style="color:purple;">&gt;</span>(c&nbsp;<span style="color:purple;">=&gt;</span>&nbsp;c<span style="color:purple;">.</span>LastName);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:blue;">public</span>&nbsp;<span style="color:blue;">string</span>&nbsp;LastName
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:blue;">get</span>&nbsp;{&nbsp;<span style="color:blue;">return</span>&nbsp;GetProperty(LastNameProperty);&nbsp;}
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:blue;">private</span>&nbsp;<span style="color:blue;">set</span>&nbsp;{&nbsp;LoadProperty(LastNameProperty,&nbsp;<span style="color:blue;">value</span>);&nbsp;}
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:blue;">public</span>&nbsp;<span style="color:blue;">static</span>&nbsp;<span style="color:blue;">readonly</span>&nbsp;<span style="color:#2b91af;">PropertyInfo</span><span style="color:purple;">&lt;</span><span style="color:blue;">string</span><span style="color:purple;">&gt;</span>&nbsp;PhoneProperty&nbsp;<span style="color:purple;">=</span>&nbsp;RegisterProperty<span style="color:purple;">&lt;</span><span style="color:blue;">string</span><span style="color:purple;">&gt;</span>(c&nbsp;<span style="color:purple;">=&gt;</span>&nbsp;c<span style="color:purple;">.</span>Phone);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:blue;">public</span>&nbsp;<span style="color:blue;">string</span>&nbsp;Phone
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:blue;">get</span>&nbsp;{&nbsp;<span style="color:blue;">return</span>&nbsp;GetProperty(PhoneProperty);&nbsp;}
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:blue;">private</span>&nbsp;<span style="color:blue;">set</span>&nbsp;{&nbsp;LoadProperty(PhoneProperty,&nbsp;<span style="color:blue;">value</span>);&nbsp;}
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:blue;">public</span>&nbsp;<span style="color:blue;">static</span>&nbsp;<span style="color:blue;">readonly</span>&nbsp;<span style="color:#2b91af;">PropertyInfo</span><span style="color:purple;">&lt;</span><span style="color:blue;">string</span><span style="color:purple;">&gt;</span>&nbsp;EMailProperty&nbsp;<span style="color:purple;">=</span>&nbsp;RegisterProperty<span style="color:purple;">&lt;</span><span style="color:blue;">string</span><span style="color:purple;">&gt;</span>(c&nbsp;<span style="color:purple;">=&gt;</span>&nbsp;c<span style="color:purple;">.</span>EMail);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:blue;">public</span>&nbsp;<span style="color:blue;">string</span>&nbsp;EMail
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:blue;">get</span>&nbsp;{&nbsp;<span style="color:blue;">return</span>&nbsp;GetProperty(EMailProperty);&nbsp;}
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:blue;">private</span>&nbsp;<span style="color:blue;">set</span>&nbsp;{&nbsp;LoadProperty(EMailProperty,&nbsp;<span style="color:blue;">value</span>);&nbsp;}
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:gray;">///</span><span style="color:green;">&nbsp;</span><span style="color:gray;">&lt;summary&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:gray;">///</span><span style="color:green;">&nbsp;E.g&nbsp;John&nbsp;P.&nbsp;Smith</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:gray;">///</span><span style="color:green;">&nbsp;</span><span style="color:gray;">&lt;/summary&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:blue;">public</span>&nbsp;<span style="color:blue;">string</span>&nbsp;FullMiddleLast
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:blue;">get</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:blue;">return</span>&nbsp;<span style="color:#2b91af;">String</span><span style="color:purple;">.</span>Format(<span style="color:#a31515;">&quot;{0}&nbsp;{1}.&nbsp;{2}&quot;</span>,&nbsp;FirstName,&nbsp;MiddleInitial,&nbsp;LastName);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:gray;">///</span><span style="color:green;">&nbsp;</span><span style="color:gray;">&lt;summary&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:gray;">///</span><span style="color:green;">&nbsp;E.g&nbsp;John&nbsp;Smith</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:gray;">///</span><span style="color:green;">&nbsp;</span><span style="color:gray;">&lt;/summary&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:blue;">public</span>&nbsp;<span style="color:blue;">string</span>&nbsp;FirstLast
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:blue;">get</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:blue;">return</span>&nbsp;<span style="color:#2b91af;">String</span><span style="color:purple;">.</span>Format(<span style="color:#a31515;">&quot;{0}&nbsp;{1}&quot;</span>,&nbsp;FirstName,&nbsp;LastName);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:gray;">///</span><span style="color:green;">&nbsp;</span><span style="color:gray;">&lt;summary&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:gray;">///</span><span style="color:green;">&nbsp;E.g&nbsp;John&nbsp;Smith</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:gray;">///</span><span style="color:green;">&nbsp;</span><span style="color:gray;">&lt;/summary&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:blue;">public</span>&nbsp;<span style="color:blue;">string</span>&nbsp;FullName
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:blue;">get</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:blue;">return</span>&nbsp;<span style="color:#2b91af;">String</span><span style="color:purple;">.</span>Format(<span style="color:#a31515;">&quot;{0}&nbsp;{1}&quot;</span>,&nbsp;FirstName,&nbsp;LastName);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:gray;">///</span><span style="color:green;">&nbsp;</span><span style="color:gray;">&lt;summary&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:gray;">///</span><span style="color:green;">&nbsp;E.g&nbsp;Smith,&nbsp;John</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:gray;">///</span><span style="color:green;">&nbsp;</span><span style="color:gray;">&lt;/summary&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:blue;">public</span>&nbsp;<span style="color:blue;">string</span>&nbsp;LastFirst
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:blue;">get</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:blue;">return</span>&nbsp;<span style="color:#2b91af;">String</span><span style="color:purple;">.</span>Format(<span style="color:#a31515;">&quot;{0},&nbsp;{1}&quot;</span>,&nbsp;LastName,&nbsp;FirstName);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
&nbsp;&nbsp;&nbsp;&nbsp;}
</pre>
<pre style="font-family:Consolas;background:white;color:black;font-size:13px;">and the .NET specific code:</pre>
<pre style="font-family:Consolas;background:white;color:black;font-size:13px;"></pre>
<pre style="font-family:Consolas;background:white;color:black;font-size:13px;"><pre style="font-family:Consolas;background:white;color:black;font-size:13px;">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:blue;">public</span>&nbsp;<span style="color:blue;">partial</span>&nbsp;<span style="color:blue;">class</span>&nbsp;<span style="color:#2b91af;">ContactInfo</span>
&nbsp;&nbsp;&nbsp;&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:blue;">private</span>&nbsp;<span style="color:blue;">void</span>&nbsp;Child_Fetch(<span style="color:#2b91af;">ContactInfoDTO</span>&nbsp;data)
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;AutoMapper<span style="color:purple;">.</span><span style="color:#2b91af;">Mapper</span><span style="color:purple;">.</span>Map(data,&nbsp;<span style="color:blue;">this</span>);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
&nbsp;&nbsp;&nbsp;&nbsp;}
</pre>
<p>&nbsp;</p>
<p>Again, it may be how we&#39;re building out our read-only business objects or using the DataPortal, but this doesn&#39;t seem too far off.</p>
</pre>
</pre>
</pre></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Tuesday, July 12, 2011</h2><p>OK, your code isn&#39;t using a bindinglist derived base class, so there&#39;s no need to look at the Windows Forms angle. I though you were running into issues with a BindingList derived type.</p>
<p>We absolutely have tests and many apps that use ReadOnlyListBase and it works fine (including various sample apps for the ebook series). So there&#39;s something different in your situation from normal.</p>
<p>Your class code doesn&#39;t look wrong (or complex).</p>
<p>The Silverlight data portal client talks to a Silverlight-specific server data portal endpoint. That server endpoint uses the MobileFormatter for its serialization - it obviously needs to use the same serialization as the client - so now I&#39;m left wondering what is doing the serialization on the server such that the MobileFormatter isn&#39;t involved...</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Sevans replied on Tuesday, July 12, 2011</h2><p>I&#39;m not sure if we&#39;re referring to the same BindingList, but the inheritance&nbsp;scheme looks to be&nbsp;ContactInfoList -&gt; Csla.ReadOnlyListBase&lt;T,C&gt; -&gt; Csla.Core.ReadOnlyObservableBindingList&lt;C&gt; -&gt; Csla.Core.ObservableBindingList&lt;C&gt;.</p>
<p>Would seeing our WCF configuration in the Silverlight <em>ServiceReferences.ClientConfig</em>, the web application&#39;s <em>web.config</em> and/or the application host&#39;s <em>web.config</em> be helpful in figuring out the root cause?&nbsp; Obviously we can just change the code to not use the auto-properties, but trying to hunt this down there are definitely others that are running into that exception.&nbsp; Being able to find the root cause would help out quite a bit.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Tuesday, July 12, 2011</h2><p>I&#39;m preparing to go on a fishing trip, and won&#39;t be able to look at anything for at least a week (no cell coverage or electricity where we&#39;re going). This probably also explains why I&#39;m a bit slow following the details of this thread - my primary focus is on making sure we pack everything we need, because there are no stores there either &nbsp;:)</p>
<p>The MobileFormatter wouldn&#39;t encounter this auto property issue, because it relies on the type to implement IMobileObject and serialize the field values into the serialization stream. This is done in the OnGetState and OnSetState methods. You can see those methods in the code near the bottom of the ObservableBindingList class.</p>
<p>The fact that some other serializer is failing seems to pretty clearly imply that <em>somehow</em> the MobileFormatter isn&#39;t being used. Nor is the BinaryFormatter or NDCS, because they both work too (we have unit tests for these things).</p>
<p>I literally just now ran a sample app that uses types like yours, with a Silverlight client and .NET app server. Our unit tests, and the samples for the ebooks, and my current project all work fine when using the standard data portal configuration.</p>
<p>Can you remove your custom proxy/host types and try using the standard data portal? By standard I mean like SimpleNTier, or the <em>Data Portal Configuration</em> ebook samples, or the version of ProjectTracker in svn.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>tbaldridge replied on Wednesday, July 13, 2011</h2><p>I&#39;m a&nbsp;<span>colleague&nbsp;</span>of Steve&#39;s and I&#39;ve posted about this exact issue in the past:&nbsp;http://forums.lhotka.net/forums/p/10405/48778.aspx#48778</p>
<p>The exception is being thrown and caught from within the .Net BinaryFormatter. The basic idea is that the backing fields auto-generated by auto-properties in .NET contain a &lt; character. In other words int Foo {get; set;} gets a &nbsp;backing store of private int &quot;&lt;intfooFoo&gt;_Foo&quot; or something like that. When the binary formatter goes to serialize this class (as Steve mentioned, it&#39;s the CSLA ObservableBindingList&lt;T&gt;) an error is thrown from within the .NET serialzier and caught within those same serializer classes.&nbsp;<br /><br />Your unit tests would not catch this issue, because the error never actually bubbles up to the CSLA classes. The only way to see this error is to 1) look at the output window when the class is serialzied or 2) set a XmlException to always stop code execution.&nbsp;<br /><br />Granted, our program works fine even with this bug in CSLA, but still it&#39;s an exception that is being thrown and it clutters our output window and reduces performance. &nbsp;</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Saturday, July 16, 2011</h2><p>Does it reduce performance so much that your application is performing badly?&nbsp; If not, I wouldn&#39;t worry about performace implications.&nbsp; Exceptions might be more expensive than normal code, but they are pretty insignificant.&nbsp; If you setup VS to break on all exceptions always, there&#39;s tons of exceptions thrown within the framework itself that you never normally </p>
<p>As far as the output window goes, what are you using it for?&nbsp; I closed it five&nbsp; years ago and haven&#39;t found a need for it..&nbsp; If you&#39;re tracing, you shouuld be able to use a TraceFilter to filter it out.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>tbaldridge replied on Saturday, July 16, 2011</h2><p>So you&#39;re suggesting we throw out a 3 line fix for an exception simply because &quot;it doesn&#39;t affect performance enough&quot;....that&#39;s just sad.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>tmg4340 replied on Sunday, July 17, 2011</h2><p>Not exactly...</p>
<p>You&#39;ve identified the issue - auto-generated properties generate this exception. The framework is catching the exception and dealing with it, ostensibly so that you don&#39;t ever have to consider it.&nbsp; Andy is correct - the framework itself throws and catches a whole host of exceptions which you never see or have to care about.&nbsp; So I wouldn&#39;t classify this as a CSLA bug - it&#39;s a bug in .NET itself.</p>
<p>Obviously this exception isn&#39;t terribly detrimental, otherwise no one would ever use auto-generated properties.&nbsp; That&#39;s actually what you&#39;re saying - in order to keep&nbsp;an exception thrown, caught, and dealt with entirely within the&nbsp;framework from getting to the&nbsp;output window; and to get a performance boost that you&#39;re likely never to see (given that the issue only happens when the object is serialized and sent over the wire),&nbsp;CSLA can&#39;t use auto-generated properties <em>anywhere</em>.&nbsp; Nor can you in any&nbsp;object you ever write that will be serialized. Thus it&#39;s more than a &quot;3 line fix&quot;.</p>
<p>Is that really what you want?</p>
<p>- Scott</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Sunday, July 17, 2011</h2><p>I&#39;m suggesting that Rocky has better things to do then convert an auto-property to a older style one for an exception the framework catches and handles on its own.&nbsp; </p>
<p>Seriously, you don&#39;t have anything better to do than worry about an exception you only notice in the output window?&nbsp;</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Monday, July 18, 2011</h2><p>I am puzzled by two things.</p>
<p>First, why is the BinaryFormatter involved at all? You are using a SL client right? Serialization should be handled by MobileFormatter, and the BF shouldn&#39;t be invoked.</p>
<p>Second, even if we assume the BF is invoked for some valid reason, it doesn&#39;t use XML - it uses a binary format that wouldn&#39;t encounter this XML exception. The only way to get the BF to use XML is to use the deprecated SOAP formatter - and I obviously won&#39;t do anything to support a deprecated .NET technology.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>StefanCop replied on Monday, October 17, 2011</h2><p>Rocky</p>
<p>I&#39;m also puzzled, because I use a TCP binding out of the &quot;WCF box&quot; (we use WPF). Why an XML encoding problem? I have been unsure if actually binary encoded is used.</p>
<p>Therefore, I looked at the stack a bit in a debugger, 
and although im not a WCF expert, I got to the conculsion that some 
validation is made on XML base,&nbsp; either before or after the actual encoding (that
 I guessed from method names on the stack indicating something like 
&quot;validate&quot;).</p>
<p>The encoder property of some WCF class was set to BinaryFormatter, which is what I really wanted to be sure.</p>
<p>I could the &quot;first chance exception&quot; narrowed to the already mentioned auto property in our classes and 
ObservableBindingList (AllowEdit, AllowNew, AllowRemove). So, I stick with the &quot;old style&quot; properties with an explicit internal field. That reduces the chatty messages in
 VisualStudio&#39;s Output. a lot.&nbsp;</p>
<p>Stefan</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Monday, October 17, 2011</h2><p>WCF will use the NetDataContractSwrializer, that is unavoidable. That will use xml, though it defaults to binaryxml, I suspect it goes through the same process.</p>
<p>What is described here sounds like an issue with the NDCS.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>rfcdejong replied on Friday, November 02, 2012</h2><p>We have the same problem in our output window, over hundreds of XmlExceptions. Mostly because we use Criteria with automatic properties incl. a private set. But the core of the xmlExceptiosn are caused by the AllowEdit, AllowNew and AllowRemove properties.</p>
<p>I notice that this is still active in CSLA 4.5, can this be solved to reduce the many XmlExceptions?</p>
<p>This would be enough</p>
<p> /// &lt;summary&gt;<br />/// Gets or sets a value indicating whether data binding<br />/// can automatically edit items in this collection.<br />/// &lt;/summary&gt;<br />public bool AllowEdit { get { return _allowEdit; } set { _allowEdit = value; } }<br />private bool _allowEdit;<br /><br />/// &lt;summary&gt;<br />/// Gets or sets a value indicating whether data binding<br />/// can automatically add new items to this collection.<br />/// &lt;/summary&gt;<br />public bool AllowNew { get { return _allowNew; } set { _allowNew = value; } }<br />private bool _allowNew;</p>
<p>/// &lt;summary&gt;<br />/// Gets or sets a value indicating whether data binding<br />/// can automatically remove items from this collection.<br />/// &lt;/summary&gt;</p>
<p>public bool AllowRemove { get { return _allowRemove; } set { _allowRemove = value; } }<br />private bool _allowRemove;</p>
<p>&nbsp;</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>StefanCop replied on Sunday, November 04, 2012</h2><p>This is not a problem, but rather annoying. </p>
<p>I turned the debbuger option for XmlException on and tried to get the cause. My understanding was, that WCF (BinaryFormatter in my case, but uses XML/XSD to verify the response) is not clean. One part throws an exception because of special characters in the autoproperty backing fields &quot;&lt;propertyname&gt;&quot;, but is caught an encoded correctly. </p>
<p>I agree, it would be nice if CSLA base classes wouldn&#39;t use auto properties&nbsp; to reduce that noise in VisualStudio output. </p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Sten replied on Wednesday, November 21, 2012</h2><p>For me this is a problem because I get tens of these and all the exceptions cause a noticeable hit in performance</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Tuesday, November 27, 2012</h2><p>This is on the bug list.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JonnyBee replied on Tuesday, November 27, 2012</h2><p>And it is done and will be included in next release. </p>
<p><a href="http://www.lhotka.net/cslabugs/edit_bug.aspx?id=1123">http://www.lhotka.net/cslabugs/edit_bug.aspx?id=1123</a></p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>bill.mybiz replied on Friday, January 11, 2013</h2><p>I am also getting these exceptions. Any idea when the next release is?</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>rfcdejong replied on Thursday, February 07, 2013</h2><p>There is a new beta 4.5.11 in which this is fixed.</p>
<p><a href="http://www.lhotka.net/Article.aspx?id=0736fb9a-1460-42db-8040-765d5801ed8b">http://www.lhotka.net/Article.aspx?id=0736fb9a-1460-42db-8040-765d5801ed8b</a></p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
