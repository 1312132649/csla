<html><header><title>Serialising filtered list on ReadOnlyCollection (Silverlight)</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Serialising filtered list on ReadOnlyCollection (Silverlight)</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/10086.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>Charleh posted on Friday, February 18, 2011</h2><p>Hi all,</p>
<p>I am currently working on a Silverlight app within which&nbsp;I have a BO which has&nbsp;a read only collection&nbsp;as a child property - this object is not actually a &#39;child&#39; as such and is simply a lookup list loaded in during the data portal operations. I filter this list occasionally when a certain property on the parent changes</p>
<p>The filter is stored on the object under an ObservableCollection and is repopulated when the filter method is called - this means I can always bind to the collection itself, or bind to the filtered list on the collection.</p>
<p>My problem is that when I load a BO, the business rules fire on the server side to set the object up - during this the filter method fires and creates a filtered view of the lookup - when the object is serialised and ends up on the client side the filtered list is null. The filtered list is not being serialised</p>
<p>I&#39;m assuming you can&#39;t have managed props on a readonlycollection (only the readonlyobject?), is there any way to ensure this list is included in the serialisation process? What are the criteria CSLA uses to decide what gets included in the serialisation process?</p>
<p>If not, what&#39;s the best method of ensuring that the business rule that creates the list is fired on the client side when the object is deserialised?</p>
<p>Thanks!</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Charleh replied on Friday, February 18, 2011</h2><p>I think the alternative is to create a filtered version of the&nbsp;read only list&nbsp;on the parent object and bind to that instead - at least then the values will get serialised</p>
<p>From one of Rocky&#39;s posts it seems to suggest that only managed fields and child lists get serialised by IMobileObject</p></div><div style='padding:0 15 3 15;background-color:lightgreen'><h2>RockfordLhotka replied on Friday, February 18, 2011</h2><p>You probably should not view this read-only object as a child of the editable object. What you have sounds more like a <em>using</em> relationship than a <em>containment</em> relationship.</p>
<p>You can use a unit of work object to retrieve both the editable root and read-only root at the same time, and that&#39;s usually a better solution. I discuss the UOW pattern in the <em>Using CSLA 4: Creating Business Objects</em> ebook, and there&#39;s some info in the <a href="http://www.lhotka.net/cslanet/faq/CslaObjectFaq.ashx">FAQ</a> too.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Charleh replied on Saturday, February 19, 2011</h2><p>Hi Rocky,</p>
<p>That makes sense - I could encapsulate these objects in work layer using UOW</p>
<p>I did intend to move a lot of the business properties to a viewmodel implementation as most of these properties are used exclusively by a particular view, but&nbsp;I think that some other views may also want to see this data at some point when extending the app.</p>
<p>Thanks</p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
