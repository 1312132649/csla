<html><header><title>WinRT MobilePortal to secured endpoint</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>WinRT MobilePortal to secured endpoint</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/12681.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>TSF posted on Monday, June 23, 2014</h2><p>I&#39;m trying to have my WinRT app connect securely to a remote data portal over https, for obvious reasons. Up till now I&#39;ve been testing internally without SSL, but when I start to test using a secured address I get the following error:</p>
<p style="PADDING-LEFT:30px;">The provided URI scheme &#39;https&#39; is invalid; expected &#39;http&#39;. Parameter name: via Csla.DataPortalClient.WcfProxy.&lt;Fetch&gt;d__8.MoveNext():0</p>
<p>I&#39;m assuming this is because my client isn&#39;t configured to use the same wcf bindings the server uses. This wouldn&#39;t be a problem for .NET because I&#39;d add those settings in the config file, or in the clientconfig in a SL app.<strong> How do I set the WCF bindings correctly within a WinRT app?</strong></p>
<p>I recall&nbsp;this recent thread with this response by Rocky: <a href="http://forums.lhotka.net/forums/p/11201/57463.aspx#57463">http://forums.lhotka.net/forums/p/11201/57463.aspx#57463</a>. It somewhat speaks to issues with Universal apps not being able to do this, but I&#39;m not using building a Universal app. <strong>Is configuring the WCF bindings in the app.xaml.cs a possibility?</strong> Hopefully I&#39;m not&nbsp;forced into using the BrokeredProxy model. Thanks.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>TSF replied on Monday, June 23, 2014</h2><p>I didn&#39;t realize you could still communicate securely with basicHttpBinding (over SSL). Perhaps I just need to make sure the settings on the client (in app.xaml.cs) match what is on the server??</p>
<p>Are there a recommended binding&nbsp;settings to use for this scenario? For example:</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;binding name=&quot;basicHttpBinding_IWcfPortal&quot; closeTimeout=&quot;00:01:00&quot; openTimeout=&quot;00:01:00&quot;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; receiveTimeout=&quot;00:10:00&quot; sendTimeout=&quot;00:01:00&quot; allowCookies=&quot;false&quot;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; bypassProxyOnLocal=&quot;false&quot; hostNameComparisonMode=&quot;StrongWildcard&quot;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; maxBufferSize=&quot;65536&quot; maxBufferPoolSize=&quot;524288&quot; maxReceivedMessageSize=&quot;65536&quot;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; messageEncoding=&quot;Text&quot; textEncoding=&quot;utf-8&quot; transferMode=&quot;Buffered&quot;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; useDefaultWebProxy=&quot;true&quot;&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;readerQuotas maxDepth=&quot;32&quot; maxStringContentLength=&quot;8192&quot; maxArrayLength=&quot;16384&quot;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; maxBytesPerRead=&quot;4096&quot; maxNameTableCharCount=&quot;16384&quot; /&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;security mode=&quot;Transport&quot;&gt; <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;transport clientCredentialType=&quot;None&quot; proxyCredentialType=&quot;None&quot; realm=&quot;&quot; /&gt; <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;message clientCredentialType=&quot;Certificate&quot; algorithmSuite=&quot;Default&quot; /&gt; <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/security&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/binding&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/basicHttpBinding&gt;</p></div><div style='padding:0 15 3 15;background-color:lightgreen'><h2>RockfordLhotka replied on Monday, June 23, 2014</h2><p>You need to create a subclass of WcfProxy so you can override the method where the actual WCF proxy is created. That is where you would configure the WCF client to match the server configuration.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>TSF replied on Tuesday, June 24, 2014</h2><p>Thanks. And to clarify, I was originally attempting to use WsHttpBinding, which I didn&#39;t realize isn&#39;t available in WinRT.</p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
