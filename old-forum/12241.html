<html><header><title>SmartDate Issue</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>SmartDate Issue</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/12241.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>Akhilesh Verma posted on Thursday, November 28, 2013</h2><p>Hi,</p>
<p style="margin:0in 0in 0pt;" class="MsoNormal"><span style="font-size:small;"><span style="font-family:Calibri;">I am using CSLA 3.8 version. In this version&nbsp;I</span></span><span style="font-size:small;"><span style="font-family:Calibri;"> am facing some date time conversion issues with <b>SmartDate.</b></span></span></p>
<p style="margin:0in 0in 0pt;" class="MsoNormal"><b><span style="font-size:small;font-family:Calibri;">&nbsp;</span></b></p>
<p style="margin:0in 0in 0pt;" class="MsoNormal"><b><span style="font-size:small;"><span style="font-family:Calibri;">For Example:-</span></span></b></p>
<p style="margin:0in 0in 0pt;" class="MsoNormal"><span style="font-size:10pt;font-family:&#39;Arial&#39;,&#39;sans-serif&#39;;">Host environment has Date format as &ldquo;DD/MM/YYYY&rdquo;</span></p>
<p style="margin:0in 0in 0pt;" class="MsoNormal"><span style="font-size:10pt;font-family:&#39;Arial&#39;,&#39;sans-serif&#39;;">Client environment has Date format as &ldquo;MM/DD/YYYY&rdquo;.</span></p>
<p style="margin:0in 0in 0pt;" class="MsoNormal"><span style="font-size:small;font-family:Calibri;">&nbsp;</span></p>
<p style="margin:0in 0in 0pt;" class="MsoNormal"><b><span style="font-size:10pt;font-family:&#39;Arial&#39;,&#39;sans-serif&#39;;">Case 1</span></b><span style="font-size:10pt;font-family:&#39;Arial&#39;,&#39;sans-serif&#39;;"></span></p>
<p style="margin:0in 0in 0pt 0.5in;text-indent:-0.25in;" class="MsoListParagraph"><span style="font-size:10pt;font-family:&#39;Arial&#39;,&#39;sans-serif&#39;;">a.</span><span style="font-size:7pt;font-family:&#39;Times New Roman&#39;,&#39;serif&#39;;">&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size:10pt;font-family:&#39;Arial&#39;,&#39;sans-serif&#39;;">A SmartDate object is created at host for the value &ldquo;6 July 2013&rdquo;. </span></p>
<p style="margin:0in 0in 0pt 0.5in;text-indent:-0.25in;" class="MsoListParagraph"><span style="font-size:10pt;font-family:&#39;Arial&#39;,&#39;sans-serif&#39;;">b.</span><span style="font-size:7pt;font-family:&#39;Times New Roman&#39;,&#39;serif&#39;;">&nbsp;&nbsp;&nbsp; </span><span style="font-size:10pt;font-family:&#39;Arial&#39;,&#39;sans-serif&#39;;">The object will store information in string format as &ldquo;06/07/2013&rdquo;. </span></p>
<p style="margin:0in 0in 0pt;" class="MsoNormal"><span style="font-size:small;font-family:Calibri;">&nbsp;</span></p>
<p style="margin:0in 0in 0pt;" class="MsoNormal"><b><span style="font-size:10pt;font-family:&#39;Arial&#39;,&#39;sans-serif&#39;;">Result:</span></b><span style="font-size:10pt;font-family:&#39;Arial&#39;,&#39;sans-serif&#39;;"> When this object is queried at UI, it will convert string value to datetime type object, which will return &ldquo;7 June 2013&rdquo;.</span></p>
<p style="margin:0in 0in 0pt;" class="MsoNormal"><span style="font-size:10pt;font-family:&#39;Arial&#39;,&#39;sans-serif&#39;;">&nbsp;</span></p>
<p style="margin:0in 0in 0pt;" class="MsoNormal"><span style="font-size:small;font-family:Calibri;">&nbsp;</span></p>
<p style="margin:0in 0in 0pt;" class="MsoNormal"><b><span style="font-size:10pt;font-family:&#39;Arial&#39;,&#39;sans-serif&#39;;">Case 2</span></b></p>
<p style="margin:0in 0in 0pt 0.5in;text-indent:-0.25in;" class="MsoListParagraph"><span style="font-size:10pt;font-family:&#39;Arial&#39;,&#39;sans-serif&#39;;">a.</span><span style="font-size:7pt;font-family:&#39;Times New Roman&#39;,&#39;serif&#39;;">&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size:10pt;font-family:&#39;Arial&#39;,&#39;sans-serif&#39;;">A SmartDate object is created at host for the value &ldquo;26 July 2013&rdquo;. </span></p>
<p style="margin:0in 0in 0pt 0.5in;text-indent:-0.25in;" class="MsoListParagraph"><span style="font-size:10pt;font-family:&#39;Arial&#39;,&#39;sans-serif&#39;;">b.</span><span style="font-size:7pt;font-family:&#39;Times New Roman&#39;,&#39;serif&#39;;">&nbsp;&nbsp;&nbsp; </span><span style="font-size:10pt;font-family:&#39;Arial&#39;,&#39;sans-serif&#39;;">The object will store information in string format as &ldquo;26/07/2013&rdquo;. </span></p>
<p style="margin:0in 0in 0pt;" class="MsoNormal"><span style="font-size:small;font-family:Calibri;">&nbsp;</span></p>
<p style="margin:0in 0in 0pt;" class="MsoNormal"><b><span style="font-size:10pt;font-family:&#39;Arial&#39;,&#39;sans-serif&#39;;">Result:</span></b><span style="font-size:10pt;font-family:&#39;Arial&#39;,&#39;sans-serif&#39;;"> When this object is queried at UI, it will try to convert string value to datetime type object, which will return a null value. This will cause an exception at the UI.</span></p>
<p style="margin:0in 0in 0pt;" class="MsoNormal"><span style="font-size:10pt;font-family:&#39;Arial&#39;,&#39;sans-serif&#39;;">&nbsp;</span></p>
<p style="margin:0in 0in 0pt;" class="MsoNormal"><b><span style="font-size:10pt;font-family:&#39;Arial&#39;,&#39;sans-serif&#39;;">Case 3</span></b><span style="font-size:10pt;font-family:&#39;Arial&#39;,&#39;sans-serif&#39;;"></span></p>
<p style="margin:0in 0in 0pt 0.5in;text-indent:-0.25in;" class="MsoListParagraph"><span style="font-size:10pt;font-family:&#39;Arial&#39;,&#39;sans-serif&#39;;">a.</span><span style="font-size:7pt;font-family:&#39;Times New Roman&#39;,&#39;serif&#39;;">&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size:10pt;font-family:&#39;Arial&#39;,&#39;sans-serif&#39;;">A business object is using SmartDate type property to save date information to database.</span></p>
<p style="margin:0in 0in 0pt 0.5in;text-indent:-0.25in;" class="MsoListParagraph"><span style="font-size:10pt;font-family:&#39;Arial&#39;,&#39;sans-serif&#39;;">b.</span><span style="font-size:7pt;font-family:&#39;Times New Roman&#39;,&#39;serif&#39;;">&nbsp;&nbsp;&nbsp; </span><span style="font-size:10pt;font-family:&#39;Arial&#39;,&#39;sans-serif&#39;;">Another object is using DateTime type property to get date information from the same database.</span></p>
<p style="margin:0in 0in 0pt 0.25in;" class="MsoNormal"><span style="font-size:10pt;font-family:&#39;Arial&#39;,&#39;sans-serif&#39;;">&nbsp;</span></p>
<p style="margin:0in 0in 0pt;" class="MsoNormal"><b><span style="font-size:10pt;font-family:&#39;Arial&#39;,&#39;sans-serif&#39;;">Result:</span></b><span style="font-size:10pt;font-family:&#39;Arial&#39;,&#39;sans-serif&#39;;"> Return value will be different from the original one.</span></p>
<p>To address the same I have modified SmartDate class. I request to support team to review my changes in attached file(rename it .cs) and let me know the changes&nbsp;are not going to crash the framework in any scenario.&nbsp;</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JonnyBee replied on Thursday, November 28, 2013</h2><p>No, </p>
<p>I do not agree and we are NOT planning on doing any update on the 3.8.x versions of CSLA. </p>
<p>SmartDate stores its value in a DateTime object (NOT a string) and the default format for convcertion to string is &quot;d&quot; which is the short data format. So it seems that your SmartDate code is modified on your side. Even the SmartDate.cs from 2005 uses a DateTime backing field to store its value and we are talking Csla 2.x version at that time.</p>
<p>&nbsp;</p>
<p>So I would rather suggest that you grab the latest SmartDate.cs from CSLA 3.8 .3 and update your own CSLA version.</p>
<p>See: <a title="http://www.lhotka.net/cslacvs/viewvc.cgi/core/branches/V3-8-x/cslacs/Csla/SmartDate.cs?revision=4288&amp;view=markup" href="http://www.lhotka.net/cslacvs/viewvc.cgi/core/branches/V3-8-x/cslacs/Csla/SmartDate.cs?revision=4288&amp;view=markup">http://www.lhotka.net/cslacvs/viewvc.cgi/core/branches/V3-8-x/cslacs/Csla/SmartDate.cs?revision=4288&amp;view=markup </a></p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
