<html><header><title>Memory Leaks in CSLA 1.53</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Memory Leaks in CSLA 1.53</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/9210.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>cf010 posted on Thursday, July 15, 2010</h2><p>I&#39;m working on a CSLA 1.53 system that suffers from a number of performance issues. Specifically it can&#39;t handle more than 20 concurrent users before overloading a reasonably new server. Using the ANTS Profiler has identified that CSLA objects are being held in memory indefinitely by the framework and CSLA extensions. It&#39;s a very bespoke and complicated implementation using Active Objects and Observer. Some of the &#39;business objects&#39; have over 4000 lines of code so it&#39;s a real rabbit-warren.</p>
<p>Are performance issues common with the old version of CSLA? Google turns up pages and pages of search results from people with OutOfMemoryExceptions in CSLA, but not much in the way of a solution. Any advice appreciated.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Thursday, July 15, 2010</h2><p>You are using ActiveObjects right? I never looked at his code, but I think he includes an observer pattern implementation? It is really hard to get an observer pattern correct without causing memory leaks, and .NET 1.1 didn&#39;t have (iirc) any public API for creating weak references - which is the typical solution for that problem.</p>
<p>That is all speculation of course - but if you are using an observer of any sort, you&#39;d have to be <i>extremely</i> careful to unsubscribe from the observer <i>every time you subscribe</i> or you&#39;d create a memory leak.</p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
