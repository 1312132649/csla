<html><header><title>C# Templates to support CSLA 2.1</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>C# Templates to support CSLA 2.1</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/1301.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>rasupit posted on Thursday, September 21, 2006</h2>I have just checked in a new version on Source Code in CSLA Contrib (6445).&nbsp; These templates contain enhancement to support CSLA 2.1.&nbsp; I also added "write first wins" concurrency support when timestamp field is detected.<BR><BR>Download is available at:&nbsp; <A href="http://www.codeplex.com/Release/ProjectReleases.aspx?ProjectName=CSLAcontrib">http://www.codeplex.com/Release/ProjectReleases.aspx?ProjectName=CSLAcontrib</A><BR><BR>Ricky<BR></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Sarosh replied on Friday, September 22, 2006</h2><P>Hi!</P>
<P>The download does not seem to work.</P>
<P>It starts downloading the Zip file but then nothing happens.</P>
<P>Sarosh</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Skafa replied on Friday, September 22, 2006</h2>Do the templates still work for CSLA 2.0? <br><br>And is there some option to not use fww concurrency? I use timestamp fields, but not for 'first write wins' concurrency.<br><br>thanks,<br><br>Remco<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>AaronEngel replied on Tuesday, October 03, 2006</h2><P>I successfully downloaded the updates.&nbsp; When I extract the files, they are extracted to &lt;myLocation&gt;\CSLAcontrib\CodeGenTemplates\CodeSmith\CSLA<STRONG>20</STRONG>, and the template comments indicate that these templates were "<FONT color=#008000 size=2>generated using CSLA <FONT color=#000000>2.0</FONT> CodeSmith Template Collection<FONT color=#000000>".&nbsp; These may be&nbsp;minor issues that should not affect the resulting code, but I am seeing other issues as well with 2.1.</FONT></FONT></P>
<P><FONT color=#008000 size=2><FONT color=#000000>&nbsp;I am using the new CSLA2.1 RTM, and when I attempt to load an object I get the following error:</FONT></FONT></P>
<P><FONT color=#000000>Csla.DataPortalException: DataPortal.Create failed (System.NotSupportedException: Invalid operation - create not allowed at Csla.Core.BusinessBase.DataPortal_Create()) ---&gt; Csla.Server.CallMethodException: DataPortal_Create method call failed ---&gt; System.NotSupportedException: Invalid operation - create not allowed at Csla.Core.BusinessBase.DataPortal_Create() </FONT></P>
<P>If I change the generated factory "new" method from </P><FONT size=2>
<P></FONT><FONT color=#0000ff size=2>Public</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>Shared</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>Function</FONT><FONT size=2> NewCustomer() </FONT><FONT color=#0000ff size=2>As</FONT><FONT size=2> Customer</P>
<P></FONT><FONT color=#008000 size=2>&nbsp;&nbsp;&nbsp;<FONT color=#0000ff>Return DataPortal.Create(Of Customer)()</FONT></FONT><FONT size=2></P>
<P></FONT><FONT color=#0000ff size=2>End</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>Function</FONT></P>
<P><FONT color=#000000 size=2>To:</FONT></P><FONT color=#0000ff size=2><FONT size=2>
<P></FONT><FONT color=#0000ff size=2>Public</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>Shared</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>Function</FONT><FONT size=2> NewCustomer() </FONT><FONT color=#0000ff size=2>As</FONT><FONT size=2> Customer</FONT><FONT color=#008000 size=2></P></FONT><FONT size=2>
<P></FONT><FONT color=#0000ff size=2>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Return</FONT><FONT size=2> DataPortal.Create(</FONT><FONT color=#0000ff size=2>Of</FONT><FONT size=2> Customer)(</FONT><FONT color=#0000ff size=2>New</FONT><FONT size=2> Criteria(Guid.NewGuid))</P>
<P></FONT><FONT color=#0000ff size=2>End</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>Function</FONT></P>
<P><FONT color=#000000 size=2>The object works.&nbsp; I believe the factory new method changed as a part of 2.1, and it may have changed since the templates were last updated.</FONT></P>
<P><FONT color=#000000></FONT>&nbsp;</P>
<P><FONT color=#000000>Thanks!</FONT></P>
<P><FONT color=#0000ff size=2><FONT color=#000000></FONT>&nbsp;</P></FONT></FONT></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>rasupit replied on Tuesday, October 03, 2006</h2><P>AaronEngel,</P>
<P>The code that you have posted is vb code, I'm pretty sure it did not get generated from c# templates. <img src="/emoticons/emotion-1.gif" alt="Smile [:)]" /></P>
<P>I suggest you to contact the author or create a new thread regarding this issue.&nbsp; I'm afraid that your post on this thread may not raise attention from the author.</P>
<P>Ricky</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Michael Hildner replied on Wednesday, October 04, 2006</h2><P><BLOCKQUOTE><div><img src="/Themes/default/images/icon-quote.gif"> <strong>rasupit:</strong></div><div>The code that you have posted is vb code, I'm pretty sure it did not get generated from c# templates.</div></BLOCKQUOTE></P>
<P>Ricky, I downloaded from your link and there's some VB stuff in there under CSLAcontrib\CodeGenTemplates\CodeSmith\CSLA20\VB</P>
<P>Maybe that's what AaronEngel is referring to?</P>
<P>Thanks for the templates!</P>
<P>Mike</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>AaronEngel replied on Wednesday, October 04, 2006</h2>Yes, that is what I am referrring to.&nbsp; The download link contains VB templates as well.&nbsp; Perhaps these templates have not been updated for 2.1?</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>AaronEngel replied on Wednesday, October 04, 2006</h2>Will the templates for 2.1 soon show up under the releases tab on this site?</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>rasupit replied on Wednesday, October 04, 2006</h2><P>Is available.&nbsp; Here is the link <A href="http://www.codeplex.com/Release/ProjectReleases.aspx?ProjectName=CSLAcontrib">http://www.codeplex.com/Release/ProjectReleases.aspx?ProjectName=CSLAcontrib</A></P>
<P>I also change the link on the top of the thread.</P>
<P>Ricky</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>david.wendelken replied on Thursday, October 12, 2006</h2><P>Thanks for all your good work on this!&nbsp;&nbsp; And - thanks for letting CodeSmith add these templates directly to the next release of their product. </P>
<P>I'm trying to add some features to the templates (I'll contribute the changes when done), but I'm new to CodeSmith.&nbsp; I have 3.2 professional.&nbsp; I made a change to the Template.cs file and saved it, but the changes don't show up in the generated code.&nbsp; What do I have to do to get it to recompile?&nbsp;&nbsp; </P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>rasupit replied on Friday, October 13, 2006</h2>David,<br>I don't use CodeSmith 3.2 ide, so I may not be able to help you using the ide.&nbsp; However, from property screen, clicking the second icon from left on the toolbar will recompile the template.&nbsp; Otherway is to close and reopen the template.<br><br>HTH,<br>Ricky<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>david.wendelken replied on Friday, October 13, 2006</h2><P>Found the problem.&nbsp; Me being stupid. :)</P>
<P>Did find this link, however, which might help those who actually do have the problem I thought I had...</P>
<P><A href="http://community.codesmithtools.com/forums/thread/9450.aspx">http://community.codesmithtools.com/forums/thread/9450.aspx</A></P>
<P>"One minor annoyance if you are working on your base template class. Codesmith seems to have a tendency to get an out-of date version stuck in its template cache here<SPAN>: \Documents and Settings\All Users\Application Data\CodeSmith\v3.2\Template Cache"</SPAN></P>
<P><SPAN>I've got the first cut done on the extension that adds in comments that describe the individual properties.&nbsp; Have to test it with xml input files, views, stored procs instead of tables to see how it handles things.</SPAN></P></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
