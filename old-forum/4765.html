<html><header><title>Can I Save saveable child objects and skip invalid ones?</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Can I Save saveable child objects and skip invalid ones?</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/4765.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>chrisb2 posted on Tuesday, April 29, 2008</h2><P>I have a web page that is a questionnaire.&nbsp; Each question is an editable child and the list of questions is an editable child list which in turn is in an editable root parent Questionnaire object.&nbsp; The problem is that if a user has just one invalid question response, he cannot save any of them.&nbsp; If he answers 15 questions and clicks Save, I cannot call questionnaire.Save() because questionnaire is not valid since it has an invalid child..&nbsp; So no responses are saved.&nbsp; If he doesn't know better and logs off thinking he can come back later to fix the bad ones, he looses all his work.&nbsp; This is a bad situation.&nbsp; I wouldn't mind if he looses the invalid answers, but I want to be able to save saveable children.</P>
<P>Has anybody else dealt with this?</P>
<P>I'm considering modifying the CSLA framework to support a SaveValidChildren(), but I'm not sure how to do that either.&nbsp; In some situations that should not be used because it could lead to inconsistant data.</P>
<P>&nbsp;</P>
<P>Thanks,</P>
<P>Chris</P>
<P>&nbsp;</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>robert_m replied on Tuesday, April 29, 2008</h2><P>How about changing your validation logic a bit so that an incorrectly answered question doesn't get marked invalid ? </P>
<P>Instead you could introduce a bool&nbsp;property&nbsp;(into Question class)&nbsp;indicating whether a question is correctly answered or not.</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>DocJames replied on Tuesday, April 29, 2008</h2><P>I'm building a ClickOnce application with a DataPortal.</P>
<P>To only save valid&nbsp;children, I created a "GetListToSave" method in my List class which returns a new List containing&nbsp;only the deleted and saveable child object.</P>
<P>I then save the new List object.</P>
<P>On my List class I also have a "SetListAfterSave" method which accepts the saved List. I then removed deleted children and update the saved children (remember .Clone when updating the children).</P>
<P>This way I only send the deleted and updated children to the DataPortal.</P>
<P>Let me know if you are interested in the source code.</P>
<P>Jimmy</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Tuesday, April 29, 2008</h2>Hi,<br><br>You should probably change your rules to be Warning rules instead of Error rules.&nbsp; Warnings will allow you to save the instance fine.&nbsp; You'll also have to have a way to move the questionaire from an "incomplete" state to a completed one as well.&nbsp; Incomplete questionaires would have broken Warning rules.&nbsp;&nbsp; Transitioning to completed would require that there are no broken rules, warning or otherwise.<br><br>HTH<br>Andy<br></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
