<html><header><title>Opinions on child structure</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Opinions on child structure</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/5013.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>dmbRedGetta posted on Tuesday, June 24, 2008</h2><P>Hey guys,</P>
<P>I'm new to CSLA and I'm finally getting back to true OO programming in general and I'm having trouble shifting my thinking back from unstructured asp code.</P>
<P>I'm making a scheduling application where items are scheduled on a given day and have a begin time and an end time (exhilirating, I know).&nbsp; Items are associated with resources, and can be associated with an unlimited number of resources (1 or more).&nbsp; I have this coded and working perfectly using the following classes:</P>
<P>ScheduleItemList: ROLB - Used to display a daily schedule<BR>ScheduleItemInfo: ROB - Represents an item on the schedule<BR>ScheduleItem: BB - Allows user to modify item information (description, date, begin/end times, resources)<BR>ScheduleItemResources: BLB - Manages associated resources<BR>ScheduleItemResource: BB - Handles the insert/delete operations&nbsp;of resource associations<BR>ResourceList: ROLB - Used to display a list of resources<BR>ResourceInfo: ROB - Represents a resource</P>
<P>The application also needs to allow users to create schedule items that re-occur based on some frequency (every Monday, Wednesday, Friday, or every Tuesday, etc).&nbsp; So far, I have created new classes to handle the Template items:</P>
<P>TemplateItem: BB - Allows users to modify template item information (description, begin/end times, resources, recurring days)<BR>TemplateItemResources: BLB - Manages resoures associated with template item<BR>TemplateItemResource: BB - Handles the insert/delete operations of template item resources</P>
<P>A&nbsp;template item can be created independent of any existing schedule item, or (for ease of application use) one can be created by simply marking a schedule item to re-occur (the other details will be pulled from the schedule item).&nbsp; Note that there will be a daily build process that will convert the template items into schedule items.</P>
<P>How would you all design this?&nbsp; And how would you link the binding sources?</P>
<P>Instead of exposing the TemplateID in the ScheduleItem class, I have exposed a TemplateItem property that either returns the corresponding TemplateItem object or returns a new, blank TemplateItem object.&nbsp; The TemplateItem is only saved to the database if it is marked as recurring (otherwise it is just taking up unnecessary space).&nbsp; This is working, but I'm wondering if I've done it the best way.&nbsp; I am not marking the TemplateItem as a child, so to get the data binding to work, I had to explicity call BeginEdit() on the TemplateItem (right after the BeginEdit() call on the ScheduleItem), and during the save process of the ScheduleItem I'm saving the TemplateItem&nbsp;directly (which is actually done before saving the ScheduleItem since the TemplateItem might not exist).</P>
<P>I know I could make the TemplateItem class switchable, but I know that usually points to bad designg.&nbsp; So I'm wondering if I need to create a new class to handle the specific instances where the TemplateItem is a child to the ScheduleItem (and basically duplicate all of the code with the addition of MarkAsChild()), go down the path of making it a switchable class, or leave it as is?&nbsp; I have attached a screenshot of the form.&nbsp; The top half is the ScheduleItem and the bottom half is the associated TemplateItem (if one exists).</P>
<P>Thanks!<BR>Matt</P></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
