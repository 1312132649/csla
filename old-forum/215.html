<html><header><title>Code Generators and UML Modeling tool</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Code Generators and UML Modeling tool</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/215.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>Moh_Abed posted on Sunday, May 28, 2006</h2><P>Hi,</P>
<P>Using code generator to generate CSLA classes is a productivity boost, but it violates the concept of Object - Oriented design, i mean it generates classes from tables then forcing data oriented design, so if we need to design an application to be fully object - oriented no matter the database schema is then we have to write classes by hand.</P>
<P>what i am rainsing is that it would be better to find a code generator for CSLA that would generate code from class diagrams, then we design our application fully object oriented through class diagrams then it would generate classes and source files leaving developers to concentrate on writing business logic - and gaining some benifits from MDA.</P>
<P>most modeling / CASE&nbsp;tools&nbsp;generates XMI files defining the schema of class diagram - and some of them generate code to a specific language like C# but they dont have customized code generator, the level of customization may exceeds code generation (like defining a check box to deremine if the class is root or child ...).&nbsp;</P>
<P>does anybody knows any tool that would generate code from class diagrams (or&nbsp;XMI files) that could be customized to generate&nbsp;CSLA code&nbsp;?&nbsp;&nbsp;&nbsp;</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>DavidDilworth replied on Tuesday, May 30, 2006</h2><P>I'm not aware of any tools that do that right now.&nbsp; But that doesn't mean there aren't any <img src="/emoticons/emotion-1.gif" alt="Smile [:)]" /></P>
<P>Your post raises important questions about how we should use code generation to create our problem domain BO classes.</P>
<P>I'm currently reading a book entitled "Software Factories: <FONT size=2>Assembling Applications with Patterns, Models, Frameworks, and Tools</FONT>&nbsp;(by Jack Greenfield et al)" that discusses the concept of completely automating the software&nbsp;development process.&nbsp; As part of the discussion in the book it talks about the issues of how code should be generated from models as part of the whole development process.</P>
<P>However, the current tools we have (VS 2005 for example) don't raise the abstraction level of the problem domain sufficiently to make these types of tools useful just yet.&nbsp; So we're stuck with using ORM tools or code generation templates that work from relational databases.</P>
<P>It's an interesting topic, even though I don't fully agree with all the points made by the authors.</P>
<P>&nbsp;</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Moh_Abed replied on Monday, June 05, 2006</h2><P>Currently i am investigating modeling tools (MDA tools), Enterprise Architect looks very good candidate as it has a flexible MDA engine with code generation template and transformation template, but the template language seems to be ver complicated.</P>
<P>it would be great if you reach the model of designing object model using the UML class diagram, and add some steriotypes like Root, child collection, ... then it generates the code customized with all CSLA code, leaving the developer concentrating on writing business logic only.</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>DennisWelu replied on Monday, June 05, 2006</h2><P>I think you have raised a question I've asked myself many times on this forum. The code generators I've seen are generally built from the database schema. Depending on the project, that may be convenient. It&nbsp;may be&nbsp;a more practical approach given that there is probably more community knowledge and standards for working against an RDBMS data source. But I thought it would be nicer to codegen from a UML model also, and&nbsp;that led me also to Enterprise Architect.</P>
<P>I like EA a lot because 1) it's cheap, 2) it's relatively easy, 3) it doesn't try to do everything but 4) it does a lot of things across the development life cycle, and finally 5) it's extensible. The template language is indeed proprietary and complicated, but I like the automation model it exposes a lot. It was relatively easy to build an add-in that would bring up my codegen dialog based on the current diagram. From there I could generate/regenerate my C# business classes with my own generator logic. The built-in class properties and generic tags gave me enough flexibility for metadata to generate the classes into my&nbsp;visual studio solution the way I wanted them.</P>
<P>Now, I've successfully used this on only a small non-production prototype so far. But I'm about to find out how well the process works for a larger from-scratch development project. We'll see how it goes!</P>
<P>Dennis</P>
<P>&nbsp;</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>SolPub replied on Sunday, November 26, 2006</h2><P>Hi Dennis,</P>
<P>I'm just about to get started with EA. Do yu know of any pre-build CSLA 2.1 templates for this tool. Thanks for your help.</P>
<P>&nbsp;</P>
<P>Byron</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>DansDreams replied on Monday, November 27, 2006</h2><P>"I like EA a lot because ...5) it's extensible"</P>
<P>Are we talking about Visio for Enterprise Architects?</P>
<P>By extensibility do you mean that you could get it to the point where you add a property in the uml and it writes the proper CSLA property accessors like including the CanReadProperty() check?</P>
<P>I continue to struggle with the legitimate ROI of code generation once you spend hundreds of hours tweaking things.&nbsp; Just one example.... I have a root business object that has several properties that are collection objects.&nbsp; I want two of them to lazy load but not the other two.&nbsp; The collections all come from different stored procedure calls between two different back end databases.</P>
<P>Things like that are fairly trivial to code by hand, but it seems there are hundreds and hundreds of permutations of how BOs are related to each other and to the database.&nbsp; Obviously, the value of generation is only&nbsp;realized when there's a fairly obvious and significant&nbsp;imbalance between time to tweak the generator and to generate the code.</P>
<P>There is then the case of needing to make a breaking change once you have a complex application.&nbsp; In that case the imbalance is fairly obvious since we're comparing one change to the generator vs. numerous changes directly to the BO code.&nbsp; But then the question becomes when we make a big breaking change like implementing LINQ are we essentially going to have to rewrite the whole generator paradigm again anyway?</P>
<P>Ok, I'm rambling.&nbsp; This is one of those conversations I'd really like to have over a steak with somebody that's beat the daylights out of code generation and still finds it valuable.</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Q Johnson replied on Monday, November 27, 2006</h2><P>The fact that code generators run from RDMS table meta-data has often been held a liability here.&nbsp; I am a bit confused by this.&nbsp; Sure, we want to define our objects according to their needed behavior and responsibility.&nbsp; But they will still boil down to properties and methods.</P>
<P>And it's so easy to make tables with our database tools, that it doesn't seem a real stretch to me to <STRONG>just build tables for the express purpose of code generation</STRONG>, whether or not the BO generated from them will use those particular&nbsp;tables&nbsp;for persistence or not.&nbsp; (And it helps to begin the names of all these with a 'cg' or some such so that we don't confuse them with tables that will actually store data for the application.)</P>
<P>I find myself doing this frequently, for example,&nbsp;for BOs whose properties are found in more than one table.&nbsp; I just join the tables in a view, change the view to a make table query, and generate the table.&nbsp; Then I run the code generator.&nbsp; It's still FAR less work than manually coding the BO by hand.</P>
<P>And regarding persistence, whatever TSql actually goes in the sProc whose name was generated for my BO will take care of that quite independently of <STRONG>how </STRONG>the BO was generated.&nbsp; So&nbsp;we can store the BO in the most useful way for the database without regard to the BO structure.</P>
<P>What's not to like?</P>
<P>It sounds like many folks want to start with a modeling tool (e.g., EA) that generates some sort of useful file output.&nbsp;&nbsp;Then that output could be used by a code generator to create both BO code and DDL code for creating the DB schema.&nbsp; But it seems to me that this pesky ORM issue is probably going to make consistently achieving this a real challenge.&nbsp; How would your definition of the object in the modeling environment know whether that object was to be persisted to a single table or might require more than one?</P>
<P>Until I find an easy way to answer that problem, I'm just going to be content saving lots of time builing my database to store what my application requires <STRONG>and to provide meta-data </STRONG>for BO generation (even if special tables need to&nbsp;be created for that express purpose).</P>
<P>Am I missing something important here?</P>
<P>Thanks,</P>
<P>&nbsp;</P>
<P>&nbsp;</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>DansDreams replied on Monday, November 27, 2006</h2><P>Q<FONT size=2>, that's an interesting approach.&nbsp; You're right, it solves the big&nbsp;question of what tool to use to model the business layer, given it could be quite different than the data layer schema.</FONT></P>
<P><FONT size=2>But that still seems so inadequate.&nbsp; You can easy enough model that there's a&nbsp;property called FullName in the Customer BO... but what of the fact that it doesn't come from a database column?&nbsp; I can add a property lickity split with a snippet, so I don't see that as being the big value of generating.&nbsp;&nbsp;It's all&nbsp;the appropriate dr.GetString("propertyName") mundane plumbing stuff that goes with it that really brings the value.&nbsp; And to be able to know when to do that&nbsp;in a business object that may load from several tables across multiple databases, using a stored procedure in one case and an ad hoc query in another,&nbsp;it seems to me you need a whole lot more metadata in the model than just the fact that a property exists.</FONT></P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Q Johnson replied on Monday, November 27, 2006</h2><BLOCKQUOTE><div><img src="/Themes/default/images/icon-quote.gif"> <strong>DansDreams:</strong></div><div>
<P><FONT size=2>it seems to me you need a whole lot more metadata in the model than just the fact that a property exists.</FONT></P>
<P></div></BLOCKQUOTE></P>
<P>That's one of the two major reasons I chose MyGeneration over CodeSmith.&nbsp; The MyMeta utility available in MyGeneration can be very powerful.&nbsp; You have to support it with code in your templates that reacts to the presence of those Metadata values, but it is often a very worthwhile trade-off.&nbsp;&nbsp;At the time that I was comparing the two, that metadata&nbsp;seemed to&nbsp;do all you can do with CodeSmith's properties and quite a bit more.&nbsp; And it can use Views and sProcs as well as tables for metadata sources.&nbsp; Since you can add your own metadata to tables as well as fields, you can get properties added without having to add those fields, if that's important to you.&nbsp; And it's pretty easy to protect hand-crafted code so that subsequent re-generation doesn't trash it (very handy for .NET 1 folks who don't have partial classes available!).</P>
<P>The other major reason (I'm guessing someone might be curious) is that you can write the templates in VB (or in C#).&nbsp; I have managed to program many years without ever having been asked to do a web app.&nbsp; So the ASP-like language used for CodeSmith isn't particularly appealing to me.&nbsp; Developing my templates right in Visual Studio (with intellisense and all the other code support) on the other hand, is a real benefit.</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>DansDreams replied on Tuesday, November 28, 2006</h2><P>That all sounds very interesting Q.&nbsp; Are there MyGeneration templates for CSLA 2 available - is there as much community support in that sense as there seems to be for CodeSmith?&nbsp; Where's the starting point for MyGeneration?</P>
<P>I currently have a contract developer working on a design for a metadata generator.&nbsp; It's not a from-scratch project because he'd be leveraging some work he's already done, but it would be a significant cost to me.&nbsp; </P>
<P>The reason I'm doing that is because my perception is that everybody is thrilled to get a 5% productivity boost and to me it hardly seems worth the trouble.&nbsp; (Exaggeration intended.)&nbsp; I looked at CslaGen, and while it is interesting being a purpose-built generator, the metadata editing UI is a long way from what I think is necessary to really take this generation idea to its fruition.</P>
<P>I say all that to say that some of what you describe with MyGeneration sounds similar to what we've been discussing here.</P>
<P>Could you elaborate a little more on "...the metadata seemed to do all you can do with CodeSmith's properties and quite a bit more."?</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>simon_may replied on Tuesday, November 28, 2006</h2><P>Like most who have contributed to this thread&nbsp;I find code generation a facinating subject because if it could be implemented efficiently it would provide huge improvements in development productivity. I have in the past encountered MDA approaches and products from a management perpective rather than a user but concluded that they require an awful lot of work to get them to work succesfully in a particular application domain.. The idea of sticking a domain specification in one end of a machine and getting a fully working system out of the other end is tantalising. </P>
<P>However, when I chucked in the management job and decided to get my hands dirty again, working for myself, I took a look at automating what I could. My first peice of luck was discovering CSLA a solid framework around which business logic could be implemented but it was obvious that code generation was required.</P>
<P>I spent some time with CodeSmith but found that the templatte syntax a pain (being based on asp, who dreamed up the idea of a tag opener to require you to type a &lt; -requires pressing a shift plus a key at the bottom to the keyboard followed by % again shift and now a key in the top row of the keyboard? - user friendly I dont think so Microsoft). I also found it challenging generate coditional code segments (where the code to be generated depended on a specific attribute in the model). </P>
<P>Like others here I also found that genrating from the schema also a pain given that I was mostly writing new systems. Anyway long story short I decided to crate my own metadata model allowing me to describe my domain in a set of XML files and from those genrate the business objects, DDL and stored procedures.</P>
<P>Version 1 was a good pre-prototype as I was able to prove the concept to myself and with the advent of CSLA version 2 I &nbsp;moved to .Net 2 and rewrote. This time I attempted to bring in support for OO concetps such as inheritance and composition. Concepts necessary if I was ever to map from UML or XMI (which is outside current scope). I have abandoned Codesmith in favour of StringTemplate for my template engine.</P>
<P>Sorry about the ramble and life history. What prompted this contribution were questions and statements made by others about adhering to the purity of object oriented design in the solution space. Having been there and attempted to model it and generate CSLA based code I have come to the conclusion that as soon as you bring a realational database into the equation you are going to have to compromise on that purity. </P>
<P>The big one is how to support polymorphism particularly polymorphic collections of business objects with virtual methods where the actoul override&nbsp;is in and&nbsp;that needs to access data only available to a subclass.</P>
<P>Also there is a little bit of work required to get CSLA to support business object inheritance.</P>
<P>If anyone is doing the same sort of stuff and working on these and other problems then I would be pleased to talk to them.</P>
<P>Regards</P>
<P>Simon</P>
<P>&nbsp;</P>
<P>&nbsp;</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Q Johnson replied on Tuesday, November 28, 2006</h2><BLOCKQUOTE><div><img src="/Themes/default/images/icon-quote.gif"> <strong>DansDreams:</strong></div><div>
<P>That all sounds very interesting Q.&nbsp; Are there MyGeneration templates for CSLA 2 available - is there as much community support in that sense as there seems to be for CodeSmith?&nbsp; Where's the starting point for MyGeneration?</P>
<P><FONT color=#0000ff><A href="http://www.mygeneration.com">www.mygeneration.com</A></FONT></P>
<P><FONT color=#0000ff>There isn't nearly as much community support.&nbsp; AFAIK, it's just me (using VB) and Guy Rochon (using C#).&nbsp; He evangelized me and I'm sort of continuing that idea here.&nbsp; I only have templates for 1.53.&nbsp; He only has templates for 2.x (again, AFAIK).&nbsp; He might jump in here and offer more or you could ask him directly.&nbsp; </FONT></P>
<P>....The reason I'm doing that is because my perception is that everybody is thrilled to get a 5% productivity boost and to me it hardly seems worth the trouble.&nbsp; (Exaggeration intended.)&nbsp; I looked at CslaGen, and while it is interesting being a purpose-built generator, the metadata editing UI is a long way from what I think is necessary to really take this generation idea to its fruition.</P>
<P><FONT color=#0000ff>I think the boost is a little closer to 25-30% to tell you the truth.&nbsp; But it's pretty darned hard to quantify for me.&nbsp; The project I just finished used JET instead of SQL Server so I had to "tweak" my templates <STRONG>considerably</STRONG> for the different back end.&nbsp; MyGen supports it just fine, but the OleDb instead of Sql object calls and the syntax for the sProcs I generate all needed to be output differently for my BOs.&nbsp; Still, after spending the better part of a day modifying four BO templates, I generated about 2800 lines of code for the the major BOs of the project.&nbsp; And I think it would have taken me at least several days using another quasi-automated tool.&nbsp; By that I mean either using a BO template and adding all the properties and DP_xxx methods by hand or even adding that same code to the output produced by the .NET macros that have been offered here in the past.</FONT></P>
<P><FONT color=#0000ff>After the initial generation, there was&nbsp;still a heck of a lot of UI stuff and report work to do for which I don't have any templates developed (or even planned yet).&nbsp; But regeneration worked great when it was needed.</FONT></P>
<P>I say all that to say that some of what you describe with MyGeneration sounds similar to what we've been discussing here.</P>
<P>Could you elaborate a little more on "...the metadata seemed to do all you can do with CodeSmith's properties and quite a bit more."?</P>
<P><FONT color=#0000ff>I think the easiest way for me to communicate the metadata capabilities would be to demo them for you over a remote connection.&nbsp; I'd be happy to offer 30 minutes or so of that if you have the time for it.&nbsp; Just email me at QJohnson at TeamNFP dot nospam com to set up a time convenient for us both.&nbsp; I'm on Central Time and am in the office from about 8 to 8 every day this week.</FONT></P>
<P><FONT color=#0000ff>I did this for Chris Denslow a while back, by the way.&nbsp; I haven't touched base with him on the subject in some time, but my guess is that he has decided to stick with CodeSmith for which there is obviously so much more community support.&nbsp; You just have to decide whether it's worth "working alone on it" because you like the tool enough for that.&nbsp; I was reluctant myself at first.&nbsp; But when I finally realized how much I was going to want to customize <STRONG>any </STRONG>tool's templates for my own use, I knew <STRONG><U>I</U> </STRONG>wanted to be doing it with MyGen.&nbsp; YMMV of course.</FONT></P>
<P></div></BLOCKQUOTE></P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Q Johnson replied on Tuesday, November 28, 2006</h2><P>DAN!</P>
<P>YIKES!&nbsp; SORRY!&nbsp; I gave you the wrong URL for MyGeneration in response to your question about the starting point for it.&nbsp; It should have been:</P>
<P><A href="http://www.mygenerationsoftware.com">www.mygenerationsoftware.com</A></P>
<P>&nbsp;</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>MvdHoning replied on Tuesday, November 28, 2006</h2>As the title of this thread impies usage of uml to generate business objects for csla. An idea that apeals to me! Generating business objects from database just feels wrong to me (also it misses dynamic properties that are not stored in the db).<br><br>The Enterprise Architect that is talked about is that this one?: http://www.sparxsystems.com/<br><br>Maybe then we could generate both the database structure(if needed) and business objects from the uml making the uml the central point in development.<br><br><br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>DansDreams replied on Tuesday, November 28, 2006</h2>I will definitely take you up on that Q but probably not until the beginning of next year.</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>DennisWelu replied on Tuesday, November 28, 2006</h2><P class=MsoNormal>There have been some good questions and points raised here!</P>
<P class=MsoNormal><o:p>&nbsp;</o:p></P>
<P class=MsoNormal>The familiarity of developers with relational technology, the rich set of tools built around it, and the type of project/organization may make starting from a db schema a fine choice. Other things being equal I would prefer not to because it seems that a conceptual/domain model is a more natural canvas for expressing these business objects. Outside of codegen, for us the model serves as a centering point for requirements discussions as we kick off each iteration. </P>
<P class=MsoNormal><o:p>&nbsp;</o:p></P>
<P class=MsoNormal>I struggled with the various “languages” and templates for codegen in the tools out there. I really like Enterprise Architect (the product from Sparx Systems) but found their built-in codegen framework similar to CodeSmith: another language to learn and hard to do more than simple tweaks. It would sure be nice to work with csharp/dotnet and have full control, I thought.</P>
<P class=MsoNormal><o:p>&nbsp;</o:p></P>
<P class=MsoNormal>Another observation is that many of the “off the shelf” codegen templates/tools try to do more than what I need on any given specific project. There are a few basic patterns of business objects on a project that cover the majority of ground. Rather than trying to get something that does everything I thought we could solve for the more common scenarios and get the process useful – then evolve it from there.</P>
<P class=MsoNormal><o:p>&nbsp;</o:p></P>
<P class=MsoNormal>That is how I came to building a csharp addin for EA. We use custom tags in the UML model to give guidance to our codegen addin on what to generate. We also are transforming the domain model to E/R which we can export as a DDL script. Does it generate 100% of the output that could be generated? Definitely not. What doesn’t get generated gets done in other ways. But it handles the mainstream in a comfortable and controllable manner.</P>
<P class=MsoNormal><o:p>&nbsp;</o:p></P>
<P class=MsoNormal>I was interested to see in a post somewhere when someone asked Rocky what he used for codegen and he said they had a custom solution. There certainly isn’t “one” tool that works for everyone.</P>
<P class=MsoNormal><o:p>&nbsp;</o:p></P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>mr_lasseter replied on Tuesday, November 28, 2006</h2>Q,<br>
<br>
I would be interested in seeing your myGeneration Templates if you don't mind posting them somewhere.<br>
<br>
Thanks,<br>
Mike<br>
<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Q Johnson replied on Tuesday, November 28, 2006</h2><P>Here are the four I use for BOs (ERO, ECO, ECC and ROC).&nbsp; I also have some for sProcs and my BindControls routine.&nbsp; I'm just going to include those here, too.&nbsp; But keep in mind, this is only CSLA 1.x.&nbsp; There's also an excel file in which I tried to start documenting my use of the metadata there so that Parent-type ERO BOs would know which Child and ChildCollection objects they had (and Children types would know their parent).</P>
<P>If you start another thread to get Guy's attention, he might&nbsp;let you see his C# templates for 2.x.</P>
<P>I have resisted the urge to post these in MyGen's template library because not everyone wants to generate the way I do.&nbsp; But I guess that's always going to be true so I may as well get them out there and see if anyone can do anything worthwhile with them.&nbsp; Post back here if you need any help.</P>
<P>&nbsp;</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>guyroch replied on Saturday, December 02, 2006</h2><BLOCKQUOTE><div><img src="/Themes/default/images/icon-quote.gif"> <strong>Q Johnson:</strong></div><div>
<P>
<P><FONT color=#0000ff><A href="http://www.mygeneration.com"></A></FONT></P><FONT color=#0000ff>There isn't nearly as much community support.&nbsp; AFAIK, it's just me (using VB) and Guy Rochon (using C#).&nbsp; He evangelized me and I'm sort of continuing that idea here.&nbsp; I only have templates for 1.53.&nbsp; He only has templates for 2.x (again, AFAIK).&nbsp; He might jump in here and offer more or you could ask him directly.&nbsp; </FONT></P>
<P></div></BLOCKQUOTE></P>
<P>Nice to see you're still using MyGeneration Q.&nbsp;:)</P>
<P>However, due to legality issues I’m not at liberty to disclose my templates - sorry :(.&nbsp; But Q nailed it pretty darn good - ah, if only I was a good poet like Q :).</P>
<P>I’ll get straight to the point.&nbsp; MyGeneration was developed in .Net 1.1 and comes with it’s own UI.&nbsp; You can do a decent job with the built-in UI but I’ve learn quickly that intellisense is one thing I can not do without.&nbsp; Instead, I’m referencing the MyGeneration assemblies from my own .net project and code my MyGeneration templates using visual studio - It’s awesome.</P>
<P>I’m not intimate with all the other generation tool but I can guarantee you that if you can code in .Net (VB or C#) then you can code templates in MyGeneration - it’s the same thing.</P>
<P>Like any other tool though, it does need some TLC to get use to it.&nbsp; I remember last year when Q approached me about MyGeneration.&nbsp; It took several emails between him and I and a WebEx session of about 30 minutes and he was hooked - I’m glad to see he’s still going at it 1 year later.</P>
<P>The issue of code generation has been rehashed time and time again - and will be for years to come.&nbsp; The thing is I’m sure we will be having this same conversation for years to come as well.&nbsp; But this is fine, we can’t change the world all at once, but if we try we can change the world one by one.</P>
<P>At the end of the day though, you must choose the tool that best suits your need, and if MyGeneration is it, then I’m glad, if not, then it's fine too.&nbsp; The fact remains that _most_ code generation tool reads database schemas for input and most of Csla’ers wants some sort of tool that read from xml or uml.&nbsp; So until someone is willing to undertake this project and actually create such a tool, we will have to make due with what we have.&nbsp; For the time being, I’m using MyGeneration and I does the job me, it really does.</P>
<P>Oh, one more thing... Mike Griffin, the creator of MyGeneration is much like Rocky in that his tool is free and he is as much active in his forum (<A href="http://www.mygenerationsoftware.com/phpbb2/index.php">http://www.mygenerationsoftware.com/phpbb2/index.php</A>) as Rocky is in the Csla forum.&nbsp; </P>
<P>Enjoy...&nbsp;</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>xal replied on Monday, December 04, 2006</h2>Anybody wanting to try something new could go to http://groups.google.com/group/CslaGenerator/ and try that one out.<br><br>Yes, you must have a db schema in order to use it, but you can easily design BOs to be just the way you want them to. Add the properties you feel like from each table. For many of these cases, the tool will figure out how to generate the correct stored procs, for the rest, you can always readjust the them.<br><br>I won't say much about the tool because I'm biased, so dl it and get your own conclusions. What I will say that I use it for my every day tasks and it's an incredible aid.<br><br>Andrés<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>xAvailx replied on Monday, November 27, 2006</h2>&gt;&gt;<p>Using code generator to generate CSLA classes is a productivity boost, but it violates the concept of Object - Oriented design, i mean it generates classes from tables then forcing data oriented design, so if we need to design an application to be fully object - oriented no matter the database schema is then we have to write classes by hand.<br><br>&lt;&lt;</p><p>I guess this depends on what tool you are using for code generation. I use CodeSmith. By default CodeSmith has support for database (SchemaExplorer) and XML support to use as metadata. You can even create a custom meta data source. So with CodeSmith, you are not constrained to generating classes from tables.<br></p><p>http://www.codesmithtools.com/usersguide/<br></p>&gt;&gt;<br><p>does anybody knows any tool that would generate code from class diagrams (or&nbsp;XMI files) that could be customized to generate&nbsp;CSLA code&nbsp;?&nbsp;&nbsp; <br></p>&lt;&lt;<br><p>I have looked into this in the past. Visio has an XMI export add-on, but I quickly gave up after much frustration with the XMI schema. Instead we created a custom meta data provider in CodeSmith.<br></p><p> http://msdn2.microsoft.com/en-us/library/aa140339(office.10).aspx</p><br>HTH<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RBrown replied on Tuesday, November 28, 2006</h2><P>Since Rockford's book&nbsp;states&nbsp;that the Csla .NET framework lends itself well to codegen tactics, I'd love to get his input on this very interestig thread.&nbsp; </P>
<P>Also, since CodeSmith has published codegen templates specifically for Csla, and has a substantial user community, one would think that it is a better choice for those of us just in the beginning stages of finding a codegen solution.&nbsp; Sounds like others have done fine rolling their own with other codegen products as well.&nbsp; For me, I'm gonna be more interested in finding something that doesn't require starting the template creation process from scratch, afterall, the reason for CodeGen in the first place is to increase a project ROI.&nbsp; And because of the differences between table structures and&nbsp;object design, I think&nbsp;you'll always need to "tweak" the end result regardless of what product you use.&nbsp;&nbsp;Just my 2 pennies...</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>david.wendelken replied on Saturday, December 02, 2006</h2><P>The key to use code generation productively is to use it for the right tasks.</P>
<P>That said, how does one know what the right tasks are?</P>
<P>Here's how I do the math:</P>
<OL>
<LI>How long would it take me to do one of these by hand?</LI>
<LI>How many of them are there to do?</LI>
<LI>How boring are they to do?&nbsp; (I.e., will I slow down out of boredom if I'm doing a lot of them at one time?)</LI>
<LI>How many mistakes per item&nbsp;will I make on average?</LI>
<LI>How long will it take to correct&nbsp;each actual mistakes?</LI>
<LI>How long will it take to correct the collateral damage from the mistakes?&nbsp; (I.e., the downstream damage caused by allowing bad data, destroying test data, etc.)</LI></OL>
<P>So, the&nbsp;basic&nbsp;formula goes something like this:</P>
<P>(((Time to do one item by hand) +&nbsp; (Extra boredom time factor)) <BR>* (Number of items to do) )</P>
<P>+ ( (Avg Number of Mistakes per item) * (Number of Items to do) * (Time to Correct Each Mistake))</P>
<P>+ (Correcting Collateral Damage Time)</P>
<P>So, let's say that I have 100 business objects to do.&nbsp; I can do one in ten minutes, except that as I slog thru dozens of them I start to think about more interesting things like my wife's smile, so we'll allow for twelve minutes apiece.&nbsp; That's (10 + 2) * 100 or 1200 minutes for the base work.</P>
<P>I'll estimate one mistake per business object (leaving out a column, mispelling one, wrong datatype, etc.)&nbsp; Each mistake will take 1 minute to fix and 1 minute to check in and out of source control, for a total of 2 minutes per mistake.&nbsp; That's 1 mistake * 100 items * 2 minutes per mistake, or 200 minutes.&nbsp; Thankfully, I don't work in a paper-work intensive shop, or it might be an additional 5 minutes of paperwork per mistake...</P>
<P>Out of those 100 errors, at least 2% are bound to cause some downstream damage.&nbsp; One will cause another programmer to waste half a day trying to figure out what's wrong with their code before they find out it's my fault.&nbsp; That's 4 hours, or 240 minutes.&nbsp; The other mistake may only cause about an hour's worth of lost time while I research it and reload some trashed test data, for another 60 minutes.</P>
<P>So, my planned cost to do it by hand is 1200 * 200 * 240 * 60, or 1700 minutes, almost 50% more than the actual base work.&nbsp; Of course, if just one of those mistakes takes a day or two to sort out, we could easily double or triple our true time to do this task by hand.&nbsp; </P>
<P>1700 minutes is 28 and a third hours.&nbsp; That's my time budget to build a code generator to do that work.</P>
<P>Unless, of course, I think it's likely that we'll make systemic changes to the objects as time goes by - during the first release of the product only.&nbsp; Then I get to add in the "upgrade time" to the initial time budget.</P>
<P>I follow the 80-20 rule.&nbsp; 80% of the benefit of code generation can be gained for 20% of the work.&nbsp; The next 20% takes way more effort to get additional results.&nbsp; </P>
<P>So, if I've analyzed my work and realized that 80% of my mistakes are due to one or two items, and I can build a code generator to do just that portion of the code, then the payback on generator prep time vs hand-coded time will be higher!&nbsp; </P>
<P>If I've been careful to clearly separate generated stuff from non-generated stuff, I can continually re-run the generators as the specifications change without fear of overwriting manually coded changes.&nbsp; This makes the payback higher still.&nbsp; It also means that I can relax my change control processes because, for many types of change, I simply do not need to care it took place.&nbsp; The code will automagically get updated the next time the generator gets run.&nbsp; Otherwise, I have to track each change to the specifications and make sure that it gets rippled thru by hand.&nbsp; (And the expected&nbsp;cost to track it should be added to the formula to determine my time budget to generate code.&nbsp; Not taking this into account is where many code generators lose value.</P>
<P>The reality is that many code generators are <STRONG>extremely</STRONG> simple to build provided they focus on solving 80% of the problem and not the entire problem.&nbsp; Going back to my example, let's assume that I don't try to generate the entire business object, just key portions of it.</P>
<P>Let's say I can save 5 minutes per object plus cut my error rate by 80% by building a generator to do the boring but simple&nbsp;parts.&nbsp; </P>
<P>So, that's (5 minutes per object + 2 minutes boredom factor) * 100 objects for 700 minutes for the base work.&nbsp; Add in the&nbsp;80 errors I avoid (80% * 100 errors)&nbsp; and I save 80 * 2 minutes for 160 minutes.&nbsp; We'll assume the collateral damage remains the same.&nbsp; That gives me a budget of 860 minutes, or 14.3 hours&nbsp;to build those generators.&nbsp; </P>
<P>As an example, I can build a stored procedure generator in 2 to 4&nbsp;hours if I know the database meta-data tables well.&nbsp; (Then again, I've had a lot of practice building&nbsp;code generators!)</P>
<P>Hope this helps!</P>
<P>PS - This technique, of making the full cost of doing a task visible can be extremely effective in keeping over-optimistic colleagues from getting management's approval to lead you down a bad development path.</P>
<P>&nbsp;</P>
<P>&nbsp;</P></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
