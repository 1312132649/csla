<html><header><title>What is the best way to set SQL Server Context_Info using CSLA and EF5?</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>What is the best way to set SQL Server Context_Info using CSLA and EF5?</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/12020.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>correodemarques posted on Wednesday, June 12, 2013</h2><p>Hi all,</p>
<p>We need to log changes to the data using triggers in SQL Server 2012. The problem is that we need the id of the user that is currently accessing the database. We can set and later retrieve that id using&nbsp;SET CONTEXT_INFO (<a href="http://msdn.microsoft.com/en-us/library/ms187768.aspx">http://msdn.microsoft.com/en-us/library/ms187768.aspx</a>) but that should be done when the connection is opened and with Csla managing connections, I don&#39;t know where to start.</p>
<p>Is there a way of doing this without modifying Csla code? I&#39;m afraid that I&#39;m not very familiar with the way the Csla DbContextManager works.</p>
<p>I&#39;m using Csla 4.5.3 and Entity Framework 5.</p>
<p>Thanks in advance for your help.</p></div><div style='padding:0 15 3 15;background-color:lightgreen'><h2>JonnyBee replied on Wednesday, June 12, 2013</h2><p>Hi,</p>
<p>I think the simplest is to make a copy of the DbContextManager in your own assembly and make the necessary changes when the connection is initialized.&nbsp;</p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
