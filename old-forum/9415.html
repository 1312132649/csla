<html><header><title>Dynamic datatable equivalent in CSLA</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Dynamic datatable equivalent in CSLA</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/9415.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>Etienne Rouette posted on Friday, August 20, 2010</h2><p>Hi</p>
<p>I have a requirement in my project&nbsp;which states that I must&nbsp;provide a UI that will be able to display data from any number of database tables. Those table structures will be changing through time and new tables will be added as well (outside the control of my application). The main hurdle is that&nbsp;the .Net code should not have to change and still be able to display any of those tables as they get added.</p>
<p>If we were using ADO .Net, I would create some metadata tables to store what table or query to display based upon user selection as well as keep track of column names, maybe column order, etc.&nbsp;I would extract the data itself into ADO datatables&nbsp;that I would use as the data source&nbsp;for my UI. Then I would use the metadata to properly format the UI display (suppose a datagrid as the UI).&nbsp;</p>
<p>What would be a good way to do the equivalent using CSLA business objects? Has anyone experience with this? Is it just not something that we should try to do with CSLA (other than for the metadata objects themselves)?</p>
<p>We are using CSLA 4.0 with VB .NEt on VS 2010.</p>
<p>&nbsp;</p></div><div style='padding:0 15 3 15;background-color:lightgreen'><h2>RockfordLhotka replied on Saturday, August 21, 2010</h2><p>There are various threads on this topic. It isn&#39;t directly supported by a CSLA base type, but it is possible.</p>
<p>The important thing is to understand how your particular UI technology&#39;s data binding expects to dynamically discover the type&#39;s shape. Some UI technologies use a custom type descriptor concept - based on interfaces defined in System.ComponentModel, and that&#39;s probably the most common solution overall.</p>
<p>A newer technique (that may not work with older UI technologies like Windows Forms) is the new &#39;dynamic&#39; type concept in .NET 4, and maybe some of the slightly earlier DLR (dynamic language runtime) capabilities.</p>
<p>Ultimately though, the important this is to realize that data binding (for your UI technology) will rely on some specific technique to discover the shape of the dynamic object, and you need to honor and implement that technique.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>xAvailx replied on Monday, August 23, 2010</h2><p>If they are read-only displays I would just use the standard ado data set.</p>
<p>You could still have a csla read only class that maybe has a property for the dataset so you can still have control of how/when the data is fetched.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Monday, August 23, 2010</h2><p>I generally agree. The only thing to be aware of is that there&#39;s no DataTable in Silverlight or on WP7, so it isn&#39;t a great long-term strategy if those technologies are of interest now or in the future.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>David Potter replied on Monday, August 23, 2010</h2><p>Hello.<br /><br />Etienne is my supervisor.<br /><br />I will add that we are using WPF for the user interface.&nbsp; </p>
<p><br />I tried a simple mock up with a data table as a property in a read-only business object.&nbsp; This works fine in client-server mode but as soon as I try through the data portal I get an error - the message is slightly different depending on the endpoint.&nbsp; Named pipes gives be error 109.<br /><br />Here is the code:</p>
<p>[View:http://forums.lhotka.net/cfs-file.ashx/__key/CommunityServer.Components.UserFiles/00.00.01.13.30/CslaRoObjectDataTable.txt]</p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
