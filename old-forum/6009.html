<html><header><title>Obj design for best UI use</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Obj design for best UI use</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/6009.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>esteban404 posted on Wednesday, December 17, 2008</h2>I am beginning a new win forms application based on CSLA 3.0.4. One of the objects is a read only base object (Order) that contains 1-many editable objects of type Reel. Each reel can contains 0-many defects.<br />Order > Reels > ReelDefects<br /><br />One order can be run on many machines, so the goal is to be able to isolate records in reporting and in the UI. The machine ID is a good filter for this part and it's in the base object and each record reel and Reel defect.<br /><br />The ReelDefects table is geared toward reports, so it's not a normalized table.<br /><br />Is there a best way to implement these as objects so the Winforms UI works well? I'm sure there will need to be a timer checking for updates. WCF is not an option as the security #$@!*s have locked down the network and it won't work, so I'm stuck with timers polling for new data.<br /><br />Thanks,<br /><br />_E</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Curelom replied on Wednesday, December 17, 2008</h2><P>Could you give a few more details.&nbsp; What database and version are you using?&nbsp; Do you have any lattitude on changing the database schema? (I would recommend normalized tables with un-normalized views on top of them for reporting).&nbsp; </P>
<P>The orders can be run on multiple machines at the same time.&nbsp; Are users doing different things (different business cases) on the orders, i.e.&nbsp;one guy is working on the order shipping, another on finances, etc.</P>
<P>What have your network guys done to lock down WCF?&nbsp;&nbsp;WCF can be run through port 80.&nbsp; If the network allows web services and web applications, you would also be able to do wcf via IIS.</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>esteban404 replied on Wednesday, December 17, 2008</h2><BLOCKQUOTE><div><img src="/Themes/default/images/icon-quote.gif"> <strong>Curelom:</strong></div><div><P>Could you give a few more details.&#160; What database and version are you using?&#160; Do you have any lattitude on changing the database schema? (I would recommend normalized tables with un-normalized views on top of them for reporting).&#160; </P></div></BLOCKQUOTE><br />We're using SQL Server 2005. I can change the tables directly related to this application. The users were going to be given access to "something" so they can write their own reports.  One guy I report to for this client is OK with good practice and the other is UNIX-trained command-line SOB. Using views was not on the list of OK development options, but I can check further... and will. I think the non-normalized data was for the end user's benefit only.<br /><br /><BLOCKQUOTE><div><img src="/Themes/default/images/icon-quote.gif"> <strong>Curelom:</strong></div><div><P>The orders can be run on multiple machines at the same time. </P><br />Are users doing different things (different business cases) on the orders, i.e.&#160;one guy is working on the order shipping, another on finances, etc.</P></div></BLOCKQUOTE><br />In this case, they are doing the same thing. Outside of this process there are no shared responsibilities. Each process uses the same rules and requirements, just different machines to produce a like product. These products need to be traceable to the machine that produced it for capability and containment. The operators are only going to be evaluating their own process, (quality charts, limits, etc.) based on their machine's output, but may need to toggle to a different view of the defects where it's required. In the case of this process, they are only interested in their process and the process's participating machines.<br /><br /><BLOCKQUOTE><div><img src="/Themes/default/images/icon-quote.gif"> <strong>Curelom:</strong></div><div><P>What have your network guys done to lock down WCF?&#160;&#160;WCF can be run through port 80.&#160; If the network allows web services and web applications, you would also be able to do wcf via IIS.</P></div></BLOCKQUOTE><br />It looks like it's related to a firewall in place between the local machines or switches. I tried using one machine to do it all, but outside of the development environment, it simply doesn't work. No errors even in trace logs. It's very odd, and something I'm not really tasked to figure out. I've seen it doesn't work, so I'm not going down that path. It'd be a waste of time. There's also the issue with the framework. I'd have to get permission to install 3.0 or higher and go through a lot of work and headache to enable the machines. Again, something that's more trouble than it's worth right now. We'll have to put WCF on the back burner as an enhancement.<br /><br />Thanks for your input,<br />_E</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Curelom replied on Wednesday, December 17, 2008</h2><P>Ouch, it's always a pain when never given enough time to do an application right.</P>
<P>You probably are stuck with a polling solution off of a timer.&nbsp; You could probably use the timestamp concurrent management to help a little where the poll would check the last timestamp to see if there has been an update.&nbsp; You could also check with the dirty state of the current objects.&nbsp; If the user hasn't made any changes, you can probably refresh without the user knowing.&nbsp; If the object is dirty you could provide the user with some kind of notification such as a messagebox or background color change.&nbsp; How elaborate the notification would be would depend on how much time you have and the business requirements.&nbsp; I've done something similar to this and have a timer in the status bar telling the user how old their data is.</P>
<P>If you are running your data portal under local, you might be able to use Sql Server SqlDependency where it notifies of any change to the data of a query.&nbsp; I've found it to be a bit unreliable though erroring out randomly.&nbsp; It may be more reliable now with some service packs.</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>esteban404 replied on Wednesday, December 17, 2008</h2>Thanks, for the input. I have a scenario now where I just store the last DateTime value checked inside the object and include that in the query to only get those records whose created date and modified date are >= that last checked date field. The update of the collections is where I'm struggling to make sure the objects are clean enough to be of use to the UI.<br /><br />Oh well, I'll figure something out as soon as it bombs. :-\</div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
