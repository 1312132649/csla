<html><header><title>ValidationException</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>ValidationException</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/6325.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>JoOfMetL posted on Wednesday, February 04, 2009</h2><br>For centralized management errors. When a Save, but the object is not Valid a ValidationException is thrown. 
<br>
<br> In 90% of situations, just after, I try to catch this error, but sometimes I forget or I do not need to show the message to
the user. My manager errors takes up the task. I log as error: Object
is not valid. I would like to have a reference on the subject and the
business rules are not respected. I can, of course, override the Save
method, catch this exception and restart my own exception containing
information I want, however, in order to share the code, do you think
it is good for the community at CSLA ?<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>rsbaker0 replied on Wednesday, February 04, 2009</h2><P>I'd like to echo the request for more information passed with this exception. </P>
<P>I can see that passing including the reference would by tricky, but the object class, id, and first broken business rule with error severity would be very helpful. </P>
<P>I don't have the exact current text in front of me, but instead of, for example:</P>
<P>"Object is not valid"</P>
<P>maybe the exception text could be something like:</P>
<P>"Object 'Project', id 'xyy' is not valid: Duration must be greater than zero." </P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JoOfMetL replied on Wednesday, February 04, 2009</h2><br>Personally I would not change the message of the exception. 
<br>
<br> I think only ValidationExeption must have a reference to the
object. Indeed, thanks to him we have all the information
necessary to log the error message that we want. (See BrokenRules).</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>rsbaker0 replied on Wednesday, February 04, 2009</h2>Well, I would agree as long as getting a reference back wouldn't be a problem, but validation exceptions can be thrown on the server-side of the portal also, making it complicated to get an object reference back to the client. I suppose there is some way to serialize the whole thing along with the exception, but I just don't know what problems that might pose.</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JoOfMetL replied on Wednesday, February 04, 2009</h2><br>I think the ValidationException is thrown on the client side : (Before DataPortal.Update).<br><br>public virtual T Save()<br>&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; T result;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (this.IsChild)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; throw new NotSupportedException(Resources.NoSaveChildException);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (EditLevel &gt; 0)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; throw new <b>Validation.ValidationException</b>(Resources.NoSaveEditingException);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (!IsValid &amp;&amp; !IsDeleted)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; throw new <b>Validation.ValidationExceptio</b>n(Resources.NoSaveInvalidException);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (IsBusy)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; throw new <b>Validation.ValidationException</b>(Resources.BusyObjectsMayNotBeSaved);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (IsDirty)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; result = (T)<b>DataPortal.Update</b>(this);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; else<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; result = (T)this;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; OnSaved(result, null, null);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return result;<br>&nbsp;&nbsp;&nbsp; }<br><br>The exception may also be thrown on the server-side?<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>rsbaker0 replied on Wednesday, February 04, 2009</h2>Well, it's perfectly valid (er,&nbsp;at least I think it is and it works in my application)&nbsp;to call Save() on *another* object server-side in your DataPortal_Update() code.&nbsp; That operation would just go over the local data portal rather than one of the remote portails. </div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
