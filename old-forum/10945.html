<html><header><title>How check business rules and update the error list when an Item is added to a collection</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>How check business rules and update the error list when an Item is added to a collection</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/10945.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>olawal posted on Monday, December 05, 2011</h2><p>Does anyone have any code sampels that do not rely on&nbsp; OnPropertyChanged&nbsp; for checking the business rules and passing errors back the the UI (2 tier application)</p>
<p>right now the code uses a handler and activates a callback action to acomplish this but it only works sporadically.&nbsp; ie :</p>
<pre style="font-family:Consolas;background:white;color:black;font-size:13px;"><span style="color:blue;">Protected</span>&nbsp;<span style="color:blue;">Overrides</span>&nbsp;<span style="color:blue;">Sub</span>&nbsp;OnCollectionChanged(e&nbsp;<span style="color:blue;">As</span>&nbsp;System.Collections.Specialized.<span style="color:#2b91af;">NotifyCollectionChangedEventArgs</span>)
</pre>
<pre style="font-family:Consolas;background:white;color:black;font-size:13px;">thanks in advance</pre>
<pre style="font-family:Consolas;background:white;color:black;font-size:13px;"></pre>
<pre style="font-family:Consolas;background:white;color:black;font-size:13px;">-ola</pre>
<pre style="font-family:Consolas;background:white;color:black;font-size:13px;"></pre></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Tuesday, December 06, 2011</h2><p>Do you want the validation error to appear as part of the parent object that contains the collection, or the child object(s) in the collection?</p>
<p>Either way, you should consider overriding OnChildChanged in the parent object that contains the collection, and that&#39;s where you should either trigger the rules in the parent, or trigger the rules in the child that was changed.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>olawal replied on Monday, January 09, 2012</h2><p>I never got an email to know that you had answered thsi question along with the fact that I got pulled into another project and funally just got back to working on this problem.</p>
<p>You are correct&nbsp;in that I do&nbsp;want the error to to be part of the parent object that contains the collection.&nbsp; I don&#39;t know if this will work though since there are no postbacks with the way the code we have is wirtten&nbsp; its&nbsp; constits of alot of jquery and ajax elements.</p>
<p>thanks again</p>
<p>&nbsp;</p>
<p>&nbsp;</p></div><div style='padding:0 15 3 15;background-color:lightgreen'><h2>RockfordLhotka replied on Monday, January 09, 2012</h2><p>I discuss this in the <em>Using CSLA 4</em> ebook series.</p>
<p>The short answer is that in the parent object you override OnChildChanged, and that way you know that a child object has changed so you can execute appropriate rules in the parent object by calling BusinessRules.CheckRules.</p>
<p>I don&#39;t know how this will work with ajax callbacks. If the state available on the web/app server isn&#39;t current, clearly you can&#39;t run any rules at that location. So you&#39;ll have to implement your solution such that the web/app server has the current state at the point you expect the rules to run.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>olawal replied on Tuesday, January 10, 2012</h2><p>Ok you&nbsp;basically confirmed what I thought</p>
<p>We found a work arround using SQL to create a specific error message , I then catch that error and display the specific error&nbsp; based on the content in the message.&nbsp; A bit ugly but it works well in this scenario.&nbsp; The only thing I dislike is I could not grab error message constants from my business rule withoute fully instantiaing it Argh!</p>
<p>thanks for the fast feedback</p>
<p>-ola</p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
