<html><header><title>FieldDataManager doesn't expose GetFieldData</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>FieldDataManager doesn't expose GetFieldData</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/6099.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>bt1 posted on Wednesday, January 07, 2009</h2><P>&nbsp;&nbsp;&nbsp;I was reading the C# 2008 book ch7 pg257.&nbsp; Where it talks about creating your own implementations of IFieldData&lt;T&gt; and PropertyInfo&lt;T&gt; and storing the Original value in a custom FieldData object.</P>
<P>I am trying to automate the creation of a user readable audit of the properties changed on an object.&nbsp; We currently create an audit like this: Changed friendlyname Old: originalvalue, New: currentvalue.&nbsp; This audit is saved to a DB.</P>
<P>I subclassed BusinessBase and would like to add an audit method that loops all&nbsp;managed fields and gets their IFieldData objects.&nbsp; I&nbsp;could then&nbsp;check if&nbsp;the IFieldData is my custom&nbsp;FieldData type&nbsp;that would have the&nbsp;Original and Current value.&nbsp;&nbsp;I then could create the Audit from this information.</P>
<P>The problem I am having is getting access to the FieldData objects.&nbsp; GetFieldData's access modifier is internal and my custom BusinessBase is not in the Csla assembly.</P>
<P>The ability to use the field manager/managed fields&nbsp;avoids use of&nbsp;reflection for performance.&nbsp; It also allows me to selectivly specify which properties should be audited by using&nbsp;the standard PropertyInfo&lt;T&gt; or the custom PropertyInfo class that overrides NewFieldData.&nbsp; </P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>rsbaker0 replied on Wednesday, January 07, 2009</h2><P>I ran into this exact same issue with my own custom IFieldData type. For the time being, I just changed my copy of CSLA so that GetFieldData is public rather than internal. It's not the best solution, but I don't see another good way around it. </P>
<P>&nbsp;</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Wednesday, January 07, 2009</h2>I didn't make it public because it opens a vector for abuse. Maybe that possibility is worth the benefit?</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JoeFallon1 replied on Thursday, January 08, 2009</h2><P>It sounds like it is worth it. I built&nbsp;custom FieldData and PropertyInfo subclasses as a test but did not take it one step further like bt1 and rsbaker0 did. They want to make use of this data in their custom BusinessBase class which makes perfect sense. So if the first 3 users who try to implement custom FieldData need this functionality then I think it should be made Public.</P>
<P>Joe</P>
<P>&nbsp;</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>bt1 replied on Thursday, January 08, 2009</h2><P class=MsoNormal><FONT face=Calibri>The ability to loop through the managed properties and leveraging reusable methods from a base class is awesome. </FONT></P>
<P class=MsoNormal><o:p><FONT face=Calibri>&nbsp;</FONT> </o:p><FONT face=Calibri>Would a good solution be for me to edit my copy of the CSLA by adding protected method to BusinessBase that wraps FieldManager.GetFieldData(propertyInfo) similar to ReadProperty but returning IFieldData vs the value?</FONT></P>
<P><FONT size=2><FONT color=#0000ff>protected</FONT> Csla.Core.FieldManager. <FONT color=#2b91af>IFieldData</FONT> ReadFieldData( <FONT color=#2b91af>IPropertyInfo</FONT> propertyInfo)<BR>{&nbsp;<BR>&nbsp;&nbsp;&nbsp;<FONT color=#0000ff>return</FONT>&nbsp; FieldManager.GetFieldData(propertyInfo);&nbsp;<BR>}</FONT></P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JoeFallon1 replied on Thursday, January 08, 2009</h2><P>That is a good *temporary* solution.</P>
<P>One of the goals should be to never have to modify the Csla framework itself to simplify upgrading in the future.</P>
<P>So hopefully Rocky will agree to add something like your solution to the framework.</P>
<P>Joe</P>
<P>&nbsp;</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>bt1 replied on Thursday, January 08, 2009</h2><P>Does anyone know if Rockey argrees to add this, how long does it take to show up in a release?</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Friday, January 09, 2009</h2><P>It depends on several factors, including how busy I am (these first two weeks of January are very busy), how many other bugs/issues there are and the priority of them (bugs usually win over change requests), and how much time/effort is required to analyze/design/test/code the changes.</P>
<P>Right now my time is limited, and there are some bugs that are more important than this change request. I'm hoping to do a 3.6.1 beta release by the end of January, and I'll certainly try to fit this in there if I can.</P></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
