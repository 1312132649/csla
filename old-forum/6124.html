<html><header><title>Refresh after ApplicationCommands.Save</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Refresh after ApplicationCommands.Save</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/6124.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>PederSvaleng posted on Monday, January 12, 2009</h2><FONT color=#a31515 size=2><FONT color=#a31515 size=2>
<P><FONT color=#000000><FONT size=3>I need some help to refresh <FONT color=#000000>ClinicalDocumentAutPatRecRoList bound to a listbox&nbsp;after using the ApplicationCommands.Save on ClinicalDocumentSW. Does anybody know how I can do that.</FONT></FONT></FONT></P>
<P><FONT color=#000000 size=3>I tried to search the forum, but couldn't find an answer..</FONT></FONT></FONT></P>
<P><FONT color=#0000ff size=2><FONT color=#0000ff size=2>&lt;</FONT></FONT><FONT color=#a31515 size=2><FONT color=#a31515 size=2>csla</FONT></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>:</FONT></FONT><FONT color=#a31515 size=2><FONT color=#a31515 size=2>CslaDataProvider</FONT></FONT><FONT color=#ff0000 size=2><FONT color=#ff0000 size=2> x</FONT></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>:</FONT></FONT><FONT color=#ff0000 size=2><FONT color=#ff0000 size=2>Key</FONT></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>="ClinicalDocumentAutPatRecRoList"<BR></FONT></FONT><FONT color=#ff0000 size=2><FONT color=#ff0000 size=2>ObjectType</FONT></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>="{</FONT></FONT><FONT color=#a31515 size=2><FONT color=#a31515 size=2>x</FONT></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>:</FONT></FONT><FONT color=#a31515 size=2><FONT color=#a31515 size=2>Type</FONT></FONT><FONT color=#ff0000 size=2><FONT color=#ff0000 size=2> APBusinessObjectsFlat</FONT></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>:</FONT></FONT><FONT color=#ff0000 size=2><FONT color=#ff0000 size=2>ClinicalDocumentAutPatRecRoList</FONT></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>}" <BR></FONT></FONT><FONT color=#ff0000 size=2><FONT color=#ff0000 size=2>FactoryMethod</FONT></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>="GetClinicalDocumentAutRecList" </FONT></FONT><FONT color=#ff0000 size=2><FONT color=#ff0000 size=2>IsAsynchronous</FONT></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>="False" </FONT></FONT><FONT color=#ff0000 size=2><FONT color=#ff0000 size=2>IsInitialLoadEnabled</FONT></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>="False"&gt;<BR></FONT></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>&lt;/</FONT></FONT><FONT color=#a31515 size=2><FONT color=#a31515 size=2>csla</FONT></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>:</FONT></FONT><FONT color=#a31515 size=2><FONT color=#a31515 size=2>CslaDataProvider</FONT></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>&gt;</P></FONT></FONT><FONT color=#a31515 size=2><FONT color=#a31515 size=2>
<P></FONT></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>&lt;</FONT></FONT><FONT color=#a31515 size=2><FONT color=#a31515 size=2>csla</FONT></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>:</FONT></FONT><FONT color=#a31515 size=2><FONT color=#a31515 size=2>CslaDataProvider</FONT></FONT><FONT color=#ff0000 size=2><FONT color=#ff0000 size=2> x</FONT></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>:</FONT></FONT><FONT color=#ff0000 size=2><FONT color=#ff0000 size=2>Key</FONT></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>="ClinicalDocumentSW"<BR></FONT></FONT><FONT color=#ff0000 size=2><FONT color=#ff0000 size=2>ObjectType</FONT></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>="{</FONT></FONT><FONT color=#a31515 size=2><FONT color=#a31515 size=2>x</FONT></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>:</FONT></FONT><FONT color=#a31515 size=2><FONT color=#a31515 size=2>Type</FONT></FONT><FONT color=#ff0000 size=2><FONT color=#ff0000 size=2> APBusinessObjectsFlat</FONT></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>:</FONT></FONT><FONT color=#ff0000 size=2><FONT color=#ff0000 size=2>ClinicalDocumentSW</FONT></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>}" </FONT></FONT><FONT color=#ff0000 size=2><FONT color=#ff0000 size=2>FactoryMethod</FONT></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>="GetClinicalDocumentSW" </FONT></FONT><FONT color=#ff0000 size=2><FONT color=#ff0000 size=2>IsAsynchronous</FONT></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>="False" </FONT></FONT><FONT color=#ff0000 size=2><FONT color=#ff0000 size=2>IsInitialLoadEnabled</FONT></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>="False"<BR></FONT></FONT><FONT color=#ff0000 size=2><FONT color=#ff0000 size=2>DataChanged</FONT></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>="DataChanged"<BR></FONT></FONT><FONT color=#ff0000 size=2><FONT color=#ff0000 size=2>ManageObjectLifetime</FONT></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>="True"&gt;<BR></FONT></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>&lt;/</FONT></FONT><FONT color=#a31515 size=2><FONT color=#a31515 size=2>csla</FONT></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>:</FONT></FONT><FONT color=#a31515 size=2><FONT color=#a31515 size=2>CslaDataProvider</FONT></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>&gt;</P></FONT></FONT><FONT color=#ff0000 size=2><FONT color=#ff0000 size=2><FONT color=#0000ff size=2><FONT color=#0000ff size=2><FONT color=#a31515 size=2><FONT color=#a31515 size=2>
<P></FONT></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>&lt;</FONT></FONT><FONT color=#a31515 size=2><FONT color=#a31515 size=2>Button </FONT></FONT><FONT color=#ff0000 size=2><FONT color=#ff0000 size=2>Command</FONT></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>="ApplicationCommands.Save"</FONT></FONT><FONT size=2>&nbsp;<BR>&nbsp;&nbsp;&nbsp;</FONT><FONT color=#ff0000 size=2><FONT color=#ff0000 size=2>CommandTarget</FONT></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>="{</FONT></FONT><FONT color=#a31515 size=2><FONT color=#a31515 size=2>Binding</FONT></FONT><FONT color=#ff0000 size=2><FONT color=#ff0000 size=2> Source</FONT></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>={</FONT></FONT><FONT color=#a31515 size=2><FONT color=#a31515 size=2>StaticResource</FONT></FONT><FONT color=#ff0000 size=2><FONT color=#ff0000 size=2> ClinicalDocumentSW</FONT></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>},</FONT></FONT><FONT color=#ff0000 size=2><FONT color=#ff0000 size=2> Path</FONT></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>=CommandManager,</FONT></FONT><FONT color=#ff0000 size=2><FONT color=#ff0000 size=2>&nbsp;&nbsp;&nbsp;&nbsp;BindsDirectlyToSource</FONT></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>=True}"</FONT></FONT><FONT color=#ff0000 size=2><FONT color=#ff0000 size=2>HorizontalAlignment</FONT></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>="Left"</FONT></FONT><FONT color=#ff0000 size=2><FONT color=#ff0000 size=2> IsDefault</FONT></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>="True"&gt;</FONT></FONT><FONT color=#a31515 size=2><FONT color=#a31515 size=2>Save</FONT></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>&lt;/</FONT></FONT><FONT color=#a31515 size=2><FONT color=#a31515 size=2>Button</FONT></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>&gt;</FONT></FONT></P>
<P><FONT color=#0000ff size=2><FONT color=#0000ff size=2><FONT color=#000000 size=3>Thanks</FONT></P></FONT></FONT></FONT></FONT></FONT></FONT></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Fintanv replied on Monday, January 12, 2009</h2>My readonly lists support the MS Cache block, I also have a static method on the various list classes that will flush the cache of lists of a given type.&nbsp; When the appropriate editable object/object list completes a save which may invalidate one or more lists, I call the flush methods post save (within the editable BO).&nbsp; The end userof the BOs therefore never need to know what items are cached and when they need to be cleared.<br><br>I am sure you can modify the pattern even if you are not using the caching block.<br><br>Best regards,<br>Fintan<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Monday, January 12, 2009</h2><P>He still needs the UI to re-read the data from the list (thus triggering the reload of the list from the database). </P>
<P>The CslaDataProvider control has a Refresh() method that should force a re-read of the data. I don't know if you can invoke that entirely from XAML though - at least not without creating a command handler or something along that line.</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>PederSvaleng replied on Tuesday, January 13, 2009</h2><P><FONT face=Arial size=2>Thanks Rocky! For your respond.</FONT></P>
<P><FONT face=Arial size=2>Currently I don't know to much about creating a command handler :) I have to check it out..</FONT></P><FONT face=Arial size=2><FONT color=#0000ff size=2><FONT color=#0000ff size=2>
<P>&lt;</FONT></FONT><FONT color=#a31515 size=2><FONT color=#a31515 size=2>Button </FONT></FONT><FONT color=#ff0000 size=2><FONT color=#ff0000 size=2>CommandTarget</FONT></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>="{</FONT></FONT><FONT color=#a31515 size=2><FONT color=#a31515 size=2>Binding</FONT></FONT><FONT color=#ff0000 size=2><FONT color=#ff0000 size=2> Source</FONT></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>={</FONT></FONT><FONT color=#a31515 size=2><FONT color=#a31515 size=2>StaticResource</FONT></FONT><FONT color=#ff0000 size=2><FONT color=#ff0000 size=2> ClinicalDocumentSW</FONT></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>},</FONT></FONT><FONT color=#ff0000 size=2><FONT color=#ff0000 size=2> Path</FONT></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>=CommandManager,</FONT></FONT><FONT color=#ff0000 size=2><FONT color=#ff0000 size=2> BindsDirectlyToSource</FONT></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>=True}"<BR></FONT></FONT><FONT color=#ff0000 size=2><FONT color=#ff0000 size=2>HorizontalAlignment</FONT></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>="Left"<BR></FONT></FONT><FONT color=#ff0000 size=2><FONT color=#ff0000 size=2>IsDefault</FONT></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>="True"<BR></FONT></FONT><FONT color=#ff0000 size=2><FONT color=#ff0000 size=2>Click</FONT></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>="Button_Click"</FONT></FONT><FONT color=#ff0000 size=2><FONT color=#ff0000 size=2> Name</FONT></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>="buttonSave"&gt;</FONT></FONT><FONT color=#a31515 size=2><FONT color=#a31515 size=2>Save<BR></FONT></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>&lt;/</FONT></FONT><FONT color=#a31515 size=2><FONT color=#a31515 size=2>Button</FONT></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>&gt;</FONT></FONT></P>
<P><FONT color=#0000ff size=2><FONT color=#0000ff size=2><FONT color=#000000>I removed the <FONT color=#008000 size=2><FONT color=#008000 size=2>Command="ApplicationCommands.Save" <FONT color=#000000>from my button and added a button eventhandler</FONT></FONT></FONT></FONT></FONT></FONT></P><FONT color=#0000ff size=2><FONT color=#0000ff size=2><FONT color=#000000><FONT color=#008000 size=2><FONT color=#008000 size=2><FONT color=#000000><FONT size=2>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>private</FONT></FONT><FONT size=2> </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>void</FONT></FONT><FONT size=2> Button_Click(</FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>object</FONT></FONT><FONT size=2> sender, </FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>RoutedEventArgs</FONT></FONT><FONT size=2> e)<BR>{<BR>&nbsp;&nbsp;&nbsp;</FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>if</FONT></FONT><FONT size=2> (_clinicalDocumentSW.IsSavable)<BR>&nbsp;&nbsp;&nbsp;{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dpClinDocSW.Save();<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DisplayList();<BR>&nbsp;&nbsp;&nbsp;</FONT><FONT size=2>}<BR>}<BR><BR>Now, I can update my list, but&nbsp;my button is stateless....</FONT></P>
<P>&nbsp;</P>
<P><FONT size=2>&nbsp;</P></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
