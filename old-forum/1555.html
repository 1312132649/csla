<html><header><title>simple question regarding DataPortal.Create</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>simple question regarding DataPortal.Create</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/1555.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>dstarkey posted on Friday, October 20, 2006</h2><P>In the project tracker app I see where some bo's props are set in the RunLocal DataPortas create method.&nbsp; Specifically it sets the guid id.&nbsp; I want to set some default&nbsp;values, and when stepping&nbsp;through the code I see these private variables are set correctly.&nbsp; What I want to do, is&nbsp;display this new object with its default values,&nbsp;where the user&nbsp;can override the defaults&nbsp;by simply entering different data.&nbsp; For example, say&nbsp;country = "USA";&nbsp;</P>
<P>My problem is even though the Create&nbsp;code runs,&nbsp;I cannot figure out how to display the input fields&nbsp;with the default values.&nbsp; Instead&nbsp;I get empty text boxes.&nbsp;&nbsp;&nbsp;How would you display the guid in project tracker when the user click on Add Project.&nbsp; Thats all I need to know how to do.&nbsp; Help is greatly appreciated.</P>
<P>Don</P>
<P>code snippets:</P><FONT size=2>
<P></FONT><FONT color=#0000ff size=2>private</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>void</FONT><FONT size=2> DataPortal_Create(</FONT><FONT color=#008080 size=2>Criteria</FONT><FONT size=2> criteria)</P>
<P>{</P>
<P>Ss_Type = </FONT><FONT color=#800000 size=2>"S"</FONT><FONT size=2>;</P></FONT><FONT size=2>
<P>military = </FONT><FONT color=#800000 size=2>"N"</FONT><FONT size=2>;</P></FONT><FONT size=2>
<P>indep_Contr = </FONT><FONT color=#800000 size=2>"N"</FONT><FONT size=2>;</P></FONT><FONT size=2>
<P>benefit_Opt = 11;</P>
<P>ValidationRules.CheckRules();</P>
<P>}</P><FONT size=2>
<P>// want to add the code that will create NewEmp(); and bind this new emp object to DetailViews1.</FONT></P>
<P><FONT color=#0000ff size=2>protected</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>void</FONT><FONT size=2> AddRoleButton_Click(</FONT><FONT color=#0000ff size=2>object</FONT><FONT size=2> sender, </FONT><FONT color=#008080 size=2>EventArgs</FONT><FONT size=2> e)<BR>{<BR></FONT><FONT color=#0000ff size=2>this</FONT><FONT size=2>.DetailsView1.DefaultMode = </FONT><FONT color=#008080 size=2>DetailsViewMode</FONT><FONT size=2>.Insert;<BR>MultiView1.ActiveViewIndex = (</FONT><FONT color=#0000ff size=2>int</FONT><FONT size=2>)</FONT><FONT color=#008080 size=2>Views</FONT><FONT size=2>.InsertView;<BR>}</FONT></P>
<P>Dont know what I need, databind detailsView1??&nbsp; Map from the new object but to what??? any help is greatly appreciated.</P>
<P>thanks</P>
<P>Don<FONT size=2></P></FONT></FONT></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Michael Hildner replied on Saturday, October 21, 2006</h2><P>Hi Don,</P>
<P>If I understand you correctly, you can just create a datasource from your object and drag that datasource, or individual properties onto your form. Is that what you're looking for?</P>
<P>Mike</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>dstarkey replied on Saturday, October 21, 2006</h2><P>I am looking for what it would take to modify&nbsp;the project tracker application so that the guid id assigned in the create method of the (bo project's with -&nbsp;Run Local attribute&nbsp;) data portal would be be initially displayed as a default value of a new project, where a user could either accept or override this default id value.&nbsp; As it is right now the&nbsp; guid id is generated in the background and only becomes visible once the project has been inserted (ie in its editable state).&nbsp; Please let me know if this is still unclear, or if this is in fact possible.</P>
<P>Thanks <BR>Don</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Brian Criswell replied on Saturday, October 21, 2006</h2>Just add a button to the user interface.&nbsp; When the button is pushed, it calls the ChangeId method (which you would add) on the project.&nbsp; This method would set the id to a new Guid and call PropertyHasChanged("Id") (or whatever the corresponding property name is).<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>dstarkey replied on Saturday, October 21, 2006</h2>So the only way to display default values for a new record is by having the page refresh in some manner??&nbsp; By on_click or similar manner to refresh the page.&nbsp; I am surprised that there is not a way to display default values of a new object when that object is created.&nbsp; I still think we are missing something here???</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Brian Criswell replied on Saturday, October 21, 2006</h2>Sorry, I thought that is what you wanted because you want the user to be able to see it and then choose if they want to change it.&nbsp; However, reading this thread again, are you having trouble seeing the value when you first create the item?&nbsp; That sounds like the data binding was not set up properly.&nbsp; Someone else would have to help you as I do not have ASP.NET experience.<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>dstarkey replied on Saturday, October 21, 2006</h2><P>Yes thats the problem.&nbsp; I see the default values created when instantiating a new object, but they are not displayed on the details view (insert mode).&nbsp; Instead I have empty text boxes, even for those properties where default values were created.&nbsp; Thanks for trying to help me with this!&nbsp; All help is greatly appreciated. </P>
<P>Don</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Monday, October 23, 2006</h2>Don,<br><br>Search on the forum, this has been discussed.&nbsp; I think you need to use the binding source component that comes with Csla to get this working.<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>dstarkey replied on Monday, October 23, 2006</h2><P>What is the binding source component??&nbsp;&nbsp; And how does it work??&nbsp; I read through all posts concerning Data Portal Create, and cannot seem to find the post you are referring to.&nbsp; Thats why I posed the question regarding Project Tracker to simply display the Guid that is created for the new object.&nbsp; Unfortunately still lost on this topic.&nbsp; Will search Binding Source Component and hope for a good example.</P>
<P>thx </P>
<P>Don</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>dstarkey replied on Monday, October 23, 2006</h2><P>I am using the Csla DataSource object to bind my web form to the bo.&nbsp; It just seems that it will not display the default values instantiated in the DataPortal.Create Method.&nbsp; I even tried (DetailsView1.DataBind()) after stepping through the code I saw it 1) set the default props 2) when I subsequently called DetailsView1.DataBind() - the details view still left me with blank input text boxes.&nbsp; Is the "Csla Data Source" the binding source component that you are referring too?&nbsp; If so, I am already using this control.</P>
<P>Don</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Bayu replied on Monday, October 23, 2006</h2>Hi,<br><br>Are you also handling the SelectObject event that is raised by the CslaDataSource? <br><br>If not, you should:<br>- handle the event<br>- in the event handler you will be provided with an event-argument of type Csla.Web.SelectObjectArgs<br>- set the BusinessObject property of this eventargs object to the one that you wish to bind to<br><br>If you <i>are</i> handling the event, then I have no clue why you are left with empty controls.<br><br>Bayu<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>dstarkey replied on Monday, October 23, 2006</h2><P>I am using the select object correctly in my code.&nbsp; The problem stems from the Insert part of the data source.&nbsp; Let me elaborate, that the insert does work properly when I fill in the form and press the insert button. BUT the PROBLEM is not showing the default values on the initial Insert View.&nbsp; Maybe its not even possible to display the default properties in an insert view????&nbsp; This does seem rather odd?&nbsp; Especially since, it would be nice to decouple the UI from the BO's (IE, setting controls in the Web Form to Default values, that I would much rather retrieve from the BO, thereby decoupling the UI from the BO.&nbsp; Hope this makes sense, still do not know how to display the default values that are assigned in the DataPortal.Create Method.&nbsp; Has anyone, displayed default properties of a BO to simplify a record insertion?????&nbsp; Please help. </P>
<P>Thx Don</P></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
