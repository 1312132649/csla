<html><header><title>Change Management</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Change Management</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/2758.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>ksirmons posted on Monday, April 23, 2007</h2><P>Howdy,</P>
<P>I need to design a ChangeManagement system for a CSLA project we are working on.</P>
<P>The system needs to be able to track the changes of a CSLA Object and persist the "before" data to a changelog table in the database.&nbsp; </P>
<P>I want to, somehow before the changed object is saved back to the database, create an XML representation of the object's changed properties.&nbsp; </P>
<P>Example, if I have a simple object Person with 5 properties and I make changes to 3 of the 5&nbsp;properties, I want to build an XML document with the 3 changed properties "original" data to be stored in the log.</P>
<P>I have thought of somehow keeping a key value list associated with each object and as properties are changed, storing a key(property name) and value(original data) in the list, then&nbsp;passing the&nbsp;list at save to a changelog object.</P>
<P>I have also thought about trying to hook into some event, but I am new to programming and very new to CSLA and still do not fully understand how events work or how to use them in this situation.</P>
<P>I have also wondered if there was some way to use the N-undo feature and compare the "before" in the undo level with the current state about to be saved to generate the changes XML.</P>
<P>&nbsp;</P>
<P>Thank you for any direction and guidance&nbsp;you can give,</P>
<P>Keith </P>
<P>&nbsp;</P>
<P>&nbsp;</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Q Johnson replied on Monday, April 23, 2007</h2><P>Since you are "new to programming,"&nbsp; I think the best advice you can get to a question like this is to learn about Source Control software.&nbsp; There is no reason to write an application like this unless you're doing what we used to call in the Air Force "practice bleeding."&nbsp; </P>
<P>The goals you mention for your app sure make it look like you're just re-inventing the wheel.&nbsp; </P>
<P>Source control is a pretty big issue, but if you're going to be a programmer, you need to get started.&nbsp; I'd recommend setting aside a time budget of, say, two hours to explore the various links you find when you Google "source control."&nbsp; If you have a mentor where you work, ask him/her to show you how they use theirs.&nbsp; They probably use SourceSafe (comes with Visual Studio), but there are other products out there (notably CVS and SubVersion which you'll see mentioned here from time to time).&nbsp; </P>
<P>Any of them will let you save&nbsp;the current&nbsp;"version" of any source code file and to run a comparison (called "viewing differences") with another version that you select.&nbsp; That's what you seem to be describing to me.&nbsp; Welcome to programming, .NET, CSLA,&nbsp;Source Control, &nbsp;(and soon, likely, Code Generation).&nbsp; </P>
<P>Another quick recommendation - check out <A href="http://www.onelittlevictory.com">www.onelittlevictory.com</A>.&nbsp; It's a very nice resource for folks new to CSLA and will get you grounded quickly.&nbsp; Chris did a really nice job with it and it's a shame to struggle with any CSLA topic when so much is offered there.&nbsp; </P>
<P>Good luck.</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Michael Hildner replied on Monday, April 23, 2007</h2><P>I may be reading the OP's post wrong, but I thought he meant tracking the changes of a business object's data properties when the user is running the app, not changes to code files.</P>
<P>If that's the case, one thing that comes to mind to save the inital BO, say right after you fetch from the DB, would be to .Clone the BO. Not sure if that's a good idea though.</P>
<P>There's a few posts in the forum where people are asking how to determine which property has changed - following what people have suggested there might work. Again I don't know because I never tried it, but you could probably do something either with PropertyHasChanged or something in your setter block.</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>glenntoy replied on Monday, April 23, 2007</h2>Keith,<br><br>For me, it sounds like an object level audit trail. Please check the below threads, this might help you:<br><a HREF="/forums/thread/10206.aspx">Object Level Audit Trail</a><br><a HREF="/forums/thread/11323.aspx">Change Tracking</a><br><br>I hope it will give you an idea on what you want to achieve.<br><br>Cheers, <br>Glenn<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ksirmons replied on Tuesday, April 24, 2007</h2><P>Thank you for the links.&nbsp; The Object Level Audit is what I am looking for.</P>
<P>Keith</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Yang replied on Tuesday, April 24, 2007</h2><P>Keith,</P>
<P>We are doing data auditing here at my work. One of our requirements was to keep track of all changes whether done on the UI or sometimes some database utility application like TOAD. </P>
<P>We created history tables which is a mirror of the actual tables plus some user and time stamping mechanism&nbsp; and update type columns so we do not combine historical data with the active data. Since we do not have control over how TOAD or other utilities does the updates, we created insert/update/delete triggers on the tables we want audited and have it insert into the corresponding history table every time a change in the data occurs. </P>
<P>On the business object side, we created readonly business objects for viewing the history. </P>
<P>Hope this helps</P>
<P>Yang</P></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
