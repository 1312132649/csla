<html><header><title>DataPortal_XYZ, access enterprise services component</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>DataPortal_XYZ, access enterprise services component</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/2416.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>Zygimantas posted on Friday, February 23, 2007</h2><P>Hello,</P>
<P>Is it possible (and how)&nbsp;to&nbsp;pass Criteria object&nbsp;to&nbsp;Enterprise Services component from DataPortal_XYZ methods and update the caller object? For example:</P>
<P>public class Identity<BR>{<BR>&nbsp;&nbsp;&nbsp; private Boolen isAuthenticated;<BR>&nbsp;&nbsp;&nbsp; private String failureReason;</P>
<P>&nbsp;&nbsp;&nbsp; public Boolen IsAuthenticated<BR>&nbsp;&nbsp;&nbsp; {<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; get { return this.isAuthenticated; }<BR>&nbsp;&nbsp;&nbsp; }</P>
<P>&nbsp;&nbsp;&nbsp; public Boolen FailureReason<BR>&nbsp;&nbsp;&nbsp; {<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; get { return this.failureReason; }<BR>&nbsp;&nbsp;&nbsp; }</P>
<P>&nbsp;&nbsp;&nbsp; private class Criteria<BR>&nbsp;&nbsp;&nbsp; {<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; private String username;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; private String password;</P>
<P>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; public String Username<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; get { return this.username; }<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</P>
<P>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; public String Password<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; get { return this.password; }<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<BR>&nbsp;&nbsp;&nbsp; }</P>
<P>&nbsp;&nbsp;&nbsp; private void DataPortal_Fetch(Criteria criteria)<BR>&nbsp;&nbsp;&nbsp; {<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // 1 : typical simplified authentication - no problems<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // if (criteria.Username == "Administrator" &amp;&amp; criteria.Password == "password") { this.isAuthenticated = true; this.failureReason = ""; }</P>
<P>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // 2: authentication must be done in ES component because object pooling is required<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // CustomDataAccessComponent is Enterprise Service component<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // using (CustomDataAccessComponent component = new CustomDataAccessComponent())<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // {<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //&nbsp;&nbsp;&nbsp;&nbsp; ???<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // }<BR>&nbsp;&nbsp;&nbsp; }<BR>}<BR></P>
<P>Thank you for your help!</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Zygimantas replied on Friday, February 23, 2007</h2><P>I have found Rockford's solution to simmilar problem in this topic <A HREF="/forums/permalink/11272/11565/ShowThread.aspx#11565">http://forums.lhotka.net/forums/permalink/11272/11565/ShowThread.aspx#11565</A>&nbsp;but could you please provide more details how to implement DataServiceFactory?</P>
<P>&nbsp;</P>
<P>[Serializable]<BR>public class Customer : BusinessBase&lt;Customer&gt;<BR>{<BR>&nbsp; // ...<BR>&nbsp; protected override void DataPortal_Fetch(Criteria criteria)<BR>&nbsp; {<BR>&nbsp;&nbsp;&nbsp; using (DataService svc = DataServiceFactory.GetService&lt;Customer&gt;())<BR>&nbsp;&nbsp;&nbsp; {<BR>&nbsp; &nbsp;&nbsp;&nbsp; DataObjects.CustomerQuery query = new DataObjects.CustomerQuery();<BR>&nbsp;&nbsp;&nbsp; &nbsp; Csla.Data.DataMapper.Map(criteria, query);<BR>&nbsp; &nbsp;&nbsp;&nbsp; DataObjects.CustomerData result = svc.GetObject(query);<BR>&nbsp; &nbsp;&nbsp;&nbsp; _id = result.Id;<BR>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;_name = result.Name;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // etc...<BR>&nbsp;&nbsp;&nbsp; }<BR>&nbsp; }<BR>&nbsp; // ...<BR>}</P></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
