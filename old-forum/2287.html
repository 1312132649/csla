<html><header><title>SmartDate and Custom User Control</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>SmartDate and Custom User Control</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/2287.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>Ronbo posted on Tuesday, February 06, 2007</h2>I did a search and could not find anything along these lines.&nbsp; I have created a custom user control which consists of a masked edit control and a Windows DatePicker.&nbsp; The masked edit allows manual input from the user and the datepicker allows them to choose a date and pushes it into the masked edit control.&nbsp; They can only see the drop down button on the date picker, not the value portion.&nbsp; My problem is that I have to bind to an object type because they can enter a partial value such as 12/24/____.&nbsp;&nbsp; If I was binding to a smart date that would blow up, so I must use an object or string type.&nbsp; So I tried binding to SmartDate.DBValue and the control functions perfect, except when I lose focus and the property should go to the setter, it bypasses the property setter and goes directly to the private smartDate variable, thus bypassing my business rules.&nbsp; I understand its not the best explanation but I can send code snippets if it will help.&nbsp; Any help would be great, thanks.</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Brian Criswell replied on Tuesday, February 06, 2007</h2>First off, regardless of what you use, wrap the use of _smartDate.xyz in a property.&nbsp; The most common pattern for using SmartDate is<br><br>public string MyDate<br>{<br>&nbsp;&nbsp;&nbsp; get<br>&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; CanReadProperty("MyDate", true);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return _myDate.Text;<br>&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; set<br>&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; CanWriteProperty("MyDate", true);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (!_myDate.Equals(value))<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;  {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; _myDate.Text = value;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; PropertyHasChanged("MyDate");<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; }<br>}<br><br>This keeps it from bypassing your business rules.&nbsp; You may want to just try using a text box bound to a string property on your object and see what happens when the user types in "12/24".&nbsp; Don't for get to use a bindingsourcerefresh component.<br></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
