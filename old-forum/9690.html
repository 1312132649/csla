<html><header><title>I need a sanity check...</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>I need a sanity check...</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/9690.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>jh72i posted on Friday, October 29, 2010</h2><p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><span style="font-family:Courier New;color:#0000ff;font-size:xx-small;"><span style="font-family:Courier New;color:#0000ff;font-size:xx-small;"><span style="font-family:Courier New;color:#0000ff;font-size:xx-small;">
<p>I have just noticed my clsa collections no longer seem to care about the <em>Allow</em> flags. I set these appropriately but have just noticed that i can add to a collection that is flagged to disallow additions.</p>
<p>Stripping it back consider the following and tell me why the Add actually works?!?....</p>
<font face="Courier New" size="1" color="#0000ff"><font face="Courier New" size="1" color="#0000ff"><font face="Courier New" size="1" color="#0000ff">
<p>var</p>
</font></font></font></span><font face="Courier New" size="1" color="#0000ff"><font face="Courier New" size="1" color="#0000ff">
<p>&nbsp;</p>
</font></font></span><font face="Courier New" size="1" color="#0000ff">
<p>&nbsp;</p>
</font></span>
<p><span style="font-family:Courier New;font-size:xx-small;"><span style="font-family:Courier New;font-size:xx-small;"> l = </span></span><span style="font-family:Courier New;color:#0000ff;font-size:xx-small;"><span style="font-family:Courier New;color:#0000ff;font-size:xx-small;"><span style="font-family:Courier New;color:#0000ff;font-size:xx-small;">new</span></span></span><span style="font-family:Courier New;font-size:xx-small;"><span style="font-family:Courier New;font-size:xx-small;"> </span></span><span style="font-family:Courier New;color:#2b91af;font-size:xx-small;"><span style="font-family:Courier New;color:#2b91af;font-size:xx-small;"><span style="font-family:Courier New;color:#2b91af;font-size:xx-small;">BindingList</span></span></span><span style="font-family:Courier New;font-size:xx-small;"><span style="font-family:Courier New;font-size:xx-small;">&lt;</span></span><span style="font-family:Courier New;color:#2b91af;font-size:xx-small;"><span style="font-family:Courier New;color:#2b91af;font-size:xx-small;"><span style="font-family:Courier New;color:#2b91af;font-size:xx-small;">String</span></span></span><span style="font-family:Courier New;font-size:xx-small;"><span style="font-family:Courier New;font-size:xx-small;">&gt;();<br />l.AllowNew = </span></span><span style="font-family:Courier New;color:#0000ff;font-size:xx-small;"><span style="font-family:Courier New;color:#0000ff;font-size:xx-small;"><span style="font-family:Courier New;color:#0000ff;font-size:xx-small;">false</span></span></span><span style="font-family:Courier New;font-size:xx-small;"><span style="font-family:Courier New;font-size:xx-small;">;<br />l.AllowEdit = </span></span><span style="font-family:Courier New;color:#0000ff;font-size:xx-small;"><span style="font-family:Courier New;color:#0000ff;font-size:xx-small;"><span style="font-family:Courier New;color:#0000ff;font-size:xx-small;">false</span></span></span><span style="font-family:Courier New;font-size:xx-small;"><span style="font-family:Courier New;font-size:xx-small;">;<br />l.AllowRemove = </span></span><span style="font-family:Courier New;color:#0000ff;font-size:xx-small;"><span style="font-family:Courier New;color:#0000ff;font-size:xx-small;"><span style="font-family:Courier New;color:#0000ff;font-size:xx-small;">false</span></span></span><span style="font-family:Courier New;font-size:xx-small;"><span style="font-family:Courier New;font-size:xx-small;">;<br />l.Add(</span></span><span style="font-family:Courier New;color:#a31515;font-size:xx-small;"><span style="font-family:Courier New;color:#a31515;font-size:xx-small;"><span style="font-family:Courier New;color:#a31515;font-size:xx-small;">&quot;xxx&quot;</span></span></span><span style="font-family:Courier New;font-size:xx-small;"><span style="font-family:Courier New;font-size:xx-small;">);<br /></span></span><span style="font-family:Courier New;color:#0000ff;font-size:xx-small;"><span style="font-family:Courier New;color:#0000ff;font-size:xx-small;"><span style="font-family:Courier New;color:#0000ff;font-size:xx-small;">string</span></span></span><span style="font-family:Courier New;font-size:xx-small;"><span style="font-family:Courier New;font-size:xx-small;"> count = l.Count.ToString();</span></span></p>
</p>
<p><span style="font-family:Courier New;font-size:xx-small;"><span style="font-family:Courier New;font-size:xx-small;">Thanks</span></span></p></div><div style='padding:0 15 3 15;background-color:lightgreen'><h2>RockfordLhotka replied on Friday, October 29, 2010</h2><p>Those allow flags only control interaction with data binding - they tell data binding whether the list will or won&#39;t allow the operation. They don&#39;t actually affect whether the list does or doesn&#39;t actually allow the operation via explicit code.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>jh72i replied on Monday, November 01, 2010</h2><p>Wow! I totally missed this somewhere along the way. You used to check for this in the BindableCollectionBase class of old. Have you intentionally removed it from the later <em>generic</em> versions or do I have some messed up version of the Csla code?</p>
<p>[Serializable]<br />public abstract class BindableCollectionBase : CollectionBase, IBindingList<br />{<br />&nbsp; object IBindingList.AddNew() <br />&nbsp; { <br />&nbsp;&nbsp;&nbsp; if(!this.AllowNew)<br />&nbsp;&nbsp;&nbsp; {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; throw new InvalidOperationException(Strings.GetResourceString(&quot;AddItemException&quot;));<br />&nbsp;&nbsp;&nbsp; }<br />&nbsp;&nbsp;&nbsp; return OnAddNew(); <br />&nbsp; }...</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Monday, November 01, 2010</h2><p>It has been so long ago that I can&#39;t say I remember. But I suspect one of two things. Either (a) I removed the check because if Microsoft&#39;s base class didn&#39;t do it why should I? Or (b) that check was actually causing some trouble with data binding. But I&#39;m pretty sure it was (a).</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>jh72i replied on Monday, November 01, 2010</h2><p>Fair enough Rocky - a long time indeed in this technology. Thanks for taking the time to reply. </p>
<p>It&#39;s a weird one though, imho, and quite misleading of MS. I&#39;d say there are a lot of folks out there(here!) with collections/lists/etc. that are intended to disallow adding but actually don&#39;t. I set to sorting my <em>exposure</em> out immediately.</p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
