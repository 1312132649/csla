<html><header><title>&quot;Inheritance security rules violated while overriding member&quot; error</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>&quot;Inheritance security rules violated while overriding member&quot; error</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/9914.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>matt tag posted on Tuesday, January 04, 2011</h2><p>Attempting to create a CSLA library with a WPF 4.0 front end.&nbsp; Every call to DataPortal.Fetch is coming up with the following exception.&nbsp; Any ideas?</p>
<p>&quot;Inheritance security rules violated while overriding member: &#39;Csla.Server.DataPortalException.GetObjectData(System.Runtime.Serialization.SerializationInfo, System.Runtime.Serialization.StreamingContext)&#39;. <br />Security accessibility of the overriding method must match the security accessibility of the method being overriden.&quot;</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Tuesday, January 04, 2011</h2><p>That seems very odd, I&#39;ve never seen that exception before (ever).</p>
<p>It seems like that sort of scoping issue would be caught by the compiler, not at runtime. What is the actual exception I wonder?&nbsp;A JIT compiler exception maybe?</p>
<p>I just created a test to ensure the DataPortalException type properly serializes and deserializes and it works fine.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>matt tag replied on Tuesday, January 04, 2011</h2><p>problem solved (for now) - I had to check &quot;This is a Full Trust Application&quot; on the Security tab of the project.&nbsp; (this is an xbap application).</p>
<p>&nbsp;</p>
<p>thanks</p>
<p>&nbsp;</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Tuesday, January 04, 2011</h2><p>Ahh, sure! The BinaryFormatter and NetDataContractSerializer (the serializers used by .NET to clone objects) require FullTrust.</p>
<p>There was a thread shortly before the holidays where someone was asking about a version of CSLA .NET that would run in medium trust (like on a hosted web server where you often can&#39;t get full trust). I discussed some of my thoughts on what it might take to get the core CSLA 4 Csla.dll to work in medium trust - and it might actually be possible.</p>
<p>The first step is to allow CSLA to use the MobileFormatter for pure .NET applications - thus avoiding the BF and NDCS and their FullTrust requirement...</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>arnaud897 replied on Sunday, January 08, 2012</h2><p>In .NET 4.0, ISerializable.GetObjectData(...) is now attributed [SecurityCritical], which is a breaking change from previous .NET versions, and causes the following exception when a DataPortalException is being instanciated in partial trust:</p>
<p>&quot;Inheritance security rules violated while overriding member: &#39;Csla.Server.DataPortalException.GetObjectData(System.Runtime.Serialization.SerializationInfo, System.Runtime.Serialization.StreamingContext)&#39;. <br />Security accessibility of the overriding method must match the security accessibility of the method being overriden.&quot;</p>
<p>As an alternative, the ISafeSerializationData interface could be used (<a href="http://msdn.microsoft.com/en-us/library/system.runtime.serialization.isafeserializationdata.aspx">http://msdn.microsoft.com/en-us/library/system.runtime.serialization.isafeserializationdata.aspx</a>).</p>
<p>Partial trust is not a must, it&#39;s an obligation for many hosted environments. .NET 4 rewrite of CAS should be an opportunity for CSLA to permit partial trust.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Sunday, January 08, 2012</h2><p>Although I don&#39;t disagree about someday supporting partial trust, I fail to see the issue at present. CSLA has never worked in partial trust, so this new change to GetObjectData seems immaterial. Am I missing something?</p>
<p>The Silverlight version of CSLA works in partial trust - SL is basically only partial trust :)</p>
<p>The primary blocker is the use of the .NET serializers. In 4.3 or 4.5 (I&#39;m not sure which), we will enable the use of MobileFormatter in .NET apps. That should allow core CSLA functionality to work in partial trust.</p>
<p>It is an absolute requirement for 4.5, where we need to support WinRT - and like SL, that runtime doesn&#39;t have or allow BinaryFormatter or NDCS.</p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
