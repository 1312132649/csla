<html><header><title>CSLA remoting and assembly version conflicts</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>CSLA remoting and assembly version conflicts</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/1132.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>sune42 posted on Wednesday, September 06, 2006</h2><P>Hi</P>
<P>Just a theoretical question, what will happen if the my CSLA business object assembly version on the remoting server is slightly different than the winform client? </P>
<P>(I mean&nbsp;using the exact same&nbsp;CSLA framework version, &nbsp;but my custom business objects assembly might be slightly of out date).</P>
<P>I mean some users might not be using the exactly latest version.</P>
<P>So, what happens? will CSLA break and just stop? or will it still function if the methods signatures/names are the same? or are they using some checksum to make sure the CSLA objects are the same?</P>
<P>Perhaps we should have a way in the client to "check/test" if the assemblies are compatible/same on both ends?</P>
<P>//andy</P>
<P>&nbsp;</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Wednesday, September 06, 2006</h2>Your remoting host will fail to process, because type information is serialized into the remoting stream, and when IIS can't find the correct version, boom!<br><br>I have code on my application startup that forces my users to always connect with the latest version; if not, the program tells them to update and try again.<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>MartinMason replied on Wednesday, September 06, 2006</h2>Seems to be an argument for installing CSLA in the GAC.&nbsp; </div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Wednesday, September 06, 2006</h2>Well, I think the OP said it was his business assembly, not Csla that may be 'out of sync.'<br><br>Of course the larger issue is should users be able to use outdated business assemblies to connect.&nbsp; It depends on the changes to the assembly though and user requirements.&nbsp; <br><br>In general, you should not install assemblies in the GAC.&nbsp; The GAC is supposed to be for the .Net framework, or assemblies which should act as part of the .Net framework itself.&nbsp; At least I've read quite a few articles stating that.<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>MartinMason replied on Monday, September 11, 2006</h2><P>ajj3085 raises a point that should probably be discussed.&nbsp; The GAC is a place to store reusuable, shared assemblies.&nbsp; If your organization is building nTier applications with CSLA and CSLA is providing the entire enterprise plumbing backbone, wouldn't it make sense to install CSLA in the GAC?&nbsp; Really, wouldn't the CSLA namespace become as critical to your code as System?</P>
<P>Installing CSLA in the GAC also allows for side-by-side existence of different versions of the same assembly.&nbsp; When compiling assembly references from the GAC, the version stamping of the referenced assembly is included in your assembly manifest.&nbsp; (You can always use an application configuration file to override the version)&nbsp; You cannot obtain these benefits with private assemblies.</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Tuesday, September 12, 2006</h2>I guess it depends on how you define 'extend the framework.'&nbsp; Certainly one way is the way you describe.&nbsp; I think I also recall seeing one person that said only MS should be putting things into the GAC.&nbsp; What the actual best practice is I'm not clear on, but it is a decision which should not be made lightly.<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Tuesday, September 12, 2006</h2><P>The GAC complicates/prevents the use of no-touch and ClickOnce deployment schemes. Personally I avoid it as much as possible...</P>
<P>But to take this in a slightly different direction - the BinaryFormatter, which is actually doing the serialization that is version-sensitive, has some switches (especially in .NET 2.0) to allow you to communicate across versions of an assembly. To use this, you'd need to create a custom data portal channel so you could tell the BinaryFormatter to be more tolerant, and you'd need to use a new attribute (Optional I think?) on your fields as you add them to your class, and you'd need to make your object code tolerate those fields being not set... But it can be done.</P>
<P>Also, looking forward to WCF and the DataContract concept, you get the same thing. The ability to have different versions on each end of the wire - as long as you take the time and effort to write your code to tolerate missing field values, etc.</P></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
