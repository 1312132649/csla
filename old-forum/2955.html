<html><header><title>OT (just a bit) Javascript in custom controls</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>OT (just a bit) Javascript in custom controls</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/2955.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>david.wendelken posted on Wednesday, May 30, 2007</h2><P>I'm bulding a Csla-aware set of web controls and have hit a technical snag.</P>
<P>This is a re-usable set of controls that is being built in its own project, because many different web apps might want to reference it.</P>
<P>The first class is DataTypeTextBox, which is a sub-class of TextBox that understands the concept of "Required" and "DataType".&nbsp; It performs javascript validation on the client-side&nbsp;plus C# server-side validation.&nbsp; It automatically includes two Validators, the RequiredFieldValidator and a CustomValidator.&nbsp; The CustomValidator wants to call a javascript function that I have to write.</P>
<P>So far, so good.&nbsp; I wrote the javascript inside the c# code by assembling it into a big string that included a &lt;script&gt; tag.&nbsp; I had the control DataTypeTextBox control register the script and the proof-of-concept worked fine. :)</P>
<P>Except that I still had a bunch of javascript to write, to turn the proof-of-concept into a full-blown control.&nbsp; And, having to embed each line of the javascript inside a string made the javascript harder and harder to maintain and extend.</P>
<P>So, I've tried moving the javascript into a .js file inside the web control project, and changing the &lt;script&gt; tag to include a "src=validationCode.js" attribute instead of the full javascript code listing.</P>
<P>This seems to have several advantages over building the javascript in each page that uses the control at runtime.&nbsp; First, the browser can download the .js file once and recognize that nothing has changed, so it doesn't have to download the same javascript over and over again.&nbsp; Plus, I get to write pure javascript instead of javascript embedded into strings.</P>
<P>However, it's not working, because it appears that the &lt;script&gt; tag is added to the page by the web control project, but the page belongs to a different project, a web app.&nbsp; The browser then evaluates the "src=" tag and appears (quite reasonably) to assume it is talking about a directory in the web application, not the web control application. :(&nbsp; So, of course, it cannot find it.</P>
<P>Any ideas how I can get my web control dll that's referenced by the web application to find the javascript file?&nbsp; Ideally, in an "its works automagically" manner. :)</P></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
