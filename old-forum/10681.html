<html><header><title>Return List&lt;double&gt; in Silverlight WCFPortal</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Return List&lt;double&gt; in Silverlight WCFPortal</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/10681.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>Gort posted on Tuesday, September 13, 2011</h2><p>I am developing a SL application and need to pass a List&lt;short&gt; to the factory method and&nbsp;&nbsp; return a List&lt;double&gt;.&nbsp; How would I go about doing this?</p>
<p>Currently, I get an error:</p>
<p>Type &#39;System.Collections.Generic.List`1[[System.Double, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089]]&#39; with data contract name &#39;ArrayOfdouble:http://schemas.microsoft.com/2003/10/Serialization/Arrays&#39; is not expected. Consider using a DataContractResolver or add any types not known statically to the list of known types - for example, by using the KnownTypeAttribute attribute or by adding them to the list of known types passed to DataContractSerializer.</p>
<p>I know how I would go about this if I was using my own WCF service, but am not sure how to do it using the Csla.Server.Hosts.Silverlight.WcfPortal.</p>
<p>Tks.</p></div><div style='padding:0 15 3 15;background-color:lightgreen'><h2>RockfordLhotka replied on Wednesday, September 14, 2011</h2><p>This has been discussed a few times. </p>
<ol>
<li>The data portal uses the MobileFormatter. </li>
<li>The MobileFormatter requires all types implement IMobileObject. </li>
<li>That is hard, so you should try to use the pre-build types we provide - like Csla.Core.MobileList</li>
</ol>
<p>&nbsp;</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Gort replied on Wednesday, September 14, 2011</h2><p>Thanks for the response, Rocky.</p>
<p>I got this to work for my return list of doubles, but can&#39;t seem to get it to work for my criteria class where I need to pass in a list of short values.&nbsp; I get the same error when attempting to pass a MobileList&lt;Int16&gt; within the criteria class.&nbsp; Should this work in that case too?</p>
<p>Tks</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Gort replied on Wednesday, September 21, 2011</h2><p>Does anyone have any thoughts or ideas as to why this is not working?</p>
<p>Tks much!</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Wednesday, September 21, 2011</h2><p>The property in your criteria class needs to be a managed property for CSLA to automatically treat it like a child object. Is your property a managed property?</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Gort replied on Thursday, September 22, 2011</h2><p>Here is how my property looks in my critieria class:</p>
<p>public MobileList&lt;Int16&gt; VariableIds<br />{<br />&nbsp; get { return GetValue&lt;MobileList&lt;Int16&gt;&gt;(&quot;VariableIds&quot;); }<br />&nbsp; set { _bag[&quot;VariableIds&quot;] = value; }<br />}</p>
<p>The error I get is:</p>
<p>Type &#39;Csla.Core.MobileList`1[[System.Int16, mscorlib, Version=2.0.5.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]&#39; with data contract name &#39;ArrayOfshort:http://schemas.microsoft.com/2003/10/Serialization/Arrays&#39; is not expected. Add any types not known statically to the list of known types - for example, by using the KnownTypeAttribute attribute or by adding them to the list of known types passed to DataContractSerializer.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JonnyBee replied on Thursday, September 22, 2011</h2><p>Your criteria property should look like this:</p>
<p>&nbsp;&nbsp;&nbsp; public static PropertyInfo&lt;MobileList&lt;Int16&gt;&gt; VariableIdsProperty = RegisterProperty&lt;MobileList&lt;Int16&gt;&gt;(c =&gt; c.VariableIds);<br />&nbsp;&nbsp;&nbsp; public MobileList&lt;Int16&gt; VariableIds<br />&nbsp;&nbsp;&nbsp; {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; get { return GetProperty(VariableIdsProperty ); }<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; private set { LoadProperty(VariableIdsProperty , value); }<br />&nbsp;&nbsp;&nbsp; }</p>
<p>Your property read the managed property value and set a totally different property in _bag.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Gort replied on Thursday, September 22, 2011</h2><p><span style="font-family:Consolas;color:#2b91af;font-size:x-small;"><span style="font-family:Consolas;color:#2b91af;font-size:x-small;"><span style="font-family:Consolas;color:#2b91af;font-size:x-small;">Ok.&nbsp; I tried this but it seems that &#39;GetProperty(...)&#39; is not a method within the &#39;CriteriaBase&#39; class.&nbsp; I can&#39;t seem to find it.&nbsp; </span></span></span></p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JonnyBee replied on Thursday, September 22, 2011</h2><p>Which version of Csla are you using?</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Gort replied on Thursday, September 22, 2011</h2><p>v4.0.30319</p></div><div style='padding:0 15 3 15;background-color:lightgreen'><h2>RockfordLhotka replied on Thursday, September 22, 2011</h2><p>There should be ReadProperty and LoadProperty methods. There wouldn&#39;t be GetProperty or SetProperty, because CriteriaBase has no support for business or authorization rules.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Gort replied on Thursday, September 22, 2011</h2><p>Yep, that did it.</p>
<p>Rocky and JonnyBee, thanks so much for your help!</p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
