<html><header><title>Bug in SimpleDataProtal</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Bug in SimpleDataProtal</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/12778.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>Sander posted on Monday, October 20, 2014</h2><p>I&#39;m working with CSLA 4.5.601 and recently found out a bug in the Create of SimpleDataPortal. (I did something wrong but exception was hard to track because of this)</p>
<p>Exception was catched as expected to line 91:<br /><span style="font-size:x-small;font-family:Consolas;color:#569cd6;"><span style="font-size:x-small;font-family:Consolas;color:#569cd6;"><span style="font-size:x-small;font-family:Consolas;color:#569cd6;"><span style="font-size:x-small;font-family:Consolas;color:#569cd6;"><span style="font-size:x-small;font-family:Consolas;color:#569cd6;"><span style="font-size:x-small;font-family:Consolas;color:#569cd6;">catch</span></span></span><span style="font-size:x-small;font-family:Consolas;color:#dcdcdc;"><span style="font-size:x-small;font-family:Consolas;color:#dcdcdc;"><span style="font-size:x-small;font-family:Consolas;color:#dcdcdc;"> (</span></span></span><span style="font-size:x-small;font-family:Consolas;color:#4ec9b0;"><span style="font-size:x-small;font-family:Consolas;color:#4ec9b0;"><span style="font-size:x-small;font-family:Consolas;color:#4ec9b0;">Exception</span></span></span><span style="font-size:x-small;font-family:Consolas;color:#dcdcdc;"><span style="font-size:x-small;font-family:Consolas;color:#dcdcdc;"><span style="font-size:x-small;font-family:Consolas;color:#dcdcdc;"> ex) {<br />&nbsp; ...<br /></span></span></span>&nbsp; throw&nbsp;</span></span></span><span style="font-size:x-small;font-family:Consolas;color:#4ec9b0;"><span style="font-size:x-small;font-family:Consolas;color:#4ec9b0;"><span style="font-size:x-small;font-family:Consolas;color:#4ec9b0;">DataPortal</span></span></span><span style="font-size:x-small;font-family:Consolas;color:#b4b4b4;"><span style="font-size:x-small;font-family:Consolas;color:#b4b4b4;"><span style="font-size:x-small;font-family:Consolas;color:#b4b4b4;">.</span></span></span><span style="font-size:x-small;font-family:Consolas;color:#dcdcdc;"><span style="font-size:x-small;font-family:Consolas;color:#dcdcdc;"><span style="font-size:x-small;font-family:Consolas;color:#dcdcdc;">NewDataPortalException(...</span></span></span></p>
<p>And after that run the finally:<br /><span style="font-size:x-small;font-family:Consolas;color:#569cd6;"><span style="font-size:x-small;font-family:Consolas;color:#569cd6;"><span style="font-size:x-small;font-family:Consolas;color:#569cd6;">finally</span></span></span><span style="font-size:x-small;font-family:Consolas;color:#dcdcdc;"><span style="font-size:x-small;font-family:Consolas;color:#dcdcdc;"><span style="font-size:x-small;font-family:Consolas;color:#dcdcdc;">{<br />&nbsp;&nbsp;&nbsp; ApplicationContext</span></span></span><span style="font-size:x-small;font-family:Consolas;color:#b4b4b4;"><span style="font-size:x-small;font-family:Consolas;color:#b4b4b4;"><span style="font-size:x-small;font-family:Consolas;color:#b4b4b4;">.</span></span></span><span style="font-size:x-small;font-family:Consolas;color:#dcdcdc;"><span style="font-size:x-small;font-family:Consolas;color:#dcdcdc;"><span style="font-size:x-small;font-family:Consolas;color:#dcdcdc;">DataPortalActivator</span></span></span><span style="font-size:x-small;font-family:Consolas;color:#b4b4b4;"><span style="font-size:x-small;font-family:Consolas;color:#b4b4b4;"><span style="font-size:x-small;font-family:Consolas;color:#b4b4b4;">.</span></span></span><span style="font-size:x-small;font-family:Consolas;color:#dcdcdc;"><span style="font-size:x-small;font-family:Consolas;color:#dcdcdc;"><span style="font-size:x-small;font-family:Consolas;color:#dcdcdc;">FinalizeInstance(obj</span></span></span><span style="font-size:x-small;font-family:Consolas;color:#b4b4b4;"><span style="font-size:x-small;font-family:Consolas;color:#b4b4b4;"><span style="font-size:x-small;font-family:Consolas;color:#b4b4b4;">.</span></span></span><span style="font-size:x-small;font-family:Consolas;color:#dcdcdc;"><span style="font-size:x-small;font-family:Consolas;color:#dcdcdc;"><span style="font-size:x-small;font-family:Consolas;color:#dcdcdc;">Instance);<br />}<br /><br /></span></span></span>But because obj was null exception was thrown from the finally block and the exception from the try/catch was &#39;lost&#39;.</p>
<p>I&#39;ve added a null check in the finally block which could prevent an issue like this in the future<br /><span style="font-size:x-small;font-family:Consolas;color:#dcdcdc;"><span style="font-size:x-small;font-family:Consolas;color:#dcdcdc;"><span style="font-size:x-small;font-family:Consolas;color:#dcdcdc;"><span style="color:#569cd6;">finally</span><span style="font-size:x-small;font-family:Consolas;color:#dcdcdc;"><span style="font-size:x-small;font-family:Consolas;color:#dcdcdc;"><span style="font-size:x-small;font-family:Consolas;color:#dcdcdc;">{<br /><span style="color:#569cd6;">&nbsp; if</span><span style="font-size:x-small;font-family:Consolas;color:#dcdcdc;"><span style="font-size:x-small;font-family:Consolas;color:#dcdcdc;"><span style="font-size:x-small;font-family:Consolas;color:#dcdcdc;"> (obj </span></span></span><span style="font-size:x-small;font-family:Consolas;color:#b4b4b4;"><span style="font-size:x-small;font-family:Consolas;color:#b4b4b4;"><span style="font-size:x-small;font-family:Consolas;color:#b4b4b4;">!=</span></span></span><span style="font-size:x-small;font-family:Consolas;color:#dcdcdc;"><span style="font-size:x-small;font-family:Consolas;color:#dcdcdc;"><span style="font-size:x-small;font-family:Consolas;color:#dcdcdc;"> </span></span></span><span style="font-size:x-small;font-family:Consolas;color:#569cd6;"><span style="font-size:x-small;font-family:Consolas;color:#569cd6;"><span style="font-size:x-small;font-family:Consolas;color:#569cd6;">null</span></span></span><span style="font-size:x-small;font-family:Consolas;color:#dcdcdc;"><span style="font-size:x-small;font-family:Consolas;color:#dcdcdc;"><span style="font-size:x-small;font-family:Consolas;color:#dcdcdc;">)</span></span></span><br />&nbsp;&nbsp;ApplicationContext</span></span></span><span style="font-size:x-small;font-family:Consolas;color:#b4b4b4;"><span style="font-size:x-small;font-family:Consolas;color:#b4b4b4;"><span style="font-size:x-small;font-family:Consolas;color:#b4b4b4;">.</span></span></span><span style="font-size:x-small;font-family:Consolas;color:#dcdcdc;"><span style="font-size:x-small;font-family:Consolas;color:#dcdcdc;"><span style="font-size:x-small;font-family:Consolas;color:#dcdcdc;">DataPortalActivator</span></span></span><span style="font-size:x-small;font-family:Consolas;color:#b4b4b4;"><span style="font-size:x-small;font-family:Consolas;color:#b4b4b4;"><span style="font-size:x-small;font-family:Consolas;color:#b4b4b4;">.</span></span></span><span style="font-size:x-small;font-family:Consolas;color:#dcdcdc;"><span style="font-size:x-small;font-family:Consolas;color:#dcdcdc;"><span style="font-size:x-small;font-family:Consolas;color:#dcdcdc;">FinalizeInstance(obj</span></span></span><span style="font-size:x-small;font-family:Consolas;color:#b4b4b4;"><span style="font-size:x-small;font-family:Consolas;color:#b4b4b4;"><span style="font-size:x-small;font-family:Consolas;color:#b4b4b4;">.</span></span></span><span style="font-size:x-small;font-family:Consolas;color:#dcdcdc;"><span style="font-size:x-small;font-family:Consolas;color:#dcdcdc;"><span style="font-size:x-small;font-family:Consolas;color:#dcdcdc;">Instance);<br />}<br /><br /><span style="font-family:Arial;color:#000000;">Would this be a nice fix?</span></span></span></span></span></span></span></p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
