<html><header><title>Updating an object's primary key</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Updating an object's primary key</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/2308.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>frankhoffy posted on Thursday, February 08, 2007</h2>I have an object whose underlying record is a composite key.&nbsp; It is possible that the primary key value can be updated.&nbsp; So far I have gotten around this by using extra variables to track the old values every time the key value properties are set.&nbsp; I was wondering if there was a better way I can do this, perhaps by tying into n-level undo.&nbsp; Any suggestions?<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>skagen00 replied on Thursday, February 08, 2007</h2><P>If your primary key can be changed on a record, I would suggest using a surrogate key myself. I know there's a fair debate on using surrogate keys, but using a surrogate key will allow you to change the value of your "primary key" freely without affecting relational data. </P>
<P>Put a unique index on it if you want to ensure that it'll stay unique. </P>
<P>Not an easy thing to change if you're far along down the line, necessarily.&nbsp;But your primary key shouldn't really be changing after creation (or minimally shouldn't change often) IMO.</P>
<P>&nbsp;</P>
<P>&nbsp;</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>frankhoffy replied on Friday, February 09, 2007</h2><BLOCKQUOTE><div><img src="/Themes/default/images/icon-quote.gif"> <strong>skagen00:</strong></div><div>If your primary key can be changed on a record, I would suggest using a surrogate key myself.</div></BLOCKQUOTE><br><br>Tell that to my DBA<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Friday, February 09, 2007</h2>Well then I guess your dba will create the necessary logic to update all the references, right? <img src="/emoticons/emotion-1.gif" alt="Smile [:)]" /><br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>GeorgeG replied on Friday, February 09, 2007</h2><P>This is what I am doing on my end. Create a property called UniqueKey.<BR>On Fetch assign&nbsp;<BR>&nbsp;&nbsp;&nbsp;&nbsp;UniqueKey = various composites values coming from db<BR>On the insert and just after the sql cmd<BR>&nbsp;&nbsp;&nbsp;&nbsp;UniqueKey = various composites values<BR>On the Update&nbsp;<BR>&nbsp;&nbsp;&nbsp;&nbsp;update cmd and use in where clause the <BR>&nbsp;various composites coulmns = UniqueKey<BR>&nbsp;assign again after the sql update to the latest values in case any of various composites values<BR>&nbsp;UniqueKey = various composites values</P>
<P>In addition,&nbsp;the SQL table should have&nbsp;a unique index key as the other users pointed out to have good valid data. Otherwise you will have to check every time you do an insert and update so you do not have dup ukeys.</P>
<P>Hope it helps</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>xal replied on Friday, February 09, 2007</h2><BLOCKQUOTE><div><img src="/Themes/default/images/icon-quote.gif"> <strong>frankhoffy:</strong></div><div><br>Tell that to my DBA<br></div></BLOCKQUOTE><br><br>Well if your dba is a good dba, then he should know that updating primary keys is not a good idea, specially if it conforms a clustered index. There's a <a href="http://www.sqlskills.com/blogs/kimberly/2007/02/02/TheClusteredIndexDebateContinues.aspx">good article</a> on clustered indexes that Kimberly Tripp wrote recently in her blog....<br><br>I hope this doesn't turn into another of those kilometric discussions on surrogate keys or guid vs identity. We've had a fair share of those... <img src="/emoticons/emotion-2.gif" alt="Big Smile [:D]" /><br><br>Andr√©s<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Bowman74 replied on Friday, February 09, 2007</h2><P>&lt;quote&gt;<BR>Tell that to my DBA<BR>&lt;/quote&gt;</P>
<P>Ouch.&nbsp; Informationless keys are your friend.&nbsp; Did he give you any justification behind his decision?</P>
<P>Thanks,</P>
<P>Kevin</P></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
