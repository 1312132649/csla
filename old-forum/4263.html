<html><header><title>Principal must be of type BusinessPrincipal, not System.Security.Principal.GenericPrincipal</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Principal must be of type BusinessPrincipal, not System.Security.Principal.GenericPrincipal</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/4263.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>getsetgo_007 posted on Thursday, January 31, 2008</h2><P><FONT face=Verdana><FONT size=2>We are currently in process of converting our .Net 1.1 and CSLA 1.0 application to new platform i.e. .Net 3.5 and CSLA 3.0. We are almost through with our Business Objects and starting with Data Portal.&nbsp;We are&nbsp;facing <FONT color=#000000>a security exception while trying to fetch data. Exact exception is :</FONT></FONT></FONT></P>
<P><FONT color=#ff0000><FONT face=Tahoma>"Csla.DataPortalException: DataPortal.Fetch failed () ---&gt; <STRONG>System.Security.SecurityException: Principal must be of type BusinessPrincipal, not System.Security.Principal.GenericPrincipal</STRONG></FONT></FONT></P>
<P><FONT color=#ff0000><FONT face=Tahoma><SPAN>&nbsp;&nbsp; </SPAN>at Csla.Server.DataPortal.SetContext(DataPortalContext context)</FONT></FONT></P>
<P><FONT color=#ff0000><FONT face=Tahoma><SPAN>&nbsp;&nbsp; </SPAN>at Csla.Server.DataPortal.Fetch(Type objectType, Object criteria, DataPortalContext context)</FONT></FONT></P>
<P><FONT face=Tahoma color=#ff0000><STRONG>The action that failed was:</STRONG></FONT></P>
<P><FONT face=Tahoma color=#ff0000><STRONG>Deny</STRONG></FONT></P>
<P><FONT face=Tahoma color=#ff0000><STRONG>The Zone of the assembly that failed was:</STRONG></FONT></P>
<P><FONT face=Tahoma color=#ff0000><STRONG>MyComputer</STRONG></FONT></P>
<P><FONT color=#ff0000><FONT face=Tahoma><SPAN>&nbsp;&nbsp; </SPAN>--- End of inner exception stack trace ---</FONT></FONT></P>
<P><FONT color=#ff0000><FONT face=Tahoma><SPAN>&nbsp;&nbsp; </SPAN>at Csla.Server.DataPortal.SetContext(DataPortalContext context)</FONT></FONT></P>
<P><FONT color=#ff0000><FONT face=Tahoma><SPAN>&nbsp;&nbsp; </SPAN>at Csla.Server.DataPortal.Fetch(Type objectType, Object criteria, DataPortalContext context)</FONT></FONT></P>
<P><FONT color=#ff0000><FONT face=Tahoma><SPAN>&nbsp;&nbsp; </SPAN>at Csla.DataPortal.Fetch(Type objectType, Object criteria)</FONT></FONT></P>
<P><FONT color=#ff0000><FONT face=Tahoma><SPAN>&nbsp;&nbsp; </SPAN>at Csla.DataPortal.Fetch(Object criteria)</FONT></FONT></P>
<P><FONT color=#ff0000><FONT face=Tahoma><SPAN>&nbsp;&nbsp; </SPAN>at WatchCaptain.BusinessObjects.Utilities.Note.GetNote(Guid note_guid) in D:\WORK\Projects\TestBO\TestBusinessObjects\Utilities\Note.vb:line 167"</FONT></FONT></P>
<P><FONT face=Verdana size=2>I am using Windows Vista home premium and running this remote portal on IIS 7.0. I tried searching this forum for answers but nothing solved the problem.&nbsp;</FONT></P>
<P><FONT face=Verdana><FONT size=2>Do let me know if there is something that I have to look into my config files. I have used same config entries as provided with Project Tracker project. I have also attached a zip file with my app and web configuration file.<BR><BR>Thanks<BR></FONT><STRONG><FONT size=2>Gaurav Sharma<BR></FONT></STRONG></FONT><FONT color=#000000><FONT size=2><SPAN><FONT color=#000000>Blog</FONT></SPAN><SPAN>:<FONT color=#000000> </FONT></SPAN><SPAN><A href="http://fun-with-blackhawk.blogspot.com/"><FONT color=#000000>http://fun-with-blackhawk.blogspot.com</FONT></A></SPAN></FONT></FONT><SPAN><BR><FONT color=#000000 size=2>IM</FONT></SPAN><FONT color=#000000><FONT size=2><FONT color=#000000><SPAN>: </SPAN><SPAN><A href="mailto:getsetgo_007@yahoo.com"><FONT color=#000000>getsetgo_007@yahoo.com</FONT></A></SPAN></FONT><SPAN>&nbsp; | </SPAN><SPAN><FONT color=#000000>Skype</FONT>:</SPAN></FONT></FONT><FONT color=#000000><FONT size=2><SPAN> getsetgo_007<BR></SPAN><SPAN><FONT color=#000000>Tel (India):</FONT></SPAN><SPAN> </SPAN><SPAN>+91. 120. 4089942</SPAN><SPAN> </SPAN><SPAN>|</SPAN><SPAN> </SPAN><SPAN><FONT color=#000000>Mob:</FONT></SPAN><SPAN> </SPAN><SPAN>+91.98180-84763</SPAN></FONT></FONT><SPAN><BR></SPAN><SPAN><A href="mailto:gaurav.sharma@servitium.com"><FONT color=#000000 size=2>gaurav.sharma@servitium.com</FONT></A></SPAN><FONT color=#000000><FONT size=2><SPAN> | </SPAN><SPAN><A title=blocked::http://www.servitium.com/ href="http://www.servitium.com/"><FONT color=#000000>www.servitium.com</FONT></A></SPAN><SPAN><o:p></o:p></SPAN></FONT></FONT></P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Thursday, January 31, 2008</h2>In Csla 2 and higher, you MUST create a subclass of BusinessPrincipal to use Csla authentication.&nbsp; So, a bit more than an config file change, but not terribly difficult either.<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>getsetgo_007 replied on Thursday, January 31, 2008</h2><P><FONT face=Verdana size=2>Let me try BusinessPrinciple class. I'll post my findings.</FONT></P>
<P><FONT face=Verdana size=2>Thanks,<BR>Gaurav</FONT></P>
<P><FONT face=Verdana size=2></FONT>&nbsp;</P>
<P><FONT face=Verdana size=2></FONT>&nbsp;</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>getsetgo_007 replied on Friday, February 01, 2008</h2><P><FONT face=Verdana size=2>Nevermind, I used Windows authentication instead of Csla authentication.</FONT></P>
<P><FONT face=Verdana size=2>Thanks,<BR>Gaurav</FONT></P>
<P>&nbsp;</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>MikeHamilton replied on Tuesday, April 08, 2008</h2><P>I am getting this error while trying to call the .Login(username, password) on the custom principal object.</P>
<P>I have the code for the Principal and Identity objects as shown in the ebook and it is set to inherit correctly.</P>
<P>This code works when using a local dataproxy but then when switching to calling a Web Service data portal I get this error. </P>
<P>ANY help would be great! I have already been taking too long on this project due to other non CSLA issues. we gave up and it was working and then tried to switch ot using the WS portal and my boss is getting un happy with me again.</P>
<P>Thanks!</P>
<P>Mike</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>MikeHamilton replied on Tuesday, April 08, 2008</h2><P>I got this working. I called .Logout the line before the .Login line andthat solved it.</P>
<P>Mike</P>
<P>&nbsp;</P></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
