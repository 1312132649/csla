<html><header><title>How to handle multiple BeginEdit and only one Save()...</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>How to handle multiple BeginEdit and only one Save()...</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/9721.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>idroesse posted on Friday, November 05, 2010</h2><p>Hi guys, just&nbsp;a question for you.&nbsp; I&#39;m writing a WPF application that use the old MDI concept (one main page&nbsp;with severel&nbsp;detail pages), where&nbsp;I choose my root object (from the main page) and than open&nbsp;the details page.&nbsp; Every time a detail is open, I do a &quot;BeginEdit&quot; and every time it is closed I do a &quot;ApplyEdit&quot; or &quot;CancelEdit&quot;, without executing Save() method.&nbsp; In my main page, there is a Confirm button (enabled by &quot;IsSavable&quot; property of the root object) and here there is the problem.&nbsp; </p>
<p>If&nbsp;I press Confirm button (that execute Save() method) how can I force ApplyEdit or CancelEdit in each open detail page before execute Save method?&nbsp;Is there a way to do it or do I need to loop through each open page, ask user if he want to save thus executing ApplyEdit or CancelEdit, and than save root object?</p>
<p>Enrico</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JonnyBee replied on Sunday, November 07, 2010</h2><p>Hi, </p>
<p>In an MDI application I would recommend to use BeginEdit/ApplyEdit/CancelEdit on the root object only.</p>
<p> There is no way to determine a sequence of how the form&#39;s are being edited and since the user calls Save on the root object - to me it is also the point of Cancel or Apply.</p>
<p>If you should call BeginEdit on the same object in 2 forms you are getting into trouble.</p>
<p>&nbsp;</p>
<p>&nbsp;</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Sunday, November 07, 2010</h2><p>Really, if you allow multiple windows to edit the same object graph, you shouldn&#39;t use n-level undo at all. As Jonny says, there&#39;s no way to predict the order in which anything will occur, so there&#39;s no way to keep any parent-child edit levels in sync.</p>
<p>So unless the <em>entire MDI form</em> represents one root object, it isn&#39;t clear to me how you could use the feature at all.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>idroesse replied on Monday, November 08, 2010</h2><p>Thanks guys for the help.&nbsp; Let me explain better..&nbsp; My mdi form reppresent only one root object (choosed from a combobox within it). Once a root object is selected I let my user open several detail window.&nbsp; For example, root object is a Customer and each detail is an invoice.&nbsp; User open two details (invoice 10/01 and invoce 10/02) and then modify description of each invoices.&nbsp; Now he can press Ok button (doing ApplyEdit()) or Cancel Button (doing CancelEdit()), but what if he press SaveButton (on MDI&nbsp;form)&nbsp;before close each window?&nbsp; I was wondering if it&#39;s correct to ask him what action do (accept or cancel) in each page,&nbsp; keeping in mind that I can easily build an ordered list of open windows, and so loop throught it...&nbsp; </p>
<p>Enrico</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>idroesse replied on Monday, November 08, 2010</h2><p>I forgot... each BeginEdit, ApplyEdit or CancelEdit is made in the root object</p>
<p>Enrico</p></div><div style='padding:0 15 3 15;background-color:lightgreen'><h2>RockfordLhotka replied on Monday, November 08, 2010</h2><p>Let me put this another way.</p>
<p>If more than one active window points to the same object graph (a root or any of its child objects) you will encounter issues.</p>
<p>N-level undo is designed to support <em>modal dialog windows</em> or single window displays. MDI implies several non-modal windows pointing to the same object graph, and in that case you really can&#39;t use n-level undo (no calling of BeginEdit/CancelEdit/ApplyEdit per-window).</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>idroesse replied on Monday, November 08, 2010</h2><p>Ok, now it&#39;s clear! It&#39;s monday... <img src="http://forums.lhotka.net/emoticons/emotion-20.gif" alt="Sleep" /></p>
<p>Thanks a lot, Enrico</p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
