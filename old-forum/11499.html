<html><header><title>Advice needed on custom type coercion</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Advice needed on custom type coercion</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/11499.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>hurcane posted on Monday, July 23, 2012</h2><p>I am evaluating the work needed to upgrade an app using CSLA.NET 3.0.x to CSLA 3.8.x or even 4.3.x.</p>
<p>Our app includes &quot;smart&quot; data classes (SmartBoolean, SmartDecimal, SmartString, etc.) that contain state and include BusinessBase in their inheritance chain.</p>
<p>Our typical property setters and getters include lines like &quot;return myBackingField.Value&quot; and &quot;myBackingField.Value = value&quot;.</p>
<p>In reviewing how the framework handles coercion with SmartDate, I see that conversions from the &quot;smart&quot; type to a DateTime will use the TypeConverter class for the SmartDate class. However, conversions from a DateTime to a SmartDate do not use the TypeConverter. The CoerceValue method has special code that results in using the existing SmartDate instance and updating the internal value.</p>
<p>I would like to have that same behavior for my &quot;smart&quot; classes. I would not want my property setter to create a new instance of my Smart class. Instead, I would prefer it to update the existing instance. I am having trouble with where I could implement this without changing the CSLA source code.</p>
<p>Am I going to have change the CSLA source to handle my custom types in the same fashion as the SmartDate?</p></div><div style='padding:0 15 3 15;background-color:lightgreen'><h2>JonnyBee replied on Monday, July 23, 2012</h2><p>Yes, you need to change the CSLA code to do that.&nbsp;</p>
<p>You may do this quite &quot;generic&quot; by using the ISmartField interrface (assuming your smart fields implement ISmartField).&nbsp;</p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
