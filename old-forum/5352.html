<html><header><title>Disable property based on another property value</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Disable property based on another property value</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/5352.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>jfreeman posted on Friday, September 05, 2008</h2><DIV class=ForumPostContentText id=ctl00_ctl01_bcr_ctl00___PostRepeater_ctl10_PostViewWrapper>
<P>Based on the newest version of the framework, is there a way to disable or prevent changes to a property based on the value of another property?&nbsp; For instance, if property 1 has the value of 2000, I do not want the user to be able to update property 2.&nbsp; Can this be handled in the BO or should the UI handle it?&nbsp; Thanks.</P>
<P>Jonathan</P></DIV></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Friday, September 05, 2008</h2>Yes, you can override CanWriteProperty to perform this kind of logic.<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>jfreeman replied on Friday, September 05, 2008</h2><P>I've not had to use the CanWriteProperty before.&nbsp; Can you give an example of how it would be used in this situation?&nbsp; Thanks.</P>
<P>Jonathan</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>triplea replied on Sunday, September 07, 2008</h2>Probably the 2 business rules way (as mentioned above) would be better since you could provide an error/warning which describes why a field should not be edited and prevent saving.<br>But overriding CanWriteProperty is fine. As an example, override CanWriteProperty and within it have something like:<br><br>switch (propertyName)<br>{<br>&nbsp;&nbsp;&nbsp; case "2": return !(this.1 == 2000);<br>}<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Biceman replied on Sunday, September 07, 2008</h2>I tackled this problem myself recently.&nbsp; My approach was to create a ReadOnly boolean property in the BO that I bound to my textbox's "enabled" property.&nbsp; In the "Set" code for the controlling property (the one you test =2000), I adjust the value of the ReadOnly property accordingly.<br><br>Using this approach, the user is not allowed to enter data.&nbsp; I prefer this to allowing them to enter data then having them receive an error message saying there are not allowed to enter data.<br><br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>rsbaker0 replied on Sunday, September 07, 2008</h2>You can also do this with&nbsp;a standard business rule, depending on what behavior you are looking for. The business rule would be broken if property 2 was changed while property 1&nbsp; has a value of 2000, and pass otherwise. (This would require that you know the original value of property 2, to allow the rule to be unbroken by putting the value back to the original value)</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JonnyBee replied on Monday, September 08, 2008</h2>I'd prefer to use the CanWriteProperty/CanReadProperty methods and then use the ReadWriteAuthorizationManager in CSLA on my WinForms. The RWAM will enable/disable/set readonly on UI Controls based on the result from CanWrite... and CanRead...<br><br>JonnyB<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>jfreeman replied on Friday, September 12, 2008</h2><P>Overriding the CanWriteProperty works when the value is static.&nbsp; So if property 1 is 2000, property 2 does get disabled using the override and the ReadWriteAuthorizationManager.&nbsp; However, when the user changes the value of property 1 to something besides 2000, they should then be able to update property 2.&nbsp; I would have to reset the RWAM everytime I change a field to make this work.&nbsp; Is there a better way to handle this situation.&nbsp; I hate to have to keep resetting the RWAM that much.&nbsp; Thanks.</P>
<P>Jonathan</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>jfreeman replied on Thursday, September 18, 2008</h2><P>Do I have to reset the ReadWriteAuthorizationManager when I have values that are dependent on other properties and those properties can be changed by the user?&nbsp; For instance:</P>
<P>Property 1 is 2000, property 2 gets disabled using the CanWriteProperty override and the ReadWriteAuthorizationManager.&nbsp; However, when the user changes the value of property 1 to something besides 2000, they should then be able to update property 2.&nbsp; To make this happen I would have to reset the ReadWriteAuthorizationManager right?</P>
<P>Jonathan</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Thursday, September 18, 2008</h2>Yes, you need to call the ResetAuthorization on the RWA component whenever the permissions may have changed.<br></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
