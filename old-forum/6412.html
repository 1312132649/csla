<html><header><title>CSLA For SilverLight - PropertyStatus enhancment suggestion</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>CSLA For SilverLight - PropertyStatus enhancment suggestion</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/6412.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>paupdb posted on Thursday, February 12, 2009</h2>Hi Rocky and Magenic guys<br><br>The PropertyStatus is cool, I'm using it quite extensively with great results.<br>However I have one niggle with it - that being that it cannot be collapsed when not in use.<br>If I set the PropertyStatus.Visibility to Collapsed, then the PropertyStatus actions aren't visible at all.<br><br>Now the reason I would like to be collapsed is that I have layered the PropertyStatus on top of input controls like TextBox, ComboBox etc.&nbsp; When the PropertyStatus has it's Visibility = Visible, then users cannot click on the control underneath the area the PropertyStatus occupies.<br><br>Good news is I have an easy fix that it would be cool to see go into CSLA 3.6.2:<br><br>In the PropertyStatus ctor:<br><font size="2" face="Courier New">public PropertyStatus()<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; : base()<br>&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; RelativeTargetPath = "Parent";<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; BrokenRules = new ObservableCollection&lt;BrokenRule&gt;();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; DefaultStyleKey = typeof(PropertyStatus);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; IsTabStop = false;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <b>Visibility = Visibility.Collapsed;</b></font><br><br>And then in the GoToState method, add appropriate Visibility settings:<br><font size="2" face="Courier New">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (_isBusy)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b> this.Visibility = Visibility.Visible;</b><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; VisualStateManager.GoToState(this, "Busy", useTransitions);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; else if (_isValid)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <b>this.Visibility = Visibility.Collapsed;</b><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; VisualStateManager.GoToState(this, "Valid", useTransitions);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; else<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <b>this.Visibility = Visibility.Visible;</b><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; VisualStateManager.GoToState(this, _worst.ToString(), useTransitions);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; _lastImage = (FrameworkElement)FindChild(this, string.Format("{0}Image", _worst.ToString().ToLower()));<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; EnablePopup(_lastImage);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</font><br><br>Let me know what you think.&nbsp; The above change works really well for me :)<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>davido replied on Friday, February 13, 2009</h2><P>Could you explain this a bit more please?</P>
<P>"then users cannot click on the control underneath the area the PropertyStatus occupies"</P>
<P>Don't you want them to be able to click on the control underneath so they can fix the problem?</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>paupdb replied on Friday, February 13, 2009</h2>The PropertyStatus control is transparent and 16 x 16 pixels in size by default.<br><br>When you layer it on top of a control - say a combobox with the PropertyStatus being right, top aligned - then user clicks hit the PropertyStatus instead of the combobox within that 16x16 area.<br><br>The user can still click the control anywhere else that the PropertyStatus doesn't cover, but the control appears "broken" to them when they click where the PropertyStatus is.<br><br>By collapsing the PropertyStatus my change enables the user click to hit the underlying control when the PropertyStatus is valid.&nbsp; <br>The current behaviour remains for cases where the PropertyStatus is invalid or busy.<br><br>To a user, when they can see the error or busy images, then not being able to click on the control underneath that area is OK - its only when the PropertyStatus is valid (transparent) that they come back with negative feedback about not being able to click the control in that area under the PropertyStatus.<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Friday, February 13, 2009</h2>Just curious, why would you layer the PropertyStatus on top of the edit control?&nbsp; <br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>paupdb replied on Friday, February 13, 2009</h2>Its a long story, but I am dynamically generating the controls that appear on certain pages and in these pages the spacing between controls is fairly limited as it is.&nbsp; <br>If the PropertyStatus was stacked on the end of each control, I end up losing a fair amount of screen real estate across a line - 16pixels * 5-6 controls a line.<br>Also when the PropertyStatus is stacked on the end and displays an icon, then it looks pretty bad without decent spacing to the next control on the line.<br>Additionally because of the limited spacing, it became harder for the user to tell which control the PropertyStatus referred to - whether it was the control to the left or right.<br><br>By having the error icon appear over the control - tucked into the top right corner - I save space whilst clearly highlighting the control at fault.<br><br>So yeah its aesthetics primarily.<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Friday, February 13, 2009</h2><P>My only concern with a change like this, is that it could mess up the UI layout for people who aren't layering the control over the top of an existing control.</P>
<P>I really wish Silverlight had the Hidden visibility, but it doesn't, and so there's always the risk of a collapsing control shifting the entire UI in some odd way.</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>paupdb replied on Friday, February 13, 2009</h2>You could add a property to the PropertyStatus that toggles the behaviour I added - e.g. bool Hidden.<br><br>That way if the default Hidden setting (e.g. false) is to behave as the current PropertyStatus does, all people in my situation would need to do is explicitly set Hidden to true.<br><br>Either that or open up the PropertyStatus for subclassing - make GoToState a protected virtual method.<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Saturday, February 14, 2009</h2><A href="http://www.lhotka.net/cslabugs/edit_bug.aspx?id=349">http://www.lhotka.net/cslabugs/edit_bug.aspx?id=349</A></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>justncase80 replied on Wednesday, March 03, 2010</h2><p>This might be worth discussing more.</p>
<p>The reason it&#39;s set to Hidden rather than Collapsed by default is because setting it to collapsed can affect layout. Meaning, if it&#39;s in a StackPanel (for example) when it&#39;s collapsed the things later in the stack will move. When the Collapsed control becomes visible your other controls would shift yet again.</p>
<p>If you put it in a Grid or Canvas where it can overlap other controls that&#39;s a different story, though I&#39;m not sure I would recommend doing that exactly. However if you wanted to actually change the visibility to collapsed there&#39;s another easy solution with the current control:</p>
<p>&nbsp;</p>
<p>&lt;csla:BusyAnimation Visibility=&quot;{Binding IsBusy, Converter={StaticResource booleanToVisibilityConverter}}&quot; /&gt;</p>
<p>&nbsp;</p>
<p>This will set it to collapsed when IsBusy is false.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>justncase80 replied on Wednesday, March 03, 2010</h2><p>Actually I believe in that Binding you have to set RelativeSource={RelativeSource self} as well...</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Wednesday, March 03, 2010</h2><p>Rocky does cover that, but personally I think it&#39;s a fine idea.&nbsp; Don&#39;t set Hidden&nbsp; unless you know what you&#39;re doing, basically.</p>
<p>I checked the bug though to see what ultimately came of this, but the issue tracker says no such bug.&nbsp; </p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Wednesday, March 03, 2010</h2><p>That bug was merged into another similar bug. Justin has the number.</p>
<p>But I don&#39;t think there&#39;s value to having PropertyStatus hard-code the ability to do this when it can be handled through binding. In fact, relying on binding means the flexibility is far greater than if we create one or two restrictive schemes.</p>
<p>My recommendation is to not act on the bugtracker item, since there&#39;s a very good solution as-is.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Wednesday, March 03, 2010</h2><p>Hmm, I must be confused about something then.&nbsp; Wouldn&#39;t be the first time.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Wednesday, March 03, 2010</h2><p>The bug was reported twice, and I merged the two reports.</p>
<p><a href="http://www.lhotka.net/cslabugs/edit_bug.aspx?id=230">http://www.lhotka.net/cslabugs/edit_bug.aspx?id=230</a></p>
<p>But it seems to me (now as it did then) to make little sense to have PropertyStatus hard-code some behavior when you can get the desired behavior through binding - along with other possible behaviors (such as making the control bigger/smaller, changing its appearance in other ways, etc).</p>
<p>In short, with Xaml I&#39;ve come to the conclusion that less is more - at least when it comes to controls. It is better to expose properties and let people creatively bind them, than to hard-code limited behaviors and then have people come back in a few weeks/months and ask for yet another hard-coded behavior to be added.</p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
