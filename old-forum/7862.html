<html><header><title>PropertyInfoManager Exception</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>PropertyInfoManager Exception</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/7862.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>decius posted on Friday, October 23, 2009</h2><P>I'm trying to figure out what could be causing this exception, but I don't understand why/how RegisterProperty is getting called to be causing this.&nbsp; I'm using Csla 3.8 beta....</P>
<P>Can not register property&nbsp;&lt;&lt;Object PropertyName&gt;&gt; after containing type &lt;&lt;Object ClassName&gt;&gt; has been instantiated</P>
<P>&nbsp;&nbsp; at Csla.Core.FieldManager.PropertyInfoManager.RegisterProperty[T](Type objectType, PropertyInfo`1 info) in C:\Projects\Local\csla3.8.0beta\cslacs\Csla\Core\FieldManager\PropertyInfoManager.cs:line 68<BR>&nbsp;&nbsp; at Csla.BusinessBase`1.RegisterProperty[P](PropertyInfo`1 info) in C:\Projects\Local\csla3.8.0beta\cslacs\Csla\BusinessBase.cs:line 422<BR>&nbsp;&nbsp; at Csla.BusinessBase`1.RegisterProperty[P](Expression`1 propertyLambdaExpression, String friendlyName) in C:\Projects\Local\csla3.8.0beta\cslacs\Csla\BusinessBase.cs:line 467<BR>&nbsp;&nbsp; at BinaryXmlBenchmark.Library.TestCrit..ctor() in C:\Projects\Local\BinaryXmlBenchmark\BinaryXmlBenchmark.Library.Server\TestCrit.cs:line 11<BR>&nbsp;&nbsp; at System.RuntimeType.CreateInstanceImpl(Boolean publicOnly, Boolean skipVisibilityChecks, Boolean fillCache)</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Friday, October 23, 2009</h2><P>This exception was added a while back (3.6.3?) to overcome a common bug people were encountering with RegisterProperty().</P>
<P>If you use the RegisterProperty() overload where you provide the containing type as the first parameter, you are very subject to copy-paste errors where the containing type isn't actually the right type.</P>
<P>I recommend avoiding that overload in all cases except CommandBase and CriteriaBase subclasses where you can't avoid it. Instead use the generic overload that infers the correct type.</P>
<P>In short - you have a RegisterProperty() call where you are providing the incorrect type as the first parameter and you need to fix that type.</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>decius replied on Friday, October 23, 2009</h2><P>That's what's odd, My rather simple class uses the lambda expression overload. </P>
<P>aw crap.... I just now saw my problem after I pasted this.... my property info isn't static. That's what I get for being in a hurry.&nbsp; Thanks for the help!</P><FONT color=#0000ff size=2><FONT color=#0000ff size=2>
<P>using</FONT></FONT><FONT size=2> System;</P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>
<P>using</FONT></FONT><FONT size=2> Csla;</P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>
<P>using</FONT></FONT><FONT size=2> Csla.Serialization;</P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>
<P>namespace</FONT></FONT><FONT size=2> BinaryXmlBenchmark.Library</P>
<P>{</P>
<P>[</FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>Serializable</FONT></FONT><FONT size=2>()]</P>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>public</FONT></FONT><FONT size=2> </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>class</FONT></FONT><FONT size=2> </FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>TestCrit</FONT></FONT><FONT size=2> : Csla.</FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>BusinessBase</FONT></FONT><FONT size=2>&lt;</FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>TestCrit</FONT></FONT><FONT size=2>&gt;</P>
<P>{</P>
<P></FONT><FONT color=#008000 size=2><FONT color=#008000 size=2>//register properties</P></FONT></FONT><FONT size=2>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>protected</FONT></FONT><FONT size=2> </FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>PropertyInfo</FONT></FONT><FONT size=2>&lt;</FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>int</FONT></FONT><FONT size=2>&gt; PacketAmountProperty = RegisterProperty&lt;</FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>int</FONT></FONT><FONT size=2>&gt;(c =&gt; c.PacketAmount, </FONT><FONT color=#a31515 size=2><FONT color=#a31515 size=2>"PacketAmount"</FONT></FONT><FONT size=2>);</P>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>public</FONT></FONT><FONT size=2> </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>int</FONT></FONT><FONT size=2> PacketAmount { </P>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>get</FONT></FONT><FONT size=2> { </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>return</FONT></FONT><FONT size=2> GetProperty(PacketAmountProperty); }</P>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>set</FONT></FONT><FONT size=2> { SetProperty(PacketAmountProperty, </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>value</FONT></FONT><FONT size=2>); }</P>
<P>}</P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>
<P>#if</FONT></FONT><FONT size=2> SILVERLIGHT </P></FONT><FONT color=#808080 size=2><FONT color=#808080 size=2>
<P>public TestCrit() { } </P></FONT></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>
<P>#else</P></FONT></FONT><FONT size=2>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>private</FONT></FONT><FONT size=2> TestCrit() { }</P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>
<P>#endif</P></FONT></FONT><FONT size=2>
<P>}</P>
<P>}</P></FONT></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
