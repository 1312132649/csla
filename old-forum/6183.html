<html><header><title>CSLA BO audit</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>CSLA BO audit</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/6183.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>kyle.l.watson@gmail.com posted on Friday, January 16, 2009</h2><P>Whats the easiest way to audit a BO without breaking the single responsibility rule? I was hoping for a very standardized way to do this.</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>whelzer replied on Saturday, January 17, 2009</h2>Easiest or best?&nbsp; What exactly are you trying to audit.&nbsp; Search this forum for "Auditing", there are 3 very good recent posts about Auditing, you've a few options when it comes to auditing...<br><br>We took (imho) the best approach and let our DB take of it.&nbsp; Your "Customer" object should be concerned solely with customer issues/behaviour.&nbsp; Auditing is a side issue (or is for us anyway).<br><br>We shadow our normal tables eg tblCustomers &amp; tblCustomersAudit - the "Audit" table has a few extra columns (Timestamp, user, etc).&nbsp; in _spCustomerUpdate - we merely update tblCustomers and insert to tblCustomersAudit.<br><br>We then have a fairly snazzy command oject that emails manangement of certain changes to certain properties and the above makes this straightforward.<br><br>Hope that helps.<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>kyle.l.watson@gmail.com replied on Monday, January 19, 2009</h2><P>Thanks, I definitely looked at some of the auditing threads which gives me a good idea of how to implement auditing. Thanks.</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>rsbaker0 replied on Sunday, January 18, 2009</h2><P>I opted for having all my BO's derive from a common base class, which then derives from BusinessBase&lt;T&gt;. </P>
<P>The common base class implements a virtual OnPropertyChanging() method (the equivalent of which may be in CSLA by now but was not in 2.1). My code generated properties call this in the property setter and pass in the original and new value of the property (as well as the property name). </P>
<P>This makes auditing easy without some of the space overhead of maintaining duplicate storage for every property (like some of the managed field implementations suggest). Only the changed values have storage overhead. </P></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
