<html><header><title>Mocking Business Rules</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Mocking Business Rules</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/11332.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>decius posted on Thursday, April 26, 2012</h2><p>I&#39;m planning to test some business rules, a pretty common task, but I&#39;m trying to become more open to behavior specification rather than state validation these days and am trying to approach it a little differently...</p>
<p>With the new rule subsystem and class based rules, I would have expected this to be quite easy to approach - just mock out the rule class, stub a few things, and voila. And while this almost seems to be the case, I run into the RuleContext arguement for Execute... If this arguement were to be an interface it would make much more sense to me in order to aid things like mocking csla rule classes.Can&#39;t assign expectations on the RuleContext arguement.</p>
<p>I can think of a couple wacky things I could do, like create a method on my rule class that does nothing more than call a method on a RuleContext and then mock that out. But that seems very hokey. </p>
<p>Am I crazy or am I right in thinking that the BusinessRule class does not lend itself well to behavior specification? Do most people just do state validation like I&#39;ve always done in the past? I&#39;m just interested to know what others think on this. Thanks for any input.</p>
<p>BTW, I&#39;m using Rhino mocks.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JonnyBee replied on Thursday, April 26, 2012</h2><p>Hi,</p>
<p>Take a look at Samples\Net\cs\RuleTutorial solution and the approach that this shows for unit tests. </p>
<p>No need for mocking - just test the Rule Class do what it should and write tests in a similar way no matter if the rule is sync or async.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>decius replied on Friday, April 27, 2012</h2><p>Cool, thanks for the help JonnyBee, you always have pointed me in the right direction. I&#39;ll check it out!</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JonnyBee replied on Sunday, April 29, 2012</h2><p>Hi, </p>
<p>I wrote a blog post on unit testing business rules, available here: </p>
<p><a href="http://jonnybekkum.wordpress.com/2012/04/29/unit-test-csla-4-businessrules/">http://jonnybekkum.wordpress.com/2012/04/29/unit-test-csla-4-businessrules/ </a></p>
<p>Hope this provide some insight to unit testing. </p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
