<html><header><title>Business rules for collections</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Business rules for collections</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/3416.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>rossl123 posted on Wednesday, August 22, 2007</h2>Can anyone advise me how I would implement rules based validation of a collection. I am working with a particular collection of objects at the moment that has a few  interesting properties that I would like to support, but I don't see a way of doing so with CSLA. Maybe I have fallen a bit behind the times with my version 1 implementation?<br><br>As an example of one of my problems consider a collection that has a minimum or maximum count condition, or a dynamic member type rule such as 'member must be of type...'. Would it be easy to implement properties similar to IsValid, or methods such as Validate() for BusinessBase objects, for a BusinessCollectionBase object? Would I have to implement my own subtype to do it?<br><br><br>Cheers<br>Ross<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Thursday, August 23, 2007</h2><P>This topic has been discussed a few times.</P>
<P>Data binding has no infrastructure for business rules on a collection, so there's no supported way to display any broken collection rules to the user. The intent is that rules will exists on objects in the collection, or on the object containing the collection.</P>
<P>Even something like "member must be of type..." has no data binding analog. The item in question must tell data binding whether it is happy or not - it really isn't the job of the collection. Additionally, in .NET 2.0 (and really in CSLA 1.x) collections are strongly typed, so this shouldn't be able to happen to start with.</P>
<P>If you really do have collection-level rules, I'd suggest having an editable root object that contains the collection. Then the parent form can be bound to that root object, and it can implement rules that run against the collection to do these checks. That way you have a mechanism by which you can bind properties of that parent object to the UI and display issues to the user as they occur.</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Miroslav Galajda replied on Monday, June 20, 2011</h2><p>Hi, I need to solve similar problem, but I&#39;ll describe it in more detail.<br /><br />You have most of the time the following type of objects (at least me):<br /><br />MyRoot<br />&nbsp; |<br />&nbsp; |--- IdProperty: int<br />&nbsp; |<br />&nbsp; |--- NameProperty: string<br />&nbsp; |<br />&nbsp; |--- CodeListTypeProperty: CodeListType<br /><br />IdProperty and NameProperty are a simple properties<br /><br />CodeListTypeProperty is a complex property of type CodeListType which is concrete type of business object for representing current value from concrete code list. And the values to choose from for editing depends on property for example NameProperty of MyRoot object.<br /><br />What you have to do to be able edit that CodeListTypeProperty?<br /><br />1. Create CodeListTypeList class for holding that list of CodeListType objects<br /><br />2. Add this list to the form as a datasource binding to for example ComboBox<br /><br />3. Connect SelectedValue property of ComboBox datasource to CodeListTypeProperty<br /><br /><br />Finally what I want is to show filtered list of values for CodeListTypeProperty while editing MyRoot. As I said above I need to show only certain values to user. The values that are dependent on NameProperty.<br /><br />How to deal with this type of requirement?</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JonnyBee replied on Tuesday, June 21, 2011</h2><p>Which type of UI is your application and which version of CSLA? </p>
<p>&nbsp;</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Miroslav Galajda replied on Tuesday, June 21, 2011</h2><p>I&#39;m using WinForms and ASP.NET on CSLA 4.1.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JonnyBee replied on Wednesday, June 22, 2011</h2><p>In the CSLA style (business object thinking) you should NOT have multiple objects owning the same instance. </p>
<p>Rocky describes this in the new CSLA 4 - 02 Objects ebook with Containment or Using Relationships.</p>
<p>So, I&#39;d prefer to have:</p>
<p>1: MyRoot should have a data value property for the selected objects &quot;key&quot;.&nbsp; </p>
<p>2. A CodeList that hold the possible items. </p>
<p>3 Your form need s at least 2 binding sources - one for the items in the combobox and one for MyRoot</p>
<p>4. The UI should hold a &quot;FilteredBindingList&quot; of CodeList to bind to the ComboBox as available items. </p>
<p>the filtered list may be used to set a filter and make only a subset of items from the VodeList available in the ComboBox.</p>
<p>Read <a href="http://windowsclient.net/Samples/Go%20To%20Market/Data%20Binding/DataBinding%20FAQ.doc">DataBinding FAQ</a> on Comboc DisplayMemer and ValueMember. </p>
<p>The value in ValueMember will typically be writtten to you BO by DataBiinding the SelectedValue to yor &lt;bo&gt;.DataValueProperty.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Miroslav Galajda replied on Wednesday, June 22, 2011</h2><p>This actually how I&#39;ve done it and there is also the problem what I see.</p>
<p>You put &quot;FilteredBindingList&quot; as binding source for ComboBox but you have to put the logic to the UI, that filtering condition depends on MyRoot.</p>
<p>This is what I&#39;m trying to solve. That&#39;s why I&#39;m asking here how to encapsulate that logic, so that I could use that dependency with every use of MyRoot object.</p>
<p>This has to be by someone already solved. This is very practical thing.</p>
<p>That&#39;s why I asked here for about business rules on collections.</p>
<p>Thanks.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Miroslav Galajda replied on Thursday, June 23, 2011</h2><p>Any suggestions, please?</p>
<p>What I&#39;m trying to discover, is how to maintain dependency between property of one object and a collection of another object.</p>
<p>For example dependency between property P1 of business object A and a collection C, which is used as list of valid values for property P2 of business object A where list of valid values depends on the value of P1. So in short, P1 influences the list of values in C which is the list of valid values for P2.</p>
<p>Thanks</p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
