<html><header><title>CSLA 4 - Preview:  Problem Deserializing</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>CSLA 4 - Preview:  Problem Deserializing</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/8823.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>Curelom posted on Tuesday, April 20, 2010</h2><p>I&#39;m serializing a BusinessList in CSLA4 preview as follows</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; IsolatedStorageFile isoStore = IsolatedStorageFile.GetStore(IsolatedStorageScope.User | IsolatedStorageScope.Assembly, null, null);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; IsolatedStorageFileStream&nbsp; fs = isoStore.CreateFile(&quot;Commitment.dat&quot;);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; System.Runtime.Serialization.Formatters.Binary.BinaryFormatter b = new System.Runtime.Serialization.Formatters.Binary.BinaryFormatter();<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; b.Serialize(fs, _skuForecastList);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; fs.Close();</p>
<p>I then try to deserialize it and I get an Index was outside&nbsp; the bounds of the array and a Message &quot;One or more properties are not registered for this type.</p>
<p>I&#39;ve backed through the code and it is erroring in the GetFieldData of the FieldDataManager.&nbsp; The property info object being passed in is showing an index of -1.</p>
<p>This property is being registered as so</p>
<p>private static PropertyInfo&lt;SmartDate&gt; WeekStartDateProperty = RegisterProperty(new PropertyInfo&lt;SmartDate&gt;(&quot;WeekStartDate&quot;, &quot;Week Start Date&quot;, new SmartDate(DateTime.Today)));</p>
<p>Could this be related to this issue?</p>
<p><a href="http://forums.lhotka.net/forums/p/6768/33291.aspx#33291">http://forums.lhotka.net/forums/p/6768/33291.aspx#33291</a></p></div><div style='padding:0 15 3 15;background-color:lightgreen'><h2>Curelom replied on Tuesday, April 20, 2010</h2><p>Nevermind.&nbsp; I tried this using the CSLA MobileFormatter and it works perfect.</p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
