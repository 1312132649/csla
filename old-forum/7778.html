<html><header><title>Csla 3.8 DateTime Issue with Data Portal</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Csla 3.8 DateTime Issue with Data Portal</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/7778.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>m-s posted on Tuesday, October 13, 2009</h2>We are running csla version 3.8 and are experiencing some issues with DateTime getting changed once the object gets to the dataportal. A date time is set at the creation of the object on the client side (the client is eastern time) and then once the object gets to the server side it is changed to central time. Is there some conversion that csla is doing behind the scenes on a date time on its trips to the data portal and back? Has anyone experienced this before?<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Tuesday, October 13, 2009</h2><P>I assume this behavior isn't new in 3.8? The data portal hasn't changed from 3.7 (or earlier).</P>
<P>With that assumption, the problem of date values crossing timezone boundaries is a widely known issue within .NET, and if you search the web you can find some good information on the issue and possible solutions.</P>
<P>One thing to consider, is that Microsoft recently (in .NET 3.5?) added a whole new datetime type to deal with timezones - or at least to help deal with them. </P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>m-s replied on Tuesday, October 13, 2009</h2>It could be a .Net issue. The reason I suspected something with the data portal, is because I'm running 3 tier on my dev machine (physically central time) with my time zone set to eastern and the hops across the local data portal are causing a change. Will the woes of computers and dates/times ever end? <img src="/emoticons/emotion-5.gif" alt="Wink [;)]" /><br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Tuesday, October 13, 2009</h2><P>Ultimately the data portal uses the BinaryFormatter or NDCS to serialize your data values. So your DateTime value is serialized into some format for transport over the wire. I don't know what format they serialize into - it could be a numeric or string representation, and is probably different depending on the serializer that's used.</P>
<P>That serialized representation is then deserialized back into a DateTime value on the server.</P>
<P>If the client and server have different timezones, the value can be deserialized into a "different value" because the serialization and deserialization aren't symmetric due to the context.</P>
<P>As I say, there are numerous blog posts and other information out there that discuss this issue in substantial detail. And the specifics are different with different serializers, etc - which means the solutions may also vary.</P></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
