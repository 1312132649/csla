<html><header><title>brokenrules in constructor</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>brokenrules in constructor</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/1069.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>yh_ink posted on Tuesday, August 29, 2006</h2><P>Hi,</P>
<P>i need to place a broken rule in a constructor which would set all rules which i set with that class&nbsp;to true when my object is initialised.</P>
<P>How do i set in a constructor????</P>
<P>i would like to know how to do this...would anyone show me an example for better understanding...</P>
<P>i want my class to control brokenrules and not the UI....</P>
<P>thanks</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>yh_ink replied on Wednesday, August 30, 2006</h2><P>anyone please let me know about this</P>
<P>&nbsp;</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Wednesday, August 30, 2006</h2>I'm not sure I follow what you want to do.. <br><br>If you're using Csla 2.x you usually override AddBusinessRules and that is where your rules are defined.&nbsp; Is there a reason you want to add rules in the constructor?<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>yh_ink replied on Wednesday, August 30, 2006</h2><P>What i want to do is when the object is instantiated first i want to set all the broken rules to true by default.Do we need to set the broken rules in the business property region only..</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Wednesday, August 30, 2006</h2>Ahh ok.<br><br>Just override AddBusinessRules, this will setup the rules for your object.<br><br>Make sure your property setters follow this format:<br><br>public string MyString {<br>&nbsp;&nbsp;&nbsp;&nbsp; get {<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;  CanReadProperty();<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp; return myString;<br>&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp;&nbsp; set {<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; CanWriteProperty();<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; value = value ?? "";<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if ( value != myString ) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; myString = value;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; PropertyHasChanged(); // This will trigger rules<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; }<br>}<br><br>Then you have two options; in your DataPortal_Create, set the MyString value through the property and NOT the private field.&nbsp; Do this for each property. <br><br>Option 2 is to set all the values via the FIELDS, and just before the end of the DataPortal_Create, call ValidationRules.CheckRules();<br><br>HTH<br>Andy<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JoeFallon1 replied on Wednesday, August 30, 2006</h2><P>I like Option 2 myself.</P>
<P>It is what Rocky outlines in the book too. (IIRC.)</P>
<P>Note: this will run all of your rules - they may not all be broken though.</P>
<P>Perhaps some of your Default values that you initialize the BO with are acceptable to your rules.</P>
<P>So the rule will run but not break. That is fine and normal. I don't see why you would want them all to actually be broken to start with - that would add a lot of complexity for no benefit.</P>
<P>Joe</P>
<P>&nbsp;</P></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
