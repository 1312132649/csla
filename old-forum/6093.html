<html><header><title>LINQ multiple datacontexts?</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>LINQ multiple datacontexts?</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/6093.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>greengumby posted on Tuesday, January 06, 2009</h2><P>Just been reading a few blogs on best LINQ to SQL practices and would like to get some CSLA thoughts on this.</P>
<P>A method of using LINQ to SQL is to create a new DataContext for each of your Use Cases.</P>
<P><BR>As the CSLA ContextManager GetManager() returns a datacontext that is based on the connectionstring/databasename wont this cause problems <BR>should a child fetch/update refer to another datacontext. Im thinking the ContextManager will try and cast the datacontext as the incorrect type.</P>
<P><BR>Maybe this scenario should never happen but Im new to this&nbsp; :)</P>
<P>Thanks<BR>Jeremy</P>
<P>&nbsp;</P>
<P>&nbsp;</P>
<P>&nbsp;</P>
<P>&nbsp;</P>
<P>&nbsp;</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Wednesday, January 07, 2009</h2>If you're using the same connection string or database name across all use cases, that would be a problem.&nbsp; But if you use the database name route, you could have a connection string for each use case.&nbsp; Of course I'm not sure that's very practice though.<br><br>I'm not sure about the value of having a DataContext per use case; I would think some use cases would end up using at least some of the same tables, and then if you change the schema of one of these tables you'll need to update multiple data contexts... not something I would think is very maintainable.<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>greengumby replied on Wednesday, January 07, 2009</h2><P><BLOCKQUOTE><div><img src="/Themes/default/images/icon-quote.gif"> <strong>ajj3085:</strong></div><div><BR>I'm not sure about the value of having a DataContext per use case; I would think some use cases would end up using at least some of the same tables, and then if you change the schema of one of these tables you'll need to update multiple data contexts... not something I would think is very maintainable.<BR></div></BLOCKQUOTE></P>
<P>I completely agree with you here :)</P>
<P>So how would you suggest on creating/designing the L2S dbml files ?</P>
<P>I don't think sticking all tables/views/sp in one DataContext is what MS had intended ;)</P>
<P>Cheers</P>
<P>&nbsp;</P>
<P>&nbsp;</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Thursday, January 08, 2009</h2>What's wrong with having all views, tables and sps in one data context?&nbsp; That's how I've been using L2S all along.&nbsp; To me, the datacontext represents a database.. so it should provide access to all of those things.<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>greengumby replied on Thursday, January 08, 2009</h2><P>Im developing a Web application and thought the overhead of instantiating/disposing a datacontext with&nbsp; &gt; 100 tables would of been resource intensive?</P>
<P>Maybe im wrong here I will try and get some time too create a little test.</P>
<P>&nbsp;</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Friday, January 09, 2009</h2>I don't see why it would impact performance.&nbsp; The DataContext subclass won't have any fields, so there's nothing to initialize when it's new'ed up.&nbsp; There would be the same overhead whether the DC has 1 table or 100, I would think.&nbsp; I could be missing something, but looking at the code that's how it seems.. unless the DataContext does reflection it it's constructor... but that would be a horrid design.<br></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
