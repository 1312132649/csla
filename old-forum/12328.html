<html><header><title>TransactionScope enhancement request.</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>TransactionScope enhancement request.</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/12328.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>rxelizondo posted on Tuesday, January 21, 2014</h2><p>This probably has been discussed before but here is my go at it&hellip;</p>
<p>When using transaction scope, the CSLA creates an instance of the TransactionScope class using its default constructor which in turn uses a default timeout value. The problem with the default timeout value is that is an arbitrary value which sometimes is good enough and sometimes is not.</p>
<p>This creates nondeterministic application behavior since an identical operation may sometimes succeed and sometimes fail depending on unpredictable factors such as server load or network traffic. For example, if the server load is low the operation will succeed but if the server load is high the exact same operation will fail because TransactionScope times out. Unfortunately, there is nothing we can do about this because the CSLA does not allow the timeout to be adjusted.</p>
<p>In order to make the transaction scope feature truly useful the CSLA should either default the timeout to the max value possible and let connection or command itself time out (have not tried this but my guess is that those two should be able to handle timeouts) or add functionality to the TransactionalAttribute so that we can specify our own timeout.</p>
<p>Is this a sensible request or am I approaching this all wrong?</p>
<p>Thanks.</p></div><div style='padding:0 15 3 15;background-color:lightgreen'><h2>sergeyb replied on Tuesday, January 21, 2014</h2><p>Transaction attribute already supports timeout with along with isolation level. &nbsp;You can also set defaults for both globally in web.config / app.config files.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>rxelizondo replied on Tuesday, January 21, 2014</h2><p>Thanks sergeyb!</p>
<p>This is great news, I guess I should have looked at the latest CSLA version before I started posting. We are using version 4.2.2.0 and unless I am mistaken that particular version does not include such feature.</p>
<p>Thanks.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>sergeyb replied on Tuesday, January 21, 2014</h2><p>Here you go</p>
<pre><span>&lt;</span><span>add</span><span>&nbsp;</span><span>key</span><span>=</span>&quot;<span>CslaDefaultTransactionIsolationLevel</span>&quot;<span>&nbsp;</span><span>value</span><span>=</span>&quot;<span>ReadCommitted</span>&quot;<span>/&gt;</span>
<span>&lt;</span><span>add</span><span>&nbsp;</span><span>key</span><span>=</span>&quot;<span>CslaDefaultTransactionTimeoutInSeconds</span>&quot;<span>&nbsp;</span><span>value</span><span>=</span>&quot;<span>300</span>&quot;<span>/&gt;</span></pre>
<pre><span><br /></span></pre>
<pre><span>You can also specify both on Transactional attribute itself.</span></pre>
<pre><span>Looking at the notes, it is in 4.5.  You can probably port it over to older version, but I do not think there are any breaking changes from 4.2 to 4.5</span></pre>
<pre><span><br /></span></pre></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>tiago replied on Monday, May 05, 2014</h2><p>There are a lot of *.config settings. I guess a quick reference is needed...</p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
