<html><header><title>More issues on Inheritance and Generics</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>More issues on Inheritance and Generics</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/3203.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>triplea posted on Monday, July 16, 2007</h2><P>I am trying to extend the CSLA base classes in one of my projects and came to a bit of a problem. I tried to use the following syntax (found here: <A HREF="/forums/thread/10972.aspx">http://forums.lhotka.net/forums/thread/10972.aspx</A>):<BR><BR><FONT face="Courier New" size=2>public abstract class MyBase&lt;T&gt;</FONT><FONT face="Courier New" size=2>: Csla.BusinessBase&lt;T&gt; where T : MyBase&lt;T&gt;</FONT><FONT face="Courier New" size=2>{ ... }<BR></FONT><FONT face="Courier New" size=2>public class&nbsp;MyClass : MyBase&lt;MyClass&gt;</FONT><FONT face="Courier New" size=2>{ ... }</FONT></P>
<P>In this class I have a method that looks like this: <FONT color=#0000ff size=2>public</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>abstract</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>int</FONT><FONT size=2> GetPropertyMaxLength(</FONT><FONT color=#0000ff size=2>string</FONT><FONT size=2> propertyName);</FONT></P>
<P><FONT size=2><FONT size=3>Now I am calling this from my UI (from within a textbox to be more specific) but the problem is that I can't upcast the datasource of my control because a type is needed. So what I am trying to do is this:</FONT></FONT></P><FONT size=2><FONT size=2>
<P>Library.</FONT><FONT color=#2b91af size=2>MyBase</FONT><FONT size=2> obj = ((</FONT><FONT color=#2b91af size=2>BindingSource</FONT><FONT size=2>)</FONT><FONT color=#0000ff size=2>this</FONT><FONT size=2>.DataBindings[0].DataSource).DataSource </FONT><FONT color=#0000ff size=2>as</FONT><FONT size=2> Library.</FONT><FONT color=#2b91af size=2>MyBase</FONT><FONT size=2>;</FONT></P>
<P><FONT size=2><FONT size=3>Obviously this does not compile and although I tried a number of ways, I could not get this to work.I ended extending Csla.BusinessBase as follows:</FONT></FONT></P><FONT color=#0000ff size=2>
<P>public</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>abstract</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>class</FONT><FONT size=2> </FONT><FONT color=#2b91af size=2>MyBase</FONT><FONT size=2> : </FONT><FONT color=#2b91af size=2>BusinessBase</FONT><FONT size=2>&lt;</FONT><FONT color=#2b91af size=2>MyBase</FONT><FONT size=2>&gt;<BR><FONT color=#0000ff>public</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>class</FONT><FONT size=2> </FONT><FONT color=#2b91af size=2>MyClass</FONT><FONT size=2> : </FONT><FONT color=#2b91af size=2>MyBase</FONT></P></FONT>
<P><FONT size=3>It works now but this is ugly... I can't help thinking I am doing somethnig obviously wrong but just can't spot it... Any ideas?</FONT><FONT size=2></P></FONT></FONT></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JoeFallon1 replied on Monday, July 16, 2007</h2><P>I feel your pain.</P>
<P>I think the key is to realize that generic classes are not really polymorphic.</P>
<P>So it is best to create an Interface in your project which all of your Base classes will use.</P>
<P>e.g.</P><FONT size=2>
<P></FONT><FONT color=#0000ff size=2>Public</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>Interface</FONT><FONT size=2> IMyCompanyBusinessObject<BR>&nbsp; </FONT><FONT color=#0000ff size=2>Inherits</FONT><FONT size=2> IEditableBusinessObject<BR>&nbsp; </FONT><FONT color=#0000ff size=2>ReadOnly</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>Property</FONT><FONT size=2> BrokenRulesCollection() </FONT><FONT color=#0000ff size=2>As</FONT><FONT size=2> Validation.BrokenRulesCollection<BR>&nbsp; </FONT><FONT color=#0000ff size=2>Property</FONT><FONT size=2> Table() </FONT><FONT color=#0000ff size=2>As</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>String<BR>&nbsp; </FONT><FONT color=#0000ff size=2>Property</FONT><FONT size=2> IsOwner() </FONT><FONT color=#0000ff size=2>As</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>Boolean<BR>&nbsp; </FONT><FONT color=#0000ff size=2>ReadOnly</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>Property</FONT><FONT size=2> OwnedObjects() </FONT><FONT color=#0000ff size=2>As</FONT><FONT size=2> IList<BR>&nbsp; </FONT><FONT color=#0000ff size=2>ReadOnly</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>Property</FONT><FONT size=2> OwnedCollections() </FONT><FONT color=#0000ff size=2>As</FONT><FONT size=2> IList<BR></FONT><FONT color=#0000ff size=2>End</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>Interface</FONT></P>
<P><FONT color=#0000ff size=2><FONT color=#000000>Then you can cast to your Interface and use the property or method.</FONT></FONT></P>
<P><FONT color=#0000ff size=2><FONT color=#000000>Joe</FONT></P></FONT></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>triplea replied on Monday, July 16, 2007</h2>Thanks, I tried that but things are still a bit confusing <img src="/emoticons/emotion-6.gif" alt="Sad [:(]" />... There are 2 points I was not sure:<br><br>1. In my previous example what would I cast my object to? So this statement:<br><font size="2"><font size="2">Library.</font><font color="#2b91af" size="2">MyBase</font><font size="2"> obj = ((</font><font color="#2b91af" size="2">BindingSource</font><font size="2">)</font><font color="#0000ff" size="2">this</font><font size="2">.DataBindings[0].DataSource).DataSource </font><font color="#0000ff" size="2">as</font><font size="2"> Library.</font><font color="#2b91af" size="2">MyBase</font><font size="2">;</font></font><br>would become what?<br><font size="2"><font size="2"></font><font color="#2b91af" size="2">IMyCompanyBusinessObjectBase</font><font size="2"> obj = ((</font><font color="#2b91af" size="2">BindingSource</font><font size="2">)</font><font color="#0000ff" size="2">this</font><font size="2">.DataBindings[0].DataSource).DataSource </font><font color="#0000ff" size="2">as</font><font size="2"> <b><font color="#ff0000">???</font></b></font><font color="#2b91af" size="2"></font><font size="2">;</font></font><br>2. I tried out something like this (out of frustration)<br><font size="2"><font color="#2b91af" size="2">IMyCompanyBusinessObjectBase</font><font size="2"> obj = ((</font><font color="#2b91af" size="2">BindingSource</font><font size="2">)</font><font color="#0000ff" size="2">this</font><font size="2">.DataBindings[0].DataSource).DataSource </font><font color="#0000ff" size="2">as </font></font><font size="2"><font color="#2b91af" size="2">IMyCompanyBusinessObjectBase</font></font><br><br>Although this compiled, the compiler complained about the absence of the method CanWriteProperty() for obj. I thought of adding it in the interface but then it seems I start hiding most other cool features that BusinessBase and other base classes have to offer...<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JoeFallon1 replied on Tuesday, July 17, 2007</h2><P>I would add any Property you need to the Interface and then just "forward the call" in the implementation of the interface to the base method.</P>
<P>Joe</P>
<P>&nbsp;</P></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
