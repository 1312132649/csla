<html><header><title>BusinessBase.OnDeserializedHandler negates lazy loading of validation rules</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>BusinessBase.OnDeserializedHandler negates lazy loading of validation rules</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/2805.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>tetranz posted on Tuesday, May 01, 2007</h2>Hi all<br><br>I'm about to start a new, significantly sized (at least for me) project in CSLA. Before getting into it I thought I better read though most of the book again to refresh my understanding. I never <i>really</i> read the version 2 book properly before.<br><br>Rocky, this is probably being overly picky but in Csla.Core.BusinessBase, lazy loading is used in the ValidationRules method to avoid overhead if an object doesn't use validation rules. That sounds good but then in OnDeserializedHandler we do a ValidationRules.SetTarget(this) which would create _validationRules no matter what.<br><br>I think OnDeserializedHandler should only do the validation rules stuff if _validationRules != null.<br><br>Cheers<br>Ross<br><br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Tuesday, May 01, 2007</h2><P>The purpose of the property isn't really lazy loading, it is to defer creation of the object until after the main business object is created. OK, so that's technically lazy loading... <img src="/emoticons/emotion-1.gif" alt="Smile [:)]" /></P>
<P>But the point is this: a ValidationRules object will <EM>always</EM> get created. Look through BusinessBase and you'll see it used all over the place. If you avoid all the places it is called, you won't have a functioning business object.</P>
<P>Odds are that you implement AddBusinessRules, which also triggers creation of the object. Even if you don't, you probably call PropertyHasChanged(), whcih triggers it.</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>tetranz replied on Tuesday, May 01, 2007</h2>Thanks, that makes sense. I was taking the C# book too literally on page 123 <img src="/emoticons/emotion-1.gif" alt="Smile [:)]" /><br><br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Tuesday, May 01, 2007</h2>Realistically I could (should?) probably just remove the lazy loading in that case, because I'm not sure it gains anything ever...</div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
