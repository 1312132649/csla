<html><header><title>Create() and Fetch() routing to Create(Object) and Fetch(Object)</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Create() and Fetch() routing to Create(Object) and Fetch(Object)</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/711.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>tsmo posted on Monday, July 24, 2006</h2>Is it a bug or a design decision that when you try to call DataPortal.Create() and DataPortal.Fetch() you end up actually being routed to DataPortal.Create(Object) and DataPortal.Fetch(Object)?<br><br>I was able to fix this by making the following changes to MethodCaller.cs.&nbsp; Your milage may vary, it's not as pretty as it could be, but it works for my usage patterns.&nbsp; Anyway:<br><br>line 62, insert:<br><br>if (parameters.Length == 1 &amp;&amp; parameters[0] == null)<br>&nbsp;&nbsp;&nbsp; parameters = Type.EmptyTypes;<br><br>line 90-91, replace:<br><br>if (item == null)<br>&nbsp;&nbsp;&nbsp; types.Add(typeof(object));<br><br>with<br><br>if (item == null)<br>&nbsp;&nbsp;&nbsp; continue;<br><br>line 99, replace: <br><br>result = FindMethod(objectType, method, types.ToArray());<br><br>with<br><br>if (types.Count &gt; 0)<br>&nbsp;&nbsp;&nbsp; result = FindMethod(objectType, method, types.ToArray());<br><br>line 104, replace:<br><br>result = FindMethod(objectType, method, parameters.Length);<br><br>with<br><br>result = FindMethod(objectType, method, types.Count);<br><br>Thanks,<br>tsmo<br><br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Monday, July 24, 2006</h2>It is by design (sort of).<br><br>If you look in the book you'll see that the implementation there is different from the current implementation. When I updated the code to allow DataPortal.Fetch&lt;T&gt;(), I did so in a way that minimized breaking changes on existing code. Unfortunately this isn't really ideal, because it means that such calls route to DataPortal_XYZ(object) rather than DataPortal_XYZ().<br><br>The fix isn't actually in MethodCaller btw, but rather in the data portal itself, where it forces at least Nothing/null to be passed as a parameter. What SHOULD happen is that literally nothing should be passed (not null or Nothing, but nothing) <img src="/emoticons/emotion-2.gif" alt="Big Smile [:D]" /><br><br>That would still require a fix to MethodCaller, since it hasn't been tested for the case where no parameters are passed at all - since that can't actually happen at the moment... <br><br>The thing is, I can't make this change without breaking potentially unknown amounts of existing code. <img src="/emoticons/emotion-6.gif" alt="Sad [:(]" />&nbsp; In any case, it isn't the kind of thing that can be done in a 2.0.x release, as those are bug-fix releases.<br><br>I am thinking about making this change to 2.1. But I hesitate, because a breaking change of this magnitude is non-trivial. Many (most?) people would have to touch virtually every root class if I make this change - because it would mean the normal call to DataPortal.Create() would route to DataPortal_Create() instead of DataPortal_Create(object).<br><br>Very tricky...<br></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
