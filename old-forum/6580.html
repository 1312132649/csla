<html><header><title>Is it wise to bind to Enabled or other non-data Control properties?</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Is it wise to bind to Enabled or other non-data Control properties?</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/6580.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>rsbaker0 posted on Sunday, March 08, 2009</h2><P>I was working through some issues today in our application where certain controls on a form are enabled or disabled based on some combination of properties in the bound data. </P>
<P>I started to put this code in the directly UI, but immediately found it to be rediculously tedious. This was mainly because properties aren't typically posted back to the bound object until you tab out of a field. Ugh.</P>
<P>Then it occured to me I had seen previous references here to binding to the IsValid or IsSavable properties, and it turned out I could implement quite simple properties and just bind them to the Enabled property of the corresponding controls. </P>
<P>Are there any gotchas to doing this? It seems to work quite well and requires much less (and non-control specific) code.</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Sunday, March 08, 2009</h2>It is absolutely fine to do that sort of binding. The only catch is that the IsXYZ properties are marked as non-bindable, so you need some intermediate object to expose them as bindable values (or use code-behind triggered off PropertyChanged) - but you've presumably already got that solved.</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>SonOfPirate replied on Tuesday, March 10, 2009</h2><P>Yea, typically Enabled will be based on the current user's authorization or something similar but it is itself a UI property.&nbsp; The same can be said for the Visible property on a control.</P>
<P>If you are concerned about mixing UI and business logic, I would caution you about exposing additional properties just for the UI.&nbsp; For instance, does Enabled really make sense in another context, say a WCF service?&nbsp; If so, go for it; otherwise, it may be that this logic is Presentation logic and not really business logic.&nbsp; If that is the case, then I was suggest that it belongs in your code-behind, control or some other UI element.</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JonnyBee replied on Monday, March 16, 2009</h2>Hi, <br><br>From my experience I tend to databind only the data properties (the sequence of updates/events can be hard to debug). <br><br>Basically - whet you want to do is exactly what the ReadWriteAuthorization extender does. This extender calls the CanReadProperty and CanWriteProperty on your BO. By default the BO will call the AuthorizationEngine but you can also override the Can... methods. That way your BO will also protect iteself from allowing a UI programmer to write properties that should not be written to.<br><br>So in your BO:<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; public override bool CanWriteProperty(string propertyName)<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; if (!base.CanWriteProperty(propertyName)) return false;<br><br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; if (ReadProperty("somePropertyName") == "someValue")<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // make additional tests <br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return false;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }<br><br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; return true;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }<br><br><br>And in your UI use the BindingSource.CurrentItemChanged event: <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; private void rootBindingSource_CurrentItemChanged(object sender, EventArgs e)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; readWriteAuthorization1.ResetControlAuthorization();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br><br><br>or you could also use this method:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; someUIcontrol.Enabled = bo.CanWriteProperty(someUIControl.DataBindings["Text"].PropertyName);<br><br>/jonny <br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>rsbaker0 replied on Tuesday, March 17, 2009</h2><P><BLOCKQUOTE><div><img src="/Themes/default/images/icon-quote.gif"> <strong>JonnyBee:</strong></div><div>Hi, <BR><BR>From my experience I tend to databind only the data properties (the sequence of updates/events can be hard to debug). <BR><BR>Basically - whet you want to do is exactly what the ReadWriteAuthorization extender does. This extender calls the CanReadProperty and CanWriteProperty on your BO. By default the BO will call the AuthorizationEngine but you can also override the Can... methods. That way your BO will also protect iteself from allowing a UI programmer to write properties that should not be written to.<BR><BR></div></BLOCKQUOTE></P>
<P>In my particular use case,&nbsp;writability is more related to the state of the object than authorization, although you could certainly retask CanWriteProperty for this purpose.</P>
<P>I have some issues with both the ReadWriteAuthorization control (although I am working on my own version of it) because it ends up disabling controls rather than setting them read only because the ReadOnly property isn't in the expected location in DevExpress controls. </P>
<P>Also, the bindings will respond almost instantly to data changes in the object without any additional code required in the user interface. With the extender control, I think you have to manually call ResetControlAuthorization -- and know which control events in the UI require doing this -- whereas a binding to Enabled works automagically. </P></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
