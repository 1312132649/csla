<html><header><title>WinRT factory method example using async/await</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>WinRT factory method example using async/await</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/11455.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>TSF posted on Thursday, July 05, 2012</h2><p>Could someone provide an example of where the async/await capabilities fit into an object&#39;s public factory methods in WinRT?&nbsp;&nbsp; From what I have read, I can still do it the old way:</p>
<p style="padding-left:30px;">public static void BeginFetchMyList(EventHandler&lt;DataPortalResult&lt;MyInfoList&gt;&gt; callback)<br />{<br />&nbsp; var portal = new DataPortal&lt;MyInfoList&gt;();<br />&nbsp; portal.FetchCompleted += callback;<br />&nbsp; portal.BeginFetch();<br />}</p>
<p>But I&#39;d like to take advantage of the async/await features in v4.5.&nbsp; I did see a recent thread about using async in the DP_XYZ method, but not sure how that fits into the public factory methods.&nbsp; Thanks.</p></div><div style='padding:0 15 3 15;background-color:lightgreen'><h2>RockfordLhotka replied on Thursday, July 05, 2012</h2><p>Yes, the old way continues to work (backward compatibility is important).</p>
<p>The new way is relatively straightforward, and is in the new cslafact snippet.</p>
<p>public static async Task&lt;MyInfoList&gt; FetchMyListAsync()<br />{<br />&nbsp; return await DataPortal.FetchAsync&lt;MyInfoList&gt;();<br />}</p>
<p>Fwiw, there&#39;s a static helper for the old way too, so your existing&nbsp;code could be:</p>
<p>public static void BeginFetchMyList(EventHandler&lt;DataPortalResult&lt;MyInfoList&gt;&gt; callback)<br />{<br />&nbsp; DataPortal.BeginFetch&lt;MyInfoList&gt;(callback);<br />}</p>
<p>This new async/await support is in the current pre-release, so you can use this now. The async/await support for DataPortal_XYZ will be in the next pre-release (soon).</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>TSF replied on Thursday, July 05, 2012</h2><p>Thank you for the example.&nbsp; So does my DP_XYZ methods also need to include the await keyword when executing a DAL method?&nbsp; Or at that point, since its already being executed asyncronously can I leave that to be the same as I have always done?</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Friday, July 06, 2012</h2><p>In the current pre-release you can not (easily) use async/await concepts in DataPortal_XYZ.</p>
<p>In the next pre-release you will be able to use async/await concepts in DataPortal_XYZ.</p>
<p>Using await on the client-side data portal is entirely independent of using it in the server-side data portal. You can mix and match.</p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
