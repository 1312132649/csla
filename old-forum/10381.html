<html><header><title>Modular Developpement and ObjectFactoryLoader</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Modular Developpement and ObjectFactoryLoader</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/10381.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>jnthomas posted on Tuesday, May 17, 2011</h2><p>Situation:</p>
<p>We develop our applications in a modular fashion from our presentation assemblies down to our DAL assemblies. This, unfortunately, has led us to notice a small problem when dealing with the ObjectFactoryLoader found in FactoryImplementation in CSLA 4.1. The issue is that the ObjectFactoryLoader assumes that there is only one active DAL assembly, which is not suitable for our situation as we can have many.</p>
<p>What we figured would be best was that the ObjectFactoryAttribute had an extra parameter in which we could specify the key we would like to get from the configuration file. But that would require us to modify the class and introduce something we&#39;d need to handle in future version of CSLA.</p>
<p>Does someone have a better solution for this type of situation?</p>
<p>Thanks.</p></div><div style='padding:0 15 3 15;background-color:lightgreen'><h2>RockfordLhotka replied on Tuesday, May 17, 2011</h2><p>If you create your own object factory loader you can do anything you want. There&#39;s nothing that prevents you from loading different (or multiple) DAL assemblies based on your requirements.</p>
<p>The <a href="http://store.lhotka.net/Default.aspx?tabid=1560&amp;ProductID=25">Using CSLA 4: Data Access</a> ebook shows how to create a custom factory loader.</p>
<p>The <em>default</em> factory loader interprets the ObjectFactory attribute&#39;s factory name parameter as an assembly qualified type name. But that factory name parameter is just a string, and so it can contain anything you want - if you create a custom factory loader to interpret that value differently.</p>
<p>For example, you could devise a different convention for the name string, such as:</p>
<p>[ObjectFactory(&quot;DalTypeName,ConfigFileKey&quot;)]</p>
<p>Your custom factory loader will get this string, and can parse and use it however you&#39;d like. A simple string split will give you the two parts of the value, and you can use &quot;ConfigFileKey&quot; to do your config file lookup to find the assembly, and then use the &quot;DalTypeName&quot; to find the class within that assembly - or whatever else you can think of doing.</p></div><div style='padding:0 15 3 15;background-color:lightgreen'><h2>JonnyBee replied on Tuesday, May 17, 2011</h2><p>You could also create an interface for all your &quot;root&quot; object factories and use:</p>
<p>[ObjectFactory(typeof(ThisRootFactory))]</p>
<p>and your own ObjectFactoryLoader with an IOC container to resolve the interface to a new actual instance of the root factory. </p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
