<html><header><title>Many-to-Many / intermediate table / bridge table / xref table... help</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Many-to-Many / intermediate table / bridge table / xref table... help</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/10437.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>goroth posted on Tuesday, June 14, 2011</h2><p class="MsoNormal" style="margin:0in 0in 10pt;"><span style="font-size:small;"><span style="font-family:Calibri;">I am having a terrible time trying to find information on how to use CSLA in a cross-reference table scenario. <br />Basically I am looking for examples on how to select, insert, update, and delete using CSLA in a parent &ndash; child setup that are tied together by an XRef table.</span></span></p>
<p class="MsoNormal" style="margin:0in 0in 10pt;"><span style="font-size:small;"><span style="font-family:Calibri;">Example:<br />I have a Phone table, Person table, and Company table.<br />There are two XRef tables PersonPhoneXref and CompanyPhoneXref.<br />In the current scenario I have Person and Company as Parent objects and Phone as a Child object.<br />In the Child_Insert, Child_Update, and Child_DeleteSelf I am using reflection to see which Parent (Person or Company) called this child so that I can determine which Xref table to update.<br /><br />Is there a better way? <br /></span></span><span style="font-size:small;"><span style="font-family:Calibri;">I almost wonder if it would be better to create a PersonPhone CSLA and CompanyPhone CSLA object and then inherit from the Phone CSLA object&hellip; But I can&rsquo;t even find good examples on how to do that! <br />Any help would be much appreciated.</span></span></p></div><div style='padding:0 15 3 15;background-color:lightgreen'><h2>RockfordLhotka replied on Tuesday, June 14, 2011</h2><p>Please understand that CSLA is not an ORM, and I don&#39;t intentionally support object models where the objects look like tables.</p>
<p>Instead, I intentionally support object models where the objects meet the needs of specific user scenarios.</p>
<p>ProjectTracker (current version is in svn or with the <em>Using CSLA 4: ASP.NET MVC</em> ebook) includes a database-level M:M relationship. But that sort of relationship almost never exists in any actual user scenario, so the user scenarios (business objects) demonstrate 1:M relationships.</p>
<p>To put this another way: take the doctor-patient relationship. Your doctor has numerous patients. If you ever have any real illness, you&#39;ll have numerous doctors. This is a very obvious M:M relationship at the database level.</p>
<p>But I ask you: in what user scenario does a user interact with the M:M data?</p>
<ul>
<li>Adding or editing a patient involves the patient record, and at most might display a historical record of doctors for the patient - so 1:M at the object level.</li>
<li>Adding or editing a doctor involves the doctor record, and again, might display a list of current or historical patients - so 1:M at the object level.</li>
<li>When a patient comes into the hospital, they&#39;ll be associated with an admittance record, and through that record they&#39;ll be associated with n doctors - so 1:M at the object level again.</li>
</ul>
<p>Hopefully you see what I&#39;m saying. It is critical to understand that good object design almost never looks exactly like the database design. The database M:M relationship is the most obvious and clear example of this basic truth, because the object models using that data are almost never M:M. Actually, in my experience, I have yet to build an M:M object model for a real application - users just don&#39;t think that way.</p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
