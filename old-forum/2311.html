<html><header><title>Remoting / ExecutionLocation</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Remoting / ExecutionLocation</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/2311.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>lakers72 posted on Friday, February 09, 2007</h2>I am relatively new to CSLA and am haivng trouble with ExecutionLocation.&nbsp; I have successfully created the remoting host on another box and configured the web.config there and the app.config on my test app.&nbsp; However, the ExecutionLocation is always client.&nbsp; As I understand it, with remoting, the actual execution of the code inside my business objects should happen on the server (remoting host).&nbsp; This is the behavior I need in this case (clients are behind a firewall which does not have certain ports open, therefore I need execution to occur on server).<br><br>Here's my app.config:<br><br>&lt;?xml version="1.0" encoding="utf-8" ?&gt;<br>&lt;configuration&gt;<br>&nbsp;&nbsp;&nbsp; &lt;appSettings&gt;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;add key="CslaDataPortalProxy" value="Csla.DataPortalClient.RemotingProxy, Csla"/&gt;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;add key="CslaDataPortalUrl" value="http://&lt;servername&gt;/remotingportal.rem"/&gt;<br><br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;add key="CslaAuthentication" value="Windows" /&gt;<br>&nbsp;&nbsp;&nbsp; &lt;/appSettings&gt;<br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp; &lt;connectionStrings&gt;<br>&nbsp;&nbsp;&nbsp; &lt;/connectionStrings&gt;<br>&lt;/configuration&gt;<br><br>Here's the relevant part of my web.config:<br>&lt;system.runtime.remoting&gt;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;application&gt;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;service&gt;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;wellknown mode="SingleCall" objectUri="remotingportal.rem"<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; type="Csla.Server.Hosts.RemotingPortal, Csla"/&gt;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;/service&gt;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;channels&gt;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;channel ref="http"&gt;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;serverProviders&gt;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;provider ref="wsdl"/&gt;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;formatter ref="soap" typeFilterLevel="Full"/&gt;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;formatter ref="binary" typeFilterLevel="Full"/&gt;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;/serverProviders&gt;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;/channel&gt;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;/channels&gt;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;/application&gt;<br>&nbsp;&nbsp;&nbsp; &lt;/system.runtime.remoting&gt;<br><br><br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>lakers72 replied on Saturday, February 10, 2007</h2>I think I have figured out the issue.&nbsp; The objects are created on the remoting proxy (server side) and then passed back to the client.&nbsp; Business Methods are then executed on the client, not on an anchored BO on the server.&nbsp; I believe I need to inherit from CommandBase for objects that need to execute code on the server and implement that code in DataPortal_Execute (via DataPortal.Execute), correct?<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Monday, February 12, 2007</h2>Only code in the any DataPortal_ methods will be run on the server.&nbsp; All other code should be running client side.&nbsp; If you're using remoting, and you have a DataPortal_Create method that isn't marked with RunLocal, any code you call in DataPortal_create should be running on the server.&nbsp; After the DP_C returns, the BO should have been transfered back.<br><br>What you need to do depends on what you're trying to accomplish.&nbsp; If you have a business rule that fires on property changes and that rule needs access to the database, then a command object to implement that rule is probably best.&nbsp; Although you'll take a peformance hit, and you need to keep in mind that until you actually update the database, the result of that check may not be valid, because another user may modify the data between the time the rule is checked and the user saves the BO.<br><br>To answer your orginal question, if you have remoting setup and are within one of the DataPortal_xxx methods, the location should be server.&nbsp; Any other time, and the location would be client.&nbsp; If you don't have remoting setup, it is always client IIRC.<br></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
