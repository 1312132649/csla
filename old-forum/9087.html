<html><header><title>table-based versus business based class design</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>table-based versus business based class design</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/9087.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>jmfan1981 posted on Tuesday, June 15, 2010</h2><p>i have a question regarding class design using csla.&nbsp; here is my scenario</p>
<p>say i have a user table, and a userpermissions table (1 to many)</p>
<p>scenario 1.&nbsp;i need a list of user names and the pemission names they&#39;re assigned</p>
<p>scenario 2. i need a list of user id, usernames</p>
<p>scenario 3. i need just a list user names and the last time that user logged in</p>
<p>in the above 3 scenarios, by using a table based design, i only need 2 classes.&nbsp; tblUsers and tblPermissions,&nbsp; list&lt;permissions&gt; would be a member of the user class, and i can have 3 non-shared functions that return me back a User or List&lt;User&gt; object.&nbsp;&nbsp;&nbsp; the disadvantage of this approach is&nbsp;the User class is convoluted, as it has multi purposes so you can&#39;t really pinpoint what the User class actually does.. its simply just a collection of a bunch of functions that return different things based on what you need</p>
<p>by using CSLA and a generator (of your choice), then if its to be completely business object based, then technically its going to create several classes, (at least one class per scenario)&nbsp; because i don&#39;t need a loggedin date property for scenario 2, but in the table based approach, i&#39;d have that property available anyways.&nbsp; This problem i see with this approach is that the many classes you will have to cover each scenario, i foresee a lot of duplication of code.&nbsp;&nbsp;&nbsp; </p>
<p>is there a middle ground anywhere?&nbsp; the point i&#39;m getting at is that while basing your objects around business rules, you&#39;ll get exactly the data you need with only the properties and methods that you need , but you&#39;ll be repeating a lot of code, and while one can argue that &quot;that&#39;s what code generators are for&quot;, i&#39;m more concerned about bulky DLL&#39;s.&nbsp;&nbsp; </p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Jav replied on Tuesday, June 15, 2010</h2><p>Your&nbsp;problem (bloated code and bulky dll) is because you are using a code generator, not because you are using Csla.</p>
<p>If&nbsp;you are just starting with Csla, which it looks like from your post (if not, then I apologize for the assumtion), then you may be starting at the wrong end using a code generator.&nbsp; If I were you I would take the particular example you have given and hand code it from one end&nbsp;to the other while going through the Csla book.&nbsp; You don&#39;t want to miss out on the elegance of this framework while churning out code with a generator.</p>
<p>As a general rule, you will create your Csla classes based on your use case scenario, not necessarily based on your database structure.&nbsp; Looking at your scenarios, you can create one ReadOnlyList containg UserId, UserName and LastTimeLoggedIn which will take care or Scenario #2 and #3.&nbsp; As for scenario #1, to begin with you will need a third table because it will require a many to many relation. (One user can have many permisions, and a permission may be given to many users).</p>
<p>Jav</p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
