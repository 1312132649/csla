<html><header><title>Prevent DataPortal_Create from running expensive business rules</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Prevent DataPortal_Create from running expensive business rules</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/12186.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>mswanson25 posted on Thursday, October 17, 2013</h2><p>Hi, I have BO which has a bunch of business rules, a couple which are relatively expensive rules which contact the database to insure that some properties are correctly set when saved/updated.</p>
<p>I noticed that these rules run on DataPortal_Create(), and these rules will always fail when the object is initialized, so i don&#39;t see the point of running rules just when creating a object for the first time.</p>
<p>I&#39;ve read discussions on this forum that suggests not using a constructor because of a number of reason, but if I have to choose between initializing default values in two places vs. making expensive database calls on simple object creation....</p>
<p>Is there a way to not get business rules to run on DP_Create, or at least prevent the expensive rules from running?</p>
<p>&nbsp;</p>
<p>Thank you!</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>cfarren replied on Thursday, October 17, 2013</h2><p>Are there some properties you can check at the start of the rule to determine whether it should be called or not? e.g if the target is new don&#39;t call that rule until propertyA or PropertyB are set?</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JonnyBee replied on Friday, October 18, 2013</h2><p>There is a couple of useful techniques to understand:</p>
<ol>
<li>Use &lt;rule&gt;.Priority to define the sequence of rule execution and RuleEngine will not enter next step if a rule is broken when severity is Error. <br />Say f.ex that you have a Required field and when it has a value you must perform some checks. Add the Required rule with Priority=0 (default) and the database check rule with Priority = 1. The effect is that when Required rule is broken the rule engine will no longer run rules with higher priority.<br />This technique is very useful for both server and client side execution. </li>
<li>Set a flag in your Rule to tell the rule engine to NOT run this rule in the DataAccess layer. <br />in the constructor of your rule set <i>CanRunOnServer = false</i> to prevent the rule from running in any of the DataPortal_XYZ methods.</li>
</ol></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
