<html><header><title>How do I handle two assemblies with the same filename during a TFS build?</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>How do I handle two assemblies with the same filename during a TFS build?</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/8539.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>JasonRShaver posted on Tuesday, February 16, 2010</h2><p><span class="Apple-style-span" style="widows:2;text-transform:none;text-indent:0px;border-collapse:separate;font:16px &#39;Times New Roman&#39;;white-space:normal;orphans:2;letter-spacing:normal;color:#000000;word-spacing:0px;-webkit-border-horizontal-spacing:0px;-webkit-border-vertical-spacing:0px;-webkit-text-decorations-in-effect:none;-webkit-text-size-adjust:auto;-webkit-text-stroke-width:0px;"><span class="Apple-style-span" style="text-align:left;line-height:18px;border-collapse:collapse;font-family:Arial, &#39;Liberation Sans&#39;, &#39;DejaVu Sans&#39;, sans-serif;font-size:14px;">
<p style="background-color:transparent;margin:0px 0px 1em;clear:both;font-size:14px;vertical-align:baseline;background-origin:initial;background-clip:initial;border-width:0px;padding:0px;">I am following the CSLA.NET for Silverlight pattern of using the same filename for the business objects assemblies. For example:</p>
<pre class="prettyprint" style="overflow-x:auto;overflow-y:auto;background-color:#eeeeee;margin:0px 0px 10px;width:auto;font-family:Consolas, Monaco, &#39;Lucida Console&#39;, &#39;Liberation Mono&#39;, &#39;DejaVu Sans Mono&#39;, &#39;Bitstream Vera Sans Mono&#39;, &#39;Courier New&#39;;max-height:600px;font-size:14px;vertical-align:baseline;background-origin:initial;background-clip:initial;border-width:0px;padding:5px;"><code style="background-color:#eeeeee;margin:0px;font-family:Consolas, Monaco, &#39;Lucida Console&#39;, &#39;Liberation Mono&#39;, &#39;DejaVu Sans Mono&#39;, &#39;Bitstream Vera Sans Mono&#39;, &#39;Courier New&#39;;font-size:14px;vertical-align:baseline;background-origin:initial;background-clip:initial;border-width:0px;padding:0px;"><span class="pln" style="background-color:transparent;margin:0px;color:black;font-size:14px;vertical-align:baseline;background-origin:initial;background-clip:initial;border-width:0px;padding:0px;">CSLA</span><span class="pun" style="background-color:transparent;margin:0px;color:black;font-size:14px;vertical-align:baseline;background-origin:initial;background-clip:initial;border-width:0px;padding:0px;">.</span><span class="pln" style="background-color:transparent;margin:0px;color:black;font-size:14px;vertical-align:baseline;background-origin:initial;background-clip:initial;border-width:0px;padding:0px;">dll &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="com" style="background-color:transparent;margin:0px;color:gray;font-size:14px;vertical-align:baseline;background-origin:initial;background-clip:initial;border-width:0px;padding:0px;">// .NET assembly</span><span class="pln" style="background-color:transparent;margin:0px;color:black;font-size:14px;vertical-align:baseline;background-origin:initial;background-clip:initial;border-width:0px;padding:0px;"><br /></span><span class="typ" style="background-color:transparent;margin:0px;color:#2b91af;font-size:14px;vertical-align:baseline;background-origin:initial;background-clip:initial;border-width:0px;padding:0px;">MyProject</span><span class="pun" style="background-color:transparent;margin:0px;color:black;font-size:14px;vertical-align:baseline;background-origin:initial;background-clip:initial;border-width:0px;padding:0px;">.</span><span class="typ" style="background-color:transparent;margin:0px;color:#2b91af;font-size:14px;vertical-align:baseline;background-origin:initial;background-clip:initial;border-width:0px;padding:0px;">Entities</span><span class="pun" style="background-color:transparent;margin:0px;color:black;font-size:14px;vertical-align:baseline;background-origin:initial;background-clip:initial;border-width:0px;padding:0px;">.</span><span class="pln" style="background-color:transparent;margin:0px;color:black;font-size:14px;vertical-align:baseline;background-origin:initial;background-clip:initial;border-width:0px;padding:0px;">dll </span><span class="com" style="background-color:transparent;margin:0px;color:gray;font-size:14px;vertical-align:baseline;background-origin:initial;background-clip:initial;border-width:0px;padding:0px;">// .NET assembly</span><span class="pln" style="background-color:transparent;margin:0px;color:black;font-size:14px;vertical-align:baseline;background-origin:initial;background-clip:initial;border-width:0px;padding:0px;"><br />CSLA</span><span class="pun" style="background-color:transparent;margin:0px;color:black;font-size:14px;vertical-align:baseline;background-origin:initial;background-clip:initial;border-width:0px;padding:0px;">.</span><span class="pln" style="background-color:transparent;margin:0px;color:black;font-size:14px;vertical-align:baseline;background-origin:initial;background-clip:initial;border-width:0px;padding:0px;">dll &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="com" style="background-color:transparent;margin:0px;color:gray;font-size:14px;vertical-align:baseline;background-origin:initial;background-clip:initial;border-width:0px;padding:0px;">// Silverlight assembly</span><span class="pln" style="background-color:transparent;margin:0px;color:black;font-size:14px;vertical-align:baseline;background-origin:initial;background-clip:initial;border-width:0px;padding:0px;"><br /></span><span class="typ" style="background-color:transparent;margin:0px;color:#2b91af;font-size:14px;vertical-align:baseline;background-origin:initial;background-clip:initial;border-width:0px;padding:0px;">MyProject</span><span class="pun" style="background-color:transparent;margin:0px;color:black;font-size:14px;vertical-align:baseline;background-origin:initial;background-clip:initial;border-width:0px;padding:0px;">.</span><span class="typ" style="background-color:transparent;margin:0px;color:#2b91af;font-size:14px;vertical-align:baseline;background-origin:initial;background-clip:initial;border-width:0px;padding:0px;">Entities</span><span class="pun" style="background-color:transparent;margin:0px;color:black;font-size:14px;vertical-align:baseline;background-origin:initial;background-clip:initial;border-width:0px;padding:0px;">.</span><span class="pln" style="background-color:transparent;margin:0px;color:black;font-size:14px;vertical-align:baseline;background-origin:initial;background-clip:initial;border-width:0px;padding:0px;">dll </span><span class="com" style="background-color:transparent;margin:0px;color:gray;font-size:14px;vertical-align:baseline;background-origin:initial;background-clip:initial;border-width:0px;padding:0px;">// Silverlight assembly</span><span class="pln" style="background-color:transparent;margin:0px;color:black;font-size:14px;vertical-align:baseline;background-origin:initial;background-clip:initial;border-width:0px;padding:0px;"><br /></span></code></pre>
<p style="background-color:transparent;margin:0px 0px 1em;clear:both;font-size:14px;vertical-align:baseline;background-origin:initial;background-clip:initial;border-width:0px;padding:0px;">This is done so you can use a single code file in the .NET project, &quot;file link&quot; it to the Silverlight project and have both assemblies use the same code (compiling out the .NET and Silverlight functionally as needed).</p>
<p style="background-color:transparent;margin:0px 0px 1em;clear:both;font-size:14px;vertical-align:baseline;background-origin:initial;background-clip:initial;border-width:0px;padding:0px;">The reason for the same Assembly file names is so that WCF serialization bindings just automatically work.</p>
<p style="background-color:transparent;margin:0px 0px 1em;clear:both;font-size:14px;vertical-align:baseline;background-origin:initial;background-clip:initial;border-width:0px;padding:0px;">The issue I am having is that my build server seems to be putting both assemblies in the same output directory and using that directory for resolving project references, but it is getting the wrong file (the Silverlight one instead of the .NET one).</p>
<p style="background-color:transparent;margin:0px 0px 1em;clear:both;font-size:14px;vertical-align:baseline;background-origin:initial;background-clip:initial;border-width:0px;padding:0px;">Does anyone know how to deal with this situation?</p>
</span></span></p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Wednesday, February 17, 2010</h2><p>Is there a way to put the output into a \net or \silverlight folder?</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JasonRShaver replied on Wednesday, February 17, 2010</h2><p><span class="Apple-style-span" style="widows:2;text-transform:none;text-indent:0px;border-collapse:separate;font:16px &#39;Times New Roman&#39;;white-space:normal;orphans:2;letter-spacing:normal;color:#000000;word-spacing:0px;-webkit-border-horizontal-spacing:0px;-webkit-border-vertical-spacing:0px;-webkit-text-decorations-in-effect:none;-webkit-text-size-adjust:auto;-webkit-text-stroke-width:0px;"><span class="Apple-style-span" style="text-align:left;line-height:18px;border-collapse:collapse;font-family:Arial, &#39;Liberation Sans&#39;, &#39;DejaVu Sans&#39;, sans-serif;font-size:14px;">
<p style="background-color:transparent;margin:0px 0px 1em;clear:both;font-size:14px;vertical-align:baseline;background-origin:initial;background-clip:initial;border-width:0px;padding:0px;">Aaron Hallberg mentioned to me that you can change the MSBuild activity in the workflow to not set an<code style="padding-bottom:1px;background-color:#eeeeee;margin:0px;padding-left:5px;padding-right:5px;font-family:Consolas, Monaco, &#39;Lucida Console&#39;, &#39;Liberation Mono&#39;, &#39;DejaVu Sans Mono&#39;, &#39;Bitstream Vera Sans Mono&#39;, &#39;Courier New&#39;;font-size:14px;vertical-align:baseline;padding-top:1px;background-origin:initial;background-clip:initial;border-width:0px;">OutDir</code>. This worked, but caused the Binaries folder to not get a copy of the output.</p>
<p style="background-color:transparent;margin:0px 0px 1em;clear:both;font-size:14px;vertical-align:baseline;background-origin:initial;background-clip:initial;border-width:0px;padding:0px;">Instead, what I did was make three Build Configurations in the solution,<span class="Apple-converted-space">&nbsp;</span><code style="padding-bottom:1px;background-color:#eeeeee;margin:0px;padding-left:5px;padding-right:5px;font-family:Consolas, Monaco, &#39;Lucida Console&#39;, &#39;Liberation Mono&#39;, &#39;DejaVu Sans Mono&#39;, &#39;Bitstream Vera Sans Mono&#39;, &#39;Courier New&#39;;font-size:14px;vertical-align:baseline;padding-top:1px;background-origin:initial;background-clip:initial;border-width:0px;">ClrOnly</code>,<span class="Apple-converted-space">&nbsp;</span><code style="padding-bottom:1px;background-color:#eeeeee;margin:0px;padding-left:5px;padding-right:5px;font-family:Consolas, Monaco, &#39;Lucida Console&#39;, &#39;Liberation Mono&#39;, &#39;DejaVu Sans Mono&#39;, &#39;Bitstream Vera Sans Mono&#39;, &#39;Courier New&#39;;font-size:14px;vertical-align:baseline;padding-top:1px;background-origin:initial;background-clip:initial;border-width:0px;">SilverlightOnly</code>, and<span class="Apple-converted-space">&nbsp;</span><code style="padding-bottom:1px;background-color:#eeeeee;margin:0px;padding-left:5px;padding-right:5px;font-family:Consolas, Monaco, &#39;Lucida Console&#39;, &#39;Liberation Mono&#39;, &#39;DejaVu Sans Mono&#39;, &#39;Bitstream Vera Sans Mono&#39;, &#39;Courier New&#39;;font-size:14px;vertical-align:baseline;padding-top:1px;background-origin:initial;background-clip:initial;border-width:0px;">WebsiteOnly</code>. Then in the Process tab of the build definition, I set the Items to Build to build &quot;<code style="padding-bottom:1px;background-color:#eeeeee;margin:0px;padding-left:5px;padding-right:5px;font-family:Consolas, Monaco, &#39;Lucida Console&#39;, &#39;Liberation Mono&#39;, &#39;DejaVu Sans Mono&#39;, &#39;Bitstream Vera Sans Mono&#39;, &#39;Courier New&#39;;font-size:14px;vertical-align:baseline;padding-top:1px;background-origin:initial;background-clip:initial;border-width:0px;">1 project(s) and 3 configuration(s)</code>&quot;. Now the Binaries output looks like this:</p>
<pre class="prettyprint" style="overflow-x:auto;overflow-y:auto;background-color:#eeeeee;margin:0px 0px 10px;width:auto;font-family:Consolas, Monaco, &#39;Lucida Console&#39;, &#39;Liberation Mono&#39;, &#39;DejaVu Sans Mono&#39;, &#39;Bitstream Vera Sans Mono&#39;, &#39;Courier New&#39;;max-height:600px;font-size:14px;vertical-align:baseline;background-origin:initial;background-clip:initial;border-width:0px;padding:5px;"><code style="background-color:#eeeeee;margin:0px;font-family:Consolas, Monaco, &#39;Lucida Console&#39;, &#39;Liberation Mono&#39;, &#39;DejaVu Sans Mono&#39;, &#39;Bitstream Vera Sans Mono&#39;, &#39;Courier New&#39;;font-size:14px;vertical-align:baseline;background-origin:initial;background-clip:initial;border-width:0px;padding:0px;"><span class="typ" style="background-color:transparent;margin:0px;color:#2b91af;font-size:14px;vertical-align:baseline;background-origin:initial;background-clip:initial;border-width:0px;padding:0px;">Nightly_20100217</span><span class="pun" style="background-color:transparent;margin:0px;color:black;font-size:14px;vertical-align:baseline;background-origin:initial;background-clip:initial;border-width:0px;padding:0px;">.</span><span class="lit" style="background-color:transparent;margin:0px;color:maroon;font-size:14px;vertical-align:baseline;background-origin:initial;background-clip:initial;border-width:0px;padding:0px;">1</span><span class="pun" style="background-color:transparent;margin:0px;color:black;font-size:14px;vertical-align:baseline;background-origin:initial;background-clip:initial;border-width:0px;padding:0px;">\</span><span class="pln" style="background-color:transparent;margin:0px;color:black;font-size:14px;vertical-align:baseline;background-origin:initial;background-clip:initial;border-width:0px;padding:0px;"><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="pun" style="background-color:transparent;margin:0px;color:black;font-size:14px;vertical-align:baseline;background-origin:initial;background-clip:initial;border-width:0px;padding:0px;">\</span><span class="typ" style="background-color:transparent;margin:0px;color:#2b91af;font-size:14px;vertical-align:baseline;background-origin:initial;background-clip:initial;border-width:0px;padding:0px;">Multi</span><span class="pln" style="background-color:transparent;margin:0px;color:black;font-size:14px;vertical-align:baseline;background-origin:initial;background-clip:initial;border-width:0px;padding:0px;"> </span><span class="typ" style="background-color:transparent;margin:0px;color:#2b91af;font-size:14px;vertical-align:baseline;background-origin:initial;background-clip:initial;border-width:0px;padding:0px;">Platform</span><span class="pun" style="background-color:transparent;margin:0px;color:black;font-size:14px;vertical-align:baseline;background-origin:initial;background-clip:initial;border-width:0px;padding:0px;">\</span><span class="pln" style="background-color:transparent;margin:0px;color:black;font-size:14px;vertical-align:baseline;background-origin:initial;background-clip:initial;border-width:0px;padding:0px;"><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="pun" style="background-color:transparent;margin:0px;color:black;font-size:14px;vertical-align:baseline;background-origin:initial;background-clip:initial;border-width:0px;padding:0px;">\</span><span class="typ" style="background-color:transparent;margin:0px;color:#2b91af;font-size:14px;vertical-align:baseline;background-origin:initial;background-clip:initial;border-width:0px;padding:0px;">ClrOnly</span><span class="pln" style="background-color:transparent;margin:0px;color:black;font-size:14px;vertical-align:baseline;background-origin:initial;background-clip:initial;border-width:0px;padding:0px;"><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="pun" style="background-color:transparent;margin:0px;color:black;font-size:14px;vertical-align:baseline;background-origin:initial;background-clip:initial;border-width:0px;padding:0px;">\</span><span class="typ" style="background-color:transparent;margin:0px;color:#2b91af;font-size:14px;vertical-align:baseline;background-origin:initial;background-clip:initial;border-width:0px;padding:0px;">SilverlightOnly</span><span class="pln" style="background-color:transparent;margin:0px;color:black;font-size:14px;vertical-align:baseline;background-origin:initial;background-clip:initial;border-width:0px;padding:0px;"><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="pun" style="background-color:transparent;margin:0px;color:black;font-size:14px;vertical-align:baseline;background-origin:initial;background-clip:initial;border-width:0px;padding:0px;">\</span><span class="typ" style="background-color:transparent;margin:0px;color:#2b91af;font-size:14px;vertical-align:baseline;background-origin:initial;background-clip:initial;border-width:0px;padding:0px;">WebsiteOnly</span><span class="pun" style="background-color:transparent;margin:0px;color:black;font-size:14px;vertical-align:baseline;background-origin:initial;background-clip:initial;border-width:0px;padding:0px;">\</span><span class="pln" style="background-color:transparent;margin:0px;color:black;font-size:14px;vertical-align:baseline;background-origin:initial;background-clip:initial;border-width:0px;padding:0px;"><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="pun" style="background-color:transparent;margin:0px;color:black;font-size:14px;vertical-align:baseline;background-origin:initial;background-clip:initial;border-width:0px;padding:0px;">\</span><span class="pln" style="background-color:transparent;margin:0px;color:black;font-size:14px;vertical-align:baseline;background-origin:initial;background-clip:initial;border-width:0px;padding:0px;">_Published </span><span class="typ" style="background-color:transparent;margin:0px;color:#2b91af;font-size:14px;vertical-align:baseline;background-origin:initial;background-clip:initial;border-width:0px;padding:0px;">Sites</span><span class="pln" style="background-color:transparent;margin:0px;color:black;font-size:14px;vertical-align:baseline;background-origin:initial;background-clip:initial;border-width:0px;padding:0px;"><br /></span></code></pre>
<p style="background-color:transparent;margin:0px 0px 1em;clear:both;font-size:14px;vertical-align:baseline;background-origin:initial;background-clip:initial;border-width:0px;padding:0px;">And my unit tests and everything are working great.</p>
<p style="background-color:transparent;margin:0px 0px 1em;clear:both;font-size:14px;vertical-align:baseline;background-origin:initial;background-clip:initial;border-width:0px;padding:0px;">I really am curious to know how others have delt with this issue in the past.&nbsp; Anyone?</p>
</span></span></p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>DancesWithBamboo replied on Wednesday, February 17, 2010</h2><p>I&#39;ve used a couple different ways but the one I like best is to change the project file and leave the TFS build files alone. &nbsp;Here is a snippet of my server side business dll .proj file. &nbsp;Notice that what you have to do is determine if it is building in Visual Studio or not and then rename the output location if you aren&#39;t.</p>
<h4>&nbsp;&lt;PropertyGroup Condition=&quot; &#39;$(Configuration)|$(Platform)&#39; == &#39;Debug|AnyCPU&#39; &quot;&gt;</h4>
<h4>&nbsp;&nbsp; &nbsp;&lt;DebugSymbols&gt;true&lt;/DebugSymbols&gt;</h4>
<h4>&nbsp;&nbsp; &nbsp;&lt;DebugType&gt;full&lt;/DebugType&gt;</h4>
<h4>&nbsp;&nbsp; &nbsp;&lt;Optimize&gt;false&lt;/Optimize&gt;</h4>
<h4>&nbsp;&nbsp; &nbsp;&lt;OutputPath&gt;bin\&lt;/OutputPath&gt;</h4>
<h4>&lt;OutDir Condition=&quot; &#39;$(TeamBuildOutDir)&#39;==&#39;&#39; And &#39;$(BuildingInsideVisualStudio)&#39; != &#39;true&#39; &quot;&gt;..\Output\Alcatraz.Business.Server\&lt;/OutDir&gt;</h4>
<h4>&nbsp;&lt;OutDir Condition=&quot; &#39;$(TeamBuildOutDir)&#39;!=&#39;&#39; &quot;&gt;$(TeamBuildOutDir)Alcatraz.Business.Server&lt;/OutDir&gt;</h4>
<h4>&nbsp;&nbsp; &nbsp;&lt;DefineConstants&gt;DEBUG;TRACE&lt;/DefineConstants&gt;</h4>
<h4>&nbsp;&nbsp; &nbsp;&lt;ErrorReport&gt;prompt&lt;/ErrorReport&gt;</h4>
<h4>&nbsp;&nbsp; &nbsp;&lt;WarningLevel&gt;4&lt;/WarningLevel&gt;</h4>
<h4>&nbsp;&nbsp;&lt;/PropertyGroup&gt;</h4>
<p>&nbsp;</p>
<p>And you also have to set &quot;CustomizableOutDir&quot; to true in the TFSBuild.proj file to get it to respect the project level configurations.</p>
<h4>&lt;CustomizableOutDir&gt;true&lt;/CustomizableOutDir&gt;</h4>
<p>&nbsp;</p>
<p>&nbsp;</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>skagen00 replied on Wednesday, May 12, 2010</h2><p>I&#39;m encountering this issue with TFS 2010.... </p>
<p>CustomizableOutDir is no longer applicable, from what I&#39;m reading, as the TFSBuild.proj concept is no longer used with TFS 2010.</p>
<p>If I use OutputPath suitably, I can have my binaries dump to a different directory when I build on my machine, but the TFS server seems to pay no attention -- everything gets dumped into \binaries\ and I get CI build errors&nbsp;because my .NET code in this case is building against a Silverlight class library DLL.</p>
<p>I&#39;ve got to imagine that with TFS now being free with subscriptions that more people will use it and encounter this issue when dealing with a CSLA.Net Silverlight app - where the binaries are named the same between Silverlight and .NET.</p>
<p>Anyone encounter this issue recently and get through it?? What&#39;s the trick?</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Aaronomics101 replied on Monday, October 08, 2012</h2><p>I am running into the exact same problem. I have yet to find a solution to it, and hope that Rocky could help us out. This is bothering our company as we get everything else to work fine except automatic builds which is huge for us.</p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
