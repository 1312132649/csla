<html><header><title>Binding to IsDirty on BusinessListBase in CSLALight</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Binding to IsDirty on BusinessListBase in CSLALight</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/8468.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>MarkOviedo posted on Wednesday, February 03, 2010</h2>I am writing a simple CRUD screen for application setup. I have derived my own ViewModelBase and ViewModelListBase from BusinessBase<> and BusinessListBase<> respectively, and am binding those directly to our XAML screens.<br /><br />I would like to be able to bind the IsEnabled state of the Save and Cancel buttons to the ViewModelListBase.IsDirty property. In investigating BusinessListBase.IsDirty, it is clear that this value is only calculated on-demand. <br /><br />My first question is : Is there an easy way to be notified of property changed for BusinessListBase IsDirty?<br /><br />If not, my approach was going to be :<br />1) Override BusinessListBase.InsertItem. For each added item, subscribe the List parent to the OnPropertyChanged event of the child.<br /><br />2) Override OnDeserialized on the client. Upon deserialization of the list parent, re-subscribe OnPropertyChanged for all children.<br /><br />3) In the parent OnPropertyChanged handler, fire PropertyChanged("IsDirty").<br /><br />Is there a better way to do this? Will these event subscriptions impact the serialization/deserialization of the mobile formatter?</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Wednesday, February 03, 2010</h2><P>There are a couple solutions.</P>
<P>The simplest thing is to use a CslaDataProvider or ViewModelBase/ViewModel because these types already do all the work for you and expose auto-updating properties to make UI development easy.</P>
<P>Failing that, you'll need (for a general solution) to do what ViewModelBase (3.8.3) or CslaDataProvider do, which is to handle PropertyChanged, ChildChanged and CollectionChanged to universally detect when the underlying object graph has changed.</P>
<P>I don't recommend your approach - there may be unintended consequences of raising PropertyChanged for IsDirty (probably when binding to datagrid controls), and certainly hooking/unhooking all those events properly is non-trivial. Just look through the fun code that exists to make ChildChanged work - it is a serious PITA to get this right and not have nasty side effects.</P>
<P>Since we already did the work with ChildChanged, you are best off using that. But if it is your root object that changes, then you need PropertyChanged or CollectionChanged - which is why you need to handle all three to have a complete solution.</P></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
