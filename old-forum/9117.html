<html><header><title>AllowWrite If Empty</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>AllowWrite If Empty</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/9117.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>Norman.Mann posted on Tuesday, June 22, 2010</h2><p>Hi,</p>
<p>I have an Id field in my BO that will potentially be used by used by other applications (e.g. SharePoint Business Data Catalog) as a primary key. The idea is to provide a key value that is set &#39;by hand&#39; and easy to remember (a little bit like CustomerId &#39;ALFKI&#39;).</p>
<p>When a new instance of the BO is created I want all users to be able to fill this field. Once the field <em>has</em> a value only a certain group of people (e.g. Administrators) are allowed to change the field value because this would obviously have an impact on other applications.</p>
<p>What&nbsp;would be a good way to accomplish this ?</p>
<p>-Norman</p>
<p>&nbsp;</p></div><div style='padding:0 15 3 15;background-color:lightgreen'><h2>RobKraft replied on Tuesday, June 22, 2010</h2><p>We overwrite CanWriteProperty in the BO with something like this:</p>
<p>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; public override bool CanWriteProperty(string propertyName)<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; {<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; bool canWrite = base.CanWriteProperty(propertyName); //Call base.CanWriteProperty before referencing specific methods in this B.O. to prevent object instantiation when unnecessary<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; if (canWrite == true)<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; {<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; switch (propertyName) <br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; {<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; case &quot;OurPropertyName&quot;:<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; if (!IsNew)<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; return false;<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; break;<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; return canWrite;<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }<br /></p></div><div style='padding:0 15 3 15;background-color:lightgreen'><h2>RockfordLhotka replied on Tuesday, June 22, 2010</h2><p>Rob is right for 2.1-3.8. In CSLA 4 you can create an authorization rule that does what you need - examining the state of the object to decide whether to return true or false.</p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
