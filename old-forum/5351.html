<html><header><title>Save a collection of invalid objects through the dataportal.</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Save a collection of invalid objects through the dataportal.</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/5351.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>MadGerbil posted on Friday, September 05, 2008</h2><P>Can a collection of invalid objects be saved through the DataPortal_Update?&nbsp;&nbsp; Right now, it seems to block that save; however, I want the save to occur because the objects are being edited and the user has the option to come back to them and fix 'em later.</P>
<P>&nbsp;</P>
<P>&nbsp;</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>skagen00 replied on Friday, September 05, 2008</h2><P>I think, in part, this is why warnings were introduced - though there's a semantic difference, I suppose. </P>
<P>The least intrusive way I can think of doing this would be to perhaps provide a field in the business object for _suppressInvalidity and then override IsValid to accomodate this. Then, you could perhaps provide a method for SaveWithErrors or something like that which would set the flag, do a base.Save(), and then change the _suppressInvalidity back to false. </P>
<P>I'm sure others have had a need for it and have solved it with more rigor, though - so I'm sure there are potentially better ideas than that. </P>
<P>&nbsp;</P>
<P>&nbsp;</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>MadGerbil replied on Friday, September 05, 2008</h2><P>I found I could override the Save in the base class and exclude the check for IsValid.</P>
<P>For me, the check for IsValid comes in to decide which table to save the records to so that I can have a "working" table and a "live" table for records.&nbsp; This way the valid collection can save itself to the proper location and the invalid collection saves itself to the other location.</P>
<P>I override it like this:</P>
<P>&nbsp;</P><FONT size=2>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>public</FONT></FONT><FONT size=2> </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>override</FONT></FONT><FONT size=2> </FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>AgencyImports</FONT></FONT><FONT size=2> Save()</P>
<P>{</P>
<P></FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>AgencyImports</FONT></FONT><FONT size=2> result;</P>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>if</FONT></FONT><FONT size=2> (IsDirty)</P>
<P>result = (</FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>AgencyImports</FONT></FONT><FONT size=2>)</FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>DataPortal</FONT></FONT><FONT size=2>.Update(</FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>this</FONT></FONT><FONT size=2>);</P>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>else</P></FONT></FONT><FONT size=2>
<P>result = (</FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>AgencyImports</FONT></FONT><FONT size=2>)</FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>this</FONT></FONT><FONT size=2>;</P>
<P>OnSaved(result);</P>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>return</FONT></FONT><FONT size=2> result;</P>
<P>}</P></FONT></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Friday, September 05, 2008</h2>The problem is you're back to the previous behavior where running in a non-remoting scenario you need to have your UI manually clone the object.&nbsp; <br><br>It sounds like your child BO's should decide based on some logic to which table to save.&nbsp; Again, a warning can be used to communicate with the user.<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Friday, September 05, 2008</h2>Your rules should be warnings.&nbsp; If you need to actually enforce the rules, that sounds like another use case, maybe an approval use case or something?<br></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
