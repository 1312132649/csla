<html><header><title>1.5 Validation Issue</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>1.5 Validation Issue</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/5502.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>oneillci posted on Wednesday, October 01, 2008</h2>Hi,<br><br>I have just inherited a project that uses CSLA, so I am coming quite cold into this, and I'm trying to debug a problem.<br><br>We have a report table in the database and a corresponding Report BO (inherited from BusinessBase).&nbsp; For most reports when I open them in the app, they open fine and can be saved.&nbsp; For some reports though, they open and cannot be saved.&nbsp; So this appears to be a data issue, but because I'm unfamiliar with CSLA and the db schema, here I am.<br><br>When I debug a problem report, as soon as the report is loaded from the database using DataPortal.Fetch, the report.IsValid is false.<br><br>Having used .Net Reflector on the assembly I can see that BusinessBase.IsValid just returns the mBrokenRules.IsValid.<br><br>The strange thing is that when I examine the property BrokenRules.IsValid is true.<br><br>So, Report Inherits BusinessBase<br>Just after DataPortal.Fetch, MyBase.IsValid is false, but MyBase.BrokenRules.IsValid is true<br><br>Any help in suggesting where I can see where the isvalid is getting set to false is much appreciated.<br>As I said, I do think this is a data error, but without being able to see any error message, I'm a bit stuck.<br><br>Thanks,<br>Ciaran<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Wednesday, October 01, 2008</h2>Well, I'd download the source code for Csla 1.5.<br><br><a href="http://www.lhotka.net/Article.aspx?id=bd7a0904-e76d-48c3-a3ab-a8e9d9645c91">http://www.lhotka.net/Article.aspx?id=bd7a0904-e76d-48c3-a3ab-a8e9d9645c91</a><br><br>Also, look at the source code for the business class... it's possible to override IsValid, that is typically done of the root BO contains another BO or list.<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Q Johnson replied on Wednesday, October 01, 2008</h2><P>The other repsonse here is CERTAINLY worth following up.</P>
<P>I can't see the code you're working with, obviously.&nbsp; But it wouldn't surprise me if the BO you have isn't SUPPOSED to be saved.&nbsp; It's quite possible that it only exists to load data (so Fetch is coded appropriately) and display it, but not to save it.&nbsp; If this hunch is correct, it explains why IsValid is False: the author doesn't want you to try and save the object in the UI.</P>
<P>But we probably don't have to speculate.&nbsp; Check and see if there is any code in the BO's DataPortal_Update() method (probably in a code region called "Data Access").&nbsp; If the Update method was implemented with real code to save the object, then just disregard the rest of this post.&nbsp; It is just a bad hunch.</P>
<P>But if there is no code to persist changes to the BO, then the author never intended it to be saved.&nbsp; So you should probably examine their design strategy and yours and decide whether you want to implement that or not.</P>
<P>HTH,</P></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
