<html><header><title>ProjectTracker.NHibernate And Wcf  DataPortal</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>ProjectTracker.NHibernate And Wcf  DataPortal</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/4258.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>lonely7345 posted on Wednesday, January 30, 2008</h2><P>I found DavidDilworth's excellent ProjectTracker.NHibernate project on CodePlex and I try &nbsp;to use its framework on my&nbsp; &nbsp;project.at the same time&nbsp; I use Wcf DataPortal In this projtect.but&nbsp; it's not&nbsp; successful .</P>
<P>the mode what i use wcf dataportal is same to the demo PTWeb</P>
<P>the error is .</P>
<P>Csla.DataPortalClient.WcfProxy</P>
<P>&nbsp;WcfResponse response =<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; svr.Create(new CreateRequest(objectType, criteria, context));</P>
<P>&nbsp;</P>
<P>erver stack trace: <BR>&nbsp;&nbsp; 在 System.Collections.Hashtable.get_Item(Object key)<BR>&nbsp;&nbsp; 在 NHibernate.Impl.SessionFactoryObjectFactory.GetNamedInstance(String name)<BR>&nbsp;&nbsp; 在 NHibernate.Impl.SessionFactoryImpl.GetRealObject(StreamingContext context)<BR>&nbsp;&nbsp; 在 System.Runtime.Serialization.XmlObjectSerializerReadContext.GetRealObject(IObjectReference obj, Int32 id)<BR>&nbsp;&nbsp; 在 ReadSessionFactoryImplFromXml(XmlReaderDelegator , XmlObjectSerializerReadContext , XmlDictionaryString[] , XmlDictionaryString[] )<BR>&nbsp;&nbsp; 在 System.Runtime.Serialization.ClassDataContract.ReadXmlValue(XmlReaderDelegator xmlReader, XmlObjectSerializerReadContext context)<BR>&nbsp;&nbsp; 在 System.Runtime.Serialization.XmlObjectSerializerReadContext.ReadDataContractValue(DataContract dataContract, XmlReaderDelegator reader)<BR>&nbsp;&nbsp; 在 System.Runtime.Serialization.XmlObjectSerializerReadContextComplex.InternalDeserializeInSharedTypeMode(XmlReaderDelegator xmlReader, Int32 declaredTypeID, Type declaredType, String name, String ns)<BR>&nbsp;&nbsp; 在 System.Runtime.Serialization.XmlObjectSerializerReadContextComplex.InternalDeserialize(XmlReaderDelegator xmlReader, Type declaredType, String name, String ns)<BR>&nbsp;&nbsp; 在 System.Runtime.Serialization.XmlObjectSerializerReadContext.ReadSerializationInfo(XmlReaderDelegator xmlReader, Type type)<BR>&nbsp;&nbsp; 在 ReadSessionImplFromXml(XmlReaderDelegator , XmlObjectSerializerReadContext , XmlDictionaryString[] , XmlDictionaryString[] )<BR>&nbsp;&nbsp; 在 System.Runtime.Serialization.ClassDataContract.ReadXmlValue(XmlReaderDelegator xmlReader, XmlObjectSerializerReadContext context)<BR>&nbsp;&nbsp; 在 System.Runtime.Serialization.XmlObjectSerializerReadContext.ReadDataContractValue(DataContract dataContract, XmlReaderDelegator reader)<BR>&nbsp;&nbsp; 在 System.Runtime.Serialization.XmlObjectSerializerReadContextComplex.InternalDeserializeInSharedTypeMode(XmlReaderDelegator xmlReader, Int32 declaredTypeID, Type declaredType, String name, String ns)<BR>&nbsp;&nbsp; 在 System.Runtime.Serialization.XmlObjectSerializerReadContextComplex.InternalDeserialize(XmlReaderDelegator xmlReader, Int32 declaredTypeID, RuntimeTypeHandle declaredTypeHandle, String name, String ns)<BR>&nbsp;&nbsp; 在 ReadCriteriaImplFromXml(XmlReaderDelegator , XmlObjectSerializerReadContext , XmlDictionaryString[] , XmlDictionaryString[] )<BR>&nbsp;&nbsp; 在 System.Runtime.Serialization.ClassDataContract.ReadXmlValue(XmlReaderDelegator xmlReader, XmlObjectSerializerReadContext context)<BR>&nbsp;&nbsp; 在 System.Runtime.Serialization.XmlObjectSerializerReadContext.ReadDataContractValue(DataContract dataContract, XmlReaderDelegator reader)<BR>&nbsp;&nbsp; 在 System.Runtime.Serialization.XmlObjectSerializerReadContextComplex.InternalDeserializeInSharedTypeMode(XmlReaderDelegator xmlReader, Int32 declaredTypeID, Type declaredType, String name, String ns)<BR>&nbsp;&nbsp; 在 System.Runtime.Serialization.XmlObjectSerializerReadContextComplex.InternalDeserialize(XmlReaderDelegator xmlReader, Int32 declaredTypeID, RuntimeTypeHandle declaredTypeHandle, String name, String ns)<BR>&nbsp;&nbsp; 在 ReadArrayOfPurchaseOrderMasterInfoFromXml(XmlReaderDelegator , XmlObjectSerializerReadContext , XmlDictionaryString[] , XmlDictionaryString[] )<BR>&nbsp;&nbsp; 在 System.Runtime.Serialization.ClassDataContract.ReadXmlValue(XmlReaderDelegator xmlReader, XmlObjectSerializerReadContext context)<BR>&nbsp;&nbsp; 在 System.Runtime.Serialization.XmlObjectSerializerReadContext.ReadDataContractValue(DataContract dataContract, XmlReaderDelegator reader)<BR>&nbsp;&nbsp; 在 System.Runtime.Serialization.XmlObjectSerializerReadContextComplex.InternalDeserializeInSharedTypeMode(XmlReaderDelegator xmlReader, Int32 declaredTypeID, Type declaredType, String name, String ns)<BR>&nbsp;&nbsp; 在 System.Runtime.Serialization.XmlObjectSerializerReadContextComplex.InternalDeserialize(XmlReaderDelegator xmlReader, Int32 declaredTypeID, RuntimeTypeHandle declaredTypeHandle, String name, String ns)<BR>&nbsp;&nbsp; 在 ReadDataPortalResultFromXml(XmlReaderDelegator , XmlObjectSerializerReadContext , XmlDictionaryString[] , XmlDictionaryString[] )<BR>&nbsp;&nbsp; 在 System.Runtime.Serialization.ClassDataContract.ReadXmlValue(XmlReaderDelegator xmlReader, XmlObjectSerializerReadContext context)<BR>&nbsp;&nbsp; 在 System.Runtime.Serialization.XmlObjectSerializerReadContext.ReadDataContractValue(DataContract dataContract, XmlReaderDelegator reader)<BR>&nbsp;&nbsp; 在 System.Runtime.Serialization.XmlObjectSerializerReadContextComplex.InternalDeserializeInSharedTypeMode(XmlReaderDelegator xmlReader, Int32 declaredTypeID, Type declaredType, String name, String ns)<BR>&nbsp;&nbsp; 在 System.Runtime.Serialization.XmlObjectSerializerReadContextComplex.InternalDeserialize(XmlReaderDelegator xmlReader, Int32 declaredTypeID, RuntimeTypeHandle declaredTypeHandle, String name, String ns)<BR>&nbsp;&nbsp; 在 ReadWcfResponseFromXml(XmlReaderDelegator , XmlObjectSerializerReadContext , XmlDictionaryString[] , XmlDictionaryString[] )<BR>&nbsp;&nbsp; 在 System.Runtime.Serialization.ClassDataContract.ReadXmlValue(XmlReaderDelegator xmlReader, XmlObjectSerializerReadContext context)<BR>&nbsp;&nbsp; 在 System.Runtime.Serialization.XmlObjectSerializerReadContext.ReadDataContractValue(DataContract dataContract, XmlReaderDelegator reader)<BR>&nbsp;&nbsp; 在 System.Runtime.Serialization.XmlObjectSerializerReadContextComplex.InternalDeserializeInSharedTypeMode(XmlReaderDelegator xmlReader, Int32 declaredTypeID, Type declaredType, String name, String ns)<BR>&nbsp;&nbsp; 在 System.Runtime.Serialization.XmlObjectSerializerReadContextComplex.InternalDeserialize(XmlReaderDelegator xmlReader, Type declaredType, String name, String ns)<BR>&nbsp;&nbsp; 在 System.Runtime.Serialization.NetDataContractSerializer.InternalReadObject(XmlReaderDelegator xmlReader, Boolean verifyObjectName)<BR>&nbsp;&nbsp; 在 System.Runtime.Serialization.XmlObjectSerializer.ReadObjectHandleExceptions(XmlReaderDelegator reader, Boolean verifyObjectName)<BR>&nbsp;&nbsp; 在 System.Runtime.Serialization.NetDataContractSerializer.ReadObject(XmlDictionaryReader reader, Boolean verifyObjectName)<BR>&nbsp;&nbsp; 在 System.ServiceModel.Dispatcher.DataContractSerializerOperationFormatter.DeserializeParameterPart(XmlDictionaryReader reader, PartInfo part, Boolean isRequest)<BR>&nbsp;&nbsp; 在 System.ServiceModel.Dispatcher.DataContractSerializerOperationFormatter.DeserializeParameter(XmlDictionaryReader reader, PartInfo part, Boolean isRequest)<BR>&nbsp;&nbsp; 在 System.ServiceModel.Dispatcher.DataContractSerializerOperationFormatter.DeserializeBody(XmlDictionaryReader reader, MessageVersion version, String action, MessageDescription messageDescription, Object[] parameters, Boolean isRequest)<BR>&nbsp;&nbsp; 在 System.ServiceModel.Dispatcher.OperationFormatter.DeserializeBodyContents(Message message, Object[] parameters, Boolean isRequest)<BR>&nbsp;&nbsp; 在 System.ServiceModel.Dispatcher.OperationFormatter.DeserializeReply(Message message, Object[] parameters)<BR>&nbsp;&nbsp; 在 System.ServiceModel.Dispatcher.ProxyOperationRuntime.AfterReply(ProxyRpc&amp; rpc)<BR>&nbsp;&nbsp; 在 System.ServiceModel.Channels.ServiceChannel.HandleReply(ProxyOperationRuntime operation, ProxyRpc&amp; rpc)<BR>&nbsp;&nbsp; 在 System.ServiceModel.Channels.ServiceChannel.Call(String action, Boolean oneway, ProxyOperationRuntime operation, Object[] ins, Object[] outs, TimeSpan timeout)<BR>&nbsp;&nbsp; 在 System.ServiceModel.Channels.ServiceChannel.Call(String action, Boolean oneway, ProxyOperationRuntime operation, Object[] ins, Object[] outs)<BR>&nbsp;&nbsp; 在 System.ServiceModel.Channels.ServiceChannelProxy.InvokeService(IMethodCallMessage methodCall, ProxyOperationRuntime operation)<BR>&nbsp;&nbsp; 在 System.ServiceModel.Channels.ServiceChannelProxy.Invoke(IMessage message)</P>
<P>Exception rethrown at [0]: <BR>&nbsp;&nbsp; 在 System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage reqMsg, IMessage retMsg)<BR>&nbsp;&nbsp; 在 System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData&amp; msgData, Int32 type)<BR>&nbsp;&nbsp; 在 Csla.Server.Hosts.IWcfPortal.Fetch(FetchRequest request)<BR>&nbsp;&nbsp; 在 Csla.DataPortalClient.WcfProxy.Fetch(Type objectType, Object criteria, DataPortalContext context) 位置 E:\DCMS\Product\Project\EbChainSolution\Csla\DataPortal\Client\WcfProxy.cs:行号 90<BR>&nbsp;&nbsp; 在 Csla.DataPortal.Fetch(Type objectType, Object criteria) 位置 E:\DCMS\Product\Project\EbChainSolution\Csla\DataPortal\Client\DataPortal.cs:行号 203<BR>&nbsp;&nbsp; 在 Csla.DataPortal.Fetch[T](Object criteria) 位置 E:\DCMS\Product\Project\EbChainSolution\Csla\DataPortal\Client\DataPortal.cs:行号 156<BR>&nbsp;&nbsp; 在 EbChain.BusinessObject.PurchaseOrderMasterList.GetPurchaseOrderList() 位置 E:\DCMS\Product\Project\EbChainSolution\EbChain.BusinessObject\PurchaseOrderMasterList.NH.cs:行号 89<BR>&nbsp;&nbsp; 在 EbChain.Web.BLL.PurchaseOrder.GetList() 位置 E:\DCMS\Product\Project\EbChainSolution\EbChain.Web.BLL\PurchaseOrder.cs:行号 41<BR>&nbsp;&nbsp; 在 ConsoleApplication1.Program.Main(String[] args) 位置 E:\DCMS\Product\Project\EbChainSolution\ConsoleApplication1\Program.cs:行号 10<BR>&nbsp;&nbsp; 在 System.AppDomain._nExecuteAssembly(Assembly assembly, String[] args)<BR>&nbsp;&nbsp; 在 System.AppDomain.ExecuteAssembly(String assemblyFile, Evidence assemblySecurity, String[] args)<BR>&nbsp;&nbsp; 在 Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()<BR>&nbsp;&nbsp; 在 System.Threading.ThreadHelper.ThreadStart_Context(Object state)<BR>&nbsp;&nbsp; 在 System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)<BR>&nbsp;&nbsp; 在 System.Threading.ThreadHelper.ThreadStart()<BR></P>
<P>&nbsp;</P>
<P>&nbsp;</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>lonely7345 replied on Wednesday, January 30, 2008</h2><P>I <FONT color=#000000>think</FONT> i have found the reason .Nhibernate type Ilist&nbsp; <STRONG>serialization.</STRONG></P>
<P><STRONG>when i get a single object .it's ok.</STRONG></P>
<P><STRONG></STRONG>&nbsp;</P></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
