<html><header><title>CSLALight QueryCompleted consuming non-null exception</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>CSLALight QueryCompleted consuming non-null exception</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/6966.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>Jack posted on Tuesday, May 19, 2009</h2>Rocky,<br><br>There is some logic in the QueryCompleted that is consuming exceptions - the note says it is for null reference exceptions but I am getting exceptions in there that are non null.&nbsp; I'm using the Microsoft CAL and if an injected view fails to initialize (say a AG_E_PARSER_BAD_TYPE Error from badly formed XML) I get a Microsoft.Practices.Unity.ResolutionFailedException&nbsp; which is then basically consumed and never rises out of there.&nbsp; I'm assuming its due to the async call from the dataprovider which is completing after the failed creation after the view/usercontrol.<br><br>Just a FYI - A this point it isn't an issue as my UI is blank so I know something is wrong and I can see in the debugger but I'm sure it could hide something.<br><br>I'm running the 3.6.3 build.<br><br>jack<br><br>private void QueryCompleted(object sender, EventArgs e)<br>&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; IDataPortalResult eventArgs = e as IDataPortalResult;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; SetError(eventArgs.Error);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; SetObjectInstance(eventArgs.Object);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; try<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; OnDataChanged();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; catch (Exception ex)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // Silverlight seems to throw a meaningless null ref exception<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // and during page load there are possible timing issues<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // where these events may cause non-useful exceptions<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // and this is a workaround to ignore the issues<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; var o = ex;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; RefreshCanOperationsValues();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; this.IsBusy = false;<br>&nbsp;&nbsp;&nbsp; }<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Tuesday, May 19, 2009</h2><P>I'm not sure this would ever cause you an actual problem though.</P>
<P>This doesn't prevent normal page load exceptions like you are talking about. It merely prevents the raising of the DataChanged event from causing the data provider to fail.</P>
<P>So I suppose it could make debugging harder in one narrow case: where you have a custom control that is handling DataChanged, and in your event handler you have a scenario where an exception is thrown. In that one case you'd lose valuable information, because your event handler's exception would be swallowed.</P>
<P>I suspect that is a rare scenario (though I could be wrong).</P>
<P>But it is also possible that the null ref exception was an artifact of SL 2.0 beta, or maybe SL 2.0 and is gone in SL 3.0?</P></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
