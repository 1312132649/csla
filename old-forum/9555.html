<html><header><title>Implementing a CslaIdentity subclass in the object factory</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Implementing a CslaIdentity subclass in the object factory</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/9555.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>MichaelBBonner posted on Monday, September 20, 2010</h2><p>This is for CSLA 4.01:</p>
<p>I have implemented a custom identity class that inherits from CslaIdentity.&nbsp; I have the data access portions working in embedded DataPortal_Fetch methods inside my custom class.&nbsp; The rest of my app business objects all use data access code located in Object Factory classes.&nbsp; I&#39;m a bit stuck on how to migrate my identity class DataPortal_Fetch method to an object factory method.&nbsp; Specifically, I&#39;m able to&nbsp;populate all of my custom identity properties throught the setproperty methods, but I&nbsp;can&#39;t figure out how to&nbsp;access the protected IIdentity properties that are implemented in the CslaIdentity base class (AuthenticationType, IsAuthenticated and the Name properties.)</p>
<p>Can anyone give me any hints on how I should do this?&nbsp; All the samples I&#39;ve found either use the DataPortal_Fetch code or if they implement an object factory they&#39;re not inheriting from CslaIdentity with it&#39;s protected properties.</p>
<p>Thanks...</p>
<p>Mike :-)</p></div><div style='padding:0 15 3 15;background-color:lightgreen'><h2>JonnyBee replied on Tuesday, September 21, 2010</h2><p>Implement a simple Fetch method like this in yoy custom identity class:</p>
<p>

<pre style="font-family:consolas;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#cc7832;">public</span>&nbsp;<span style="color:#cc7832;">void</span>&nbsp;Fetch(<span style="color:#cc7832;">string</span>&nbsp;userName,&nbsp;<span style="color:#6897bb;">IEnumerable</span><span style="font-weight:400;">&lt;</span><span style="color:#cc7832;">string</span><span style="font-weight:400;">&gt;</span>&nbsp;roles)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#cc7832;">if</span>&nbsp;(userName&nbsp;<span style="font-weight:400;">!=</span>&nbsp;<span style="color:#cc7832;">null</span>)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Name&nbsp;<span style="font-weight:400;">=</span>&nbsp;userName;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IsAuthenticated&nbsp;<span style="font-weight:400;">=</span>&nbsp;<span style="color:#cc7832;">true</span>;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#cc7832;">var</span>&nbsp;roleList&nbsp;<span style="font-weight:400;">=</span>&nbsp;<span style="color:#cc7832;">new</span>&nbsp;<span style="color:#ffc66d;">MobileList</span><span style="font-weight:400;">&lt;</span><span style="color:#cc7832;">string</span><span style="font-weight:400;">&gt;</span>();<br /> <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#cc7832;">foreach</span>&nbsp;(<span style="color:#cc7832;">var</span>&nbsp;role&nbsp;<span style="color:#cc7832;">in</span>&nbsp;roles)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;roleList<span style="font-weight:400;">.</span>Add(role);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Roles&nbsp;<span style="font-weight:400;">=</span>&nbsp;roleList;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#cc7832;">else</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Name&nbsp;<span style="font-weight:400;">=</span>&nbsp;<span style="color:#cf5252;">&quot;&quot;</span>;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IsAuthenticated&nbsp;<span style="font-weight:400;">=</span>&nbsp;<span style="color:#cc7832;">false</span>;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Roles&nbsp;<span style="font-weight:400;">=</span>&nbsp;<span style="color:#cc7832;">new</span>&nbsp;<span style="color:#ffc66d;">MobileList</span><span style="font-weight:400;">&lt;</span><span style="color:#cc7832;">string</span><span style="font-weight:400;">&gt;</span>();<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</pre>
</p>
<p>and call this method with data loaded from in your factory class. </p>
<p>If you want to &quot;hide&quot; this method you could make it Internal and use the InternalsVisibleTo attribute to make it visible only to you ObjectFactory assembly.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>MichaelBBonner replied on Thursday, September 23, 2010</h2><p>Thanks Jonny, that was exactly what I needed!!!</p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
