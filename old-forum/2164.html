<html><header><title>Launching CSLA in our company</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Launching CSLA in our company</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/2164.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>Fellmer Lloyd posted on Thursday, January 18, 2007</h2>Hi all<br /><br />I’m a software developer for 5 Years now, but my experience in developing using OOP frameworks is equal to 0 ;-)<br />Now I’ve got the chance to change this, but I’m not sure if my ideas are good (or rather not).<br /><br />Please check my suggestions below and give me some feedback. This would be great!<br /><br /><br />In our company, we have a CRM Application which we are using additionally for Support (Error tickets, bug tracking, knowledge base and so on…).<br />Constantly we have more and more requirements to implement, and the CRM is now at it’s limit (Maintenance and performance is getting *real* ugly).<br /><br />Now we have to implement a lot of new functions, one of them is a powerful web interface.<br /><br />…I think this is the right moment to be innovative, and bring CSLA into the game :)<br />We could implement our functions in a CSLA Framework and use those in multiple UI’s (In our case WinForms &amp; Web).<br />My idea is to implement  all “CRM-Objects” (customer, contact, ticket, address) in CSLA (maybe in multiple classes, using use-cases).<br /><br />It’s possible that we change our CRM system in the next year, so I want to separate CSLA from it.<br />I was thinking about an additional DAL using Nhibernate (I found some useful posts in the forum).<br />If the CRM system change happens, we could just change the DAL and keep the “CSLA Objects”.<br /><br />Regards,<br />Fellmer</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Fellmer Lloyd replied on Friday, January 26, 2007</h2>122 Views but no comments?<br />I don't hope my ideas are *THAT* bad...<br /><br />Fellmer</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>William replied on Friday, January 26, 2007</h2><P>My personal opinion, CSLA is a good&nbsp;foundation framework for building various OLTP business applications. However, not all&nbsp;kinds of business applications can/should be&nbsp;built with CSLA. You should understand and evaluate CSLA to your context and/or&nbsp;goals and make the decision to adopt. The book from Rocky, resources on the web as well as this forum&nbsp;have a lot of information that can help you understand&nbsp;what CSLA is, how CSLA&nbsp;facilitates business&nbsp;application development, etc.&nbsp;Thus, the answer is both yes and no, that is very specific to your context.</P>
<P>Regards,<BR>William</P>
<P>&nbsp;</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Friday, January 26, 2007</h2><P>You qurestion is whether to use an abstraction layer between your new application and your existing CRM application/database?</P>
<P>I would suggest that this is exactly what you should do, yes.</P>
<P>Ideally you would not talk directly to another application's database though. That's always an expensive (in the long run) and fragile way to do application integration.</P>
<P>If your CRM system implements a set of services, you'd be far better off if you can interact with those services rather than the database directly.</P>
<P>If your CRM doesn't implement a set of services, odds are pretty good that the one you replace it with <EM>will</EM> have a set of services. This is the direction the industry seems to be moving.</P>
<P>Assuming your existing CRM doesn't expose services, what you might consider, is the idea of creating your <EM>own set of services</EM> on top of your existing CRM. Then you can build your DataPortal_XYZ methods to interact with those services.</P>
<P>The value here, is that when you move to another CRM, your services are your abstraction layer. You can alter your services to interact with this new CRM (either its database or its services or whatever), but you won't impact your business objects as long as you preserve the same service interface.</P>
<P>While a DAL or ORM also offer a layer of abstraction - they only offer it in terms of talking directly to the database. Again, that is not an ideal way to implement application integration, and this is why I bring up the idea of using a more service-oriented approach.</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Fellmer Lloyd replied on Monday, January 29, 2007</h2>Hi William, Hi Rocky<br /><br />Our CRM doesn't expose any services to use (besides some poor functions).<br />I like Rocky’s idea of using a set of services to access the CRM data (and functions).<br /><br />This would result in a "SOA-like" architecture (I don't like the term SOA too...).<br />The exposed CRM services would be consumed by the CSLA objects.<br />Which technology would be used in such a scenario? Remoting (or webservices) using DTO's (like the example in your book)?<br /><br />Thanks a lot for this suggestion, I think this would be a nice solution (although it would result in a lot of work... but if it's worth it, I can deal with that).<br /><br />Fellmer<br /></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Monday, January 29, 2007</h2><P>I would build the services using a DTO for data transfer and a factory (from the business object perspective) that hides the details.</P>
<P>In many cases you really don't want to incur the overhead of web services or other network protocols - you just want to make a direct call to a DLL. But in the future, who knows?</P>
<P>Something like this:</P>
<P>[Serializable]<BR>public class Customer : BusinessBase&lt;Customer&gt;<BR>{<BR>&nbsp; // ...<BR>&nbsp; protected override void DataPortal_Fetch(Criteria criteria)<BR>&nbsp; {<BR>&nbsp;&nbsp;&nbsp; using (DataService svc = DataServiceFactory.GetService&lt;Customer&gt;())<BR>&nbsp;&nbsp;&nbsp; {<BR>&nbsp; &nbsp;&nbsp;&nbsp; DataObjects.CustomerQuery query = new DataObjects.CustomerQuery();<BR>&nbsp;&nbsp;&nbsp; &nbsp; Csla.Data.DataMapper.Map(criteria, query);<BR>&nbsp; &nbsp;&nbsp;&nbsp; DataObjects.CustomerData result = svc.GetObject(query);<BR>&nbsp; &nbsp;&nbsp;&nbsp; _id = result.Id;<BR>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;_name = result.Name;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // etc...<BR>&nbsp;&nbsp;&nbsp; }<BR>&nbsp; }<BR>&nbsp; // ...<BR>}</P>
<P>&nbsp;</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Fellmer Lloyd replied on Tuesday, February 20, 2007</h2>Hi Rocky<br /><br />Currently, I'm planning the base architecture of our new framework.<br /><br />I want to implement the suggestions you provided (services using DTO's).<br />But I've got some more questions, maybe u can help me out again :)<br /><br />Here's the first one:<br />I'm not familiar with the factory call you provided in your example (DataServiceFactory.GetService())).<br />What patter does match to this scenario?<br />It doesn't look like the "standard" factory pattern to me (e.g. CustomerFactory.GetCustomer(query); ).<br />Is this the "class factory" pattern, or I am completely on the wrong way?<br /><br />Another question:<br />I'm not sure how to implement the services.<br />I was thinking of creating a separate application and feting the data per remoting.<br />But there would be a lot of network overhead (two serializations per DataPortal_XYZ method).<br /><br />Now I'm more near the idea of just include the "DTO Assembly" &amp; "DAL (Factory) Assembly".<br />But would this scenario fulfill the requirement of total BO / DAL decoupling?<br /><br />And the final one:<br />Is there any additional framework or class library which would support me while creating this scenario? Maybe a ORM framework like nhibernate?<br />Sadly, I haven’t made experiences with such ORM frameworks yet.<br /><br />Thank you in advance &amp; best regards,<br />Fellmer</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Fellmer Lloyd replied on Monday, February 26, 2007</h2>Hi all

No suggestions regarding this topic?
Should I provide additional information?

Best Regards,
Fellmer</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Tuesday, February 27, 2007</h2><P>I am talking about adding another layer BENEATH the business objects.</P>
<P>The app then looks like this:</P>
<P>UI<BR>Business Objects (BO)<BR>Data Access Layer (DAL)<BR>Database (DB)</P>
<P>The DAL gets the data from the DB and puts the data into data transfer objects (DTOs). Those DTOs are then returned to the BO so the BO can load itself with data.</P>
<P>The BO needs to call the DAL to start this process. To do this, the BO needs to get a reference to a DAL object. To do this, it calls a factory method that is part of your DAL.</P>
<P>So the factory method that I mentioned earlier is NOT a standard CSLA object factory method, no. It is a factory method that you implement as part of your DAL.</P>
<P>If you want to be able to easily switch from one DAL to another, you should implement your DAL using a provider pattern. You'll have one DAL assembly where you implement your factory methods, but you <EM>will not</EM> implement your actual data access logic. Instead, this assembly would dynamically load (probably using Assembly.LoadFrom()) an actual DAL assembly that does implement the data access for a specific data source.</P></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
