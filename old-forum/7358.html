<html><header><title>Silverlight - SmartDatetoDateConverter</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Silverlight - SmartDatetoDateConverter</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/7358.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>Jack posted on Wednesday, July 29, 2009</h2>I ran into a bit of a surprise when I modified the text formatting of a certain SmartDate and it didn't work after databinding.&nbsp; I had previously created a simple IValueConverter so that I could databind my SmartDate properties.<br><br>My mistake/oversight was that I was simply returning a new SmartDate( ) from the ConvertBack which was binded to a DatePicker control.&nbsp; What happened of course is that the new SmartDate didn't have the updated text formatting.&nbsp; While it wasn't a big deal to 'reset' the textFormat in the set accessor it would be a pain if I did that a lot.<br><br>Does anybody have a better implementation?&nbsp; I don't know exactly about the internals of the IValueConverter but I didn't think that copying the FormatText to a local variable would work as I assume there is only one converter created per control.<br><br>Any ideas?&nbsp; I know there is the option of databinding to the SmartDate.Text as well but if the 3rd party control take date then that makes more sense althought I suppose I could create a converter for that as well.<br><br><blockquote>&nbsp;public class SmartDateToDateConverter : IValueConverter<br>&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (value == null || ((SmartDate)value).IsEmpty) return null;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return ((SmartDate)value).Date;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //if (value == null) return new SmartDate(SmartDate.EmptyValue);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return new SmartDate((DateTime?)value);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; }<br><blockquote><br></blockquote></blockquote></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Jack replied on Wednesday, July 29, 2009</h2>While I'm still interested if anybody has some ideas I did change my property set accessor to:<br><br>&nbsp; _setupProgramStartDate.Date = value.Date;<br><br>instead of<br><br>&nbsp; _setupProgramStartDate = value;<br>&nbsp; _setupProgramStartDate.FormatString = "dddd, MMMM dd, yyyy" <br><br>At least that way I don't have to set the FormatString multiple times<br></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
