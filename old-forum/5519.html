<html><header><title>Is there a Per-Type CanWriteProperty Technique?</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Is there a Per-Type CanWriteProperty Technique?</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/5519.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>rahulbpatel posted on Thursday, October 02, 2008</h2>I don't know if this has been covered already but I couldn't find it searching the forum.&nbsp; Is there a way in version 3.5 to set AllowWrite/DenyWrite for properties at the type scope and then check in the UI if the current user has access to edit a particular property?&nbsp;&nbsp; What I'm trying to do is set the authorization for a business class and then hide/show certain fields based on the authorization rules.&nbsp; I currently have this code in my business class:<br><br>public class MyBusinessClass : BusinessBase&lt;MyBusinessClass&gt;<br>{<br>&nbsp;protected override void AddAuthorizationRules()<br>&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // TODO: add authorization rules<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //AuthorizationRules.AllowWrite("", "");<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // These users cannot use a budget code<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; AuthorizationRules.DenyWrite("Property1", "Role1");<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; AuthorizationRules.DenyWrite("Property1, "Role2");<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; AuthorizationRules.DenyWrite("Property1, "Role3");<br>&nbsp;&nbsp;&nbsp; }<br>}<br><br>I would like to be able to call in my UI:<br><br>InputTextBox.Visible = MyBusinessClass.CanWriteProperty("Property1")<br><br>Current I can only do this if I have an instance of the class.<br><br>Thanks...<br><br><br><br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Thursday, October 02, 2008</h2><P>I would consider the per-type CanEditObject() in 3.6 to match your request. That indicates whether the user is allowed to edit (call Save() on) the object or not.</P>
<P>If that is true, then the per-property rules have meaning. If that is false, then the user shouldn't get to edit the object at all.</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>rahulbpatel replied on Monday, October 06, 2008</h2>Does this scenario makes sense?&nbsp; In an ASP.NET web app I would like to insert a record via a FormView control.&nbsp; Depending on the role the user is in they maybe only to set certain fields.&nbsp; So when the load FormView is initially created, I would like to set the visibility of inputs in the FormView.ItemCreated event.&nbsp; If I could do this via static/type-scope methods then I wouldn't need to instantiate an object at this point.&nbsp; <br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JonnyBee replied on Saturday, October 04, 2008</h2>I will agree with Rocky. In a WinForms application you should use the ReadWriteAuthorizationManager to do exectly what you described here. Using the RWAM you vould only write one line of code instead of writing code for each input control. <br><br>I have also overridden the CanWriteProperty/CanReadProperty for instance methods to check the data content and the tell the UI if the properties are editable/readable. <br><br>Another option is to create your own bool properties (AllowRead../AllowWrite...) per field and use databinding on the Visible/Enabled/ReadOnly properties in the UI. <br><br>The reason I like to override the CanRead.../CanWrite.. in my BO is that in this way my BOs will proptect themselves and throw an exception if the user/ui/calling code is not allowed to read/change a property.&nbsp; I prefer to have this loginc in the BO and use the RWAM to do all the UI control setting (ReadOnly/Enabled/Visible). <br><br>/jonny<br></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
