<html><header><title>Serialization bug revisited?</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Serialization bug revisited?</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/12141.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>Michael posted on Tuesday, September 03, 2013</h2><p>Hi everyone</p>
<p>We&#39;ve recently upgraded to CSLA 4.5.30 using NuGet.</p>
<p>Our application loads plug-ins from different directories using MEF. When a plug-in hits DataPortal.Execute() inside a command derived from CommandBase, we are getting the following:</p>
<p> System.Runtime.Serialization.SerializationException: Unable to find assembly &#39;Company.Product.Business, Version=x.x.x.x.</p>
<p>The silly part is that the command in question is defined in this very assembly.</p>
<p>If we move the plug-in assemblies into the same directory as the main application, the bug disappears. (This is not an acceptable workaround.) </p>
<p>So, is it the old serialization bug revisited?</p>
<p>With older versions of CSLA, we included the source project in our solution and had modified versions of the serialization bug workaround in DataPortal and EnterpriseServicesPortal, which had a recursion check.</p>
<p>Now that we&#39;re relying on NuGet, how can we fix this?</p>
<p>Thanks in advance.</p>
<p>&mdash;Michael</p></div><div style='padding:0 15 3 15;background-color:lightgreen'><h2>RockfordLhotka replied on Thursday, September 05, 2013</h2><p>It sounds like the same issue. And it could be possible because the issue occurs when assemblies are dynamically loaded in some circumstances (I&#39;m sure there&#39;s a pattern, but I don&#39;t know the specific rules).</p>
<p>I&#39;m not sure any code containing the workaround is still in the core CSLA codebase, so you might need to add it directly to your app&#39;s startup code.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Michael replied on Thursday, September 05, 2013</h2><p>Thanks&nbsp; for the reply, Rocky.</p>
<p>Running the old workaround code on startup has fixed it.</p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
