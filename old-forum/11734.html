<html><header><title>Version 4.5 data portal changes - async behaviors</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Version 4.5 data portal changes - async behaviors</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/11734.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka posted on Thursday, December 06, 2012</h2><p>The behavior of the data portal &nbsp;has changed quite a bit from 4.3 to 4.5. This is because the data portal in Silverlight now works the same as in other platforms, and because BeginXYZ and XYZAsync now work the same.</p>
<p>One primary area of change is when calling BeginCreate or BeginFetch and using the <i>local data portal</i>, the calls aren&#39;t forced to be async. In other words, the data portal doesn&#39;t spin up a background thread for the &#39;server-side&#39; code.</p>
<p>This is because the DataPortal_XYZ methods can now be declared with the async keyword and so can make use of all the cool new async features in .NET 4.5.</p>
<p>Right now I&#39;ve recorded this behavior as a bug, but as I look at &quot;fixing&quot; the bug, I&#39;m not sure that a fix is actually a good thing.</p>
<p>In other words, right now the &nbsp;data portal is the same for all platforms. And BeginCreate/BeginFetch are the same as CreateAsync and FetchAsync - they all follow the same basic rules.</p>
<p>If I make the BeginCreate/BeginFetch methods spin up threads to call the data portal, then I do preserve the 4.3 behaviors for the local data portal, but there won&#39;t be parity between those methods and their CreateAsync/FetchAsync counterparts.</p>
<p>I&#39;m torn between backward compatibility and overall functional parity.</p>
<p>As a result I am interested in input. Do you think it is better to preserve backward compatibility in this case, or is it better to require changes to existing BeginXYZ code to bring that code more in line with the new capabilities provided by the async/await keywords?</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Thursday, December 06, 2012</h2><p>Or I suppose an option is for CreateAsync/FetchAsync to spin up a thread too - but in many cases that just creates overhead that isn&#39;t necessary. So I really don&#39;t think that&#39;s a good option.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>tiago replied on Friday, December 07, 2012</h2><p><div style='padding-left: 50px;background-color:silver'><b>RockfordLhotka<br></b>
<p>In other words, right now the &nbsp;data portal is the same for all platforms. And BeginCreate/BeginFetch are the same as CreateAsync and FetchAsync - they all follow the same basic rules.</p>
<p>(...)</p>
</p>
<p>I&#39;m torn between backward compatibility and overall functional parity.</p>
<p></div></p>
<p>Hi Rocky,</p>
<p>I think functional parity is the way to go. I know you try to avoid breaking changes as much as you can, but&nbsp;this isn&#39;t the first and it won&#39;t be the last. This only affects Silverlight code (and WP? and WinRT?) and Silverlight code is very specific. I believe some old users might prefer no breaking changes but new users might find functional parity easier to deal with</p>
<p>As I use generated code, for me it&#39;s just a question of changing or not changing the templates.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Adalton4 replied on Friday, December 07, 2012</h2><p>I vote for the functional parity.</p>
<p>While i fully agree with is what stated, i want to add that when my projects have to be ported to 4.5, they will need a refactoring of the codebase, so this can be taken into account with.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Killian35 replied on Friday, December 07, 2012</h2><p>As time goes on we will all be moving towards the new capabilities, so functional parity is a good thing. I wouldn&#39;t want to spin up threads just because. Is the creating of unnecessary threads the &#39;async behaviors&#39; you&#39;re concerned with?</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Friday, December 07, 2012</h2><p>I want to make sure everyone understands that this is not just a SL change.</p>
<p>The BeginXYZ methods used to spin up a thread for WPF and Windows Forms as well, so the change to make them work like the XYZAsync methods affects everyone other than web developers (if you used the BeginXYZ methods).</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Russ replied on Friday, December 07, 2012</h2><p>I vote for functional parity as well.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>kgulden replied on Thursday, January 10, 2013</h2><p>After <strong>discovering</strong> this behavioral change the hard way.&nbsp;I vote for functional parity too.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Jaans replied on Thursday, January 10, 2013</h2><p>I vote for functional parity (and thus consistency).</p>
<p>We have spent quite a bit of time with 4.5 by now (under both .NET and Silverlight) and after becoming comfortable with the Async behaviour, it would be highly preferable if this is consistent throughout without there being &quot;gotcha&#39;&#39;s if you are running a different portal, or technology platform.&nbsp;</p>
<p>A team member has actually commented saying &quot;why don&#39;t we just have a single async factory and get rid of the synchronous and DataPortalResult overloads&quot;.</p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
