<html><header><title>Configuration / deployment newbie head-scratching...</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Configuration / deployment newbie head-scratching...</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/4357.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>dbsaxman posted on Friday, February 15, 2008</h2>Apologies in advance if I seem a bit dense.&nbsp; Though I've read the book Expert C# 2005 Business Objects, and even some chapters numerous times (such as Chapter 12), I'm still having difficulty understanding how to move forward with CSLA, primarily with respect to configuration, deployment etc.&nbsp; <br><br>From the reading it seems the "remoting" portal makes the most sense for me.&nbsp; But I'm still having a gap in understanding, mainly because I haven't quite got the sample app working.&nbsp; So I'll just try to explain our environment and what I'd like to do.&nbsp; I'd like to use CSLA on an internal website within our company.&nbsp; I've got the sample PTWeb app running to some degree on my local machine (I can run it and the web pages display, but I can't edit the data).&nbsp; I'm still getting an error trying to run the app on my development machine.&nbsp; I'm inclined to not worry about it too much, because we don't use SQL Express or MDF files in the real world and I'd just like to get the app running using the regular SQL Server (we have SQL 2000 in production, soon to upgrade to 2005; and I have SQL Server 2005 on my development machine).&nbsp; In any case, the error is:<br><br><span id="ctl00_ContentPlaceHolder1_ErrorLabel">Failed to update database "C:\CSLA\PROJECTTRACKER20CS\WWW\PTWEB\APP_CODE\PTRACKER.MDF" because the database is read-only.<br><br></span>But as I said I'm inclined to not worry about that, and just try to get it working with our existing SQL Server.&nbsp; My setup is as follows:<br><br>On my development machine I have Visual Studio 2005 and SQL Server 2005.&nbsp; I've got IIS 5.1 running on the dev machine.&nbsp; I write code in ASP.NET 2.0 / C# 2005.&nbsp; Our production app is an internal web server that runs some ASP.NET 1.0 and ASP.NET 2.0 apps.&nbsp; Physically, there's a web server machine (running IIS 6.0) and a database server machine (running SQL Server 2000).&nbsp; We use Windows integrated security to differentiate users with different security levels with respect to the website.&nbsp; I'd like to continue using integrated security when I introduce CSLA.<br><br>I have a project that would seem to perfectly lend itself to the use of CSLA.&nbsp; The business objects I expect to design are similar to the sample app.<br><br>Here's what I'd like to do, and my questions.&nbsp; Any suggestions would be greatly appreciated.<br><br>a) I want to get the sample app running, but using our existing SQL Server instead of SQL Express, because that's more like what we do in the real world.&nbsp; I assume that means I would need to script the databases and stored procedures so they exist on our server and point the connection strings in the web.config file to the appropriate server and database, etc.&nbsp; Is that right?<br><br>b) If I manage to do that, but assuming I'm still running the app from my development machine, I assume that means I would continue to use the "local" portal when developing.&nbsp; So at that point, I'm using IIS on the local machine, but accessing the data on the SQL Server on the database server.&nbsp; So far so good (if I can get it to work).&nbsp; Am I correct on this general point also?<br><br>c) Here's where I really need help understanding and where I'm feeling a bit stupid.&nbsp; So, I assume to deploy the app to production (i.e., to the web server), I would just essentially flip a switch in the config file - i.e., tell CSLA to use the remoting portal instead of the local portal.&nbsp; In other words I would do what it says to do in Chapter 12, regarding the remoting portal; i.e., comment out those lines when I'm developing and using the local portal, then implement those lines when I want to deploy.&nbsp; Then as I change code, I assume in Visual Studio I would just "Publish Web Site" ?&nbsp; And then it all just magically works?&nbsp; This is what I don't quite get from all the reading of the book and the forums... in other words, if I just deploy all the files (as in PTWeb for example) and the web.config file contains the lines as described in Chapter 12, it should all just work with respect to IIS etc?&nbsp; Or is there something else that runs on the web server with respect to CSLA?<br><br>Any help appreciated.&nbsp; Thanks.&nbsp; --Dave Barrows<br><br><br><br><br><br><br><br><br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JoeFallon1 replied on Friday, February 15, 2008</h2><P>Don't worry too much about the sample app. I never got it running - you don't need it to understand the concepts.</P>
<P>The biggest idea about local and remote dataportals concerns this question:</P>
<P>Can&nbsp;the Web Server make a connection to the Database or not? If the answer is Yes then you will end up using a local data portal. So in your case I think your Dev and Production environments will both be local dataportals.</P>
<P>If the answer is NO then 1 web server has to communicate with a 2nd web server. The 2nd web server talks to the DB. This is the remoting scenario. It does not apply to you. This scenario is most often seen when the 1st Web Server is in the DMZ and must be firewalled off from the company network. This web server remotes BOs to the 2nd server inside the firewall which then talk to the DB and then serialize themselves back to the first server.</P>
<P>&nbsp;</P>
<P>Joe</P>
<P>&nbsp;</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>dbsaxman replied on Friday, February 15, 2008</h2>Hi Joe, thanks for the information, very helpful.<br><br>Yes, the web server can make a connection to the database.&nbsp; Based on your statement then, I'll use the local data portal.<br><br>I appreciate your reply, thanks again,<br><br>Dave<br><br></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
