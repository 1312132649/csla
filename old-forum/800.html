<html><header><title>When to use BO Collections or Dataset?</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>When to use BO Collections or Dataset?</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/800.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>ward0093 posted on Thursday, August 03, 2006</h2><P>I am doing a lot of collections lately... and curious to when we should be loading up a collection of BOs and when to use a simple Dataset.</P>
<P>My issues are that my BO Collections... or I mean my BO Chain that is being added to the collection is large (Parent, Childs, GrandChilds, etc) and i am seeing a slight performance hit using a BO Collection.</P>
<P>So at what point (recordcount) do you switch over to using a Dataset?</P>
<P>&nbsp;</P>
<P>ward0093</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Thursday, August 03, 2006</h2>You don't; exposing a DataSet is the opposite of what you're trying to accomplish with a business layer.&nbsp; As soon as your data structure changes, your UI is now broken.. not to mention that you now need to find some place else to code your business rules.<br><br>From your comments, it sounds like you've modeled your business objects on your data tables, which isn't the right way to go (well, if you're buying into Csla and n-tier design at least).&nbsp; You should be modeling based on behavior.&nbsp; Its unlikely that your users would load the parent object, edit its child and grandchildren, and save it all as a single transaction.&nbsp; Likely, they can edit children without needing to edit the parent, etc.&nbsp; Is there a reason that&nbsp; you need to load a parent and other children if the user only wants to edit ONE of the children?<br><br>Andy<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ward0093 replied on Thursday, August 03, 2006</h2><DIV><SPAN class=512523115-03082006><FONT face=Arial color=#0000ff size=2>Well... maybe I need to create a couple if different Objects instead of using one object (or a chain of objects) to do everything?</FONT></SPAN></DIV>
<DIV><SPAN class=512523115-03082006><FONT face=Arial color=#0000ff size=2></FONT></SPAN>&nbsp;</DIV>
<DIV><SPAN class=512523115-03082006><FONT face=Arial color=#0000ff size=2>This is a Invoice (Parent)&nbsp;-&gt; Child Line Items -&gt; Child Payment Types -&gt; Child Customer.</FONT></SPAN></DIV>
<DIV><SPAN class=512523115-03082006><FONT face=Arial color=#0000ff size=2></FONT></SPAN>&nbsp;</DIV>
<DIV><SPAN class=512523115-03082006><FONT face=Arial color=#0000ff size=2>I was loading them up (over 100 of them) into the collection.&nbsp; Is this correct?&nbsp; to load up 100~200 objects into a collection?</FONT></SPAN></DIV>
<DIV><SPAN class=512523115-03082006><FONT face=Arial color=#0000ff size=2></FONT></SPAN>&nbsp;</DIV>
<DIV><SPAN class=512523115-03082006><FONT face=Arial color=#0000ff size=2>curious if I am doing this correctly?</FONT></SPAN></DIV>
<DIV><SPAN class=512523115-03082006><FONT face=Arial color=#0000ff size=2></FONT></SPAN>&nbsp;</DIV>
<DIV><SPAN class=512523115-03082006><FONT face=Arial color=#0000ff size=2>ward0093</FONT></SPAN></DIV></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JonM replied on Thursday, August 03, 2006</h2>I would recommend trying to break that up a bit.&nbsp; Do you really need to load and manipulate all of those at once?&nbsp; I use the lightweight read-only collections a lot.</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>xal replied on Thursday, August 03, 2006</h2>ward,<br>There's nothing wrong with that if that is your requirement...<br><br>If you used a datatable, you'd still be loading 100~200 datarow objects in a datatable, which is also a collection (of datarows :) )<br><br>Andrés<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Thursday, August 03, 2006</h2>Ahh... I'm also delving into the Invoice world.<br><br>What is your use case?&nbsp; Is it editing the Invoice?&nbsp; If that's the case, a parent Invoice would contain a collection of LineItems.&nbsp; I'm not sure why LineItems need a collection of payment types.. could you elaborate on what you're trying to accomplish?<br><br>The customer should be a readonly object at most; you can have a Customer Property on your Invoice to set / get the customer for which the invoice is meant.&nbsp; Alternately you can just keep a customer id on the invoice, and expose properties on the invoice like Customer Name, Address, etc.<br><br>There are quite a few ways to go, but if you post the requirements from your use cases, I'm sure others here can help.<br><br>Andy<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ward0093 replied on Friday, August 04, 2006</h2><P>Sorry... I wasn't clear</P>
<P>My BO Setup is:</P>
<P>ParentInvoice Object contains a Property for the following:</P>
<P>LineItemsCol (child to Invoice)</P>
<P>PaymentTypesCol (child to Invoice)</P>
<P>CustomerBO (child to Invoice)</P>
<P>&nbsp;</P>
<P>So I guess I am simply asking what kind of performance difference am I going to see if I load up a InvoicesCollection Object (of the structure above) versus loading up a DataSet?</P>
<P>ward0093</P>
<P>&nbsp;</P>
<P>&nbsp;</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>xal replied on Friday, August 04, 2006</h2>For that number of children, the difference will not be huge. But csla should be always faster.<br><br>Although, if you're running tests, you need to consider that the dataportal has a small overhead. That has nothing to do with the time the objects load, so if you want to run accurate tests you could load the dataset through the dataportal and measure how much time it takes to retrieve the dataset and the csla structure.<br>Also, datasets are much much bigger when serialized, so that is a big con for them.<br>One last thing, consider that bos generally have rules, so that's another thing you need to consider in measuring. Also, in 2.1 rules can be loaded per type, instead of per instance, and that is a big improvement.<br><br>Andrés<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ward0093 replied on Saturday, August 05, 2006</h2><P>Your right!.... I just loaded up 100 Invoice Objects with all the children and grandchildren... and it was FAST!!!</P>
<P>I am a little amazed... I had, in my mind, that Object Creation and Loading had some sort of overhead.</P>
<P>anyways... it is great... and with high performance.</P>
<P>thanks for your help,</P>
<P>ward0093</P></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
