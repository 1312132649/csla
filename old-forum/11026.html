<html><header><title>Getting property values</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Getting property values</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/11026.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 posted on Wednesday, December 28, 2011</h2><p>Let me start by describing my use case.</p>
<p>I have a system to allow a user to do a return (say like a tax return).&nbsp; Currently, there is an admin side that allows admins to define support documents for a return.&nbsp; They all display.&nbsp; </p>
<p>The new requirement is to filter the list of supporting documents depending on values from the return.&nbsp; For each document, a list of criteria can be configured by administrators which define if the document should show for each particular return.&nbsp; I have a fixed set of fields that can be used, various operators (equals, contains, greater than, etc) and a user defined value (string for string fields, date for date fields, etc.).</p>
<p>My decision was to add a method to the SupportingDocument RO object that takes an article (done with interfaces to make unit testing easier).&nbsp; In this way the list can be filtered easily.</p>
<p>I&#39;m now implmenting objects which do the comparisons, basically these reperesent each operator.&nbsp; Its their responsibility to do the comparison with the value on the return (they already know the value defined by the admin).&nbsp; </p>
<p>This is where I&#39;d like some feedback.&nbsp; It looks like the Csla.Core.FieldManager.FieldDataManager can read the value.&nbsp; I have no problem doing this, I&#39;ll just have to put an interface around it for the unit tests, but I just wanted to be sure there&#39;s no better option.</p>
<p>Also, with the design of the objects; they&#39;ll have a reference to an object field which is the value defined by the admins, and an IPropertyInfo, which is what I&#39;m planning to use to get the value in an aribtrary way.&nbsp; I realize that PropertyInfo&lt;T&gt; doesn&#39;t serialize and is recreated on both ends of the DataPortal.&nbsp; So these operator classes, should I just build them on the client side of the dataportal?&nbsp; That implies that I&#39;d need to have the RO object carry around the data needed to do so.&nbsp; Not a big deal, but I&#39;m wondering how best to handle that as well.&nbsp; Simple DTOs that inherit MobileObject?&nbsp; The value will be a primative type (string, DateTime) and probably just some arbitrary primative type to tell a factory what property info to grab.</p></div><div style='padding:0 15 3 15;background-color:lightgreen'><h2>ajj3085 replied on Saturday, December 31, 2011</h2><p>Well I went ahead with the above.&nbsp; The only thing that tripped me up a litle was FieldDataManager returns null it seems if the property has never been set.&nbsp; But that&#39;s easy enough to handle.&nbsp; So unless someone has a better way, or a reason why this shouldn&#39;t be done, I think I&#39;m set.</p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
