<html><header><title>Frustrating issue deploying an application in Release mode</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Frustrating issue deploying an application in Release mode</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/3409.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>gderoeck posted on Tuesday, August 21, 2007</h2><P>Hello,</P>
<P>This may not be a CSLA issue, but I thought I'd ask just in case........</P>
<P>I have a page that works fine in debug mode but then fails with the error below in Release mode:</P>
<P>DataPortal.Fetch failed (System.InvalidCastException: Unable to cast object of type 'System.Int32' to type 'System.String'.<BR>&nbsp;&nbsp; at System.Data.SqlClient.SqlBuffer.get_String()<BR>&nbsp;&nbsp; at System.Data.SqlClient.SqlDataReader.GetString(Int32 i)<BR>&nbsp;&nbsp; at Csla.Data.SafeDataReader.GetString(Int32 i) in C:\Visual Studio 2005\Projects\csla20vb2\csla20vb\Csla\Data\SafeDataReader.vb:line 48<BR>&nbsp;&nbsp; at Csla.Data.SafeDataReader.GetString(String name) in C:\Visual Studio 2005\Projects\csla20vb2\csla20vb\Csla\Data\SafeDataReader.vb:line 61<BR>&nbsp;&nbsp; at AMCSLAHangerLib.PilotInfo.PilotInformation.DataPortal_Fetch(Criteria criteria))</P>
<P>This occurs when a user clicks a tree node, calling a GetObject method from an Editable Root object.&nbsp; The web&nbsp;project references a class library in the same solution.&nbsp; Like I said, it works fine in debug mode.&nbsp; I'm using VS2005 and CSLA v2.1.4.</P>
<P>I've tried to solve the issue by reloading and re-referencing the CSLA dll in the class library as well as re-referencing the class library from the web project.&nbsp; Nothing seems to work and gives me the same error every time.</P>
<P>Any insight would be appreciated.&nbsp; Thank you!</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>juddaman replied on Tuesday, August 21, 2007</h2>Hi<br>

<p class="MsoNormal"><span>Probably an obvious point but are you using
the same database for debug and release?<o:p></o:p></span></p>

George<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>GaltSalt replied on Tuesday, August 21, 2007</h2><P>You probably have strict on in release mode.</P>
<P>without it, there's an implicit convertion between one of your AMCSLAHangerLib.PilotInfo.PilotInformation columns that you think is a string. It's not. It's an integer. Turn strict on in debug mode, temporarily put a try catch around your dr read&nbsp;and walk through your fetch for that object and you'll see which one is really an int rather than a string.</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>gderoeck replied on Tuesday, August 21, 2007</h2><P>Robert,</P>
<P>Thank you for the response - I would like to try that, but how do you turn strict on and off?</P>
<P>George - the database isn't even being hit.&nbsp; It's failing before the fetch function in the class is being reached.</P>
<P>Thanks again for any input.</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>GaltSalt replied on Wednesday, August 22, 2007</h2><P>In your project's cofig pages in Visual Studio...what verision do you have?</P>
<P>I think in both, if you right&nbsp;click on the project in the solution explorer, select properties, then select the tab for compile or build options, you'll see either a drop down or checkbox for strict option. You can also define it in Code at the top of your file (the very first line!) </P>
<P>Option Strict On&nbsp;</P></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
