<html><header><title>Error in CopyState?</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Error in CopyState?</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/7029.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 posted on Monday, June 01, 2009</h2>Hi,<br /><br />I have a BB class, and it's getting an excepton when I try to edit it in a grid (it's in a collection, which is also a child of another BO).<br /><br />The message is ArgumentException: An entry with the same key already exists.  when CopyState is called.<br /><br />I thought this was fixed in a recent Csla version, but I wanted to check it was before I upgrade Csla to fix this.  <br /><br />I'm using the 3.6.3 test version released around 5/19.<br /><br />Thanks<br />Andy</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Monday, June 01, 2009</h2>I remember a bug about this, and using the type name + the field name as a key, going through a while ago, I'm pretty sure it was fixed in 3.6.3.</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Tuesday, June 02, 2009</h2>Rocky, this bug still seems to exist, I just upgraded to the Beta 2 version.<br /><br />My class hiearchy is this:<br /><br />DiscountLineItem : CalculatedFeeLineItem : NonReparentableLeafNode : LeafNode : LeafContainer : MyBB&amp;lt;LeafContainer&amp;gt;<br /><br />The Discount and CalcualtedFee classes both contain a private field, SmartDemial lastAmount.<br /><br />All fields in all levels of this hierarchy are unmanaged.</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Tuesday, June 02, 2009</h2>You are right - I see the issue. This will (hopefully) be the last fix in<br />3.6.3 :)<br /><br />Rocky</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Tuesday, June 02, 2009</h2>Whew, I thought it was something I did.  Fortunately for me, I think I can proceed, because the field isn't needed in the last subclass, I just didn't remove it.</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Tuesday, June 02, 2009</h2>If you grab the latest UndoableBase.cs from svn you should be good to go.<br /><br />Rocky</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Tuesday, June 02, 2009</h2>Ok, I'll give it a shot.</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Tuesday, June 02, 2009</h2>That fixes it, thanks!</div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
