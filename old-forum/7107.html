<html><header><title>Reflection instead of Interface?</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Reflection instead of Interface?</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/7107.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>LParker posted on Monday, June 15, 2009</h2><P>Is there a particular reason that CSLA uses reflection to access the DataPortal_XYZ methods?&nbsp; If I rename DataPortal_Fetch in my business object, I get a runtime exception.&nbsp; Obviously I shouldn't be doing this, but it's a private method which would lead me to think that I can call it whatever I want (although how else would CSLA know about a private method except via reflection).</P>
<P>Why doesn't the framework use an interface or overrides of protected virtual methods to get at these data access methods?&nbsp; You'd get the advantage of compile-time checking, and I would think it would be much faster than reflection as well.</P>
<P>-Larry</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Tuesday, June 16, 2009</h2>Probably because the interface would have to be public, thus allowing anyone to call the DP_xyz methods... say for example your UI developer.<br /><br />That pretty much goes against everything Csla is built upon.  So while it's true you'll get an exception, you'll get a known exception that tells you exactly whats wrong.  Every framework has its own set of rules that you must follow, or your use of the framework will be a failure.  This is one of those rules.<br /><br />As far as reflection goes, data binding uses reflection much more extensively than Csla, and no one is saying to avoid using databinding because it uses reflection.  Also, the network hop will be your largest performance bottleneck; reflection is cheap by comparison.</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>LParker replied on Tuesday, June 16, 2009</h2><P>Well I certainly wouldn't want to go against everything that CSLA was built upon.&nbsp; <img src="/emoticons/emotion-5.gif" alt="Wink [;)]" /></P>
<P>It seems that interfaces / protected methods could probably have been used with some other security mechanism, but if reflection was how it was done, then so be it.</P>
<P>&nbsp;</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Tuesday, June 16, 2009</h2>Well that's a good point, but I think the hiding is just one reason.. after all, a UI developer could also use reflection to call the method... but part of the goal is not to make it simple. :-)<br /><br />Also, consider this.  You can have multiple create or fetch factory methods, which may have different Critera objects passed.  So one DataPortal_Fetch might expect a SingleCriteria, another my expect DataPortal_Fetch( MyCustomCriteriaClasss ), etc.  Virtual methods or interface definitions wouldn't be able to define every possible type that a DataPortal_Fetch might take.  So maybe that's a better reason. :-)</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JoeFallon1 replied on Tuesday, June 16, 2009</h2>In addition to what Andy said, this topic has been brought up before. A few times in fact. It was heavily debated and Rocky answered it in depth. I just can't recall the specifics this far down the road! <br /><br />Joe<br /></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Tuesday, June 16, 2009</h2><P>First, CSLA doesn't use reflection to invoke those methods, it uses dynamic method invocation (starting in version 3.5), which is nearly as fast as normal method invocation and is much faster than reflection.</P>
<P>The two primary reasons for not using an interface are</P>
<OL>
<LI>An interface would need to be public, and so would allow code to mis-use the methods too easily</LI>
<LI>More importantly, you'd lose the method overloading feature that exists now, and you'd have to do your own casting and method routing - which people used to have to do and it was a pain</LI></OL>
<P>&nbsp;</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>LParker replied on Thursday, June 18, 2009</h2><P>Thanks all -- I appreciate the quick responses!</P>
<P>&nbsp;</P></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
