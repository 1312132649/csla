<html><header><title>AddInstanceAuthorizationRules &amp; static properties on base types</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>AddInstanceAuthorizationRules &amp; static properties on base types</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/5482.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>detritus posted on Saturday, September 27, 2008</h2>Hi,<br><br>I've got a couple of properties (for auditing purposes) always same for all BOs in my app so I'm inheriting my BOs from a base one managing these properties (I'm not using any code-gen yet). I copied Rocky's technique to force inherited static properties to register themselves (with the use of static _ForceInit variable). Everything worked great until I decided to override AddInstanceAuthorizationRules method to define instance based rules for my BO.<br><br>At this point loading data to inherited properties started to raise exceptions complaining that the properties are not registered. Debuged and see that they're registered just fine but have no index assigned to them. I think (I'm new to CSLA) those indexes are used by managed properties (which I'm using) to access storage in method GetFieldData (FieldDataManager.cs).<br><br>More debug revealed that at the time CreateConsolidatedList called (which assignes values to those indexes) my inherited class have not yet register its properties.<br><br>In short, I think using any properties on the instance during construction of the BO with inherited managed properties brokes the sequence of property indexing. Is this a bug or am I doing something wrong?<br><br>By the way, can I use instance values in method AddInstanceAuthorizationRules in the first place? This method is called from constructor when there is not data to speak of. Am I reading the name of this method wrong?<br><br>Sinan<br></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
