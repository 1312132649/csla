<html><header><title>Property change notification and Dirty state</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Property change notification and Dirty state</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/5927.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>i_am_deebo posted on Wednesday, December 03, 2008</h2>I have a business object, call it BizObject, that contains a List.&nbsp; I want to add a property on BizObject, call it IsListOkay, that returns true if the List it contains is in a "valid" state.&nbsp; Since IsListOkay is databound in a ListView and shows a different icon depending on it's state I created IsListOkay as a "dependency" property.&nbsp; This works great, whenever the state of the List changes the icon on my list view updates automatically thanks to databinding.&nbsp; The problem is whenever the List changes it changes BizObject.IsSelfDirty to true.&nbsp; Is there anyway to avoid this?<br><br>In other words, is it possible to use change notification on a property without it affecting the objects dirty state?<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Wednesday, December 03, 2008</h2>Instead of calling PropertyHasChanged, you can call OnPropertyChanged directly.&nbsp; This won't run any validation rules though, so you'll have to do that also if you don't call PropertyHasChanged.<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>SonOfPirate replied on Wednesday, December 03, 2008</h2><P>Correct me if I'm wrong, but doesn't IsSelfDirty only look at validating BizObject itself?&nbsp; IsDirty should reflect the state of any child objects or collections.</P>
<P>&nbsp;</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Wednesday, December 03, 2008</h2>That's true, but the state of a list is the combined states of its child objects. So any changed object in a list means the list has been changed.</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>SonOfPirate replied on Wednesday, December 03, 2008</h2><P>Right, but if I change a LineItem contained in my OrderItems collection, then Order.IsDirty&nbsp;would return true but Order.IsSelfDirty should remain false, yes?</P>
<P>From the original description, it sounds to me like BizObject is an object that has a collection property.&nbsp; BizObject.IsSelfDirty should not be true if only the collection has changed - unless the list's changed event is bubbled into a PropertyChanged event on the root BO, which would cause _isDirty to be true if PropertyHasChanged is called (instead of directly calling OnPropertyChanged).</P>
<P>&nbsp;</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>i_am_deebo replied on Wednesday, December 03, 2008</h2>Yes, that is what's happening.&nbsp; I didn't mention that BizObject keeps IsListOkay updated by listening to the list changed events.&nbsp; Calling OnPropertyChanged directly fixed my problem.&nbsp; Thanks.<br></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
