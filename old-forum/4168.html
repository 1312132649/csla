<html><header><title>In Csla 3.0 BindingSource.CancelEdit() is not working</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>In Csla 3.0 BindingSource.CancelEdit() is not working</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/4168.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>umesh kanyal posted on Sunday, January 13, 2008</h2><P class=MsoNormal><FONT face=Verdana size=2><SPAN>Our Scenerio is like this, we have a collection of <FONT color=blue><SPAN>CodeValue</SPAN></FONT> class that contains <FONT color=#339966><SPAN>Value,start date</SPAN></FONT> and <FONT color=#339966><SPAN>end date </SPAN></FONT>field. What happens when we click add button, immediately one object of <FONT color=blue><SPAN>codevalue</SPAN></FONT> is added to the <FONT color=blue><SPAN>CodeValueCollection</SPAN></FONT> and is displayed in the grid with blank details. A popup i.e. <FONT color=blue><SPAN>CodeValueForm</SPAN></FONT> gets opened which contains these <FONT color=#339966><SPAN>Value</SPAN></FONT> and its <FONT color=#339966><SPAN>start date</SPAN></FONT> and <FONT color=#339966><SPAN>end date </SPAN></FONT>fields<FONT color=#339966><SPAN>,</SPAN></FONT> if we enter anything in these fields and click add it gets added to the <FONT color=blue><SPAN>CodeValueCollection</SPAN></FONT> and reflected in the grid. If we tried to cancel it then the row from the collection doesnot gets removed i.e. it doesnot gets removed from the <FONT color=blue><SPAN>CodeValueCollection</SPAN></FONT> .<o:p></o:p></SPAN></FONT></P>
<P class=MsoNormal><FONT face=Verdana size=2><SPAN>It gets removed if we take the reference of <B><SPAN>csla.dll 2.0</SPAN></B> but it doesnot get removed if we take the reference of <B><SPAN>csla.dll 3.0. </SPAN></B>That is the same&nbsp; functionality is working with csla.dll 2.0 and is not working with csla.dll 3.0.<o:p></o:p></SPAN></FONT></P>
<P class=MsoNormal><FONT face=Verdana size=2><SPAN>What we analized was that<U>, the <FONT color=red><SPAN>BindingSource.CancelEdit()</SPAN></FONT> function in <FONT color=green><SPAN>OnClosing event</SPAN></FONT> in <FONT color=blue><SPAN>ChildFormBase</SPAN></FONT><FONT color=teal><SPAN> </SPAN></FONT>class is not working in case of Csla.dll 3.0 but in case of csla.dll 2.0 it is working fine.</U><o:p></o:p></SPAN></FONT></P>
<P class=MsoNormal><FONT face=Verdana size=2><SPAN><o:p></o:p></SPAN></FONT></P>
<P class=MsoNormal><FONT face=Verdana size=2><SPAN>Structure of our classes are as follows:</SPAN></FONT></P>
<P class=MsoNormal><FONT face=Verdana size=2><SPAN><o:p>1.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<SPAN>CodeValue</SPAN> inherits <SPAN>GBusinessBase</SPAN><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<SPAN>GBusinessBase </SPAN>inherits <SPAN>Csla.BusinessBase&lt;GBusinessBase&gt;</SPAN></o:p></SPAN></FONT></P>
<P class=MsoNormal><FONT face=Verdana size=2><SPAN><o:p><SPAN><o:p></o:p></SPAN>2.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<SPAN>CodeValueCollection</SPAN><FONT face=Verdana size=2><SPAN> </SPAN></FONT>inherits <SPAN>GBusinessListBase&lt;CodeValueCollection, CodeValue&gt;<o:p></o:p></SPAN><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<SPAN>GBusinessListBase&lt;CodeValueCollection, CodeValue&gt;<o:p></o:p></SPAN> inherits <SPAN>Csla.BusinessListBase&lt;T, C&gt;</SPAN>&nbsp;&nbsp;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;where T : <SPAN>Csla.BusinessBase&lt;GBusinessBase&gt;</SPAN><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;where C : <FONT color=#0000ff>GBusinessBase</FONT><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT color=#0000ff>GBusinessBase </FONT>inherits <SPAN>Csla.BusinessBase&lt;GBusinessBase&gt;</SPAN></o:p></SPAN></FONT></P>
<P class=MsoNormal><FONT face=Verdana size=2><SPAN><o:p><SPAN></SPAN><BR>3.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <SPAN>CodeValueListControl</SPAN><FONT face=Verdana size=2><SPAN> </SPAN></FONT>inherits <SPAN>ListControlBase2</SPAN><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<SPAN>ListControlBase2</SPAN><FONT face=Verdana size=2><SPAN> </SPAN></FONT>inherits <SPAN>System.Windows.Forms.UserControl</SPAN></o:p></SPAN></FONT></P>
<P class=MsoNormal><FONT face=Verdana size=2><SPAN><o:p><SPAN><o:p></o:p></SPAN>4.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <SPAN>CodeValueForm</SPAN><FONT face=Verdana size=2><SPAN> inherits <FONT color=blue><SPAN>ChildFormBase</SPAN></FONT><o:p></o:p></SPAN></FONT><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<SPAN>ChildFormBase</SPAN><FONT face=Verdana color=teal size=2><SPAN> </SPAN></FONT><FONT face=Verdana size=2><SPAN>inherits<FONT color=teal><SPAN> </SPAN></FONT><FONT color=blue><SPAN>System.Windows.Forms.Form</SPAN></FONT><o:p></o:p></SPAN></FONT></o:p></SPAN></FONT></P>
<P class=MsoNormal><FONT face=Verdana size=2><SPAN><o:p></o:p></SPAN></FONT>&nbsp;<B><FONT face=Verdana color=blue size=2><SPAN>CodeValueListControl</SPAN></FONT></B><FONT face=Verdana size=2><SPAN> is a class where we have the <B><FONT color=blue><SPAN>CodeValueCollection</SPAN></FONT></B> in the grid<o:p></o:p></SPAN></FONT></P>
<P class=MsoNormal><FONT face=Verdana size=2><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; On click of Add button a new object of <FONT color=blue><SPAN>CodeValue</SPAN></FONT> class is added into <FONT color=blue><SPAN>CodeValueCollection </SPAN></FONT>and displayed in the grid<FONT color=blue><SPAN> </SPAN></FONT>. A popup <B><FONT color=blue><SPAN>CodeValueForm</SPAN></FONT></B> is opened with blank details of these fields (Value,start date, end date)</SPAN></FONT></P>
<P class=MsoNormal><FONT face=Verdana size=2><SPAN></SPAN></FONT>&nbsp;</P>
<P class=MsoNormal><FONT face=Verdana size=2><SPAN>Please suggest what is wrong in CancelEdit()</SPAN></FONT></P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>KKoteles replied on Tuesday, January 15, 2008</h2><P>umesh,</P>
<P>Rocky made some changes in version 3.0 (which you've obviously stumbled upon).&nbsp; He covers this in Chapter 6 (Data Binding) of his Using CSLA 3.0 handbook.&nbsp; He explains how the binding is done through the BindingSource control - and as a result, the BeginEdit(), CancelEdit() or ApplyEdit() methods should never be called directly on the business object.</P>
<P>Here are two other threads that talk about this as well:&nbsp; <A HREF="/forums/thread/14583.aspx">http://forums.lhotka.net/forums/thread/14583.aspx</A>&nbsp;and <A HREF="/forums/permalink/10718/10713/ShowThread.aspx#10713">http://forums.lhotka.net/forums/permalink/10718/10713/ShowThread.aspx#10713</A></P>
<P>This issue has "bit" me too.&nbsp; All my new stuff is fine - it is just the older applications I created with version 2.1.4 that I need to be careful of.</P>
<P>Ken</P></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
