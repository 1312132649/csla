<html><header><title>Role ID behaves differently between Windows forms and Web</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Role ID behaves differently between Windows forms and Web</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/3882.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>CyclingFoodmanPA posted on Sunday, November 11, 2007</h2><P>Ok, I thought I made a mistake in my app, however the same thing happens in the ProjectTracker application.&nbsp; When I add a new Role in windows form and do not select and Id, I get the next highest Id and when the record is saved to the DB it has that Id.&nbsp; However, when I add a role in the web application, it initially shows up as having the next available Id, because the get is executed and it goes through the gyrations of finding the next highest Id.&nbsp; However, what is actually written to the database is an Id of 0 and the name I entered.&nbsp; I didn't discover it until I was working on my own application and it happened and I thought I did something wrong.&nbsp; After debugging for a while I decided to try adding a Role and the same thing happened.&nbsp; I put the statement _id = Id; in a few places when I create a new Role, however, I ended up getting errors that the object had not been created yet.</P>
<P>Has this happened to anyone else yet and if so, what did you do to fix it.&nbsp; I thought it would be pretty easy to fix, but I haven't figured it out yet and I don't want to do something that would really mess things up!&nbsp; So, any help would be greatly appreciated.</P>
<P>Thank you in advance.</P>
<P>&nbsp;</P>
<P>&nbsp;</P>
<P>&nbsp;</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>CyclingFoodmanPA replied on Sunday, November 11, 2007</h2><P>Ok, I found something that worked, however, I am always nervious about messing with Rocky's logic as&nbsp; he is usually right on.&nbsp; What I did was on the DoInsertUpdate routine, I changed <BR>cm.Parameters.AddWithValue("@id", _id);&nbsp;&nbsp; to<BR>cm.Parameters.AddWithValue("@id", Id); which executes the get property of the Id to acquire the next Id.&nbsp; I am confused as to why this works as the Id that displays on the GridView is correct so I am not sure what I am missing elswhere, but it works.&nbsp; So, if anyone has any other ideas, just continue to reply and you might have a better and more elegant method to fix this.</P>
<P>Thank you.</P>
<P>&nbsp;</P>
<P>&nbsp;</P>
<P>&nbsp;</P></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
