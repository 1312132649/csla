<html><header><title>Weird behaviour with DataGridView and Child Object (I have searched before posting...)</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Weird behaviour with DataGridView and Child Object (I have searched before posting...)</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/2554.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>Aliator posted on Monday, March 19, 2007</h2>I have an Order class (EditableRoot) with a child class OrderLine(EditableChild) driven by OrderLineList(EditableChildList).<br><br>In the WinForm, I have TextBoxes for Order's properties and a DataGridView for OrderLine's properties.<br><br>My WinForm is designed to put '*' at the end of the title bar when an object is dirty, so I see inmediatly if changes are well managed...<br><br>So, I open my Order management form, and when I edit a cell of the DataGrid [OrderLine(EditableChild)], I see the Order[(EditableRoot)] object is dirty. I save, check in the database, and I see change was commited. There's no '*' in the title bar, so Order object is no dirty.<br><br>I now I update a cell OrderLine(EditableChild) again... Order[(EditableRoot)] object is not marked as dirty...<br><br>I change a property of Order, then I see again '*' in the title bar and if I save, the whole data is succesfully commited to DB...<br><br>Something is happennig after saving Order object, but I can't see what...<br><br>So, if I edit a cell of the child object and save, I need to make changes in the parent, save, and the the child becomes responsive again...<br><br>What am I missing ?<br><br>BTW, this is the code I use for saving (pretty standard...):<br><br>/*------------------------------------------------------------------------*/<br>this.OrderBindingSource.RaiseListChangedEvents = false;<br>this.OrderLineBindingSource.RaiseListChangedEvents = false;<br><br>Order _temp = mBo.Clone();<br><br>_temp.ApplyEdit();<br><br>&nbsp;&nbsp;&nbsp; mBo = _temp.Save();<br>&nbsp;&nbsp;&nbsp; mBo.BeginEdit();<br><br>&nbsp;&nbsp;&nbsp; this.OrderBindingSource.DataSource = null;<br>&nbsp;&nbsp;&nbsp; this.OrderLineBindingSource.DataSource = this.OrderBindingSource; <br>&nbsp;&nbsp;&nbsp; this.OrderBindingSource.DataSource = mBo;<br>&nbsp;&nbsp; &nbsp;<br>&nbsp;&nbsp;&nbsp; this.OrderBindingSource.RaiseListChangedEvents = true;<br>&nbsp;&nbsp;&nbsp; this.OrderLineBindingSource.RaiseListChangedEvents = true;<br><br>/*------------------------------------------------------------------------*/</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Tuesday, March 20, 2007</h2><P>While PropertyChanged events in the child objects cause a ListChanged from your list automatically, <EM>you</EM> have to write code in your editable root to handle ListChanged and raise a PropertyChanged from the editable root. This could be part of your problem.</P>
<P>Also, make sure you are calling MarkOld() in your child objects. The data portal calls it for you on the root object, but you need to do this yourself in the child objects.</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Aliator replied on Tuesday, March 20, 2007</h2>Fixed.<br><br>As you said, I wasn't handling correctly the list of changed properties.<br><br>Thank you !!!<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Vinodonly replied on Tuesday, April 03, 2007</h2><P>i'm facing the same problem as mentioned in the original post but not sure how to implement the suggestion which you have given.</P>
<P>&nbsp;</P>
<P>can you point me towards some code or reference in the book to solve this problem..</P></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
