<html><header><title>Client-Side Webform Validation tied to Business Objects</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Client-Side Webform Validation tied to Business Objects</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/322.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>shaynev posted on Thursday, June 08, 2006</h2>

<p class="MsoNormal">We are in the process of finding a way to add client-side
validation to webform controls which are bound to CSLA business objects. This
validation will need to be driven by the rules specified within the business
object.&nbsp; Could you please tell me if the approach we're taking is viable,
and if there might be a better way to do it?<br>
<br>
The plan thus far, involves a UI class that would be included into the custom
controls we are developing.&nbsp; As each control requiring validation is added
to the page we would query the BO and derive its validation rules for the
applicable property.&nbsp; Once this is done the class returns new webform
validation controls, for the custom control to place as it sees fit.<br>
<br>
When attempting to implement this, I ran into a snag querying the validation
rules from the BO... the class containing the information about the rules
(RuleMethod) is internal, and is contained by a generic List object.&nbsp; The
net effect being, I've been unable to cast the property's list of rules as
anything other than Object which doesn't do me much good at all.<br>
<br>
I would appreciate any suggestions.<br>
<br>
Thanks,<br>
Shayne<span><o:p></o:p></span></p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>glenntoy replied on Thursday, June 08, 2006</h2><P>Hi Shayne,</P>
<P>I don't know if this is the professional way do it. In my case, I used AJAX (that calls a webservice) to do the field validations in the WEB-UI.</P>
<P>In my case the webservice returns a string: The possible values of my string are: a.) True&nbsp;- if there where no rules broken b.) False,Broken rules description.&lt;br&gt;</P>
<P>The process of the webservice: a.)&nbsp;it instantiate the BO that contains the rules b.) assisgned the BO property with the parameter specified in the web method c.) checked BO.IsValid if it fails, loops in the broken rules collection in the BO and rturn the broken rules descriptions otherwise it returns True. d.)&nbsp; then I&nbsp;use span to display the broken rules in the WEB UI</P>
<P>I hope I was able to shed a little idea.</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Friday, June 09, 2006</h2>I think that validation is just one of the issues with Web forms; you typically end up duplicating the business rules in the UI.&nbsp; I usually end up using the validators, because the idea is to give the web user a 'richer' experience. <br><br>While I understand the need for web applications, I think using at stateless web server / broswer combination as a UI is a horrible solution to the problem.&nbsp; Its a shame Java didn't take off more for this... it would be nice if MS tried to position .Net to fill in that gap (by producing runtimes for non windows computers).<br><br>Andy<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>shaynev replied on Monday, June 12, 2006</h2>Thank you for your responses.<br><br>As we want to do the validation without a postback (ideally), it does look like the right way to go is the validator controls.&nbsp; The thing is, we want to be able to have them created on the fly (based on the validation settings of the BO) so that we only have one place we need to assign the validation, and the wireup is minimized.<br><br>Shayne<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Monday, June 12, 2006</h2>Well, please post your solution here, as I'm sure quite a few people would like to generate the validators on the fly, including me.<br><br>Andy<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>shaynev replied on Monday, June 12, 2006</h2>I'll be sure to do so once I get it figured out.<br><br>Right now I'm still fighting with getting the information through reflection, though I'm not sure if ultimately it'll work.<br><br>Another avenue that may be more fruitful, and would not require the use of reflection, is simply adding a public property to the BO with a summary of validation rules.&nbsp; I've been veering away from this, as we'd prefer to keep the BO's as close to the original design as possible, but since we'll already be adding in a custom logging object, and building templates for the BO's we should have a good opportunity to do it.<br><br>If anyone has any suggestions about how a class using reflection can get the information out of the List&lt;RuleMethod&gt; object when the RuleMethod class has restrictive permissions, I would love to hear them.<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>david.wendelken replied on Wednesday, June 14, 2006</h2><P><BLOCKQUOTE><div><img src="/Themes/default/images/icon-quote.gif"> <strong>shaynev:</strong></div><div><BR>...&nbsp;is simply adding a public property to the BO with a summary of validation rules.&nbsp; </div></BLOCKQUOTE></P>
<P>I think this would be an excellent addition to the framework, and not just for the reason you mention.</P>
<P>It would enable Documentation generators or help screens to display a list of all business rules and the potential error messages that go with them.&nbsp; </P>
<P>Anyone responsible for QA would kiss the ground you walk on if you provided them with this information.</P>
<P>In addition, if there was a link between the rule and the business explanation for the rule - I'm talking about complex business logic, not (max length = 50) - the UI could allow the user to press a "Why?" is this a rule button and get the business justification for the rule.</P>
<P>&nbsp;</P>
<P>&nbsp;</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>bobhagan replied on Wednesday, June 14, 2006</h2>I have no idea on first glance whether this fits with csla but look at this:<br>
<br>
http://www.ftponline.com/vsm/2006_06/magazine/features/smichelotti/<br>
<br>
(The next aticle cited is one of Rocky's)<br>
<br>
bob hagan<br>
<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Tuesday, October 02, 2007</h2><BLOCKQUOTE><div><img src="/Themes/default/images/icon-quote.gif"> <strong>david.wendelken:</strong></div><div>
<P><BLOCKQUOTE><div><img src="/Themes/default/images/icon-quote.gif"> <strong>shaynev:</strong></div><div><BR>...&nbsp;is simply adding a public property to the BO with a summary of validation rules.&nbsp; </div></BLOCKQUOTE></P>
<P>I think this would be an excellent addition to the framework, and not just for the reason you mention.</P>
<P>It would enable Documentation generators or help screens to display a list of all business rules and the potential error messages that go with them.&nbsp; </P>
<P>Anyone responsible for QA would kiss the ground you walk on if you provided them with this information.</P>
<P>In addition, if there was a link between the rule and the business explanation for the rule - I'm talking about complex business logic, not (max length = 50) - the UI could allow the user to press a "Why?" is this a rule button and get the business justification for the rule.</P>
<P></div></BLOCKQUOTE></P>
<P>Of course a lot of time has passed since this thread started and today. CSLA .NET <EM>does</EM> now have the concept by which you can ask an object for its rules. This is in version 2.1, with some slight enhancements in 3.0.</P>
<P>You can use these rule descriptions to generate UI code or behavior in various ways.</P>
<P>Recently Chris posted some code along this line (<A HREF="/forums/thread/17870.aspx">http://forums.lhotka.net/forums/thread/17870.aspx</A>), and others have done work in this area as well.</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>crackcode89 replied on Tuesday, October 02, 2007</h2><P>Here is a clever framework that does what you are looking for, It takes a collection of broken object validations and maps them to web controls in a web form. Broken validations are diaplayed via a centralized mechanism that sets the style of relevant web controls. A popup is displayed on focus or mousover.</P>
<P>&nbsp;</P>
<P><A href="http://www.spikesolutions.net/ViewSolution.aspx?ID=49834d35-991c-4d15-ab6c-a79426220274">http://www.spikesolutions.net/ViewSolution.aspx?ID=49834d35-991c-4d15-ab6c-a79426220274</A></P>
<P>&nbsp;</P></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
