<html><header><title>Possible Bug with PropertyHasChanged?</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Possible Bug with PropertyHasChanged?</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/4414.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>dlabar posted on Tuesday, February 26, 2008</h2><P>I found an interesting issue when updating a property databound to a Textbox.</P>
<P>My BO has an email address databound to a textbox.&nbsp; I have a self defined Validation rule that the email address has to be unique.&nbsp; So if I change the email address to a value that already exists, the PropertyHasChanged function will call ValidationRules.CheckRules(), and an execption will get thrown.&nbsp; The PropertyHasChanged doesn't catch this exception, so the MarkDirty is never called.&nbsp; This results in a new value in my BO, but isDirty is still false.</P>
<P>&nbsp;</P>
<P>I use isDirty on my Cancel method to determine if I need to do anything.&nbsp; Even though the user has change the e-mail address, because of the exception, pressing Cancel doesn't work.</P>
<P>&nbsp;</P>
<P>I'm thinking PropertyHasChanged should have a Try Catch Finaly Statement.&nbsp; With the CheckRules in the try, the Catch, just rethrowing the exception and the finally calling MarkDirty and Property has changed.</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Tuesday, February 26, 2008</h2>Rule methods should never throw exceptions. If an exception occurs in a rule method, that's a bug in the rule method.</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>dlabar replied on Tuesday, February 26, 2008</h2><P>Well that was dumb of me.&nbsp; I was trapping and discarding the exception without notifying the user, so I never saw the error.&nbsp; Thanks.</P></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
