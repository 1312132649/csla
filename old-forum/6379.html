<html><header><title>Master/ Detail in Silverlight /wo CodeBehind</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Master/ Detail in Silverlight /wo CodeBehind</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/6379.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>Jack posted on Monday, February 09, 2009</h2><font face="Tahoma">I'm trying to plug in some Master/Detail functionality.&nbsp; I know there are some limitations on data binding updating other properties etc so I don't want to try too hard.<br><br>I have the following:<br><br>1) Parent.DataCollectionList<br>2) Parent.CurrentDataCollectionId&nbsp;&nbsp;&nbsp; - key from selected item DataCollectionList<br><br>3) Parent.DataFieldList<br>4) Parent.CurrentDataFieldList&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; - ObservableCollection derived from LINQ to select DataFields where Id = CurrentDataCollectionId<br><br><br>I have a grid bound to both lists.&nbsp; I can do the master/detail by using code behind on the SelectionChanged of the DataCollectionList<br><br>private void gridDataCollections_SelectionChanged(object sender, SelectionChangedEventArgs e)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (gridDataCollections.SelectedItem == null) return;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // get the dataEntrySession object<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; CslaDataProvider dp = this.Resources["DataEntrySessionDataProvider"] as CslaDataProvider;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // set the currentDataId to the selected dataID<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ((DataEntrySession)(dp.Data)).CurrentDataId = ((DataCollection)this.gridDataCollections.SelectedItem).DataId;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; gridDataFields.ItemsSource = ((DataEntrySession)(dp.Data)).CurrentDataFields;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>1) Is the last step, replacing the ItemsSource, not redudent?&nbsp; I thought if I used an ObservableCollection that any changes would ripple up to the UI?<br><br>2) Any idea if there a performance hit to doing that vs. the data just changing?&nbsp; The filter is instantaneous but the rebinding is slower than I expected<br><br>3) Can this be done without CodeBehind?&nbsp; I saw an example that was close where the detail list;s selectedIndex was bound to an object property.&nbsp; What I was trying to do was bind the CurrentDataCollectionID to the DataCollectionList.SelectedItem.DataId&nbsp;&nbsp; assuming that the SelectedItem was a DataCollection.<br><br>But my basic XAML skills are seriously letting me down.<br><br>any ideas?&nbsp; This obviously isn't a huge requirement since I have it working but it would be nice.</font><br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Andreas replied on Friday, February 13, 2009</h2><P>I am not sure if I understood your problem right but the&nbsp;simplest way to implement master/detail grid views with csla collections and without code behind is like this:<BR></P>
<P><SPAN>&lt;Window x:Class="WpfMasterDetail.Window1"</SPAN><SPAN><SPAN>&nbsp;&nbsp;&nbsp; </SPAN></SPAN></P>
<P><SPAN>&nbsp;&nbsp;&nbsp;xmlns=<A href="http://schemas.microsoft.com/winfx/2006/xaml/presentation">http://schemas.microsoft.com/winfx/2006/xaml/presentation</A></SPAN><SPAN><SPAN>&nbsp;&nbsp;&nbsp; </SPAN></SPAN></P>
<P><SPAN>&nbsp;&nbsp;&nbsp;xmlns:x=<A href="http://schemas.microsoft.com/winfx/2006/xaml">http://schemas.microsoft.com/winfx/2006/xaml</A></SPAN><SPAN><SPAN>&nbsp;&nbsp;&nbsp; </SPAN></SPAN></P>
<P><SPAN>&nbsp;&nbsp;&nbsp;xmlns:tk=<A href="http://schemas.microsoft.com/wpf/2008/toolkit">http://schemas.microsoft.com/wpf/2008/toolkit</A></SPAN></P>
<P><SPAN></SPAN><SPAN>&nbsp;&nbsp;&nbsp;xmlns:MyData="clr-namespace:MyData.DataAccess;assembly=MyData.DataAccess"<o:p></o:p></SPAN></P>
<P><SPAN><SPAN>&nbsp;&nbsp;&nbsp;x</SPAN>mlns:csla="clr-namespace:Csla.Wpf;assembly=Csla"<o:p></o:p></SPAN></P>
<P><SPAN><SPAN>&nbsp;&nbsp;&nbsp;</SPAN>Title="Window1" Height="300" Width="300"&gt;<o:p></o:p></SPAN></P>
<P><SPAN><SPAN>&nbsp;&nbsp;&nbsp;</SPAN>&lt;Window.Resources&gt;<o:p></o:p></SPAN></P>
<P><SPAN><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN>&lt;csla:CslaDataProvider x:Key="MasterCollectionProvider"<o:p></o:p></SPAN></P>
<P><SPAN><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN>FactoryMethod="GetAll"<o:p></o:p></SPAN></P>
<P><SPAN><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</SPAN>ObjectType="{x:Type MyData:MyMasterCollectionSet}"<o:p></o:p></SPAN></P>
<P><SPAN><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN>IsInitialLoadEnabled="True"<o:p></o:p></SPAN></P>
<P><SPAN><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN>ManageObjectLifetime="True"/&gt;<o:p></o:p></SPAN></P>
<P><SPAN><SPAN>&nbsp;&nbsp;&nbsp; </SPAN>&lt;/Window.Resources&gt;<o:p></o:p></SPAN></P>
<P><SPAN><SPAN>&nbsp;&nbsp;&nbsp; </SPAN>&lt;Grid DataContext="{Binding Source={StaticResource MasterCollectionProvider}}"&gt;<o:p></o:p></SPAN></P>
<P><SPAN><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN>&lt;StackPanel&gt;<o:p></o:p></SPAN></P>
<P><SPAN><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN>&lt;tk:DataGrid IsSynchronizedWithCurrentItem="True" </SPAN></P>
<P><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ItemsSource="{Binding}" </SPAN></P>
<P><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;AutoGenerateColumns="True"/&gt;<o:p></o:p></SPAN></P>
<P><SPAN><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN>&lt;tk:DataGrid IsSynchronizedWithCurrentItem="True" </SPAN></P>
<P><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ItemsSource="{Binding Path=CurrentItem.BuchungSet_By_KontoID}"</SPAN></P>
<P><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;AutoGenerateColumns="True"/&gt;<o:p></o:p></SPAN></P>
<P><SPAN><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN>&lt;/StackPanel&gt;<o:p></o:p></SPAN></P>
<P><SPAN><SPAN>&nbsp;&nbsp;&nbsp; </SPAN>&lt;/Grid&gt;<o:p></o:p></SPAN></P>
<P><SPAN>&lt;/Window&gt;<o:p></o:p></SPAN></P>
<P>Regards,</P>
<P>Andreas</P>
<P>PS:</P>
<P>CurrentItem must not be&nbsp;a property of your BO. It&nbsp;is a property of the ICollectionView interface which wpf uses internaly to&nbsp;wrap your&nbsp;data source.</P>
<P>&nbsp;</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Andreas replied on Friday, February 13, 2009</h2><P>Sorry...please replace "CurrentItem.BuchungSet_By_KontoID" with "CurrentItem.MyDetailsCollectionSet" where MyDetailsCollection must be a property of MyMasterCollectionSet</P>
<P>&nbsp;</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Jack replied on Tuesday, February 17, 2009</h2>Andreas,<br><br>Thank you - I will give it a try this week.<br><br>Thanks<br><br>jack<br></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
