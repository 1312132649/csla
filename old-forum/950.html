<html><header><title>Multiple instances of a business object</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Multiple instances of a business object</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/950.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>gregwilliams posted on Friday, August 18, 2006</h2><P>Need a little Architectural help with an implementation of a business object.</P>
<P>User is presented with a read only list of car options from source A<BR>(display in grid with columns type, column2, column3, column4)</P>
<P>User select a record from list and is presented with:<BR>&nbsp;&nbsp;&nbsp;1. read only list of&nbsp;business object&nbsp;from datasource A&nbsp;<BR>&nbsp;&nbsp;&nbsp;2. read only list of business object from datasource B<BR>&nbsp;&nbsp;&nbsp;3. editable list of business object populated from either datasource A or B</P>
<P>example. All three business object&nbsp;have the same property 'Color'. Datasource A color is Red. Datasource B is Blue. Rules engine returns Blue so 3rd business objects color property would be set to Blue.</P>
<P>Overall this is taking the same object scheme and populating 3 objects from 3 different datasources.</P>
<P>I am just starting out with CSLA and not sure if i need to do this within the Criteria section. If so can someone help with a code sample???</P>
<P>I don't think duplicating the class 3 times just to reference a different datasource is the correct way. right?</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>gregwilliams replied on Saturday, August 19, 2006</h2><P>sorry, just caught a mistake. the 3 business objects are as follows. </P>
<P>1. read only business object from datasource A ( single record )<BR>2. read only business obejct from datasource B ( single record )<BR>3. editable business object populated from either datasource A or B ( single record)</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>dean replied on Saturday, August 19, 2006</h2>Greg&nbsp; -Maybe I am being dense, but I think we need a little more context to help. Most of these decisions come down to examining your use case(s). You are jumping right into interface issues and this tends to confuse things. So can you back up and more fully describe the use case?<br><br>Dean<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>gregwilliams replied on Saturday, August 19, 2006</h2><P>Sorry, let me see if i can clearify.</P>
<P>User is presented with a grid showing trip information ( trip_number, Service, Time, ) pulled from Database A<BR>User selects a specific trip and is redirected to a reconciliation page. <BR>On page load display 3 columns for compairing Trip_number, Service, and time from data stored in Database A (column A) and Database B (column B). Allow users to choose a value from either Source A or Source B and populate Source C (column C)<BR>Upon completion of the reconciliation update Source C database</P>
<P>My thought was to create a business object ‘Trip’ that has 3 properties (trip_number,service and time)from 3 different data sources.<BR>&nbsp;</P>
<P>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[readonly]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[editable]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[readonly]<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(Trip A)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(Trip C)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(Trip B) <BR>Trip #&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0956&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0956<BR>Service&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;new&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;old&nbsp;&nbsp;<BR>Time&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;12:00&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;13:00</P>
<P><BR>After Reconciliation</P>
<P>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(Trip A)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(Trip C)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(Trip B) <BR>Trip #&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0956&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0956&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0956<BR>Service&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;new&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;old&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;old&nbsp;&nbsp;<BR>Time&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;12:00&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;12:00&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;13:00</P>
<P>User select enter and Trip C is saved to the database.</P>
<P>I am new to using CSLA and open to any ideas.<BR></P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>dean replied on Saturday, August 19, 2006</h2>For a start it sounds like you have a readonly object, TripData, that is used to populate the first screen. You would have two of these for the first screen (at least in this example - is it always limited to two?)&nbsp; Then you have a ResultingTrip (you called it Trip), that is the editable object that is stored after reconciliation. <br><br>You could have ResultingTrip required references to the TripA and TripB object. This is where you would get the lookup info for you fields.<br><br>public class Trip<br>&nbsp;&nbsp;&nbsp; inherits readonlybase<br>&nbsp;&nbsp; Trip# as string?/int?<br>&nbsp; Service as int<br>&nbsp; Time as datetime?/int?/string?<br>end class<br><br>public class ResultingTrip<br>private&nbsp; Trip# as string/int<br>private&nbsp; Service as int<br>private&nbsp; Time as datetime? string? int?<br><br>private TripA as trip<br>private TripB as trip<br><br>public TripNumberOptions as TripOptionNameValueList<br>public ServiceOptions as ServiceOptionNameValueList<br>pulbic TimeOptions as TimeOptionsNameValuelist<br><br>public shared function GetResultingTrip(TripA, TripB) as ResultingTrip<br>&nbsp;&nbsp; ' populate TripNumberOptions, ServiceOptions, and TimeOptions<br>&nbsp;&nbsp; ' return new ResultingTrip<br>end class<br><br>This would then force TripC (resultingtrip) into having values only pulled from TripA or TripB.<br><br>Does this help? <br><br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>gregwilliams replied on Saturday, August 19, 2006</h2><P>I see what you are doing. However, I am unclear as how to create a Trip object from two different datasources.</P>
<P>In referencing the PTracker&nbsp;code, i see&nbsp;the Fetch method is where one would get a Datareader and loop over that to populate the properties of the object. i need to be able to create this from two or more datasources. this is where i am getting confused. how would i create multiple "Trip" object from different datasources?</P>
<P>I guess i could just create two sets of properties and have two database calls, each of which would populate the appropriate properties. However i think that would be a little slopy. :-(</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>dean replied on Sunday, August 20, 2006</h2>In the fetch for you single object, make two diffferent calls in the same fetch, then populate your object from each datareader. You would need two different connection strings (databaseA.connection, databaseBconnection), two different datareader/command objects. <br><br>Dean<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>cultofluna replied on Sunday, August 20, 2006</h2>You can also create a TripBase object with basic functionality needed for Trip, and create two derived Trip objects where only the Fetch method differs. <br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>gregwilliams replied on Wednesday, August 23, 2006</h2><P>Thanks to all for the Ideas on the best way to handle this. I have handled this by creating a new Criteria method that will take two paramaters ( tripID, source) then in the Fetch method i conect to the proper datasource based on the source property.</P>
<P>I am just getting started using CSLA and Thanks for all the quick responses.</P></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
