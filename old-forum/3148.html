<html><header><title>Rocky Change Request - EditableRootListBase&lt;T&gt;</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Rocky Change Request - EditableRootListBase&lt;T&gt;</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/3148.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>FireGarden posted on Thursday, July 05, 2007</h2><table cellpadding="0" cellspacing="0">

<tr>
<td colspan="2"><pre><font color="#1000a0">private</font> <a title="System.Void" href="http://www.aisto.com/roeder/dotnet/Default.aspx?Target=code://mscorlib:2.0.0.0:b77a5c561934e089/System.Void">void</a> <b><a class="bold" href="http://www.aisto.com/roeder/dotnet/Default.aspx?Target=code://Csla:2.1.4.0:93be5fdc093e4c30/Csla.EditableRootListBase%3C%3E/Child_PropertyChanged%28Object,System.ComponentModel.PropertyChangedEventArgs%29">Child_PropertyChanged</a></b>(<a title="System.Object" href="http://www.aisto.com/roeder/dotnet/Default.aspx?Target=code://mscorlib:2.0.0.0:b77a5c561934e089/System.Object">object</a> sender, <a title="System.ComponentModel.PropertyChangedEventArgs" href="http://www.aisto.com/roeder/dotnet/Default.aspx?Target=code://System:2.0.0.0:b77a5c561934e089/System.ComponentModel.PropertyChangedEventArgs">PropertyChangedEventArgs</a> e)<br>{<br>    <font color="#1000a0">for</font> (<a title="System.Int32" href="http://www.aisto.com/roeder/dotnet/Default.aspx?Target=code://mscorlib:2.0.0.0:b77a5c561934e089/System.Int32">int</a> <b>index</b> = <font color="#800000">0</font>; <a title="int index // Local Variable">index</a> &lt; <font color="#1000a0">base</font>.<a title="int System.Collections.ObjectModel.Collection&lt;T&gt;.Count { ... }" href="http://www.aisto.com/roeder/dotnet/Default.aspx?Target=code://mscorlib:2.0.0.0:b77a5c561934e089/System.Collections.ObjectModel.Collection%3C%3C%210%3E%3E/property:Count:Int32">Count</a>; <a title="int index // Local Variable">index</a>++)<br>    {<br>        <font color="#1000a0">if</font> (<a title="System.Object" href="http://www.aisto.com/roeder/dotnet/Default.aspx?Target=code://mscorlib:2.0.0.0:b77a5c561934e089/System.Object">object</a>.<a title="bool System.Object.ReferenceEquals(object, object);" href="http://www.aisto.com/roeder/dotnet/Default.aspx?Target=code://mscorlib:2.0.0.0:b77a5c561934e089/System.Object/ReferenceEquals%28Object,Object%29:Boolean">ReferenceEquals</a>(<font color="#1000a0">base</font>[<a title="int index // Local Variable">index</a>], <a title="object sender; // Parameter">sender</a>))<br>        {<br>            <font color="#1000a0">this</font>.<a title="void System.ComponentModel.BindingList&lt;T&gt;.OnListChanged(ListChangedEventArgs);" href="http://www.aisto.com/roeder/dotnet/Default.aspx?Target=code://System:2.0.0.0:b77a5c561934e089/System.ComponentModel.BindingList%3C%3E/OnListChanged%28System.ComponentModel.ListChangedEventArgs%29">OnListChanged</a>(<font color="#1000a0">new</font> <a title="System.ComponentModel.ListChangedEventArgs.ListChangedEventArgs(ListChangedType, int);" href="http://www.aisto.com/roeder/dotnet/Default.aspx?Target=code://System:2.0.0.0:b77a5c561934e089/System.ComponentModel.ListChangedEventArgs/.ctor%28System.ComponentModel.ListChangedType,Int32%29">ListChangedEventArgs</a>(<a title="System.ComponentModel.ListChangedType" href="http://www.aisto.com/roeder/dotnet/Default.aspx?Target=code://System:2.0.0.0:b77a5c561934e089/System.ComponentModel.ListChangedType">ListChangedType</a>.<a title="ListChangedType System.ComponentModel.ListChangedType.ItemChanged;" href="http://www.aisto.com/roeder/dotnet/Default.aspx?Target=code://System:2.0.0.0:b77a5c561934e089/System.ComponentModel.ListChangedType/ItemChanged">ItemChanged</a>, <a title="int index // Local Variable">index</a>));<br>            <font color="#1000a0">break</font>;<br>        }<br>    }<br>}<br></pre></td></tr></table>Rocky,<br>I am working with an EditableRootList using an Object implementing INotifyPropertyChanged. <br><br>EditableRootList listens for children INotify events and forwards the call to a list changed event. <br><br>Unfortunately I too would like to know about the root child's INotify event. I could hookup an event handler however it would be easier if EditableRootListBase&lt;T&gt; made a call to a virtaul method OnPropertyChanged(sender, e){<br>}<br><br>As follows:<br><br>


<pre><font color="#1000a0">private</font> <a title="System.Void" href="http://www.aisto.com/roeder/dotnet/Default.aspx?Target=code://mscorlib:2.0.0.0:b77a5c561934e089/System.Void">void</a> <b><a class="bold" href="http://www.aisto.com/roeder/dotnet/Default.aspx?Target=code://Csla:2.1.4.0:93be5fdc093e4c30/Csla.EditableRootListBase%3C%3E/Child_PropertyChanged%28Object,System.ComponentModel.PropertyChangedEventArgs%29">Child_PropertyChanged</a></b>(<a title="System.Object" href="http://www.aisto.com/roeder/dotnet/Default.aspx?Target=code://mscorlib:2.0.0.0:b77a5c561934e089/System.Object">object</a> sender, <a title="System.ComponentModel.PropertyChangedEventArgs" href="http://www.aisto.com/roeder/dotnet/Default.aspx?Target=code://System:2.0.0.0:b77a5c561934e089/System.ComponentModel.PropertyChangedEventArgs">PropertyChangedEventArgs</a> e)<br>{<br>    <font color="#1000a0">for</font> (<a title="System.Int32" href="http://www.aisto.com/roeder/dotnet/Default.aspx?Target=code://mscorlib:2.0.0.0:b77a5c561934e089/System.Int32">int</a> <b>index</b> = <font color="#800000">0</font>; <a title="int index // Local Variable">index</a> &lt; <font color="#1000a0">base</font>.<a title="int System.Collections.ObjectModel.Collection&lt;T&gt;.Count { ... }" href="http://www.aisto.com/roeder/dotnet/Default.aspx?Target=code://mscorlib:2.0.0.0:b77a5c561934e089/System.Collections.ObjectModel.Collection%3C%3C%210%3E%3E/property:Count:Int32">Count</a>; <a title="int index // Local Variable">index</a>++)<br>    {<br>        <font color="#1000a0">if</font> (<a title="System.Object" href="http://www.aisto.com/roeder/dotnet/Default.aspx?Target=code://mscorlib:2.0.0.0:b77a5c561934e089/System.Object">object</a>.<a title="bool System.Object.ReferenceEquals(object, object);" href="http://www.aisto.com/roeder/dotnet/Default.aspx?Target=code://mscorlib:2.0.0.0:b77a5c561934e089/System.Object/ReferenceEquals%28Object,Object%29:Boolean">ReferenceEquals</a>(<font color="#1000a0">base</font>[<a title="int index // Local Variable">index</a>], <a title="object sender; // Parameter">sender</a>))<br>        {<br>            <font color="#1000a0">this</font>.<a title="void System.ComponentModel.BindingList&lt;T&gt;.OnListChanged(ListChangedEventArgs);" href="http://www.aisto.com/roeder/dotnet/Default.aspx?Target=code://System:2.0.0.0:b77a5c561934e089/System.ComponentModel.BindingList%3C%3E/OnListChanged%28System.ComponentModel.ListChangedEventArgs%29">OnListChanged</a>(<font color="#1000a0">new</font> <a title="System.ComponentModel.ListChangedEventArgs.ListChangedEventArgs(ListChangedType, int);" href="http://www.aisto.com/roeder/dotnet/Default.aspx?Target=code://System:2.0.0.0:b77a5c561934e089/System.ComponentModel.ListChangedEventArgs/.ctor%28System.ComponentModel.ListChangedType,Int32%29">ListChangedEventArgs</a>(<a title="System.ComponentModel.ListChangedType" href="http://www.aisto.com/roeder/dotnet/Default.aspx?Target=code://System:2.0.0.0:b77a5c561934e089/System.ComponentModel.ListChangedType">ListChangedType</a>.<a title="ListChangedType System.ComponentModel.ListChangedType.ItemChanged;" href="http://www.aisto.com/roeder/dotnet/Default.aspx?Target=code://System:2.0.0.0:b77a5c561934e089/System.ComponentModel.ListChangedType/ItemChanged">ItemChanged</a>, <a title="int index // Local Variable">index</a>));<br>            <font color="#1000a0">break</font>;<br>        }<br>    }<br><br>    OnChildPropertyChanged(sender, e);<br>}</pre>This would make it easy in my collection to deal with the property changed events from the kids<br><br><br>Further I will extend PropertyChangedEventArgs and pass contexul data up to make it easy for my RootList to keep track of calculations, summaries etc. <br><br><br>Thanks,<br><br>Rob FireGarden<br><br><br><br><br><br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>FireGarden replied on Thursday, July 05, 2007</h2>This kind of thing could be sent in my children INotifyPropertyChanged evet<br><br>public class CalculatePropertyChangedEventArgs&lt;T&gt; : PropertyChangedEventArgs<br>&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; T _oldValue;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; T _newValue;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; public CalculatePropertyChangedEventArgs(string propertyName, T oldValue, T newValue) : base(propertyName)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; _oldValue = oldValue;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; _newValue = newValue;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; public T OldValue<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; get { return _oldValue; }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; public T NewValue<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; get { return _newValue; }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; }<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>wurzulator replied on Friday, July 06, 2007</h2>I take a more manual approach and do this:<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; _milestones = Milestones.GetInstance(dr);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Milestones.ListChanged += delegate(object sender, ListChangedEventArgs e)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; { PropertyHasChanged("Milestones"); };<br><br>in the DataPortal_Fetch method and <br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; _milestones = Milestones.NewInstance();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Milestones.ListChanged += delegate(object sender, ListChangedEventArgs e)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; { PropertyHasChanged("Milestones"); };<br><br>in the DataPortal_Create method<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>FireGarden replied on Friday, July 06, 2007</h2>I don't think you see what I am trying to do. Rocky subscribes to the INotifyPropertyChanged event on each of the kids but it never actually uses <a title="System.ComponentModel.PropertyChangedEventArgs" href="http://www.aisto.com/roeder/dotnet/Default.aspx?Target=code://System:2.0.0.0:b77a5c561934e089/System.ComponentModel.PropertyChangedEventArgs">PropertyChangedEventArgs</a> e.<br><br>Further to this it doesn't make PropertyChangedEventArgs available to the class. It essentially just throws it away.<br><br><br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Sunday, July 08, 2007</h2>Added to the wish list at <A href="http://www.lhotka.net/cslanet/wishlist.aspx">http://www.lhotka.net/cslanet/wishlist.aspx</A>.</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Tuesday, May 27, 2008</h2><P class=MsoNormal>Added a <SPAN class=CodeInline><SPAN><FONT face="Courier New" color=#008000>virtual OnChildPropertyChanged()</FONT></SPAN></SPAN> method that is called when a <SPAN class=CodeInline><SPAN><FONT face="Courier New" color=#008000>PropertyChanged</FONT></SPAN></SPAN> event is handled from a child of the list to the 3.5.1 code in svn.</P></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
