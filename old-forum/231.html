<html><header><title>OT: Observed child object</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>OT: Observed child object</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/231.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>esteban404 posted on Wednesday, May 31, 2006</h2><P>I have&nbsp;at least one&nbsp;child collection on an object based on BusinessBase (CSLA 1.52). When that collection changes, I need to write the history to the project log.</P>
<P>My idea was to use a clone of the original collection and in the internal void Update(Project project) write the history by comparing the collection items. These collections&nbsp;will&nbsp;have no more than 5 items, and the add, update and delete process can be used to write the history. The items are Resource items (people) with a role in the project. We're trying to build history on who does what and what roles are likely to change during a project.</P>
<P>To use the Project Tracker&nbsp;example I'd be doing this in the ProjectResource class. The change itself will be added to the Parent collection of changes:<BR>ProjectResources.Add(history);</P>
<P>It seemed overkill to create events since there is a reference to the parent and the history items are also children.</P>
<P>_E</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>xal replied on Wednesday, May 31, 2006</h2>You can try using the observer pattern. You can get the observer code from:<br>http://csla.kozul.info<br><br><br>Andrés</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>esteban404 replied on Wednesday, May 31, 2006</h2><P>Thanks, Andrés, but I'm not using AO now and the "comer de coco" factor is just too high for a quick and dirty demo. I did it all in the child. When the child is marked for deletion, update or IsNew, I&nbsp;create an entry and add it to the history collection on the Parent. It's not very sexy, but it'll work for the demo.</P>
<P>Last I tried to use AO, I couldn't get the source to compile. I haven't been able to chase it around and figure it out why. I see that registering the child to the parent is the better way, but I can build a fire with flint &amp; machete, too.</P>
<P>_E</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>xal replied on Wednesday, May 31, 2006</h2>I see your point, but I just wanted to clarify that you don't need active objects to use the observer.<br>The observer is completely independant of any other projects, it is AO that depends on observer. So you should be able to implement it in csla without any trouble.<br><br>Andrés<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>esteban404 replied on Wednesday, May 31, 2006</h2><P>I see the AO site is a little different these days. I&nbsp;&nbsp;dled the current 1.5 Observer.zip and I'll try to use it. That one has a much shorter document to match my attention span. :-]</P>
<P>_E</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>malloc1024 replied on Wednesday, May 31, 2006</h2>

<p class="MsoNormal">The observer pattern is used when you want a subject to
notify many observers.<span>&nbsp; </span>From what I have
read, it seems that you only have one observer (project log).<span>&nbsp; </span>It might be overkill to use the observer in
this situation.<span>&nbsp; </span>If you have many observers
or think you might have more than one observer down the road, you can use the
observer pattern.<span>&nbsp; </span>Otherwise, I would not
use it in this situation.<span>&nbsp; </span>I would just
use a simple interface to decouple the corresponding objects.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>esteban404 replied on Wednesday, May 31, 2006</h2><P>That's what I did, but I believe some of the current project will benefit from an observer. If I can stare at it long enough.</P>
<P>The thing that's stimies me about&nbsp; an Observer pattern is in&nbsp;the disconnected nature of&nbsp;CSLA class design. If each user has instances of objects "checked out", then they save them, how would the Observable item notify all its observers if there's no central point of call (we don't use remoting or a web server, it's all SmartClient)? I don't think they can, so I use a db call to see if the updates table has an newer date than the one the user is using. Can you say cludge?</P>
<P>_E</P></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
