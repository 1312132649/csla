<html><header><title>Your experiences with multiple assemblies for business objects</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Your experiences with multiple assemblies for business objects</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/10838.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>StefanCop posted on Thursday, November 03, 2011</h2><p>I know, there have been very similar posts some years ago,&nbsp;but I think at least two things have changed: The unit-of-work principle has beome prominent, and we now have an object factory option. </p>
<p>The scenario is&nbsp;basically that of post &quot;<a href="http://forums.lhotka.net/forums/p/5969/29032.aspx#29032">Multiple modules with each there own businessobjects</a>&quot;.&nbsp;</p>
<p>You may have common business objects. Then you have one module,&nbsp;which is about product and orders.&nbsp;<br />Another&nbsp;module is responsible for accounting and budeting. </p>
<p>I would guess, that &quot;accounting and budgeting&quot; should be separated; it could be replaced by a commercial product.&nbsp;From this perspective, I&#39;d prefer to&nbsp;design two separate VisualStudio project for the business layer. </p>
<p>On the other hand, user want screens combining information of both modules.&nbsp;Additionally for better experience, they also want to create and update data from both modules. Taking these needs into account, it would be probably simpler (and better?) to have only one VisualStudio project. </p>
<p>Or should we work with two modules, plus a third on top of both, which contains the unit-of-work and commands to support the combining? </p>
<p>In general, I prefer simple project set-ups. The downside however is, that developer don&#39;t have structures enforced and begin to cross-link almost every object with each another ... not that bad actually ;-) </p>
<p>What do you think?</p></div><div style='padding:0 15 3 15;background-color:lightgreen'><h2>jh72i replied on Thursday, November 03, 2011</h2><p><span style="font-family:&#39;Arial&#39;,&#39;sans-serif&#39;;color:black;font-size:9pt;">In my opinion there is no one single answer to this. So much depend on the context within which you operate.</span></p>
<p><span style="font-family:&#39;Arial&#39;,&#39;sans-serif&#39;;color:black;font-size:9pt;">However, as a simple rule if you find your business objects being used by multiple applications (as opposed to a single large application) I&#39;d probably advise you go for separate assemblies and structure these to be very domain oriented. Of course I would always extract framework or commonality into separate core assemblies for general reuse. The real kicker for me has always been that knowledge of the domain &ndash; depending on the environment you work in it can be very understood or very <i style="mso-bidi-font-style:normal;">not</i> understood. Personally I learn something new about the environment I am currently working in every day so making a call on what domain classes to include in what assemblies is not trivial. </span></p>
<p><span style="font-family:&#39;Arial&#39;,&#39;sans-serif&#39;;color:black;font-size:9pt;">The good thing is that any single UI can easily reference multiple assemblies (just like you do already with .net) to achieve some business needs. It might be simpler to reference one but on the scale of how important that is it&rsquo;d score very low in my mind (your developers are very intelligent people!!). I would like the designers/IDE to suggest inclusion of related/associated DLLs when you include a 1<sup>st</sup> that references a 2<sup>nd</sup> though (to my knowledge VS2010 doesn&rsquo;t do this). </span></p>
<p><span style="font-family:&#39;Arial&#39;,&#39;sans-serif&#39;;color:black;font-size:9pt;">I don&rsquo;t see any argument for combining all your classes into one DLL being inherently <i style="mso-bidi-font-style:normal;">better</i> though. And, of course, you can still do this with the linker if needs me.</span></p>
<p><span style="font-family:&#39;Arial&#39;,&#39;sans-serif&#39;;color:black;font-size:9pt;">Simplicity is good, I understand that, but if you find your client is downloading a 50MB dll for a one screen application you know you&#39;re not doing the best you can for him/her. And I think the days of the big all encompassing system are behind us. We&rsquo;re in the days of the small targeted component/feature/satellite app that plays a part in an overall suite called The Product or System. If I&rsquo;m responsible for updating our <i style="mso-bidi-font-style:normal;">product</i> catalogue I don&rsquo;t want any <i style="mso-bidi-font-style:normal;">order</i> entry screens embedded in my .exe. However, if its xmas eve and all hands as required to fill orders I might be granted <i style="mso-bidi-font-style:normal;">order entry</i> privileges at which point I will need those components downloaded to my workstation.</span></p>
<p><span style="font-family:&#39;Arial&#39;,&#39;sans-serif&#39;;color:black;font-size:9pt;">I would probably also encourage you to separate your UoW classes into separate assemblies especially if they really are only glorified presentation objects (referencing and delegating). It a personal (and probably not popular) opinion but I see pure presentation-type UoWs as not belonging in the pure business layer. </span></p>
<p><span style="font-family:&#39;Arial&#39;,&#39;sans-serif&#39;;color:black;font-size:9pt;">Hope all that makes some sense!</span></p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>StefanCop replied on Thursday, November 03, 2011</h2><p>Thanks for your response. </p>
<p>The first paragraph is my dilemma: There are a few people who are familiar with design (data and OO), and the expert of the domain and experts of an existing application from the 90&#39;s. No moving to new technology, we also want to overcome some limitation and improve maintainability. Experts of both domains have to learn and convince the others. And it&#39;s a very constructive process.</p>
<p>There&#39;s no problem in finding and reference an assembly. But thinking a designing in a networked fashion always ends in<i> </i><b>cyclic dependencies</b>.</p>
<p>And I&#39;ll specially remember your last point (&quot;presentation objects&quot;). </p>
<p>It seems that layering horizontally is way easier than separate vertically &nbsp;(maybe, it&#39;s because we look at things in a networked manner).</p></div><div style='padding:0 15 3 15;background-color:lightgreen'><h2>RockfordLhotka replied on Monday, November 07, 2011</h2><p>It is often challenging to achieve vertical business separation. The primary reason for doing this isn&#39;t usually technical, it is business related.</p>
<p>Several times I have worked on products that were sold or enabled by module. The user either didn&#39;t buy certain modules, or users weren&#39;t authorized to use certain modules. So the applications were designed with very clear module separation, because the module might not be available at runtime.</p>
<p>There was stil inter-module navitation, but that was purely at the UI level, and the appropriate links or menu options were disabled based on module availability for each user. At no point were objects within one module allowed to interact with objects or types in another module.</p>
<p>I think there&#39;s limited value here from a technical perspective, especialy given the cost/complexity. But the business value can be quite high if you have requirements like those I&#39;m describing.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>StefanCop replied on Tuesday, November 08, 2011</h2><p>Thanks a lot for your answers (also from &quot;Use of ManageObjectLifetime in project tracker example&quot;). </p>
<p>Right! Often you want to avoid coupling (and then also turn&nbsp;reuse down, because coupling is the worse). </p>
<p>My goal of having multiple assemblies is very similar: I want to reduce thight coupling all over the business objects. The idea is to find subsets (clusters) of BOs, where coherence is high and coupling is OK. However, between the subsets there&nbsp;should be a degree of separation. </p>
<p>And I was wondering why I haven&#39;t found examples, code generators, etc. that use / produce code for multiple assemblies?&nbsp;Maybe because desinging this way is too hard.</p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
