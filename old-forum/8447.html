<html><header><title>Unit testing business rule validation</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Unit testing business rule validation</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/8447.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>CBoland posted on Monday, February 01, 2010</h2>I want to unit test business rule validation, but am having difficulty with the approach. The crux of the problem seems to be how to determine that an instance of a specific rule exists in the the BrokenRules collection. For example:<br><br>Given a Customer object with a FirstName property, test that a new instance of Customer contains a validation rule like "FirstName is required".<br><br>I've considered comparing BrokenRule.Description, but this seems too fragile (changing the verbiage breaks the test, and it's the rule that is under test, not the verbiage). I also considered parsing BrokenRule.RuleName, but this seems too intimate (the unit test doesn't know the validation callback method name that composes RuleName). <br><br>I settled on counting the number of broken rules (satisfy a known condition then test that the broken rule count decreases by 1), but I'd like to know what others in the community are doing.<br><br>Craig<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>am_fusion replied on Tuesday, February 02, 2010</h2><P>we have taken the approach of using the rule name:</P><FONT color=#02e0ec>
<P></FONT><FONT color=#247a93>Assert</FONT><FONT color=#02e0ec>.</FONT><FONT color=#acb16d>AreEqual</FONT><FONT color=#02e0ec>&lt;</FONT><FONT color=#ad700a>int</FONT><FONT color=#02e0ec>&gt;(</FONT><FONT color=#00ffff>1</FONT><FONT color=#02e0ec>, </FONT><FONT color=#acb16d>uut</FONT><FONT color=#02e0ec>.</FONT><FONT color=#acb16d>BrokenRulesCollection</FONT><FONT color=#02e0ec>.</FONT><FONT color=#acb16d>Count</FONT><FONT color=#02e0ec>((</FONT><FONT color=#acb16d>br</FONT><FONT color=#02e0ec>) =&gt; { </FONT><FONT color=#ad700a>return</FONT><FONT color=#02e0ec> </FONT><FONT color=#acb16d>br</FONT><FONT color=#02e0ec>.</FONT><FONT color=#acb16d>RuleName</FONT><FONT color=#02e0ec>.</FONT><FONT color=#acb16d>Contains</FONT><FONT color=#02e0ec>(</FONT><FONT color=#fe2c1b>"StringRequired/LastName"</FONT><FONT color=#02e0ec>); }),</P>
<P></FONT><FONT color=#fe2c1b>"LastName was set to an invalid value but the LastName StringRequired rule was not broken."</FONT><FONT color=#02e0ec>);</FONT></P>
<P><FONT color=#02e0ec></FONT>&nbsp;</P>
<P><FONT color=#02e0ec>&nbsp;</P></FONT></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
