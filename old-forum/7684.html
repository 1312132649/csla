<html><header><title>Unmanaged property declaration question.</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Unmanaged property declaration question.</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/7684.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>rxelizondo posted on Saturday, September 26, 2009</h2>Hello.<br /><br />On page 176 of the book the author says:<br /><br />--------------------------------------------------<br />I have included examples for the two most common types of property declaration. The first<br />example uses a private backing field, which you declare directly in code:<br /><br />// example with private backing field<br />private static PropertyInfo IdProperty = RegisterProperty(typeof(EditableRoot), new PropertyInfo("Id"));<br />private int _Id = IdProperty.DefaultValue;<br />public int Id<br />{<br />get { return GetProperty(IdProperty, _Id); }<br />set { SetProperty(IdProperty, ref _Id, value); }<br />}<br /><br />This approach performs better than the alternative, but does require slightly more complex<br />code. Additionally, if you intend on using CSLA .NET for Silverlight to create a Silverlight version of<br />your application, this approach will require extra coding to support that environment.<br />--------------------------------------------------<br /><br />The problem is that in the ProjectTracker example he uses a private field for a time stamp and completely bypasses any type of property registering process.<br /><br />private byte[] _timestamp = new byte[ 8 ];<br /><br />So regarding the part of his statement “if you intend on using CSLA .NET for Silverlight to create a Silverlight version of your application, this approach will require extra coding to support that environment.” Is the fact that the _timestamp is not a managed field will cause any problems with Silverlight?<br /><br /><br />Thank you.</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JonnyBee replied on Sunday, September 27, 2009</h2>HI, <br><br>The ProjectTracker application is not completely up-to-date on all the propert declarations for use in Silverlight. I'd recommend to change these properties into managed properties if you want to write ProjectTracker in Silverlight. <br><br>Managed properties require no extra code for serialization in Silverlight, private backing fields do. <br><br>You may also look at varieos implementations of ProjectTracker on CslaContrib (versions for ASP.NET MVC and Prism(WPF))<br><br>/jonnybee<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Monday, September 28, 2009</h2>I believe it would.  I think the issue is that SL doesn't have reflection, and thus no way to serialize BOs by looking at the fields directly.  I think there are two ways around this:  1)  make the field a managed property with managed field.  2)  override some methods of MobileObject to handle serializing / deserializing the field.</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Monday, September 28, 2009</h2>Yes, the _timestamp field would need to be a managed property (though it could be private) to work transparently with Silverlight.</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Monday, September 28, 2009</h2>Would it be possible to have a private backing field if you override the serialize  / deserialize on MobileObject?  I know that's probably not the recommended approach.. just curious if it would work though.</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Monday, September 28, 2009</h2>That would work just fine. And it is a supported technique - the only<br />problem with it is that I think it increases the maintenance burden because<br />it is too easy to forget to update the getstate/setstate methods when you<br />add a new field to a class.</div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
