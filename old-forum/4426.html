<html><header><title>LINQ to SQL: the end of CSLA?</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>LINQ to SQL: the end of CSLA?</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/4426.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>rjn123 posted on Wednesday, February 27, 2008</h2><P>My company has implemented a number of successful solutions using CSLA 2.x as the basis of the business layer, linking through to SQL Server databases by calling sprocs via ADO.NET in the DataPortal_X methods. Now a colleague is telling me that when we implement new applications, we can give up on both CSLA and sprocs, because instead we can use LINQ To SQL. It&nbsp;will generate a load of classes that we can use as the basis of our business layer, and any custom business logic can be added to those classes via the partial class mechanism.</P>
<P>I know a bit about LINQ, but I haven't had time to properly evaluate the features of LINQ to SQL or the code-generated classes that it creates. My instinct is that&nbsp;abandoning CSLA for L2S is a bad idea, and my research on the subject seems to confirm this - <A href="http://www.lhotka.net/weblog/ADONETEntityFrameworkLINQAndCSLANET.aspx">elsewhere</A> Rocky says that&nbsp;this will be "very painful &nbsp;for anything but the most trivial of applications".</P>
<P>My question is, has anyone tried this method of using L2S, can anyone comment on the practicalities of this approach versus using CSLA? What are the features of the L2S code-generated classes that cause them to not make "embedded business logic maintainable or easily reusable"? </P>
<P>Thanks in advance,</P>
<P>Richard</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JoeFallon1 replied on Wednesday, February 27, 2008</h2><P>Linq to SQL is a Microsoft version 1 technology. (And we all know that we have to wait for version 3, right?)</P>
<P>Whereas CSLA has been in use for 4+ years and is extremely solid.</P>
<P>I would never consider abandoning CSLA for an unproven technology.</P>
<P>See Rick Strahl's blog for some in depth discussion of the pain points around Linq to SQL. Focus especially on the loss of the DataContext when you try to use L2S across tiers.</P>
<P>Joe</P>
<P>&nbsp;</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Curelom replied on Wednesday, February 27, 2008</h2><P>Linq does not provide all of the functionality you get when using CSLA.&nbsp; Linq is only supported by Sql Server currently (possibly Access).</P>
<P>Linq and Linq to Sql can be used hand in hand with CSLA.&nbsp; Rocky has some good examples of using Linq in CSLA in the Project Tracker on CSLA 3.5 beta 2.&nbsp; </P>
<P>Linq to Sql can also access stored procs, so no reason for those to go away either.</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>rjn123 replied on Wednesday, February 27, 2008</h2><P>&gt; Linq to Sql can also access stored procs, so no reason for those to go away either.</P>
<P>So then the only thing that would be changing is that inside the DataPortal methods, instead of doing ADO.NET Connections, Commands and so on, we'd be using L2S instead. Would there be any benefits to making that switch at all?</P>
<P>Richard</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Curelom replied on Wednesday, February 27, 2008</h2><P>There are a couple reasons that I prefer Linq in the DataPortal methods.&nbsp; The first is that calling a stored procedure with linq isn't more complicated then calling a method to an object.&nbsp; You just need to instansiate a context, then call the method.&nbsp; Another reason is that it provides Compiler time checking and data type checking.&nbsp; You don't have to worry if you've misspelled a proc, parameter, or table name.&nbsp; It also simplifies dealing with connection management.</P>
<P>You can also use regular Linq on your csla collections for filtering/sorting/grouping etc.</P>
<P>Since I've been&nbsp;moving to Linq where I can (I still have to hit Oracle databases on most projects&nbsp;<img src="/emoticons/emotion-6.gif" alt="Sad [:(]" />),&nbsp; I've been impressed and like it quite a bit.</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Wednesday, February 27, 2008</h2><BLOCKQUOTE><div><img src="/Themes/default/images/icon-quote.gif"> <strong>rjn123:</strong></div><div>
<P>&gt; Linq to Sql can also access stored procs, so no reason for those to go away either.</P>
<P>So then the only thing that would be changing is that inside the DataPortal methods, instead of doing ADO.NET Connections, Commands and so on, we'd be using L2S instead. Would there be any benefits to making that switch at all?</P>
<P></div></BLOCKQUOTE></P>
<P>I think it depends on what you are comparing it to.</P>
<P>Compared to raw ADO.NET L2S is slower, but much more readable and it requires less manual coding. So in the new ProjectTracker code I switched from raw ADO.NET to L2S and I'm very happy.</P>
<P>And since I'm using stored procedures via L2S the performance is no different for insert/update/delete operations - there's just a small perf hit on data retrieval. For me this seems like a great compromise! I'm very much enjoying using L2S.</P>
<P>But if you are already using an ORM tool (one of the many out there) then I'm guessing you'll find little or no value. As some people have pointed out, L2S is a v1 technology, while many of the other ORMs out there have been around for years and provide some very nice features.</P>
<P>Also you must consider that the ADO.NET Entity Framework is coming later this year. It is not unlike L2S, but is a broader, more powerful technology. It also fits the same niche within the CSLA world - as a replacement data access technology within the DataPortal_XYZ methods - but it provides support for more types of database and more complex mapping schemes than L2S.</P>
<P>So for smaller, simpler SQL Server scenarios I think L2S is awesome. Really wonderful and fun!</P>
<P>But more non-SQL Server scenarios you'll need something else. And for more complex mapping scenarios you'll need something else. ADO.NET EF is a candidate, as are various other tools out there.</P>
<P>This whole discussion highlights exactly why I've refused, time and time again, to tightly couple CSLA to any one data access technology. If I'd have gone for ADO.NET, or the DataSet then CSLA would be in trouble right now. If I go for L2S over EF (or visa versa) I am gambling on which (if either) will win.</P>
<P>And history has shown that no Microsoft data access technology lasts longer than 5 years. Ever. And the <EM>average</EM> time one lasts is just 2.6 years. Seriously. Personally I want CSLA to remain relevant longer than 2.6 years, so I've very cautious when it comes to coupling tightly to any of these data access larks Microsoft embarks on every couple years...</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>rsbaker0 replied on Wednesday, February 27, 2008</h2><BLOCKQUOTE><div><img src="/Themes/default/images/icon-quote.gif"> <strong>RockfordLhotka:</strong></div><div>
<P>...</P>
<P>This whole discussion highlights exactly why I've refused, time and time again, to tightly couple CSLA to any one data access technology. If I'd have gone for ADO.NET, or the DataSet then CSLA would be in trouble right now. If I go for L2S over EF (or visa versa) I am gambling on which (if either) will win.</P>
<P>And history has shown that no Microsoft data access technology lasts longer than 5 years. Ever. And the <EM>average</EM> time one lasts is just 2.6 years. Seriously. Personally I want CSLA to remain relevant longer than 2.6 years, so I've very cautious when it comes to coupling tightly to any of these data access larks Microsoft embarks on every couple years...</P>
<P></div></BLOCKQUOTE></P>
<P>This was a significant factor in our choosing CSLA -- that it wasn't in any way dependent on the underlying database access technology. </P>
<P>We had&nbsp;a prototype running under an ORM, and I converted it to run using CLSA in just a couple of days, and it still uses the same ORM. I could swap the ORM with another data access layer and the business logic of our application wouldn't be affected. </P>
<P>CSLA provides other added value over whatever data access method is used&nbsp;-- multi-level undo, validation rules, and role-based authorization rules, and flexible tier configuration (2-tier, 3-tier, etc.). </P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>rjn123 replied on Thursday, February 28, 2008</h2><P>Thanks for your reply, Rocky.</P>
<P>&gt; But if you are already using an ORM tool (one of the many out there) then I'm guessing you'll find little or no value. As some people have pointed out, L2S is a v1 technology, while many of the other ORMs out there have been around for years and provide some very nice features.</P>
<P>My company is not already using an ORM tool. And historically it has proved much easier to get my colleagues to use a new MS technology than it is to get them to use a third party or open source tool. (CSLA is the exception - after much pushing from me and a few of the other staff). So L2S may be a good way to introduce my colleagues to ORM. And maybe the benefits of code-gen too (something else I am trying to push).</P>
<P>The applications we write are typically small, almost always web apps, almost always SQL Server, and almost always a new db with the structure under our control.</P>
<P>The comments I've had on this thread so far have all reinforced the ideas I have been formulating... so thank you all.</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JonM replied on Saturday, March 01, 2008</h2><P>Serializing objects and data is just a small part of CSLA.net.&nbsp; I can't image the Entity Framework or Linq replacing the validation, authorization, n-level undo, and multi-tier design issues that CSLA solves.&nbsp; </P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>tmg4340 replied on Saturday, March 01, 2008</h2><FONT face=Tahoma size=2><BLOCKQUOTE><div><img src="/Themes/default/images/icon-quote.gif"> <strong>JonM:</strong></div><div></FONT><FONT face=Tahoma size=2>Serializing objects and data is just a small part of CSLA.net.&nbsp; I can't image the Entity Framework or Linq replacing the validation, authorization, n-level undo, and multi-tier design issues that CSLA solves.</FONT><FONT face=Tahoma size=2></div></BLOCKQUOTE></FONT>
<P><FONT face=Tahoma size=2>You know, this opens a question that, at least to me, might be worth it's own thread...</FONT></P>
<P><FONT face=Tahoma size=2>Not because I think it would involve a ton of debate (though it could.)&nbsp; But mostly because the question has little to do with the topic of this thread.&nbsp; And because it's&nbsp;mostly a question for Rocky.&nbsp; So...</FONT></P>
<P><FONT face=Tahoma size=2>Rocky: what would you do if one of MS's larks was to "buy" CSLA off of you and turn it into one of their technologies?&nbsp; There are certainly a lot of hurdles in that kind of situation, and I'm not in any way suggesting it as a good idea.&nbsp; But considering what&nbsp;CSLA does, and considering&nbsp;where MS&nbsp;seems to be going with some of their stuff, turning CSLA into an "official" MS product - either through licensing, outright purchase, or some other form of appropriation - does not seem entirely out of the question.&nbsp; After all, MS has bought their way out of certain problems before...</FONT></P>
<P><FONT face=Tahoma size=2>On the other hand, I think it might be a difficult sell for them to take something like this (i.e. something that directly produces revenue for you and Magenic) and "bring it in-house".&nbsp; Compensation for you is one thing, but considering (and potentially compensating for) the effects on Magenic might be a whole different ball of wax.</FONT></P>
<P><FONT face=Tahoma size=2>The big problem I see is that a lot of these types of things tend to get pushed by some folks in MS and then they die off from lack of support.&nbsp; And while it is starting to get better, MS doesn't have a huge track record of giving something back to the community to support.</FONT></P>
<P><FONT face=Tahoma size=2>Just curious...</FONT></P>
<P><FONT face=Tahoma size=2>- Scott</FONT></P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Sunday, March 02, 2008</h2><P>I'm not holding my breath on something like that <img src="/emoticons/emotion-5.gif" alt="Wink [;)]" /></P>
<P>Microsoft typically acquires these sorts of things to get the employees - the IP in their heads - more than anything else. And while I've been courted to work there a few times, I really have no desire to move to Redmond (and more importantly nor does my wife).</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JoeFallon1 replied on Monday, March 03, 2008</h2><BLOCKQUOTE><div><img src="/Themes/default/images/icon-quote.gif"> <strong>RockfordLhotka:</strong></div><div>
<P>I really have no desire to move to Redmond.</P>
<P></div></BLOCKQUOTE></P>
<P>Rocky,</P>
<P>They have this new fangled technology called "The Internet".</P>
<P>They also have some new business practices called "working from home" - I think it is called tele-commuting.</P>
<P>I have been doing it for a decade now. </P>
<P>Works OK for me and my family.</P>
<P>Joe</P>
<P>&nbsp;</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>tmg4340 replied on Monday, March 03, 2008</h2><P><FONT face=Tahoma size=2>Yeah - but that makes Assimilation a whole lot harder.&nbsp; After all, you have to send the equipment to him, and then hope he hooks it to his brain so they can directly plug in via this new-fangled technology... <img src="/emoticons/emotion-1.gif" alt="Smile [:)]" /></FONT></P>
<P><FONT face=Tahoma size=2>Rocky - if that's the main intent, then it begins to make more sense why some of these projects die.&nbsp; It's unfortunate, though - some of them were actually pretty decent.</FONT></P>
<P><FONT face=Tahoma size=2>And as for moving to Redmond - I live in Iowa, and right about now, I might trade the Midwest winter for some rain...</FONT></P>
<P><FONT face=Tahoma size=2>- Scott</FONT></P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Wednesday, February 27, 2008</h2>Well, Csla isn't solving the DTO problem, its providing a framework upon which to build business objects.&nbsp; Business objects exist to fulfill a usecase, not to mirror the database.&nbsp; using DTOs as business objects is exteremly painful... I've done it.&nbsp; <br><br>Also, L2S doesn't provide things like location transparency (L2S must talk directly to the database), n-level undo, data binding support, authorization support, validation rule support.&nbsp; Its yet another way to read from a database, nothing more.&nbsp; L2S may replace things like NHibernate and other DTO frameworks, but Csla isn't a DTO framework, its a business object framework.<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>rsbaker0 replied on Wednesday, February 27, 2008</h2><P><BLOCKQUOTE><div><img src="/Themes/default/images/icon-quote.gif"> <strong>ajj3085:</strong></div><div>... L2S may replace things like NHibernate and other DTO frameworks, but Csla isn't a DTO framework, its a business object framework.<BR></div></BLOCKQUOTE></P>
<P>Until it supports more databases, I don't see L2S as providing any real advantage over a DTO framework . We're using CSLA with the&nbsp;Wilson ORMapper to provide a DAL, and it works great. Not only that, but I was able to plug in Oracle's ODP.NET data provider with an hour or so of work, so we now support 4 different providers and 3 databases (SQL, Oracle, and Access). When L2S can do that, then I'll look at it...</P></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
