<html><header><title>Deploying Silverlight 3-Tier App to 1 Server</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Deploying Silverlight 3-Tier App to 1 Server</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/7549.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>Gareth posted on Tuesday, September 01, 2009</h2>Hi, I'm trying to deploy my Silverlight 3-Tier App to 1 server for testing purposes and I'm struggling to work out how to configure it.<br />I've created 2 web sites, one for the SL application (t2tdemo), and one for the application server (t2tappsrv).<br />I've copied the relevant files from Visual Studio into the directories.<br /><br />I've also copied web.config into both directories (do I need it in both?)<br /><br />I've modified the end point address in the t2tdemo website to point to the t2tappsrv web site.<br />I've modifed the sql connection string in t2tappsrv to point to the correct database.<br /><br />When I run the app (t2tdemo) the Silverlight application loads correctly but when I do anything that needs to call a business object I get the following error:<br /><br />Any ideas why?<br /><br />---------------------------<br />Oops<br />---------------------------<br />An error has occured:<br /><br />System.Reflection.TargetInvocationException: [Async_ExceptionOccurred]<br /><br />Arguments:<br /><br />Debugging resource strings are unavailable. Often the key and arguments provide sufficient information to diagnose the problem. See http://go.microsoft.com/fwlink/?linkid=106663&amp;Version=3.0.40723.0&amp;File=System.dll&amp;Key=Async_ExceptionOccurred ---> System.ServiceModel.CommunicationException: [CrossDomainError]<br /><br />Arguments:http://localhost:1814/WcfSlPortal.svc<br /><br />Debugging resource strings are unavailable. Often the key and arguments provide sufficient information to diagnose the problem. See http://go.microsoft.com/fwlink/?linkid=106663&amp;Version=3.0.40723.0&amp;File=System.ServiceModel.dll&amp;Key=CrossDomainError ---> System.Security.SecurityException ---> System.Security.SecurityException: [Arg_SecurityException]<br /><br />Arguments:<br /><br />Debugging resource strings are unavailable. Often the key and arguments provide sufficient information to diagnose the problem. See http://go.microsoft.com/fwlink/?linkid=106663&amp;Version=3.0.40723.0&amp;File=mscorlib.dll&amp;Key=Arg_SecurityException<br /><br />   at System.Net.Browser.BrowserHttpWebRequest.InternalEndGetResponse(IAsyncResult asyncResult)<br /><br />   at System.Net.Browser.BrowserHttpWebRequest.<>c__DisplayClass5.b__4(Object sendState)<br /><br />   at System.Net.Browser.AsyncHelper.<>c__DisplayClass2.b__0(Object sendState)<br /><br />   --- End of inner exception stack trace ---<br /><br />   at System.Net.Browser.AsyncHelper.BeginOnUI(SendOrPostCallback beginMethod, Object state)<br /><br />   at System.Net.Browser.BrowserHttpWebRequest.EndGetResponse(IAsyncResult asyncResult)<br /><br />   at System.ServiceModel.Channels.HttpChannelFactory.HttpRequestChannel.HttpChannelAsyncRequest.CompleteGetResponse(IAsyncResult result)<br /><br />   --- End of inner exception stack trace ---<br /><br />   at System.ServiceModel.AsyncResult.End[TAsyncResult](IAsyncResult result)<br /><br />   at System.ServiceModel.Channels.ServiceChannel.SendAsyncResult.End(SendAsyncResult result)<br /><br />   at System.ServiceModel.Channels.ServiceChannel.EndCall(String action, Object[] outs, IAsyncResult result)<br /><br />   at System.ServiceModel.ClientBase`1.ChannelBase`1.EndInvoke(String methodName, Object[] args, IAsyncResult result)<br /><br />   at Csla.WcfPortal.WcfPortalClient.WcfPortalClientChannel.EndFetch(IAsyncResult result)<br /><br />   at Csla.WcfPortal.WcfPortalClient.Csla.WcfPortal.IWcfPortal.EndFetch(IAsyncResult result)<br /><br />   at Csla.WcfPortal.WcfPortalClient.OnEndFetch(IAsyncResult result)<br /><br />   at System.ServiceModel.ClientBase`1.OnAsyncCallCompleted(IAsyncResult result)<br /><br />   --- End of inner exception stack trace ---<br /><br />   at System.ComponentModel.AsyncCompletedEventArgs.RaiseExceptionIfNecessary()<br /><br />   at Csla.WcfPortal.FetchCompletedEventArgs.get_Result()<br /><br />   at Csla.DataPortalClient.WcfProxy`1.proxy_FetchCompleted(Object sender, FetchCompletedEventArgs e)<br />---------------------------<br />OK   <br />---------------------------<br /></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>sergeyb replied on Tuesday, September 01, 2009</h2>Because they are in different web sites, you need to configure policy file for Silverlight to allow it to call a service on a different web site.  The changes need to occur on the web site that hosts WCF service, not on the one that hosts SL app.<br /><br />http://msdn.microsoft.com/en-us/library/cc645032(VS.95).aspx<br /><br /><br />Sergey Barskiy<br />Principal Consultant<br />office: 678.405.0687 | mobile:&#160;404.388.1899<br /><br />Microsoft Worldwide Partner of the Year | Custom Development Solutions, Technical Innovation<br /><br />-----Original Message-----<br />From: Gareth [mailto:cslanet@lhotka.net] <br />Sent: Tuesday, September 01, 2009 9:49 AM<br />To: Sergey Barskiy<br />Subject: [CSLA .NET] Deploying Silverlight 3-Tier App to 1 Server<br /><br />Hi, I'm trying to deploy my Silverlight 3-Tier App to 1 server for testing purposes and I'm struggling to work out how to configure it.<br />I've created 2 web sites, one for the SL application (t2tdemo), and one for the application server (t2tappsrv).<br />I've copied the relevant files from Visual Studio into the directories.<br /><br />I've also copied web.config into both directories (do I need it in both?)<br /><br />I've modified the end point address in the t2tdemo website to point to the t2tappsrv web site.<br />I've modifed the sql connection string in t2tappsrv to point to the correct database.<br /><br />When I run the app (t2tdemo) the Silverlight application loads correctly but when I do anything that needs to call a business object I get the following error:<br /><br />Any ideas why?<br /><br />---------------------------<br />Oops<br />---------------------------<br />An error has occured:<br /><br />System.Reflection.TargetInvocationException: [Async_ExceptionOccurred]<br /><br />Arguments:<br /><br />Debugging resource strings are unavailable. Often the key and arguments provide sufficient information to diagnose the problem. See http://go.microsoft.com/fwlink/?linkid=106663&amp;Version=3.0.40723.0&amp;File=System.dll&amp;Key=Async_ExceptionOccurred ---> System.ServiceModel.CommunicationException: [CrossDomainError]<br /><br />Arguments:http://localhost:1814/WcfSlPortal.svc<br /><br />Debugging resource strings are unavailable. Often the key and arguments provide sufficient information to diagnose the problem. See http://go.microsoft.com/fwlink/?linkid=106663&amp;Version=3.0.40723.0&amp;File=System.ServiceModel.dll&amp;Key=CrossDomainError ---> System.Security.SecurityException ---> System.Security.SecurityException: [Arg_SecurityException]<br /><br />Arguments:<br /><br />Debugging resource strings are unavailable. Often the key and arguments provide sufficient information to diagnose the problem. See http://go.microsoft.com/fwlink/?linkid=106663&amp;Version=3.0.40723.0&amp;File=mscorlib.dll&amp;Key=Arg_SecurityException<br /><br />   at System.Net.Browser.BrowserHttpWebRequest.InternalEndGetResponse(IAsyncResult asyncResult)<br /><br />   at System.Net.Browser.BrowserHttpWebRequest.<>c__DisplayClass5.b__4(Object sendState)<br /><br />   at System.Net.Browser.AsyncHelper.<>c__DisplayClass2.b__0(Object sendState)<br /><br />   --- End of inner exception stack trace ---<br /><br />   at System.Net.Browser.AsyncHelper.BeginOnUI(SendOrPostCallback beginMethod, Object state)<br /><br />   at System.Net.Browser.BrowserHttpWebRequest.EndGetResponse(IAsyncResult asyncResult)<br /><br />   at System.ServiceModel.Channels.HttpChannelFactory.HttpRequestChannel.HttpChannelAsyncRequest.CompleteGetResponse(IAsyncResult result)<br /><br />   --- End of inner exception stack trace ---<br /><br />   at System.ServiceModel.AsyncResult.End[TAsyncResult](IAsyncResult result)<br /><br />   at System.ServiceModel.Channels.ServiceChannel.SendAsyncResult.End(SendAsyncResult result)<br /><br />   at System.ServiceModel.Channels.ServiceChannel.EndCall(String action, Object[] outs, IAsyncResult result)<br /><br />   at System.ServiceModel.ClientBase`1.ChannelBase`1.EndInvoke(String methodName, Object[] args, IAsyncResult result)<br /><br />   at Csla.WcfPortal.WcfPortalClient.WcfPortalClientChannel.EndFetch(IAsyncResult result)<br /><br />   at Csla.WcfPortal.WcfPortalClient.Csla.WcfPortal.IWcfPortal.EndFetch(IAsyncResult result)<br /><br />   at Csla.WcfPortal.WcfPortalClient.OnEndFetch(IAsyncResult result)<br /><br />   at System.ServiceModel.ClientBase`1.OnAsyncCallCompleted(IAsyncResult result)<br /><br />   --- End of inner exception stack trace ---<br /><br />   at System.ComponentModel.AsyncCompletedEventArgs.RaiseExceptionIfNecessary()<br /><br />   at Csla.WcfPortal.FetchCompletedEventArgs.get_Result()<br /><br />   at Csla.DataPortalClient.WcfProxy`1.proxy_FetchCompleted(Object sender, FetchCompletedEventArgs e)<br />---------------------------<br />OK   <br />---------------------------<br /><br /></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Gareth replied on Tuesday, September 01, 2009</h2>Ok, that makes senses. I've added the cross domain policy files now. But I'm still getting a similar error (see below).<br /><br />---------------------------<br />Oops<br />---------------------------<br />An error has occured:<br /><br />System.Reflection.TargetInvocationException: [Async_ExceptionOccurred]<br /><br />Arguments:<br /><br />Debugging resource strings are unavailable. Often the key and arguments provide sufficient information to diagnose the problem. See http://go.microsoft.com/fwlink/?linkid=106663&amp;Version=3.0.40723.0&amp;File=System.dll&amp;Key=Async_ExceptionOccurred ---> System.ServiceModel.CommunicationException: [CrossDomainError]<br /><br />Arguments:http://localhost:1814/WcfSlPortal.svc<br /><br />Debugging resource strings are unavailable. Often the key and arguments provide sufficient information to diagnose the problem. See http://go.microsoft.com/fwlink/?linkid=106663&amp;Version=3.0.40723.0&amp;File=System.ServiceModel.dll&amp;Key=CrossDomainError ---> System.Security.SecurityException ---> System.Security.SecurityException: [Arg_SecurityException]<br /><br />Arguments:<br /><br />Debugging resource strings are unavailable. Often the key and arguments provide sufficient information to diagnose the problem. See http://go.microsoft.com/fwlink/?linkid=106663&amp;Version=3.0.40723.0&amp;File=mscorlib.dll&amp;Key=Arg_SecurityException<br /><br />   at System.Net.Browser.BrowserHttpWebRequest.InternalEndGetResponse(IAsyncResult asyncResult)<br /><br />   at System.Net.Browser.BrowserHttpWebRequest.<>c__DisplayClass5.b__4(Object sendState)<br /><br />   at System.Net.Browser.AsyncHelper.<>c__DisplayClass2.b__0(Object sendState)<br /><br />   --- End of inner exception stack trace ---<br /><br />   at System.Net.Browser.AsyncHelper.BeginOnUI(SendOrPostCallback beginMethod, Object state)<br /><br />   at System.Net.Browser.BrowserHttpWebRequest.EndGetResponse(IAsyncResult asyncResult)<br /><br />   at System.ServiceModel.Channels.HttpChannelFactory.HttpRequestChannel.HttpChannelAsyncRequest.CompleteGetResponse(IAsyncResult result)<br /><br />   --- End of inner exception stack trace ---<br /><br />   at System.ServiceModel.AsyncResult.End[TAsyncResult](IAsyncResult result)<br /><br />   at System.ServiceModel.Channels.ServiceChannel.SendAsyncResult.End(SendAsyncResult result)<br /><br />   at System.ServiceModel.Channels.ServiceChannel.EndCall(String action, Object[] outs, IAsyncResult result)<br /><br />   at System.ServiceModel.ClientBase`1.ChannelBase`1.EndInvoke(String methodName, Object[] args, IAsyncResult result)<br /><br />   at Csla.WcfPortal.WcfPortalClient.WcfPortalClientChannel.EndFetch(IAsyncResult result)<br /><br />   at Csla.WcfPortal.WcfPortalClient.Csla.WcfPortal.IWcfPortal.EndFetch(IAsyncResult result)<br /><br />   at Csla.WcfPortal.WcfPortalClient.OnEndFetch(IAsyncResult result)<br /><br />   at System.ServiceModel.ClientBase`1.OnAsyncCallCompleted(IAsyncResult result)<br /><br />   --- End of inner exception stack trace ---<br /><br />   at System.ComponentModel.AsyncCompletedEventArgs.RaiseExceptionIfNecessary()<br /><br />   at Csla.WcfPortal.FetchCompletedEventArgs.get_Result()<br /><br />   at Csla.DataPortalClient.WcfProxy`1.proxy_FetchCompleted(Object sender, FetchCompletedEventArgs e)<br />---------------------------<br />OK   <br />---------------------------<br /></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Gareth replied on Tuesday, September 01, 2009</h2>Just a thought, do I need to recompile the app with those files in the solution?</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>sergeyb replied on Tuesday, September 01, 2009</h2>I think the policy file is not quite right still.  It is pretty clear judging from the error.<br /><br />Sergey Barskiy<br />Principal Consultant<br />office: 678.405.0687 | mobile:&#160;404.388.1899<br /><br />Microsoft Worldwide Partner of the Year | Custom Development Solutions, Technical Innovation<br /><br /><br />-----Original Message-----<br />From: Gareth [mailto:cslanet@lhotka.net] <br />Sent: Tuesday, September 01, 2009 12:08 PM<br />To: Sergey Barskiy<br />Subject: Re: [CSLA .NET] RE: Deploying Silverlight 3-Tier App to 1 Server<br /><br />Ok, that makes senses. I've added the cross domain policy files now. But I'm still getting a similar error (see below).<br /><br />---------------------------<br />Oops<br />---------------------------<br />An error has occured:<br /><br />System.Reflection.TargetInvocationException: [Async_ExceptionOccurred]<br /><br />Arguments:<br /><br />Debugging resource strings are unavailable. Often the key and arguments provide sufficient information to diagnose the problem. See http://go.microsoft.com/fwlink/?linkid=106663&amp;Version=3.0.40723.0&amp;File=System.dll&amp;Key=Async_ExceptionOccurred ---> System.ServiceModel.CommunicationException: [CrossDomainError]<br /><br />Arguments:http://localhost:1814/WcfSlPortal.svc<br /><br />Debugging resource strings are unavailable. Often the key and arguments provide sufficient information to diagnose the problem. See http://go.microsoft.com/fwlink/?linkid=106663&amp;Version=3.0.40723.0&amp;File=System.ServiceModel.dll&amp;Key=CrossDomainError ---> System.Security.SecurityException ---> System.Security.SecurityException: [Arg_SecurityException]<br /><br />Arguments:<br /><br />Debugging resource strings are unavailable. Often the key and arguments provide sufficient information to diagnose the problem. See http://go.microsoft.com/fwlink/?linkid=106663&amp;Version=3.0.40723.0&amp;File=mscorlib.dll&amp;Key=Arg_SecurityException<br /><br />   at System.Net.Browser.BrowserHttpWebRequest.InternalEndGetResponse(IAsyncResult asyncResult)<br /><br />   at System.Net.Browser.BrowserHttpWebRequest.<>c__DisplayClass5.b__4(Object sendState)<br /><br />   at System.Net.Browser.AsyncHelper.<>c__DisplayClass2.b__0(Object sendState)<br /><br />   --- End of inner exception stack trace ---<br /><br />   at System.Net.Browser.AsyncHelper.BeginOnUI(SendOrPostCallback beginMethod, Object state)<br /><br />   at System.Net.Browser.BrowserHttpWebRequest.EndGetResponse(IAsyncResult asyncResult)<br /><br />   at System.ServiceModel.Channels.HttpChannelFactory.HttpRequestChannel.HttpChannelAsyncRequest.CompleteGetResponse(IAsyncResult result)<br /><br />   --- End of inner exception stack trace ---<br /><br />   at System.ServiceModel.AsyncResult.End[TAsyncResult](IAsyncResult result)<br /><br />   at System.ServiceModel.Channels.ServiceChannel.SendAsyncResult.End(SendAsyncResult result)<br /><br />   at System.ServiceModel.Channels.ServiceChannel.EndCall(String action, Object[] outs, IAsyncResult result)<br /><br />   at System.ServiceModel.ClientBase`1.ChannelBase`1.EndInvoke(String methodName, Object[] args, IAsyncResult result)<br /><br />   at Csla.WcfPortal.WcfPortalClient.WcfPortalClientChannel.EndFetch(IAsyncResult result)<br /><br />   at Csla.WcfPortal.WcfPortalClient.Csla.WcfPortal.IWcfPortal.EndFetch(IAsyncResult result)<br /><br />   at Csla.WcfPortal.WcfPortalClient.OnEndFetch(IAsyncResult result)<br /><br />   at System.ServiceModel.ClientBase`1.OnAsyncCallCompleted(IAsyncResult result)<br /><br />   --- End of inner exception stack trace ---<br /><br />   at System.ComponentModel.AsyncCompletedEventArgs.RaiseExceptionIfNecessary()<br /><br />   at Csla.WcfPortal.FetchCompletedEventArgs.get_Result()<br /><br />   at Csla.DataPortalClient.WcfProxy`1.proxy_FetchCompleted(Object sender, FetchCompletedEventArgs e)<br />---------------------------<br />OK   <br />---------------------------<br /><br /></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
