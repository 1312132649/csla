<html><header><title>CSLA 2.1 Validation Problem</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>CSLA 2.1 Validation Problem</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/965.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>JZuerlein posted on Monday, August 21, 2006</h2><P>I'm doing some testing with 2.1 and started coming across some problem when I try to add validation to a&nbsp; class.&nbsp; The ValidationRulesManager is not nothing, but the children can not be evaluated.&nbsp; So when you try to get the list of rules for the property, a null reference exception is thrown.&nbsp; Has anyone seen this before?</P>
<P>Jeff</P><FONT color=#008000 size=2>
<P>&nbsp;&nbsp; at Csla.Validation.ValidationRules.CheckRules(String propertyName) in C:\InternetDownloads\CSLA2\csla20vb-2.1-060731\csla20vb\csla20vb\Csla\Validation\ValidationRules.vb:line 556<BR>&nbsp;&nbsp; at Csla.Core.BusinessBase.PropertyHasChanged(String propertyName) in C:\InternetDownloads\CSLA2\csla20vb-2.1-060731\csla20vb\csla20vb\Csla\Core\BusinessBase.vb:line 254<BR>&nbsp;&nbsp; at EPAS.BusinessObjects.Form.set_DefaultForm(Boolean value) in C:\Projects\EPASV3\EPAS.BusinessObjects\Form\Form.vb:line 168<BR>&nbsp;&nbsp; at EPAS.BusinessObjects.UnitTests.FormFixture.InsertForm() in C:\Projects\EPASV3\EPAS.BusinessObjects.UnitTests\FormTestFixtures\FormFixture.vb:line 48<BR>&nbsp;&nbsp; at EPAS.BusinessObjects.UnitTests.FormFixture.Setup() in C:\Projects\EPASV3\EPAS.BusinessObjects.UnitTests\FormTestFixtures\FormFixture.vb:line 34</P><FONT color=#0000ff size=2>
<P>Protected</FONT><FONT color=#000000 size=2> </FONT><FONT color=#0000ff size=2>Overrides</FONT><FONT color=#000000 size=2> </FONT><FONT color=#0000ff size=2>Sub</FONT><FONT size=2><FONT color=#000000> AddBusinessRules()</FONT></P>
<P></FONT><FONT size=2>ValidationRules.AddRule(</FONT><FONT color=#0000ff size=2>AddressOf</FONT><FONT size=2> CommonRules.StringRequired, </FONT><FONT color=#800000 size=2>"Name"</FONT><FONT size=2>)</P>
<P></FONT><FONT color=#0000ff size=2>End</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>Sub</P>
<P></FONT><BR>&nbsp;</P></FONT></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Monday, August 21, 2006</h2>I appreciate you taking the time to test 2.1!<br><br>That sounds somewhat familiar, and is probably resolved in the current code. There were a couple places where I wasn't doing null reference checks quite right - hopefully I've caught them all.<br><br>Look for a refresh of the beta code yet this week - both VB and C# this time.<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Monday, August 21, 2006</h2>So you are saying that AddBusinessRules() isn't being called? There is
code in BusinessBase that makes this call - but in the current code it
only happens once per appdomain, because these are the per-type rules.
In other words, only the first object of a given type gets this call -
all subsequent objects of that type do NOT get the call because the
per-type rules have already been loaded.<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JZuerlein replied on Monday, August 21, 2006</h2><P>My bad on the post that I have since deleted.&nbsp; It is being called.</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JZuerlein replied on Monday, August 21, 2006</h2><P>Any way I could get an current build?&nbsp; A coworker and I are writing the validation code and unit tests this week for a project that's due at the end of Sept.&nbsp; We need the severity features to make it work, so rather then roll our own...</P>
<P>&nbsp;</P>
<P>Jeff</P>
<P>&nbsp;</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Wednesday, August 23, 2006</h2>




<DIV align=left><SPAN class=578221916-21082006><FONT face=Arial color=#0000ff size=2>Sure, you can use TortoiseCVS to get the current code 
through anonymous cvs at any time.</FONT></SPAN></DIV>
<DIV align=left><SPAN class=578221916-21082006><FONT face=Arial color=#0000ff size=2></FONT></SPAN>&nbsp;</DIV>
<DIV align=left><SPAN class=578221916-21082006><FONT face=Arial color=#0000ff size=2><A href="http://www.lhotka.net/Article.aspx?id=5987a664-4b44-45a7-bc1d-695610964718">http://www.lhotka.net/Article.aspx?id=5987a664-4b44-45a7-bc1d-695610964718</A></FONT></SPAN></DIV>
<DIV align=left><SPAN class=578221916-21082006><FONT face=Arial color=#0000ff size=2></FONT></SPAN>&nbsp;</DIV>
<DIV align=left><SPAN class=578221916-21082006><FONT face=Arial color=#0000ff size=2>Just make sure to use the revision tab to get branch 
V2-1.</FONT></SPAN></DIV>
<DIV align=left><SPAN class=578221916-21082006></SPAN>&nbsp;</DIV>
<DIV align=left><SPAN class=578221916-21082006><FONT face=Arial color=#0000ff size=2>Rocky</FONT></SPAN></DIV>
<DIV align=left><SPAN class=578221916-21082006><FONT face=Arial color=#0000ff size=2></FONT></SPAN>&nbsp;</DIV><BR>
<BLOCKQUOTE>
  <P>Any way I could get an current build?&nbsp; A coworker and I are writing 
  the validation code and unit tests this week for a project that's due at the 
  end of Sept.&nbsp; We need the severity features to make it work, so rather 
  then roll our own...</P></BLOCKQUOTE></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
