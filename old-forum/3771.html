<html><header><title>Troubleshooting the ErrorProvider?</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Troubleshooting the ErrorProvider?</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/3771.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>rsbaker0 posted on Wednesday, October 24, 2007</h2><P>I'm wondering in general how one goes about troubleshooting problems with the ErrorProvider control. </P>
<P>I've added some business rules to my bound objects, and the rules are working great. The object is flagged as invalid and CSLA throws an exception if you try to save it. </P>
<P>However, the ErrorProvider might as well not even be there. I've looked at the ErrorProvider designer code and compared to ProjectTracker, and it looks almost identical.</P>
<P>Also interesting is that when doing "in cell" editing with an ERLB bound to a DevExpress XtraGrid, it doesn't show the errors either. However, if the rule malfunctions and throws an exception, the DevExpress grid shows that clearly with it's own ErrorProvider control. </P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>KKoteles replied on Wednesday, October 24, 2007</h2><P>I've never had an issue with it...&nbsp; You have a bindingSource control on your form correct?&nbsp; You set the DataSource property of the bindingSource to your CSLA object, the data bindings of all your controls are set to the bindingSource and the appropriate text property, and the DataSource of the errorProvider itself is set to the bindingSource correct?</P>
<P>Did you add the BindingSourceRefresh control as well?&nbsp; Make sure the new property that is added to your bindingSource (ReadvaluesOnChange) is set to "true".</P>
<P>Not sure what else to check.</P>
<P>Ken&nbsp; </P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>rsbaker0 replied on Thursday, October 25, 2007</h2><P><BLOCKQUOTE><div><img src="/Themes/default/images/icon-quote.gif"> <strong>KKoteles:</strong></div><div>I've never had an issue with it...&nbsp; You have a bindingSource control on your form correct?&nbsp; You set the DataSource property of the bindingSource to your CSLA object, the data bindings of all your controls are set to the bindingSource and the appropriate text property, and the DataSource of the errorProvider itself is set to the bindingSource correct?</div></BLOCKQUOTE></P>
<P>*Exactly* -- and the bindings themselves work like a champ. Moreover, the broken rules collection of the bound object is updated as soon as you leave the field with the bad value, but the error provider is silent.</P>
<P>This is why I'm mystified. </P>
<P>So, when you're working with a "black box" like the ErrorProvider and it simply doesn't work once you've deskchecked everything, how do you go about figuring out why it's not working? Is there some event you can hook? &nbsp;Is there some debuggable ErrorProvider-like control out there that you can substitute?</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>KKoteles replied on Thursday, October 25, 2007</h2><P>Take a look at this thread:</P>
<P><A HREF="/forums/thread/18041.aspx">http://forums.lhotka.net/forums/thread/18041.aspx</A></P>
<P>I created an ErrorWarnInfoProvider that 'wraps' the ErrorProvider and allows for displaying warnings and informational details associated with a CSLA object.&nbsp; It might give you some insight into what the ErrorProvider itself is trying to use.&nbsp; There are a couple of bugs I fixed since I last posted, but no one seemed interested.&nbsp; If you are interested in the latest version (it fixes a bug where it now recurses through controls that contain controls) let me know and I can update it again.&nbsp;If that doesn't help, then you can try this site:</P>
<P><A href="http://www.aisto.com/roeder/dotnet/">http://www.aisto.com/roeder/dotnet/</A></P>
<P>By using reflector you can see exactly what ErrorProvider is doing internally.&nbsp; You can't debug it (as far as I know), but at least you can get an idea of what it is doing.</P>
<P>Ken</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>rsbaker0 replied on Thursday, November 01, 2007</h2><BLOCKQUOTE><div><img src="/Themes/default/images/icon-quote.gif"> <strong>KKoteles:</strong></div><div>
<P>...There are a couple of bugs I fixed since I last posted, but no one seemed interested.&nbsp; If you are interested in the latest version (it fixes a bug where it now recurses through controls that contain controls) let me know and I can update it again.&nbsp;...</div></BLOCKQUOTE></P>
<P>Yes, we definitely use nested controls, so I'd be interested in the related fixes. Thanks. </P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Thursday, October 25, 2007</h2>I'm actually getting this now as well; the bindings work, but the provider doesn't show the error.<br><br>I did fix an issue recently where the rule was bound to a child collection and via dependant properties, a specific property on the root object.&nbsp; Moving the rule to the root object itself resolved that issue.<br><br>I'm having the same problem now in another compoent; I actually have a control which allows editing of a root's child BO and the provider isn't working.&nbsp; Don't know why though.. going to investiage.<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Thursday, October 25, 2007</h2>Well, I've been able to confirm it's not a problem with having an ErrorProvider on a user control.&nbsp; Still looking into it though.<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Friday, October 26, 2007</h2>I don't know if this helps anyone else, but I found the problem with my ErrorProvider.<br><br>It seems that Description is not being set.&nbsp; This is my rule method:<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; private static bool StateMaxLength(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; DocumentContact target,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; RuleArgs e<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; bool result;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if ( target.contactType == DocumentContactType.BillTo ) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; result = CommonRules.StringMaxLength(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; target,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; new CommonRules.MaxLengthRuleArgs(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "State",<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; )<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; );<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; else {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; result = true;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return result;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br><br>So the problem is that I'm creating new rule arguments and so the one passed in is never changed.&nbsp; Opps.<br></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
