<html><header><title>Role, how do I avoid typos?</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Role, how do I avoid typos?</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/257.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>TEK posted on Friday, June 02, 2006</h2><P>Hello</P>
<P>I'm wondering if I'm missing out on something very obvious, or if I'm the only one looking at this as a issue.<BR>The issue I'm talking about is the the handling of roles as strings.</P>
<P><STRONG>The question is:</STRONG><BR>How do you handle roles in code, do you actually write stuff like this:<BR>AuthorizationRules.AllowRead("Manager")<BR>or do you have something to help you, like this<BR>AuthorizationRules.AllowRead(Roles.Manager.ToString())</P>
<P><STRONG>Some more example and background:</STRONG></P>
<P>In my point of view, a role is typicall used as a bridge between what is presented to the user, to select between, and hardcoded checks peformed in the application code.<BR>(in this case I'm not considering dynamic configuration between autorization rules and roles)</P>
<P>If I have 8 different classes, with 5 properties each, and I want to activate access to these properties based on 3 different rules. That should be something like 8 classes * 5 properties * 4 access types = 160 authorization rules.</P>
<P>I would bet that somewhere in&nbsp;the 160 methods you would find something like this:<BR>AuthorizationRules.AllowRead("Man<STRONG>ga</STRONG>er")</P>
<P>How to know the roles that the system is expected to know about is another part of the same.<BR>Again, simple in a small system, but when you get a large system this have to be important issues, or?</P>
<P>Best regards, TEK<FONT size=2></P></FONT></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Friday, June 02, 2006</h2>Either load the values from a table (which is a topic being discussed in another thread at the moment), or use resources.<br><br>AuthorizationRules.AllowRead(My.Resources.ManagerRoleManager)<br><br>AuthorizationRules.AllowRead(Resources.RoleManager);<br><br>For many apps I think a data-driven approach is overkill, but the resource approach is a great answer. Let VS 2005 do the work for you <img src="/emoticons/emotion-1.gif" alt="Smile [:)]" /><br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>TEK replied on Friday, June 02, 2006</h2><P>The one beeing so lucky to have the solution ported to VS 2005 :-(</P>
<P>Thanks for the answare, it's absolutly a way to go.</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JCardina replied on Wednesday, January 26, 2011</h2><p>Are roles in resources still the way to go with csla 4.x to avoid typos?</p>
<p>If there was one area I wish some love would be devoted to it&#39;s the roles system which is quite primitive for any substantial application.&nbsp; </p>
<p>After having published and maintained a large csla 1.x based app for many years now and reading all the latest info to migrate to csla 4.x I&#39;m seeing so many improvements that dovetail with my real world experience, unfortunately roles are a glaring standout of lack of any real modernization or jive with real world requirements for a large complex application.</p>
<p>I realize the coupling with the way .net does security guiding the string role checking; it&#39;s just typing manual strings over and over thousands of times which screams out for improvement.&nbsp; Not to mention the issues with having to actually release a new version of our software to add a new role and manually, laboriously adding it to all the business objects (hundreds each with dozens of properties).</p>
<p> It should not even be used in the sample projects, it could give less experienced programmers the crazy idea that they should actually do it that way. ;)</p>
<p>That being said we&#39;re going to find a way to work with it because we want to use the stock CSLA this time around since most of the modifications we made over the years are now baked in, just consider it Rocky.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Wednesday, January 26, 2011</h2><p>The role concept comes from .NET and Windows, so it isn&#39;t something I can unilaterally change - at least not without entirely discarding every aspect of .NET and Windows athorization.</p>
<p>However, CSLA 4 has a completely open model for authorization rules. While the rule implementations provided in CommonRules are based on roles so they work with .NET/Windows, you can implement your own authorization rule types that use any scheme or model you come up with.</p>
<p>The concept that&#39;s been floating around for a few years now, and is implemented in&nbsp;WCF (as an option) is <em>claims-based authorization</em>. One of the primary reasons CSLA 4 has this completely open authz model is so people can implement claims-based rules.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JCardina replied on Wednesday, January 26, 2011</h2><p>I understand that and it&#39;s nice to have an open system.</p>
<p>My main concern with it is in line with the original topic of this post which is avoiding typos.&nbsp; I&#39;ll look into using resources as you suggested years ago.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Wednesday, January 26, 2011</h2><p>What I&#39;m saying is that neither you nor I can change how Microsoft implements the role concept in Windows or .NET. And that implementation is string-based.</p>
<p>If you want to avoid strings, you should avoid roles. To avoid roles you need to invent some other system. The CSLA 4 authz rules system allows you to invent other systems in a way that wasn&#39;t possible before CSLA 4.</p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
