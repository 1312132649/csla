<html><header><title>Dataportal with compression</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Dataportal with compression</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/2653.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>xal posted on Tuesday, April 03, 2007</h2>Hey all!<br>I started a new blog over <a href="http://www.softwarethinking.com/blogs/xal">here</a> and to warm things up I wrote a small article about compression in the dataportal. I hope it's of some use...<br><br>Have fun!<br><br>Andrés<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Vaidal replied on Monday, April 09, 2007</h2><P>Ohhh Great!!!</P>
<P>Can you write here some test results showing the benefits?</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>xal replied on Monday, April 09, 2007</h2>I haven't found the time to do any thorough testing, but I can tell you that I loaded a huge collection around 1.3 MB when serialized without compression, and the result was ~350KB. That makes a hell of a difference when working over the internet or slow networks, so the processing overhead is insignificant compared to the time you save when transfering the actual data...<br><br>There is a better way of doing this, which involves writing a custom sink for remoting. That wouldn't involve creating a custom dataportal, because you could use the sink with the existing one. I'll try to look at that in the future, for now, it was easier to play in csla land since I'm familiarized with the way it works, not so much with remoting. A custom sink may be even better performing, but I'll have to try and see at some point.<br><br>Andrés<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>askywalker replied on Tuesday, April 10, 2007</h2><P>Nice blog article-&nbsp;looking forward to taking a closer look ... just need to find a round tuit...</P>
<P>My app does occasional 'large' collections where I know that compression would help - but the vast majority of transfers are small.&nbsp; I don't know anything about a 'custom sink'... I have been considering genuine channels - do you know of it?&nbsp; I searched the CSLA forums unsucesfully - surprising since it seems to be a popular product and sounds like it could help.&nbsp; Compression and encryption both worry me - I really don't have much of a clue what is going on with the remoting/dataportal layers...</P>
<P>&nbsp;</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>xal replied on Wednesday, April 11, 2007</h2>I'm currently working on an improved version based on Rocky's comments, should be out today or tomorrow.<br>I haven't heard of genuine channels, but for now, I want to keep it simple. Besides, from what I see in their web page it's not a free product, so I don't think I'll delve into it or even if I do, release something based on that.<br><br>The intention is to have a simple way to use a compressed portal without needing to install / buy anything.<br>The compression algorithm for bzip2 is awesome, and it serves it's purpose, so for now that will be my main focus...<br><br>Andrés<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>xal replied on Monday, April 23, 2007</h2>I finally got around to post the followup. Sorry for the delays.<br>You can read about the new version <a href="http://www.softwarethinking.com/blogs/xal/archive/2007/04/23/3.aspx">here</a>.<br><br><br>Andrés<br><br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Cslah replied on Sunday, June 03, 2007</h2><P>I'm looking into&nbsp;switching this over to .NET 2.0 compression built into the&nbsp;System.IO.Compression namespace to keep things simple (less code to download/compile/keep track of). It seems thte compression namespace will compress the streams just fine, only changes one line of code in each method. Has anyone dabbled with this?</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Cslah replied on Sunday, June 03, 2007</h2><P>OK, I've converted this to .NET Compression and it works great. To do this is a few simple changes:<BR><BR>Compression.vb:<BR>Remove the Imports to the open source compression library<BR>Line 10:<BR><FONT face="Courier New"><FONT size=2><FONT color=#0000ff>Dim</FONT> compressedStream <FONT color=#0000ff>As</FONT> <FONT color=#0000ff>New</FONT> System.IO.Compression.GZipStream(ms3, IO.Compression.CompressionMode.Compress)<BR></FONT></FONT>Line 18<BR><FONT size=2><FONT face="Courier New"><FONT color=#0000ff>Dim</FONT> decompressedStream <FONT color=#0000ff>As</FONT> <FONT color=#0000ff>New</FONT> System.IO.Compression.GZipStream(ms4, IO.Compression.CompressionMode.Decompress)</FONT></FONT><FONT size=1></P>
<P></FONT>Thanks Andrés for doing this, it's totally awesome!! We're going to use this instead of the normal portal.<BR><BR>Rocky, would you be willing to put this namespace/code into the next Csla version? I'll convert it to C#&nbsp;&amp; send the code to you if so..<BR><BR>Brian<BR></P></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
