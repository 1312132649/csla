<html><header><title>How to force a method to run on the data portal?</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>How to force a method to run on the data portal?</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/9913.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>drewburlingame posted on Tuesday, January 04, 2011</h2><p>I have a non-crud method that needs to always run on the data portal. &nbsp;How do I force the method to always run on the data portal?</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JonStonecash replied on Tuesday, January 04, 2011</h2><p>Not sure if this answers your question, but there is a command object in Csla that is normally used to execute queries that do not return Csla objects.&nbsp; Look at the Exists object in Project Tracker.&nbsp; This can be used to execute any logic, not just database related.</p>
<p>Jon Stonecash</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>drewburlingame replied on Tuesday, January 04, 2011</h2><p>Jon,</p>
<p>&nbsp;</p>
<p>With this approach, will I use DataPortal.Execute to pass the command? &nbsp;If yes, how would I return values from the command back to the client?</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>chrisghardwick replied on Tuesday, January 04, 2011</h2><p>What version of Csla are you using?</p>
<p>In your class, you can use the&nbsp;DataPortal_OnDataPortalInvoke and&nbsp;Child_OnDataPortalInvoke and add a method call. This will execute the method every time as part of the dataportal operation.</p>
<p>If you have an&nbsp;inhered&nbsp;framework, just add the necessary overrides there, if not, then you can add it directly to your business objects.</p>
<p>Chris</p>
<p>&nbsp;</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>drewburlingame replied on Tuesday, January 04, 2011</h2><p>Chris,</p>
<p>Thanks for the response. &nbsp;I&#39;m not looking to fire a method everytime a DataPortal call is invoked, but rather to execute a specific method only on the DataPortal. &nbsp;Something like:</p>
<p> DataPortal.Execute(()=&gt;this.SomeNonCRUDMethod());</p></div><div style='padding:0 15 3 15;background-color:lightgreen'><h2>RockfordLhotka replied on Tuesday, January 04, 2011</h2><p>This is exactly what the command object stereotype is designed to handle, but in an object oriented manner rather than a procedural&nbsp;manner.</p>
<p>The <em>Using CSLA 4: Creating Business Objects</em> ebook covers all the stereotypes, as does the older <em>Expert 2008 Business Objects</em> book. The Exists command implementations in ProjectTracker demonstrate the concept, though with the DataPortal_Execute method doing some data access - but it is a pretty minor thing to consider that the method would just perform server-side algorithmic processing instead.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>drewburlingame replied on Tuesday, January 04, 2011</h2><p>Are objects in the command object serialized back to the client? &nbsp;For example, if I was calling a sproc with out params, how would I return those values back to the client. &nbsp;Is it as simple as updating the values in the command object?</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Tuesday, January 04, 2011</h2><p>The FAQ has a topic on the Unit of Work concept, which is what you are looking for</p>
<p><a href="http://www.lhotka.net/cslanet/faq/CslaObjectFaq.ashx">http://www.lhotka.net/cslanet/faq/CslaObjectFaq.ashx</a></p>
<p>&nbsp;</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>chrisghardwick replied on Tuesday, January 04, 2011</h2><p>Ah, gotcha. The Command object will work well for you. Have you tried it yet? From what your describing it fits the need.</p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
