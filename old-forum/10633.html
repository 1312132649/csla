<html><header><title>SimpleApp (WP7) Problem: NotSupportedException thrown at BeginSave</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>SimpleApp (WP7) Problem: NotSupportedException thrown at BeginSave</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/10633.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>bill.mybiz posted on Wednesday, August 24, 2011</h2><p>Howdy There!</p>
<p>I&#39;m a CSLA newbie/hobbyist programmer and I&#39;m having a slight difficulty! (Go figure! <img src="http://forums.lhotka.net/emoticons/emotion-11.gif" alt="Cool" />)</p>
<p>I&#39;m having a problem with getting the windows phone version of SimpleApp to run properly. When I debug the solution, it compiles and deploys to the Windows Phone emulator fine.&nbsp; I type any string in the name textbox (&quot;butters&quot; e.g.) and then choose save.&nbsp; This then throws a NotSupportedException (message: &quot;Invalid operation - insert not allowed&quot;) at CustomerEdit.BeginSave(forceUpdate,handler,userState). The full exception message is appended to this post.</p>
<p>Here is some possibly useful information:</p>
<ul>
<li>I am using Visual Studio 2010 Express for Windows Phone, without a full 
version of Visual Studio (professional or higher) installed.</li>
<li>
<p>The specific sample is located in the &quot;CslaSamples-4.1.0-110118&quot; download, &quot;\Samples\WindowsPhone\cs\SimpleApp&quot;.</p>
</li>
<li>
<p>I&#39;m learning CSLA on a budget - I&#39;ve read the overview cover-to-cover.&nbsp; Hopefully will get the Business Objects soon(!!)</p>
</li>
<li>Other Silverlight SimpleApp does compile and run fine.</li>
<li>Express Edition restricts me from running some of the other samples, but I&#39;ve looked through as much as I can (and am continuing to do so).</li>
<li>I&#39;ve redownloaded the sample, as well as tried the 4.2.0 version with the same result.</li>
<li>I&#39;m using Windows 7 Home Premium (64-bit)</li>
<li>I&#39;m trying to use this wp7 SimpleApp to learn from, but I just can&#39;t 
seem to figure out why it won&#39;t work.&nbsp; In the CustomerEdit class&#39;s Data 
Access region, there is a compiler condition #if !SILVERLIGHT, but there
 is no code inside the Data Access region that does pertain to 
SILVERLIGHT.&nbsp; Inside this !SILVERLIGHT block, there is a 
DataPortal_Insert method(), but there is no corresponding async version 
anywhere in the class...Is this right?&nbsp; </li>
</ul>
<p>Thanks in advance for any help anyone can provide!! I apologize if it&#39;s an obvious answer!&nbsp; I&#39;ve looked extensively through this forum and on google and I just can&#39;t find anyone else that has this problem, so I figure it must be my newbness.&nbsp; <img src="http://forums.lhotka.net/emoticons/emotion-4.gif" alt="Stick out tongue" /></p>
<p>-Bill</p>
<p>Full Exception: ------------------</p>
<p><blockquote style="overflow-x: scroll;"><pre style="margin: 0px;"></p>
<p>System.NotSupportedException was unhandled<br />&nbsp; Message=Invalid operation - insert not allowed<br />&nbsp; StackTrace:<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at Csla.BusinessBase`1.DataPortal_Insert(CompletedHandler handler)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at System.Reflection.RuntimeMethodInfo.InternalInvoke(RuntimeMethodInfo rtmi, Object obj, BindingFlags invokeAttr, Binder binder, Object parameters, CultureInfo culture, Boolean isBinderDefault, Assembly caller, Boolean verifyAccess, StackCrawlMark&amp; stackMark)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at System.Reflection.RuntimeMethodInfo.InternalInvoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture, StackCrawlMark&amp; stackMark)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at System.Reflection.MethodBase.Invoke(Object obj, Object[] parameters)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at Csla.Reflection.MethodCaller.CallMethod(Object obj, MethodInfo info, Object[] parameters)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at Csla.Reflection.MethodCaller.CallMethod(Object obj, String method, Object[] parameters)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at Csla.DataPortalClient.LocalProxy`1.BeginUpdate(Object obj, Object userState)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at Csla.DataPortal`1.BeginUpdate(Object obj, Object userState)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at Csla.DataPortal.BeginUpdate[T](Object obj, EventHandler`1 callback, Object userState)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at Csla.DataPortal.BeginUpdate[T](Object obj, EventHandler`1 callback)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at Csla.BusinessBase`1.BeginSave(Boolean forceUpdate, EventHandler`1 handler, Object userState)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at Library.CustomerEdit.BeginSave(Boolean forceUpdate, EventHandler`1 handler, Object userState)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at Csla.BusinessBase`1.BeginSave()<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at Csla.BusinessBase`1.Csla.Core.ISavable.BeginSave()<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at Csla.Xaml.ViewModelBase`1.BeginSave()<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at Csla.Xaml.ViewModel`1.Save(Object sender, ExecuteEventArgs e)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at System.Reflection.RuntimeMethodInfo.InternalInvoke(RuntimeMethodInfo rtmi, Object obj, BindingFlags invokeAttr, Binder binder, Object parameters, CultureInfo culture, Boolean isBinderDefault, Assembly caller, Boolean verifyAccess, StackCrawlMark&amp; stackMark)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at System.Reflection.RuntimeMethodInfo.InternalInvoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture, StackCrawlMark&amp; stackMark)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at System.Reflection.MethodBase.Invoke(Object obj, Object[] parameters)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at Csla.Xaml.TriggerAction.CallMethod(Object sender, EventArgs e)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at System.Windows.Controls.Primitives.ButtonBase.OnClick()<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at System.Windows.Controls.Button.OnClick()<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at System.Windows.Controls.Primitives.ButtonBase.OnMouseLeftButtonUp(MouseButtonEventArgs e)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at System.Windows.Controls.Control.OnMouseLeftButtonUp(Control ctrl, EventArgs e)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at MS.Internal.JoltHelper.FireEvent(IntPtr unmanagedObj, IntPtr unmanagedObjArgs, Int32 argsTypeIndex, String eventName)<br /></p>
<p></pre></blockquote></p></div><div style='padding:0 15 3 15;background-color:lightgreen'><h2>bill.mybiz replied on Thursday, August 25, 2011</h2><p>Well, I added the following code to the area beneath the !SILVERLIGHT directive in CustomerEdit.cs:</p>
<p><blockquote style="overflow-x: scroll;"><pre style="margin: 0px;"></p>
<p>#region Data Access<br /><br />#if !SILVERLIGHT</p>
<p>...</p>
<p>#endif</p>
<p>public override void&nbsp; DataPortal_Insert(LocalProxy&lt;CustomerEdit&gt;.CompletedHandler handler)<br />&nbsp;&nbsp;&nbsp; {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; try<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; System.Threading.Thread.Sleep(1500);<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; using (BypassPropertyChecks)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Id = 987;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Status = &quot;Inserted &quot; + ApplicationContext.ExecutionLocation.ToString();<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; handler(this, null);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; catch (Exception ex)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; handler(null, ex);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br />&nbsp;&nbsp;&nbsp; }</p>
<p>#endregion //DataAccess</p>
<p></pre></blockquote></p>
<p>That seemed to do the trick.&nbsp; I was thinking there was some other problem with my environment that I just wasn&#39;t seeing but I think maybe the sample just isn&#39;t complete?&nbsp; Any thoughts would be welcome!</p></div><div style='padding:0 15 3 15;background-color:lightgreen'><h2>RockfordLhotka replied on Thursday, August 25, 2011</h2><p>I think this is a bug in the sample, yes. I&#39;m glad you found the answer.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>bill.mybiz replied on Thursday, August 25, 2011</h2><p>I&#39;m glad too!!!!&nbsp; I&#39;m loving CSLA so far!&nbsp; Thanks for the superior product sir.</p>
<p>-Bill</p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
