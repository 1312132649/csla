<html><header><title>How to send a criteria to a DataPortal.insert</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>How to send a criteria to a DataPortal.insert</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/8455.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>lastalaica posted on Tuesday, February 02, 2010</h2>Hi, <br /><br />I've been using CSLA for a month now and I've been wondering if a dataportal with 2 argument exist...<br /><br />I searched trough google but didn't see anything.<br /><br />Does someone have an answer?<br />Thanks</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>rxelizondo replied on Tuesday, February 02, 2010</h2><br />What DataPortals do you speak off? Root object DataPortal calls such as DataPortal.Create, DataPortal.Fetch etc? If so the general pattern is to create a criteria object and on that criteria you can put as many parameters as you want. A good example of multy parameter criteria is the CSLA Csla.Security.UsernameCriteria object.<br /><br />Child DataPortal calls such as DataPortal.CreateChild, DataPortal.FetchChild, should allow you to pass multiple parameters by desing. All you need to make sure is that your Child_Create, Child_Fetch etc methods match the parameters you are sending on the DataPortal calls.<br /><br />HTH</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>lastalaica replied on Wednesday, February 03, 2010</h2>Yes, my object is a root one.<br /><br />I created an criteria object like you mentionned and now it seems to works<br /><br />I will post again if I have some trouble<br /><br />Thanks rxelizondo<br /></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>lastalaica replied on Wednesday, February 03, 2010</h2>I have this error when I try to build my solution :<br /><br />ProjectName.ClassName.DataPortal_Insert(Csla.Security.CustomCriteria)': no suitable method found to override<br /><br /><br />I know what it means but when I try to run my program when the override is not there, it throw this exception :<br /><br /><br /><br />System.NotSupportedException: Invalid operation - insert not allowed</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Wednesday, February 03, 2010</h2>Your DataPortal_Insert shouldn't require any criteria objects.&nbsp; All the information needed should be stored in the BO via private fields or managed fields.</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>lastalaica replied on Wednesday, February 03, 2010</h2>I know but I don't really have choice, the criteria I send contain the "secured channel" of my application (it's a wcf service) and when I need to execute a stored procedure, I need to send the "secured channel" ...

I must configure my channel only one time in my application so when I want to do an (insert, update, delete...) I need to send the channel.

Must I really create a property in each of my object to contain the channel? I don't really like it, but if I don't have any choice...</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Wednesday, February 03, 2010</h2><P>If it's something you'd need in each instance, you should probably store it in the ApplicationContext.</P>
<P>Use GlobalContext if the value should flow from client to server, and server to client every call.&nbsp; </P>
<P>Use ClientContext if the value should be on the client and sent to the server (but not back).&nbsp; </P>
<P>Use LocalContext if the value should stay at whatever location its at (if used on the client, the value is only available on the client.&nbsp; If on the server, then only on the server).</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>lastalaica replied on Wednesday, February 03, 2010</h2>I don't really see the use of an applicationContext...

the channel that I pass trough all my method is what I use to call my method on the server side, I don't need to send the channel to my server</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Wednesday, February 03, 2010</h2>What exactly is it that you're trying to do?&nbsp; It sounds like you have some information on the client that the server needs to know to execute a wcf call on the server, and this information is required anytime you're doing&nbsp;a data portal call. </div><div style='padding:0 15 3 15;background-color:powderblue'><h2>lastalaica replied on Wednesday, February 03, 2010</h2>At the beginning of my application, I configure my windows service (client) to be able to communicate with my wcf service.<br />I'm using a proxy to call the method of the wcf service from the client.<br />Each time I want to execute one of my stored procedure, I need to do proxy.executeSP(arg1, arg2...)<br /><br />but my proxy is instanciate in the main class of my windows service, so when I need to do an insert (or an update,delete...) I need to send the proxy.<br /><br />If you need anything else, just ask for it<br />Thanks </div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Thursday, February 04, 2010</h2><P>It sounds like you are not using the data portal to communicate between the client and server? You are using your own proxy?</P>
<P>So you are using the data portal in local mode (client-only), and your DataPortal_XZY methods are making direct WCF service calls using your own WCF proxy right?</P>
<P>If this is the case, and you need that proxy to be globally available to all your DataPortal_XYZ methods, then you should use one of several valid techniques to expose this as a global value. These techniques include:</P>
<OL>
<LI>Make the proxy a singleton object</LI>
<LI>Use Csla.ApplicationContext.LocalContext to store a reference to the proxy</LI>
<LI>Use an IoC container (though you'd still implement the proxy as a singleton)</LI></OL>
<P>There are many other accepted techniques for creating a global value - see the legendary <EM>Design Patterns </EM>book (Gamma, et al) for ideas.</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>lastalaica replied on Friday, February 05, 2010</h2>thanks Rockford,

the problem is solved now</div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
