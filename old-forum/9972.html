<html><header><title>Exception Type: Csla.DataPortalException (Timed out)</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Exception Type: Csla.DataPortalException (Timed out)</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/9972.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>thamer posted on Saturday, January 22, 2011</h2><p>Hi all, We are getting this error a lot and we are lost between application vender &amp; Network team, i&#39;m dying to know the root cause for this issue. can somebody assit me how to trubleshoot this issue. Pls. Pls. Pls. Pls.Pls.<img src="http://forums.lhotka.net/emoticons/emotion-9.gif" alt="Crying" /> Exception Information Details: ====================================== Exception Type: Csla.DataPortalException BusinessObject: 0 BusinessException: System.Net.WebException: The request was aborted: The operation has timed out. at System.Web.Services.Protocols.WebClientProtocol.GetWebResponse(WebRequest request) at System.Web.Services.Protocols.HttpWebClientProtocol.GetWebResponse(WebRequest request) at System.Web.Services.Protocols.SoapHttpClientProtocol.Invoke(String methodName, Object[] parameters) at company.CMM.ClientWebProxy.CMMService.GetItemList(ItemDataListFilter Request) at company.Buy.ItemList.Fetch(ItemWebFilter criteria) at company.Buy.ItemList.DataPortal_Fetch(ItemWebFilter criteria) Message: DataPortal.Fetch failed (Csla.DataPortalException: DataPortal.Fetch failed (System.Net.WebException: The request was aborted: The operation has timed out. at System.Web.Services.Protocols.WebClientProtocol.GetWebResponse(WebRequest request) at System.Web.Services.Protocols.HttpWebClientProtocol.GetWebResponse(WebRequest request) at System.Web.Services.Protocols.SoapHttpClientProtocol.Invoke(String methodName, Object[] parameters) at company.CMM.ClientWebProxy.CMMService.GetItemList(ItemDataListFilter Request) at company.Buy.ItemList.Fetch(ItemWebFilter criteria) at company.Buy.ItemList.DataPortal_Fetch(ItemWebFilter criteria)) ---&gt; Csla.Server.CallMethodException: DataPortal_Fetch method call failed ---&gt; System.Net.WebException: The request was aborted: The operation has timed out. at System.Web.Services.Protocols.WebClientProtocol.GetWebResponse(WebRequest request) at System.Web.Services.Protocols.HttpWebClientProtocol.GetWebResponse(WebRequest request) at System.Web.Services.Protocols.SoapHttpClientProtocol.Invoke(String methodName, Object[] parameters) at company.CMM.ClientWebProxy.CMMService.GetItemList(ItemDataListFilter Request) at company.Buy.ItemList.Fetch(ItemWebFilter criteria) at company.Buy.ItemList.DataPortal_Fetch(ItemWebFilter criteria) --- End of inner exception stack trace --- at System.Web.Services.Protocols.WebClientProtocol.GetWebResponse(WebRequest request) at System.Web.Services.Protocols.HttpWebClientProtocol.GetWebResponse(WebRequest request) at System.Web.Services.Protocols.SoapHttpClientProtocol.Invoke(String methodName, Object[] parameters) at company.CMM.ClientWebProxy.CMMService.GetItemList(ItemDataListFilter Request) at company.Buy.ItemList.Fetch(ItemWebFilter criteria) at company.Buy.ItemList.DataPortal_Fetch(ItemWebFilter criteria) at Csla.MethodCaller.CallMethod(Object obj, MethodInfo info, Object[] parameters) at Csla.Server.SimpleDataPortal.Fetch(Type objectType, Object criteria, DataPortalContext context) --- End of inner exception stack trace --- at System.Web.Services.Protocols.WebClientProtocol.GetWebResponse(WebRequest request) at System.Web.Services.Protocols.HttpWebClientProtocol.GetWebResponse(WebRequest request) at System.Web.Services.Protocols.SoapHttpClientProtocol.Invoke(String methodName, Object[] parameters) at company.CMM.ClientWebProxy.CMMService.GetItemList(ItemDataListFilter Request) at company.Buy.ItemList.Fetch(ItemWebFilter criteria) at company.Buy.ItemList.DataPortal_Fetch(ItemWebFilter criteria) at Csla.MethodCaller.CallMethod(Object obj, MethodInfo info, Object[] parameters) at Csla.Server.SimpleDataPortal.Fetch(Type objectType, Object criteria, DataPortalContext context) at Csla.DataPortal.Fetch(Type objectType, Object criteria) at Csla.DataPortal.Fetch[T](Object criteria) at company.Buy.ItemList.GetItemList(ItemWebFilter webSearchCriteria) at company.Buy.ItemInfo.DataPortal_Fetch(Criteria criteria)) Data: System.Collections.ListDictionaryInternal TargetSite: System.Object Fetch(System.Type, System.Object) HelpLink: NULL Source: Csla StackTrace Information Details: ====================================== at System.Web.Services.Protocols.WebClientProtocol.GetWebResponse(WebRequest request) at System.Web.Services.Protocols.HttpWebClientProtocol.GetWebResponse(WebRequest request) at System.Web.Services.Protocols.SoapHttpClientProtocol.Invoke(String methodName, Object[] parameters) at company.CMM.ClientWebProxy.CMMService.GetItemList(ItemDataListFilter Request) at company.Buy.ItemList.Fetch(ItemWebFilter criteria) at company.Buy.ItemList.DataPortal_Fetch(ItemWebFilter criteria) at Csla.MethodCaller.CallMethod(Object obj, MethodInfo info, Object[] parameters) at Csla.Server.SimpleDataPortal.Fetch(Type objectType, Object criteria, DataPortalContext context) at Csla.DataPortal.Fetch(Type objectType, Object criteria) at Csla.DataPortal.Fetch[T](Object criteria) at company.Buy.ItemList.GetItemList(ItemWebFilter webSearchCriteria) at company.Buy.ItemInfo.DataPortal_Fetch(Criteria criteria) at Csla.MethodCaller.CallMethod(Object obj, MethodInfo info, Object[] parameters) at Csla.Server.SimpleDataPortal.Fetch(Type objectType, Object criteria, DataPortalContext context) at Csla.DataPortal.Fetch(Type objectType, Object criteria) at Csla.DataPortal.Fetch[T](Object criteria) at company.Buy.ItemInfo.GetItemInfo(String SymbolCode, Int32 ExchangeCode) at EN_Secure_Trade_Default.ItemInfoDataSource_SelectObject(Object sender, SelectObjectArgs e) at Csla.Web.CslaDataSource.OnSelectObject(SelectObjectArgs e) at Csla.Web.CslaDataSourceView.ExecuteSelect(DataSourceSelectArguments arguments) at System.Web.UI.DataSourceView.Select(DataSourceSelectArguments arguments, DataSourceViewSelectCallback callback) at System.Web.UI.WebControls.DataBoundControl.PerformSelect() at System.Web.UI.WebControls.BaseDataBoundControl.DataBind() at System.Web.UI.WebControls.FormView.DataBind() at EN_Secure_Trade_Default.cmbSecurityList_SelectedIndexChanged(Object sender, EventArgs e) at ComponentArt.Web.UI.ComboBox.SelectedIndexChangedEventHandler.Invoke(Object sender, EventArgs e) at ComponentArt.Web.UI.ComboBox.OnSelectedIndexChanged(EventArgs e) at ComponentArt.Web.UI.ComboBox.OnLoad(EventArgs e) at System.Web.UI.Control.LoadRecursive() at System.Web.UI.Control.LoadRecursive() at System.Web.UI.Control.LoadRecursive() at System.Web.UI.Control.LoadRecursive() at System.Web.UI.Control.LoadRecursive() at System.Web.UI.Control.LoadRecursive() at System.Web.UI.Control.LoadRecursive() at System.Web.UI.Control.LoadRecursive() at System.Web.UI.Control.LoadRecursive() at System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) Exception Information Details: ====================================== Exception Type: Csla.Server.CallMethodException Message: DataPortal_Fetch method call failed Data: System.Collections.ListDictionaryInternal TargetSite: System.Object CallMethod(System.Object, System.Reflection.MethodInfo, System.Object[]) HelpLink: NULL Source: Csla StackTrace Information Details: ====================================== at System.Web.Services.Protocols.WebClientProtocol.GetWebResponse(WebRequest request) at System.Web.Services.Protocols.HttpWebClientProtocol.GetWebResponse(WebRequest request) at System.Web.Services.Protocols.SoapHttpClientProtocol.Invoke(String methodName, Object[] parameters) at company.CMM.ClientWebProxy.CMMService.GetItemList(ItemDataListFilter Request) at company.Buy.ItemList.Fetch(ItemWebFilter criteria) at company.Buy.ItemList.DataPortal_Fetch(ItemWebFilter criteria) at Csla.MethodCaller.CallMethod(Object obj, MethodInfo info, Object[] parameters) at Csla.Server.SimpleDataPortal.Fetch(Type objectType, Object criteria, DataPortalContext context) at Csla.DataPortal.Fetch(Type objectType, Object criteria) at Csla.DataPortal.Fetch[T](Object criteria) at company.Buy.ItemList.GetItemList(ItemWebFilter webSearchCriteria) at company.Buy.ItemInfo.DataPortal_Fetch(Criteria criteria) at Csla.MethodCaller.CallMethod(Object obj, MethodInfo info, Object[] parameters) at Csla.Server.SimpleDataPortal.Fetch(Type objectType, Object criteria, DataPortalContext context) Exception Information Details: ====================================== Exception Type: Csla.DataPortalException BusinessObject: company.Buy.ItemList BusinessException: System.Net.WebException: The request was aborted: The operation has timed out. at System.Web.Services.Protocols.WebClientProtocol.GetWebResponse(WebRequest request) at System.Web.Services.Protocols.HttpWebClientProtocol.GetWebResponse(WebRequest request) at System.Web.Services.Protocols.SoapHttpClientProtocol.Invoke(String methodName, Object[] parameters) at company.CMM.ClientWebProxy.CMMService.GetItemList(ItemDataListFilter Request) at company.Buy.ItemList.Fetch(ItemWebFilter criteria) at company.Buy.ItemList.DataPortal_Fetch(ItemWebFilter criteria) Message: DataPortal.Fetch failed (System.Net.WebException: The request was aborted: The operation has timed out. at System.Web.Services.Protocols.WebClientProtocol.GetWebResponse(WebRequest request) at System.Web.Services.Protocols.HttpWebClientProtocol.GetWebResponse(WebRequest request) at System.Web.Services.Protocols.SoapHttpClientProtocol.Invoke(String methodName, Object[] parameters) at company.CMM.ClientWebProxy.CMMService.GetItemList(ItemDataListFilter Request) at company.Buy.ItemList.Fetch(ItemWebFilter criteria) at company.Buy.ItemList.DataPortal_Fetch(ItemWebFilter criteria)) Data: System.Collections.ListDictionaryInternal TargetSite: System.Object Fetch(System.Type, System.Object) HelpLink: NULL Source: Csla StackTrace Information Details: ====================================== at System.Web.Services.Protocols.WebClientProtocol.GetWebResponse(WebRequest request) at System.Web.Services.Protocols.HttpWebClientProtocol.GetWebResponse(WebRequest request) at System.Web.Services.Protocols.SoapHttpClientProtocol.Invoke(String methodName, Object[] parameters) at company.CMM.ClientWebProxy.CMMService.GetItemList(ItemDataListFilter Request) at company.Buy.ItemList.Fetch(ItemWebFilter criteria) at company.Buy.ItemList.DataPortal_Fetch(ItemWebFilter criteria) at Csla.MethodCaller.CallMethod(Object obj, MethodInfo info, Object[] parameters) at Csla.Server.SimpleDataPortal.Fetch(Type objectType, Object criteria, DataPortalContext context) at Csla.DataPortal.Fetch(Type objectType, Object criteria) at Csla.DataPortal.Fetch[T](Object criteria) at company.Buy.ItemList.GetItemList(ItemWebFilter webSearchCriteria) at company.Buy.ItemInfo.DataPortal_Fetch(Criteria criteria) Exception Information Details: ====================================== Exception Type: Csla.Server.CallMethodException Message: DataPortal_Fetch method call failed Data: System.Collections.ListDictionaryInternal TargetSite: System.Object CallMethod(System.Object, System.Reflection.MethodInfo, System.Object[]) HelpLink: NULL Source: Csla StackTrace Information Details: ====================================== at System.Web.Services.Protocols.WebClientProtocol.GetWebResponse(WebRequest request) at System.Web.Services.Protocols.HttpWebClientProtocol.GetWebResponse(WebRequest request) at System.Web.Services.Protocols.SoapHttpClientProtocol.Invoke(String methodName, Object[] parameters) at company.CMM.ClientWebProxy.CMMService.GetItemList(ItemDataListFilter Request) at company.Buy.ItemList.Fetch(ItemWebFilter criteria) at company.Buy.ItemList.DataPortal_Fetch(ItemWebFilter criteria) at Csla.MethodCaller.CallMethod(Object obj, MethodInfo info, Object[] parameters) at Csla.Server.SimpleDataPortal.Fetch(Type objectType, Object criteria, DataPortalContext context) Exception Information Details: ====================================== Exception Type: System.Net.WebException Status: Timeout Response: NULL Message: The request was aborted: The operation has timed out. Data: System.Collections.ListDictionaryInternal TargetSite: System.Net.WebResponse GetWebResponse(System.Net.WebRequest) HelpLink: NULL Source: System.Web.Services StackTrace Information Details: ====================================== at System.Web.Services.Protocols.WebClientProtocol.GetWebResponse(WebRequest request) at System.Web.Services.Protocols.HttpWebClientProtocol.GetWebResponse(WebRequest request) at System.Web.Services.Protocols.SoapHttpClientProtocol.Invoke(String methodName, Object[] parameters) at company.CMM.ClientWebProxy.CMMService.GetItemList(ItemDataListFilter Request) at company.Buy.ItemList.Fetch(ItemWebFilter criteria) at company.Buy.ItemList.DataPortal_Fetch(ItemWebFilter criteria) ==============================================================================</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JonnyBee replied on Saturday, January 22, 2011</h2><p>Hi, </p>
<p>Which CSLA version and protocol are you using? </p>
<p>One likely cause is a Non-serializable exception on the server side. This will case the server to fail (with http 500) to send a well defines message to client. </p>
<p>Another possible cause is misconfiguration/malfunction in load balancing or network card on server. I&#39;ve seen problems like this with dual network cards and misconfiguration in pairing of network cards..</p>
<p>I assume you have checked the IIS log to see if the IIS has logged any error codes (like http 500)?</p>
<p>&nbsp;</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>thamer replied on Sunday, January 23, 2011</h2><p><span style="font-family:&#39;Arial&#39;,&#39;sans-serif&#39;;color:black;font-size:9pt;">Thanks <strong><span style="font-family:&#39;Arial&#39;,&#39;sans-serif&#39;;font-weight:normal;">Jonny for your kind reply,</span></strong></span></p>
<p><strong><span style="font-family:&#39;Arial&#39;,&#39;sans-serif&#39;;color:black;font-size:9pt;font-weight:normal;">Protocol is 80 Http (web services). CSLA is 2.0</span></strong><span style="font-family:&#39;Arial&#39;,&#39;sans-serif&#39;;color:black;font-size:9pt;"></span></p>
<p><strong><span style="font-family:&#39;Arial&#39;,&#39;sans-serif&#39;;color:black;font-size:9pt;font-weight:normal;">We are having web Server &amp; Application&nbsp;server and we are seeing this error in the web server application log &amp; IIS log. But we not sure if the transaction hit the Application server or not, because in the application log of the application server nothing is there !</span></strong><span style="font-family:&#39;Arial&#39;,&#39;sans-serif&#39;;color:black;font-size:9pt;"></span></p>
<p><strong><span style="font-family:&#39;Arial&#39;,&#39;sans-serif&#39;;color:black;font-size:9pt;font-weight:normal;">And the same request are working fine in most of the cases, we see the timeout once in a while.</span></strong><span style="font-family:&#39;Arial&#39;,&#39;sans-serif&#39;;color:black;font-size:9pt;"></span></p>
<p><strong><span style="font-family:&#39;Arial&#39;,&#39;sans-serif&#39;;color:black;font-size:9pt;font-weight:normal;">In term of Network setup we have&nbsp;four servers (two web &amp; two application) and two Load Balancer, in the servers we enable Teaming for redundancy.&nbsp;i don&#39;t know if this will cause any issue&nbsp;or not ??&nbsp;</span></strong><span style="font-family:&#39;Arial&#39;,&#39;sans-serif&#39;;color:black;font-size:9pt;"></span></p>
<p><strong></strong></p></div><div style='padding:0 15 3 15;background-color:lightgreen'><h2>ajj3085 replied on Saturday, January 22, 2011</h2><p>My first guess is that the request is taking longer than the request timeout in IIS or the services configuration.&nbsp; I believe requests in IIS have a certain maxium time to complete, and if that time is reached the request is aborted.&nbsp; Check how long the server request is taking, and either optimze what&#39;s going on in the server side call, or increase the timeout.</p>
<p>Logging will help you ifgre out what&#39;s going on.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>thamer replied on Sunday, January 23, 2011</h2><p>Thanks Andy for your reply, </p>
<p>I have checked the execution time and the average is 1-2 secs.</p>
<p>we do logging and could not found the request in the logs and could not find the request in IIS logs too.</p>
<p>we found it IIS (both web &amp; application) &nbsp;the connection time out as 2 minutes and http keep alive is enabled.</p>
<p>&nbsp;</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Sunday, January 23, 2011</h2><p>Right, your average time is one to two seconds, but as you said this only happens intermittently.</p>
<p>I assume you&#39;re doing some database work, perhaps there&#39;s a deadlock which causes the request to take longer than two minutes.&nbsp; Maybe there&#39;s some networking issue causing connections to the database to take a long time.</p>
<p>Do you have any logging from your code?&nbsp; I know the IIS logs won&#39;t be very helpful, but your application should be logging to help diagnose this.</p>
<p>andy</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>thamer replied on Monday, January 24, 2011</h2><p>Thanks Andy for your reply, </p>
<p>Yes we do application logging in all levels meaning at request received , processed , information, warning &amp; exception etc.., </p>
<p>But the starnge thing is , we could not see the request even in our application logs. </p>
<p>we tried hard and could not found it in IIS log (of course based on url &amp; time stamp) also.</p>
<p>&nbsp;</p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
