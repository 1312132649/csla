<html><header><title>CSLA objects under F#</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>CSLA objects under F#</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/11731.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>emathias posted on Friday, November 30, 2012</h2><p>Has anyone had success creating CSLA objects from within F#?&nbsp; In particular I&#39;m having difficulty getting the object to correctly access the RegisterProperty in the base object.&nbsp; see code below (the indentations are correct in my code, it just doesn&#39;t format real well on this page.)</p>
<p>type CslaTestObj() = inherit ReadOnlyBase&lt;CslaTestObj&gt;()</p>
<p>&nbsp;&nbsp;&nbsp; static let IdProperty = ReadOnlyBase&lt;CslaTestObj&gt;.RegisterProperty(new PropertyInfo&lt;int&gt;(&quot;Id&quot;))</p>
<p>&nbsp;&nbsp;&nbsp; member m.Id with get() = m.ReadProperty(IdProperty) |&gt; unbox</p>
<p>This code results in a TypeInitializationException.&nbsp; It doesn&#39;t even find the RegisterProperty method even though intellisense says it&#39;s matched.&nbsp; I suspect it&#39;s not liking the way I&#39;m scoping the RegisterProperty with the base&lt;t&gt; but I can&#39;t find any other way to get it to compile.&nbsp; </p>
<p>If you have a working object, I would love to see it.&nbsp; Thanks!</p>
<p>&nbsp;</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>emathias replied on Saturday, December 01, 2012</h2><p>I&#39;ll answer my own question.&nbsp;You need to&nbsp;declare the IdProperty as a static member, not a static let.</p>
<p>static&nbsp;member IdProperty = ReadOnlyBase&lt;CslaTestObj&gt;.RegisterProperty(new PropertyInfo&lt;int&gt;(&quot;Id&quot;))</p>
<p>Now the problem I&#39;m having is that F# initializes statics as used instead of upon object creation.&nbsp; CSLA requires that the static be initialized upon creation, not afterwards if I&#39;m reading my error correctly.&nbsp;&nbsp; I can&#39;t seem to find a way to kick off static initialization manually such as a static constructor.</p>
<p>Any ideas?</p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
