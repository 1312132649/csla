<html><header><title>Singleton ReadonlyListBase</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Singleton ReadonlyListBase</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/3480.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 posted on Wednesday, September 05, 2007</h2>Hi all,<br><br>My users finally noticed; if they create a new company / department while having another window open when uses dropdowns for company and departments, the second window does NOT list the new company or department.&nbsp; They would like this addressed.<br><br>Currently, my CompanyList has a static property List, which is used to grab the list and put into the BindingSource.&nbsp; The actual list returned is cached, and when a Company is saved, the cache is flushed and reloaded on next request.<br><br>Obviously, the Bindingsource is using the 'old' cached copy.&nbsp; So I was thinking to create a true Singleton. Instead of throwing the old list out, and loading a new one up that I would shut off ListChanged events, clear the list, and re-populate it, then raise a ListChanged Reset.<br><br>Has anyone done this?&nbsp; What are the drawbacks?&nbsp; Will my quote window now lose the company / department that is already selected, or will things work correctly still because the business objects compare based on the primary key?<br><br>Thanks<br>Andy<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>mr_lasseter replied on Wednesday, September 05, 2007</h2>Why not have your ReadOnlyList listen to a static event thrown by your Editable object when the Editable Object is saved.&nbsp; Then in the ReadOnlyList you would either add\update its readonly counterpart.&nbsp; I have used this in my application and it works great.&nbsp; </div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Wednesday, September 05, 2007</h2>Hmm, interesting idea, I didn't know about static events.&nbsp; Does this cause any problems with garbage collection though?&nbsp; Or is the event handler static as well?<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>mr_lasseter replied on Wednesday, September 05, 2007</h2><P>The event handler is static as well.&nbsp; Check out Rocky's blog post.</P>
<P><A href="http://www.lhotka.net/weblog/IAmWorkingOnMyUsingCSLANET30EbookAndWroteSomeContentThatIDontThinkImGoingToUseInTheBook.aspx">http://www.lhotka.net/weblog/IAmWorkingOnMyUsingCSLANET30EbookAndWroteSomeContentThatIDontThinkImGoingToUseInTheBook.aspx</A></P>
<P>In my application, I actually use the Observer.dll that was part of ActiveObjects to do this, which works quite well.&nbsp; But Rocky's example&nbsp;looked much simpler.&nbsp; I have considered modifying my code, but I thought if it ain't broke don't touch it.&nbsp; </P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Thursday, September 06, 2007</h2>Thanks for the link, I'll check it out. <br><br>I agree with the 'not broke, don't fix' although I do tend to try and simplify code where I can.&nbsp; Unit tests can help make this a bit easier.<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Thursday, September 06, 2007</h2>I checked out the article, and the first comment discusses a memory leak, which Rocky acknowledges.<br><br>At any rate, both methods (the one I thought up, and your static event) wide up modifying an existing list, so I think I'll go ahead and go with my Singleton list (since that's what both methods end up with anyway).<br><br>Thanks<br>Andy<br></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
