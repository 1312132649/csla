<html><header><title>SetProperty&lt;P&gt;(PropertyInfo&lt;P&gt; propertyInfo, P newValue) does not use INotifyPropertyChanged?</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>SetProperty&lt;P&gt;(PropertyInfo&lt;P&gt; propertyInfo, P newValue) does not use INotifyPropertyChanged?</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/4951.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>Goblin posted on Monday, June 09, 2008</h2>I have a few issues with databinding when using CSLA's SetProperty function. <br>My business object looks a bit like this (class is called Account):<br>...<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; private static PropertyInfo&lt;string&gt; NumberProperty =<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; RegisterProperty&lt;string&gt;(typeof(Account), new PropertyInfo&lt;string&gt;("Number"));<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; public virtual string Number<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; get { return GetProperty&lt;string&gt;(NumberProperty); }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; set { SetProperty&lt;string&gt;(NumberProperty, value); }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>...<br><br>I tried going through CSLA to find out where it leads:<br><br>SetProperty&lt;P&gt;(PropertyInfo&lt;P&gt; propertyInfo, P newValue) =&gt;<br><br>SetProperty&lt;P&gt;(propertyInfo, newValue, Security.NoAccessBehavior.ThrowException) =&gt;<br><br>LoadPropertyValue&lt;P&gt;(propertyInfo, oldValue, newValue, true) ??<br><br>As far as I can see, LoadProperty does not fire the PropertyChanging /PropertyChanged events. According to my tests, it does indeed break databinding as the display does not update when properties change 'behind the scenes'.<br><br>Is there something I'm missing?<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Monday, June 09, 2008</h2><P>LoadProperty calls OnPropertyChanging() and PropertyHasChanged() (which calls OnPropertyChanged()). I just double-checked the code, and each FieldManager.SetFieldData() call is wrapped by the event calls.</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Goblin replied on Tuesday, June 10, 2008</h2>Okay - thanks for the check.<br><br>Must be something I'm doing wrong in my databinding in WPF then. <br><br>I have a list of readonly objects - then on SelectionChanged I set the ObjectDataProvider's ObjectInstance property to an editable version of the readonly object selected, but the display does not update.<br><br>Well, back to the drawingboard <img src="/emoticons/emotion-1.gif" alt="Smile [:)]" /><br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Goblin replied on Tuesday, June 10, 2008</h2>Turns out it was timing, that was my enemy. I use the Infragistics Grid-control with a new object in and had a button to commit my object.<br><br>Turns out that in WPF, the button's click-event happens before the Infragistics RowLeave-event happens, so my changes didn't take effect before _after_ the commit had failed, so the object was not valid - and therefore not exchanged with a new object... I solved the problem by changeing the EditMode of the Grid to happen everytime the cells are updated.<br><br>Everything fired as it should - just in the wrong order (for me). <img src="/emoticons/emotion-10.gif" alt="Embarrassed [:$]" /> Sorry for wasting your time Rocky.<br><br><br></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
