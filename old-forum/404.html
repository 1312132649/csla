<html><header><title>CSLA 1.53 busted my dataportal.</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>CSLA 1.53 busted my dataportal.</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/404.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>JonM posted on Monday, June 19, 2006</h2><P>Hello all,</P>
<P>I justed upgraded from CSLA 1.52 to CSLA 1.53.&nbsp; The sorting&nbsp;fix is specifically helpful to me!&nbsp; However, now I cannot run my app in dataportal mode, it works great local mode.&nbsp; Note, I'm running on the .NET 2.0 framework and VS2005.&nbsp; Any ideas would be greatly appreciated here.&nbsp; I've verified that the .DLL in the dataportal folder match.&nbsp; I've also verified that the dataportal is working and return WSDL through IE.&nbsp; I've attached a link to the error details.</P>
<P><SPAN id=ctl00_ctl01_bcr_PostForm___Filename><A href="http://www.accs.net/users/anonymous/dataportalbug.jpg">http://www.accs.net/users/anonymous/dataportalbug.jpg</A></SPAN></P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JonM replied on Monday, June 19, 2006</h2><P>Okay, I got it figured out.&nbsp; It turns on that the client-side dataportal code was looking for AppSetting named 'AlwaysImpersonate'.&nbsp; I did not have this application setting (no idea why it wants to find it now).&nbsp; Any way, the helper method in the CSLA framework threw an error because this value was unavailable.&nbsp; I simple added it to my app settings (setting it to false, I'm using CSLA authentication, I hope this is the right thing to do).&nbsp; So far, my problems are gone!</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Monday, June 19, 2006</h2><P>Hmm, it appears to be a bug in the VB code. I should have used LCase() instead of .ToLower, because LCase() automatically handles the null string case. Grumble...<o:p></o:p></P>
<P>Your solution is a fine answer, otherwise you can change the DataPortal.vb code as follows:<o:p></o:p></P>
<P class=MsoNormal><SPAN><SPAN>&nbsp; </SPAN><SPAN>Private</SPAN> <SPAN>Shared</SPAN> <SPAN>Function</SPAN> ALWAYS_IMPERSONATE() <SPAN>As</SPAN> <SPAN>String<o:p></o:p></SPAN></SPAN></P>
<P class=MsoNormal><SPAN><SPAN>&nbsp;&nbsp;&nbsp; </SPAN><SPAN>Return</SPAN> LCase(ConfigurationSettings.AppSettings("AlwaysImpersonate"))<o:p></o:p></SPAN></P>
<P class=MsoNormal><SPAN><SPAN>&nbsp; </SPAN><SPAN>End</SPAN> <SPAN>Function<o:p></o:p></SPAN></SPAN></P>
<P class=MsoNormal><o:p>&nbsp;</o:p></P>
<P class=MsoNormal><o:p>I've made this change in the code in cvs, so if there is a future 1.x release you'll be safe in making this change.</o:p></P></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
