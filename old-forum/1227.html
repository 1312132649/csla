<html><header><title>Generate all classes automatically?</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Generate all classes automatically?</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/1227.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>davem1958 posted on Friday, September 15, 2006</h2><P>This might be wishful thinking, but it seems like one really nice feature of a code generator would be to automatically generate all classes and stored procedures at once, based on the current data schema.&nbsp; Primary keys and foreign keys would drive the logic of which classes are child, root, etc.&nbsp; </P>
<P>Is that possible with CodeSmith or similar tool?</P>
<P>If not, how close can I come to automatic generation?</P>
<P>Thanks...</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Brian Criswell replied on Friday, September 15, 2006</h2>There are at least two very simple ways of doing this with CodeSmith.&nbsp; You can either set up a batch job or create master template that runs your regular templates against your metadata.&nbsp; Both methods are described in the help file.<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>davem1958 replied on Monday, September 18, 2006</h2><P>I'm sure it's practical, but I don't buy the "simple."&nbsp; :)</P>
<P>I'm a little spoiled, because in my last project on .NET 1.1 / CSLA 1.5&nbsp;one of the&nbsp;programmers had written a code-generator that created all 6 CSLA objects and related stored procs.&nbsp; </P>
<P>Dave</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Brian Criswell replied on Monday, September 18, 2006</h2>Well, my code generation system uses the sub-templates method.&nbsp; I found it very simple to set up, and the resulting process generated hundreds of objects with hierarchy, namespaces, saving objects in folders based on assembly and namespace, a base class regeneration scheme, all the stored procedures including loading grandchildren etc. in a single fetch, and applying the stored procedures to the database in a couple of minutes.&nbsp; The master template that orchestrated this is only 160 lines of code with a lot of white space.<br><br>I really do not think it would take you more than a day to understand sub-templates and create a master template that walked through your metadata and executed the sub-templates using the RenderToFile method.<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>David replied on Thursday, September 21, 2006</h2><P>Dave,</P>
<P>I only just bought&nbsp;CodeSmith today and have spent a couple of hours looking into this. I found it a little difficult to follow the help on sub-templates, but using the console application with a single XML input file is really easy to setup and might be the method you're looking for.</P>
<P>All you have to do is create a single XML file that lists the property sets for each object you want to generate, then running one command can generate all the files. See the help topic titled 'Using the CodeSmith Console Application".<BR></P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>davem1958 replied on Friday, September 22, 2006</h2><P>David, I looked at the help file, and it's straightforward to create one file from one template using one XML property set.</P>
<P>There's also a section on Batch generation mode.&nbsp; That looks like what you're describing, but there's only one page of help?&nbsp; (That's a question)</P>
<P>Dave</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Brian Criswell replied on Friday, September 22, 2006</h2>To give you an idea of what a master template might look like:<br><br>&lt;%@ CodeTemplate Language="C#" TargetLanguage="C#" Src="Utilities.cs" Inherits="Utilities" Debug="False" Description="Generates a project." %&gt;<br>&lt;%@ Register Name="SubTemplate" Template="SubTemplate.cst" MergeProperties="False" %&gt;<br>&lt;%<br>//Load metadata<br>MetaData data = MetaData.Load(fileName);<br><br>//Loop through metadata<br>foreach(Item item in data.Items)<br>{<br>&nbsp;&nbsp;&nbsp; SubTemplate template = new SubTemplate();<br>&nbsp;&nbsp;&nbsp; template.Item = item;<br>&nbsp;&nbsp;&nbsp; template.RenderToFile(item.Name + ".cs", true);<br>}<br>%&gt;<br></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
