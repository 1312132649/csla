<html><header><title>FileNotFound... accessing a remote portal can not find CSLA.dll</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>FileNotFound... accessing a remote portal can not find CSLA.dll</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/2975.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>ward0093 posted on Friday, June 01, 2007</h2><P>Originally, I added CSLA to our solution and it would get compiled and loaded with the rest of the projects.&nbsp; The LocalHost remoting web app worked fine when CSLA project was part of the solution.</P>
<P>Recently we removed CSLA project, wrapped up the install and installed it on our dev computers.&nbsp; The CSLA.dll exists in the BIN folder on the remoting web app, everything looks setup correctly.&nbsp; However I am still getting a FileNotFound error</P>
<P>"Could not load file or assembly 'Csla' or one of its dependencies. The system cannot find the file specified"</P>
<P>what am i setting up wrong with the pre-compiled CSLA assembly</P>
<P>ward0093<FONT size=1></P></FONT></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Friday, June 01, 2007</h2><P>Sorry for suggesting the obvious, but is your reference in your winforms application still valid?</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ward0093 replied on Friday, June 01, 2007</h2><P>ya... all objects that are marked as RunLocal work or... i can shut down the Remoting Site (forcing ALL objects to run local) and it works fine</P>
<P>All projects (especially the Business Library) reference the same pre-compiled CSLA assembly.&nbsp; I even tried coping the CSLA assembly to the BIN directory (and restarting IIS) of the virtual directory and nothing... still get the same error!</P>
<P>Also: <A href="http://localhost/RemotingTunnel/RemotingPortal.rem?wsdl">http://localhost/RemotingTunnel/RemotingPortal.rem?wsdl</A>&nbsp;works and returns the entire list of for remoting (if that helps at all).</P>
<P>any help would be great... this one is killing me!</P>
<P>ward0093</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Monday, June 04, 2007</h2>Hmm.. I have gotten this setup (just to make sure it could work if I needed it to), and all I had to do was copy the business assemblies and any of their dependancies to \bin of the web root, and set the \web.config file appropriately... usually by copying out of Rocky's sample application.<br><br>have you checked the file permissions on the vdir?<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ward0093 replied on Monday, June 04, 2007</h2><P>Good Advise above</P>
<P>Well... I did copy CSLA.dll (and its supporting files) to the bin and that did not make a difference.&nbsp; However, I can not copy my business library because it is part of the solution but I can say that it is physically in the bin with a date change after I compile and run the application.&nbsp; NOTE: everything works great if CSLA is part of the solution, no problems.</P>
<P>How does the file permissions need to be setup in the VDir?&nbsp; I am on a domain and remoting through my localhost:80.</P>
<P>ward0093</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ward0093 replied on Monday, June 04, 2007</h2><P>I checked all the directory security... I allow Read, Write, Dir Browsing, everything (on both the VDir and the \bin); Security: I have Anonymous Access "IUSR_[COMPUTER NAME]" and "Allow IIS to control password" (on both VDir and \bin) as well as Integrated Windows Auth. is checked</P>
<P>This is getting really annoying... What am i missing?&nbsp; I can not test my solution without adding CSLA back into the solution.</P>
<P>ward0093</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Monday, June 04, 2007</h2><P><BLOCKQUOTE><div><img src="/Themes/basicblue/images/icon-quote.gif"> <strong>ward0093:</strong></div><div>However, I can not copy my business library because it is part of the solution but I can say that it is physically in the bin with a date change after I compile and run the application.</div></BLOCKQUOTE></P>
<P>Well this could very well be the problem.&nbsp; The business layer needs to be availabe to both client and server (although the message you're getting seems to suggest csla is missing).</P>
<P>Have you tried just copying everything from the bin\debug folder generated by your solution and seeing if that works?</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ward0093 replied on Monday, June 04, 2007</h2><P>Everything is there...</P>
<P>I do not understand this... Does the .NET Assemblies have to exist in the bin?&nbsp; There are NOT "Copy Local" yet (and are not there physically now).&nbsp; If not, why does everything else have to be in the bin and not just the GAC?</P>
<P>ward0093</P>
<P>P.S. Does it have something to do with the signing portion of our assemblies (both the pre-compiled and the compiled)?</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ward0093 replied on Monday, June 04, 2007</h2><P>Tried everything, cleaned the solution, recopied everything... nothing is working</P>
<P>here is my stack trace incase that helps</P>
<P>----&nbsp; EXCEPTION STACK&nbsp;&nbsp;&nbsp;&nbsp; ----<BR>&nbsp;&nbsp; at System.Reflection.Assembly.nLoad(AssemblyName fileName, String codeBase, Evidence assemblySecurity, Assembly locationHint, StackCrawlMark&amp; stackMark, Boolean throwOnFileNotFound, Boolean forIntrospection)<BR>&nbsp;&nbsp; at System.Reflection.Assembly.InternalLoad(AssemblyName assemblyRef, Evidence assemblySecurity, StackCrawlMark&amp; stackMark, Boolean forIntrospection)<BR>&nbsp;&nbsp; at System.Reflection.Assembly.InternalLoad(String assemblyString, Evidence assemblySecurity, StackCrawlMark&amp; stackMark, Boolean forIntrospection)<BR>&nbsp;&nbsp; at System.Activator.CreateInstance(String assemblyName, String typeName, Boolean ignoreCase, BindingFlags bindingAttr, Binder binder, Object[] args, CultureInfo culture, Object[] activationAttributes, Evidence securityInfo, StackCrawlMark&amp; stackMark)<BR>&nbsp;&nbsp; at System.Activator.CreateInstance(String assemblyName, String typeName)<BR>&nbsp;&nbsp; at Csla.DataPortal.GetDataPortalProxy(Boolean forceLocal)<BR>&nbsp;&nbsp; at Csla.DataPortal.Fetch(Type objectType, Object criteria)<BR>&nbsp;&nbsp; at Csla.DataPortal.Fetch[T](Object criteria)<BR>&nbsp;&nbsp; at TestProgram.BizLib.DatabaseDetails.GetServerRoot() in D:\Development\BizLib\DatabaseDetails.vb:line 20</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Tuesday, June 05, 2007</h2><P>No, only your assemblies should be in the bin folder including csla.</P>
<P>It could have to do with signing; a signed assembly can ONLY load other signed assemblies.&nbsp; Unsigned assemblies may load signed ones though.</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ward0093 replied on Tuesday, June 05, 2007</h2><P>I am affraid I had to give up and add CSLA back into the solution... I just could not figure out why it would not load the CSLA (or one of its dependencies) from a precompiled state.... it was taking up too much of our time</P>
<P>Anyways.. with CSLA as part of the solution everything works fine.&nbsp; Maybe someone else will find the reason..</P>
<P>Thanks for you help... I do appreciate it!</P>
<P>ward0093</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Tuesday, June 05, 2007</h2>Ya, i'm not sure what the problem would be.&nbsp; I have Csla is its own solution and my projects only reference a binary copy on an R: drive (which is how all of my assemblies work... two projects per solutoin, one of them a test harness).</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Bowman74 replied on Wednesday, June 06, 2007</h2><P>Have you locked the version numbers down on all your assemblies including CSLA?&nbsp; You can get problems such as this when one assembly is referencing one version of an external assembly and another a different one.&nbsp; If you don't explicitly lock down the version number you will get a slightly different one every time you recompile and it won't&nbsp;be obvious that it happened.&nbsp; If you end up with different assemblies referencing slightly different versions like this, even if no code has actually changed, you will end up with that type of error.&nbsp; So three of your DLLs are looking for CSLA version 2.1.4.3456 and one of them looking for 2.1.4.3478.&nbsp;&nbsp;&nbsp; Since CSLA is not in&nbsp;the GAC and you can only have one of the two (or more) in the Bin directory it will always complain that it can't find one.&nbsp; Bad stuff.</P>
<P>Or it could be something totally different, but it is something to look at...</P>
<P>Thanks,</P>
<P>Kevin</P></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
