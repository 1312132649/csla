<html><header><title>System.Xml.XmlDocument not able to go across the wire.</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>System.Xml.XmlDocument not able to go across the wire.</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/7723.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>ludwigs3rd posted on Friday, October 02, 2009</h2>I'm using a wcf data portal like in PTracker wcfhost (no web service). I got this message:<br />Unhandled Exception: System.Runtime.Serialization.InvalidDataContractException: Type 'System.Xml.XmlDocument' cannot be serialized. Consider marking it with the DataContr<br />actAttribute attribute, and marking all of its members you want serialized with the DataMemberAttribute attribute.  See the Microsoft .NET Framework documentation for oth<br />er supported types.<br /><br />Server stack trace:<br />   at System.Runtime.Serialization.DataContract.DataContractCriticalHelper.ThrowInvalidDataContractException(String message, Type type)<br />   at System.Runtime.Serialization.DataContract.DataContractCriticalHelper.CreateDataContract(Int32 id, RuntimeTypeHandle typeHandle, Type type)<br />   at System.Runtime.Serialization.DataContract.DataContractCriticalHelper.GetDataContractSkipValidation(Int32 id, RuntimeTypeHandle typeHandle, Type type)<br />   at System.Runtime.Serialization.XmlObjectSerializerContext.GetDataContract(Int32 id, RuntimeTypeHandle typeHandle)<br />   at System.Runtime.Serialization.XmlObjectSerializerWriteContextComplex.GetDataContract(Int32 id, RuntimeTypeHandle typeHandle)<br />   at System.Runtime.Serialization.XmlObjectSerializerWriteContext.InternalSerialize(XmlWriterDelegator xmlWriter, Object obj, Boolean isDeclaredType, Boolean writeXsiTyp<br />e, Int32 declaredTypeID, RuntimeTypeHandle declaredTypeHandle)<br />etc...<br /><br />this is my code:<br />private static readonly PropertyInfo _resultsProperty = RegisterProperty(p => p.Results);<br />		public System.Xml.XmlDocument Results<br />		{<br />			get { return GetProperty(_resultsProperty); }				<br />            set<br />            { <br />                OnPropertyChanging("Results");<br />                SetProperty(_resultsProperty, value); <br />                OnPropertyChanged("Results");<br />            }<br />		}<br /><br />Any help or advice is appreciated.  Thanks!</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>tmg4340 replied on Friday, October 02, 2009</h2><P><FONT face=Tahoma size=2>XmlDocument is not a serializable type, so you aren't going to get that to work in any remote-DP scenario.</FONT></P>
<P><FONT face=Tahoma size=2>You could get it to transmit if you changed it to a string value, and just sent the raw XML (using the XmlDocument.InnerXml property).&nbsp; Of course, changing your property type may cause other issues.&nbsp; If you're 100% sure you're always going to use WCF, you could create a second property (probably private) that exposes the string representation of your XML.&nbsp; Then you can&nbsp;manually decorate your BO and all your properties&nbsp;with the appropriate WCF attributes, marking the string property with [DataMember] and not marking your XmlDocument property.&nbsp; Then WCF shouldn't try to serialize the XmlDocument property.&nbsp; But you'd&nbsp;want to test out how that will work with managed properties, since your "set" block would have to translate the string value back into an XmlDocument for your other property to work correctly.</FONT></P>
<P><FONT face=Tahoma size=2>HTH</FONT></P>
<P><FONT face=Tahoma size=2>- Scott</FONT></P></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
