<html><header><title>Single Sign-on &amp; Sharing User Credentials between CSLA and WSS</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Single Sign-on &amp; Sharing User Credentials between CSLA and WSS</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/4401.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>vdhant posted on Saturday, February 23, 2008</h2><P>Hi guys <BR>Just wondering if anyone has any ideas on how to pass User Credentials between CSLA and WSS (does the fact that CSLA uses IPrincipal and HttpContext.Current.User help at all)?<BR><BR>Also, this may have already been discussed but i have multiple websites that will be using CSLA each on a different domain and app pool and i was just wondering if anyone has any ideas about the Single Sign-on story that is available with CSLA and .net in general (again does the fact that CSLA uses IPrincipal and HttpContext.Current.User help at all)? Note, I am looking for an answer that doesnâ€™t involve using windows authentication.<BR><BR>Thanks<BR>Anthony</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>cliffordru replied on Monday, February 25, 2008</h2><P><FONT face="Times New Roman" size=3><SPAN>Anthony,<o:p></o:p></SPAN></FONT></P>
<P><FONT face="Times New Roman" size=3><SPAN>In the past I have set up SSO between multiple ASP.NET web sites (running on the same server)&nbsp;that are using forms based authentication in conjunction with both the default membership provider and a custom membership provider (as outlined in Rocky's book), using the custom Principle and Identity objects.&nbsp; <o:p></o:p></SPAN></FONT></P>
<P><FONT face="Times New Roman" size=3><SPAN>To get this to work, you need to add a &lt;machineKey&gt; section with its value inside the &lt;system.web&gt; element in your web.config and use the same value for all of the sites you want to set up with SSO.&nbsp; <o:p></o:p></SPAN></FONT></P><PRE><FONT face="Courier New" color=blue size=1><SPAN>&lt;</SPAN></FONT><FONT color=maroon size=1><SPAN>machineKey</SPAN></FONT><FONT color=black size=1><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<o:p></o:p></SPAN></FONT></PRE><PRE><FONT face="Courier New" color=red size=1><SPAN>validationKey</SPAN></FONT><FONT color=blue size=1><SPAN>="thekeyvale......"</SPAN></FONT><FONT color=black size=1><SPAN> <o:p></o:p></SPAN></FONT></PRE><PRE><FONT face="Courier New" color=red size=1><SPAN>decryptionKey</SPAN></FONT><FONT color=blue size=1><SPAN>="thekeyvalue....."</SPAN></FONT><FONT color=black size=1><SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <o:p></o:p></SPAN></FONT></PRE><PRE><FONT face="Courier New" color=red size=1><SPAN>validation</SPAN></FONT><FONT color=blue size=1><SPAN>="SHA1"/&gt;</SPAN></FONT><o:p></o:p></PRE>
<P><FONT face="Times New Roman" size=3><SPAN>You should encrypts this section of your config file.<o:p></o:p></SPAN></FONT></P>
<P><FONT face="Times New Roman" size=3><SPAN>Then you will want to use the same membership provider for the sites as well as the same login page.&nbsp; To use a login page not part of the local site use: <o:p></o:p></SPAN></FONT></P>
<P><FONT face="Courier New" color=blue size=1><SPAN>&lt;</SPAN></FONT><FONT face="Courier New" color=maroon size=1><SPAN>forms</SPAN></FONT><FONT size=2><SPAN>&nbsp;</SPAN></FONT><FONT face="Courier New" color=red size=1><SPAN>loginUrl</SPAN></FONT><FONT face="Courier New" color=blue size=1><SPAN>=<A title=http://localhost/SomeApp/Login.asp href="http://localhost/SomeApp/Login.asp">http://localhost/SomeApp/Login.asp</A></SPAN></FONT><FONT size=2><SPAN>&nbsp; </SPAN></FONT><FONT face="Courier New" color=red size=1><SPAN>name</SPAN></FONT><FONT face="Courier New" color=blue size=1><SPAN>=".SomeName"/&gt;</SPAN></FONT><o:p></o:p></P>
<P><FONT face="Times New Roman" color=black size=3><SPAN>I have not tried but you may be able to extend this to an ASP.NET and WSS scenario.&nbsp; Hope that helps.</SPAN></FONT><o:p></o:p></P>
<P><FONT face="Times New Roman" color=black size=3><SPAN>Cliff<BR><A title=http://www.graytechnology.com/blog/ href="http://www.graytechnology.com/blog/">http://www.graytechnology.com/blog/</A></SPAN></FONT><o:p></o:p></P></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
