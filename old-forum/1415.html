<html><header><title>flattening business list?</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>flattening business list?</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/1415.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 posted on Friday, October 06, 2006</h2>HI,<br><br>I have a business list which can contain different types of objects.&nbsp; Some of the object contain other objects as well.&nbsp; All of these object implement a common interface.<br><br>I would like to create a view which 'flattens' the collection.&nbsp; Each top level object has a Position (an int) and the list must be sorted according to this property.&nbsp; However, if an object contains other objects, those must be displayed before the next root object.<br><br>For example:<br><br>simple4<br>
simple1<br>complex3<br>&nbsp;&nbsp;&nbsp; sub1<br>&nbsp;&nbsp;&nbsp; sub2<br>simple2<br>
<br>Should display as:<br><br>simple1<br>
simple2<br>
complex3<br>sub1<br>sub2<br>
simple4<br>
<br>Has anyone done something simiilar to this?&nbsp; Oh, the list also has to support adding and removing items as well..<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Brian Criswell replied on Friday, October 06, 2006</h2>Wow, what is this for?&nbsp; This is doable, but I think there may be a lot of work keeping track of the order of things, readjusting the list when the underlying items change and delegating add and remove calls.&nbsp; The ObjectListView was a lot of work, and it only has to keep track of one kind of item.<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Friday, October 06, 2006</h2>This is to support a collection of Line items.&nbsp; <br><br>There's a simple line item, which is just a single row on the grid, with a price, part number etc.<br><br>We also sell bundles.&nbsp; The bundle item is like a simple line item, but contains a list of sub line items which make up the bundle.&nbsp; You can't edit, add or remove sub items.<br><br>Then the user can group Simple line items.&nbsp; What ends up happening is that the Group item has a collection of sub items as well.&nbsp; The sub items in this can be edited and can be removed or moved out of the group.<br><br>There's some other line items as well, but these function more or less like the Simple line item (except they allow different properties to be modified or not modified).<br><br>Andy<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Brian Criswell replied on Friday, October 06, 2006</h2>And in what situations do you need to see the list as a flattened list (editing, printing, etc.)?<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Friday, October 06, 2006</h2>Editing.&nbsp; The user will be working with an UltraGrid (from Infragistics) to modify data within the grid.<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Brian Criswell replied on Friday, October 06, 2006</h2>This might sound mad, but have you considered writing a series of custom controls for this?&nbsp; Your list could plug in to a custom control that was a 1 column table layout panel.&nbsp; For each item in the list, you create a user control corresponding to the type of line item and place it into a new row in the correct place in the table layout panel.&nbsp; The controls for items with subitems would behave in a similar manner.&nbsp; The AutoSize property of the panels would keep everything laid out properly and simplify the adding and removing of items.&nbsp; It could actually turn out to be simpler than creating this view.<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Monday, October 09, 2006</h2>Yes, but there are some concerns.&nbsp; One is the time it would take, as its just me doing everything from database to UI.&nbsp;&nbsp; Second, i'd have to write a new control for each new kind of line item.&nbsp; Although I don't expect more, its always a possiblity.<br><br>As a side note, I'm trying to figure out if any patterns help me here.&nbsp; So far, no luck.<br><br>I think what I'll do is create a DisplayLineItem, which will wrap any kind of line item.&nbsp; It will have a collection of sub items no matter what the underlying type is.. and I'll have the grid in a hierarchy mode to show the sub items.&nbsp; Not ideal, but the custom binding list is proving challenging to write.<br><br>Andy<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>malloc1024 replied on Monday, October 09, 2006</h2><p class="MsoNormal">I could be missing something but you could try to use a fa√ßade.<span>&nbsp; </span>You could wrap the objects in a single class to
flatten the hierarchy.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Tuesday, October 10, 2006</h2>Malloc,<br><br>I think that's the route I ended up going down by creating the DisplayLineItems binding list.&nbsp; I did complete this, and so far it seems to work, although I have to add a bit to the UI to actually test things out.<br><br>Or are you suggesting that this 'flattened' list be the only list exposed by the UI and the various kinds of groups are done totally behind the scenes?&nbsp; I hadn't thought about that..<br><br>My only concern is that the UI does need to know a little about the type of line item, so that it can enable / disable items in the grid's context menu (like delete, move up, etc).<br><br>Andy<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>david.wendelken replied on Tuesday, October 10, 2006</h2><P>I had a similar problem to solve, in that I had 15 different transactions to support, each of which used a somewhat different subset of properties.</P>
<P>I created an object / object collection class that included the super-set (union) of all the properties (plus a transaction type property).</P>
<P>I then added a boolean property for each one of them called Show&lt;property&gt;.</P>
<P>So, I would have Name and ShowName,&nbsp; etc.&nbsp;&nbsp; The Show properties are used by the UI to hide the inappropriate properties for any given record.&nbsp; </P>
<P>I used a DataList to format it and it's working very nicely.</P>
<P>I'm sure there must be a better way to do it, but it's working!</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>david.wendelken replied on Tuesday, October 10, 2006</h2><P>Forgot to add some points about using the DataList.</P>
<P>I used the HeaderTemplate to start a &lt;table&gt; and the FooterTemplate to close it off &lt;/table&gt;.</P>
<P>Each ItemTemplate and EditItemTemplate were composed of one or more table rows.</P>
<P>&nbsp;</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Tuesday, October 10, 2006</h2>Yes, this is what I think I'll end up doing.&nbsp; Glad to hear its not that crazy.&nbsp;&nbsp; Since I've been reading Head First Design Patterns during lunch, this sounds like the adapter or facade pattern..<br><br>Of course this leads to my next question:&nbsp; Does this adapter / facade belong to the UI or business layer?<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Tuesday, October 10, 2006</h2>Ok, so the more I think about this, the more I think that the flat collection class and a special 'display' LineItem class should be all that's visible to the UI.<br><br>The GroupLineItem, BundleLineItem, SimpleLineItem, etc. would all be hidden, used only by the business layer internally.&nbsp; My current LineItemFactory would return instances of LineItem (which is the 'view' class) instead of ILineItem which is being returned now.<br><br>LineItem would have additional properties; IsDeletable, IsMovable, etc.&nbsp; Any type of UI would likely need to know these.&nbsp; LineItem itself would just encapsulate the actual line item class and delegate most of the responsibility to the encapsulated object.&nbsp; It would figure out IsMovable etc. by looking at the exact class type.<br><br>So is this a good idea, or am I heading to a bad place with this design?<br><br>Thanks<br>Andy<br><br><br></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
