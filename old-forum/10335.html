<html><header><title>The remote server returned an error: NotFound</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>The remote server returned an error: NotFound</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/10335.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>lds posted on Tuesday, May 03, 2011</h2><p>Hi Rocky,</p>
<p>I have been reading your great ebooks. Using them as a guide I have been<br />working on a Silverlight App that follows the setup of &quot;AzureHost&quot; solution<br />in the &quot;04-DataPortal-110426&quot; sample folder.</p>
<p>I have an Editable Root abject that all works normal as long as its size<br />does not get too big, when the size increases and I try to save the<br />object I receive the Message &quot;The remote server returned an error: NotFound.&quot;.</p>
<p>Next In order to eliminate all that I could be doing wrong in my solution <br />I took the &quot;AzureHost&quot; solution and made the following 3 changes to<br />reproduce the error;</p>
<p>PersonEdit.cs<br />// 1st Change<br />// Add a String Property.<br />public static readonly PropertyInfo&lt;string&gt; BigStringProperty = RegisterProperty&lt;string&gt;(c =&gt; c.BigString);<br />public string BigString<br />{<br />&nbsp; get { return GetProperty(BigStringProperty); }<br />&nbsp; set { SetProperty(BigStringProperty, value); }<br />}</p>
<p>public override void DataPortal_Create(Csla.DataPortalClient.LocalProxy&lt;PersonEdit&gt;.CompletedHandler handler)<br />{<br />&nbsp; using (BypassPropertyChecks)<br />&nbsp; {<br />&nbsp;&nbsp;&nbsp; Id = -1;</p>
<p>&nbsp;&nbsp;&nbsp; // 2nd Change<br />&nbsp;&nbsp;&nbsp; // This will push the size to where there will be an error when the object is saved.<br />&nbsp;&nbsp;&nbsp; BigString = new string(&#39;x&#39;, 13000);<br />&nbsp; }<br />&nbsp; base.DataPortal_Create(handler);<br />}</p>
<p><br />App.xaml.cs<br />private void Application_Startup(object sender, StartupEventArgs e)<br />{<br />&nbsp; // 3rd Change<br />&nbsp; // Extend the limits.<br />&nbsp; var binding = new BasicHttpBinding();<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br />&nbsp; binding.MaxBufferSize = int.MaxValue;<br />&nbsp; binding.MaxReceivedMessageSize = int.MaxValue;<br />&nbsp; binding.ReceiveTimeout = TimeSpan.FromMinutes(10);<br />&nbsp; binding.SendTimeout = TimeSpan.FromMinutes(10);<br />&nbsp; binding.OpenTimeout = TimeSpan.FromMinutes(10);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br />&nbsp; Csla.DataPortalClient.WcfProxy.DefaultBinding = binding;<br />&nbsp; Csla.DataPortalClient.WcfProxy.DefaultUrl = &quot;<a href="http://127.0.0.1:81/SlPortal.svc">http://127.0.0.1:81/SlPortal.svc</a>&quot;;</p>
<p>&nbsp; this.RootVisual = new MainPage();<br />}</p>
<p>With these changes made when the Save Button is pressed the followin error is<br />returned in OnError(Exception error) of OnPersonViewModel.cs</p>
<p>error&nbsp;{: The remote server returned an error: NotFound.<br />&nbsp;&nbsp; at System.ServiceModel.AsyncResult.End[TAsyncResult](IAsyncResult result)<br />&nbsp;&nbsp; at System.ServiceModel.Channels.ServiceChannel.EndCall(String action, Object[] outs, IAsyncResult result)<br />&nbsp;&nbsp; at System.ServiceModel.ClientBase`1.ChannelBase`1.EndInvoke(String methodName, Object[] args, IAsyncResult result)<br />&nbsp;&nbsp; at Csla.WcfPortal.WcfPortalClient.WcfPortalClientChannel.EndUpdate(IAsyncResult result)<br />&nbsp;&nbsp; at Csla.WcfPortal.WcfPortalClient.Csla.WcfPortal.IWcfPortal.EndUpdate(IAsyncResult result)<br />&nbsp;&nbsp; at Csla.WcfPortal.WcfPortalClient.OnEndUpdate(IAsyncResult result)<br />&nbsp;&nbsp; at System.ServiceModel.ClientBase`1.OnAsyncCallCompleted(IAsyncResult result)<br />: The remote server returned an error: NotFound.<br />&nbsp;&nbsp; at System.Net.Browser.AsyncHelper.BeginOnUI(SendOrPostCallback beginMethod, Object state)<br />&nbsp;&nbsp; at System.Net.Browser.BrowserHttpWebRequest.EndGetResponse(IAsyncResult asyncResult)<br />&nbsp;&nbsp; at System.ServiceModel.Channels.HttpChannelFactory.HttpRequestChannel.HttpChannelAsyncRequest.CompleteGetResponse(IAsyncResult </p>
<p>result)<br />: The remote server returned an error: NotFound.<br />&nbsp;&nbsp; at System.Net.Browser.BrowserHttpWebRequest.InternalEndGetResponse(IAsyncResult asyncResult)<br />&nbsp;&nbsp; at System.Net.Browser.BrowserHttpWebRequest.&lt;&gt;c__DisplayClass5.&lt;EndGetResponse&gt;b__4(Object sendState)<br />&nbsp;&nbsp; at System.Net.Browser.AsyncHelper.&lt;&gt;c__DisplayClass4.&lt;BeginOnUI&gt;b__1(Object sendState)<br />}&nbsp;System.Exception {Csla.DataPortalException}</p>
<p><br />// I also added the following to Web.Config.<br />&lt;system.diagnostics&gt;<br />&nbsp;&lt;sources&gt;<br />&nbsp;&nbsp; &lt;source name=&quot;System.ServiceModel&quot; switchValue=&quot;Information, ActivityTracing&quot; propagateActivity=&quot;true&quot;&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp; &lt;listeners&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;add name=&quot;traceListener&quot; type=&quot;System.Diagnostics.XmlWriterTraceListener&quot; initializeData=&quot;c:\temp\AzureHostTraces.log&quot;&nbsp; /&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp; &lt;/listeners&gt;<br />&nbsp;&nbsp; &lt;/source&gt;<br />&nbsp;&lt;/sources&gt;<br />&nbsp;&lt;trace autoflush=&quot;true&quot; /&gt;<br />&lt;/system.diagnostics&gt;</p>
<p>And In the Log file there is a exception with the following Message:<br />The formatter threw an exception while trying to deserialize the message: There was an error while trying to deserialize parameter </p>
<p><a href="http://ws.lhotka.net/WcfDataPortal:request">http://ws.lhotka.net/WcfDataPortal:request</a>. The InnerException message was &#39;There was an error deserializing the object of type </p>
<p>Csla.Server.Hosts.Silverlight.UpdateRequest. The maximum array length quota (16384) has been exceeded while reading XML data. This quota </p>
<p>may be increased by changing the MaxArrayLength property on the XmlDictionaryReaderQuotas object used when creating the XML reader. Line </p>
<p>1, position 24487.&#39;.&nbsp; Please see InnerException for more details.</p>
<p>Any Idea as to what it could be wrong?</p>
<p>Luigi</p></div><div style='padding:0 15 3 15;background-color:lightgreen'><h2>RockfordLhotka replied on Tuesday, May 03, 2011</h2><p>I think the endpoint element in the web.config of the web role is incorrect. It is missing the bindingConfiguration property:</p>
<pre style="FONT-FAMILY:Consolas;BACKGROUND:white;COLOR:black;FONT-SIZE:13px;"><span style="COLOR:blue;">&lt;</span><span style="COLOR:#a31515;">endpoint</span><span style="COLOR:blue;">&nbsp;</span><span style="COLOR:red;">binding</span><span style="COLOR:blue;">=</span>&quot;<span style="COLOR:blue;">basicHttpBinding</span>&quot;<span style="COLOR:blue;">&nbsp;</span><span style="COLOR:red;">bindingConfiguration</span><span style="COLOR:blue;">=</span>&quot;<span style="COLOR:blue;">basicHttpBinding_IWcfPortal</span>&quot;<br /><span style="COLOR:blue;">          </span><span style="COLOR:red;">contract</span><span style="COLOR:blue;">=</span>&quot;<span style="COLOR:blue;">Csla.Server.Hosts.Silverlight.IWcfPortal</span>&quot;<span style="COLOR:blue;">/&gt;</span><br /></pre>
<p>&nbsp;Let me know if that helps.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Tuesday, May 03, 2011</h2><p>You shouldn&#39;t have to extend the limits on the client btw, the default binding created by the data portal has the values maxed out.</p>
<p>I added the missing bindingConfiguration property to the web.config and that appears to solve the issue.</p>
<p>Thank you for helping to find this - I&#39;ll fix it in the ebook and sample code.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>lds replied on Tuesday, May 03, 2011</h2><p><em>Hi Rocky,</em></p>
<p><em>Thank you for taking a look at this, I removed the changes from App.xaml.cs and&nbsp;here is the&nbsp;updated&nbsp;Web.Config section. </em></p>
<p><span style="font-family:Consolas;color:#0000ff;font-size:x-small;">&nbsp; &lt;system.serviceModel&gt;<br />&nbsp;&nbsp;&nbsp; &lt;serviceHostingEnvironment multipleSiteBindingsEnabled=&quot;true&quot; /&gt;<br />&nbsp;&nbsp;&nbsp; &lt;services&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;service name=&quot;Csla.Server.Hosts.WcfPortal&quot; behaviorConfiguration=&quot;returnFaults&quot;&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;endpoint binding=&quot;wsHttpBinding&quot; contract=&quot;Csla.Server.Hosts.IWcfPortal&quot; bindingConfiguration=&quot;wsHttpBinding_IWcfPortal&quot;/&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/service&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;service name=&quot;basicHttpBinding_IWcfPortal&quot;&nbsp; behaviorConfiguration=&quot;returnFaults&quot; &gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;endpoint binding=&quot;basicHttpBinding&quot; <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; contract=&quot;Csla.Server.Hosts.Silverlight.IWcfPortal&quot; <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; bindingConfiguration=&quot;basicHttpBinding_IWcfPortal&quot;/&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/service&gt;<br />&nbsp;&nbsp;&nbsp; &lt;/services&gt;<br />&nbsp;&nbsp;&nbsp; &lt;bindings&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;basicHttpBinding&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;binding name=&quot;basicHttpBinding_IWcfPortal&quot; maxReceivedMessageSize=&quot;2147483647&quot;&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;readerQuotas maxBytesPerRead=&quot;2147483647&quot;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; maxArrayLength=&quot;2147483647&quot;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; maxStringContentLength=&quot;2147483647&quot;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; maxDepth=&quot;1024&quot;/&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/binding&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/basicHttpBinding&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;wsHttpBinding&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;binding name=&quot;wsHttpBinding_IWcfPortal&quot; maxReceivedMessageSize=&quot;2147483647&quot;&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;readerQuotas maxBytesPerRead=&quot;2147483647&quot;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; maxArrayLength=&quot;2147483647&quot;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; maxStringContentLength=&quot;2147483647&quot;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; maxDepth=&quot;1024&quot;/&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/binding&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/wsHttpBinding&gt;<br />&nbsp;&nbsp;&nbsp; &lt;/bindings&gt;<br />&nbsp;&nbsp;&nbsp; &lt;behaviors&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;serviceBehaviors&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;behavior name=&quot;returnFaults&quot;&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;serviceDebug includeExceptionDetailInFaults=&quot;true&quot; /&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/behavior&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/serviceBehaviors&gt;<br />&nbsp;&nbsp;&nbsp; &lt;/behaviors&gt;<br />&nbsp; &lt;/system.serviceModel&gt;</span></p>
<p><span style="font-family:Consolas;"><span style="font-size:x-small;"><span style="color:#0000ff;">I&#39;m still getting the same error.</span></span></span></p>
<p><span style="font-family:Consolas;"><span style="font-size:x-small;"><span style="color:#0000ff;">Luigi</span></span></span></p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Tuesday, May 03, 2011</h2><p>Interesting. I agree that it fails. So does the IISHost project, so it isn&#39;t an Azure issue.</p>
<p>There must be some other configuration limit that was added to WCF in .NET 4 that&#39;s causing this issue...</p></div><div style='padding:0 15 3 15;background-color:lightgreen'><h2>RockfordLhotka replied on Tuesday, May 03, 2011</h2><p>Ahh, we&#39;re missing this:</p>
<p><span style="color:blue;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="color:red;">maxNameTableCharCount</span><span style="color:blue;">=</span>&quot;<span style="color:blue;">2147483647</span>&quot;</p>
<p>So the web.config should contain:</p>
<pre style="font-family:Consolas;background:white;color:black;font-size:13px;"><span style="color:blue;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;</span><span style="color:#a31515;">basicHttpBinding</span><span style="color:blue;">&gt;</span><br /><span style="color:blue;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;</span><span style="color:#a31515;">binding</span><span style="color:blue;">&nbsp;</span><span style="color:red;">name</span><span style="color:blue;">=</span>&quot;<span style="color:blue;">basicHttpBinding_IWcfPortal</span>&quot;<br /><span style="color:blue;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:red;">maxReceivedMessageSize</span><span style="color:blue;">=</span>&quot;<span style="color:blue;">2147483647</span>&quot;<span style="color:blue;">&gt;</span><br /><span style="color:blue;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;</span><span style="color:#a31515;">readerQuotas</span><span style="color:blue;">&nbsp;</span><span style="color:red;">maxBytesPerRead</span><span style="color:blue;">=</span>&quot;<span style="color:blue;">2147483647</span>&quot;<br /><span style="color:blue;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:red;">maxArrayLength</span><span style="color:blue;">=</span>&quot;<span style="color:blue;">2147483647</span>&quot;<br /><span style="color:blue;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:red;">maxStringContentLength</span><span style="color:blue;">=</span>&quot;<span style="color:blue;">2147483647</span>&quot;<br /><span style="color:blue;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:red;">maxNameTableCharCount</span><span style="color:blue;">=</span>&quot;<span style="color:blue;">2147483647</span>&quot;<br /><span style="color:blue;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color:red;">maxDepth</span><span style="color:blue;">=</span>&quot;<span style="color:blue;">2147483647</span>&quot;<span style="color:blue;">/&gt;</span><br /><span style="color:blue;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/</span><span style="color:#a31515;">binding</span><span style="color:blue;">&gt;</span><br /><span style="color:blue;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/</span><span style="color:#a31515;">basicHttpBinding</span><span style="color:blue;">&gt;</span><br /></pre>
<p>&nbsp;</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Tuesday, May 03, 2011</h2><p>Hmm, that doesn&#39;t seem to help either.</p>
<p>I&#39;m open to suggestions at this point - clearly we&#39;re missing some config value...</p></div><div style='padding:0 15 3 15;background-color:lightgreen'><h2>RockfordLhotka replied on Tuesday, May 03, 2011</h2><p>OK, now I feel really dumb...</p>
<p>The problem is a copy-paste issue or something. The service name is wrong, so the entire config section we&#39;re altering is being ignored...</p>
<p>The service name must match the name of the service in the svc file:</p>
<pre style="font-family:Consolas;background:white;color:black;font-size:13px;"><span style="color:blue;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;</span><span style="color:#a31515;">service</span><span style="color:blue;">&nbsp;</span><span style="color:red;">name</span><span style="color:blue;">=</span>&quot;<span style="color:blue;">Csla.Server.Hosts.Silverlight.WcfPortal</span>&quot;<br /></pre>
<p>Doh!&nbsp;</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>lds replied on Tuesday, May 03, 2011</h2><p>All works as it should now...</p>
<p>Thank You Rocky... I&#39;m looking forward to read the rest of the ebooks!!!</p>
<p>Luigi</p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
