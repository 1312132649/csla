<html><header><title>Shared/Static rules, are they really that intensive?</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Shared/Static rules, are they really that intensive?</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/7650.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>c_manboy posted on Thursday, September 17, 2009</h2>I'm reading the vb 2008 business object book and in it Rockford recommends the usage of shared/static rules to avoid a performance hit.&nbsp; But i'm really curious, how many rules and/or objects does it take to become a noticeable hit?<br><br>While I recognize the advantage of using delegates for the rules, it seems that many of the rules I'd implement are small, less than 10 line methods.<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JonnyBee replied on Friday, September 18, 2009</h2>Hi, <br>Instance rules was the first implementation - static rules was added (I believe in 2.x) and has become the recommended approach.<br><br>Per type rules are initialized one time only - instance ruleas has to be registered for each instance of your object and that requires more memory.<br><br>And I believe the static rules is a better approach and makes your code more readable and have a better performance.<br><br>/jonnybee<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>IanK replied on Friday, September 18, 2009</h2><P>You may not notice difference on a single business object but you may where the object references a Bussiness List object which could potentially have hundreds of items with each child object in the list having its own rules.</P>
<P>I have to say when I moved from earlier versions to around 2.1.4 when this change was made I think I noticed an overall improvement in the performance of CSLA.</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>c_manboy replied on Friday, September 18, 2009</h2><P>I guess I'm just surprised that four busines rule methods would have an impact on an object that already has several dozen methods.&nbsp; </P>
<P>Thanks for the feedback.</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Friday, September 18, 2009</h2>Its not the number of methods, its that Csla maintains a RuleList which stores references to the rule methods.  In the case of instance rules, this RulesList is per object, and thus each object requires more memory.  The static rules are only every listed once, in a static RuleList... so no matter how many instances of a class you have, there's only one list.  And in most cases, the rules apply to every instance of a class, so it doesn't make sense to have 100s of references to the same method when one will do.</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Friday, September 18, 2009</h2><P>Andy is correct.</P>
<P>Consider the case where you load a list of 100 child objects. If each child instance has to initialize its own list of rules (and the objects that list contains) you can imagine that the time and memory consuption becomes measurable very rapidly.</P>
<P>The static rule approach means the rules are initialized and managed once per <EM>type</EM> and so it doesn't matter if you create 1 or 1000 instances, the overhead is the same.</P></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
