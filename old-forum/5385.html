<html><header><title>What is the best way to implement authorization/authentication</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>What is the best way to implement authorization/authentication</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/5385.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>detritus posted on Thursday, September 11, 2008</h2>Dear All,<br><br>I'm designing my first CSLA.NET based project. I've done a lot of reading on the framework (which is not easy when the framework itself moving forward fast while I trying to catch-up) and I'm not sure how to do couple of things. I'll appreciate if somebody help me on these:<br><br>In the application, while the "user" has it's usual meaning (authentication), it's must be linked to a "Card" business entity. The application defines all kinds of cards with their detail data (phones, addresses, etc), the users of the application should be linked to their cards.<br>For example, if I have an admin as an application user, I must have a corresponding Admin card.<br><br>We also don't want to implement a full authentication system having one already with .NET (ASP.NET Membership) but not sure how to integrate that with CSLA.NET and our Card business object. I've seen wrapper CslaMembershipProvider and CslaRoleProvider classes posted in this forum but I think these solves the remoting problem rather than making user a business object.<br><br>Nothing is written in stone yet, if anybody here thinks I'm doing something wrong or there is an easier / better way to do it please let me know.<br><br>Not trying to make things more complex but having a solution that integrates (or can integrate with a small change) with X single-sign-on solution will be a bonus. I don't have any experience with one yet, please let me know what I should expect/do.<br><br>Thanks in advance,<br><br>Sinan<br><br><br><br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JoeFallon1 replied on Thursday, September 11, 2008</h2><P>I have a large web app (been using CSLA since 1.x and .Net 1.1).</P>
<P>So I do not use the ASP.NET Membership provider as it didn't exist when I got started.</P>
<P>I use&nbsp;custom Principal and Identity classes:</P><FONT size=2>
<P>&lt;Serializable()&gt; _<BR></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>Public</FONT></FONT><FONT size=2> </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>Class</FONT></FONT><FONT size=2> MyUser<BR>&nbsp; </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>Inherits</FONT></FONT><FONT size=2> Csla.Security.BusinessPrincipalBase</P></FONT><FONT size=2><FONT size=2>
<P>&lt;Serializable()&gt; _<BR></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>Public</FONT></FONT><FONT size=2> </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>Class</FONT></FONT><FONT size=2> MyBusinessIdentity<BR></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>&nbsp; Inherits</FONT></FONT><FONT size=2> Csla.ReadOnlyBase(</FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>Of</FONT></FONT><FONT size=2> MyBusinessIdentity)<BR></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>&nbsp; Implements</FONT></FONT><FONT size=2> IIdentity</P></FONT></FONT>
<P>With these 2 classes you can make your user code as complex or simple as you need. You can also create other objects inside your login procedure and "carry them around with you" as you keep the Principal in Session. So your Card business object could be fetched when you fetch your Identity and then you can expose it to the world the same way other things like Roles are exposed. And it is now available on every hit.</P>
<P>Single sign on is just having a system or screen that captures the Windows ID and then calls your Principal to perform login based on the passed in ID. So you get to write whatever code you need to validate the WindowsID. e.g. hit a local DB with the Name as the userid, or hit a company DB that maintains these IDs, or hit the network itself to ask directly from the store of IDs.</P>
<P>Once you are convinced the user is who they say they are, then you load up roles and permissions and Cards the same way you did when they used a username and password.</P>
<P>Joe</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>detritus replied on Friday, September 12, 2008</h2>Hi Joe,<br><br>I actually though about that before but doing all the things ASP.NET membership already does seemed wrong. I also though about modifying the source codes for ASP.NET providers to make my custom providers, but this may couple security system and my application more than I like.<br><br>Anyway, thanks for the thought.<br>Sinan<br><br></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
