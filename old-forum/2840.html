<html><header><title>type or classification properties</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>type or classification properties</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/2840.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>brrrdog posted on Wednesday, May 09, 2007</h2><P>I'm just wondering what the concensus is on handling simple classifications or types on an object.&nbsp; Consider the class Worker.&nbsp; Worker can be of type&nbsp;"Salary", "Hourly", or "Contractor" or additional types defined by the user.&nbsp; In the database this is is represented by WorkerType(Int id, description varchar);&nbsp; How is this represented on the Worker class?&nbsp; </P>
<P>1. Worker.WorkerType where WorkerType is it's own class having both the id, and the description fields?&nbsp; This makes the most sense to me from a design perspective but is difficult to use.&nbsp; How would you bind it for display in a grid?&nbsp; How would you change it?</P>
<P>2. Worker.WorkerTypeId is only the id field?&nbsp; By far the easiest for updating but what do you do to display it in a grid?&nbsp; Do a lookup as each item is bound?</P>
<P>3. Add Worker.WorkerTypeDescription?&nbsp; Fixes the display issue, but do you do something to ensure that WorkerTypeDescription stays in sync with WorkerTypeId if WorkerTypeId is changed?</P>
<P>&nbsp;</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Wednesday, May 09, 2007</h2><P>I use #2 in the book, because the combobox controls in Windows, web and WPF all handle translating the numeric value into a human-readable value with little effort.</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Bayu replied on Thursday, May 10, 2007</h2>Hello,<br><br>I use #2 in my editable objects. Using a namevaluelist on the foreign-keyed table (or hard-coded list) I translate the IDs into human-readable format as Rocky suggested.<br><br>However, in my readonly lists and objects I usually do #3. Since the object is read-only, I don't need to worry about redundancy or keeping multiple fields in sync. So on the readonly object I would have a field for the ID but also a field for the corresponding human-readable Description. This description is simply retrieved along with the rest of the data by simply joining the tables on the foreign key (or looking up the value in my hard-coded namevaluelist in case the name-value pairs are defined in code instead of in the DB).<br><br>Bayu<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>brrrdog replied on Thursday, May 10, 2007</h2><P>Yes, I agree that combo/dropdown boxes are easy in this case, but what about in a grid (specifically in a web page)?&nbsp; Do you translate the value in one of the grids&nbsp;ie ItemCreated or ItemDatabound? &nbsp;I would like to avoid a special RO collection of WorkerInfo objects just for display, at least in simple cases like this.</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>david.wendelken replied on Thursday, May 10, 2007</h2><P>I've been doing some thinking on this problem, and came up with several approaches.&nbsp; Haven't tried them out yet to see which one I like best. :(</P>
<P><BLOCKQUOTE><div><img src="/Themes/default/images/icon-quote.gif"> <strong>brrrdog:</strong></div><div>1. Worker.WorkerType where WorkerType is it's own class having both the id, and the description fields?&nbsp; This makes the most sense to me from a design perspective but is difficult to use.&nbsp; How would you bind it for display in a grid?&nbsp; How would you change it?</div></BLOCKQUOTE></P>
<P>You could implement a WorkerTypeNVList, a subclass of the NameValueListBase class.&nbsp; If the WorkerType class (of BusinessBase) is implemented correctly, WorkerTypeNVList always stays up-to-date.&nbsp; See #2 and #3 below on how this might be used.</P>
<P><BLOCKQUOTE><div><img src="/Themes/default/images/icon-quote.gif"> <strong>brrrdog:</strong></div><div>2. Worker.WorkerTypeId is only the id field?&nbsp; By far the easiest for updating but what do you do to display it in a grid?&nbsp; Do a lookup as each item is bound?</div></BLOCKQUOTE></P>
<P>If you use a DropDownList to display the WorkerTypeId property, you can use the WorkerTypeNVList to supply the corresponding values, and thus display the description for the user.</P>
<P><BLOCKQUOTE><div><img src="/Themes/default/images/icon-quote.gif"> <strong>brrrdog:</strong></div><div>3. Add Worker.WorkerTypeDescription?&nbsp; Fixes the display issue, but do you do something to ensure that WorkerTypeDescription stays in sync with WorkerTypeId if WorkerTypeId is changed?</div></BLOCKQUOTE></P>
<P>If you chose to go with a property for the description field, it could look up the correct value in the WorkerTypeNVList class on demand.&nbsp; For large lists, this might save a lot of memory.&nbsp; </P>
<P>(Then again, maybe .Net is smart enough to somehow know the 20,000 Workers of Type = WorkerBee only need one string storing "WorkerBee", instead of 20,000 copies.)</P>
<P>At the least, if someone changes the description of WorkerBee to WorkerDrone, this should pick it up automatically, the next time someone asked.&nbsp; If the literal value was stored inside the object as a string, it wouldn't (without additional coding).</P>
<P>&nbsp;</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Thursday, May 10, 2007</h2><P>One thing to consider is separation of concerns. It is a UI concern to translate values into human-readable output. It really isn't the business object's job to provide the text description (though I sometimes do so in read-only objects too <img src="/emoticons/emotion-1.gif" alt="Smile [:)]" />).</P>
<P>But I think the <EM>correct</EM> solution is to handle the proper event in the grid (the name of which escapes me) that allows you to format a value as it goes into the cell/column. That gives you the opportunity to translate from the integer value to the string value for the user.</P>
<P>The UI then has the job of getting the NVL to do the translation, but that's a small matter.</P>
<P>And in CSLA 3.0 I'm adding a GetValue() to NVLB to make this sort of thing easier (right now you may need to loop the list to find a match).</P></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
