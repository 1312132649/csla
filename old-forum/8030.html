<html><header><title>Get extra User infomation when logging in - (Completely new to CSLA)</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Get extra User infomation when logging in - (Completely new to CSLA)</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/8030.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>strangerd posted on Monday, November 23, 2009</h2>Hi<br><br>I have been searching everywhere for a good solution for my problem, but have only found half created pieces of code.<br><br>I know that you only get the username currently it seems from the Identity. I would like to get the full name of the user and whether the user is admin, etc. (all is stored in DB).<br><br>I read that you need to create custom Identity. I read the book and don't really get what I have to do to make it work (where I have to place what and what to import and what to call, etc.)<br><br>I am really in need of help.<br><br>UPDATE:<br>The other thing I can also do is get the information by just reading info from the User object by giving it the Username I use when logging in). This might be easier but I am also at a loss on what to do.<br><br>Thank you<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>dlambert replied on Monday, November 23, 2009</h2>Look in the ProjectTracker sample at the ProjectTracker.Library.Security.PTIdentity object and see if this is what you're trying to do.  You'd add something like a FullName property and fill it in the DP_Fetch method.<br /><br />Is this about right?</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>strangerd replied on Monday, November 23, 2009</h2>Everything is returned in the DP_Fetch method.<br><br>I created properties for all the required fields. So I can call all the fields:<br><br>(TxtName is the textbox in which I type the user name. ID is a class level variable I require. I have not tried the other new ones yet)<br><br>CODE:<br>-------------<br>&nbsp;&nbsp;&nbsp; Dim n As Object = txtName.Text&nbsp;&nbsp;&nbsp;&nbsp; 'I tried this (It does not give any errors)<br><br>&nbsp;&nbsp;&nbsp; ID = CType(n, UserInfo).Id<br><br>And it gives this error:<br>Unable to cast object of type 'System.String' to type 'ITIMS.Library.UserInfo'.<br><br><br>But if you use a list's selecteditem, it works fine with bringing back the data.<br><br>So is there any way this can be dealt with?<br><br>Thank you<br><br><br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>dlambert replied on Monday, November 23, 2009</h2>If you're trying to access the contents of the text box directly in the Principal or Identity object's DP_Fetch, you're going to run into problems.<br /><br />See how the PTracker app grabs these values in the UI and sends them to the business library - ex:<br /><br />ProjectTracker.Library.Security.PTPrincipal.Login(this.UsernameTextBox.Text, this.PasswordTextBox.Text)<br /><br />Sorry if I'm not following you on this, but I think you're going to want to make sure you can get login working (in the easy case), and then add your extra attributes.<br /></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>strangerd replied on Tuesday, November 24, 2009</h2>The usual login code works fine with the two parameters, yes. So I would have to see what I can do to bring back things like the ID and full name of person, to the UI and UI code.<br><br>If you have any other suggestions please let me know.<br><br>Thanks for your help.<br></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
