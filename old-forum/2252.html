<html><header><title>CSLA 2.1.3 C# templates bugs</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>CSLA 2.1.3 C# templates bugs</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/2252.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>tiago posted on Wednesday, January 31, 2007</h2><P>1 -&nbsp;Templates.csproj is missing DynamicRootList.cs</P>
<P>2 - DynamicRootList.cs</P><FONT color=#0000ff size=2>
<P><FONT face="Courier New">public</FONT></FONT><FONT face="Courier New"><FONT size=2> </FONT><FONT color=#0000ff size=2>class</FONT><FONT size=2> </FONT><FONT color=#008080 size=2>DynamicRootList</FONT></FONT><FONT size=2><FONT face="Courier New"> : </FONT><FONT face="Courier New">EditableRootListBase&lt;</FONT></FONT><FONT face="Courier New"><FONT color=#008080 size=2>DynamicRootList</FONT><FONT size=2>, </FONT><FONT color=#008080 size=2>EditableRoot</FONT><FONT size=2>&gt;</FONT></FONT></P>
<P>VS 2005 claims it cannot resolve symbol EditableRootListBase</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>tiago replied on Wednesday, January 31, 2007</h2><P>BTW, it's easy to add templates</P>
<P>1 - open the solution file</P>
<P>2 - File -&gt; Export template<BR>as Project template<FONT size=2> (see EDIT note)</FONT></P>
<P>3 - Open each one of the project files</P>
<P>4 - For each file, File -&gt; Export template<BR>as Item template</P>
<P>It's also easy to use templates</P>
<P><STRONG>A - Project templates</STRONG></P>
<P>File -&gt; New -&gt; Project (look under C# - My templates) <FONT size=2>(see EDIT note)</FONT></P>
<P><STRONG>B - Item templates</STRONG></P>
<P>There are&nbsp;3 ways of using an item template:</P>
<P>- On Solution Explorer, right click on a project and Add -&gt; New Item</P>
<P>- Project -&gt; Add New Item</P>
<P>- just press&nbsp;CTRL+Shift+A</P>
<P>On either case, an <STRONG>Add New Item - Shell </STRONG>window&nbsp;will open. Scroll it down until the <STRONG>My templates</STRONG> area shows</P>
<P><FONT color=#ff0000>EDIT</FONT>: I think it doesn't make sense to use CSLA templates as a project template, but just as item templates.</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>DansDreams replied on Friday, February 02, 2007</h2><P>Wow!&nbsp; Thanks man.&nbsp;</P>
<P>Since I have tweaked my base business objects (inheriting from Rocky's), I looked into creating templates a while back and got lost in trying to find where to even start from the documentation.</P>
<P>Was I just looking in the wrong place or is this a new VS2005 feature?</P>
<P><BLOCKQUOTE><div><img src="/Themes/default/images/icon-quote.gif"> <strong>tiago:</strong></div><div></P>
<P>BTW, it's easy to add templates</P>
<P>&lt;snip&gt;</P></div></BLOCKQUOTE></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>tiago replied on Friday, February 02, 2007</h2><BLOCKQUOTE><div><img src="/Themes/default/images/icon-quote.gif"> <strong>DansDreams:</strong></div><div>
<P>Wow!&nbsp; Thanks man.&nbsp;</P>
<P>Since I have tweaked my base business objects (inheriting from Rocky's), I looked into creating templates a while back and got lost in trying to find where to even start from the documentation.</P>
<P>Was I just looking in the wrong place or is this a new VS2005 feature?</P>
<P></div></BLOCKQUOTE></P>
<P>I didn't install SP1 on VS 2005 so I guess this isn't a new feature. But then again I also started by looking in the wrong place ;)</P>
<P>BTW I re-think the whole thing, it doesn't make sense to use CSLA templates as project templates</P>
<P>Rocky, wasn't there a FAQ thread? I think the how-to-use-templates part should go there.</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Friday, February 02, 2007</h2>









 

 
  
 




<div class=Section1>

<p class=MsoNormal><span>There is an FAQ thread at the top of the forum. If you write up
a blurb I&#8217;ll gladly add it to the FAQ.<o:p></o:p></span></p>

<p class=MsoNormal><span><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span>Thanks, Rocky<o:p></o:p></span></p>

<p class=MsoNormal><span><o:p>&nbsp;</o:p></span></p>

<div>

<div>

<div>

<p class=MsoNormal><b><span>From:</span></b><span> tiago
[mailto:cslanet@lhotka.net] <br>
<b>Sent:</b> Friday, February 02, 2007 5:02 PM<br>
<b>To:</b> rocky@lhotka.net<br>
<b>Subject:</b> Re: [CSLA .NET] Using templates is easy<o:p></o:p></span></p>

</div>

</div>

<p class=MsoNormal><o:p>&nbsp;</o:p></p>

<blockquote>

<div>

<p class=MsoNormal><img id="_x0000_i1025" src="/Themes/default/images/icon-quote.gif"><strong>DansDreams:</strong><o:p></o:p></p>

</div>

<div>

<p>Wow!&nbsp; Thanks man.&nbsp;<o:p></o:p></p>

<p>Since I have tweaked my base business objects (inheriting from Rocky's), I
looked into creating templates a while back and got lost in trying to find
where to even start from the documentation.<o:p></o:p></p>

<p>Was I just looking in the wrong place or is this a new VS2005 feature?<o:p></o:p></p>

</div>

</blockquote>

<p>I didn't install SP1 on VS 2005 so I guess this isn't a new feature. But
then again I also started by looking in the wrong place ;)<o:p></o:p></p>

<p>BTW I re-think the whole thing, it doesn't make sense to use CSLA templates
as project templates<o:p></o:p></p>

<p>Rocky, wasn't there a FAQ thread? I think the how-to-use-templates part
should go there.<o:p></o:p></p>

<p class=MsoNormal><br>
<br>
<o:p></o:p></p>

</div>

</div>



</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>tiago replied on Friday, February 02, 2007</h2><P>Got the SVNed version of DynamicRootList.cs</P>
<P>VS 2005 still doesn't like it</P><FONT color=#0000ff size=2>
<P><FONT face="Courier New">using</FONT></FONT><FONT size=2><FONT face="Courier New"> System;<BR></FONT></FONT><FONT color=#0000ff size=2><FONT face="Courier New">using</FONT></FONT><FONT size=2><FONT face="Courier New"> System.Data.SqlClient;<BR></FONT></FONT><FONT color=#0000ff size=2><FONT face="Courier New">using</FONT></FONT><FONT size=2><FONT face="Courier New"> Csla;<BR></FONT></FONT></P>
<P><FONT size=2><FONT face="Courier New">[</FONT></FONT><FONT face="Courier New"><FONT color=#008080 size=2>Serializable</FONT><FONT size=2>()]<BR></FONT></FONT><FONT color=#0000ff size=2><FONT face="Courier New">public</FONT></FONT><FONT face="Courier New"><FONT size=2> </FONT><FONT color=#0000ff size=2>class</FONT><FONT size=2> </FONT><FONT color=#008080 size=2>DynamicRootList</FONT></FONT><FONT size=2><FONT face="Courier New"> : </FONT></FONT><FONT face="Courier New"><FONT color=#008080 size=2>EditableRootListBase</FONT><FONT size=2>&lt;EditableRoot&gt;</FONT></FONT></P>
<P><FONT size=2><FONT face="Courier New">On Build -&gt; Run Code Analysis on Templates</FONT> I get the error <STRONG>The type or namespace name 'EditableRoot' could not be found (are you missing a using directive or an assembly reference?)</STRONG></FONT></P>
<P><FONT size=2>VS2005 sugests adding:<BR><FONT face="Courier New"><FONT color=#0000ff size=2>using</FONT><FONT size=2> Templates;</P></FONT></FONT></FONT>
<P><FONT size=2><FONT size=2>another round of Code Analysis reports <STRONG>Inconsistent accessibility: base class 'Csla.EditableRootListBase&lt;Templates.EditableRoot&gt;' is less accessible than class 'DynamicRootList'</STRONG></P></FONT></FONT></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Friday, February 02, 2007</h2>






 

 
  
 




<div class=Section1>

<p class=MsoNormal><span>Fwiw, it isn&#8217;t my intent that the templates project
actually build. I only created it as a project for my own convenience when editing
the template files.<o:p></o:p></span></p>

<p class=MsoNormal><span><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span>Rocky <o:p></o:p></span></p>

<p class=MsoNormal><span><o:p>&nbsp;</o:p></span></p>

<div>

<div>

<div>

<p class=MsoNormal><b><span>From:</span></b><span> tiago
[mailto:cslanet@lhotka.net] <br>
<b>Sent:</b> Friday, February 02, 2007 6:05 PM<br>
<b>To:</b> rocky@lhotka.net<br>
<b>Subject:</b> Re: [CSLA .NET] RE: Using templates is easy<o:p></o:p></span></p>

</div>

</div>

<p class=MsoNormal><o:p>&nbsp;</o:p></p>

<p>Got the SVNed version of DynamicRootList.cs<o:p></o:p></p>

<p>VS 2005 still doesn't like it<o:p></o:p></p>

<p><span>using</span><span> System;<br>
<span>using</span> System.Data.SqlClient;<br>
<span>using</span> Csla;</span><o:p></o:p></p>

<p><span>[<span>Serializable</span>()]<br>
<span>public</span> <span>class</span> <span>DynamicRootList</span> : <span>EditableRootListBase</span>&lt;EditableRoot&gt;</span><o:p></o:p></p>

<p><span>On Build -&gt; Run
Code Analysis on Templates</span><span> I get the
error &quot;The type or namespace name 'EditableRoot' could not be found (are
you missing a using directive or an assembly reference?)&quot;</span><o:p></o:p></p>

<p><span>VS2005 sugests adding:<br>
</span><span>using</span><span> Templates;</span><o:p></o:p></p>

<p><span>another round</span><span><o:p></o:p></span></p>

<p class=MsoNormal><br>
<br>
<o:p></o:p></p>

</div>

</div>



</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>tiago replied on Saturday, February 10, 2007</h2><P>1-Add Templates to using section<BR>2-DynamicRootList shouldn't be public</P>
<P><BLOCKQUOTE><div><img src="/Themes/default/images/icon-quote.gif"> <strong>tiago:</strong></div><div><FONT color=#0000ff size=2> <FONT face="Courier New">using</FONT></FONT><FONT size=2><FONT face="Courier New"> System;<BR></FONT></FONT><FONT color=#0000ff size=2><FONT face="Courier New">using</FONT></FONT><FONT size=2><FONT face="Courier New"> System.Data.SqlClient;<BR></FONT></FONT><FONT color=#0000ff size=2><FONT face="Courier New">using</FONT></FONT><FONT size=2><FONT face="Courier New"> Csla;<BR></FONT></FONT><FONT size=2><FONT face="Courier New"><FONT color=#0000ff>using</FONT><FONT size=2> Templates;</FONT></FONT></FONT></P>
<P><FONT size=2><FONT face="Courier New">[</FONT></FONT><FONT face="Courier New"><FONT color=#008080 size=2>Serializable</FONT><FONT size=2>()]<BR></FONT></FONT><FONT face="Courier New"><FONT color=#0000ff size=2>class</FONT><FONT size=2> </FONT><FONT color=#008080 size=2>DynamicRootList</FONT></FONT><FONT size=2><FONT face="Courier New"> : </FONT></FONT><FONT face="Courier New"><FONT color=#008080 size=2>EditableRootListBase</FONT><FONT size=2>&lt;EditableRoot&gt;</FONT></FONT><FONT face="Times New Roman" size=3></div></BLOCKQUOTE></FONT></P>
<P>Now there is this problem with DataPortal_Fetch()</P><FONT size=2>
<P></FONT><FONT face="Courier New"><FONT color=#0000ff size=2>private</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>void</FONT></FONT><FONT face="Courier New" size=2> DataPortal_Fetch()<BR>{<BR></FONT><FONT face="Courier New"><FONT color=#008000 size=2>&nbsp;&nbsp;&nbsp; // TODO: load values<BR></FONT><FONT size=2>&nbsp;&nbsp;&nbsp; RaiseListChangedEvents = </FONT><FONT color=#0000ff size=2>false</FONT></FONT><FONT face="Courier New"><FONT size=2>;<BR></FONT><FONT color=#0000ff size=2>&nbsp;&nbsp;&nbsp; using</FONT><FONT size=2> (</FONT><FONT color=#008080 size=2>SqlDataReader</FONT><FONT size=2> dr = </FONT><FONT color=#0000ff size=2>null</FONT></FONT><FONT face="Courier New"><FONT size=2>)<BR>&nbsp;&nbsp;&nbsp; {<BR></FONT><FONT color=#0000ff size=2>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; while</FONT></FONT><FONT face="Courier New"><FONT size=2> (dr.Read())<BR>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; {<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; Add(</FONT><FONT color=#008080 size=2>EditableRoot</FONT></FONT><FONT face="Courier New"><FONT size=2>.GetEditableRoot(dr));<BR>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }<BR>&nbsp;&nbsp;&nbsp; }<BR></FONT><FONT size=2>&nbsp;&nbsp;&nbsp; RaiseListChangedEvents = </FONT><FONT color=#0000ff size=2>true</FONT></FONT><FONT size=2><FONT face="Courier New">;<BR>}</FONT></P>
<P></FONT><FONT size=2><FONT size=2>EditableRoot.GetEditableRoot expects an int argument, not a SqlDataReader argument. I guess we must overload EditableRoot.GetEditableRoot.</FONT></FONT></P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>tiago replied on Sunday, February 11, 2007</h2><P>Stupid me!</P>
<P><BLOCKQUOTE><div><img src="/Themes/default/images/icon-quote.gif"> <strong>insteaf of:</strong></div><div></P>
<P><FONT color=#0000ff size=2><FONT face="Courier New">using</FONT></FONT><FONT size=2><FONT face="Courier New"> System;<BR></FONT></FONT><FONT color=#0000ff size=2><FONT face="Courier New">using</FONT></FONT><FONT size=2><FONT face="Courier New"> System.Data.SqlClient;<BR></FONT></FONT><FONT color=#0000ff size=2><FONT face="Courier New">using</FONT></FONT><FONT size=2><FONT face="Courier New"> Csla;<BR></FONT></FONT><FONT size=2><FONT face="Courier New"><FONT color=#0000ff>using</FONT><FONT size=2> Templates;</FONT></FONT></FONT></P>
<P><FONT size=2><FONT face="Courier New" color=#0000ff>[</FONT></FONT><FONT face="Courier New"><FONT color=#008080 size=2>Serializable</FONT><FONT size=2><FONT color=#0000ff>()]</FONT><BR></FONT></FONT><FONT face="Courier New"><FONT color=#0000ff size=2>class</FONT><FONT size=2> </FONT><FONT color=#008080 size=2>DynamicRootList</FONT></FONT><FONT size=2><FONT face="Courier New"> : </FONT></FONT><FONT face="Courier New"><FONT color=#008080 size=2>EditableRootListBase<FONT color=#0000ff>&lt;</FONT><FONT color=#008080 size=2>EditableRoot</FONT><FONT color=#0000ff size=2>&gt;</FONT></FONT><FONT size=2><BR><FONT color=#0000ff>{<BR>...<BR>}</FONT></FONT></FONT><FONT face="Times New Roman" size=3></div></BLOCKQUOTE></FONT></P>
<P><BLOCKQUOTE><div><img src="/Themes/default/images/icon-quote.gif"> <strong>use:</strong></div><div></P><FONT color=#0000ff size=2><FONT face="Courier New"><FONT color=#0000ff size=2>
<P>using</FONT><FONT size=2><FONT color=#000000> System;<BR></FONT></FONT><FONT color=#0000ff size=2>using</FONT><FONT size=2><FONT color=#000000> System.Data.SqlClient;<BR></FONT></FONT><FONT color=#0000ff size=2>using</FONT><FONT size=2><FONT color=#000000> Csla;<BR></FONT></FONT></P>
<P><FONT color=#0000ff size=2>namespace</FONT><FONT size=2><FONT color=#000000> Templates<BR></FONT>{<BR>&nbsp;&nbsp;&nbsp;[</FONT><FONT color=#008080 size=2>Serializable</FONT><FONT size=2>()]<BR>&nbsp;&nbsp;&nbsp;internal </FONT><FONT color=#0000ff size=2>class</FONT><FONT size=2> </FONT><FONT color=#008080 size=2>DynamicRootList</FONT><FONT size=2> : </FONT><FONT color=#008080 size=2>EditableRootListBase</FONT><FONT size=2>&lt;</FONT><FONT color=#008080 size=2>EditableRoot</FONT><FONT size=2>&gt;<BR>&nbsp;&nbsp;&nbsp;{</FONT><FONT size=2><BR>....<BR>&nbsp;&nbsp;&nbsp;}<BR>}</FONT></FONT></FONT><FONT face="Times New Roman" size=3></div></BLOCKQUOTE></FONT></P>
<P>The namespace <FONT face="Courier New">Templates</FONT> will be replaced by the actual namespace you are working on.</P>
<P>The change to internal is for consistency sake as all templates use internal classes.</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>tiago replied on Saturday, February 24, 2007</h2><P>Csla 2.1 introduced <FONT face="Courier New">EditableRootListBase</FONT>.&nbsp;You can read the change log at &nbsp;<A href="http://www.lhotka.net/Article.aspx?area=4&amp;id=f12cc951-0452-42d1-96a6-cfa7656863b1">http://www.lhotka.net/Article.aspx?area=4&amp;id=f12cc951-0452-42d1-96a6-cfa7656863b1</A></P>
<P>This new Csla base class is fully documented on the 2.1 e-book.</P>
<P>&nbsp;</P>
<P>The template for DynamicRootList objects (as Rocky named objects that use the new base class) is buggy. After some atempts, I think I got it right.</P>
<P><BLOCKQUOTE><div><FONT face="Courier New"><FONT size=2><STRONG>DynamicRootList.cs<BR><BR></STRONG><FONT color=#0000ff>using</FONT></FONT></FONT><FONT face="Courier New"><FONT size=2> System;<BR><FONT color=#0000ff>using</FONT></FONT></FONT><FONT face="Courier New"><FONT size=2> System.Data.SqlClient;<BR><FONT color=#0000ff>using</FONT></FONT></FONT><FONT face="Courier New"><FONT size=2> Csla;<BR><BR></FONT><FONT color=#0000ff size=2>namespace</FONT></FONT><FONT face="Courier New"><FONT size=2> Templates<BR>{<BR>&nbsp;&nbsp;&nbsp;[</FONT><FONT color=#008080 size=2>Serializable</FONT></FONT><FONT face="Courier New"><FONT size=2>()]<BR>&nbsp;&nbsp;&nbsp;</FONT><FONT color=#0000ff size=2>internal</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>class</FONT><FONT size=2> </FONT><FONT color=#008080 size=2>DynamicRootList</FONT><FONT size=2> : </FONT><FONT color=#008080 size=2>EditableRootListBase</FONT><FONT size=2>&lt;</FONT><FONT color=#008080 size=2>EditableRoot</FONT></FONT><FONT face="Courier New" size=2>&gt;<BR>&nbsp;&nbsp;&nbsp;</FONT><FONT face="Courier New"><FONT size=2>{<BR><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT color=#0000ff size=2>#region</FONT></FONT><FONT face="Courier New"><FONT size=2> Authorization Rules<BR><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT color=#0000ff size=2>public</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>static</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>bool</FONT></FONT><FONT face="Courier New" size=2> CanGetObject()<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT face="Courier New"><FONT color=#008000 size=2>// TODO: customize to check user role<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT color=#0000ff size=2>return</FONT><FONT size=2> </FONT><FONT color=#008080 size=2>ApplicationContext</FONT><FONT size=2>.User.IsInRole(</FONT><FONT color=#800000 size=2>""</FONT></FONT><FONT size=2><FONT face="Courier New">);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<BR></FONT></FONT></P>
<P><FONT face="Courier New"><FONT color=#0000ff size=2>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>static</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>bool</FONT></FONT><FONT size=2><FONT face="Courier New"> CanEditObject()<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT face="Courier New">{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT></FONT><FONT color=#008000 size=2><FONT face="Courier New">// TODO: customize to check user role<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT></FONT><FONT face="Courier New"><FONT color=#0000ff size=2>return</FONT><FONT size=2> </FONT><FONT color=#008080 size=2>ApplicationContext</FONT><FONT size=2>.User.IsInRole(</FONT><FONT color=#800000 size=2>""</FONT></FONT><FONT size=2><FONT face="Courier New">);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT face="Courier New">}<BR><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT></FONT><FONT color=#0000ff size=2><FONT face="Courier New">#endregion<BR><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT face="Courier New">#region</FONT></FONT><FONT size=2><FONT face="Courier New"> Factory Methods<BR><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT></FONT><FONT face="Courier New"><FONT color=#0000ff size=2>public</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>static</FONT><FONT size=2> </FONT><FONT color=#008080 size=2>DynamicRootList</FONT></FONT><FONT size=2><FONT face="Courier New"> NewDynamicRootList()<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT face="Courier New">{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT></FONT><FONT face="Courier New"><FONT color=#0000ff size=2>return</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>new</FONT><FONT size=2> </FONT><FONT color=#008080 size=2>DynamicRootList</FONT></FONT><FONT size=2><FONT face="Courier New">();<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT face="Courier New">}<BR><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT></FONT><FONT face="Courier New"><FONT color=#0000ff size=2>public</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>static</FONT><FONT size=2> </FONT><FONT color=#008080 size=2>DynamicRootList</FONT></FONT><FONT size=2><FONT face="Courier New"> GetDynamicRootList()<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT face="Courier New">{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT></FONT><FONT face="Courier New"><FONT color=#0000ff size=2>return</FONT><FONT size=2> </FONT><FONT color=#008080 size=2>DataPortal</FONT><FONT size=2>.Fetch&lt;</FONT><FONT color=#008080 size=2>DynamicRootList</FONT></FONT><FONT size=2><FONT face="Courier New">&gt;();<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT face="Courier New">}<BR><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT></FONT><FONT face="Courier New" color=#0000ff size=2>private</FONT><FONT size=2><FONT face="Courier New"> DynamicRootList()<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT face="Courier New">{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT></FONT><FONT color=#008000 size=2><FONT face="Courier New">// require use of factory methods<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT></FONT><FONT face="Courier New" size=2>}<BR><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT color=#0000ff size=2><FONT face="Courier New">#endregion<BR><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT face="Courier New">#region</FONT></FONT><FONT size=2><FONT face="Courier New"> Data Access<BR><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT></FONT><FONT face="Courier New"><FONT color=#0000ff size=2>private</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>void</FONT></FONT><FONT size=2><FONT face="Courier New"> DataPortal_Fetch()<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT face="Courier New">{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT></FONT><FONT color=#008000 size=2><FONT face="Courier New">// TODO: load values<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT></FONT><FONT size=2><FONT face="Courier New">RaiseListChangedEvents = </FONT></FONT><FONT face="Courier New" color=#0000ff size=2>false</FONT><FONT size=2><FONT face="Courier New">;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT></FONT><FONT face="Courier New"><FONT color=#0000ff size=2>using</FONT><FONT size=2> (</FONT><FONT color=#008080 size=2>SqlDataReader</FONT><FONT size=2> dr = </FONT><FONT color=#0000ff size=2>null</FONT></FONT><FONT size=2><FONT face="Courier New">)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT face="Courier New">{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT></FONT><FONT face="Courier New" color=#0000ff size=2>while</FONT><FONT size=2><FONT face="Courier New"> (dr.Read())<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT face="Courier New">{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT face="Courier New">Add(</FONT></FONT><FONT face="Courier New" color=#008080 size=2>EditableRoot</FONT><FONT size=2><FONT face="Courier New">.GetEditableRoot(dr));<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT face="Courier New">}<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT face="Courier New">}<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT face="Courier New">RaiseListChangedEvents = </FONT></FONT><FONT face="Courier New" color=#0000ff size=2>true</FONT><FONT size=2><FONT face="Courier New">;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT face="Courier New">}<BR><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT></FONT><FONT face="Courier New" color=#0000ff size=2>#endregion<BR><BR>&nbsp;&nbsp;&nbsp;</FONT><FONT size=2><FONT face="Courier New">}<BR></FONT><FONT face="Courier New">}<BR></FONT></FONT></div></BLOCKQUOTE></P>
<P>The problem is <FONT face="Courier New" size=2>DataPortal_Fetch</FONT> calls <FONT size=2><FONT face="Courier New"><FONT color=#008080>EditableRoot</FONT>.GetEditableRoot</FONT></FONT> with a <FONT face="Courier New" color=#008080 size=2>SqlDataReader</FONT> type parameter while that method is expecting an <FONT size=2><FONT face="Courier New"><FONT color=#0000ff>int</FONT></FONT></FONT>&nbsp;parameter. On <FONT face="Courier New" color=#000000 size=2>EditableRoot.cs</FONT> we need an overload to <FONT face="Courier New" size=2>GetEditableRoot</FONT>&nbsp;and some other new methods. All changes are marked with a red side bar.</P>
<P><BLOCKQUOTE><div><FONT size=2><FONT face="Courier New"><STRONG>EditableRoot.cs<BR><BR></STRONG><FONT color=#0000ff>using</FONT></FONT></FONT><FONT face="Courier New" size=2> System;<BR></FONT><FONT color=#0000ff><FONT face="Courier New" color=#0000ff size=2>using</FONT><FONT size=2><FONT face="Courier New"><FONT color=#000000> System.Collections.Generic;<BR></FONT><FONT color=#0000ff>using</FONT></FONT></FONT><FONT size=2><FONT face="Courier New"><FONT color=#000000> System.Text;<BR><FONT color=#ff0000>|</FONT> <FONT color=#0000ff>using</FONT> System.Data.SqlClient;<BR></FONT></FONT></FONT></FONT><FONT face="Courier New"><FONT size=2><FONT color=#0000ff>using</FONT></FONT></FONT><FONT face="Courier New"><FONT size=2> Csla;<BR><BR><FONT color=#0000ff>namespace</FONT></FONT></FONT><FONT face="Courier New" size=2> Templates<BR></FONT><FONT face="Courier New"><FONT size=2>{<BR>&nbsp;&nbsp;&nbsp;[<FONT color=#008080>Serializable</FONT></FONT></FONT><FONT face="Courier New"><FONT size=2>()]<BR><FONT color=#0000ff>&nbsp;&nbsp;&nbsp;</FONT><FONT color=#0000ff>class</FONT> <FONT color=#008080>EditableRoot</FONT> : <FONT color=#008080>BusinessBase</FONT>&lt;<FONT color=#008080>EditableRoot</FONT></FONT></FONT><FONT face="Courier New" size=2>&gt;<BR></FONT><FONT face="Courier New"><FONT size=2>&nbsp;&nbsp;&nbsp;{<BR><BR><FONT color=#0000ff>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#region</FONT></FONT></FONT><FONT face="Courier New" size=2> Business Methods<BR><BR></FONT><FONT face="Courier New"><FONT size=2><FONT color=#008000>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// TODO: add your own fields, properties and methods<BR><BR></FONT><FONT color=#0000ff>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;private</FONT> <FONT color=#0000ff>int</FONT></FONT></FONT><FONT size=2><FONT face="Courier New"> _id;<BR><FONT color=#ff0000>|</FONT>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT color=#0000ff>private</FONT> <FONT color=#0000ff>string</FONT> _data = <FONT color=#0000ff>string</FONT>.Empty;<BR></FONT></FONT><FONT face="Courier New" size=2><BR></FONT><FONT color=#0000ff><FONT face="Courier New" size=2>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public</FONT></FONT><FONT size=2><FONT face="Courier New"> <FONT color=#0000ff>int</FONT></FONT></FONT><FONT face="Courier New" size=2> id<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT size=2><FONT face="Courier New">{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[System.Runtime.CompilerServices.<FONT color=#008080>MethodImpl</FONT>(System.Runtime.CompilerServices.<FONT color=#008080>MethodImplOptions</FONT></FONT></FONT><FONT face="Courier New" size=2>.NoInlining)]<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT color=#0000ff><FONT face="Courier New" size=2>get<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT></FONT><FONT face="Courier New"><FONT size=2>{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CanReadProperty(<FONT color=#0000ff>true</FONT></FONT></FONT><FONT face="Courier New"><FONT size=2>);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT color=#0000ff>return</FONT></FONT></FONT><FONT face="Courier New" size=2> _id;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT face="Courier New" size=2>}<BR><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[System.Runtime.CompilerServices.<FONT color=#008080>MethodImpl</FONT>(System.Runtime.CompilerServices.<FONT color=#008080>MethodImplOptions</FONT>.NoInlining)]<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT face="Courier New"><FONT size=2><FONT color=#0000ff>set<BR></FONT>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CanWriteProperty(<FONT color=#0000ff>true</FONT>);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT color=#0000ff>if</FONT> (_id != <FONT color=#0000ff>value</FONT>)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_id = <FONT color=#0000ff>value</FONT>;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PropertyHasChanged();<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<BR></FONT></FONT><FONT face="Courier New"><FONT size=2>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<BR><BR></FONT></FONT><FONT face="Courier New" size=2><FONT color=#ff0000>|<FONT color=#0000ff>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public string</FONT> <FONT color=#000000>Data</FONT><BR></FONT></FONT><FONT face="Courier New" size=2><FONT color=#ff0000>|</FONT>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT face="Courier New"><FONT><FONT size=2>{<BR><FONT color=#ff0000>|</FONT>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[System.Runtime.CompilerServices.<FONT color=#008080>MethodImpl</FONT>(System.Runtime.CompilerServices.<FONT color=#008080>MethodImplOptions</FONT></FONT></FONT></FONT><FONT face="Courier New" size=2>.NoInlining)]<BR><FONT color=#ff0000>|</FONT>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT color=#0000ff><FONT face="Courier New" size=2>get<BR><FONT color=#ff0000>|</FONT><FONT color=#000000>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT>&nbsp;&nbsp;&nbsp;</FONT></FONT><FONT face="Courier New"><FONT><FONT size=2>{<BR><FONT color=#ff0000>|</FONT>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CanReadProperty(<FONT color=#0000ff>true</FONT></FONT></FONT></FONT><FONT face="Courier New"><FONT><FONT size=2>);<BR><FONT color=#ff0000>|</FONT>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT color=#0000ff>return</FONT></FONT></FONT></FONT><FONT face="Courier New" size=2> _data;<BR><FONT color=#ff0000>|</FONT>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT face="Courier New" size=2>}<BR><FONT color=#ff0000>|</FONT>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<BR><BR></FONT><FONT face="Courier New"><FONT size=2>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT color=#0000ff>protected</FONT> <FONT color=#0000ff>override</FONT> <FONT color=#0000ff>object</FONT></FONT></FONT><FONT face="Courier New" size=2> GetIdValue()<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT face="Courier New"><FONT size=2>{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT color=#0000ff>return</FONT></FONT></FONT><FONT face="Courier New" size=2> _id;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT face="Courier New" size=2>}<BR><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT color=#0000ff><FONT face="Courier New" size=2>#endregion<BR><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#region</FONT></FONT><FONT size=2><FONT face="Courier New"> Validation Rules<BR><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT color=#0000ff>protected</FONT> <FONT color=#0000ff>override</FONT> <FONT color=#0000ff>void</FONT></FONT></FONT><FONT face="Courier New" size=2> AddBusinessRules()<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT face="Courier New" size=2>{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT color=#008000><FONT face="Courier New" size=2>// TODO: add validation rules<BR></FONT></FONT><FONT color=#008000><FONT face="Courier New" size=2>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//ValidationRules.AddRule(null, "");<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT></FONT><FONT face="Courier New" size=2>}<BR><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT color=#0000ff><FONT face="Courier New" size=2>#endregion<BR><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#region</FONT></FONT><FONT size=2><FONT face="Courier New"> Authorization Rules<BR><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT color=#0000ff>protected</FONT> <FONT color=#0000ff>override</FONT> <FONT color=#0000ff>void</FONT></FONT></FONT><FONT face="Courier New" size=2> AddAuthorizationRules()<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT face="Courier New" size=2>{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT color=#008000><FONT face="Courier New" size=2>// TODO: add authorization rules<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT></FONT><FONT color=#008000><FONT face="Courier New" size=2>//AuthorizationRules.AllowWrite("", "");<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT></FONT><FONT size=2><FONT face="Courier New">}<BR><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT color=#0000ff>public</FONT> <FONT color=#0000ff>static</FONT> <FONT color=#0000ff>bool</FONT></FONT></FONT><FONT face="Courier New" size=2> CanAddObject()<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT face="Courier New" size=2>{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT color=#008000><FONT face="Courier New" size=2>// TODO: customize to check user role<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT></FONT><FONT size=2><FONT face="Courier New"><FONT color=#008000>//return ApplicationContext.User.IsInRole("");<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT color=#0000ff>return</FONT> <FONT color=#0000ff>true</FONT></FONT></FONT><FONT face="Courier New" size=2>;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT size=2><FONT face="Courier New">}<BR><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT color=#0000ff>public</FONT> <FONT color=#0000ff>static</FONT> <FONT color=#0000ff>bool</FONT></FONT></FONT><FONT face="Courier New" size=2> CanGetObject()<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT face="Courier New" size=2>{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT color=#008000><FONT face="Courier New" size=2>// TODO: customize to check user role<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT></FONT><FONT size=2><FONT face="Courier New"><FONT color=#008000>//return ApplicationContext.User.IsInRole("");<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT color=#0000ff>return</FONT> <FONT color=#0000ff>true</FONT></FONT></FONT><FONT face="Courier New" size=2>;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT size=2><FONT face="Courier New">}<BR><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT color=#0000ff>public</FONT> <FONT color=#0000ff>static</FONT> <FONT color=#0000ff>bool</FONT></FONT></FONT><FONT face="Courier New" size=2> CanEditObject()<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT face="Courier New" size=2>{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT color=#008000><FONT face="Courier New" size=2>// TODO: customize to check user role<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT></FONT><FONT face="Courier New"><FONT size=2><FONT color=#008000>//return ApplicationContext.User.IsInRole("");<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT color=#0000ff>return</FONT> <FONT color=#0000ff>true</FONT></FONT></FONT><FONT face="Courier New" size=2>;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT face="Courier New"><FONT size=2>}<BR><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT color=#0000ff>public</FONT> <FONT color=#0000ff>static</FONT> <FONT color=#0000ff>bool</FONT></FONT></FONT><FONT face="Courier New" size=2> CanDeleteObject()<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT face="Courier New" size=2>{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT face="Courier New" color=#008000 size=2>// TODO: customize to check user role<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT face="Courier New"><FONT size=2><FONT color=#008000>//return ApplicationContext.User.IsInRole("");<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT color=#0000ff>return</FONT> <FONT color=#0000ff>true</FONT></FONT></FONT><FONT face="Courier New" size=2>;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<BR><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT face="Courier New" color=#0000ff size=2>#endregion<BR><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#region</FONT><FONT face="Courier New"><FONT size=2> Factory Methods<BR><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT color=#0000ff>public</FONT> <FONT color=#0000ff>static</FONT> <FONT color=#008080>EditableRoot</FONT></FONT></FONT><FONT face="Courier New"><FONT size=2> NewEditableRoot()<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT color=#0000ff>return</FONT> <FONT color=#008080>DataPortal</FONT>.Create&lt;<FONT color=#008080>EditableRoot</FONT></FONT></FONT><FONT face="Courier New"><FONT size=2>&gt;();<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<BR><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT color=#0000ff>public</FONT> <FONT color=#0000ff>static</FONT> <FONT color=#008080>EditableRoot</FONT> GetEditableRoot(<FONT color=#0000ff>int</FONT></FONT></FONT><FONT face="Courier New"><FONT size=2> id)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT color=#0000ff>return</FONT> <FONT color=#008080>DataPortal</FONT>.Fetch&lt;<FONT color=#008080>EditableRoot</FONT>&gt;(<FONT color=#0000ff>new</FONT> <FONT color=#008080>Criteria</FONT></FONT></FONT><FONT face="Courier New"><FONT size=2>(id));<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<BR><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT color=#0000ff>public</FONT> <FONT color=#0000ff>static</FONT> <FONT color=#008080>EditableRoot</FONT> GetEditableRoot(<FONT color=#008080>SqlDataReader</FONT></FONT></FONT><FONT face="Courier New"><FONT size=2> dr)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT color=#0000ff>return</FONT> <FONT color=#0000ff>new</FONT> <FONT color=#008080>EditableRoot</FONT></FONT></FONT><FONT face="Courier New"><FONT size=2>(dr);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<BR><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT color=#0000ff>public</FONT> <FONT color=#0000ff>static</FONT> <FONT color=#0000ff>void</FONT> DeleteEditableRoot(<FONT color=#0000ff>int</FONT></FONT></FONT><FONT face="Courier New"><FONT size=2> id)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT color=#008080>DataPortal</FONT>.Delete(<FONT color=#0000ff>new</FONT> <FONT color=#008080>Criteria</FONT></FONT></FONT><FONT face="Courier New"><FONT size=2>(id));<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<BR><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT color=#0000ff>private</FONT></FONT></FONT><FONT face="Courier New" size=2> EditableRoot()<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<BR></FONT><FONT face="Courier New" color=#008000 size=2>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/* Require use of factory methods */<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT face="Courier New"><FONT size=2>}</FONT></FONT></P>
<P><FONT face="Courier New"><FONT><FONT size=2><FONT color=#0000ff><FONT color=#ff0000>|</FONT><FONT color=#000000>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT>private</FONT> EditableRoot(<FONT color=#008080>SqlDataReader</FONT></FONT></FONT></FONT><FONT face="Courier New"><FONT size=2> dr)<BR><FONT color=#ff0000>|</FONT>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<BR><FONT color=#ff0000>|</FONT>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Fetch(dr);<BR><FONT color=#ff0000>|</FONT>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</FONT></FONT></P>
<P><FONT face="Courier New" color=#0000ff size=2>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#endregion<BR><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#region</FONT><FONT face="Courier New"><FONT size=2> Data Access<BR><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<FONT color=#008080>Serializable</FONT></FONT></FONT><FONT face="Courier New" size=2>()]<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT color=#0000ff>private</FONT> <FONT color=#0000ff>class</FONT> </FONT><FONT face="Courier New" color=#008080 size=2>Criteria<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT face="Courier New"><FONT size=2>{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT color=#0000ff>private</FONT> <FONT color=#0000ff>int</FONT></FONT></FONT><FONT face="Courier New"><FONT size=2> _id;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT color=#0000ff>public</FONT> <FONT color=#0000ff>int</FONT></FONT></FONT><FONT face="Courier New"><FONT size=2> Id<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT color=#0000ff>get</FONT> { <FONT color=#0000ff>return</FONT></FONT></FONT><FONT face="Courier New"><FONT size=2> _id; }<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<BR><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT color=#0000ff>public</FONT> Criteria(<FONT color=#0000ff>int</FONT></FONT></FONT><FONT face="Courier New"><FONT size=2> id)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_id = id;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<BR><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT color=#0000ff>protected</FONT> <FONT color=#0000ff>override</FONT> <FONT color=#0000ff>void</FONT></FONT></FONT><FONT face="Courier New" size=2> DataPortal_Create()<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT face="Courier New" color=#008000 size=2>// TODO: load default values<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT face="Courier New"><FONT size=2>}<BR><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT color=#0000ff>private</FONT> <FONT color=#0000ff>void</FONT> DataPortal_Fetch(<FONT color=#008080>Criteria</FONT></FONT></FONT><FONT face="Courier New" size=2> criteria)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT face="Courier New" color=#008000 size=2>// TODO: load values<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT face="Courier New"><FONT size=2>}<BR><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT color=#0000ff>protected</FONT> <FONT color=#0000ff>override</FONT> <FONT color=#0000ff>void</FONT></FONT></FONT><FONT face="Courier New" size=2> DataPortal_Insert()<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT face="Courier New" color=#008000 size=2>// TODO: insert values<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT face="Courier New"><FONT size=2>}<BR><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT color=#0000ff>protected</FONT> <FONT color=#0000ff>override</FONT> <FONT color=#0000ff>void</FONT></FONT></FONT><FONT face="Courier New" size=2> DataPortal_Update()<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT face="Courier New" color=#008000 size=2>// TODO: update values<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT face="Courier New"><FONT size=2>}<BR><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT color=#0000ff>protected</FONT> <FONT color=#0000ff>override</FONT> <FONT color=#0000ff>void</FONT></FONT></FONT><FONT face="Courier New"><FONT size=2> DataPortal_DeleteSelf()<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DataPortal_Delete(<FONT color=#0000ff>new</FONT> <FONT color=#008080>Criteria</FONT></FONT></FONT><FONT face="Courier New"><FONT size=2>(_id));<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<BR><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT color=#0000ff>private</FONT> <FONT color=#0000ff>void</FONT> DataPortal_Delete(<FONT color=#008080>Criteria</FONT></FONT></FONT><FONT face="Courier New" size=2> criteria)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT face="Courier New" color=#008000 size=2>// TODO: delete values<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT face="Courier New"><FONT size=2>}<BR><BR></FONT></FONT><FONT face="Courier New" size=2><FONT color=#ff0000>|<FONT color=#0000ff>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;private void</FONT> <FONT color=#000000>Fetch</FONT><FONT color=#000000>(</FONT><FONT color=#7fffd4><FONT color=#008080>SqlDataReader</FONT></FONT><FONT color=#000000><FONT face="Courier New" size=2> </FONT></FONT><FONT color=#000000>dr)<BR></FONT>|</FONT>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<BR><FONT color=#ff0000>|</FONT>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT face="Courier New" color=#008000 size=2>// load values<BR><FONT color=#000000><FONT color=#ff0000>|</FONT>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_id = dr.GetInt32(0);<BR><FONT color=#ff0000>|</FONT>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_data = dr.GetString(1);<BR><FONT color=#ff0000>|</FONT>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<BR></FONT></FONT><FONT face="Courier New"><FONT size=2><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT></FONT><FONT face="Courier New" color=#0000ff size=2>#endregion<BR></FONT><FONT face="Courier New" size=2>&nbsp;&nbsp;&nbsp;}<BR>}<BR></FONT></div></BLOCKQUOTE></P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>gdk9am replied on Wednesday, January 31, 2007</h2>To solve point number 2, add "using Csla;:" to "using" region</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>tiago replied on Wednesday, January 31, 2007</h2><P><BLOCKQUOTE><div><img src="/Themes/default/images/icon-quote.gif"> <strong>gdk9am:</strong></div><div>To solve point number 2, add "using Csla;:" to "using" region</div></BLOCKQUOTE></P>
<P>VS 2005 reports: "Incorrect number of type parameters in reference to class 'Csla.EditableRootListBase&lt;T&gt;'</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Wednesday, January 31, 2007</h2>Thanks for catching that, I've fixed the project reference and code in svn, so it will be in the next release.</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>gdk9am replied on Wednesday, January 31, 2007</h2>In your CSLA .NET Version 2.1 Handbook C# version, the&nbsp;class template of "EditableRootListBase" also has the smae problem</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Wednesday, January 31, 2007</h2>Yes, that's the one we're talking about I believe.</div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
