<html><header><title>Some questions about Project Tracker</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Some questions about Project Tracker</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/1481.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>OregonCreative posted on Friday, October 13, 2006</h2>PT is a great place to start for me because I have a similar project.&nbsp; A couple of design questions.<br><br>Imagine if I wanted to have a collection of Projects that matched a specific set of criteria such as:<br><br>Projects that were started between 1/1/2006 and 3/31/2006 by resource ID X in the role of X.<br><br>I would like to work with these projects in the UI.&nbsp; I would like to be able to report on this set of projects and also save the filter criteria for re-use later.<br><br>Basically, the "filter" I have used in the past is a SQL statement that is applied to a dataset object.&nbsp; I usually provide a "wizard" type interface to let a user define a filter and a simple way to manage the filters.<br><br>What would be the best approach for this in CSLA?&nbsp; I suppose I could modify the factory method of the Project List object and pass it a SQL query. Perhaps overload it and pass in a new type 'FilterObject' and then apply it.<br><br>Do either of these sound reasonable?&nbsp; I would appreciate your thoughts.&nbsp; Keep in mind that I am also interested in running reports based on the currently active filter.<br><br>Thanks Rocky! Great stuff in the latest book.<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>figuerres replied on Friday, October 13, 2006</h2><P>I have been thinking of something along these lines ...</P>
<P>on one hand you could have "simple crtieria" like CSLA passes most of the time</P>
<P>x=1,y=2,z="foo" and in that case you could just save an xml snip with in the database and serialize / de-serialize that.</P>
<P>or you could get more involved and have a "complex criteria" class that might have something like:</P>
<P>Name - string <BR>Operator - Enum list of common op's like ( =, &gt;, &lt; ,!, Like, IN)<BR>Value - string</P>
<P>and then make the Criteria class be a List Of CriteriaExpressions</P>
<P>you could then store them in sql as xml also....</P>
<P>then you could get even more indepth with things like AND / OR and () nesting</P>
<P>but then you are really getting into a lot of work....</P>
<P>I think 90% would be coved with x&gt;21 AND y in (21,34,56) AND Date &lt; '1/2/3'</P>
<P>assume all expersions and "ANDED"&nbsp; and you could pass a string to SQL to have a proc do a dynamic select </P>
<P>exec 'Select ......&nbsp; WHERE ' + @params</P>
<P>just watch out for SQL injections!!!!</P>
<P>&nbsp;</P>
<P>&nbsp;</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>OregonCreative replied on Friday, October 13, 2006</h2>Joins pose another interesting issue but could be handled by SPs as well.&nbsp; That's probably the way to go.&nbsp; thanks for your advice.<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Monday, October 16, 2006</h2>Searching is a use case in and of it self.&nbsp; Therefore, you should build business objects flexible enough to all the client program to specify the criteria you want.&nbsp; Search this forum, this question has been asked many times before.<br><br>Build objects to represent your search, then have your data access code correctly interperate the values in these objects to build the sql string.<br><br>Do NOT under any circumstances having the UI pass Sql to the business layer.&nbsp; Doing so violates the n-teir design in a big way.&nbsp; Your UI should not need to change because the database changes.&nbsp; That's the goal of the business layer, to hide such details.<br><br>Check out <a HREF="/forums/thread/1078.aspx">this thread</a> to get you started thinking on some ideas.&nbsp; But just remember, this is a use case, just like any other.&nbsp; You'll have to build business objects to meet the requirements.<br><br>HTH<br>Andy<br></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
