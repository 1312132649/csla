<html><header><title>Custom database connection string and persistent context</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Custom database connection string and persistent context</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/9077.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>chrisdot posted on Monday, June 14, 2010</h2><p>Hi All,</p>
<p>I&#39;m having a special request. I&#39;m not a&nbsp;real .NET beginner, but I&#39;m quite&nbsp;new to Web technologies like&nbsp;ASP, WCF&nbsp;and so on. </p>
<p>I&#39;ve developped an additionnal web module to our main product. (using silverlight and of course CSLA) I didn&#39;t go into deep details&nbsp;regarding WCF and&nbsp;dataportal, as I&#39;m not an expert. I just took the example given and built everything up on that, and it is doing what I planned.</p>
<p>But now, it is time to put this into production. So, here is my problem: I&#39;m trying&nbsp;to get the DB connection settings in the main settings file of our main application. It is not a standard App.config nor Web.config (for various reasons), but a complex xml file that is editable with an external application to configure the whole product. And of course, the connection string is taken from that.&nbsp;We already have the library to extract the required data. My question is: where should I plug in that piece of code ? I don&#39;t want to call this piece of code each time I have to&nbsp;access data from the DB (fetch/update/etc...). Is there a way to get this value into a kind of persistent cache ? Basically my idea would be to have that code called once, at the first call to a&nbsp; data&nbsp;request, but after it would be cached...</p>
<p>(I&#39;m using EF4 as the DAL)</p>
<p>I had a look on WCF, because I suspect the answer to be in that area, like the attribute:</p>
<p><span lang="EN-US" style="font-family:Consolas;font-size:9.5pt;mso-fareast-font-family:Calibri;mso-fareast-theme-font:minor-latin;mso-bidi-font-family:&#39;Times New Roman&#39;;mso-ansi-language:EN-US;mso-fareast-language:FR;mso-bidi-language:AR-SA;">[<span style="color:#2b91af;">ServiceBehavior</span>(..<span lang="EN-US" style="font-family:Consolas;font-size:9.5pt;mso-ansi-language:EN-US;">InstanceContextMode = <span style="color:#2b91af;">InstanceContextMode</span>.Single)]</span></span></p>
<p class="MsoNormal" style="margin:0cm 0cm 0pt;"><span lang="EN-US" style="font-family:Consolas;font-size:9.5pt;mso-ansi-language:EN-US;">Do you have any ideas ?</span></p>
<p class="MsoNormal" style="margin:0cm 0cm 0pt;"><span lang="EN-US" style="font-family:Consolas;font-size:9.5pt;mso-ansi-language:EN-US;">Thank you,</span></p>
<p class="MsoNormal" style="margin:0cm 0cm 0pt;"><span lang="EN-US" style="font-family:Consolas;font-size:9.5pt;mso-ansi-language:EN-US;">Christophe</span></p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>chrisdot replied on Tuesday, June 15, 2010</h2><p>Is there no way to plug in a custom DB context retrieval&nbsp;on server side? (basically just to provide a custom located connection string)</p>
<p>I&#39;m not sure about the vocabulary to be used, but what I&#39;m trying to do, is just to provide a DB connection that I could reuse on each request, instead of having to get this configuration settings again.</p>
<p>If you have any idea, I&#39;m just looking for leads.</p>
<p>Tanhk you,</p>
<p>Christophe</p>
<p>&nbsp;</p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
