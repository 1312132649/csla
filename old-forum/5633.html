<html><header><title>CslaDataProvider Async save</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>CslaDataProvider Async save</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/5633.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 posted on Monday, October 20, 2008</h2>Hi,<br><br>I was wondering if anyone had any thoughts on making Save on the CslaDataProvider honor the IsAsynchronous flag.&nbsp; I'd like to do this so I can disable / enable the control while the save is running.&nbsp; The problem is that while I execute code to disable the form, you can't tell because the Save immediately blocks the UI thread, so it looks like the application has hung.<br><br>Thanks<br>Andy<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Monday, October 20, 2008</h2>I'm working on doing this change myself, and I'm wondering about something.<br><br>Using BeginQuery as an example..<br><br>IsBusy is set to true, then if the operation should be Asyn, the query method queued on the a new thread.&nbsp; If it's not, DoQuery is called on the same thread, and then IsBusy is set (which is after OnQueryFinished is called).<br><br>However, DoQuery will set IsBusy to false prior to calling OnQueryFinished if it detect it's not on the dispatcher thread.&nbsp; <br><br>Any reason for this?&nbsp; Or could IsBusy = false be moved out of the if block and the DoQuery method could have the code removed?<br><br>Edit:&nbsp; Figured it out.. if it sets it after the if block, IsBusy will be false even though the query thread is still running.<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Monday, October 20, 2008</h2><P>It may be possible to put Save on a background thread.</P>
<P>We looked at putting Cancel/AddNew/Remove on background threads - and <EM>that</EM> is really hard, because the object is still bound to the UI and you get nasty cross-threading issues.</P>
<P>Save should work as long as the AutoCloneOnUpdate option is true, because the save occurs on the clone and should be safe.</P>
<P>I'm open to doing this in 3.6.1 - it is a good idea (if it works).</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Monday, October 20, 2008</h2>I think I have an implementation; I'll post back if it seems to work.<br></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
