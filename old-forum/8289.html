<html><header><title>Property not marked as serializable error since upgrading to 3.5.1</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Property not marked as serializable error since upgrading to 3.5.1</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/8289.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>Marjon1 posted on Tuesday, January 05, 2010</h2>I've moved our CSLA version from 3.5.0 to 3.5.1 and am now getting an error that I cannot determine the cause of, no matter how much digging into the framework I do.<br /><br />The error received is:<br />     Type 'Csla.PropertyInfo`1[[Sybiz.Visipay.Platform.Business.Payroll.PayDates,<br />      Sybiz.Visipay.Platform, Version=1.0.3658.24857, Culture=neutral, PublicKeyToken=null]]' <br />      in Assembly 'Csla, Version=3.6.0.0, Culture=neutral, PublicKeyToken=93be5fdc093e4c30' is not marked as serializable. <b>(ignore the fact that it says 3.6, same error on 3.5.1)</b><br /><br />The parent class has the property declared as follows:<br /><br /><i>Private _payDate As PayDates = Nothing<br />Private _payDateProperty As PropertyInfo(Of PayDates) = RegisterProperty(Of PayDates)(New PropertyInfo(Of PayDates)("PayDateObj"))<br />Public Property PayDateObj() As PayDates<br />Get<br />If (_payDate Is Nothing) Then<br />_payDate = PayDates.GetDates()<br />End If<br />Return GetProperty(Of PayDates)(_payDateProperty, _payDate)<br />End Get<br />Set(ByVal value As PayDates)<br />    SetProperty(Of PayDates)(_payDateProperty, _payDate, value)<br />End Set<br />End Property </i><br /><br />The PayDates class has had all actual code removed and all properities just returning hard-coded values (for now) and is declared as such:<br /><br /><i> [Serializable()] _ <br />  Public Class PayDates<br />    Inherits VisipayBusinessBase(Of PayDates)<br /><br />        'Code missing to cut down on post size, doesn't do very much at all<br /><br />  End Class </i><br /><br />The error actually occurs when the object is attached to a binding source as part of the CopyState method when it attempts to serialize the propertyInfo buffer.<br /><br />The really odd thing is that if I change the CSLA version back to 3.5.0 (previous version we used) then it all works fine and I cannot see anything in the changelog that would suggest what could be causing this problem to appear.<br />I've had to adjust the code a little bit for it to be presentable within the editor, but it does compile and run without modification, so any silly things like [ can be ignored.<br /><br />Thanks for any responses in advance and apologies about the code formatting, can never get it to look good.<br /><br />John<br /></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Tuesday, January 05, 2010</h2>PropertyInfo(Of T) fields must be static - you are declaring it as an instance field. I don't know why it ever worked, this has never been legal.</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Marjon1 replied on Wednesday, January 06, 2010</h2>I can't believe that I couldn't see that!<br /><br />Thanks Rocky, I too am confused how this ever worked. <br />Looks like it's time for another code review to find any other bad PropertyInfo(Of T) declarations.</div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
