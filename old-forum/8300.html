<html><header><title>LoadProperty(IPropertyInfo, object newValue) issue.</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>LoadProperty(IPropertyInfo, object newValue) issue.</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/8300.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>rfcdejong posted on Thursday, January 07, 2010</h2>I bumped into a strange behaviour, since we use reflection to load properties we call the LoadProperty(IPropetyInfo, object newValue) overload. Which results into less code executed, but always a SetParent() etc called.<br /><br />Currently we're using Csla version 3.6.3.0<br /><br />In BusinessBase.cs <br /><br />Calling the method LoadProperty with a interface IPropertyInfo and a newValue (on line 1854) the ResetChildEditLevel(newValue) is always being called.<br /><br />Calling the method LoadProperty with a generic PropertyInfo and a newValue (on line 1750) there is so much more done.<br /><br />I would guess the generic is just an encapsulation around the non-generic for type safety.<br /><br /><br />Generic one does:<br />- compares the oldvalue with the newvalue and calls LoadPropertyValue generic;<br />- if the values are the same it skips the rest;<br />- it does eventhook binding transfer<br />- it checks the type of the propertyInfo and does something depending on the type:<br /><br />Only IEditableBusinessObject and IEditableCollection call ResetChildEditLevel(newvalue)<br /><br /><br />The non-generic LoadProperty doesn't do checking and alwys calls ResetChildEditLevel.</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>rxelizondo replied on Thursday, January 07, 2010</h2>this is not the only place where the CSLA excibits different behaviour for Generic/NonGeneric method calls. Check out post:<br /><br />http://forums.lhotka.net/forums/thread/39074.aspx<br /><br />Th second post makes the observation.<br /><br />You even chimed in there :)</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>rfcdejong replied on Monday, January 11, 2010</h2>Can this be put on the issuelist?<br /><br />- The non-generic should not always call ResetChildEditLevel<br />- The non-generic should evaluate the value<br />- The non-generic should transfer it's eventbindings.<br /></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>rfcdejong replied on Friday, June 11, 2010</h2><p>Bump...</p>
<p>May i ask if this is solved in Csla 4.0 ?<br />I think the LoadProperty without a generic should work the same as a LoadProperty with a generic.</p>
<p>Greetings,<br />Raymond</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Friday, June 11, 2010</h2><p><a href="http://www.lhotka.net/cslabugs/edit_bug.aspx?id=772">http://www.lhotka.net/cslabugs/edit_bug.aspx?id=772</a></p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>rfcdejong replied on Sunday, June 13, 2010</h2><p>Thanks</p>
<p>This will solve a&nbsp;issue where our root BO won&#39;t get notified when a&nbsp;2 deep nested child&nbsp;is loaded&nbsp;and a &quot;busy change&quot; doesn&#39;t bubble up&nbsp;when LoadProperty is called. For now i just made sure the generic LoadProperty was called as a workaround.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Thursday, June 24, 2010</h2><p>My solution to this problem is to broaden a solution Jonny put in for another issue - the non-generic LoadProperty() method now just invokes the property setter, thus ensuring that the normal property set path is followed.</p>
<p>In BusinessBase this is done within a BypassPropertyChecks block, so it is a load, not a set.</p>
<p>The end result is that, in reality, the generic LoadProperty() method is the one that really does the work, and the non-generic LoadProperty() is just the long way to get there.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>rfcdejong replied on Friday, June 25, 2010</h2><p>Perfect</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>dmnc replied on Monday, June 28, 2010</h2><p>Do&nbsp;you now have to introduce setters for read-only properties and the non-generic LoadProperty()?</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Monday, June 28, 2010</h2><p>For this change to work, yes.</p>
<p>I do this anyway - create a private setter for read-only properties. It makes coding inside the business class a lot more consistent.</p>
<p>I know - that&#39;s now how I did it in the 2008 book <img src="http://forums.lhotka.net/emoticons/emotion-3.gif" alt="Surprise" />. But that was in 2008. Over the past couple years I&#39;ve discovered that I like containing the LoadProperty() calls in a private setter much better than scattering LoadProperty() calls around the rest of the class.</p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
