<html><header><title>Using CSLA 4: Data Access pre-draft available</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Using CSLA 4: Data Access pre-draft available</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/9940.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka posted on Friday, January 14, 2011</h2><p>I just put a very early pre-draft version of the&nbsp;<em>Using CSLA 4: Data Access</em> ebook on the <a href="http://download.lhotka.net/Default.aspx?t=UsingCsla4">download site</a>. If you own the ebook series you can download this PDF.</p>
<p>This early version has a draft of Chapter 1 - about 25-30 pages - plus the rough outline for Chapters 2 and 3. </p>
<p>Chapter 2 is where I&#39;ll really get into the hard-core coding that demonstrates the various data portal models along with some DAL implementation concepts.</p>
<p>Chapter 3 will focus on n-tier data portal configuration.</p>
<p>Lots of great content yet to come, but I wanted to make Chapter 1 available now.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Tuesday, January 18, 2011</h2><p>I uploaded a new pre-draft of the <em>Data Access</em> ebook today (revision 0.2). </p>
<p>I&#39;m up around 45-50 pages of content now. This book is going to be fairly large I think, given that I&#39;m working on chapter 2 of what is now 5 chapters.</p>
<p>(hopefully I&#39;ll make up for it with the <em>Security</em> ebook, which should be relatively compact&nbsp;<img src="http://forums.lhotka.net/emoticons/emotion-1.gif" alt="Smile" /> )</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>rxelizondo replied on Wednesday, January 26, 2011</h2><p>HI Rocky,</p>
<p>&nbsp;</p>
<p>Is there a link where I can find the errata for the different books?</p>
<p>I found one or two issues in one of the books and wanted to report them but there is no point on doing that if someone else already did.</p>
<p>Thanks.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Wednesday, January 26, 2011</h2><p>Not currently. Right now all you can do is send email to <a href="mailto:errata@lhotka.net">errata@lhotka.net</a> to report issues.</p>
<p>I&#39;m not entirely sure how to handle errata for these yet. The only book that&#39;s out of draft is the first one, but even when I get errata for that one my thought is that I&#39;ll fix it and update the PDF.</p>
<p>So there&#39;s no point in having a database of errata in the traditional paper book sense, since people can always go get the latest PDF.</p>
<p>And yet you are right, there&#39;s some value in having a database of errata for the latest revision to avoid duplication.</p>
<p>But I&#39;m not sure how useful that&#39;d be, since some of the errata I&#39;ve already received has been against older revisions than current.</p>
<p>In any case, I don&#39;t want to take time away from my book writing efforts to build an errata tracking system into my web site...</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>DennisWelu replied on Wednesday, January 26, 2011</h2><p>
<p>Hi Rocky,</p>
<p>I&#39;m working on a Silverlight app and want to get it working in 4-tier mode, with the web server forwarding the DataPortal calls to an app server behind the firewall. Searching the forums you indicate in several places that the how-to for this is in video 4 of your Silverlight video series, which I&#39;ve considered acquiring but haven&#39;t yet. Now I see your CSLA 4 Data Access book will have a chapter on &quot;n-tier data portal configuration.&quot; Will you be covering 4-tier Silverlight? I&#39;ve already purchased the CSLA 4 ebook series, so if an upcoming chapter will eventually answer my question I can wait.</p>
<p>Or is there an easy, one-line-of-the-web.config answer to the 4-tier question that I&#39;m missing?</p>
<p>Thanks!</p>
<div></div>
</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Wednesday, January 26, 2011</h2><p>Yes, the <em>Data Access</em> ebook will cover 4-tier configuration.</p>
<p>This has been discussed in the forum before, but finding old threads can be challenging :(</p>
<p>It isn&#39;t hard though.</p>
<ol>
<li>Set up the client to talk to a Silverlight data portal endpoint on your web server</li>
<li>Set up the web server with a Silverlight data portal endpoint</li>
<li>Configure the web server with the .NET data portal proxy and URL to talk to the application server</li>
<li>Set up the app server with a .NET data portal endpoint</li>
</ol>
<p>The result is that the web server listens for Silverlight clients just like every 3-tier SL example in the Samples download. But the web server also has <em>client-style</em> data portal configuration so the data portal on the web server talks to the app server.</p>
<p>The app server listens for .NET clients just like every 3-tier .NET example in the Samples download. And the app server actually has the data access components installed.</p>
<p>The only interesting bit is that the web server has configuration for the SL data portal endpoint, and data portal client configuration to talk to the app server.</p>
<p>Once you get that working you can also use the MobileFactory attribute to trigger &quot;inspector&quot; or &quot;observer&quot; objects to run on the web server to screen inbound client requests before they are allowed to flow through to the app server. I&#39;ll talk about that in the <em>Data Access</em> book too.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>DennisWelu replied on Wednesday, January 26, 2011</h2><p>Perfect, thanks Rocky!</p>
<p>Your explanation triggers another question. though. For my app I&#39;m not concerned about monitoring the objects as they flow through the web server. In fact, to optimize performance I&#39;d love to simply relay the raw data to the app server and have it decompressed and deserialized there (I&#39;ve implemented compression). However, your steps imply the channel between the servers uses .NET serialization, so I assume the web server would be decompressing and deserializing the silverlight mobile objects, re-serializing them with .NET, and sending them to the app server where they&#39;re deserialized again. Is a simple relay possible instead? In fact, I would think a relay wouldn&#39;t need any of my server assemblies, nor most of CSLA for that matter.</p>
<p>&nbsp;</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Wednesday, January 26, 2011</h2><p>The current data portal implementation does deserialize and reserialize each request, that&#39;s true.</p>
<p>That&#39;s generally unavoidable as long as WCF is used, because WCF is what handles the serialization/deserialization of the message data.</p>
<p>You could bypass some of that by implementing a data portal host that passed byte arrays to/from the client - like I did to implement the asmx channel years ago. WCF would still serialize/deserialize the byte array data, but not the actual object information in the byte array(s).</p>
<p>And you really can do this - the data portal is very open - you&#39;d just need to create your own SL proxy/host pair, where the proxy serializes/deserializes objects into byte arrays and where the host (running on the web server) doesn&#39;t unpack the byte arrays. </p>
<p>And you&#39;d need to create your own .NET proxy/host pair, where the proxy (running on the web server) just passes the byte arrays back and forth, and where the host (running on the app server) serializes/deserializes the byte arrays into objects and delegates to the standard server-side DataPortal object.</p>
<p>This shouldn&#39;t be be overly difficult.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Friday, February 04, 2011</h2><p>I just put a new pre-release of the ebook online for download, along with associated sample code.</p>
<p>The ebook is around half done now. It keeps growing as I write, but I think it is all downhill from here :)</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Monday, February 21, 2011</h2><p>I put another pre-release (revision 0.4) of the <em>Data Access</em>&nbsp;ebook online for download, along with updated sample code.</p>
<p>I expect to have at least all the data access aspects of the book done this week. </p>
<p>I don&#39;t know if I&#39;ll complete all the data portal configuration material this week, but I&#39;m finally getting close to complete on this book.</p>
<p>It is at 124 pages now, and I&#39;m beginning to think it will be around 200 when I&#39;m done.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>rxelizondo replied on Wednesday, February 23, 2011</h2><p>Rocky,</p>
<p>Quick&nbsp;question,</p>
<p>Each time&nbsp;you publish a new release, do you sometimes go back and add pages of new information to areas of the book you have&nbsp;already&nbsp;published? For example, did you go back to say page 5 of the book and inserted 10 pages of new information there? Or are you only appending content?</p>
<p>I am only asking&nbsp;because&nbsp;I read the current existing material (I think you stopped at page 85 or something like that) and I intend to just continue reading from where I left off and I would hate to miss some good stuff if you added the stuff somewhere before you left off.</p>
<p>I guess I can always compare the two documents using Microsoft Word or something but I rather not if I know before hand I don&#39;t need to.</p>
<p>&nbsp;</p>
<p>Thanks.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JCardina replied on Wednesday, February 23, 2011</h2><p>Looking forward to an example of an editable child object for post .4 versions of the data access book as currently it&#39;s only got editable root object persistence which was tremendously helpful but between all the ebooks there&#39;s no example of an editable child object only references to it being covered in the data access ebook.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Wednesday, February 23, 2011</h2><p>The 0.4 revision of the <em>Data Access</em> ebook&nbsp;includes discussion of an editable root list, and the editable child objects it contains.</p>
<p>The next revision will include a &quot;complex graph&quot; discussion, with a parent/child/grandchild scenario - but that&#39;s mostly a rehash of the editable root list discussion - at least from the perspective of the editable child object.</p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
