<html><header><title>Minor Possible Problem in Validation List Sort</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Minor Possible Problem in Validation List Sort</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/4244.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>vdhant posted on Saturday, January 26, 2008</h2><P>Hi guys <BR>In the ValidationRulesManager there are two different AddRule methods, type and untyped. In either case the rule gets added to the list:<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; public void AddRule(RuleHandler handler, RuleArgs args, int priority)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; { <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; List&lt;IRuleMethod&gt; list = this.GetRulesForProperty(args.PropertyName, true).GetList(false); <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <STRONG>list.Add(new RuleMethod(handler, args, priority));</STRONG><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</P>
<P>Now according to the documentation in the 2.1 handbook (and it makes sense) the following should happen when a rule is added the sort is also suppose to be set to false "The Add() method not only adds the item, but also sets _sorted to false, because adding a new item to the list potentially<BR>upsets any pre-existing sort:". </P>
<P>The problem is that the add method that is referred to is that within the rules list is not call by the either of the AddRule methods. So as you can see the in the bolded line above it does not call the RulesList add method, it calls the add method on the list directly and hence the list (after the first rule is added) never gets set to being unsorted, which according to the documentation must occur when the item is added and is necessary for the system to work. So i would imagine that it would look something more like this??</P>
<P>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; public void AddRule(RuleHandler handler, RuleArgs args, int priority)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; { <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <STRONG>this.GetRulesForProperty(args.PropertyName, true).Add(new RuleMethod(handler, args, priority));<BR></STRONG>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</P>
<P>Now i realise that this mightn't necessarily a problem because the initial sort doesn't occur until it has been used but I just thought i would note the possible discrepancy if it hasn't been noticed before.<BR>Thanks<BR>Anthony</P>
<P>&nbsp;</P></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
