<html><header><title>1.0/1.1/1.5/2.0 upgrade and exception freezing UI</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>1.0/1.1/1.5/2.0 upgrade and exception freezing UI</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/740.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>dean posted on Thursday, July 27, 2006</h2>Warning - long story ahead:<br><br>I am working on upgrading a fairly large project from 1.0 to 2.0 (both csla and .net).<br><br>I have csla 1.51 running against the 2.0 framework now with minor changes to csla.<br><br>I have my project upgraded to visual studio 8.0 and running. (more changes but not too bad).<br><br>So now I want to work some of my code so it will run in csla 1.51 now and run in csla 2.0. In particular if I can rewrite my property set/get methods so they would run under either csla 1.5 or 2.0 then I can start making those changes without breaking my code.<br><br>So I created a business base wrapper program to "map" some of the 2.0 functionality into 1.51. For instance I duplicated the authorization rules from 2.0 and placed it in my wrapper class. I also created a PropertyHasChanged method which just calls BrokenRules.CheckRules and MarkDirty. Then when I change to 2.0 I just need to modify my wrapper class to pass the call thtu to CSLA 2.0.<br><br>For instance - old 1.x set code in property method:<br><br>if value &lt;&gt; mName then<br>&nbsp;&nbsp;&nbsp;&nbsp; mName = value<br>&nbsp;&nbsp;&nbsp; markdirty<br>&nbsp;&nbsp;&nbsp; brokenrules.checkrules("Name")<br>endif<br><br>will now be<br>CanWriteProperty("Name",True)&nbsp;&nbsp;  &nbsp;&nbsp;  <br>if value &lt;&gt; mName then<br>&nbsp;&nbsp; mName = value<br>&nbsp; PropertyHasChanged("Name")<br>endif<br><br>Now the problem - when the CanWriteProperty throws an exception the UI is stuck in that field. This is the behaviour that you got in the .net 1.0/1.1 with the csla 1.x. I was using the old form just reopened in visual studio 8.0.and recompiled.<br><br>I created a new form and used bindingsource and errorprovider and got the same behaviour. So it seems like something in csla 2.0 is preventing this behaviour.&nbsp; Now if I were using csla2.0 with the read/write authorization extender then I wouldn't be able to edit the field in the first place. Is that how csla2.0 is preventing this?<br><br>What is it about csla 2.0/net2.0 that makes throwing the exception not freeze the ui in the field that threw the exception?<br><br>Dean<br><br></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
