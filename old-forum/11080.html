<html><header><title>&quot;HTTP 417: Expectation&quot; errors on web services (no code changes)</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>&quot;HTTP 417: Expectation&quot; errors on web services (no code changes)</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/11080.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>rsbaker0 posted on Monday, January 23, 2012</h2><p>We&#39;ve had some web services in production for several years now. Evidently, because of some changes at either the client or network level, some clients are just recently&nbsp;failing to connect with an HTTP 417 error.&nbsp; In at least some cases, I can run the identical code (from the same directory and .config file) connecting to the same web service, and one client will get the 417 error and another one sitting right next to it will not. </p>
<p>In situations where we have an SSL certificate on the web server, we&#39;ve sometimes been able to work around this by connecting using https rather than http, but not all of our customers who host web services internally have this option readily available. </p>
<p>I know it&#39;s not a change that we made recently, because I can run older builds from 2-3 years ago and they will exhibit the same problem. </p>
<p>Any thoughts on how to troubleshoot this? </p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JonnyBee replied on Monday, January 23, 2012</h2><p>Could it be related to a proxy server and settings on the ServicePointManager? </p>
<p><a href="http://social.msdn.microsoft.com/Forums/en-US/devdocs/thread/60cd6e6a-4157-4811-8ed3-1e46f9022ea8">http://social.msdn.microsoft.com/Forums/en-US/devdocs/thread/60cd6e6a-4157-4811-8ed3-1e46f9022ea8</a> </p>
<p><a href="http://www.codeproject.com/Articles/94235/The-request-failed-with-HTTP-status-417-Expectatio">http://www.codeproject.com/Articles/94235/The-request-failed-with-HTTP-status-417-Expectatio</a></p>
<p><a href="http://msdn.microsoft.com/en-us/library/system.net.servicepointmanager.expect100continue.aspx">http://msdn.microsoft.com/en-us/library/system.net.servicepointmanager.expect100continue.aspx</a></p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>rsbaker0 replied on Tuesday, January 24, 2012</h2><p>We tried the &quot;expect100continue&quot; setting for the ServicePointManager, but it resulted in at least an order of magnitude performance degradation. </p>
<p>[EDIT: I expect the performance degradation is because the proxy server is now inspecting every SOAP message passing between the client and web service -- we experienced similar performance problems when using http versus https at some customer sites that had smart firewalls -- https was *much* faster, presumably because the proxy/firewall cannot inspect the packets and gives them a pass]</p>
<p>There are no proxy server settings on the offending client in Internet Explorer, and least accessible via the GUI in Explorer where the settings are usually set. Where else would you look for them?</p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
