<html><header><title>CslaDataProvider Cancel Asynchronous on Server?</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>CslaDataProvider Cancel Asynchronous on Server?</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/3570.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>GlennMiller posted on Wednesday, September 19, 2007</h2>Is there any way to Cancel an Asynchronous call on the server?<br><br>We have a list / Grid that switches between three buisness objects of different types. What we would like to do is when you click a "tab" to go to the other Business Object we would like it to cancel the previous Async call.<br><br>This is important because we don't want Async calls to stack up on the server if they flip between them before the data returns. The reason we want this is for imediate UI feedback. We also have other use cases for this. But this is just one example.<br><br>Thanks!<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Thursday, September 20, 2007</h2><P>All I can suggest is don't use async if this is a worry.</P>
<P>The problem is that there's no way to cancel some of the calls that are made.</P>
<P>If you use a remote data portal, there's no way to cancel a remoting, WCF, asmx or ES call. You can set a timeout ahead of time with some of these technologies, but there's no way to explicitly cancel the calls.</P>
<P>With either a local or remote data portal, there's no way to cancel a database query. Again, you can set the query timeout ahead of time, but you can't cancel a call once it has been started.</P>
<P>CslaDataProvider does the async work by running the request on a background thread. Technically I could offer you a method by which you could cancel the call by aborting that thread. But that wouldn't solve your issue, because it wouldn't cancel the remote network call or the database query, and aborting threads causes <EM>other</EM> problems that are far worse and more dangerous that the one you are worried about.</P>
<P>In short, there's no solution (that I'm aware of) that allows safe canceling of network or database calls. So that leaves you with the option of simply not using async if this is a concern.</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Angel replied on Thursday, September 20, 2007</h2><P>In local Dataportal what about using <FONT size=2>BackgroundWorker and slqcommand.cancel method. It would be posible to inplement a cancelable dataportal call?</FONT></P>
<P><FONT size=2></FONT>&nbsp;</P>
<P>&nbsp;</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Thursday, September 20, 2007</h2><P>Maybe, I don't know.</P>
<P>But even that wouldn't allow CSLA to do it, because any solution would need to work with both local and remote data portals, and not just SQL Server, but Oracle, web service calls or any other sort of data access people might use behind their business objects.</P>
<P>Remember that CSLA doesn't dictate how you get your data - that is entirely up to you - and so there's no way for CSLA to do a cancel for you.</P>
<P>Unfortunately, there's no way for it to even ask you to cancel - especially with a remote data portal - because there's no way for the client to send another message across the network to the already running instance of the code on the app server. </P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Turntwo replied on Saturday, August 07, 2010</h2><p>Is it possible to tell the CslaDataProvider to ignore the result of the Async call?&nbsp; Then it would at least appear to the user that the request was cancelled - and if they re-requested data (probably with different criteria), it wouldn&#39;t be overridden by a previous search operation.&nbsp; </p>
<p>The scenario I&#39;m thinking of is a search screen, where the user enters search criteria.&nbsp; They hit search without any criteria, and then realize they have to wait too long for the data, so they want to cancel and enter more specific criteria.&nbsp; Even though the request is still active on the server, the user would throw away any results of that request and move on to a new request.</p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
