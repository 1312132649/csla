<html><header><title>CSLA 3.8.x PropertyStatus Misbehaving in WPF App [EDIT: Workaround found!]</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>CSLA 3.8.x PropertyStatus Misbehaving in WPF App [EDIT: Workaround found!]</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/11909.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>stefan posted on Thursday, March 28, 2013</h2><p>Hi,</p>
<p>in my WPF app (csla3.8.x compiled under .NET4 and Bxf)&nbsp; I experience the following:</p>
<p>An editable root object is edited and then saved (view stays open), then the user can trigger a status change to the object by clicking a &#39;Publish&#39;-button. This invokes a DocumentPublisher-command that processes the object on the serverside, and returns an updated object, which then behaves like a read-only object, because CanWriteProperty checks the new status first...</p>
<p>After I&nbsp;set the Model property in the ViewModel to the updated new instance of the object, quite a lot of the PropertyStatus controls in the view don&#39;t update and stay databound to the old instance of the business object, resulting in many controls still being in edit mode, when the underlying databound properties have become readonly by the time. The controls that don&#39;t react correctly to the DataContextChanged event are always the same ones...</p>
<p>In this specific case, I followed the ProjectGetter pattern from the ProjectTracker sample app, where I have two different ViewModel objects. Could it be that this somehow confuses the SetSource method in PropertyStatus?</p>
<p>Any help is appreciated!</p>
<p>&lt;edit&gt; I found a Workaround:</p>
<p>As&nbsp;an intermediate step,&nbsp;setting Model=null right&nbsp;before setting it to the new instance, solves the issue so that&nbsp;all&nbsp;PropertyStatus controls refresh their bindings correctly!</p>
<p>This still is a hack - the PropertyStatus control in 3.8.x&nbsp;still appears&nbsp;buggy to me...</p>
<p>&lt;/edit&gt;</p></div><div style='padding:0 15 3 15;background-color:lightgreen'><h2>RockfordLhotka replied on Tuesday, April 02, 2013</h2><p>As long as there is a workaround we won&#39;t fix bugs in 3.8. That is two versions behind current, and so will only be changed in cases of extreme bugs with no workaround.</p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
