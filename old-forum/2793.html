<html><header><title>SafeDataReader Overview</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>SafeDataReader Overview</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/2793.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>sct_nraab posted on Friday, April 27, 2007</h2><P>This may be pretty elementary, but can someone give me an overview of the nuts and bolts of how the SafeDataReader works?</P>
<P>I don't understand how it can be used to populate several different objects at a time.</P>
<P>For instance, using the example from the book, where the SafeDataReader is populated by data retrieved from a stored procedure which executes&nbsp;two separate select statements, how does the business object differentiate between the records from the first statement and the second statement when instantiating?</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Friday, April 27, 2007</h2>The safe data reader works in the same way as a standard datareader, except I think it knows about smartdates and will translate null values to 'safe' values (0 for ints, empty string for strings, etc).<br><br>So to get the second result set, you need to use the NextResult method on the underlying datareader.<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Friday, April 27, 2007</h2><P>What I do in the book is standard DataReader behavior - it is not at all unique to SafeDataReader. If you look at how SafeDataReader is implemented in Chapter 5, you'll see that it is just a thin wrapper over any System.Data.IDataReader.</P>
<P>The NextResult() method on a datareader moves from the current result set to the next result set.</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Skafa replied on Friday, April 27, 2007</h2>To get multiple result sets, you execute multiple select statements in your procedure like this:<br><br>create procedure GetProjects<br>&nbsp;@projectId int<br>as<br>begin<br>&nbsp;select * from projects where projectid = @projectId<br>&nbsp;select * from projectresources where projectid = @projectId<br>end</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>sct_nraab replied on Friday, April 27, 2007</h2>Thanks to everyone.&nbsp; Much clearer now.</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>david.wendelken replied on Friday, April 27, 2007</h2><P>If you check out the CslaContrib project, you can find an extension of SafeDataReader (called SmartSafeDataReader) that handles additional classes (SmartInt16, SmartInt32, SmartInt64, SmartFloat, SmartBool, etc.).&nbsp; Plus those extra classes.</P>
<P>&nbsp;</P>
<P>&nbsp;</P></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
