<html><header><title>ForceUpdate</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>ForceUpdate</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/658.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>DanEssin posted on Tuesday, July 18, 2006</h2>The code in BusinessBase says:<br>&nbsp;&nbsp; public T Save(bool forceUpdate)<br>&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (forceUpdate &amp;&amp; IsNew)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br><br>I don't think that this is correct because you could never force update of an existing record.<br><br>It should probably be:<br>&nbsp;&nbsp; public T Save(bool forceUpdate)<br>&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (forceUpdate || IsNew)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br>&nbsp;<br>&nbsp;<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Tuesday, July 18, 2006</h2><P>forceUpdate exists for exactly one scenario: where you are implementing a stateless web forms or web service application and need to do an update operation.</P>
<P>Consider a data bound Web Forms app where you want to be stateless. When the UpdateObject event is raised from CslaDataSource you need to take the data from the web form and update the data in the database. Yet you don't want to waste the time to load the object from the database just to update its data - all the data in the object is in the form (that's a prerequisite here).</P>
<P>So what you do is create a new instance of the object (typically calling a specialized factory for this method that simply calls the constructor directly - no data portal). Then you load the empty object with data from the form. </P>
<P>Then you want to call Save(), but that would do an insert because IsNew is true. What forceUpdate allows you to do is force IsNew to false, thus forcing an update operation on a "new" object.</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>DanEssin replied on Tuesday, July 18, 2006</h2>I see your point. Since this related to the other message, I guess that <br />if the IsDirty can be assured of getting set, then I would never have to <br />consider using ForceUpdate in this context.<br /><br />Thanks,<br />de<br /><br />RockfordLhotka wrote:<br />><br />> forceUpdate exists for exactly one scenario: where you are <br />> implementing a stateless web forms or web service application and need <br />> to do an update operation.<br />><br />> Consider a data bound Web Forms app where you want to be stateless. <br />> When the UpdateObject event is raised from CslaDataSource you need to <br />> take the data from the web form and update the data in the database. <br />> Yet you don't want to waste the time to load the object from the <br />> database just to update its data - all the data in the object is in <br />> the form (that's a prerequisite here).<br />><br />> So what you do is create a new instance of the object (typically <br />> calling a specialized factory for this method that simply calls the <br />> constructor directly - no data portal). Then you load the empty object <br />> with data from the form.<br />><br />> Then you want to call Save(), but that would do an insert because <br />> IsNew is true. What forceUpdate allows you to do is force IsNew to <br />> false, thus forcing an update operation on a "new" object.<br />><br />><br />><br />> </div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
