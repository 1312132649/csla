<html><header><title>Need to know if user is a windows administrator</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Need to know if user is a windows administrator</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/3810.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>Ton Smeets posted on Tuesday, October 30, 2007</h2><P>Hi,</P>
<P>To perform some tasks (like creating a new database)&nbsp;my application needs to know if the user is a windows administrator. How do I get this value into my application.</P>
<P>I know this is total Off-Topic, my apologies&nbsp;for that. It keeps your mind sharp.</P>
<P>Thanks</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Tuesday, October 30, 2007</h2>You'll need to cast the ApplicationContext.User to a WindowsPrincpal (I assume you're using windows auth).&nbsp; Then you can call the IsInRole overload that takes a role enum for the common roles.<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Ton Smeets replied on Tuesday, October 30, 2007</h2><P>nope, I'm using the CSLA pricipal all over my application. I only need to grab some information from the operating system, wether the user is an Administrator.</P>
<P>thanks</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Tuesday, October 30, 2007</h2>Ok, well the same suggestion applies, you'll just create a WindowsPrincipal object using the WindowsIdentity returned by WindowsIdentity.GetCurrent, assuming you want the currently logged on user.<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Ton Smeets replied on Tuesday, October 30, 2007</h2><P>So, just create a windowsprincipal object. Get the info I need and let it get out of scope. Does this effect my cslaprincipal living on my thread, or does it only interfere when I set it to be the applicationcontext.user? I guess only creating the object to look up information does not effect the dataportal.</P>
<P>But knowing for sure is better.</P>
<P>Thanks</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Tuesday, October 30, 2007</h2>It will have no effect on your ApplicationContext.User (which is just short for Thread.CurrentThread.CurrentPrincipal) unless you change it yourself.&nbsp;&nbsp; So yes, just create, use it, and let it go... you may need to Dispose it, I can't recall.<br></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
