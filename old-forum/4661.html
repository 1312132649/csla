<html><header><title>dataPortal BO caching</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>dataPortal BO caching</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/4661.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>david.boaz posted on Thursday, April 10, 2008</h2><P>Dear CSLA community, </P>
<P>We are starting a new project using a domain layer based on CSLA business objects. The dataPortal methods call a data-access-layer implemented using NHibernate repositories (DAOs). <BR>The problem: Lets assume we have a BO with the following atributes: <U>id </U>(guid is the primary key) and an alternative key composed of &lt;<U>namesapce, name, version</U>&gt;. The alternative key is defined as a criteria and has a static&nbsp;Get() method. </P>
<P>Consider the following scenario: an entity is created, saved and loaded (by the alternative key).&nbsp;On the load step, the DAL (NHiberante) already has the original BO in its cache. But we cannot return the original object, because CSLA framework has created a new object, and the dataPortal_fetch() has only to fill it (instance method). trying to load the requested object from the DB causes an exception in NHibernate because the session now contain 2 instances with the same identity.</P>
<P>The question: Is it a good idea to add to augment CSLA with a <STRONG>static </STRONG>dataPortal_fetch() that will be responsible for the object creation? Am I breaking the design? Are there any un-predictble effects to such a change? </P>
<P>Thanks, David</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RikGarner replied on Friday, April 11, 2008</h2><P>David,</P>
<P>I'm not an expert on NHibernate but&nbsp;couldn't your DataPortal_Fetch call just ask the DAL for an object and expect it (the DAL) to work out if it has a cached copy to return?</P></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
