<html><header><title>Comment on Rocky's What makes a framework 'Heavyweight' blog post</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Comment on Rocky's What makes a framework 'Heavyweight' blog post</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/9750.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>shawndewet posted on Thursday, November 11, 2010</h2><p>Hi Rocky.</p>
<p>In this blog post you mention:<br />&quot;The most resource-intensive feature is the ability to undo changes to<br />an object graph, because that triggers a snapshot of the object graph<br />&ndash; obviously consuming memory. Fortunately this feature is entirely<br />optional, and on the phone it is not clear you&rsquo;d implement the type of<br />Cancel button this feature is designed to support. Fortunately, if you<br />don&rsquo;t use this feature then it doesn&rsquo;t consume resources.&quot;<br /><br />I just want to get some clarity here on how to &quot;not use&quot; this feature.<br />&nbsp;Your statement gives the impression that the undo operation<br />(CancelEdit) is what triggers the consumption of memory. &nbsp;I&#39;ve always<br />been under the impression that it&#39;s actually the call to &quot;BeginEdit&quot;<br />that triggers the consumption of memory (because that&#39;s what takes the<br />snapshot of the objectgraph), and then if I call CancelEdit, that<br />snapshot is used to restore the object state, or if I happen to call<br />EndEdit then that snapshot is discarded.<br /><br />So in my understanding, for me to &quot;not use&quot; this undo feature, the<br />action I would have to (not) take is to never call &quot;BeginEdit&quot;. &nbsp;(If<br />my understanding is wrong, I&#39;d appreciate your input on this.)<br />This brings me to databinding though. &nbsp;I understand that with proper<br />CSLA databinding in a Windows App, the BeginEdit is called<br />automatically. &nbsp;Am I right in saying then that when using proper CSLA<br />databinding in a windows app you can&#39;t &quot;not use&quot; the undo feature in<br />an attempt to save memory usage?<br />How does this translate to using databinding in a XAML(specifically<br />WP7) environment? &nbsp;Does the same logic hold true, that you can&#39;t have<br />Databinding without BeginEdit being called?</p></div><div style='padding:0 15 3 15;background-color:lightgreen'><h2>RockfordLhotka replied on Thursday, November 11, 2010</h2><p>It is true that the cost comes mostly with BeginEdit, but CancelEdit is far from free. ApplyEdit is basically free, since it just discards the state off the stack.</p>
<p>It is also true that <em>Windows Forms</em> data binding uses this by default, and it is difficult to avoid using it with that technology.</p>
<p>WPF and Silverlight (and therefore WP7) generally don&#39;t use it by default, though CslaDataProvider and ViewModelBase do use it by default. Of course you can tell those controls not to manage the object&#39;s lifetime (ManageObjectLifetime = false in the constructor or as a property value) and they won&#39;t use it either.</p>
<p>The only place where WPF/SL will use this by default is with datagrid controls that use IEditableObject when you do in-place editing in a row. That&#39;s really unavoidable, since it is necessary for proper datagrid behavior.</p>
<p>I&#39;m not aware of any datagrid controls for WP7 though, so that scenario shouldn&#39;t occur :)</p>
<p>I must say that I am considering making some changes to 4.1 for WP7, including:</p>
<ul>
<li>The default data portal proxy should be &quot;Local&quot;, since most phone apps will invoke remote services, not a remote data portal (or so goes my train of thought)</li>
<li>The default ManageObjectLifetime value in ViewModelBase should be false, since few phone apps will have a Cancel button where this is useful</li>
</ul>
<p>I&#39;ve received very little feedback on the 4.1 beta thus far, so I haven&#39;t revved it to Beta 2 - I&#39;ll probably do that at the end of next week when I get back from <a href="http://www.vslive.com">VS Live Orlando</a>.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>shawndewet replied on Thursday, November 11, 2010</h2><p>Thanks Rocky.</p>
<p>I think it does affirm my point that a developer should know that thinking &quot;I&#39;ll save memory in my SL/WP7 app by making sure I never use the undo feature&quot;, is NOT just a case of making sure to not call the BeginEdit/CancelEdit in code, but is a case of properly thinking about the GUI/Databinding, to ensure those calls don&#39;t happen automatically.</p>
<p>Thanks for a great framework.</p>
<p>--S</p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
