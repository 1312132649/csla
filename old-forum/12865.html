<html><header><title>CSLA &amp; Xamarin for mobile apps</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>CSLA &amp; Xamarin for mobile apps</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/12865.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 posted on Friday, April 17, 2015</h2><p>We&#39;re looking to build mobile apps (in addition to our existing WinForms app) using Xamarin and our CSLA objects, and we&#39;d like to continue using the mobile object concept (so binding our existing Csla objects to the XAML Xamarin forms).</p>
<p>One thing I&#39;m concerned about though is the server side of the of mobile objects if we make changes to the CSLA object, such as adding or removing a property or even a child object / collection.&nbsp; </p>
<p>We can&#39;t force everyone to update at the same time, and it make take time for the app to even be available in the store after its approved.&nbsp; Meanwhile the currently deployed version will need to work, so I&#39;m wondering what the recommendation is to handle this.&nbsp; Deploy a new data portal host site for the new version, while leaving the old one intact?&nbsp; That seems like it would make breaking DB changes more difficult to handle.&nbsp; Somehow handle the differences in code?&nbsp; Any advise would be great!</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>MarkOverstreet replied on Tuesday, May 05, 2015</h2><p>HI Andy,</p>
<p>Unfortunately I don&#39;t have an answer for you since we are just getting started with CSLA.NET but I do have a similar concern since we too are building a Xamarin Forms project and hoped to re-use our business logic which is why we chose CSLA.NET.&nbsp;&nbsp; So if anyone ever answers this, I would be interested in the solution too.</p>
<p>In the meantime, I have a question about sharing the business layer.&nbsp;&nbsp; I didn&#39;t realize there were different collection types based around binding support so my question is how do you handle writing one business layer and sharing it between a Winforms client and a Xamarin (mobile) client?&nbsp; It appears to me at least at the surface you can&#39;t because you have to choose your collections and what they derive from based on the technology of the client.&nbsp;&nbsp; Do you create multiple collections with similar code deriving from different types when you want to share the business logic on Winforms and something like Xamarin?&nbsp; </p>
<p>Thanks</p>
<p>Mark</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JonnyBee replied on Wednesday, May 06, 2015</h2><p>Hi Andy,&nbsp;</p>
<p>Unfortunately that is one the drawbacks of using binary serialization. To my knowledge - you need to support all active versions where each version has it&#39;s own URI so that you can safely support your clients. &nbsp;</p>
<p>Another good option is to create a REST service on the serverside that supports several versions and use CSLA on client only (edge application).&nbsp;<br />(This is the typical way I have used CSLA in my applications).&nbsp;</p>
<p>Breaking DB changes is a PITA on any of these approaches.&nbsp;</p>
<p>Just as a sidenote - using CSLA on the client only also allows us to share the backend between WinForms and WPF/SL/Xamarin as the clients may use different base classes depending on the UI to support. There is of course drawbacks to transactional integrity - being limited to one rest call - but I have found this to be manageable.&nbsp;</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>MarkOverstreet replied on Wednesday, May 06, 2015</h2><p>What about just forcing the user to update the mobile client app?&nbsp; I have been playing Age of Empires on my Wnidows Phone for a while and each time they push out an update and I launch the app, I get a message telling that I need to upgrade and it won&#39;t let me continue with the old version.&nbsp;&nbsp; This would solve your problem of having to support multiple versions. :)</p></div><div style='padding:0 15 3 15;background-color:lightgreen'><h2>RockfordLhotka replied on Wednesday, May 20, 2015</h2><p>This is a problem with any distributed service-based solution where you can&#39;t control client-side deployment. In other words, the problem isn&#39;t unique to CSLA.</p>
<p>The typical solution is to develop your server code/deployment such that you can run multiple versions of the service at the same time, retiring older versions of the service as your user base ultimately updates to the current client app version.</p>
<p>The most common way to do this is to embed the version number into the URL for the service endpoint, and the easiest thing is to host each endpoint in its own AppDomain (web site). Each client app will talk to the URL corresponding to that client&#39;s version.</p>
<p>This is easy to do with the data portal, just like with any other service endpoint, and addresses this issue pretty effectively.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Wednesday, May 27, 2015</h2><p><div style='padding-left: 50px;background-color:silver'><b>RockfordLhotka<br></b>This is a problem with any distributed service-based solution where you can&#39;t control client-side deployment. In other words, the problem isn&#39;t unique to CSLA.
<p>The typical solution is to develop your server code/deployment such that you can run multiple versions of the service at the same time, retiring older versions of the service as your user base ultimately updates to the current client app version.</p>
<p>The most common way to do this is to embed the version number into the URL for the service endpoint, and the easiest thing is to host each endpoint in its own AppDomain (web site). Each client app will talk to the URL corresponding to that client&#39;s version.</p>
<p>This is easy to do with the data portal, just like with any other service endpoint, and addresses this issue pretty effectively.</div></p>
<p>Glad to see you back on the forums!&nbsp; Hope your recovery is going well.</p>
<p>Yes, this issue certainly isn&#39;t unique to Csla.&nbsp; Multiple version specific portals sounds like the way to go, and I&#39;m assuming that is the case because that is still easier to maintain / more cost effective than going traditional REST / web service route where the client app and the web service are treated as two separate applications (my experience with that is that its very expensive).&nbsp; Thanks for everyone&#39;s feedback.</p>
</p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
