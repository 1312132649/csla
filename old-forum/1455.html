<html><header><title>Questuon of CSLA Authentication on Web and Window </title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Questuon of CSLA Authentication on Web and Window </h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/1455.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>Brian Tian posted on Wednesday, October 11, 2006</h2><FONT size=2>
<P><FONT size=3>Hi, All, <o:p></o:p></FONT></P>
<P><SPAN><FONT size=3>I use CSLA authentication for a window application. When&nbsp;people try to access the&nbsp;winApp,&nbsp;the user's&nbsp; activeDiectory name System.Security.Principal.<SPAN>WindowsIdentity</SPAN>.GetCurrent().Name will be used as parameter to pass to login() to check the Authentication. (we don't have the login form) &nbsp;In the dataPortal part&nbsp;of business logic layer, I directly use “<SPAN>Csla.<SPAN>ApplicationContext</SPAN>.User.Identity.Name” at stored procedure for the create_user. It looks like <o:p></o:p></SPAN></FONT></SPAN></P>
<P><SPAN>cm.Parameters.AddWithValue(<SPAN>"@user_name"</SPAN>, Csla.<SPAN>ApplicationContext</SPAN>.User.Identity.Name);<o:p></o:p></SPAN></P>
<P><SPAN>it works for my WinApp.<FONT size=3>I only need to checklogin once and </FONT><FONT face="Courier New" size=2>Csla.<SPAN>ApplicationContext</SPAN>.User.Identity.Name will keep the userName</FONT></SPAN></P>
<P><SPAN><SPAN>&nbsp;</SPAN></SPAN><SPAN><FONT size=3>But I have the problem on my web application to use the same business objects. The</FONT></SPAN><SPAN> </SPAN><SPAN>Csla.<SPAN>ApplicationContext</SPAN>.User.Identity.Name </SPAN><FONT size=3><SPAN>won’t&nbsp;give me&nbsp;the user name (ASPNET or domain\actDirName), it will give me the empty string. I can get the userName at the Web UI, so, <SPAN>&nbsp;</SPAN>the only way I could&nbsp;solve&nbsp;this&nbsp;is to pass the userName to my dataPortal layer for my WebApp. Is this the right way to do it? is there a better solution?</SPAN><SPAN><o:p></o:p></SPAN></FONT></P>
<P class=MsoNormal><FONT size=3>Thanks</FONT></P>
<P>Brian</P></FONT></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Brent replied on Wednesday, October 11, 2006</h2><P>Are you using the global.asax like the PTWeb project does&nbsp;in the Project Tracker solution?</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>xal replied on Wednesday, October 11, 2006</h2>You could have two Login methods in you proncipal, one that takes a username param an one that doesn't. The second one passes the win identity name to the first one, and that's pretty much it, but you probably want a password for web too, so maybe you need different dp methods. You probably need to specify a bit more what your requirement is.<br><br>Andrés<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Brian Tian replied on Thursday, October 12, 2006</h2><P>Thanks for&nbsp;Brent and Andres' help. It works now.</P>
<P>&nbsp;</P></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
