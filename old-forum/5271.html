<html><header><title>How to actualize the N-Level Undo</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>How to actualize the N-Level Undo</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/5271.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>future_zheng posted on Wednesday, August 20, 2008</h2><UL>
<LI><FONT color=#000000 size=2>Use Version Decription: I'm using Csla.net 3.0.4.0 and using ProjectTracker.Library。</FONT></LI>
<LI><FONT color=#0000ff size=2>Querstion：<STRONG>NOW has a requirement,When set&nbsp; value of&nbsp;&nbsp;project's member,&nbsp;I will&nbsp;Copy&nbsp;a state;the coding under:</STRONG> </FONT><FONT color=#000000 size=2>public string Name{&nbsp; get {CanReadProperty("Name",true);&nbsp; return _name; }<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; set&nbsp; { CanWriteProperty("Name",true);if (value == null) value = string.Empty;&nbsp; if (_name != value)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {_name = value;&nbsp; <FONT color=#ff0000>BeginEdit();</FONT>&nbsp; PropertyHasChanged();<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }} }&nbsp;。<STRONG><FONT color=#0000ff>I deal like this coding&nbsp;for all properies. I want to record very time change,than i want to call CancelEdit() for&nbsp;every change.&nbsp;</FONT><FONT color=#ff0000>throw a Exception"Edit level mismatch in UndoChanges"&nbsp;.</FONT><FONT color=#000080> </FONT></STRONG></FONT></LI>
<LI><FONT color=#000000 size=2><STRONG><FONT color=#000080>Please tell me how to actualize every undo? </FONT></STRONG></FONT></LI>
<LI><FONT color=#000000 size=2><STRONG>label:</STRONG>I don't more modify the ProjectTracker.Library and UI Demo;when I fetch Data……</FONT></LI></UL></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Wednesday, August 20, 2008</h2>Take the BeginEdit out.&nbsp; It's not needed, and as you can see causes problem.<br><br>If you want form level undo, I think you'll need to call BeginEdit on your BO, but BEFORE you do the databinding.&nbsp; To CancelEdit, you'll have to unbind the BO before you call the Cancel (or End).&nbsp; <br><br>Once databound, databinding handles calling Begin / Cancel and End edit for the user.&nbsp; You don't need to do any work there, it's done automatically unless you disabled support for databinding undo.<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>future_zheng replied on Wednesday, August 20, 2008</h2>Thanks for you suggest.Please allow to explain my think.I want to actualize like word .After I input three times,if I call undo function for three times,I will return to initiation location.</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Wednesday, August 20, 2008</h2><P>The undo feature of CSLA .NET doesn't work like that in Word. </P>
<P>Word uses a command-based undo structure, where they undo changes command-by-command.</P>
<P>CSLA uses a snapshot-based undo structure, where a snapshot of the object is taken, and then an undo goes back to that snapshot.</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>future_zheng replied on Thursday, August 21, 2008</h2><P>Thanks for Rocky's reply</P></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
