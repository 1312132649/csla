<html><header><title>Quick question/request re WcfProxy&lt;T&gt; in Csla Light</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Quick question/request re WcfProxy&lt;T&gt; in Csla Light</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/6266.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>PeteH posted on Tuesday, January 27, 2009</h2>Is the GetProxy() method within the WcfProxy&lt;T&gt; class private by design? I have implemented a custom WcfProxy&lt;T&gt; class as my business objects are not all on one server, thus resulting in my Silverlight app having to access several WCF channels, dependant on the namespace the business object is in. This is all done transparently in my custom class, but I had to alter the GetProxy method to a protected virtual, so that I could override it.<br><br>Should I be going about this another way, or could this be something changed in Csla Light? I also altered the SyncrhonizedWcfProxy if anyone is interested, so that I could override that also if needed, but I think that has been depreciated now.<br><br>Thanks for any advice!<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Tuesday, January 27, 2009</h2>This is probably a change that should be made. I tend to err on the side of over-protecting types so I can loosen them later, and this is similar to a change I recently made on the .NET side for similar reasons.<br><br>I'll add this to the wish list.<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Wednesday, January 28, 2009</h2>I made the method virtual, because that's probably not a bad idea for other scenarios.<br><br>But for your scenario, you should be able to create a subclass of WcfProxy&lt;T&gt; and use your own logic to set the server URL and/or binding properties. It sounds like you'd just need to set the DataPortalUrl property in your subclass, based on which server you need to talk to.<br><br>In other words, you shouldn't have to do anything as complex as overriding GetProxy() - just set a string property.<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>PeteH replied on Thursday, January 29, 2009</h2>Thanks for making the change, that's perfect. As for my scenario, whilst it is true that I could use the DataPortalUrl property in theory, I would need to read the address property from each endpoint in the ServiceReferences.ClientConfig file to do so - which is far from straightforward. I did find a way to read these values from within Silverlight, but it was using quite hacky code (loading it into a resource stream, then using LINQ to match the attribute name; the link is http://cozenedcognizance.blogspot.com/2008/10/reading-clientconfig-values-in.html) and decided that really wasn't the best way forward.<br><br>So instead, I went along with having a different name for each endpoint in the ServiceReferences.ClientConfig, along these lines:<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;client&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;endpoint address="http://xml.host.address/WcfPortal.svc"<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; binding="basicHttpBinding" bindingConfiguration="XmlHttpBinding_IWcfPortal"<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; contract="Csla.WcfPortal.IWcfPortal" name="XmlEndPoint" /&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;endpoint address="http://media.host.address/WcfPortal.svc"<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_IWcfPortal"<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; contract="Csla.WcfPortal.IWcfPortal" name="MediaEndPoint" /&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;endpoint address="http://database.host.address/WcfPortal.svc"<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_IWcfPortal"<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; contract="Csla.WcfPortal.IWcfPortal" name="DatabaseEndPoint" /&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/client&gt;<br><br>This makes the code in Silverlight very straightforward, only the one line as usual in Application_Startup:<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Csla.DataPortal.ProxyTypeName =<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; typeof (CustomWcfProxy&lt;&gt;).AssemblyQualifiedName;<br><br>Which then means that everything else is encapsulated in the CustomWcfProxy&lt;T&gt; class, I believe that's good OOP practice?:<br><br>&nbsp;&nbsp;&nbsp; public static class CustomWcfProxy<br>&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; private static string _defaultXmlEndPoint = "XmlEndPoint";<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; private static string _defaultMediaEndPoint = "MediaEndPoint";<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; private static string _defaultDatabaseEndPoint = "DatabaseEndPoint";<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; public static string DefaultXmlEndPoint<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; get { return _defaultXmlEndPoint; }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; set { _defaultXmlEndPoint = value; }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; public static string DefaultMediaEndPoint<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; get { return _defaultMediaEndPoint; }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; set { _defaultMediaEndPoint = value; }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; public static string DefaultDatabaseEndPoint<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; get { return _defaultDatabaseEndPoint; }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; set { _defaultDatabaseEndPoint = value; }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; }<br><br>&nbsp;&nbsp;&nbsp; public class CustomWcfProxy&lt;T&gt; : WcfProxy&lt;T&gt; where T : IMobileObject<br>&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; public CustomWcfProxy()<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; this.XmlDataPortalEndPoint = CustomWcfProxy.DefaultXmlEndPoint;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; this.MediaDataPortalEndPoint = CustomWcfProxy.DefaultMediaEndPoint;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; this.DatabaseDataPortalEndPoint = CustomWcfProxy.DefaultDatabaseEndPoint;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; public string XmlDataPortalEndPoint { get; protected set; }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; public string MediaDataPortalEndPoint { get; protected set; }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; public string DatabaseDataPortalEndPoint { get; protected set; }<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; protected override WcfPortalClient GetProxy()<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; var typeNamespace = typeof(T).Namespace;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; switch (typeNamespace)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; case "Sample.Business.Xml.BusinessClasses":<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return GetXmlProxy();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; case "Sample.Business.Media.BusinessClasses":<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return GetMediaProxy();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; case "Sample.Business.Database.BusinessClasses":<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return GetDatabaseProxy();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; default:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return base.GetProxy();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; private WcfPortalClient GetXmlProxy()<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (!string.IsNullOrEmpty(base.DataPortalUrl) &amp;&amp; base.Binding != null)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return base.GetProxy();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return !string.IsNullOrEmpty(this.XmlDataPortalEndPoint)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ? new WcfPortalClient(this.XmlDataPortalEndPoint)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; : new WcfPortalClient();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br><br>... rinse and repeat for GetMediaProxy and GetDatabaseProxy.<br><br>Maybe there's an easier/better way though, that I've overlooked?<br><br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>PeteH replied on Thursday, January 29, 2009</h2>There is one alternative, of course: if there was an DefaultEndPoint property added to WcfProxy, and a matching DataPortalEndPoint in WcfProxy&lt;T&gt;, then I could move the switch into the constructor for my custom proxy class and do away with the need for the override. The GetProxy() of WcfProxy&lt;T&gt; would need to be rewritten slightly too of course, to reference this property before defaulting to just returning a new WcfPortal.WcfPortalClient(), so quite a few changes all in all.<br><br>Another one for the wish list, maybe?<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Thursday, January 29, 2009</h2>






 





<div class=Section1>

<p class=MsoNormal><span>So what you are saying is that I really need an EndPoint
property to specify the name of the endpoint to read from the config file. And
a DefaultEndPoint property in the non-generic WcfProxy class.<o:p></o:p></span></p>

<p class=MsoNormal><span><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span>You are totally doing the right thing &#8211; I just don&#8217;t
think it should be so hard to do something that is probably relatively common.<o:p></o:p></span></p>

<p class=MsoNormal><span><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span>If I add an EndPoint (string) property, then you&#8217;d still
create a subclass, but all you&#8217;d have to do is set the EndPoint property
value as appropriate, and the standard WcfProxy&lt;T&gt; code would do the
right thing?<o:p></o:p></span></p>

<p class=MsoNormal><span><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span>Rocky</span><b><span><o:p></o:p></span></b></p>

<p class=MsoNormal><span><o:p>&nbsp;</o:p></span></p>

</div>



</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>PeteH replied on Thursday, January 29, 2009</h2>I do agree with you that this might be quite common, and that the overriding of GetProxy() is a little bit overkill - especially as the code for GetXmlProxy, GetMediaProxy etc are virtually identical to the GetProxy() in WcfProxy&lt;T&gt;, except for a check to see if the EndPoint is set (after checking to see if the DataPortalUrl is blank, because if it's not, I go down that path by calling base.GetProxy() anyway).<br><br>The changes wouldn't be drastic to WcfProxy.cs, I believe this is all that is needed (new additions in bold):<br><br>&nbsp; public static class WcfProxy<br>&nbsp; {<br><br>.. snipped code up to this point as it would be unchanged<br><br>&nbsp;&nbsp;&nbsp; private static string _defaultUrl;<br>&nbsp;&nbsp;&nbsp; public static string DefaultUrl<br>&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; get { return _defaultUrl; }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; set { _defaultUrl = value; }<br>&nbsp;&nbsp;&nbsp; }<br><br><b>&nbsp;&nbsp;&nbsp; private static string _defaultEndPoint;<br>&nbsp;&nbsp;&nbsp; public static string DefaultEndPoint<br>&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; get { return _defaultEndPoint; }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; set { _defaultEndPoint = value; }<br>&nbsp;&nbsp;&nbsp; }<br></b>&nbsp; }<br><br>&nbsp; public class WcfProxy&lt;T&gt; : IDataPortalProxy&lt;T&gt; where T : IMobileObject<br>&nbsp; {<br>&nbsp;&nbsp;&nbsp; public WcfProxy()<br>&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; this.DataPortalUrl = WcfProxy.DefaultUrl;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; this.Binding = WcfProxy.DefaultBinding;<br>

<b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; this.EndPoint = WcfProxy.DefaultEndPoint;</b><br>&nbsp;&nbsp;&nbsp; }<br><br>&nbsp;&nbsp;&nbsp; public System.ServiceModel.Channels.Binding Binding { get; protected set; }<br>&nbsp;&nbsp;&nbsp; public string DataPortalUrl { get; protected set; }<br><b>&nbsp;&nbsp;&nbsp; public string EndPoint { get; protected set; }<br></b><br>&nbsp;&nbsp;&nbsp; protected virtual WcfPortal.WcfPortalClient GetProxy()<br>&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (!string.IsNullOrEmpty(this.DataPortalUrl) &amp;&amp; this.Binding != null)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; var address = new EndpointAddress(this.DataPortalUrl);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return new WcfPortal.WcfPortalClient(this.Binding, address);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br><b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; else if (!string.IsNullOrEmpty(this.EndPoint))<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return new WcfPortal.WcfPortalClient(this.EndPoint);</b><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; else<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return new WcfPortal.WcfPortalClient();<br>&nbsp;&nbsp;&nbsp; }<br><br>.. snipped code after this point as it would also be unchanged.<br>&nbsp; }<br><br>Then any CustomWcfProxy&lt;T&gt; class would not need to override GetProxy(), it would simply look like (in my case):<br><br>&nbsp;&nbsp;&nbsp; public class CustomWcfProxy&lt;T&gt; : WcfProxy&lt;T&gt; where T : IMobileObject<br>&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; public CustomWcfProxy()<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; this.XmlEndPoint = CustomWcfProxy.DefaultXmlEndPoint;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; this.MediaEndPoint = CustomWcfProxy.DefaultMediaEndPoint;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; this.DatabaseEndPoint = CustomWcfProxy.DefaultDatabaseEndPoint;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; var typeNamespace = typeof(T).Namespace;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; switch (typeNamespace)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; case "Sample.Business.Xml.BusinessClasses":<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; base.EndPoint = this.XmlEndPoint;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; case "Sample.Business.Media.BusinessClasses":<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; base.EndPoint = this.MediaEndPoint;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; case "Sample.Business.Database.BusinessClasses":<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; base.EndPoint = this.DatabaseEndPoint;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; public string XmlEndPoint { get; protected set; }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; public string MediaEndPoint { get; protected set; }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; public string DatabaseEndPoint { get; protected set; }<br>&nbsp;&nbsp;&nbsp; }<br><br><br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Thursday, January 29, 2009</h2>






 





<div class=Section1>

<p class=MsoNormal><span>Excellent! It sounds like we&#8217;re on the same page, so I&#8217;ll
try and get this in before tomorrow&#8217;s 3.6.1 release.<o:p></o:p></span></p>

<p class=MsoNormal><span><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span>Thank you for your help on this!<o:p></o:p></span></p>

<p class=MsoNormal><span><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span>Rocky<o:p></o:p></span></p>

</div>



</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>PeteH replied on Thursday, January 29, 2009</h2>No problem, happy to help - it would be great if it could make it in the 3.6.1 release. I rushed the custom class example, as the switch statement needs breaks after each case to compile, but it gives the general idea anyway..<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Thursday, January 29, 2009</h2>Try the latest code in svn if you would. I believe we should be good now.<br><br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>PeteH replied on Friday, January 30, 2009</h2>Just to confirm that it works perfectly with the latest code in the svn. (However there is a bug in the svn in that the CommandBase.cs is linked from Csla.NET, and this doesn't build - I had to remove the link and build it from the old CommandBase.cs in Csla Light before I could get it to build)<br><br>Is the SyncrhonizedWcfProxy obsolete now, by the way? I only ask because it uses a private WcfProxy&lt;T&gt; variable, and is thus unusable with custom proxy classes.<br><br>Thanks again!<br><br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Friday, January 30, 2009</h2><DIV>Sorry about that bug. I was still in the middle of adding a LoadProperty() method to the ObjectFactory base class, so the svn code as a whole as in an indeterminate state. Obviously I think I have it correct now, as I've put RC1 of 3.6.1 online for download - so hopefully I caught everything :)</DIV>
<DIV>&nbsp;</DIV>
<DIV>I'm not sure what to do with SynchronizedWcfProxy. We created it to work around a bug in WCF during the SL beta. Microsoft fixed that bug, so it isn't clear that SynchronizedWcfProxy has any value at this point. We left it in there in case we needed it again, but now it feels more like dead weight for me to maintain than anything else :)</DIV>
<DIV>&nbsp;</DIV>
<DIV>I should probably just eliminate it now and save myself pain into the future.</DIV>
<DIV>&nbsp;</DIV>
<DIV>Rocky<BR><BR></DIV>
<BLOCKQUOTE>----- Original Message -----<BR>From: PeteH <BR>To: "rocky@lhotka.net" <BR>Subject: Re: [CSLA .NET] RE: RE: Quick question/request re WcfProxy in Csla Light<BR>Date: Fri, 30 Jan 2009 07:15:56 -0600<BR><BR>Just to confirm that it works perfectly with the latest code in the svn. (However there is a bug in the svn in that the CommandBase.cs is linked from Csla.NET, and this doesn't build - I had to remove the link and build it from the old CommandBase.cs in Csla Light before I could get it to build)<BR><BR>Is the SyncrhonizedWcfProxy obsolete now, by the way? I only ask because it uses a private WcfProxy&lt;T&gt; variable, and is thus unusable with custom proxy classes.<BR><BR>Thanks again!<BR><BR><BR><BR><BR></BLOCKQUOTE><BR></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
