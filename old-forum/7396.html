<html><header><title>Orphaned Object</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Orphaned Object</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/7396.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>RedShiftZ posted on Tuesday, August 04, 2009</h2>I have a problem I am not sure how to solve and would like some ideas. This is not strictly a CSLA issue, but I'm hoping the members here can point me in the right direction...<br><br>Here is the situation. I have the following structure for my CSLA objects<br><br>MyAppointmentList : BusinessListBase&lt;MyAppointmentList, MyAppointment&gt;<br><br>which has children...<br><br>MyAppointment : Csla.BusinessBase&lt;MyAppointment&gt;<br><br>which has a AutoInc int field as Primary Key (AppointmentID).<br><br><br>Simple enough. The list is being used by the DevExpress Scheduling component as a datasource which basically wraps the MyAppointment object with it's own Appointment object via a DevExpress Storage component.<br><br>When accessing the DevExpress components, you use their objects which present an interface to get to the original object<br><br>MyAppointment appt = (MyAppointment)Appointment.GetSourceObject(DevExpressStorage);<br><br>So this gives us the original base Appointment object to deal with. <br><br>The problem, When you create a new Appointment, MyAppointment is null until Appointment.Save is called. At that point,<br>It adds a new MyAppointment to the List and calls <br><br>MyAppointmentList = MyAppointmentList.Save <br>DevExpressStorage.DataSource = MyAppointmentList;<br><br>which reloads the base list, Now the Appointment I am working with no longer points where I expect it. It is orphaned as far as I can tell.<br><br>Thoughts? I am working up sample code to submit to DevExpress, but I'm sure they will want me to pull CSLA out of the mix...<br><br>Thanks,<br><br>Jeff Young</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>cberthold replied on Tuesday, August 04, 2009</h2>I'm pretty sure your having a binding issue.&nbsp; If you are going to use CSLA with components that are heavily geared towards the BindingSource and DataSets it is highly recommended that you use a BindingSource and follow the RebindUI method of saving objects.&nbsp; Part of the problem you are experiencing is the complete change of the datasource does indeed change the connection of the Appointment object and will essentially be orphaned.&nbsp; I think if you use a BindingSource and set the DevExpressStorage.DataSource to the BindingSource and then on the AppointmentsChanged event of the storage fire the RebindUI it will work.&nbsp; If you are unsure of what that looks like check out the Project Tracker sample.<br></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
