<html><header><title>RegisterProperty on ReadOnlyListBase??</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>RegisterProperty on ReadOnlyListBase??</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/6647.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>dshafer posted on Friday, March 20, 2009</h2><P>Please forgive me if this should be obvious.&nbsp; I have very little experience with the new "Managed Backing Fields" that were introduced in CSLA 3.5.&nbsp; I'm currently designing my first CSLALight solution and I've run into a problem.&nbsp; Here's my scenario:</P>
<P>1.&nbsp; I have a&nbsp;class named EntitlementInfo&nbsp;that inherits from ReadOnlyBase&nbsp;and has a property (using the Managed Backing Field" approach) named HoursEntitled.</P>
<P>2.&nbsp; I have a&nbsp;list class named EntitlementInfoList&nbsp;that inherits from ReadOnlyListBase.&nbsp; I would like to add a property on this class that would hold the sum of the HoursEntitled property for all of the items in the list.</P>
<P>The actual process of getting the total isn't my main concern at the moment.&nbsp;&nbsp;I'm having a problem when I try to create the TotalHoursEntitled property on the&nbsp;EntitlementInfoList class.&nbsp; I'm trying to use the same "Managed Backing Field" approach that I used for the&nbsp;EntitlementInfo class, but I get a compiler error that says&nbsp;basically that the&nbsp;RegisterProperty method&nbsp; is not found.&nbsp; Then I tried the regular private field public property way, but it appears as though the value in the TotalHoursEntitled&nbsp;property&nbsp;isn't serialized through the WCF service.&nbsp; How do I create a property on the EntitlementInfoList and have it serialize the data through the service to the Silverlight client?</P>
<P>Thanks,</P>
<P>Dustin<FONT color=#2b91af size=2><FONT color=#2b91af size=2></P></FONT></FONT></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Friday, March 20, 2009</h2><P>In general, CSLA doesn't support the idea of putting properties on lists, because data binding doesn't support that concept.</P>
<P>You can (must) put that value into a normal private field if you want to store it in the list. There's no problem with doing that.</P>
<P>If you want the value to serialize across the wire (and you might find it easier to just recalc the value on deserialization instead), you'll need to override the OnGetState() and OnSetState() methods in the list class and get/set the property value into/out of the serialization stream. This is not hard to do for a primitive data type like a numeric or even string value.</P>
<P>But again, you might find that recalculating the value in an OnDeserialized() overload is easier than serializing the value over the wire.</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>dshafer replied on Friday, March 20, 2009</h2><P>Rocky,</P>
<P>Thanks for the information.&nbsp; I hadn't thought about the OnDeserialized approach.&nbsp; I was just trying to find the cleanest and most correct way of doing it.&nbsp; Besides the fact that the property on the list is not supported in databinding,&nbsp;are there any reasons why CSLA would not work with a&nbsp;custom<BR>version of the RegisterProperty() method, similar to the one on ReadOnlyBase for use in ReadOnlyListBase?</P>
<P>Thanks,</P>
<P>Dustin</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Saturday, March 21, 2009</h2><P>It is partially a size/perf thing. The field manager isn't entirely free - in that it has to be serialized, and thus it adds to the size of the byte stream over the wire. Since the normal behavior for a list is to just contain items, always having a field manager field would increase the serialized byte stream all the time, just for the convenience of using it the .001% of the time when a list needs a field.</P>
<P>So it is better, I think, to do a little extra work that .001% of the time to get the better result most of the time.</P></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
