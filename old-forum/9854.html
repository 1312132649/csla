<html><header><title>Question about saving editable root list</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Question about saving editable root list</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/9854.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>wjcomeaux posted on Friday, December 10, 2010</h2><p>I&#39;m trying to fix a bug in the CodeSmith templates and in research I came across this thread.</p>
<p><a href="http://forums.lhotka.net/forums/p/6265/30565.aspx#30565">http://forums.lhotka.net/forums/p/6265/30565.aspx#30565</a></p>
<p>Basically it shows that the ERL should just call Child_Update(). <br />I see in our generation template that we are doing that, but only if the list itself is a child object, otherwise the template generates this code:</p>
<pre style="font-family:consolas;"><span style="color:blue;">for</span>&nbsp;(<span style="color:blue;">int</span>&nbsp;index&nbsp;=&nbsp;0;&nbsp;index&nbsp;&lt;&nbsp;DeletedList.Count;&nbsp;index++)<br />{<br />&nbsp;&nbsp;&nbsp;DeletedList[index]&nbsp;=&nbsp;DeletedList[index].Save();<br />}<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />DeletedList.Clear();<br /> <br /><span style="color:blue;">for</span>&nbsp;(<span style="color:blue;">int</span>&nbsp;index&nbsp;=&nbsp;0;&nbsp;index&nbsp;&lt;&nbsp;Items.Count;&nbsp;index++)<br />{<br />&nbsp;&nbsp;&nbsp;&nbsp;Items[index]&nbsp;=&nbsp;Items[index].Save();<br />}</pre>
<pre style="font-family:consolas;"></pre>
<pre style="font-family:consolas;">Is there ever a case when this code would be valid or should the DataPortal_Update</pre>
<pre style="font-family:consolas;">for an ERL always just look like this:<br /><span style="color:#2b91af;">//Configure myConnection</span></pre>
<pre style="font-family:consolas;"><pre style="font-family:consolas;"><span style="color:#2b91af;"></span><span style="color:blue;">bool</span>&nbsp;cancel&nbsp;=&nbsp;<span style="color:blue;">false</span>;<br />OnUpdating(<span style="color:blue;">ref</span>&nbsp;cancel);<br /><span style="color:blue;">if</span>&nbsp;(cancel)&nbsp;<span style="color:blue;">return</span>;<br /> <br />RaiseListChangedEvents&nbsp;=&nbsp;<span style="color:blue;">false</span>;<br /> <br />Child_Update(<span style="color:#2b91af;">myConnection);</span><br /> <br />RaiseListChangedEvents&nbsp;=&nbsp;<span style="color:blue;">true</span>;<br /> <br />OnUpdated();</pre>
<pre style="font-family:consolas;"></pre>
<pre style="font-family:consolas;">Thanks for any input,</pre>
<pre style="font-family:consolas;">Will</pre>
</pre></div><div style='padding:0 15 3 15;background-color:lightgreen'><h2>RockfordLhotka replied on Friday, December 10, 2010</h2><p>Unless you have some weird dependency issues with child objects, you should always just be able to call Child_Update to do the work. It just contains the code you listed at the top of your post after all :)</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>wjcomeaux replied on Friday, December 10, 2010</h2><p>That is what I thought and what I was hoping. Nothing weird happening here, just addressing a bug in the templates and ot wanting to add a new one accidentally by removing potentially useful functionality.</p>
<p>&nbsp;</p>
<p>Thanks,<br />Will</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>bniemyjski replied on Saturday, December 18, 2010</h2><p>Hello,</p>
<p>Thanks for reporting this Will, I&#39;ll get this fixed. I&#39;ve logged this as a bug here (<a href="http://code.google.com/p/codesmith/issues/detail?id=537">http://code.google.com/p/codesmith/issues/detail?id=537</a>). Please add any comments that you have to this bug ID.</p>
<p>
<p>Thanks</p>
<p>-Blake Niemyjski</p>
</p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
