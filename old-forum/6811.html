<html><header><title>Lazy loading error when 2 properties the same object</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Lazy loading error when 2 properties the same object</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/6811.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>Nemisis posted on Friday, April 17, 2009</h2>I have a parent object that uses lazy loading on alot of fields.  I am only using lazy loading, because on this particular object, not all properties will be accessed by a user so seems pointless to loading all 50 objects, when the user will only ever see and use 2.<br /><br />My problem is that when items are added to the ColumnList property within either Child1 or Child2, it reflects in the other child, if the other child has already been loaded??  If only 1 child exists, it works fine.  Both appear to load correctly when they are first accessed, as in they both do not exist when i first access them, and the GetChild method is called.<br /><br />Anyone got any clues, i wondered if this is something to do with managed fields?<br /><br />Here is the sample code, i am using the managed fields option.  This is only using 2 properties, my real object has over 50 of these childs, all the same, just holding different lists, but of the same type.<br /><br />Public Class ParentObject<br />     Inherits BusinessBase(Of ParentObject)<br /><br />        Private Shared Child1Property As PropertyInfo(Of ChildObject) = RegisterProperty(GetType(ParentObject), New PropertyInfo(Of ChildObject)("Child1"))<br />        Public ReadOnly Property Child1() As ChildObject<br />            Get<br />                If Not FieldManager.FieldExists(Child1Property) Then<br />                    LoadProperty(Child1Property, ChildObject.GetObject)<br />                End If<br />                Return GetProperty(Of ChildObject)(Child1Property)<br />            End Get<br />        End Property<br /><br />        Private Shared Child2Property As PropertyInfo(Of ChildObject) = RegisterProperty(GetType(ParentObject), New PropertyInfo(Of ChildObject)("Child2"))<br />        Public ReadOnly Property Child2() As ChildObject<br />            Get<br />                If Not FieldManager.FieldExists(Child2Property) Then<br />                    LoadProperty(Child2Property, ChildObject.GetObject)<br />                End If<br />                Return GetProperty(Of ChildObject)(Child2Property)<br />            End Get<br />        End Property<br />End Class<br /><br />Public Class ChildObject<br />Inherits BusinessBase(Of ChildObject)<br /><br />' SOME OTHER PROPERTIES HERE<br /><br />        Private Shared ColumnListProperty As PropertyInfo(Of BaseGridColumnList) = RegisterProperty(GetType(ChildObject), New BSLPropertyInfo(Of BaseGridColumnList)("ColumnList", BaseGridColumnList.NewGridColumnList))<br />        Public Overrides Property ColumnList() As BaseGridColumnList<br />            Get<br />                Return GetProperty(ColumnListProperty)<br />            End Get<br />            Set(ByVal value As BaseGridColumnList)<br />                LoadProperty(ColumnListProperty, value)<br />            End Set<br />        End Property<br /><br />Public Shared Function GetObject() As ChildObject<br />  ' call fetch method here<br />  ' items will be added to columnlist<br />  ' if no values are in the database<br />End Function<br /><br />        Private Overloads Sub DataPortal_Fetch(ByVal criteria As SingleCriteria(Of Profile, String))<br /><br />            ' mark as child, as using lazy loading technique<br />            MarkAsChild()<br /><br />' Add items to ColumnList here<br />End Function<br /><br />End Class</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Monday, April 20, 2009</h2><P>Is this with a local or remote data portal?</P>
<P>And what version of CSLA?</P>
<P>And are you using inheritance (do you have a custom base class)?</P></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
