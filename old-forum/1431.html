<html><header><title>Advice on integrating CSLA 1.52 and CSLA 2.1</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Advice on integrating CSLA 1.52 and CSLA 2.1</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/1431.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>marklindell posted on Tuesday, October 10, 2006</h2>Greetings,<br><br>I have been working on an evolving smart client system that is currently using CSLA 1.52 as well as some integrated legacy VB6 and web technologies.  The system is fairly large and my company does not have a business case to go back and rebuild the existing CSLA v1.52 components to CSLA v2.1.  The current system is built on top of .NET 2.0 and v1.52 is compiled under 2.0.<br><br>I would like to start developing new components using CSLA v2.1 from this point forward and not touch the existing v1.52 components.

<br><br>I am using a data portal hosted in IIS so it would be feasible to have two version of the data portal configured on the server and have each version of CSLA use its respective data portal. 

The one issue I see is in setting of the Principle on the current thread.  This object will be CSLA version specific and it may require automatically authenticating on each version specific Principle before the use of an object.  Does this sound like a viable approach?  Does anyone see any issues with it?

<br><br>Another issue I am aware of is that I will not be able to leverage object reuse between 1.52 and 2.1 in switchable use cases.  I don’t see this as being an issue in my scenario.

<br><br>Any other possible gotchas anyone can think of would be greatly appreciated.<br><br>TIA,<br><br>Mark Lindell

</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JoeFallon1 replied on Tuesday, October 10, 2006</h2><P>My strategy is to have single Principal class (built in 2.1).</P>
<P>This class still has all the properties and code that I wrote in 1.x but uses the 2.1 feature set.</P>
<P>Joe</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>marklindell replied on Tuesday, October 10, 2006</h2>Are you actually doing this or is this a proposal?&nbsp; It sounds correct as long as there are no .NET 2.0 to .NET 1.1 issues.<br><br>Thanks<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JoeFallon1 replied on Tuesday, October 10, 2006</h2><P>I have it running in a test project right now. Plan to go to production code in a few days/weeks when we put the current version to bed and move to ASP.Net 2.0. Looking forward to that. Lots of work ahead though. Plan to run 1.x and 2.1 side by side. I changed the namespace in 2.1 to Csla2 and re-compiled. Works fine.</P>
<P>Joe</P>
<P>&nbsp;</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Massong replied on Thursday, October 12, 2006</h2><P>Hi Mark and Joe,</P>
<P>I used CSLA 1.x und 2.0 simultaneous in my smart client application side by side to update my business objects step by step. The first business objects I updated were <FONT face="Courier New">BusinessPricipal</FONT> and <FONT face="Courier New">BusinessIdentity</FONT> and they worked with my old CSLA 1.x classes very well. These are the steps I did to use CSLA 1.x and 2.0 simultaneous in one application:</P>
<P>* I renamed the namespaces of CSLA 1.x from “CSLA” to “CSLA1”<BR>* I changed the assembly names in the project properties of CSLA 1.x from “CSLA*” to “CSLA1*”</P>
<P>After rebuilding both frameworks there was no overlapping left between them and I was able to reference them both in the same application.</P>
<P>* I simply used “Find and replace in files” to change my Imports-statements to use the <EM>new namespaces</EM> of the <EM>old framework</EM>: I just replaced “<FONT face="Courier New">Imports CSLA</FONT>” with “<FONT face="Courier New">Imports CSLA1</FONT>”.<BR>* We use a Windows Service for Remoting instead of IIS. There I registered to services:</P>
<P><FONT face="Courier New">' CSLA 1.0<BR>RemotingConfiguration.RegisterWellKnownServiceType(GetType(<STRONG>CSLA1</STRONG>.Server.DataPortal), "<STRONG>NameForTheOldCslaService</STRONG>", WellKnownObjectMode.SingleCall)</FONT></P>
<P><FONT face="Courier New">' CSLA 2.0<BR>RemotingConfiguration.RegisterWellKnownServiceType(GetType(<STRONG>Csla</STRONG>.Server.Hosts.RemotingPortal), "<STRONG>DifferentNameForTheNewCslaService</STRONG>", WellKnownObjectMode.SingleCall)</FONT></P>
<P>&nbsp;This should be possible in a Web.config-file too, but I have never tested it.</P>
<P>*&nbsp; My application config file looked like this:</P>
<P><FONT face="Courier New">&lt;?xml version="1.0" encoding="utf-8" ?&gt;<BR>&lt;configuration&gt;<BR>&nbsp; &lt;appSettings&gt;<BR>&nbsp;&nbsp;&nbsp; &lt;!-- CSLA 1.0 --&gt;<BR>&nbsp;&nbsp;&nbsp; &lt;add key="Authentication" value="CSLA" /&gt;<BR>&nbsp;&nbsp;&nbsp; &lt;add key="PortalServer" value="tcp://xyz:12345/NameForTheOldCslaService" /&gt;<BR>&nbsp;&nbsp;&nbsp; &lt;!-- CSLA 2.0 --&gt;<BR>&nbsp;&nbsp;&nbsp; &lt;add key ="CslaAuthentication" value ="Csla"/&gt;<BR>&nbsp;&nbsp;&nbsp; &lt;add key ="CslaDataPortalProxy" value ="Csla.DataPortalClient.RemotingProxy, Csla" /&gt;<BR>&nbsp;&nbsp;&nbsp; &lt;add key ="CslaDataPortalUrl" value ="tcp://xyz:12345/DifferentNameForTheNewCslaService" /&gt;<BR>&nbsp; &lt;/appSettings&gt;<BR>&lt;/configuration&gt;</FONT></P></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
