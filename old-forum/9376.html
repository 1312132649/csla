<html><header><title>Authz 4 - editable child and editable child collection problems</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Authz 4 - editable child and editable child collection problems</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/9376.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>tiago posted on Sunday, August 15, 2010</h2><p>Hi Rocky,</p>
<p>I have a MyEditableRoot that contains a MyEditableChildCollection made of MyEditableChildItem like this:</p>
<p>MyEditableRoot<br />&nbsp; |<br />&nbsp; |--- MyEditableChildCollection<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |-MyEditableChildItem_1<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |-MyEditableChildItem_2</p>
<p>In the &quot;protected static void AddObjectAuthorizationRules()&quot; I set different authorization roles.</p>
<p>1) I noticed AddObjectAuthorizationRules isn&#39;t executed for MyEditableChildCollection.</p>
<p>2) No matter what role I specify like this</p>
<pre style="font-family:consolas;"><span style="color:darkblue;">BusinessRules</span>.<span style="color:darkcyan;">AddRule</span>(<span style="color:blue;">typeof</span>(<span style="color:darkblue;">MyEditableChildItem</span>),&nbsp;<span style="color:blue;">new</span>&nbsp;<span style="color:darkblue;">IsInRole</span>(<span style="color:darkblue;">AuthorizationActions</span>.<span style="font-weight:700;color:purple;">GetObject</span>,&nbsp;<span style="color:#a31515;">&quot;sklbz&quot;</span>));<br /></pre>
<p>I can see each and every item of the collection.</p>
<p>I have strong suspicions this is my fault: I should be checking authorization in factory get method.</p>
<p>The point is: when/where does CSLA.NET check for object level authorization? Only on root objects?</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Sunday, August 15, 2010</h2><p>I think the answer is &quot;when the data portal is invoked.&quot;&nbsp; Now, I don&#39;t know if that also includes the child data portal or not, but I would be suprised if it didn&#39;t.</p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
