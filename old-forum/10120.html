<html><header><title>Dynamic validation based on expression</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Dynamic validation based on expression</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/10120.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>Charleh posted on Tuesday, March 01, 2011</h2><p>Hi all,</p>
<p>I have a SL project in which I&#39;m struggling with a custom rule implementation - basically I have a bizobj which contains a child collection of &#39;fields&#39;. Each field has a FieldLabel, FieldValue and ValidationRule property. The validation rule can be any expression which procduces a boolean value and can include any other field from the collection (which is dynamically replaced by the field value at run time)</p>
<p>For example, if I have 4 fields called: Num1, Num2, Num3 and Sum</p>
<p>An expression may look like [Num1] + [Num2] + [Num3] = [Sum]</p>
<p>This expression is evaluated in a business rule and this part is working correctly </p>
<p>The issue I&#39;m having is that when a user changes the value in say &#39;Num1&#39;, only the business rule for Num1 fires -&nbsp;this is expected behaviour, so I decided to add a public method to allow CheckRules to be called on all other fields in the list when a field changes.</p>
<p>This fires the validation rules on the other items as expected, but even though the rules are broken the UI doesn&#39;t get notified of the change. I can&#39;t raise a propertychanged event for all the fields as this would cause an issue with the audit information log which stores prev/new property values for all changes.</p>
<p>Is there any way of notifying the UI that it needs updating without firing childchanged on the parent or will I need to code round this?</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Charleh replied on Tuesday, March 01, 2011</h2><p>I always figure it out 2 seconds after posting!</p>
<p>Don&#39;t know if it&#39;s the best way to do it, but the list check fires when the property of&nbsp;a field changes. I just added another property around the setter which notifies the audit that it shouldn&#39;t collect any audit change results during the business rule checks, regardless if propertychange notifications hit it. It seems quick enough - I don&#39;t think I&#39;ll be looking at more than 8-10 fields at a time anyway</p>
<p>If anyone has any other suggestions though, they are welcome!</p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
