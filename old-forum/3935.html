<html><header><title>advice on structuring business objects</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>advice on structuring business objects</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/3935.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>Helen W posted on Saturday, November 24, 2007</h2><P>I have an application that has the following candidate BOs:</P>
<OL>
<LI>Organizations. Each organization can have&nbsp;0 -- n Persons associated with it, and each associated Person can have 0 -- n Roles within the Organization. Thus it seems reasonable to have an OrganizationList: subclassing EditableRootListBase, comprising Organization objects. Each Organization object will have a child PersonList comprising Persons, and each Person in this list will have a RoleList.</LI>
<LI>Persons. Similarly the app needs a PersonList subclassing EditableRootListBase, and each Person object will have a child OrganizationList, comprising Organizations, and each Organization in this list will have a RoleList for the 0 -- n relationship between OrganizationPersons and Roles.</LI>
<LI>To make matters more complicated, there is a Members entity, each of which can be either a Person or an Organization.</LI>
<LI>Clearly the child lists for an Organization (i.e. its PersonList&nbsp;with its child PersonRoleList) and for a Person (i.e. its OrganizationList with its child Organization RoleList) are different views on the same underlying database tables. Is there an elegant way to make sure that if, when editing a Person and&nbsp;an Organization is added to&nbsp;that Person, that the Organization's PersonList automatically gets updated too? Is there a better way to structure all this?</LI></OL>
<P>Any suggestions gratefully appreciated.</P>
<P>Helen</P>
<P><BR></P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>dean replied on Saturday, November 24, 2007</h2>Hi Helen,<br><br>Rocky et. al. would normally advise you to step back and work up a list of use cases before planning out your objects like this. Rather than create fewer multi-purpose objects, create specific objects for specific use cases. This will usually answer some of your questions about relationships and such.&nbsp; Don't assume that you need to maintain a complicated object graph unless your use cases demand it.<br><br>Regarding point 4 CSLA does not automatically provide the updates to objects since this is basically a UI issue. You should take a look at Petar's Active Objects for CSLA : http://csla.kozul.info/<br><br>Good Luck!<br><br>Dean<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Plowking replied on Tuesday, November 27, 2007</h2>You also have circular references there, with your person object's collection of organisations, and organisation objects collection of people!<br><br>Consider that in your application its unlikely you'll be able to edit your parent collection objects, their children collections and the grand children objects simultaneously.<br><br>use case suggestions would be<br><br>Get a list of Organisations (read only list of organisations)<br><br>Add a user to an organisation (business base of User, probably with a collection of organisation IDs as property)<br><br>View an organisations users (read only list of User, where you accept organisation id as a criteria)<br><br>Assign a user to an organisation role (your editable user should have an editable list of organisation roles)<br><br>This is perhaps over simplified, but generally its unlikely you'll need an editable root collection, and your business objects may have several editable collections, but are less likely to have editable collections of collections! Check out project tracker sample application for examples of implementation.<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Helen W replied on Tuesday, November 27, 2007</h2><P>I agree with both of you. I am currently building OrganizationList and PersonList objects subclassing ReadOnlyListBase, following what Rocky did in the Project Tracker example. From these, my users can follow an Organization path that shows the relationships from the organization's view, or a Person path that shows the relationships from a Person's view. I think that will handle their needs nicely.</P>
<P>Thanks!</P>
<P>Helen</P>
<P>&nbsp;</P></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
