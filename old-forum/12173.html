<html><header><title>Caching mobile object in WinRT</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Caching mobile object in WinRT</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/12173.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>jteneglio posted on Sunday, October 06, 2013</h2><p>Im looking to Cache CSLA objects in WinRT, can I use the same serialization used to copy mobile object from the server to the windows 8 application? &nbsp;Is there an example of that somewhere?</p>
<p>&nbsp;</p></div><div style='padding:0 15 3 15;background-color:lightgreen'><h2>RockfordLhotka replied on Sunday, October 06, 2013</h2><p>When you say &#39;cache&#39; do you mean in memory or to disk?</p>
<p>If you mean to disk, that&#39;s a little tricky because the serializer (MobileFormatter) is version sensitive in terms of the assemblies. So if you update your app code to a newer assembly version the cache will be unreadable.</p>
<p>If you are OK with that restriction (and code for the exception you&#39;ll get when trying to deserialize the cache once the version numbers don&#39;t match) then you can look at the Clone implementation in BusinessBase. It creates an in-memory clone, but that code will show you how to serialize an object into a MemoryStream (the intermediate step) and deserialize from a MemoryStream.</p>
<p>All you need to do is take the data from the MemoryStream and write it to a binary file, or read a binary file into a MemoryStream. The serialization/deserialization code is the same as in the Clone method.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>skagen00 replied on Monday, October 07, 2013</h2><p>Just to back up the notion of this - we do this with Silverlight and Isolated Storage - and if deserialization fails (for instance in the case of versions changing), well we just consider the cache invalid.</p>
<p>With Silverlight the initial way to deal with large representations of serialized objects was to compress the byte array - we similarly would do this when caching objects too: serialize then compress / decompress then deserialize.&nbsp; With MobileFormatter being better about serialized object size you may not need to compress the seriailzed byte array but it may be something to think about if there are any space considerations.</p>
<p>(With compression I had been seeing 93-95% compression, with just the mobile formatter optimizations alone it was more like 80% for me - so a three to four-fold difference in the end-result byte array.&nbsp; That is what I recall, at least.</p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
