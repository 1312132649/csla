<html><header><title>Customer With Multi Addresses</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Customer With Multi Addresses</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/605.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>kdlc posted on Wednesday, July 12, 2006</h2><P>Hi everyone,<BR>Im Looking to implement a multi addresses feature on a Root Object Called Customer.<BR>For Example:</P>
<P>Customer: John Doe<BR>&nbsp;&nbsp;&nbsp;Addresses:<BR>&nbsp;&nbsp;&nbsp;&nbsp;* Business Address: &nbsp;123 Test Ave<BR>&nbsp;&nbsp;&nbsp;&nbsp;* Home Address:&nbsp;&nbsp;456 Test St<BR>&nbsp;&nbsp;&nbsp;&nbsp;* Other:&nbsp;&nbsp;789 Test Blvd</P>
<P>Im thinking about using a child collection, but since they are predefined (Business-Home-Other) would make more sense to use a hashtable instead with a&nbsp; parameterized property in the Root Object?<BR><BR>Any Comments?<BR>Thanks in Advance!<BR></P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Wednesday, July 12, 2006</h2>I would have an AddressType property on each Address object; AddressTypeList could be a NameValueList.&nbsp; The reason is that it then becomes trival to add other address types later.&nbsp; <br><br>You can enforce that each type of address is present via business rules (Customer would check the collection to make sure there is one and only one Business, Home, and Other address).<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>vargasbo replied on Wednesday, July 12, 2006</h2>I have customer - addresslist - address. <br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>y0mbo replied on Wednesday, July 12, 2006</h2>+1 for 
										<a>ajj3085</a>'s approach.<br><br>&gt; I have customer - addresslist - address. <br><br>I would use customer, addresses, address, but that's just semantics.<br><br><br><br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>SonOfPirate replied on Friday, July 14, 2006</h2><P>We've run into this scenario a number of times.&nbsp; What we've done is first look at an address as a free-standing object: Address.&nbsp; We can have a collection of these objects: AddressCollection.&nbsp; This collection will return a list of all the addresses in the system (keep that in mind) and directly correlate to the underlying data store.</P>
<P>What you are looking for is the relationship that is established between a customer and one or more of these addresses.&nbsp; This relationship is established by a CustomerAddress object.&nbsp; This object maintains the reference to the parent Customer object as well as the information contained in the standard Address object.&nbsp; In addition to the basic information, we typically have an AddressType property based on an enumeration, as suggested above.&nbsp; We have not run into the "snowbird" issue before but I am making note of it because that is certainly something we should account for.&nbsp; To do so, we would simply, again, as suggested above, add StartDate and EndDate properties to the CustomerAddress class as these further define the relationship, not the address iteself.</P>
<P>The&nbsp;list of addresses that belong to a particular customer is encapsulated in the CustomerAddressCollection which uses the reference to the parent Customer object to filter the select query to return only the appropriate objects.</P>
<P>To accomplish this, our data store is setup with a Customers table, an Addresses table and a CustomerAddresses table.&nbsp; The latter has fields for the Customer's ID, the Address ID, the AddressType (and our new StartDate and EndDate fields).&nbsp; The select query performs a join with the Addresses table via the Address ID column and returns the merged records.</P>
<P>The beauty of this approach is that it also supports a many-to-many relationship between Customers and Addresses with each relationship tailored to the individual combination as one person may call an address&nbsp;A 'home' while another calls it 'vacation home' or something.</P>
<P>Hope that helps.</P>
<P>btw - we do the same thing with phone numbers.</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>david.wendelken replied on Saturday, July 15, 2006</h2><P>In the various industries that I've done work in, there have been two main definitions of addresses:</P>
<OL>
<LI>A place where we contact our customers.</LI>
<LI>A place where we have our stuff that our customers use.</LI></OL>
<P>An electric or water utility has the need for the second definition, because they have a physical utility connection at an address.&nbsp; Customers come and they go, but the sewer pipe remains.</P>
<P>Most businesses only need option 1, because they couldn't care less about an address a customer used to be at, or an address a customer isn't at now.</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>david.wendelken replied on Wednesday, July 12, 2006</h2><P>Do you have to deal with snowbirds?</P>
<P>(That's a mailing list industry term for people who consistently have different addresses for different parts of the year, originally derived from all the retired Yankees from the cold northern states who live in Florida for the winter months each year.)</P>
<P>That's a possible business requirement that might affect your object design...</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>kdlc replied on Wednesday, July 12, 2006</h2><P>Yup, we have snowbirds ... i was thinking about that too, i guess it should be handled as another address (business-Home-Other-Snowbird) + a start date and&nbsp;end date.</P>
<P>&nbsp;</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>david.wendelken replied on Wednesday, July 12, 2006</h2><BLOCKQUOTE><div><img src="/Themes/default/images/icon-quote.gif"> <strong>kdlc:</strong></div><div>
<P>Yup, we have snowbirds ... i was thinking about that too, i guess it should be handled as another address (business-Home-Other-Snowbird) + a start date and&nbsp;end date.</P>
<P></div></BLOCKQUOTE></P>
<P>You may want to make it a start "day of month, year unspecified" or "month, year unspecified" for those snowbirds to save a lot of data entry each year.&nbsp; </P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JonM replied on Saturday, July 15, 2006</h2><P>We use a similar system</P>
<P>Customer &gt; AddressList &gt; Address.</P>
<P>However, The customer also has fields of <FONT color=#0000ff>PrimaryBillingAddress</FONT>, <FONT color=#0000ff>PrimaryShippingAddress</FONT>, and <FONT color=#0000ff>PrimaryServiceAddress</FONT>.&nbsp; These fields simply hold an ID that links them to a specific address in the customer's address list.&nbsp; This made it much easier than denoting what type of address each was, specifically because most customers have the same address for all 3.&nbsp; </P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>pelinville replied on Saturday, July 15, 2006</h2>I do the same as SonOfPirate.&nbsp;Mostly. 
<P>&nbsp;</P>
<P>An address is something and has behavior.&nbsp; It knows it's type and anything else it may need.</P>
<P>I haven't found a need, yet, for extending the base address class.</P>
<P>Other objects (People, Students, Instructors, Sites) has zero or more addresses and imposes limits (if any)&nbsp;on the&nbsp;addresses it can have.</P>
<P>I don't feel that an address should know anything about when it is active or how it is used.&nbsp; </P>
<P>So for a&nbsp;snowbird it would have a list of addresses and it would know when each one was valid.&nbsp; </P>
<P>Most objects, however, simply have a list of addresses.&nbsp; And each address can be shared by any number of objects.</P>
<P>The data tables end up being StudentAddress_Link (studentid, addressid), SiteAdress_Link (SiteID, AddressID).</P>
<P>Now since students can have addresses defined by time (with one parent from x to y with other parent from a to b much like a snowbird) I have another object called StudentAddressSchedule.&nbsp; They still have zero or more addresses in a list&nbsp;but StudentAddressSchedule will say when an address is active for this student.&nbsp; The table is simply StudentID, AddressID, FromDate, ToDate.<SPAN>&nbsp; </SPAN>I like this approach better because the basic pattern (objects have lists of addresses) can be extended by adding an object that extends behavior.</P>
<P>Most of my tables end up looking like this since I always try to define the object first then design the tables to accommodate them. It drives some DBA's absolutely crazy since I have made the RDBMS into a pointer matrix.&nbsp; But I don't care.</P>
<P>&nbsp;</P></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
