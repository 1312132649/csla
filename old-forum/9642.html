<html><header><title>AddBusinessRules &amp; AddObjectAuthorizationRules getting called twice per type</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>AddBusinessRules &amp; AddObjectAuthorizationRules getting called twice per type</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/9642.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>marthac posted on Friday, October 15, 2010</h2><p>If I put a debug statement in my AddBusinessRules &amp; AddObjectAuthorizationRules functions, like so:</p>
<p>#if SILVERLIGHT<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; System.Diagnostics.Debug.WriteLine(&quot;SL AddObjectAuthorizationRules() called for type: &quot; + typeof(T));<br />#else<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; System.Diagnostics.Debug.WriteLine(&quot;NET AddObjectAuthorizationRules() called for type: &quot; + typeof(T));<br />#endif</p>
<p>I noticed that they are being called once on the Silverlight side and once on the .NET side for each type.</p>
<p>Is that the expected behavior?</p></div><div style='padding:0 15 3 15;background-color:lightgreen'><h2>RockfordLhotka replied on Friday, October 15, 2010</h2><p>Yes, absolutely!</p>
<p>They are called once per type per AppDomain. In a 3-tier deployment you have two AppDomains, one on the client and one on the server.</p>
<p>In a 4-tier deployment you have three AppDomains (client, web server, app server).</p>
<p>The rule definitions aren&#39;t serialized over the wire - that&#39;d be very expensive. It is much cheaper to rehook the definitions on each side of the wire.</p>
<p>The end result is that your types have the same rules on both sides of the wire, so you can interact with the objects in either place and get the same results. That&#39;s the whole idea behind mobile objects.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>marthac replied on Friday, October 15, 2010</h2><p>That&#39;s what I thought. <br />I just was doing a sanity check here to make sure the change I just made to my AddBusinessRules &amp; AddObjectAuthorizationRules didn&#39;t break something, because I swear these functions looked like they were&nbsp;getting called just once&nbsp;per type&nbsp;before.</p>
<p>Thanks for the clarification. <img src="http://forums.lhotka.net/emoticons/emotion-2.gif" alt="Big Smile" />&nbsp;</p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
