<html><header><title>Business Rule Testability</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Business Rule Testability</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/9109.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>dpk posted on Friday, June 18, 2010</h2><p>I&#39;d like to be able to write unit tests for the custom business rules I create so that I can verify the rules work as expected without having to test them through a business object that uses them. RuleContext does not have a public constructor and there is no interface that can be implemented in a test harness class to provide the context for the Execute method. Ideas?</p></div><div style='padding:0 15 3 15;background-color:lightgreen'><h2>RockfordLhotka replied on Saturday, June 19, 2010</h2><p>Yeah, that&#39;s a good point, and I encountered the same thing recently.</p>
<p>Many tests interact with the Target property - in which case you can&#39;t really unit test the rule in isolation anyway, so this is a non-issue.</p>
<p>But for tests that exclusively use the input/output property dictionaries it would be possible to fabricate a context against which the rule could run. I am considering adding a public ctor that loads the input dictionary, which would address this unit test requirement.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>dpk replied on Saturday, June 19, 2010</h2><p>I agree testing in isolation is a non-issue. I was simply stating that I do not want to test the business rules <em>through</em> a business object. What I&#39;d like to see is a way to inject a RuleContext into the Execute method. This could be accomplished by providing a public IRuleContext interface from which I can build a mock / stub / double to inject into the Execute method. The mock RuleContext would allow me to provide a mock business object to the Target property or set input / output dictionaries as required by the rule. The key here is that I&#39;m injecting my test context rather than having it injected by the CSLA business rules framework.</p>
<p>I&#39;m only just getting familiar with the new business rule framework so I&#39;m not sure that such an interface would work in all circumstances.</p>
<p>Dave</p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
