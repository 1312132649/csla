<html><header><title>Activator.CreateInstance always returns null for NameValueListBase class</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Activator.CreateInstance always returns null for NameValueListBase class</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/10595.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>TSF posted on Friday, August 05, 2011</h2><p>Using CSLA 4.1&nbsp;/ Encapsulated Invocation.&nbsp; We have other non-NVLB objects that are working fine.&nbsp; However, we did our first NVLB object and when the dalManager.GetProvider method hits this line:</p>
<h4><span style="font-family:Consolas;color:#0000ff;font-size:x-small;"><span style="font-family:Consolas;color:#0000ff;font-size:x-small;"><span style="font-family:Consolas;color:#0000ff;font-size:x-small;">
<p style="padding-left:30px;">return <span style="font-family:Consolas;color:#2b91af;font-size:x-small;"><span style="font-family:Consolas;color:#2b91af;font-size:x-small;"><span style="font-family:Consolas;color:#2b91af;font-size:x-small;">Activator</span></span></span><span style="font-family:Consolas;font-size:x-small;"><span style="font-family:Consolas;font-size:x-small;"><span style="color:#000000;">.CreateInstance(type) </span></span></span><span style="font-family:Consolas;color:#0000ff;font-size:x-small;"><span style="font-family:Consolas;color:#0000ff;font-size:x-small;"><span style="font-family:Consolas;color:#0000ff;font-size:x-small;">as</span></span></span><span style="font-family:Consolas;font-size:x-small;"><span style="font-family:Consolas;font-size:x-small;"><span style="color:#000000;"> T;</span></span></span></p>
</span></span></span><span style="font-family:Consolas;font-size:x-small;"><span style="font-family:Consolas;font-size:x-small;"></span></span></h4>
<p>&nbsp;It always returns null.&nbsp; However, the variable type looks correct at runtime.&nbsp;&nbsp; {Company.BusinessObject.Transportation.DataAccess.Sql.ShipMethodListDal}</p>
<p>Any thoughts on what&nbsp;we should check?&nbsp; Thanks.<br />Tim</p></div><div style='padding:0 15 3 15;background-color:lightgreen'><h2>tmg4340 replied on Saturday, August 06, 2011</h2><p>Without more information, the only answer I can provide is the obvious one: the &quot;as&quot; operator will return a NULL when the object cannot be converted into the type requested.&nbsp; So the only thing I can presume is that the type you&#39;re passing into CreateInstance cannot be converted into whatever &quot;T&quot; is.</p>
<p>(Unfortunately, based on&nbsp;your description, I&#39;m not sure if &quot;type&quot; is &quot;ShipMethodListDal&quot; or if &quot;T&quot; is...)</p>
<p>HTH</p>
<p>- Scott</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>TSF replied on Monday, August 08, 2011</h2><p>Thanks to both for your responses.&nbsp; I tried Jonny&#39;s suggestion, but when that didn&#39;t work I went back to pondering Scott&#39;s &quot;<em>whatever &#39;T&#39; is</em>&quot; comment.&nbsp;&nbsp;I began to dig further and found that the ShipMethodListDal class was not implementing IShipMethodListDal.&nbsp; As soon as we added that it started working.</p>
<p style="padding-left:30px;">class ShipMethodListDal :<strong> ISmartRegionInfoListDal</strong> {</p>
<p style="padding-left:30px;">&nbsp;&nbsp;&nbsp;&nbsp; public System.Data.IDataReader Fetch() { }</p>
<p style="padding-left:30px;">}</p>
<p>&nbsp;</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JonnyBee replied on Sunday, August 07, 2011</h2><p>I have seen the same type of problem with generic objects that have more than one generic constraints. </p>
<p>IIRC changing to use Csla.Reflection.MethodCaller.CreateInstance(type) did work as expected. </p>
<p>Which runtime are you using (NET/SL/WP)?</p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
