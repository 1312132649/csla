<html><header><title>XamDataGrid &amp; CslaDataProvider</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>XamDataGrid &amp; CslaDataProvider</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/5884.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 posted on Wednesday, November 26, 2008</h2>Hi,<br><br>I was wondering if anyone else here is using XamDataGrid with Csla.&nbsp; I'm having a problem where at run-time, if the CslaDataProvider returns a BLB which contains no items, the grid does not display the "New Row" to appear.&nbsp; <br><br>I tried to reproduce the issue without Csla, and was unable to.&nbsp; The ObjectDataProvider worked properly (although it still called GetList even though I set IsIntialLoad = false).&nbsp; As soon as I switched things to be Csla objects (BindingList -&gt; BusinessListBase, object -&gt; BusinessBase, ObjectDataProvider -&gt; CslaDataProvider) I got the wierd behavior.<br><br>Any ideas?<br><br>Thanks<br>Andy<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Wednesday, November 26, 2008</h2>I'm narrowing in on the cause of this.&nbsp; It's something about BLB, although I'm not sure what.&nbsp; If I create a fake class, MyBLB&lt;T, C&gt; : Csla.Core.ExtendedBindingList&lt;C&gt; the problem doesn't occur.&nbsp; But switching back to BLB causes the new row template to disappear.<br><br>Not saying Csla is the cause; just that <b>something</b> in the interaction of BLB and XamDataGrid is causing it... I'll post more as I find it..<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Wednesday, November 26, 2008</h2>Ok... here's what I've discovered.<br><br>Somehow... going through the dataportal seems to be the key.<br><br>Given this class:<br>&nbsp;&nbsp;&nbsp; [<font color="#008000">Serializable</font>]<br>&nbsp;&nbsp;&nbsp;<font color="#0000ff"> public class</font> <font color="#008000">MyListSubclass</font>&lt;T, C&gt; : Csla.Core.<font color="#008000">ExtendedBindingList</font>&lt;C&gt; {<br><br>&nbsp;&nbsp;&nbsp; }<br><br>&nbsp;&nbsp;&nbsp; [<font color="#008000">Serializable</font>]<br>&nbsp;&nbsp;&nbsp; <font color="#0000ff">public class</font> <font color="#008000">MyList </font>: <font color="#008000">MyListSubclass</font>&lt;<font color="#008000">MyList</font>, <font color="#008000">MyObject</font>&gt; {<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <font color="#0000ff">public static</font> <font color="#008000">MyList </font>GetList() {<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <font color="#0000ff">return </font><font color="#008000">DataPortal</font>.Create&lt;<font color="#008000">MyList</font>&gt;();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <font color="#008000">// return new MyList();</font>&nbsp;&nbsp;&nbsp; <font color="#008000">// If you comment the above line and uncomment this, the grid works as expected.</font><br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }<br><br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; [<font color="#008000">RunLocal</font>]<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <font color="#0000ff">private void</font> DataPortal_Create() {<br><br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }<br><br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <font color="#0000ff">protected override object</font> AddNewCore() {<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <font color="#008000">MyObject </font>result;<br><br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; result = <font color="#008000">MyObject</font>.New();<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; OnAddingNew( <font color="#0000ff">new </font><font color="#008000">AddingNewEventArgs</font>( result ) );<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; Add( result );<br><br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <font color="#0000ff">return </font>result;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }<br><br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <font color="#0000ff">private </font>MyList() {<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; AllowEdit = <font color="#0000ff">true</font>;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; AllowNew = <font color="#0000ff">true</font>;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; AllowRemove = <font color="#0000ff">true</font>;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; }<br><br>At this point, I'm totally at a loss... does anyone have any ideas what might be going on?<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Fintanv replied on Wednesday, November 26, 2008</h2>We are seeing the same thing, but have not yet had time to dig into the underlying cause.<br><br>I have been spending my time attempting to get the PropertyStatus control working with the XamGrid, or some other way to display the IDataError info in the grid, but so far without much success.<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Wednesday, November 26, 2008</h2>There's a way to sort of get IDataError working with the grid, but it suffers some drawbacks in my mind.&nbsp; Here's the link to the <a href="http://karlshifflett.wordpress.com/2008/05/15/sample-series-idataerrorinfo-and-the-infragistics-xamdatagrid/">article</a> anyway though.&nbsp; My main issue is that the code doesn't respond to PropertyChanged events, it requires that the cell lose it's focus.&nbsp; But maybe that will be enough to work for you.<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Fintanv replied on Tuesday, December 09, 2008</h2>Did you ever find out anything further on this issue?<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Tuesday, December 09, 2008</h2>I was able to reproduce this issue outside of Csla.&nbsp; See my thread here at Infragistics:&nbsp; <a href="http://forums.infragistics.com/forums/t/17008.aspx">http://forums.infragistics.com/forums/t/17008.aspx</a><br><br>I've also posted a support issue with this.&nbsp; I did find the cause of this behavior at least though.&nbsp; If the first query by the DataSourceProvider subclass fails, and then you subsequently call Refresh and the resulting collection is empty, the new row doesn't display.&nbsp; <br><br>There's a sample application attached to my forum post there you can check out.&nbsp; If you add a static method overload that doesn't take parameters, everything works fine.&nbsp; If the first refresh results in an error (because the method isn't there in my sample), the grid fails.<br></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
