<html><header><title>MVVM ViewModel and String code smell</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>MVVM ViewModel and String code smell</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/10615.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>jamie.clayton posted on Tuesday, August 16, 2011</h2><p>Rocky,</p>
<p>I see there have been a few discussions around using strings in the ViewModel&nbsp;parts of Csla.Xml namespace.</p>
<p>I wonder if one of the ways around the use of strings in the ViewModel Async method calls might be to use a code generator (T4) to write all the strings out to a MetaData file. For instance Daneil Vaughan has created some templates already.</p>
<p><a href="http://danielvaughan.org/post/MetaGen-A-project-metadata-generator-for-Visual-Studio-using-T4.aspx">http://danielvaughan.org/post/MetaGen-A-project-metadata-generator-for-Visual-Studio-using-T4.aspx</a></p>
<p>What do you think?</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Tuesday, August 16, 2011</h2><p>Yeah, with the sync methods we were able to accept a lambda expression, and so the factory method can be passed as a parameter.</p>
<p>The async factory methods are complex, because they require a callback parameter that includes a double-indirected generic type. If I remember correctly, you can still use a lambda in .NET (WPF), but not Silverlight. It has been a while since I looked at this though, so I could be mis-remembering.</p>
<p>Code generation is often a solution for magic strings - at least of a sort. Not ideal, but sometimes as good as can be done.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Peran replied on Wednesday, August 17, 2011</h2><p>
<p>Csla.Xaml.ViewModelBase&lt;T&gt; supports lambda expressions to avoid the use of strings for async and sync factory methods</p>
<p>Async:</p>
<p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; this.BeginRefresh(handler =&gt; ClientEdit.BeginGetItem(clientId, userState, handler));</p>
<div>Sync:</div>
<div>
<p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; this.DoRefresh(() =&gt; ClientEdit.GetItem(clientId));</p>
<div></div>
<div>Regards</div>
</div>
<div></div>
<div>Peran</div>
</p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
