<html><header><title>AddNewCore and OnAddingNew</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>AddNewCore and OnAddingNew</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/5956.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>daniel_higgins posted on Tuesday, December 09, 2008</h2><P>I've been under the impression that the way to handle adding new items to a collection in Csla is to override the AddNewCore method. However, poking around in the BindingList base class suggests that it may be more appropriate to override the OnAddingNew method, and set the NewObject field of the AddingNewEventArgs object to the newly created child object. Perhaps something like:</P>
<P>protected override void OnAddingNew(AddingNewEventArgs e){<BR>&nbsp;&nbsp;&nbsp; base.OnAddingNew(e);<BR>&nbsp;&nbsp;&nbsp; if (e.NewObject == null) e.NewObject = Child.New();<BR>}</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Tuesday, December 09, 2008</h2>I think that you'll get an exception, because if you're following Csla design, you're constructor will be private and the standard AddNewCore will fail.<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>daniel_higgins replied on Tuesday, December 09, 2008</h2><P>The AddNewCore base class method will raise the OnAddingNew event. If you override the OnAddingNew (or simple register for the event (e.g. in UI code)), and set the AddingNewEventsArg.NewObject property to the new child object (i.e. you create it using your static factory method), when AddNewCore finds that AddingNewEventArgs is not&nbsp;null, it will use this instead of trying to call the constructor.</P></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
