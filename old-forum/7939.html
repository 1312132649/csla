<html><header><title>Csla Security Credentials</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Csla Security Credentials</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/7939.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>decius posted on Tuesday, November 03, 2009</h2><P>I'm upgrading some of the security stuff at my workplace and was hoping for some feedback on a few things. For the Identity's criteria, in the past I have always just extended the EditableRoot class to get some validation features.&nbsp; However, I'm aware of the CriteriaBase like what's used in the Rolodex (example below).</P>
<P>Should I avoid using EditableRoot's as my criteria?&nbsp;Is it too much bloat?&nbsp; </P><FONT size=2>
<P>[</FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>Serializable</FONT></FONT><FONT size=2>()]</P>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>public</FONT></FONT><FONT size=2> </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>class</FONT></FONT><FONT size=2> </FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>HeroLoginCrit</FONT></FONT><FONT size=2> : </FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>CriteriaBase</P></FONT></FONT><FONT size=2>
<P>{</P>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>public</FONT></FONT><FONT size=2> </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>enum</FONT></FONT><FONT size=2> </FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>CheckTypes</FONT></FONT><FONT size=2> { Login, IsSignedIn }</P>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>public</FONT></FONT><FONT size=2> HeroLoginCrit() { }</P>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>private</FONT></FONT><FONT size=2> </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>string</FONT></FONT><FONT size=2> _userId;</P>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>private</FONT></FONT><FONT size=2> </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>string</FONT></FONT><FONT size=2> _visn;</P>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>private</FONT></FONT><FONT size=2> </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>string</FONT></FONT><FONT size=2> _password;</P>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>private</FONT></FONT><FONT size=2> </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>string</FONT></FONT><FONT size=2> _catchment;</P>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>private</FONT></FONT><FONT size=2> </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>string</FONT></FONT><FONT size=2> _vasId;</P>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>public</FONT></FONT><FONT size=2> </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>string</FONT></FONT><FONT size=2> UserId { </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>get</FONT></FONT><FONT size=2> { </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>return</FONT></FONT><FONT size=2> _userId; } }</P>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>public</FONT></FONT><FONT size=2> </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>string</FONT></FONT><FONT size=2> Password { </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>get</FONT></FONT><FONT size=2> { </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>return</FONT></FONT><FONT size=2> _password; } }</P>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>public</FONT></FONT><FONT size=2> </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>string</FONT></FONT><FONT size=2> Visn { </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>get</FONT></FONT><FONT size=2> { </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>return</FONT></FONT><FONT size=2> _visn; } }</P>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>public</FONT></FONT><FONT size=2> </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>string</FONT></FONT><FONT size=2> VasId { </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>get</FONT></FONT><FONT size=2> { </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>return</FONT></FONT><FONT size=2> _vasId; } }</P>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>public</FONT></FONT><FONT size=2> </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>string</FONT></FONT><FONT size=2> Catchment { </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>get</FONT></FONT><FONT size=2> { </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>return</FONT></FONT><FONT size=2> _catchment; } }</P>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>public</FONT></FONT><FONT size=2> HeroLoginCrit(</P>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>string</FONT></FONT><FONT size=2> userId,</P>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>string</FONT></FONT><FONT size=2> visn, </P>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>string</FONT></FONT><FONT size=2> password,</P>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>string</FONT></FONT><FONT size=2> catchment,</P>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>string</FONT></FONT><FONT size=2> vasId</P>
<P>)</P>
<P>: </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>base</FONT></FONT><FONT size=2>(</FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>typeof</FONT></FONT><FONT size=2>(</FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>HeroLoginCrit</FONT></FONT><FONT size=2>))</P>
<P>{</P>
<P>_userId = userId;</P>
<P>_password = password;</P>
<P>_catchment = catchment;</P>
<P>_vasId = vasId;</P>
<P>_visn = visn;</P>
<P>}</P>
<P>&nbsp;</P>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>protected</FONT></FONT><FONT size=2> </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>override</FONT></FONT><FONT size=2> </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>void</FONT></FONT><FONT size=2> OnGetState(Csla.Serialization.Mobile.</FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>SerializationInfo</FONT></FONT><FONT size=2> info, </FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>StateMode</FONT></FONT><FONT size=2> mode)</P>
<P>{</P>
<P>info.AddValue(</FONT><FONT color=#a31515 size=2><FONT color=#a31515 size=2>"_userId"</FONT></FONT><FONT size=2>, _userId);</P>
<P>info.AddValue(</FONT><FONT color=#a31515 size=2><FONT color=#a31515 size=2>"_password"</FONT></FONT><FONT size=2>, _password);</P>
<P>info.AddValue(</FONT><FONT color=#a31515 size=2><FONT color=#a31515 size=2>"_visn"</FONT></FONT><FONT size=2>, _visn);</P>
<P>info.AddValue(</FONT><FONT color=#a31515 size=2><FONT color=#a31515 size=2>"_vasId"</FONT></FONT><FONT size=2>, _vasId);</P>
<P>info.AddValue(</FONT><FONT color=#a31515 size=2><FONT color=#a31515 size=2>"_catchment"</FONT></FONT><FONT size=2>, _catchment);</P>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>base</FONT></FONT><FONT size=2>.OnGetState(info, mode);</P>
<P>}</P>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>protected</FONT></FONT><FONT size=2> </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>override</FONT></FONT><FONT size=2> </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>void</FONT></FONT><FONT size=2> OnSetState(Csla.Serialization.Mobile.</FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>SerializationInfo</FONT></FONT><FONT size=2> info, </FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>StateMode</FONT></FONT><FONT size=2> mode)</P>
<P>{</P>
<P>_userId = (</FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>string</FONT></FONT><FONT size=2>)info.Values[</FONT><FONT color=#a31515 size=2><FONT color=#a31515 size=2>"_userId"</FONT></FONT><FONT size=2>].Value;</P>
<P>_password = (</FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>string</FONT></FONT><FONT size=2>)info.Values[</FONT><FONT color=#a31515 size=2><FONT color=#a31515 size=2>"_password"</FONT></FONT><FONT size=2>].Value;</P>
<P>_password = (</FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>string</FONT></FONT><FONT size=2>)info.Values[</FONT><FONT color=#a31515 size=2><FONT color=#a31515 size=2>"_vasId"</FONT></FONT><FONT size=2>].Value;</P>
<P>_password = (</FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>string</FONT></FONT><FONT size=2>)info.Values[</FONT><FONT color=#a31515 size=2><FONT color=#a31515 size=2>"_visn"</FONT></FONT><FONT size=2>].Value;</P>
<P>_password = (</FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>string</FONT></FONT><FONT size=2>)info.Values[</FONT><FONT color=#a31515 size=2><FONT color=#a31515 size=2>"_catchment"</FONT></FONT><FONT size=2>].Value;</P>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>base</FONT></FONT><FONT size=2>.OnSetState(info, mode);</P>
<P>}</P>
<P>}</P></FONT></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Regent replied on Tuesday, November 03, 2009</h2>Whatever you use as a fetch criteria should be serialized and passed to the DataPortal so I think it's better use as simple object as possible to preserve data being transferred over the network.<br /><br />As for me I prefer using SingleCriteria for fetching single-key based entities or to use private nested criteria class (derived from Object) of the class to be fetch if I need to use complex key.<br /><br />Particularly for HeroLoginCrit class presented - I don't understand the reason for overloading OnGetState/OnSetState...</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>decius replied on Tuesday, November 03, 2009</h2><P><BLOCKQUOTE><div></P>
<P>&nbsp;I don't understand the reason for overloading OnGetState/OnSetState... </P>
<P></div></BLOCKQUOTE></P>
<P>It's for serializing private members of the class with the mobile formatter.&nbsp; When derived from ManagedObject which is what CriteriaBase extends, you don't get the benefits of serialization that some of the other classes have, thus manually performing this copy yourself.&nbsp; Again, you can see that in the Rolodex example.&nbsp;A lot of that has to do with the limitations of the mobileformatter when in Silverlight.</P>
<P>Thanks for your input, perhaps I'll look into just how much bloat the editableroot&nbsp;class adds to the wire before I make a decision.&nbsp; Csla rules help us out a lot with keeping our business logic standardized for criteria&nbsp;around here, so it's hard for me to just let it go.</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Tuesday, November 03, 2009</h2><P>CriteriaBase supports managed backing fields, so you shouldn't have to deal with private backing fields and manual serialization unless you choose to do so.</P>
<P>The only thing CriteriaBase doesn't have that you get in ReadOnlyBase (for example) is the overload of RegisterProperty() that auto-detects the containing type, so the first parameter must be the type of your particular class.</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Wednesday, November 04, 2009</h2>When would you want to use Managed backing fields for a criteria?&nbsp; I assume private backing fields still work, as I have quite a bit of them on the latest 3.7 or .8&nbsp;release.</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Wednesday, November 04, 2009</h2>






 





<div class=Section1>

<p class=MsoNormal><span>If you are building a Silverlight app that talks to an app
server you&#8217;ll want managed backing fields so you get automatic serialization.</span><b><span><o:p></o:p></span></b></p>

<p class=MsoNormal><span><o:p>&nbsp;</o:p></span></p>

</div>



</div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
