<html><header><title>How to automatically check the same property with different values</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>How to automatically check the same property with different values</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/12095.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>fanste posted on Monday, July 29, 2013</h2><p>Hi,</p>
<p>I have some problem...I have gridview and one column Name, so I implemented Business rule the Name is required and rule the Name is uniqe ...so when I entered text in first row example &quot;Car&quot; after that I entred the same text in second row the rule will be invoked and I got the error...That&#39;s fine...but problem is when I change first row for example entered &quot;Car1&quot; the error in second row still there...&nbsp;</p>
<p>Please help,</p>
<p>Stefan</p></div><div style='padding:0 15 3 15;background-color:lightgreen'><h2>skagen00 replied on Monday, July 29, 2013</h2><p>One sort of avenue for a rule like this is to have a managed property that has an internal setter on the child for &quot;IsNameUnique&quot; (I&#39;m assuming you&#39;re checking unique amongst children in a collection).&nbsp; Then, simply have a business rule tied to this managed property&nbsp;on the child class to validate that IsNameUnique = true.&nbsp; Literally, that&#39;s the rule - make sure the value is true.</p>
<p>Then, in OnChildChanged of the collection when the propertychangedargs says the name changed on a child, just do a quick traversal of children to recheck uniqueness rules on an o(n) manner, setting this IsNameUnique value for all children.&nbsp; I would wager this sort of algorithm would work in a performantly acceptable way for a hundred+ children. </p>
<p>Just one avenue.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>fanste replied on Tuesday, July 30, 2013</h2><p>Hi,</p>
<p>that is look fine to me. But how to call CheckRules in Collection class ?</p>
<p>Thanks</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>cfarren replied on Tuesday, July 30, 2013</h2><p>You can&#39;t. You have to loop through each item in the collection and call CheckRules on the item class.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>fanste replied on Tuesday, July 30, 2013</h2><p>It&#39;s works. Thanks</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JonnyBee replied on Tuesday, July 30, 2013</h2><p>One might argue that the responsibility for a unique entry should be handled at a higher level (a BusinessObject that owns the list) rather than within each child.</p>
<p>So you may also want to look at the NoDuplicates generic rule that was posted earlier to validate the list as such:<br /><a href="http://forums.lhotka.net/forums/p/10494/49113.aspx#49113">http://forums.lhotka.net/forums/p/10494/49113.aspx#49113</a></p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>skagen00 replied on Tuesday, July 30, 2013</h2><p>I think it&#39;s true what Johnny says, but if you want the error indicators to nicely show next to each offending child item (which seems to have a lot of value in cases like this), it can&#39;t easily be done from the parent object.</p>
<p>&nbsp;</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JonnyBee replied on Tuesday, July 30, 2013</h2><p>Yes, it has to do with the user experience as well.&nbsp;</p>
<p>It would be very easy f.ex to have button and action for &quot;Show Duplicates&quot; and use a FilteredBindingList / LINQ query to show and order the duplicate items on the unique key.&nbsp;</p>
<p>Calling rules / setting a property at runtime is a valid approach - just be aware of possible dependencies and how many rules you _ACTUALLY_ end up running (and how many OnPropertyChanged event is atually generated to notify the UI), especially if it is a long list and the rule must also make sure to be valid when the Parent list is null (ex new object - not yet added to the list).</p>
<p>&nbsp;</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>cfarren replied on Monday, July 29, 2013</h2><p>What is the structure of the business objects? Do you have a parent of type BusinessBase that has a child list class (BusinessListBase) which is used to populate the grid or is it just a BusinessListBase?</p>
<p>If your parent object is a BusinessBase then inside the class that determines the lines in the grid, set the Name properties&nbsp;PropertyInfo backing&nbsp;field to be internal or friend and then override OnChildChanged in the parent class. When that is called you can loop through each of the items in the BusinessListBase and call CheckRules on the backing field.</p>
<p>Alternatively you can create a rule in the line object that loops though each item in its parent list and calls CheckRules.</p>
<p>My apologies if that doesn&#39;t make sense. My morning coffee hasn&#39;t kicked in yet <img src="http://forums.lhotka.net/emoticons/emotion-5.gif" alt="Wink" /></p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>fanste replied on Tuesday, July 30, 2013</h2><p>Hi,</p>
<p>I have BusinessBase class and BusinessBindingListBase, grid is binding with BusinessBindingListBase.&nbsp;</p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
