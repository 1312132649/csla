<html><header><title>PropertyInfo&lt;T&gt; Subclass in c# example?</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>PropertyInfo&lt;T&gt; Subclass in c# example?</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/6911.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>SiegfiedN posted on Thursday, May 07, 2009</h2>Hi,<br><br>I am a total newbie to Csla and am in the process of learning and applying Csla by studying the 'Expert C# 2008 Business Objects' book.<br><br>It looks like I need to Subclass the PropertyInfo&lt;T&gt; class to add some custom meta data.<br><br>I am struggling to get it right however and could not find a c# example . :(<br><br>I have the following,<br><br>&nbsp;&nbsp;&nbsp; [Serializable]<br>&nbsp;&nbsp;&nbsp; class FSIPropertyInfo&lt;T&gt; : PropertyInfo&lt;T&gt; where T : new()<br>&nbsp;&nbsp;&nbsp; { <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp; }<br><br>but I get the following error message<br><br>Error&nbsp;&nbsp;&nbsp; 1&nbsp;&nbsp;&nbsp; 'string' must be a non-abstract type with a public parameterless constructor in order to use it as parameter 'T' in the generic type or method 'Octopus.Lib.FSIPropertyInfo&lt;T&gt;'&nbsp;&nbsp; ..<br><br><br>for this property declaration<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //Customer Id<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; private static FSIPropertyInfo&lt;string&gt; IDProperty = RegisterProperty(new FSIPropertyInfo&lt;string&gt;("Customer ID"));<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; public string ID<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; get { return GetProperty(IDProperty); }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; set { SetProperty(IDProperty, value); }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br><br><br>Question: Can someone post or provide a link to where I can find an example of a c# Property&lt;T&gt; subclass implentation?<br><br>Thank you,<br><br>Siegfried<br><br><br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JoeFallon1 replied on Thursday, May 07, 2009</h2>I posted a VB version a while back. A search should locate it easily enough.<br /><br />It really isn't that hard to read.<br /><br />You could always use one of those translation sites to get it on C#.<br /><br />I recommend:<br />http://www.developerfusion.com/tools/convert/vb-to-csharp/<br /><br />Joe<br /></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>SiegfiedN replied on Thursday, May 07, 2009</h2>Hi Joe,<br><br>Thanks for your help Joe,.<br><br>I found the link and converted the VB.Net to c# using the link you provided. Great!<br><a href="/forums/post/28112.aspx">http://forums.lhotka.net/forums/post/28112.aspx</a><br><br>However when I build the project I now get the following compile error..<br><br><i>'Error&nbsp;&nbsp;&nbsp; 2&nbsp;&nbsp;&nbsp; Cannot implicitly convert type 'Csla.PropertyInfo&lt;string&gt;' to 'Octopus.Lib.MyPropertyInfo&lt;string&gt;'. An explicit conversion exists (are you missing a cast?) </i>...'<br><br><br>This is the property declaration.<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //Customer Id<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; private static MyPropertyInfo&lt;string&gt; IDProperty = RegisterProperty(new MyPropertyInfo&lt;string&gt;("Customer ID"));<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; public string ID<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; get { return GetProperty(IDProperty); }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; set { SetProperty(IDProperty, value); }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br><br>Not sure what I need to cast? Thanks.<br><br>Siegfried<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>SiegfiedN replied on Thursday, May 07, 2009</h2>This compiles now..<br><br>For the reference..<br><br>This is the translated VB-&gt;c# code to subclass a PropertyInfo from Joe..<br><div class="code-view">
    <div class="container">
        <ol id="code-result"><li><span class="keyword">using</span> Csla.Core;</li><li><span class="keyword">using</span> Csla.Core.FieldManager;</li><li><br></li><li><span class="keyword">namespace</span> BO</li><li>{</li><li>&nbsp; &nbsp; </li><li>&nbsp; &nbsp; [Serializable()]</li><li>&nbsp; &nbsp; <span class="keyword">public</span> <span class="keyword">class</span> MyPropertyInfo&lt;T&gt; : PropertyInfo&lt;T&gt;</li><li>&nbsp; &nbsp; {</li><li>&nbsp; &nbsp; &nbsp; &nbsp; </li><li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="keyword">private</span> T _origValue;</li><li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="keyword">private</span> T _defaultValue;</li><li>&nbsp; &nbsp; &nbsp; &nbsp; </li><li>&nbsp; &nbsp; &nbsp; &nbsp; #region " Constructors "</li><li>&nbsp; &nbsp; &nbsp; &nbsp; </li><li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="keyword">public</span> MyPropertyInfo(string name) : <span class="keyword">base</span>(name)</li><li>&nbsp; &nbsp; &nbsp; &nbsp; {</li><li>&nbsp; &nbsp; &nbsp; &nbsp; }</li><li>&nbsp; &nbsp; &nbsp; &nbsp; </li><li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="keyword">public</span> MyPropertyInfo(string name, string friendlyName) : <span class="keyword">base</span>(name, friendlyName)</li><li>&nbsp; &nbsp; &nbsp; &nbsp; {</li><li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; _defaultValue = GetDefaultValue();</li><li>&nbsp; &nbsp; &nbsp; &nbsp; }</li><li>&nbsp; &nbsp; &nbsp; &nbsp; </li><li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="keyword">public</span> MyPropertyInfo(string name, string friendlyName, T defaultValue) : <span class="keyword">base</span>(name, friendlyName, defaultValue)</li><li>&nbsp; &nbsp; &nbsp; &nbsp; {</li><li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; _defaultValue = defaultValue;</li><li>&nbsp; &nbsp; &nbsp; &nbsp; }</li><li>&nbsp; &nbsp; &nbsp; &nbsp; </li><li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="keyword">private</span> T GetDefaultValue()</li><li>&nbsp; &nbsp; &nbsp; &nbsp; {</li><li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; T result = <span class="keyword">default</span>(T);</li><li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="keyword">if</span> (<span class="keyword">typeof</span>(T).Equals(<span class="keyword">typeof</span>(string))) {</li><li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; result = (T)(object)string.Empty;</li><li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</li><li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">typeof</span>(T).Equals(<span class="keyword">typeof</span>(int)) || <span class="keyword">typeof</span>(T).Equals(<span class="keyword">typeof</span>(long)) || <span class="keyword">typeof</span>(T).Equals(<span class="keyword">typeof</span>(decimal)) || <span class="keyword">typeof</span>(T).Equals(<span class="keyword">typeof</span>(short)) || <span class="keyword">typeof</span>(T).Equals(<span class="keyword">typeof</span>(byte))) {</li><li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </li><li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; result = (T)(object)0;</li><li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</li><li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="keyword">else</span> {</li><li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; result = null;</li><li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</li><li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="keyword">return</span> result;</li><li>&nbsp; &nbsp; &nbsp; &nbsp; }</li><li>&nbsp; &nbsp; &nbsp; &nbsp; </li><li>&nbsp; &nbsp; &nbsp; &nbsp; #endregion</li><li>&nbsp; &nbsp; &nbsp; &nbsp; </li><li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="keyword">public</span> T OrigValue {</li><li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; get { <span class="keyword">return</span> _origValue; }</li><li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; set { _origValue = value; }</li><li>&nbsp; &nbsp; &nbsp; &nbsp; }</li><li>&nbsp; &nbsp; &nbsp; &nbsp; </li><li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="keyword">public</span> <span class="keyword">override</span> T DefaultValue {</li><li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; get { <span class="keyword">return</span> _defaultValue; }</li><li>&nbsp; &nbsp; &nbsp; &nbsp; }</li><li>&nbsp; &nbsp; }</li><li>}</li></ol>
    </div>
</div><br>you then also need to cast your property declaration as follows..<br><br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //Customer Id<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; private static
MyPropertyInfo&lt;string&gt; IDProperty = RegisterProperty(new
MyPropertyInfo&lt;string&gt;("Customer ID"))&nbsp;<b> as MyPropertyInfo&lt;string&gt;;</b><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; public string ID<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; get { return GetProperty(IDProperty); }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; set { SetProperty(IDProperty, value); }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br><br>Siegfried<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>SiegfiedN replied on Thursday, May 07, 2009</h2><br>result = (T)(object)null; <br><br>rather in the  <br><br><span class="keyword">private</span> T GetDefaultValue() <br><br>method if required...<br></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
