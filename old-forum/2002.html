<html><header><title>App.config vs web.config... Help!</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>App.config vs web.config... Help!</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/2002.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>JCannelos posted on Tuesday, December 19, 2006</h2><P><FONT face=Arial size=2>Guys,</FONT></P>
<P><FONT face=Arial size=2>Please forgive if this is "duh!". I have a consulting tracker application with both CSLA business objects (ConsultingTracker.Library) and a web client (CTWeb), similar to the book.</FONT></P>
<P><FONT face=Arial size=2>I have a web.config file with an &lt;appSettings&gt; section that defines things like how long to cache certain items, et. In the Library, I have an app.config file which defines some other settings like &lt;connectionStrings&gt;. When my app runs, I run a static connection string lookup like this:</FONT></P>
<P><FONT face=Arial size=2>return ConfigurationManager.ConnectionStrings["MyString"].ConnectionString;</FONT></P>
<P><FONT face=Arial size=2>This is in a static class IN by business objects library, NOT in the web client however it is still trying to get the connectionString settings from the web.config, rather than the app.config. Arrgh!</FONT></P>
<P><FONT face=Arial size=2>I do have it set up to run locally (no remoting or anything like that), so I can see how one setting file should take precedence over the other. If I define the connectionString in the web.config file, everything works fine. I just wanted to keep some settings local to the library (in app.config) and some local to the client (in web.config).</FONT></P>
<P><FONT face=Arial size=2>Is this possible?</FONT></P>
<P><FONT face=Arial size=2>Thanx!</FONT></P>
<P><FONT face=Arial size=2>J'son</FONT></P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JCannelos replied on Tuesday, February 13, 2007</h2><P><FONT face=Arial size=2>Does anyone have any idea on this one? Still curious as to why I need to declare my connection strings in my web app...</FONT></P>
<P><FONT face=Arial size=2>Thanx...</FONT></P>
<P><FONT face=Arial size=2>J'son</FONT></P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JCannelos replied on Tuesday, February 13, 2007</h2><P><FONT face=Arial size=2>Does anyone have any idea on this one? Still curious as to why I need to declare my connection strings, et in my web app...</FONT></P>
<P><FONT face=Arial size=2>J'son</FONT></P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Tuesday, February 13, 2007</h2>If you're not using remoting, then your connection string needs to be in the Web.config for your web application.&nbsp; It sounds like you're trying to use an app.config for your dll; this is not how .Net works.&nbsp; Your library dll will still use the Web.config file.<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Bowman74 replied on Tuesday, February 13, 2007</h2><P>Your DLL will use the config file for the host process, not one specific&nbsp;to&nbsp;that DLL.&nbsp; So if your dll is being called from an application in IIS it will use the application's web.config file.&nbsp; If it is being called from a Winforms app called MyApp.exe it will use MyApp.exe.config.&nbsp; It will not use a file called app.config or even MyDllName.dll.config (OK, it will if you are using nunit but I don't want to go into what it is doing to make that so, let's just say some reflection is involved).</P>
<P>When you have a solution with a Winforms application it may have a file in it called App.config.&nbsp; But you will notice when it is compiled that it will copy that file into the output directory (usually under bin) and rename it to MyApp.exe.config.</P>
<P>So if your DLL is being used by an application in IIS, web.config is the file you need to place your settings in.</P>
<P>Does this make sense?</P>
<P>Thanks,</P>
<P>Kevin</P></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
