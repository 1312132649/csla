<html><header><title>Workflow Foundation and CSLA - revisited</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Workflow Foundation and CSLA - revisited</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/2120.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>DansDreams posted on Thursday, January 11, 2007</h2><P>There have been some posts exploring WF and CSLA, so I thought I'd post my latest discoveries.</P>
<P>First, I realize now that one of my previous "issues" with WF, that it really didn't do much on its own, is I think completely warranted.&nbsp; I now think of WF like maybe XML - it's very powerful in what it enables, but not really so much in what it is itself.&nbsp; Part of my previous dilemna was really trying to make WF more than what it is.&nbsp; (And if you go to the Microsoft WF presentations it doesn't help - they begin by selling WF as the solution to all the world's problems, and then proceed to demonstrate it as really just a graphical tool for developing procedural applications.)</P>
<P>That's not to dismiss WF as insignificant any more than XML is.&nbsp; But the real value comes from what you build around it.</P>
<P>And Microsoft&nbsp;is definitely building on top of it.&nbsp; Specifically, the really complete picture from Microsoft's perspective is to consider WF with SharePoint and InfoPath, particularly with Office SharePoint (MOSS).&nbsp; It creates a very powerful and significant set of technologies indeed.&nbsp; But there are some caveats, not the least of which&nbsp;are the $50k+ price tag once you assemble all the pieces and the question of where Microsoft might take you or leave you in a couple years.</P>
<P>But in addition to that, it's important to understand the philosophy.&nbsp; The WF/SharePoint/InfoPath view is that the workflow&nbsp;components <EM>are</EM> the business layer.&nbsp; In fact, "true believers" go so far as to say that there's no longer a need for smart OO business objects at all.&nbsp; (I think that&nbsp;is part of the SOA worldview, and Rocky's blogged a few times on that if you're interested.)&nbsp; <STRONG>The application in this model&nbsp;is essentially the myriad of workflow components (actions), the organization of them&nbsp;into workflows, and the forms used in those workflows.</STRONG>&nbsp; The process to add a customer isn't the proverbial form that's interacting with a business object, it's perhaps the following chain of actions: StartWorkflow -&gt; Display AddCustomer form to initiator -&gt; Verify data entered -&gt; Display VerifyCreditLimit form to accounting persion -&gt; Return to step 2 if denied -&gt; Otherwise run PersistCustomer action.</P>
<P>The marketing idea is that the <EM>end users</EM> might decide that the verify credit limit needs to go to an entirely different person and can modify the workflow without any assistance from the developers.&nbsp; Even "better", they may decide that they need to split up the AddCustomer form between two people entering different pieces of information and can split that up between them without any developer's help.&nbsp; Or they may decide that they want to add an email notification every time a credit limit is approved.</P>
<P>Now all that is great, but at the end of the day you still have developers writing and maintaining those key workflow actions.&nbsp; They must enforce business rules that are required for database integrity or other business processes, for example.&nbsp; And while it might be very cool to allow a user to adjust a workflow so it branches depending on the amount of the requested credit limit,&nbsp;turning over&nbsp;business rules to end users&nbsp;is obviously a slippery slope.&nbsp; It is a dangerous path - with great caution, we must proceed, as Yoda would say.</P>
<P>Rocky has expressed the position&nbsp;that all business logic should be encapsulated in the business layer, and <EM>everything</EM> that uses the business layer can be considered a UI.&nbsp; I personally am quite dogmatic about that (as anyone who remembers my old threads on reporting knows), and have found that thinking this way is helpful in this case as well.</P>
<P>To me, the SharePoint and InfoPath&nbsp;solution, and the WF actions that support them, should be considered as yet another UI just like a windows form or a web service.&nbsp; The ultimate responsibility for all business logic behavior and data handling stays tightly within the realm of the CSLA business objects.&nbsp; Many of the WF actions wouldn't be much more than shells exposing business layer functionality.&nbsp; If you would want to call them part of the business layer at that point is up for discussion, but that language would mean something quite different than Microsoft does.</P>
<P>That would leave us with the question of the value of WF (the free technology) itself.&nbsp; IMO, unless you're going all the way you're not going to get much from WF.&nbsp; And if you take the approach described in the previous paragraph, it's not going to be a radical redesign of your business layer to introduce it later.&nbsp; </P>
<P>I foresee that I will bring in WF and Sharepoint/Infopath as part of our solution maybe a year from now.&nbsp; We have a few processes that lend itself to that kind of paradigm - one where we must gather a bunch of pieces of information from across departments to create a new customer, and others where there is a actual "document" that travels through a branching business process.&nbsp; Again, I see that as adding on some additional UI functionality just as if I decided to exposes some of the behavior via web services.&nbsp; One&nbsp;interesting part&nbsp;of that is that the information gathering process collects a lot of data that I couldn't care less about.&nbsp; I mean it is just information not related to anything else.&nbsp; So it will be pretty powerful, especially with the next SQL version, to allow users to define a schema of information to collect and manage the forms and workflow to do so without a developer even needing to know about it.&nbsp; But I see that as always being support of specific use cases, not a model for developing enterprise applications in general.</P>
<P>Hope that helps.</P></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
