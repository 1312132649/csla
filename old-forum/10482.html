<html><header><title>If DataPortal_Fetch does not find an object</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>If DataPortal_Fetch does not find an object</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/10482.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>Alejandro posted on Thursday, June 30, 2011</h2><p>I&#39;m implementing a function DataPortal_Fetch. The expected&nbsp;behavior&nbsp;is to get the object from the database and to fill out the business object with this data. But what happens if the object is not found. I don&#39;t want to throw an error, I just want to return nothing (or null in C#). Is this possible? How can I do it?</p>
<p>Thanks,</p>
<p>Alejandro</p></div><div style='padding:0 15 3 15;background-color:lightgreen'><h2>tetranz replied on Thursday, June 30, 2011</h2><p>I do this by having a boolean _objectExists property in my BOs. DataPortal_Fetch sets this. If the object is not found in the database then the dataportal returns a meaningless object with objectExists = false.</p>
<p>My factory method does something like:</p>
<p>var obj = DataPortal.Fetch&lt;MyClass&gt;(new SingleCriteria&lt;MyClass, int&gt;(id));<br />if (!obj._objectExists)<br />{<br />&nbsp; obj = null;<br />}</p>
<p>return obj;</p>
<p>This has always worked well for me although I think the purists would say you should throw and catch and exception. It probably depends on the situation.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Alejandro replied on Thursday, July 07, 2011</h2><p>Thanks, I implemented this solution and worked very well.</p></div><div style='padding:0 15 3 15;background-color:lightgreen'><h2>ajj3085 replied on Saturday, July 02, 2011</h2><p>Personally I think an exception is the way to go.&nbsp; The fetch factory method cannot fullfil its contract in any meaningful way.</p>
<p>Returning null is a problem because at some point people usually forget to check for a null return, and then you end up with a potentially hard to find NullReferenceException.&nbsp;&nbsp;Throwing a NotFoundException is more likely to be found, and the caller has no choice but to account for it.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Alejandro replied on Thursday, July 07, 2011</h2><p>I agree that the solution could create problems by not following the standard. And I took into consideration your advice. What I did was to change the factory method from &quot;GetObject&quot; to &quot;GetOrNewObject&quot;. This new name remove any&nbsp;possibility&nbsp;of confusion about what the function does and&nbsp;differentiate&nbsp;it from how the other functions work. Thanks.</p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
