<html><header><title>Silverlight serialization</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Silverlight serialization</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/6498.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>cds posted on Monday, February 23, 2009</h2><P>Hi all</P>
<P>I'm having some serious troubles with (understanding) Silverlight serialization. It's all working OK for my main&nbsp;BO classes but I'm now trying to build a ReadOnlyList which has a complex Criteria object (i.e. not just a single primitive type).</P>
<P>What I'm really trying to accomplish is to have a ReadOnlyList that can be populated by searching&nbsp;on multiple fields. So I've defined a GenericFindParameter class having Field, Operator, and Value string properties. Ideally, I'm wanting to be able to pass a list of these to the ReadOnlyList factory method, but that seems a far off goal at the moment.</P>
<P>So, I've initially tried a single GenericFindParameter.</P>
<P>&nbsp;</P><FONT size=2>
<P>[</FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>Serializable</FONT></FONT><FONT size=2>]</P>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>public</FONT></FONT><FONT size=2> </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>class</FONT></FONT><FONT size=2> </FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>GenericFindParameter</FONT></FONT><FONT color=#008000 size=2><FONT color=#008000 size=2>// : IMobileObject</P></FONT></FONT><FONT size=2>
<P>{</P>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>public</FONT></FONT><FONT size=2> </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>string</FONT></FONT><FONT size=2> Field { </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>get</FONT></FONT><FONT size=2>; </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>set</FONT></FONT><FONT size=2>;}</P>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>public</FONT></FONT><FONT size=2> </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>string</FONT></FONT><FONT size=2> Operator { </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>get</FONT></FONT><FONT size=2>; </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>set</FONT></FONT><FONT size=2>; }</P>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>public</FONT></FONT><FONT size=2> </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>string</FONT></FONT><FONT size=2> Value { </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>get</FONT></FONT><FONT size=2>; </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>set</FONT></FONT><FONT size=2>; }</P>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>public</FONT></FONT><FONT size=2> GenericFindParameter(</FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>string</FONT></FONT><FONT size=2> field, </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>string</FONT></FONT><FONT size=2> op, </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>string</FONT></FONT><FONT size=2> value)</P>
<P>{</P>
<P>Field = field;</P>
<P>Operator = op;</P>
<P>Value = value;</P>
<P>}</P>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>public</FONT></FONT><FONT size=2> GenericFindParameter() </P>
<P>{</P>
<P>}</P></FONT><FONT color=#008000 size=2><FONT color=#008000 size=2>
<P>// void IMobileObject.GetState(SerializationInfo info)</P>
<P>// {</P>
<P>// info.AddValue("_field", Field); </P>
<P>// info.AddValue("_operator", Operator); </P>
<P>// info.AddValue("_value", Value); </P>
<P>// }</P>
<P>//</P>
<P>// void IMobileObject.SetState(SerializationInfo info)</P>
<P>// {</P>
<P>// Field = info.GetValue&lt;string&gt;("_field");</P>
<P>// Operator = info.GetValue&lt;string&gt;("_operator");</P>
<P>// Value = info.GetValue&lt;string&gt;("_value");</P>
<P>// }</P>
<P>//</P>
<P>// public void GetChildren(SerializationInfo info, MobileFormatter formatter)</P>
<P>// {</P>
<P>// </P>
<P>// }</P>
<P>//</P>
<P>// public void SetChildren(SerializationInfo info, MobileFormatter formatter)</P>
<P>// {</P>
<P>// </P>
<P>// }</P></FONT></FONT><FONT size=2>
<P>}</P></FONT>
<P>You'll see I was implementing IMobileObject, but that didn't help.</P>
<P>In my ReadOnlyList class I have:</P>
<P>&nbsp;</P><FONT size=2>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>public</FONT></FONT><FONT size=2> </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>static</FONT></FONT><FONT size=2> </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>void</FONT></FONT><FONT size=2> GetLookupList(</FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>GenericFindParameter</FONT></FONT><FONT size=2> p, </FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>EventHandler</FONT></FONT><FONT size=2>&lt;</FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>DataPortalResult</FONT></FONT><FONT size=2>&lt;</FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>ReadOnlyLookupList</FONT></FONT><FONT size=2>&gt;&gt; handler)</P>
<P>{</P>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>var</FONT></FONT><FONT size=2> dp = </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>new</FONT></FONT><FONT size=2> </FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>DataPortal</FONT></FONT><FONT size=2>&lt;</FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>ReadOnlyLookupList</FONT></FONT><FONT size=2>&gt;();</P>
<P>dp.FetchCompleted += handler;</P>
<P>dp.BeginFetch(</FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>new</FONT></FONT><FONT size=2> </FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>SingleCriteria</FONT></FONT><FONT size=2>&lt;</FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>ReadOnlyLookupList</FONT></FONT><FONT size=2>, </FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>GenericFindParameter</FONT></FONT><FONT size=2>&gt;(p));</P>
<P>}</P></FONT>
<P>&nbsp;</P>
<P>When I run this, I get a SerializationException:</P>
<P>Type 'XXX.XXX.Library.GenericFind.GenericFindParameter' with data contract name 'GenericFindParameter:http://schemas.datacontract.org/2004/07/XXX.XXX.Library.GenericFind' is not expected. Add any types not known statically to the list of known types - for example, by using the KnownTypeAttribute attribute or by adding them to the list of known types passed to DataContractSerializer.</P>
<P>Stack trace:</P>
<P>&nbsp;&nbsp; at System.Runtime.Serialization.XmlObjectSerializerWriteContext.SerializeAndVerifyType(DataContract dataContract, XmlWriterDelegator xmlWriter, Object obj, Boolean verifyKnownType, RuntimeTypeHandle declaredTypeHandle)<BR>&nbsp;&nbsp; at System.Runtime.Serialization.XmlObjectSerializerWriteContext.SerializeWithXsiType(XmlWriterDelegator xmlWriter, Object obj, RuntimeTypeHandle objectTypeHandle, Type objectType, Int32 declaredTypeID, RuntimeTypeHandle declaredTypeHandle, Type declaredType)<BR>&nbsp;&nbsp; at System.Runtime.Serialization.XmlObjectSerializerWriteContext.InternalSerialize(XmlWriterDelegator xmlWriter, Object obj, Boolean isDeclaredType, Boolean writeXsiType, Int32 declaredTypeID, RuntimeTypeHandle declaredTypeHandle)<BR>&nbsp;&nbsp; at System.Runtime.Serialization.XmlObjectSerializerWriteContext.InternalSerializeReference(XmlWriterDelegator xmlWriter, Object obj, Boolean isDeclaredType, Boolean writeXsiType, Int32 declaredTypeID, RuntimeTypeHandle declaredTypeHandle)<BR>&nbsp;&nbsp; at WriteSerializationInfo.FieldDataToXml(XmlWriterDelegator , Object , XmlObjectSerializerWriteContext , ClassDataContract )<BR>&nbsp;&nbsp; at System.Runtime.Serialization.ClassDataContract.WriteXmlValue(XmlWriterDelegator xmlWriter, Object obj, XmlObjectSerializerWriteContext context)<BR>&nbsp;&nbsp; at System.Runtime.Serialization.XmlObjectSerializerWriteContext.WriteDataContractValue(DataContract dataContract, XmlWriterDelegator xmlWriter, Object obj, RuntimeTypeHandle declaredTypeHandle)<BR>&nbsp;&nbsp; at System.Runtime.Serialization.XmlObjectSerializerWriteContext.SerializeWithoutXsiType(DataContract dataContract, XmlWriterDelegator xmlWriter, Object obj, RuntimeTypeHandle declaredTypeHandle)<BR>&nbsp;&nbsp; at System.Runtime.Serialization.XmlObjectSerializerWriteContext.InternalSerialize(XmlWriterDelegator xmlWriter, Object obj, Boolean isDeclaredType, Boolean writeXsiType, Int32 declaredTypeID, RuntimeTypeHandle declaredTypeHandle)<BR>&nbsp;&nbsp; at System.Runtime.Serialization.XmlObjectSerializerWriteContext.InternalSerializeReference(XmlWriterDelegator xmlWriter, Object obj, Boolean isDeclaredType, Boolean writeXsiType, Int32 declaredTypeID, RuntimeTypeHandle declaredTypeHandle)<BR>&nbsp;&nbsp; at WriteKeyValueOfstringSerializationInfo.FieldDataOzoZvLrmToXml(XmlWriterDelegator , Object , XmlObjectSerializerWriteContext , ClassDataContract )<BR>&nbsp;&nbsp; at System.Runtime.Serialization.ClassDataContract.WriteXmlValue(XmlWriterDelegator xmlWriter, Object obj, XmlObjectSerializerWriteContext context)<BR>&nbsp;&nbsp; at WriteArrayOfKeyValueOfstringSerializationInfo.FieldDataOzoZvLrmToXml(XmlWriterDelegator , Object , XmlObjectSerializerWriteContext , CollectionDataContract )<BR>&nbsp;&nbsp; at System.Runtime.Serialization.CollectionDataContract.WriteXmlValue(XmlWriterDelegator xmlWriter, Object obj, XmlObjectSerializerWriteContext context)<BR>&nbsp;&nbsp; at System.Runtime.Serialization.XmlObjectSerializerWriteContext.WriteDataContractValue(DataContract dataContract, XmlWriterDelegator xmlWriter, Object obj, RuntimeTypeHandle declaredTypeHandle)<BR>&nbsp;&nbsp; at System.Runtime.Serialization.XmlObjectSerializerWriteContext.SerializeWithoutXsiType(DataContract dataContract, XmlWriterDelegator xmlWriter, Object obj, RuntimeTypeHandle declaredTypeHandle)<BR>&nbsp;&nbsp; at System.Runtime.Serialization.XmlObjectSerializerWriteContext.InternalSerialize(XmlWriterDelegator xmlWriter, Object obj, Boolean isDeclaredType, Boolean writeXsiType, Int32 declaredTypeID, RuntimeTypeHandle declaredTypeHandle)<BR>&nbsp;&nbsp; at System.Runtime.Serialization.XmlObjectSerializerWriteContext.InternalSerializeReference(XmlWriterDelegator xmlWriter, Object obj, Boolean isDeclaredType, Boolean writeXsiType, Int32 declaredTypeID, RuntimeTypeHandle declaredTypeHandle)<BR>&nbsp;&nbsp; at WriteSerializationInfoToXml(XmlWriterDelegator , Object , XmlObjectSerializerWriteContext , ClassDataContract )<BR>&nbsp;&nbsp; at System.Runtime.Serialization.ClassDataContract.WriteXmlValue(XmlWriterDelegator xmlWriter, Object obj, XmlObjectSerializerWriteContext context)<BR>&nbsp;&nbsp; at System.Runtime.Serialization.XmlObjectSerializerWriteContext.WriteDataContractValue(DataContract dataContract, XmlWriterDelegator xmlWriter, Object obj, RuntimeTypeHandle declaredTypeHandle)<BR>&nbsp;&nbsp; at System.Runtime.Serialization.XmlObjectSerializerWriteContext.SerializeWithoutXsiType(DataContract dataContract, XmlWriterDelegator xmlWriter, Object obj, RuntimeTypeHandle declaredTypeHandle)<BR>&nbsp;&nbsp; at System.Runtime.Serialization.XmlObjectSerializerWriteContext.InternalSerialize(XmlWriterDelegator xmlWriter, Object obj, Boolean isDeclaredType, Boolean writeXsiType, Int32 declaredTypeID, RuntimeTypeHandle declaredTypeHandle)<BR>&nbsp;&nbsp; at System.Runtime.Serialization.XmlObjectSerializerWriteContext.InternalSerializeReference(XmlWriterDelegator xmlWriter, Object obj, Boolean isDeclaredType, Boolean writeXsiType, Int32 declaredTypeID, RuntimeTypeHandle declaredTypeHandle)<BR>&nbsp;&nbsp; at WriteArrayOfSerializationInfoToXml(XmlWriterDelegator , Object , XmlObjectSerializerWriteContext , CollectionDataContract )<BR>&nbsp;&nbsp; at System.Runtime.Serialization.CollectionDataContract.WriteXmlValue(XmlWriterDelegator xmlWriter, Object obj, XmlObjectSerializerWriteContext context)<BR>&nbsp;&nbsp; at System.Runtime.Serialization.XmlObjectSerializerWriteContext.WriteDataContractValue(DataContract dataContract, XmlWriterDelegator xmlWriter, Object obj, RuntimeTypeHandle declaredTypeHandle)<BR>&nbsp;&nbsp; at System.Runtime.Serialization.XmlObjectSerializerWriteContext.SerializeWithoutXsiType(DataContract dataContract, XmlWriterDelegator xmlWriter, Object obj, RuntimeTypeHandle declaredTypeHandle)<BR>&nbsp;&nbsp; at System.Runtime.Serialization.DataContractSerializer.InternalWriteObjectContent(XmlWriterDelegator writer, Object graph)<BR>&nbsp;&nbsp; at System.Runtime.Serialization.DataContractSerializer.InternalWriteObject(XmlWriterDelegator writer, Object graph)<BR>&nbsp;&nbsp; at System.Runtime.Serialization.XmlObjectSerializer.WriteObjectHandleExceptions(XmlWriterDelegator writer, Object graph)<BR>&nbsp;&nbsp; at System.Runtime.Serialization.DataContractSerializer.WriteObject(XmlWriter writer, Object graph)<BR>&nbsp;&nbsp; at Csla.Serialization.Mobile.MobileFormatter.Serialize(XmlWriter writer, Object graph)<BR>&nbsp;&nbsp; at Csla.Serialization.Mobile.MobileFormatter.Serialize(Stream serializationStream, Object graph)<BR>&nbsp;&nbsp; at Csla.Serialization.Mobile.MobileFormatter.Serialize(Object obj)<BR>&nbsp;&nbsp; at Csla.DataPortalClient.WcfProxy`1.BeginFetch(Object criteria, Object userState)<BR>&nbsp;&nbsp; at Csla.DataPortalClient.WcfProxy`1.BeginFetch(Object criteria)<BR>&nbsp;&nbsp; at Csla.DataPortal`1.BeginFetch(Object criteria)<BR>&nbsp;&nbsp; at XXX.XXX.Library.GenericFind.ReadOnlyLookupList.GetLookupList(GenericFindParameter p, EventHandler`1 handler)</P>
<P>XXX.XXX added to protect the innocent customer :)</P>
<P>&nbsp;</P>
<P>So, my question is, how is this meant to work? I understand that I'm meant to handle serialization myself but I'm not understanding exactly when or how. And I'd previously assumed that if my class implemented IMobileObject then it would be called on at the appropriate time to do its serialization.</P>
<P>Can somebody please explain this to me, or point me in the right direction.</P>
<P>Thanks,</P>
<P>Craig</P>
<P>&nbsp;</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>sergeyb replied on Tuesday, February 24, 2009</h2>









 

 
  
 




<div class=Section1>

<p class=MsoNormal><span>I have seen this error.&nbsp; It appears to result from use of
automatic properties.&nbsp; Compiler creates backing fields with weird name
that confuse XML writer.&nbsp; Please change your properties to use explicit
backing fields and see if the error goes away.<o:p></o:p></span></p>

<p class=MsoNormal><span><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><b><span>Sergey Barskiy<o:p></o:p></span></b></p>

<p class=MsoNormal><b><i><span>Principal Consultant<o:p></o:p></span></i></b></p>

<p class=MsoNormal><span>office: 678.405.0687 |
mobile:&nbsp;404.388.1899</span><span><o:p></o:p></span></p>

<p class=MsoNormal><span><img width=119 height=26 id="Picture_x0020_1" alt="cid:_2_0648EA840648E85C001BBCB886257279"><br>
</span><b><span>Microsoft Worldwide Partner of the Year |</span></b><span> </span><b><span>Custom
Development Solutions, Technical Innovation</span></b><span><o:p></o:p></span></p>

<p class=MsoNormal><span><o:p>&nbsp;</o:p></span></p>

<div>

<p class=MsoNormal><b><span>From:</span></b><span> cds
[mailto:cslanet@lhotka.net] <br>
<b>Sent:</b> Monday, February 23, 2009 9:57 PM<br>
<b>To:</b> Sergey Barskiy<br>
<b>Subject:</b> [CSLA .NET] Silverlight serialization<o:p></o:p></span></p>

</div>

<p class=MsoNormal><o:p>&nbsp;</o:p></p>

<p>Hi all<o:p></o:p></p>

<p>I'm having some serious troubles with (understanding) Silverlight
serialization. It's all working OK for my main&nbsp;BO classes but I'm now
trying to build a ReadOnlyList which has a complex Criteria object (i.e. not
just a single primitive type).<o:p></o:p></p>

<p>What I'm really trying to accomplish is to have a ReadOnlyList that can be
populated by searching&nbsp;on multiple fields. So I've defined a
GenericFindParameter class having Field, Operator, and Value string properties.
Ideally, I'm wanting to be able to pass a list of these to the ReadOnlyList
factory method, but that seems a far off goal at the moment.<o:p></o:p></p>

<p>So, I've initially tried a single GenericFindParameter.<o:p></o:p></p>

<p>&nbsp;<o:p></o:p></p>

<p><span>[<span>Serializable</span>]<o:p></o:p></span></p>

<p><span>public</span><span> <span>class</span> <span>GenericFindParameter</span><span>// :
IMobileObject<o:p></o:p></span></span></p>

<p><span>{<o:p></o:p></span></p>

<p><span>public</span><span> <span>string</span> Field { <span>get</span>; <span>set</span>;}<o:p></o:p></span></p>

<p><span>public</span><span> <span>string</span> Operator { <span>get</span>; <span>set</span>; }<o:p></o:p></span></p>

<p><span>public</span><span> <span>string</span> Value { <span>get</span>; <span>set</span>; }<o:p></o:p></span></p>

<p><span>public</span><span> GenericFindParameter(<span>string</span>
field, <span>string</span> op, <span>string</span>
value)<o:p></o:p></span></p>

<p><span>{<o:p></o:p></span></p>

<p><span>Field = field;<o:p></o:p></span></p>

<p><span>Operator = op;<o:p></o:p></span></p>

<p><span>Value = value;<o:p></o:p></span></p>

<p><span>}<o:p></o:p></span></p>

<p><span>public</span><span> GenericFindParameter() <o:p></o:p></span></p>

<p><span>{<o:p></o:p></span></p>

<p><span>}<o:p></o:p></span></p>

<p><span>// void
IMobileObject.GetState(SerializationInfo info)<o:p></o:p></span></p>

<p><span>// {<o:p></o:p></span></p>

<p><span>//
info.AddValue(&quot;_field&quot;, Field); <o:p></o:p></span></p>

<p><span>//
info.AddValue(&quot;_operator&quot;, Operator); <o:p></o:p></span></p>

<p><span>// info.AddValue(&quot;_value&quot;,
Value); <o:p></o:p></span></p>

<p><span>// }<o:p></o:p></span></p>

<p><span>//<o:p></o:p></span></p>

<p><span>// void
IMobileObject.SetState(SerializationInfo info)<o:p></o:p></span></p>

<p><span>// {<o:p></o:p></span></p>

<p><span>// Field =
info.GetValue&lt;string&gt;(&quot;_field&quot;);<o:p></o:p></span></p>

<p><span>// Operator =
info.GetValue&lt;string&gt;(&quot;_operator&quot;);<o:p></o:p></span></p>

<p><span>// Value =
info.GetValue&lt;string&gt;(&quot;_value&quot;);<o:p></o:p></span></p>

<p><span>// }<o:p></o:p></span></p>

<p><span>//<o:p></o:p></span></p>

<p><span>// public void
GetChildren(SerializationInfo info, MobileFormatter formatter)<o:p></o:p></span></p>

<p><span>// {<o:p></o:p></span></p>

<p><span>// <o:p></o:p></span></p>

<p><span>// }<o:p></o:p></span></p>

<p><span>//<o:p></o:p></span></p>

<p><span>// public void
SetChildren(SerializationInfo info, MobileFormatter formatter)<o:p></o:p></span></p>

<p><span>// {<o:p></o:p></span></p>

<p><span>// <o:p></o:p></span></p>

<p><span>// }<o:p></o:p></span></p>

<p><span>}<o:p></o:p></span></p>

<p>You'll see I was implementing IMobileObject, but that didn't help.<o:p></o:p></p>

<p>In my ReadOnlyList class I have:<o:p></o:p></p>

<p>&nbsp;<o:p></o:p></p>

<p><span>public</span><span> <span>static</span> <span>void</span> GetLookupList(<span>GenericFindParameter</span>
p, <span>EventHandler</span>&lt;<span>DataPortalResult</span>&lt;<span>ReadOnlyLookupList</span>&gt;&gt; handler)<o:p></o:p></span></p>

<p><span>{<o:p></o:p></span></p>

<p><span>var</span><span> dp = <span>new</span> <span>DataPortal</span>&lt;<span>ReadOnlyLookupList</span>&gt;();<o:p></o:p></span></p>

<p><span>dp.FetchCompleted += handler;<o:p></o:p></span></p>

<p><span>dp.BeginFetch(<span>new</span>
<span>SingleCriteria</span>&lt;<span>ReadOnlyLookupList</span>,
<span>GenericFindParameter</span>&gt;(p));<o:p></o:p></span></p>

<p><span>}<o:p></o:p></span></p>

<p>&nbsp;<o:p></o:p></p>

<p>When I run this, I get a SerializationException:<o:p></o:p></p>

<p>Type 'XXX.XXX.Library.GenericFind.GenericFindParameter' with data contract
name
'GenericFindParameter:http://schemas.datacontract.org/2004/07/XXX.XXX.Library.GenericFind'
is not expected. Add any types not known statically to the list of known types
- for example, by using the KnownTypeAttribute attribute or by adding them to
the list of known types passed to DataContractSerializer.<o:p></o:p></p>

<p>Stack trace:<o:p></o:p></p>

<p>&nbsp;&nbsp; at
System.Runtime.Serialization.XmlObjectSerializerWriteContext.SerializeAndVerifyType(DataContract
dataContract, XmlWriterDelegator xmlWriter, Object obj, Boolean
verifyKnownType, RuntimeTypeHandle declaredTypeHandle)<br>
&nbsp;&nbsp; at
System.Runtime.Serialization.XmlObjectSerializerWriteContext.SerializeWithXsiType(XmlWriterDelegator
xmlWriter, Object obj, RuntimeTypeHandle objectTypeHandle, Type objectType,
Int32 declaredTypeID, RuntimeTypeHandle declaredTypeHandle, Type declaredType)<br>
&nbsp;&nbsp; at
System.Runtime.Serialization.XmlObjectSerializerWriteContext.InternalSerialize(XmlWriterDelegator
xmlWriter, Object obj, Boolean isDeclaredType, Boolean writeXsiType, Int32
declaredTypeID, RuntimeTypeHandle declaredTypeHandle)<br>
&nbsp;&nbsp; at
System.Runtime.Serialization.XmlObjectSerializerWriteContext.InternalSerializeReference(XmlWriterDelegator
xmlWriter, Object obj, Boolean isDeclaredType, Boolean writeXsiType, Int32
declaredTypeID, RuntimeTypeHandle declaredTypeHandle)<br>
&nbsp;&nbsp; at WriteSerializationInfo.FieldDataToXml(XmlWriterDelegator ,
Object , XmlObjectSerializerWriteContext , ClassDataContract )<br>
&nbsp;&nbsp; at System.Runtime.Serialization.ClassDataContract.WriteXmlValue(XmlWriterDelegator
xmlWriter, Object obj, XmlObjectSerializerWriteContext context)<br>
&nbsp;&nbsp; at
System.Runtime.Serialization.XmlObjectSerializerWriteContext.WriteDataContractValue(DataContract
dataContract, XmlWriterDelegator xmlWriter, Object obj, RuntimeTypeHandle
declaredTypeHandle)<br>
&nbsp;&nbsp; at
System.Runtime.Serialization.XmlObjectSerializerWriteContext.SerializeWithoutXsiType(DataContract
dataContract, XmlWriterDelegator xmlWriter, Object obj, RuntimeTypeHandle
declaredTypeHandle)<br>
&nbsp;&nbsp; at System.Runtime.Serialization.XmlObjectSerializerWriteContext.InternalSerialize(XmlWriterDelegator
xmlWriter, Object obj, Boolean isDeclaredType, Boolean writeXsiType, Int32
declaredTypeID, RuntimeTypeHandle declaredTypeHandle)<br>
&nbsp;&nbsp; at System.Runtime.Serialization.XmlObjectSerializerWriteContext.InternalSerializeReference(XmlWriterDelegator
xmlWriter, Object obj, Boolean isDeclaredType, Boolean writeXsiType, Int32
declaredTypeID, RuntimeTypeHandle declaredTypeHandle)<br>
&nbsp;&nbsp; at WriteKeyValueOfstringSerializationInfo.FieldDataOzoZvLrmToXml(XmlWriterDelegator
, Object , XmlObjectSerializerWriteContext , ClassDataContract )<br>
&nbsp;&nbsp; at
System.Runtime.Serialization.ClassDataContract.WriteXmlValue(XmlWriterDelegator
xmlWriter, Object obj, XmlObjectSerializerWriteContext context)<br>
&nbsp;&nbsp; at WriteArrayOfKeyValueOfstringSerializationInfo.FieldDataOzoZvLrmToXml(XmlWriterDelegator
, Object , XmlObjectSerializerWriteContext , CollectionDataContract )<br>
&nbsp;&nbsp; at
System.Runtime.Serialization.CollectionDataContract.WriteXmlValue(XmlWriterDelegator
xmlWriter, Object obj, XmlObjectSerializerWriteContext context)<br>
&nbsp;&nbsp; at
System.Runtime.Serialization.XmlObjectSerializerWriteContext.WriteDataContractValue(DataContract
dataContract, XmlWriterDelegator xmlWriter, Object obj, RuntimeTypeHandle
declaredTypeHandle)<br>
&nbsp;&nbsp; at
System.Runtime.Serialization.XmlObjectSerializerWriteContext.SerializeWithoutXsiType(DataContract
dataContract, XmlWriterDelegator xmlWriter, Object obj, RuntimeTypeHandle
declaredTypeHandle)<br>
&nbsp;&nbsp; at System.Runtime.Serialization.XmlObjectSerializerWriteContext.InternalSerialize(XmlWriterDelegator
xmlWriter, Object obj, Boolean isDeclaredType, Boolean writeXsiType, Int32
declaredTypeID, RuntimeTypeHandle declaredTypeHandle)<br>
&nbsp;&nbsp; at
System.Runtime.Serialization.XmlObjectSerializerWriteContext.InternalSerializeReference(XmlWriterDelegator
xmlWriter, Object obj, Boolean isDeclaredType, Boolean writeXsiType, Int32
declaredTypeID, RuntimeTypeHandle declaredTypeHandle)<br>
&nbsp;&nbsp; at WriteSerializationInfoToXml(XmlWriterDelegator , Object ,
XmlObjectSerializerWriteContext , ClassDataContract )<br>
&nbsp;&nbsp; at
System.Runtime.Serialization.ClassDataContract.WriteXmlValue(XmlWriterDelegator
xmlWriter, Object obj, XmlObjectSerializerWriteContext context)<br>
&nbsp;&nbsp; at
System.Runtime.Serialization.XmlObjectSerializerWriteContext.WriteDataContractValue(DataContract
dataContract, XmlWriterDelegator xmlWriter, Object obj, RuntimeTypeHandle
declaredTypeHandle)<br>
&nbsp;&nbsp; at
System.Runtime.Serialization.XmlObjectSerializerWriteContext.SerializeWithoutXsiType(DataContract
dataContract, XmlWriterDelegator xmlWriter, Object obj, RuntimeTypeHandle
declaredTypeHandle)<br>
&nbsp;&nbsp; at
System.Runtime.Serialization.XmlObjectSerializerWriteContext.InternalSerialize(XmlWriterDelegator
xmlWriter, Object obj, Boolean isDeclaredType, Boolean writeXsiType, Int32
declaredTypeID, RuntimeTypeHandle declaredTypeHandle)<br>
&nbsp;&nbsp; at
System.Runtime.Serialization.XmlObjectSerializerWriteContext.InternalSerializeReference(XmlWriterDelegator
xmlWriter, Object obj, Boolean isDeclaredType, Boolean writeXsiType, Int32
declaredTypeID, RuntimeTypeHandle declaredTypeHandle)<br>
&nbsp;&nbsp; at WriteArrayOfSerializationInfoToXml(XmlWriterDelegator , Object
, XmlObjectSerializerWriteContext , CollectionDataContract )<br>
&nbsp;&nbsp; at
System.Runtime.Serialization.CollectionDataContract.WriteXmlValue(XmlWriterDelegator
xmlWriter, Object obj, XmlObjectSerializerWriteContext context)<br>
&nbsp;&nbsp; at
System.Runtime.Serialization.XmlObjectSerializerWriteContext.WriteDataContractValue(DataContract
dataContract, XmlWriterDelegator xmlWriter, Object obj, RuntimeTypeHandle
declaredTypeHandle)<br>
&nbsp;&nbsp; at System.Runtime.Serialization.XmlObjectSerializerWriteContext.SerializeWithoutXsiType(DataContract
dataContract, XmlWriterDelegator xmlWriter, Object obj, RuntimeTypeHandle
declaredTypeHandle)<br>
&nbsp;&nbsp; at
System.Runtime.Serialization.DataContractSerializer.InternalWriteObjectContent(XmlWriterDelegator
writer, Object graph)<br>
&nbsp;&nbsp; at
System.Runtime.Serialization.DataContractSerializer.InternalWriteObject(XmlWriterDelegator
writer, Object graph)<br>
&nbsp;&nbsp; at
System.Runtime.Serialization.XmlObjectSerializer.WriteObjectHandleExceptions(XmlWriterDelegator
writer, Object graph)<br>
&nbsp;&nbsp; at
System.Runtime.Serialization.DataContractSerializer.WriteObject(XmlWriter
writer, Object graph)<br>
&nbsp;&nbsp; at Csla.Serialization.Mobile.MobileFormatter.Serialize(XmlWriter
writer, Object graph)<br>
&nbsp;&nbsp; at Csla.Serialization.Mobile.MobileFormatter.Serialize(Stream
serializationStream, Object graph)<br>
&nbsp;&nbsp; at Csla.Serialization.Mobile.MobileFormatter.Serialize(Object obj)<br>
&nbsp;&nbsp; at Csla.DataPortalClient.WcfProxy`1.BeginFetch(Object criteria,
Object userState)<br>
&nbsp;&nbsp; at Csla.DataPortalClient.WcfProxy`1.BeginFetch(Object criteria)<br>
&nbsp;&nbsp; at Csla.DataPortal`1.BeginFetch(Object criteria)<br>
&nbsp;&nbsp; at
XXX.XXX.Library.GenericFind.ReadOnlyLookupList.GetLookupList(GenericFindParameter
p, EventHandler`1 handler)<o:p></o:p></p>

<p>XXX.XXX added to protect the innocent customer :)<o:p></o:p></p>

<p>&nbsp;<o:p></o:p></p>

<p>So, my question is, how is this meant to work? I understand that I'm meant
to handle serialization myself but I'm not understanding exactly when or how.
And I'd previously assumed that if my class implemented IMobileObject then it
would be called on at the appropriate time to do its serialization.<o:p></o:p></p>

<p>Can somebody please explain this to me, or point me in the right direction.<o:p></o:p></p>

<p>Thanks,<o:p></o:p></p>

<p>Craig<o:p></o:p></p>

<p>&nbsp;<o:p></o:p></p>

<p class=MsoNormal><br>
<br>
<o:p></o:p></p>

</div>



</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>cds replied on Tuesday, February 24, 2009</h2><P>Hi Sergey</P>
<P>Thanks for the reply, but no, changing the properties to have manual backing fields makes no difference. </P>
<P>I think I'm fundamentally misunderstanding something here. When I step through the code at the point of serialization, when it serializes the SingleCriteria&lt;B, C&gt; the actual value doesn't get serialized by the MobileFormatter, even though it implements IMobileObject. </P>
<P>In WcfProxy::BeginFetch, it calls:</P><FONT size=2>
<P>request.CriteriaData = </FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>MobileFormatter</FONT></FONT><FONT size=2>.Serialize(criteria);</P></FONT>
<P>which is where it falls over. </P>
<P>I think the problem is that the OnGetState method in SingleCriteria just adds its value to the SerializationInfo, assuming it to be a primitive type, which it's not. </P>
<P>So, I guess the solution to my problem would be to implement a custom criteria class that can detect that its "value" implements IMobileObject and then do the appropriate serialization on that.</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>swegele replied on Saturday, May 16, 2009</h2><P>Sergey et al.</P>
<P>I am also seeing this issue where I can't serialize this dto to the silverlight client</P>
<P>&nbsp;</P><FONT color=#0000ff size=2><FONT color=#0000ff size=2>
<P>namespace</FONT></FONT><FONT size=2> IRB.DTO</P>
<P>{</P>
<P>[</FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>Serializable</FONT></FONT><FONT size=2>]</P>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>public</FONT></FONT><FONT size=2> </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>class</FONT></FONT><FONT size=2> </FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>InvestigatorMEDLicense</P></FONT></FONT><FONT size=2>
<P>&nbsp;&nbsp; {</P>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; public</FONT></FONT><FONT size=2> </FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>Guid</FONT></FONT><FONT size=2> InvestigatorMEDLicenseID { </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>get</FONT></FONT><FONT size=2>; </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>set</FONT></FONT><FONT size=2>; }</P>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>&nbsp;&nbsp; &nbsp;&nbsp; public</FONT></FONT><FONT size=2> </FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>Guid</FONT></FONT><FONT size=2> InvestigatorID { </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>get</FONT></FONT><FONT size=2>; </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>set</FONT></FONT><FONT size=2>; }</P>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>&nbsp;&nbsp; &nbsp;&nbsp; public</FONT></FONT><FONT size=2> </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>string</FONT></FONT><FONT size=2> MEDLicenseState { </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>get</FONT></FONT><FONT size=2>; </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>set</FONT></FONT><FONT size=2>; }</P>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>&nbsp;&nbsp; &nbsp;&nbsp; public</FONT></FONT><FONT size=2> </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>string</FONT></FONT><FONT size=2> MEDLicenseNumber { </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>get</FONT></FONT><FONT size=2>; </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>set</FONT></FONT><FONT size=2>; }</P>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>&nbsp;&nbsp; &nbsp;&nbsp; public</FONT></FONT><FONT size=2> </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>string</FONT></FONT><FONT size=2> MEDLicenseEXPDate { </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>get</FONT></FONT><FONT size=2>; </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>set</FONT></FONT><FONT size=2>; }</P>
<P>&nbsp;&nbsp; }</P>
<P>}</P>
<P>&nbsp;</P>
<P>I tried to do what you said to switch to normal properties with a private field and it still doesn't work.&nbsp; I use the XMLSerializer to put this into my DB as snapshots of data so I know that works.</P>
<P>Any ideas?</P>
<P>Sean</P></FONT></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>swegele replied on Saturday, May 16, 2009</h2><P>OK here is the key...</P>
<P>You have to do BOTH private backing fields AND IMobileObject.</P>
<P>So here is the code that is working</P><FONT color=#0000ff size=2><FONT color=#0000ff size=2>
<P>using</FONT></FONT><FONT size=2> System;</P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>
<P>using</FONT></FONT><FONT size=2> Csla;</P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>
<P>using</FONT></FONT><FONT size=2> Csla.Serialization;</P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>
<P>namespace</FONT></FONT><FONT size=2> IRB.DTO</P>
<P>{</P>
<P>[</FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>Serializable</FONT></FONT><FONT size=2>]</P>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>public</FONT></FONT><FONT size=2> </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>class</FONT></FONT><FONT size=2> </FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>Investigator</FONT></FONT><FONT size=2> : Csla.Serialization.Mobile.</FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>IMobileObject</P></FONT></FONT><FONT size=2>
<P>{</P>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>private</FONT></FONT><FONT size=2> </FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>Guid</FONT></FONT><FONT size=2> _InvestigatorID;</P>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>public</FONT></FONT><FONT size=2> </FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>Guid</FONT></FONT><FONT size=2> InvestigatorID { </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>get</FONT></FONT><FONT size=2> { </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>return</FONT></FONT><FONT size=2> _InvestigatorID; } </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>set</FONT></FONT><FONT size=2> { _InvestigatorID = </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>value</FONT></FONT><FONT size=2>; } }</P>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>... etc.</FONT></FONT></P><FONT size=2>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>void</FONT></FONT><FONT size=2> Csla.Serialization.Mobile.</FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>IMobileObject</FONT></FONT><FONT size=2>.GetState(Csla.Serialization.Mobile.</FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>SerializationInfo</FONT></FONT><FONT size=2> info)</P>
<P>{</P>
<P>info.AddValue(</FONT><FONT color=#a31515 size=2><FONT color=#a31515 size=2>"_InvestigatorID"</FONT></FONT><FONT size=2>, InvestigatorID);</P>
<P>... etc.</FONT> 
<P><FONT size=2></P>}
<P></P>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>void</FONT></FONT><FONT size=2> Csla.Serialization.Mobile.</FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>IMobileObject</FONT></FONT><FONT size=2>.SetState(Csla.Serialization.Mobile.</FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>SerializationInfo</FONT></FONT><FONT size=2> info)</P>
<P>{</P>
<P>InvestigatorID = info.GetValue&lt;</FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>Guid</FONT></FONT><FONT size=2>&gt;(</FONT><FONT color=#a31515 size=2><FONT color=#a31515 size=2>"_InvestigatorID"</FONT></FONT><FONT size=2>);</P>
<P>... etc.</P></FONT><FONT size=2>
<P>}</P>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>public</FONT></FONT><FONT size=2> </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>void</FONT></FONT><FONT size=2> GetChildren(Csla.Serialization.Mobile.</FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>SerializationInfo</FONT></FONT><FONT size=2> info, Csla.Serialization.Mobile.</FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>MobileFormatter</FONT></FONT><FONT size=2> formatter)</P>
<P>{ }</P>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>public</FONT></FONT><FONT size=2> </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>void</FONT></FONT><FONT size=2> SetChildren(Csla.Serialization.Mobile.</FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>SerializationInfo</FONT></FONT><FONT size=2> info, Csla.Serialization.Mobile.</FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>MobileFormatter</FONT></FONT><FONT size=2> formatter)</P>
<P>{ }</P>
<P>}</P>
<P>}</P></FONT>
<P>&nbsp;</P>
<P>Thanks guys for all your hard work</P>
<P>Sean</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>abiramipattar replied on Friday, July 31, 2009</h2>Hi Sergey,<br><br>&nbsp;&nbsp; I am getting the same error, even after i do as you have suggested. Could you please help me with this as i am stuck at the same scenario that the original post mentioned. Thanks.<br><br>Regards,<br>Sankar<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>sergeyb replied on Friday, July 31, 2009</h2>









 

 
  
 




<div class=Section1>

<p class=MsoNormal><span>I
would recommend using base criteria class instead of Mobile Object &#8211; less
code and you do not need to worry about serialization<o:p></o:p></span></p>

<p class=MsoNormal><span><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span>[<span>Serializable</span>()]<o:p></o:p></span></p>

<p class=MsoNormal><span>&nbsp;&nbsp;&nbsp; <span>public</span>
<span>class</span> <span>OrderSearchCriteria</span>
: <span>CriteriaBase<o:p></o:p></span></span></p>

<p class=MsoNormal><span>&nbsp;&nbsp;&nbsp; {<o:p></o:p></span></p>

<p class=MsoNormal><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span>private</span> <span>static</span> <span>PropertyInfo</span>&lt;<span>string</span>&gt;
OrderNoProperty = RegisterProperty&lt;<span>string</span>&gt;(<span>typeof</span>(<span>WorkOrderPopupSearchCriteria</span>),
<span>new</span> <span>PropertyInfo</span>&lt;<span>string</span>&gt;(<span>&quot;OrderNo&quot;</span>,
<span>&quot;Order No&quot;</span>, <span>string</span>.Empty));<o:p></o:p></span></p>

<p class=MsoNormal><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span>public</span> <span>string</span> OrderNo<o:p></o:p></span></p>

<p class=MsoNormal><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<o:p></o:p></span></p>

<p class=MsoNormal><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<span>get</span> { <span>return</span>
ReadProperty(AMWorkOrderNoProperty); }<o:p></o:p></span></p>

<p class=MsoNormal><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<o:p></o:p></span></p>

<p class=MsoNormal><span><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span>private</span> <span>static</span> <span>PropertyInfo</span>&lt;<span>string</span>&gt;
OrderHeadlineProperty = RegisterProperty&lt;<span>string</span>&gt;(<span>typeof</span>(<span>WorkOrderPopupSearchCriteria</span>),
<span>new</span> <span>PropertyInfo</span>&lt;<span>string</span>&gt;(<span>&quot;OrderHeadline&quot;</span>,
<span>&quot;Headline&quot;</span>, <span>string</span>.Empty));<o:p></o:p></span></p>

<p class=MsoNormal><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span>public</span> <span>string</span> OrderHeadline<o:p></o:p></span></p>

<p class=MsoNormal><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<o:p></o:p></span></p>

<p class=MsoNormal><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<span>get</span> { <span>return</span>
ReadProperty(AMWorkOrderHeadlineProperty); }<o:p></o:p></span></p>

<p class=MsoNormal><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<o:p></o:p></span></p>

<p class=MsoNormal><span><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span>public</span> OrderSearchCriteria(<span>Type</span>
type, <span>string</span> orderNo, <span>string</span>
headline)<o:p></o:p></span></p>

<p class=MsoNormal><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
: <span>base</span>(<span>typeof</span>(<span>OrderSearchCriteria</span>))<o:p></o:p></span></p>

<p class=MsoNormal><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<o:p></o:p></span></p>

<p class=MsoNormal><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
LoadProperty(OrderNoProperty, orderNo);<o:p></o:p></span></p>

<p class=MsoNormal><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
LoadProperty(OrderHeadlineProperty, headline);<o:p></o:p></span></p>

<p class=MsoNormal><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<o:p></o:p></span></p>

<p class=MsoNormal><span><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span>public</span> OrderSearchCriteria() { }<o:p></o:p></span></p>

<p class=MsoNormal><span>&nbsp;&nbsp;&nbsp;
}</span><span><o:p></o:p></span></p>

<p class=MsoNormal><span><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><b><span>Sergey Barskiy<o:p></o:p></span></b></p>

<p class=MsoNormal><b><i><span>Principal Consultant<o:p></o:p></span></i></b></p>

<p class=MsoNormal><span>office: 678.405.0687 |
mobile:&nbsp;404.388.1899</span><span><o:p></o:p></span></p>

<p class=MsoNormal><span><img width=119 height=26 id="Picture_x0020_1" alt="cid:_2_0648EA840648E85C001BBCB886257279"><br>
</span><b><span>Microsoft Worldwide Partner of the Year |</span></b><span> </span><b><span>Custom
Development Solutions, Technical Innovation</span></b><span><o:p></o:p></span></p>

<p class=MsoNormal><span><o:p>&nbsp;</o:p></span></p>

<div>

<p class=MsoNormal><b><span>From:</span></b><span> abiramipattar
[mailto:cslanet@lhotka.net] <br>
<b>Sent:</b> Friday, July 31, 2009 8:06 AM<br>
<b>To:</b> Sergey Barskiy<br>
<b>Subject:</b> Re: [CSLA .NET] RE: Silverlight serialization<o:p></o:p></span></p>

</div>

<p class=MsoNormal><o:p>&nbsp;</o:p></p>

<p class=MsoNormal>Hi Sergey,<br>
<br>
&nbsp;&nbsp; I am getting the same error, even after i do as you have
suggested. Could you please help me with this as i am stuck at the same
scenario that the original post mentioned. Thanks.<br>
<br>
Regards,<br>
Sankar<br>
<br>
<br>
<o:p></o:p></p>

</div>



</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>swegele replied on Friday, July 31, 2009</h2>Actually I forgot to post the much simpler implementation of my DTO after hearing back from Rocky...  here it is<br /><br />[Serializable]<br />public class Location : Csla.Core.MobileObject<br />{<br />    public Guid LocationID { get; set; }<br />    public string LocationName { get; set; }<br />    public bool? Staffed24Hours { get; set; }<br />...<br />}<br /><br />Super simple<br /><br />No IMobileObject to worry about...just inherit from MobileObject and viola!<br /><br />Sean</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>FraggleRocks replied on Monday, September 07, 2009</h2>We are using a Criteria object in Silverlight for the first time, and encouter reflection type miss-match errors or the same serialization exception as in this thread.<br /><br />We took your example but cannot get it to work, can you point us in the right direction especially wrt method parameter types when using a criteria class.<br /><br />Our code snippet follows (commented out bits show different attempts in desparation!)<br /><br /><br />        public static void NewEquipment(EquipmentIdentityInfo equipmentStruct, EventHandler> handler)<br />        {<br />            var dp = new DataPortal();<br />            dp.CreateCompleted += handler;<br />            //dp.BeginCreate(new EquipmentIdentityInfo { ClientId = equipmentStruct.ClientId, TransactionId = equipmentStruct.TransactionId });<br />            dp.BeginCreate(equipmentStruct);<br />            //dp.BeginCreate(new SingleCriteria(equipmentStruct));<br />        }<br /><br />        #endregion<br /><br />#if !SILVERLIGHT<br />        //protected void DataPortal_Create(EquipmentIdentityInfo criteria)<br />        protected void DataPortal_Create(SingleCriteria criteria)<br />        {<br />            CreatedUnderTransactionId = criteria.Value.TransactionId;<br />            LoadProperty(CreatedUnderTransactionIdProperty, CreatedUnderTransactionId);<br />            BelongsToClientId = criteria.Value.ClientId;<br />            LoadProperty(BelongsToClientIdProperty, BelongsToClientId);<br />            ValidationRules.CheckRules();<br />        }<br /><br /> [Serializable]<br />    public class EquipmentIdentityInfo : Csla.Core.MobileObject //CriteriaBase <br />    {<br />      /*  public EquipmentIdentityInfo(int TransactionId, int ClientId)<br />        {<br />            m_TransactionId = TransactionId;<br />            m_ClientId = ClientId;<br />        }<br /><br />        public EquipmentIdentityInfo()<br />        {<br /><br />        }*/<br /><br />       /* private int m_TransactionId;<br />        public int TransactionId { get { return m_TransactionId; } set { m_TransactionId = value; } }<br /><br />        private int m_ClientId;<br />        public int ClientId { get { return m_ClientId; } set { m_ClientId = value; } }*/<br />        public int TransactionId { get; set;}<br />        public int ClientId { get; set; }<br />    }<br /><br /></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>cds replied on Monday, September 07, 2009</h2>Hi<br /><br />I originated the post, and now have CslaLight criteria classes working properly (and my CslaLight app has just been released into production, after 9 months of hard work!) <br /><br />Anyway, here's a sample complex (i.e. more than one property) criteria class. (If you only have a single property you can use the Csla-provided SingleCriteria class.)<br /><br />using System;<br />using Csla;<br />using Csla.Serialization;<br />using Csla.Serialization.Mobile;<br /><br />namespace XXX.XXX.Library.EntityEdit<br />{<br />    [Serializable]<br />    public class FindLatestPatientStatusCriteria : CriteriaBase<br />    {<br />        public Guid PatientId { get; private set; }<br />        public Guid? ServiceId { get; private set; }<br /><br />        public FindLatestPatientStatusCriteria() { }<br /><br />        public FindLatestPatientStatusCriteria(Guid patientId, Guid? serviceId)<br />        {<br />            PatientId = patientId;<br />            ServiceId = serviceId;<br />        }<br /><br />        protected override void OnGetState(SerializationInfo info, Csla.Core.StateMode mode)<br />        {<br />            info.AddValue("PatientId", PatientId);<br />            info.AddValue("ServiceId", ServiceId);<br />        }<br /><br />        protected override void OnSetState(SerializationInfo info, Csla.Core.StateMode mode)<br />        {<br />            PatientId = info.GetValue("PatientId");<br />            ServiceId = info.GetValue("ServiceId");<br />        }<br />    }<br />}<br /><br /><br />I guess the important thing is that you're responsible for adding the properties to the state and retrieving them at the other end.<br /><br />Does that help? I can post some more code if necessary.<br /><br />Cheers...<br /><br />Craig<br /></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Adam replied on Tuesday, September 08, 2009</h2>
 
  Normal
  0
  
  
  
  
  false
  false
  false
  
  EN-US
  X-NONE
  X-NONE
  
   
   
   
   
   
   
   
   
   
   
   
  
  MicrosoftInternetExplorer4
  
   
   
   
   
   
   
   
   
   
   
   
  

 
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
 




 /* Style Definitions */
 table.MsoNormalTable
	{mso-style-name:"Table Normal";
	mso-tstyle-rowband-size:0;
	mso-tstyle-colband-size:0;
	mso-style-noshow:yes;
	mso-style-priority:99;
	mso-style-qformat:yes;
	mso-style-parent:"";
	mso-padding-alt:0in 5.4pt 0in 5.4pt;
	mso-para-margin-top:0in;
	mso-para-margin-right:0in;
	mso-para-margin-bottom:10.0pt;
	mso-para-margin-left:0in;
	line-height:115%;
	mso-pagination:widow-orphan;
	font-size:11.0pt;
	font-family:"Calibri","sans-serif";
	mso-ascii-font-family:Calibri;
	mso-ascii-theme-font:minor-latin;
	mso-fareast-font-family:"Times New Roman";
	mso-fareast-theme-font:minor-fareast;
	mso-hansi-font-family:Calibri;
	mso-hansi-theme-font:minor-latin;}



<p class="MsoNormal"><span>HI Craig</span></p>

<p class="MsoNormal"><span><o:p>&nbsp;</o:p></span></p>

<p class="MsoNormal"><span>Thanks for your sample code it helped</span><span><span></span></span></p>

<p class="MsoNormal"><span><o:p>&nbsp;</o:p></span></p>

<p class="MsoNormal"><span>Hers is what I ended up with – slightly different
but essentially the same!</span></p>

<p class="MsoNormal"><span><o:p>&nbsp;</o:p></span></p>

<p class="MsoNormal"><span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span>public</span> <span>static</span> <span>void</span>
NewEquipment(<span>EquipmentIdentityInfo</span>
equipmentStruct, <span>EventHandler</span>&lt;<span>DataPortalResult</span>&lt;<span>EquipmentRoot</span>&gt;&gt;
handler)<o:p></o:p></span></p>

<p class="MsoNormal"><span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>{<o:p></o:p></span></p>

<p class="MsoNormal"><span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span>var</span>
dp = <span>new</span> <span>DataPortal</span>&lt;<span>EquipmentRoot</span>&gt;();<o:p></o:p></span></p>

<p class="MsoNormal"><span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>dp.CreateCompleted += handler;<o:p></o:p></span></p>

<p class="MsoNormal"><span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>dp.BeginCreate(equipmentStruct);<o:p></o:p></span></p>

<p class="MsoNormal"><span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>}<o:p></o:p></span></p>

<p class="MsoNormal"><span><o:p>&nbsp;</o:p></span></p>

<p class="MsoNormal"><span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>#endregion<o:p></o:p></span></p>

<p class="MsoNormal"><span><o:p>&nbsp;</o:p></span></p>

<p class="MsoNormal"><span>#if</span><span> !SILVERLIGHT<o:p></o:p></span></p>

<p class="MsoNormal"><span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span>protected</span>
<span>void</span> DataPortal_Create(<span>EquipmentIdentityInfo</span>
criteria)<o:p></o:p></span></p>

<p class="MsoNormal"><span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>{<o:p></o:p></span></p>

<p class="MsoNormal"><span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>CreatedUnderTransactionId =
criteria.TransactionId;<o:p></o:p></span></p>

<p class="MsoNormal"><span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>LoadProperty(CreatedUnderTransactionIdProperty,
CreatedUnderTransactionId);<o:p></o:p></span></p>

<p class="MsoNormal"><span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>BelongsToClientId =
criteria.ClientId;<o:p></o:p></span></p>

<p class="MsoNormal"><span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>LoadProperty(BelongsToClientIdProperty, BelongsToClientId);<o:p></o:p></span></p>

<p class="MsoNormal"><span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>ValidationRules.CheckRules();<o:p></o:p></span></p>

<p class="MsoNormal"><span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>}<o:p></o:p></span></p>

<p class="MsoNormal"><span>#endif</span></p>

<p class="MsoNormal"><span><o:p>&nbsp;</o:p></span></p>

<p class="MsoNormal"><span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>[<span>Serializable</span>]<o:p></o:p></span></p>

<p class="MsoNormal"><span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span>public</span> <span>class</span> <span>EquipmentIdentityInfo</span>
: <span>CriteriaBase</span> <span>//Csla.Core.MobileObject
<o:p></o:p></span></span></p>

<p class="MsoNormal"><span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>{<o:p></o:p></span></p>

<p class="MsoNormal"><span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span>public</span>
<span>int</span> TransactionId { <span>get</span>;
<span>private</span> <span>set</span>; }<o:p></o:p></span></p>

<p class="MsoNormal"><span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span>public</span>
<span>int</span> ClientId { <span>get</span>;
<span>private</span> <span>set</span>; }<o:p></o:p></span></p>

<p class="MsoNormal"><span><o:p>&nbsp;</o:p></span></p>

<p class="MsoNormal"><span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span>public</span>
EquipmentIdentityInfo() { }<o:p></o:p></span></p>

<p class="MsoNormal"><span><o:p>&nbsp;</o:p></span></p>

<p class="MsoNormal"><span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span>public</span>
EquipmentIdentityInfo(<span>int</span> transactionId, <span>int</span> clientId)<o:p></o:p></span></p>

<p class="MsoNormal"><span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>{<o:p></o:p></span></p>

<p class="MsoNormal"><span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>TransactionId = transactionId;<o:p></o:p></span></p>

<p class="MsoNormal"><span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>ClientId = clientId;<o:p></o:p></span></p>

<p class="MsoNormal"><span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>}<o:p></o:p></span></p>

<p class="MsoNormal"><span><o:p>&nbsp;</o:p></span></p>

<p class="MsoNormal"><span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span>protected</span>
<span>override</span> <span>void</span>
OnGetState(Csla.Serialization.Mobile.<span>SerializationInfo</span>
info, Csla.Core.<span>StateMode</span> mode)<o:p></o:p></span></p>

<p class="MsoNormal"><span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>{<o:p></o:p></span></p>

<p class="MsoNormal"><span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>info.AddValue(<span>"TransactionId"</span>, TransactionId);<o:p></o:p></span></p>

<p class="MsoNormal"><span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>info.AddValue(<span>"ClientId"</span>, ClientId);<o:p></o:p></span></p>

<p class="MsoNormal"><span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>}<o:p></o:p></span></p>

<p class="MsoNormal"><span><o:p>&nbsp;</o:p></span></p>

<p class="MsoNormal"><span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span>protected</span>
<span>override</span> <span>void</span>
OnSetState(Csla.Serialization.Mobile.<span>SerializationInfo</span>
info, Csla.Core.<span>StateMode</span> mode)<o:p></o:p></span></p>

<p class="MsoNormal"><span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>{<o:p></o:p></span></p>

<p class="MsoNormal"><span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>TransactionId =
info.GetValue&lt;<span>int</span>&gt;(<span>"TransactionId"</span>);<o:p></o:p></span></p>

<p class="MsoNormal"><span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>ClientId = info.GetValue&lt;<span>int</span>&gt;(<span>"ClientId"</span>);<o:p></o:p></span></p>

<p class="MsoNormal"><span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>}<o:p></o:p></span></p>

<p class="MsoNormal"><span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>}<o:p></o:p></span></p>

<p class="MsoNormal"><span>Please note that the</span><span> </span><span>EquipmentIdentityInfo </span><span>class can
be either an internal or external class!</span></p>

<p class="MsoNormal"><span><o:p>&nbsp;</o:p></span></p>

<p class="MsoNormal"><span>Thanks for the help – Adam and Fraggle
Rock/Rob</span></p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>abiramipattar replied on Sunday, August 02, 2009</h2>Hi Sergey,<br>&nbsp;&nbsp; I started with the criteria base, but i didn't use the managed backing fields. But, i am not sure if that is the problem in the first place. Because when i used the criteria class derived the criteria base &amp; passed it along either as a SingleCriteria or directly, there was no error, but the values were not coming through when it reaches the Data Portal method. Am not sure what was happening there?<br><br>Regards,<br>Sankar<br>&nbsp; <br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Sunday, August 02, 2009</h2><P>The rules around MobileFormatter are fairly simple.</P>
<OL>
<LI>All types to be serialized must implement IMobileObject.</LI>
<LI>All field values placed into the serialization stream in the IMobileObject implementation must be basic .NET types (types that are automatically known by the DataContractSerializer)</LI>
<LI>All child object references placed into the serialization stream by the IMobileObject implementation must implement IMobileObject</LI></OL>
<P>If you don't want to manually implement IMobileObject (and I recommend you don't) then you should inherit from MobileObject, MobileList, etc. These all implement IMobileObject for you.</P>
<P>If you use private backing fields you must override OnGetState() and OnSetState() and manually get/set the field values from the serialization stream. Remember that these types must be simple .NET types that are known to the DataContractSerializer.</P>
<P>If you use managed backing fields CSLA .NET does the work for you and you can relax and enjoy the ride. This was the primary reason for inventing managed backing fields.</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>abiramipattar replied on Sunday, August 02, 2009</h2>Thanks a ton Rocky. That cleared-up a number of things for me. Maybe, its time for you to write another CSLA book like "1001 things you should know about CSLA.NET" or say "Hardcore CSLA.NET" and compile these little gems you have in these forums with a bit a more detailed commentary so that us low-lifes can lap it up and continue to be lazy ;-)<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>abiramipattar replied on Sunday, August 02, 2009</h2>Ok. I found out what the problem was. All the members of your criteria class should be basic .NET types. It doesn't even accept SmartDate. Once i did the change, everything was working. Thanks.<br><br>Regards,<br>Sankar<br></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
