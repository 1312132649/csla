<html><header><title>BrokenRules Event?</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>BrokenRules Event?</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/8873.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>idroesse posted on Tuesday, May 04, 2010</h2><p>Hi guys, I&#39;m looking for something that can help me&nbsp;to notify operator that one (or more) rules had been broke.&nbsp; Is there an event to use?</p>
<p>I&#39;m developping a WPF application and I want to create a Behaviour to attach to every Window in wich display brokenrules descriptions.</p>
<p>Please accept my apologies for any spelling mistakes</p>
<p>Enrico</p></div><div style='padding:0 15 3 15;background-color:lightgreen'><h2>RockfordLhotka replied on Tuesday, May 04, 2010</h2><p>CSLA follows the approach defined by data binding, which means that the PropertyChanged event is used to detect that a property has changed, and therefore that a check for broken rules should be made.</p>
<p>Specifically, when a PropertyChanged event is handled, you can use the IDataErrorInfo interface to get one broken rule related to that particular property.</p>
<p>IDataErrorInfo turns out to be pretty limiting (only returning one error, and no severity information), so you can also use the BrokenRulesCollection property of a BusinessBase object to get the complete list of broken rules, and then you can use LINQ queries to filter/sort the list as you wish. This gives you access to broken rules of all three severity values, and of all properties.</p>
<p>But even in this case, the trigger is the PropertyChanged event.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>idroesse replied on Tuesday, May 04, 2010</h2><p>Perfect, so I can trigger IsValid property on my Root Object.&nbsp; But BrokenRulesCollection on Root object contains only rules defined for it, not for its children.&nbsp; What I need to use to get complete BrokenRulesCollection (root + children)?</p>
<p>Thanks again,&nbsp; Enrico</p></div><div style='padding:0 15 3 15;background-color:lightgreen'><h2>RockfordLhotka replied on Tuesday, May 04, 2010</h2><p>You need to write code in your business class to do this rollup. The BrokenRulesCollection class has a Merge() method that allows you to merge multiple broken rule lists into a single list, making it relatively easy to create a GetAllBrokenRules property on your business object.</p>
<p>As always, I recommend that you have your own custom base class between BusinessBase&lt;T&gt; and your actual business class, so (assuming you are using managed backing fields) you can write a general version of this property in your custom base class.</p>
<p>The one thing to be aware, is that the broken rules items in the broken rules list don&#39;t contain the name of the business object - so the merged list may not be exactly what you want, and you might want to create your own merged list type that has more information.</p>
<p>You can also look at the CSLAcontrib project on codeplex, where there&#39;s a Windows Forms tree control that shows all broken rules for an object graph. You can probably borrow some ideas from that control and adapt it to WPF.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JoeFallon1 replied on Sunday, May 16, 2010</h2><p>I have posted code for how to retrieve all broken rules before. <br />See this thread:<br /><a href="http://forums.lhotka.net/forums/p/1220/7444.aspx#7444">http://forums.lhotka.net/forums/p/1220/7444.aspx#7444</a></p>
<p>Joe</p>
<p>&nbsp;</p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
