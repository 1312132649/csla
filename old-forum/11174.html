<html><header><title>Business rules run in first business object Instance only</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Business rules run in first business object Instance only</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/11174.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>somia posted on Sunday, February 19, 2012</h2><p><span style="font-size:small;"><span style="font-family:Calibri;">We are working with CSLA 4.2 and we have an issue with the business rules.we set business Rules (for example default value for Date property) </span></span></p>
<p><span style="font-size:small;"><span style="font-family:Calibri;">EXP:<br /></span></span></p>
<p>protected override void AddBusinessRules()<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; base.AddBusinessRules();</p>
<p><span style="font-size:small;"><span style="font-family:Calibri;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b> Date = DateTime.Now;</b></span></span></p>
<p><span style="font-size:small;"><span style="font-family:Calibri;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span></span></p>
<p>&nbsp;</p>
<p><span style="font-size:small;"><span style="font-family:Calibri;">when we create new business object like:<br /></span></span></p>
<p><span style="font-size:small;"><span style="font-family:Calibri;">&nbsp;BL.DailyFlight df = BL.DailyFlight.New();</span></span></p>
<p><span style="font-size:small;"><span style="font-family:Calibri;">&nbsp;the date property set correctly in first time <b>(DateTime.Now)</b> but once create another instance from same Business object the date property not set to <b>(</b></span></span><span style="font-size:small;"><span style="font-family:Calibri;"><b>DateTime.Now)</b>.</span></span></p>
<p>&nbsp;</p>
<p><span style="font-size:small;"><span style="font-family:Calibri;">how we can resolve this issue?<br /></span></span></p>
<p>&nbsp;</p>
<p><span style="font-size:small;"><span style="font-family:Calibri;"><br /></span></span></p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JonnyBee replied on Sunday, February 19, 2012</h2><p>Hi,</p>
<p><b>Do NOT set default values in AddBusinessRules. This method should ONLY be used to define the business rules for the type. </b></p>
<p>Business Rules is defined per type so AddBusinessRules is only called the first time an object of this type is created. (Hence you only get the value in the first object). IE: AddBusinessRules is only for registering rules for a type - not for execution of rules.</p>
<p>You should set default values in DataPortal_Create or the object factory Create method, depending on your choice of Data Access.</p>
<p>Default values will also be set the first time your code get a value from an &quot;non-initialized&quot; field or when a rule is called on that field. </p>
<p>BusinessRules will run when you call BusinessRules.CheckRules or (after the object is databound) -&nbsp; &lt;bo&gt;.PropertyHasChanged or &lt;bo&gt;.CheckObjectRules.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>somia replied on Monday, February 20, 2012</h2><p>Many thanks Jonny</p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
