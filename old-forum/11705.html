<html><header><title>N-Level undo CancelEdit reverses collection order</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>N-Level undo CancelEdit reverses collection order</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/11705.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>j0552 posted on Friday, November 16, 2012</h2><p>Hi</p>
<p>CSLA v4.3.13</p>
<p>This looks like a bug to me. If I call CancelEdit on an object with a child collection the collection is restored in reverse order from the original.</p>
<p>Can you suggest a fix or workaround?</p>
<p>Thanks<br />Andrew</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Friday, November 16, 2012</h2><p>It is a known behavior that deleted items restored to a collection by CancelEdit are added to the end of the collection. There&#39;s no realistic way to maintain relative positions of deleted items in the collection through a potential process of add/remove/edit changes.</p>
<p>As a result, the order of items in a collection is always assumed to be indeterminate. If you need a determinate order for items in the collection, you should consider using a LINQ query with ToSyncList to create a determinate view over the collection.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>j0552 replied on Friday, November 16, 2012</h2><p>OK</p>
<p>I hadn&#39;t thought about how the CancelEdit works so wrongly assumed the objects&nbsp;would revert to the extact original state. I&#39;m using windows forms in this project so I&#39;ve added a SortedBindingList to bind to the BindingSource. Now it works as I expected.</p>
<p>Thank you<br />Andrew</p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
