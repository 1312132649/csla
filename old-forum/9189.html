<html><header><title>Need idea to help build test</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Need idea to help build test</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/9189.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 posted on Thursday, July 08, 2010</h2><p>Hi,</p>
<p>I have a Csla business library which is used by a Windows service to syncronize a master database with an application database.&nbsp; I have a list of &quot;things that should be considered for syncing&quot;, and I go through that list and for each ROB object I create a Syncronization BO.&nbsp; When that BO is saved, it checks if it&#39;s valid in the data portal.</p>
<p>If it is, it does some syncing to both databases (some of the data is two way).&nbsp; If not, it logs the reasons in another table so users can see why the data wasn&#39;t synced.</p>
<p>This works ok, but I have problems debugging since I basically have to start both databases, make changes in either one, than watch that the sync happens.&nbsp; I have a controller that runs as an NUnit test to start the threads and stuff... but obviously this isn&#39;t an ideal way to test.</p>
<p>What I&#39;m hitting now is that, during the syncing in the DataPortal_Insert, there is some logic that if X and Y are true, then a stored procedure should be called.&nbsp; There are a few of these cases, and the customer is reporting that the procedure isn&#39;t being called when they believe it should be.</p>
<p>I&#39;d like to be able to setup a unit test so that I can more easily figure out what&#39;s going on, so that I don&#39;t rely on the databases at all.&nbsp; For the Sql side I&#39;m using Linq to sql and a custom library for the other database.</p>
<p>Or should I simply create boolean properties and test that they are correct, and assume that the procs will be called provided the bools evaluate properly?&nbsp; Maybe I have too much business logic in the DP_I?</p>
<p>Thanks</p></div><div style='padding:0 15 3 15;background-color:lightgreen'><h2>RockfordLhotka replied on Thursday, July 08, 2010</h2><p>There are four data access models supported by CSLA (see the <a href="http://www.lhotka.net/cslanet/faq/DataFaq.ashx">data access FAQ</a>).</p>
<p>Models 2, 3 and 4 allow you to create pluggable data access layers (DALs), which means you could create a mock DAL with test data pretty easily.</p>
<p>If you are using model 1, you might look at switching to model 2, at least for the objects in this use case, so you can create a mock DAL.</p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
