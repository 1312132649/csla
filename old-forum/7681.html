<html><header><title>FieldManager.UnsetProperty?</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>FieldManager.UnsetProperty?</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/7681.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 posted on Thursday, September 24, 2009</h2>Hi,<br /><br />I have an scenario where a BO has a field which may contain a lot of binary data.  I'm trying to reduce the size of the BO on the wire, which to the server can't be done... but once the binary data is in the database, I'd like to unset the field so that the binary data doesn't come back with the BO.  This property can be lazy loaded, so if its actually used on the client it will be loaded then.<br /><br />I tried using LoadProperty( Property, null ), but lazy loading then breaks, presumably because FieldManager.FieldExists returns true.  <br /><br />Is there anyway to "unset" a field after it's been accessed?</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JonnyBee replied on Thursday, September 24, 2009</h2>Hi Andy, <br><br>This is already registered on the wishlist for Csla. <br><a href="http://www.lhotka.net/cslabugs/edit_bug.aspx?id=540">http://www.lhotka.net/cslabugs/edit_bug.aspx?id=540</a><br><br>For now - your lazy loading must check if both FieldManager.FieldExists and the property value is null.&nbsp; <br><br>/jonnybee<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Thursday, September 24, 2009</h2>Ok, thanks to both of you for your responses.  I'll add the null check too.</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>rsbaker0 replied on Thursday, September 24, 2009</h2><P>I ran into similar issues trying to create custom IFieldData implementations -- all the good stuff in FieldDataManager is private or internal. I finally had to make GetFieldData() public, but that won't solve your problem. </P>
<P>FieldExists returns true&nbsp;if the _fieldData[] slot for the property has&nbsp;any value in it, whether the actual data value&nbsp;wrapped by the IFieldData&nbsp;reference&nbsp;is null or not. </P>
<P>There is even a "RemoveField" function (still internal), but it just sets the wrapped value to null and doesn't remove the IFieldData itself, so FieldExists will still return true after RemoveField() is called. </P>
<P>As a practical matter, I think you just need a way to set _fieldData[property index] = null, but there isn't a way to do that in 3.5 without changing CSLA. I think it would be fairly simple addition (undo issues aside).</P>
<P>With my lazing loading implementation, I just ended up setting the property value to null, and I test for that and reload if either FieldExists is false or Get/ReadProperty() returns null.</P></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
