<html><header><title>WINRT ManagedObjectBase bug</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>WINRT ManagedObjectBase bug</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/11855.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>ayubu posted on Tuesday, February 26, 2013</h2><p>Hi Rocky</p>
<p> , i am using latest code in the repo. I noted&nbsp; if you create a command object with a business object property and if trying to LoadProperty in the Execute method i get a&nbsp; null reference exception from the csla assembly.</p>
<p>&nbsp;</p>
<p>i noted the method in the ManagedObjectBase</p>
<p>&nbsp;</p>
<p>&nbsp;protected virtual void LoadProperty(IPropertyInfo propertyInfo, object newValue)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; var t = this.GetType();<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; var flags = BindingFlags.Public | BindingFlags.NonPublic | BindingFlags.Instance;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; var method = t.GetMethods(flags).FirstOrDefault(c =&gt; c.Name == &quot;LoadProperty&quot; &amp;&amp; c.IsGenericMethod);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; var gm = method.MakeGenericMethod(propertyInfo.Type);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; var p = new object[] { propertyInfo, newValue };<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; gm.Invoke(this, p);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</p>
<p>&nbsp;</p>
<p>if i change the method to this , the issue disappears</p>
<p>&nbsp; protected virtual void LoadProperty(IPropertyInfo propertyInfo, object newValue)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; var t = this.GetType();<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //var flags = BindingFlags.Public | BindingFlags.NonPublic | BindingFlags.Instance;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; var method = t.<b>GetRuntimeMethods</b>().FirstOrDefault(c =&gt; c.Name == &quot;LoadProperty&quot; &amp;&amp; c.IsGenericMethod);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; var gm = method.MakeGenericMethod(propertyInfo.Type);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; var p = new object[] { propertyInfo, newValue };<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; gm.Invoke(this, p);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>In the attched repro the code are in the file FailOne.vb</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Tuesday, February 26, 2013</h2><p>Thank you.</p>
<p><a href="https://github.com/MarimerLLC/csla/issues/50">https://github.com/MarimerLLC/csla/issues/50</a></p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
