<html><header><title>Validation Problem with Child Objects</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Validation Problem with Child Objects</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/2704.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>Bonio posted on Monday, April 16, 2007</h2><P>I have an Ediatable Root Object (Invoice) that holds a collection of line items (EditableChildList). (I have used the latest CodeSmith CSLA templates to generate the code).</P>
<P>I have set up custom validation in the root to check that lineitems exist.</P>
<P>When I ask the object to load an existing invoice and lineitems, it does so without problem, however the BrokenRules collection always states that there are no lineitems !!</P>
<P>Stepping through the code, it looks as if the "add custom rules" procedure is called before the object has loaded any data.</P>
<P>Anyone know how I can get this to work??</P>
<P>Thanks</P>
<P>Bone</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Bonio replied on Monday, April 16, 2007</h2><P>I think I have solved this issue:</P>
<P>&nbsp;</P>
<P>I added a "ValidationRules.CheckRules()" in the DataPortal_Fetch method [shown below]:</P>
<P>&nbsp;</P><FONT size=2>
<P></FONT><FONT color=#0000ff size=2>private</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>void</FONT><FONT size=2> DataPortal_Fetch(</FONT><FONT color=#2b91af size=2>Criteria</FONT><FONT size=2> criteria)</P>
<P>{</P>
<P></FONT><FONT color=#0000ff size=2>using</FONT><FONT size=2> (</FONT><FONT color=#2b91af size=2>SqlConnection</FONT><FONT size=2> cn = </FONT><FONT color=#0000ff size=2>new</FONT><FONT size=2> </FONT><FONT color=#2b91af size=2>SqlConnection</FONT><FONT size=2>(</FONT><FONT color=#2b91af size=2>Database</FONT><FONT size=2>.CPFMangoConnection))</P>
<P>{</P>
<P>cn.Open();</P>
<P>ExecuteFetch(cn, criteria);</P>
<P></P></FONT><FONT size=2>
<P>ValidationRules.CheckRules();</P></FONT><FONT size=2>
<P>} </FONT><FONT color=#008000 size=2>//using</P></FONT><FONT size=2>
<P>}</P></FONT></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JoeFallon1 replied on Monday, April 16, 2007</h2><P>I agree.</P>
<P>In my templates the last line of code for a Fetch is <FONT size=2></P>
<P><FONT size=3>ValidationRules.CheckRules()</FONT></P>
<P><FONT size=3>Joe</FONT></P>
<P>&nbsp;</P></FONT></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
