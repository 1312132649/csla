<html><header><title>Asp.Net listview with asp:datapager</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Asp.Net listview with asp:datapager</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/7740.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>ozhug posted on Tuesday, October 06, 2009</h2>Hi All,<br /><br />I have a asp.net listview (lvAddItems) bound to a BusinessListBase (cslaAddItems)<br />which returns search results used for pseudo bulk editing (adding items to another BO).<br />The listview is using a asp:DataPager which displays 10 rows at a time.<br /><br />on the updatepanel which displays the listview (lvAddItems) <br />a button and the UpdateObject event of the CSLA datasource are used <br />to add items from the listview to the BO<br /><br />protected void ButtonAddItems_Click(object sender, EventArgs e)<br />{<br /><br />    var list = lvAddItems.Items.ToList();<br />    foreach (ListViewDataItem item in list)<br />    {<br />        lvAddItems.UpdateItem(item.DataItemIndex, false);  <br />    } <br />}<br /><br />protected void cslaAddItems_UpdateObject(object sender, Csla.Web.UpdateObjectArgs e)<br />{<br />    if (null != e.Values["Qty"])<br />    {<br />	string error = string.empty;<br />        int id = int.Parse(e.Keys["ProductId"].ToString());<br />        int qty = int.Parse(e.Values["Qty"].ToString());<br />	//check some values add if ok ...<br />	if (isOK)	<br />	{ anotherBO.AddItem(id,qty);}<br />	else<br />	{ errormessage += error;}<br />    }<br />}<br /><br />this is working fine if the items to be added are on PAGE ONE of the lvAddItems.<br />if the items are on page 2,3 etc it does not work.<br /><br />sending <br />lvAddITems.UpdateItem( 1 thru 10,true); is fine<br />to cslaAddItems_UpdateObject the Csla.Web.UpdateObjectArgs are correct and the items are added correctly.<br />sending<br />lvAddITems.UpdateItem( 11 thru more ,true); is broken <br />all of the cslaAddItems_UpdateObject the Csla.Web.UpdateObjectArgs are null.<br /><br />hopefully I am just missing something simple any help is appreciated.</div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
