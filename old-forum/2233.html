<html><header><title>ReadOnlyBase Authorization Rules </title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>ReadOnlyBase Authorization Rules </h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/2233.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>JoeFallon1 posted on Monday, January 29, 2007</h2><P>The constructor in ReadOnlyBase does not have the SyncLock code like Business Base does.</P>
<P>Same problem exists for:</P><FONT size=2>
<P></FONT><FONT color=#0000ff size=2>Private</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>Sub</FONT><FONT size=2> OnDeserializedHandler(</FONT><FONT color=#0000ff size=2>ByVal</FONT><FONT size=2> context </FONT><FONT color=#0000ff size=2>As</FONT><FONT size=2> StreamingContext)</P></FONT>
<P>Is this a bug? </P>
<P>=====================================================</P>
<P>ReadOnlyBase:</P><FONT color=#0000ff size=2>
<P>Protected</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>Sub</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>New</FONT><FONT size=2>()<BR>&nbsp; Initialize()<BR>&nbsp; AddInstanceAuthorizationRules()<BR>&nbsp; </FONT><FONT color=#0000ff size=2>If</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>Not</FONT><FONT size=2> Csla2.Security.SharedAuthorizationRules.RulesExistFor(</FONT><FONT color=#0000ff size=2>Me</FONT><FONT size=2>.GetType) </FONT><FONT color=#0000ff size=2>Then<BR>&nbsp;&nbsp;&nbsp; </FONT><FONT size=2>AddAuthorizationRules()<BR>&nbsp; </FONT><FONT color=#0000ff size=2>End</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>If<BR></FONT><FONT color=#0000ff size=2>End</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>Sub</P></FONT>
<P>=====================================================</P>
<P>BusinessBase:</P><FONT color=#0000ff size=2>
<P>Protected</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>Sub</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>New</FONT><FONT size=2>()<BR>&nbsp; Initialize()<BR>&nbsp; ...<BR></FONT><FONT size=2>&nbsp; AddInstanceAuthorizationRules()<BR>&nbsp; </FONT><FONT color=#0000ff size=2>If</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>Not</FONT><FONT size=2> Csla2.Security.SharedAuthorizationRules.RulesExistFor(</FONT><FONT color=#0000ff size=2>Me</FONT><FONT size=2>.GetType) </FONT><FONT color=#0000ff size=2>Then<BR>&nbsp;&nbsp;&nbsp; </FONT><FONT color=#0000ff size=2>SyncLock</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>Me</FONT><FONT size=2>.GetType<BR>&nbsp;&nbsp;&nbsp; &nbsp; </FONT><FONT color=#0000ff size=2>If</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>Not</FONT><FONT size=2> Csla2.Security.SharedAuthorizationRules.RulesExistFor(</FONT><FONT color=#0000ff size=2>Me</FONT><FONT size=2>.GetType) </FONT><FONT color=#0000ff size=2>Then<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; </FONT><FONT size=2>AddAuthorizationRules()<BR>&nbsp; &nbsp;&nbsp;&nbsp; </FONT><FONT color=#0000ff size=2>End</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>If<BR>&nbsp;&nbsp;&nbsp; </FONT><FONT color=#0000ff size=2>End</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>SyncLock<BR>&nbsp; </FONT><FONT color=#0000ff size=2>End</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>If<BR></FONT><FONT color=#0000ff size=2>End</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>Sub</P></FONT>
<P>=====================================================</P>
<P>On a side note: since the constructor and OnDeserialized both have large chunks of the same code shouldn't that code be re-factored into a separate Sub which can be called from both of them?</P>
<P>Joe</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JoeFallon1 replied on Wednesday, January 31, 2007</h2><P>Rocky,</P>
<P>Looking for some feedback on this too.</P>
<P>Joe</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Wednesday, January 31, 2007</h2>Fixed in 2.1.3.</div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
