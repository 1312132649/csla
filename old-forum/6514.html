<html><header><title>CancelEdit() problem with Children</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>CancelEdit() problem with Children</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/6514.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>rob.polak posted on Thursday, February 26, 2009</h2>Okay so I will give you a breif explanation of our object model.&nbsp; We have a root class Parameter which contains a List of ParameterAttributes<br><br>CSLA Version -&gt; 3.0.4.0<br>Root Class -&gt; Parameter<br>Editable Child List -&gt; ParameterAttribute List<br>Editable Child Class -&gt; ParameterAttribute<br><br>So we are using DataBinding on a WinForm(C#) application for Editing these Parameters.&nbsp; What I am seeing is that child objects are not being removed from the ParameterAttributeList when CancelEdit() is being called.&nbsp; For example:<br><br><u>ParameterAttributes Before CancelEdit() </u><br>[0]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {1223}<br>[1]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {-2}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;- New Object<br><br><u>ParameterAttributes After CancelEdit() </u><br>[0]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {1223}<br>
[1]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {-2}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;- New Object<br><br>As you can see it appears that the new objects are still persisting after the CancelEdit().&nbsp; What would cause this type of issue?<br><br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>rob.polak replied on Friday, February 27, 2009</h2>Bump.. Anyone?<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>lianglovexp replied on Monday, March 16, 2009</h2>At the parentObject,you can override AddNewCore methon like this:<br><br>protected override object AddNewCore()<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; User u = User.NewUser(string.Empty);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //fault<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //this.Items.Add(u);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //corrct<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; this.Add(u);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return u;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>rsbaker0 replied on Tuesday, March 17, 2009</h2>Another possibility is that the object is still bound to the UI when you called CancelEdit. If you are explicitly unbinding using the RebindUI or similar pattern frequently discussed here, then this would not be the case, but otherwise CSLA may not cascade the undo calls to child objects if the internal BindingEdit flag set via the IEditableObject interface calls indicates it is still bound.</div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
