<html><header><title>CommonRules Feature Request - Set Message Description at initialization</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>CommonRules Feature Request - Set Message Description at initialization</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/10128.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>mtavares posted on Friday, March 04, 2011</h2><p>Hi Rocky,</p>
<p>I was wondering if it might be possible to add this to a future version of CSLA. Right now all of the message descriptions are privately pulled from the resource file, but it would be nice if you could set the message description at the time of initializing the rule.&nbsp; The reason being is that there are times where I would want to use the common rule but don&#39;t want to use the standard message.&nbsp; A good example would be using the regex rule.&nbsp; Depending upon what regex i&#39;m&nbsp;validating against&nbsp;I might want to display a different message rather than the generic regex message.</p>
<p>I know that I can just write my own versions of these common rules to do that, and I have, but I&#39;ve had to rewrite these common rules every time a major version change comes out because rules are implemented a little differently each time.</p>
<p>I&#39;m just thinking of an implementation where there is a MessageDescription public property exposed to the CommonBusinessRule class and in the execute method just check to see if the property is empty or not. If it&#39;s empty then fall back to pulling from the resource file, but if it has a value than output that value.&nbsp; And you wouldn&#39;t even need to alter the class constructors at all, since people could just use&nbsp;a class initializer to set the property.</p>
<p>Thanks for listening,</p>
<p>Mike</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JonnyBee replied on Friday, March 04, 2011</h2><p>Hi Mike, </p>
<p>Having the Message available as a property on initialization would NOT enable localization as the resource files does. </p>
<p>A better option would be to supply a &quot;resource&quot; filename and &quot;key&quot; and have the rule fetch the string from the resource file. <br />BTW:This is how the DataAnnotation rules work.</p>
<p>&nbsp;</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>mtavares replied on Tuesday, March 08, 2011</h2><p>Hi Jonny,</p>
<p>While your suggestion isn&#39;t a bad idea, couldn&#39;t a user just as easily make a call to the resource file and key to pull the value when they set the property?&nbsp; From my standpoint having the property would give users the flexibility to change the message whether they want to use localization or not.</p>
<p>Thanks,</p>
<p>Mike</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Charleh replied on Tuesday, March 08, 2011</h2><p>I think you have to strike the balance between standards and useability within the framework&nbsp;- I think the resource filename/key option is a good idea as CSLA allows localisation, the supporting elements should all follow this same theme - and it&#39;s pretty much like using the standard rules.</p>
<p>I don&#39;t think implementing your own custom versions of these rules is much work and it&#39;s rare that the rules implementation completely changes</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JCardina replied on Tuesday, March 08, 2011</h2><p>I would be very dead set against that.&nbsp; We localize within our app because it serves the dual purpose of localization but also customization.&nbsp; In fact this is why we can&#39;t use the commonrules either.&nbsp; The original suggestion was simple and to the point and made sense, why needlessly complicate it?</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Tuesday, March 08, 2011</h2><p>The original suggestion doesn&#39;t solve the problem in the general case. Specifically, on a web server being used by people from numerous countries, or on an app server being used by clients with different cultures.</p>
<p>Remember that the rule instances are created once and cached per AppDomain. So what you are suggesting would cause the rule to grab the description based on the culture of the first user to hit the server, and all other users would get that result regardless of their culture.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JCardina replied on Tuesday, March 08, 2011</h2><p>In our case we use <b>codes </b>for <span style="text-decoration:underline;">all </span>text displayed in the UI and it&#39;s resolved at the UI layer just before being displayed to the user based on their language preferences.&nbsp; I&#39;m not sure how else you would do it but if what you say is true then of course your system is equally broken in the same way.</p>
<p>Assuming that every user is going to speak the same language as the first person who logs in seems like a bad idea just on the face of it from a framework point of view.&nbsp; It&#39;s of course something that might be valid from the implementers point of view but wouldn&#39;t it be best to leave it up to them?</p>
<p>&nbsp;</p>
<p>&nbsp;</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Tuesday, March 08, 2011</h2><p>Of course in the end, no one is forced to use the CommonRules implementations. If they don&#39;t work for a specific application architecture or scenario that&#39;s just fine. If you stop and think about it, it is absolutely impossible for me to meet everyone&#39;s requirements.</p>
<p>And yet, just like Microsoft has now done with DataAnnotations,&nbsp;it is important for the framework to provide <em>some</em> implementation of the most basic validation rules because they are so common.</p>
<p>And the reality is that my existing implementations work for almost everyone. And if we make them support resource-based localization they&#39;ll support a whole lot more people without breaking existing users.</p>
<p>And anyone who finds that they don&#39;t fit well into a given application can replicate the rules in a couple hour&#39;s time, so there&#39;s a viable solution for everyone.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JCardina replied on Tuesday, March 08, 2011</h2><p>Yup, no way you can be everything to everyone.&nbsp; I was just putting in my 2c worth to add a differing point of view to the discussion.&nbsp;</p>
<p> It&#39;s your framework to do with as you wish.&nbsp; </p>
<p>From my point of view I see it as two options:</p>
<p>1) Leave it entirely in the hands of the implementer using the framework so they can use whatever system they wish while still enjoying the benefit of less code to write</p>
<p>2) Needlessly imposing a strict standard that won&#39;t work for everyone for seemingly no useful purpose other than in a tangential way Microsoft does it that way so of course it *must* be right. ;)</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Tuesday, March 08, 2011</h2><p>I think the important thing to understand is that the existing functionality of CommonRules won&#39;t be affected by whatever we do. This is not nearly important enough to break everyone who is using the rules today.</p>
<p>But we can easily add resource name properties to the rules so people can optionally provide their own resource files with their own resources, and (at least right now) I don&#39;t think we need to break existing functionality to make that happen.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>mtavares replied on Wednesday, March 09, 2011</h2><p>Hi Rocky,</p>
<p>I apologize if I don&#39;t fully understand, but how would opening up the property break existing functionality?&nbsp; My thought was that if they filled in the property during initialization then use whatever they filled in, but if it was not set to anything then use the existing resource file for the message.&nbsp; So if a user didn&#39;t change anything about their rules, it wouldn&#39;t affect them.&nbsp; </p>
<p>And just one more question.&nbsp; How is this different than allowing users to put a string in as a friendly name for the property?&nbsp; Doesn&#39;t that functionality also bypass localization?</p>
<p>Also just as a sidenote, I hadn&#39;t used Microsoft&#39;s DataAnnotations before, but in looking at them, they actually allow for both solutions. The ability to set your own error message, or to pull from the resource file.&nbsp; So why couldn&#39;t CSLA follow the same practice and allow both?</p>
<p>I just want to also say, thanks for all the work you&#39;ve put into the framework over the years, and that it has saved me a lot of time and effort for a multitude of projects, so I don&#39;t want to sound ungrateful, because I absolutely love using the framework.&nbsp; I just don&#39;t see how this small request is such a bad idea overall.</p>
<p>Thanks again.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>mtavares replied on Tuesday, March 08, 2011</h2><p>I get the value of using localization and your reasons to implement the rule message description that way, but I really have to question whether localization is the general widespread case.&nbsp; For larger corporate global applications I see the use, but for small business use whether used in house or for targeting a single culture implementation, it just seems like overkill.&nbsp; Most of the apps I work on for clients fall into the latter category, so maybe i&#39;m just disconnected from the general use case.&nbsp; </p>
<p>And I understand that it isn&#39;t that difficult to implement my own common rules, but i&#39;ve had to update them a few times now&nbsp;since v2 across multiple apps, so I was just hoping&nbsp;this easy suggestion could&nbsp;ease the pain of recreating the wheel whenever I have to upgrade&nbsp;to the next version.&nbsp; &nbsp;</p>
<p>If customization using&nbsp;a resource file/key is the way it needs to be in the future then I guess that will at least take care of me having to recreate the common rules, but I guess I just don&#39;t see why it&#39;s a big deal to open up that property for users to inject their own messages if they understand the ramifications of the rules being cached per AppDomain in addition to the localized solution.</p>
<p>Thanks for listening.&nbsp; </p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Tuesday, March 08, 2011</h2><p>This is a good suggestion. As Jonny indicates, we&#39;d almost certainly copy the DataAnnotations solution to the problem, allowing you to provide resource key names so we could read resource strings - just like DataAnnotations.</p>
<p>I&#39;ve added this to the wish list.</p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
