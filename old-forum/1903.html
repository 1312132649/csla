<html><header><title>Broken Rules issues in 2.1</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Broken Rules issues in 2.1</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/1903.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>david.wendelken posted on Tuesday, December 05, 2006</h2><P>I've run into some issues with the way rules are being handled in v2.1.</P>
<P>Basically, the problems I've run into all derive from a new capability that hasn't been fully rippled through the library and sample application.</P>
<P>We now allow an object to be saved when rules are broken (in warning or info only state).</P>
<P>This allows the following situations to occur:</P>
<UL>
<LI>An editable object can have broken rules when it is loaded from the database.&nbsp; The sample project does not check for broken rules when the object is loaded.&nbsp;&nbsp;Adding <STRONG><EM>ValidationRules.CheckRules(); </EM></STRONG>after <FONT size=2><EM><STRONG><FONT size=3>MarkOld();</FONT>&nbsp;&nbsp;</STRONG></EM></FONT>appears to do the trick.&nbsp; Of course, if there are no rules with an Information or Warning status, that step does not need to be done.</LI>
<LI>A read only object can also initialized from the database with broken rules, for the same reason.&nbsp; (Just because the user isn't allowed to change the data in that use case doesn't mean that the rules aren't broken!&nbsp; I may need to inform one user so they apply pressure on another user who has the authority to change the data.)</LI>
<LI>The ReadOnlyBase class does not have support for validation rules, which makes it hard to add in support for this.&nbsp; (I suppose I could just use BusinessBase and disable the editing features but have never had occasion to use it.)</LI></UL>
<P>Comments?</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>xal replied on Wednesday, December 06, 2006</h2>As far as bullet # 1, I always call CheckRules inside dataportal fetch. Why?, simply because not all the data in the tables are loaded through the BOs. There's always someone playing directly in the tables, or an import tool that does massive inserts or updates which could potentially screw up the data and fetched objects invalid.<br><br>Just my 2 cents.<br><br>Andr√©s<br></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
