<html><header><title>Project structure to prohibit direct access to database by users</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Project structure to prohibit direct access to database by users</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/5366.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>triplea posted on Tuesday, September 09, 2008</h2><P>Up till now I have only used CSLA with its simple dataportal implementation (everything done locally). I am&nbsp;at the designing stage of a bigger project where one of the main requirements is to prohibit users accessing the datastore (SQL Server 2005) directly via Excel/Access etc.<BR>I have done a bit of reading (and need to review the book again after a long time) about how to get about this. Also, I checked the following posting about pros/cons: <A href="http://www.lhotka.net/weblog/TheCostsAndSecurityBenefitsOfNtierOver2tier.aspx">http://www.lhotka.net/weblog/TheCostsAndSecurityBenefitsOfNtierOver2tier.aspx</A>. What is not clear to me yet is whether I will be able, by adopting a 3-tier model (or something alternative which I have completly missed), block users accessing the database directly. I think its a combined infrastructure/implementation effort since I assume that I could restrict the database to allow connections only from the application server. Is that realistic or did I get this completly wrong? Simply hiding database credentials (i.e. database server name) would not be enough in this scenario, an actual restriction&nbsp;is required.</P>
<P>We will be using CSLA 3.0.4 (.Net 3 installed on all machines), SQL Server 2005, it is a Windows Forms app and Windows Authentication is used throughout.</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Tuesday, September 09, 2008</h2>The short answer is that yes, you can.&nbsp; If you have Sql 2005 for example, you can set it up to accept only Local connections.&nbsp; If you also use IIS on the database server, this will be your Application server as well.&nbsp; So your BO's DataPortal code will run on the database server, and it will be a local connection.<br><br>This is how I have my system setup.&nbsp; That, in combination with the compressed dataportal, actually sped up access.&nbsp; The chattiest part of a database application is talking to the database.. now that happens all locally and just the BOs travel over the wire.&nbsp; Which is perfect, because this made things much better for my users at the other office.<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>triplea replied on Tuesday, September 09, 2008</h2><P>Thanks for the info. I just have 2 (small) questions:</P>
<P>"If you have Sql 2005 for example, you can set it up to accept only Local connections.&nbsp; If you also use IIS on the database server, this will be your Application server as well."<BR>What if for some reason running IIS on the db server is not an option? Would the structure still work? And can you set SQL 2005 to accept only Local connections on database level or is it only on server level?</P>
<P>"That, in combination with the compressed dataportal, actually sped up access."<BR>What do you mean by "compressed" dataportal?</P>
<P>Thanks a lot!</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Tuesday, September 09, 2008</h2>At that point you'd need some kind of firewall to restrict access.&nbsp; For example, set the firewall to only accept database connections from a specific IP address.&nbsp; There are other hardware configurations as well.. but no matter what, you want the quickest connection possible between the application server and the database server.&nbsp; <br><br>I think on the CslaContrib project there's a data portal which compresses the byte stream before sending and decompresses it on the application server.&nbsp; I'm using that DataPortal proxy.<br></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
