<html><header><title>Advice needed on SmartBool, SmartInt16, SmartInt32, SmartInt64, etc.</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Advice needed on SmartBool, SmartInt16, SmartInt32, SmartInt64, etc.</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/1649.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>david.wendelken posted on Tuesday, October 31, 2006</h2><P>&nbsp;</P>
<P>I've got working copies of SmartInt16, SmartInt32 and SmartInt64 ready to go, plus a subclass of SafeDataReader that recognizes them.&nbsp; (Have sent Rocky an email so I can add them to CSLA Contrib).</P>
<P>I'm working on SmartBool and ran into something I'm not sure about.</P>
<P>Basically, there are some Add and Subtract functions plus + and - operator overloading.</P>
<P>Should I just remove them?&nbsp; Or implement the functionality such that:</P>
<P>True + True = True<BR>True + False = False<BR>False + False = ??<BR>True + Empty = ??<BR>False + Empty = ??<BR>Empty + Empty = Empty</P>
<P>Which option makes more sense to you and why?</P>
<P>&nbsp;</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>david.wendelken replied on Tuesday, October 31, 2006</h2><P>Forgot to add tgthe following facts: </P>
<UL>
<LI>v2.1 of the framework.</LI></UL>
<P>&nbsp;</P>
<UL>
<LI>My subclass of SafeDataReader required a single modification of SafeDataReader.&nbsp; The _dataReader variable was changed from internal to protected so that it could be referenced as base._dataReader.&nbsp; Anyone know a better way?</LI></UL></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>William replied on Tuesday, October 31, 2006</h2><DIV>For me, I think&nbsp;I will&nbsp;implement the operator behaviors following boolean algebra and SQL rules for NULL (equivalent to Empty). Thus, in boolean algebra, + means OR, * means AND,</DIV>
<DIV>&nbsp;</DIV>
<DIV>True + True = True</DIV>
<DIV>True + False = True</DIV>
<DIV>False + True = True</DIV>
<DIV>False + False = False</DIV>
<DIV>True + Empty = Empty</DIV>
<DIV>
<DIV>Empty + True = Empty</DIV>
<DIV>
<DIV>
<DIV>False&nbsp;+ Empty = Empty</DIV>
<DIV>
<DIV>Empty +&nbsp;False = Empty</DIV>
<DIV>Empty + Empty = Empty</DIV>
<DIV>&nbsp;</DIV>
<DIV>Regards,</DIV>
<DIV>William</DIV>
<DIV>&nbsp;</DIV></DIV></DIV></DIV></DIV></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RRorije replied on Wednesday, November 01, 2006</h2>This was also my first idea.<br>But after thinking it over one time more, it creates a problem.<br><br>I do not know whether this is available in C#, but in VB you have the keyword "OrElse" which is a lazy version of&nbsp; "Or". Which means, when you have the following code:<br><br>if x orelse y then<br>&nbsp;...<br>end if<br><br>Then y will only be evaluated when x is False. When x is True then x or y is also True, so y does not have to be evaluated.<br><br>In the case you gave above, this is not possible anymore. The fifth member: True + Empty = Empty implies that both have to be evaluated before you know what the value is. I do not know whether this is a big deal, but it is something to think about.<br><br>Regards,<br>Ruben<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Bayu replied on Wednesday, November 01, 2006</h2><BLOCKQUOTE><div><img src="/Themes/alternate1/images/icon-quote.gif"> <strong>RRorije:</strong></div><div>This was also my first idea.<br><br>I do not know whether this is available in C#, but in VB you have the keyword "OrElse" which is a lazy version of&nbsp; "Or". Which means, when you have the following code:<br><br></div></BLOCKQUOTE><br><br>Actually it's called a short-circuiting operator. But that's just for the books. ;-)<br><br>Why can't you just use the 'Or' operator? This one does not 'short-circuit' (is this a valid verb?), but will always evaluate both operands.<br><br><br>On the topic of this thread: I think that operators are very C++-ish, and should only be used when you are writing software for math or logic reasoning purposes. In these contexts the operators are well-defined and intuitive in use. I think that having these operators on a datareader will only cause you to forget what the actual implementation was again and make you look it up in your code time and time again.<br><br><br>Bayu<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>William replied on Wednesday, November 01, 2006</h2><P>I am not familar with VB.NET but&nbsp;in C# I think this will do:</P>
<P><FONT face="Courier New" size=2>public static SmartBool operator+(SmartBool x, SmartBool y)<BR>{<BR>&nbsp; if (x.IsEmpty || y.IsEmpty)<BR>&nbsp;&nbsp;&nbsp; return SmartBool.Empty;<BR>&nbsp; else<BR>&nbsp;&nbsp;&nbsp; return new SmartBool(x.Value || y.Value);<BR>}</FONT></P>
<P>Regards,<BR>William<BR></P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Bayu replied on Wednesday, November 01, 2006</h2><BLOCKQUOTE><div><img src="/Themes/alternate1/images/icon-quote.gif"> <strong>William:</strong></div><div><p>I am not familar with VB.NET but&nbsp;in C# I think this will do:</p>
<p><font face="Courier New" size="2">public static SmartBool operator+(SmartBool x, SmartBool y)<br>{<br>&nbsp; if (x.IsEmpty || y.IsEmpty)<br>&nbsp;&nbsp;&nbsp; return SmartBool.Empty;<br>&nbsp; else<br>&nbsp;&nbsp;&nbsp; return new SmartBool(x.Value || y.Value);<br>}</font></p>
<p>Regards,<br>William<br></p></div></BLOCKQUOTE><br><br>In VB It would like this:<br><br>&nbsp;&nbsp;&nbsp; Public Shared Operator +(ByVal x As SmartBool, ByVal y As SmartBool) As SmartBool<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; If x.IsEmpty Or y.IsEmpty Then<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Return SmartBool.Empty<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Else<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Return New SmartBool(x.Value Or y.Value)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; End If<br>&nbsp;&nbsp;&nbsp; End Operator<br><br>So that's should work fine. <br><br>I just wonder if other developers will ever get an intuition as to what it means to 'add two SmartBools', especially in the context potential Empty values. I think everybody will be looking up the actual implementation after all.<br><br>Bayu<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Wednesday, November 01, 2006</h2>The VB would be OrElse, because in C# the &amp;&amp; and || always short circuit.<br><br>Makes sense; if the first parameter is true, the whole expression will be true, regardless of what the second expression would be.&nbsp; Likewise for and... if the first expression is false, the second expression doesn't matter, because the whole expression will be false.<br><br>It was done in the C days for peformance reasons.&nbsp; I'm glad they kept it though, because it doesn't force you to make two if blocks when the second might blow up (if there's a null reference in the second expression).<br><br>I have to agree though; adding and subtracting bools doesn't seem very intiutive to begin with, and I think people will be looking at the docs alot.&nbsp; If you need this for some reason, fine, but I wouldn't implement it unless you really need to.<br><br>Andy<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>david.wendelken replied on Wednesday, November 01, 2006</h2><P><BLOCKQUOTE><div><img src="/Themes/default/images/icon-quote.gif"> <strong>ajj3085:</strong></div><div><BR><BR>I have to agree though; adding and subtracting bools doesn't seem very intiutive to begin with, and I think people will be looking at the docs alot.&nbsp; If you need this for some reason, fine, but I wouldn't implement it unless you really need to.<BR><BR>Andy<BR></div></BLOCKQUOTE></P>
<P>It wasn't very intuitive to me either (but that hardly qualifies as defining the issue as non-intuitive).</P>
<P>The capability is optional in that the compiler isn't insisting upon it. ;)&nbsp; </P>
<P>I will leave it out until given a compelling reason to put it in.</P></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
