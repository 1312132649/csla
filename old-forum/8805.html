<html><header><title>Connection Manager And Multiple Data Readers</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Connection Manager And Multiple Data Readers</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/8805.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>MadGerbil posted on Friday, April 16, 2010</h2><p>I allow users to save collections of data that are in the process of being edited. I have to support this because they deal with thousands of records which may take hours to edit and if they are interupted then they need to be able to save the work in progress and move onto other tasks. The records are saved in an editing table until the entire batch is valid and ready to be imported into live tables. <br /><br />When the user opens the records I use a connection manager. The parent grabs a data reader and flips through each one creating child objects along the way. The problem occurs in the child object where a call to ValidationRules.CheckRules calls rules that open additional data readers on the same connection and the whole thing blows up.<br /><br />Of course, normally one wouldn&#39;t check business rules when pulling the objects from a database, but alas, I cannot avoid doing it.<br /><br />Should I:<br />1: Create a separate connection for the parent loading the objects? <br />2: Load the objects first and then flip though each child and check the rules?Recommendations?</p></div><div style='padding:0 15 3 15;background-color:lightgreen'><h2>RockfordLhotka replied on Friday, April 16, 2010</h2><p>There are actually three options</p>
<ol>
<li>Use MARS (multiple active result sets)</li>
<li>Create a separate connection for the parent loading the objects</li>
<li>Load the objects first and flip through each child</li>
</ol>
<p>I&#39;m told that MARS has a perf hit, but I honestly don&#39;t know how big a hit it is relative to opening a separate connection. Certainly using MARS is easier (as I understand it) because I think you just change your connection string to turn on the feature.</p>
<p>But for my part I would probably go with multiple connections. The ConnectionManager.GetManager() method accepts a label parameter - each label corresponds to a different connection - so the multiple connection concept is already supported.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>MadGerbil replied on Friday, April 16, 2010</h2><p>Thank you for the thorough response.&nbsp;&nbsp; </p>
<p>I like to run this stuff past the hound dogs at CSLA.NET because they often catch me missing something.</p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
