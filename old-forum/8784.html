<html><header><title>Dynamic switching of authentication mode</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Dynamic switching of authentication mode</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/8784.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>vjmasin posted on Thursday, April 08, 2010</h2><p>Is there any way I could dynamically switch the authentication mode between Windows and Custom? (My client is Silverlight). That way, those users who are in the domain could login that way while users not in the domain could, say, provide a username and password. I would let the user choose which way they want to login (like SqlServer does) but then would switch dynamically how I communicate with the server.</p>
<p>From what I see in CSLA you have to set the authentication mode in the web.config files. Is there a way I could change it dynamically in code on a per thread basis?</p>
<p>&nbsp;</p></div><div style='padding:0 15 3 15;background-color:lightgreen'><h2>RockfordLhotka replied on Thursday, April 08, 2010</h2><p>If your client is Silverlight and your authentication is through the Silverlight app, then you are actually always using custom authn. The reason is that Silverlight has no concept of Windows authentication, so CSLA uses a special custom principal to simulate the process.</p>
<p>But if your user authenticates with the web site (using Windows auth) before the SL app launches, then you really are using Windows authentication, but it is ASP.NET, not Silverlight or CSLA that is doing the authentication.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>vjmasin replied on Saturday, April 10, 2010</h2><p>I will be using OOB so I can&#39;t authenticate via asp.net.</p>
<p>When I switch to Windows authentication in csla I noticed on the server that it picked up my Windows credentials. Is that what you mean when you say that csla uses a special custom principal? Are you, under the covers sending my windows name?</p>
<p>Is there any way to use AD with a silverlight OOB? It sounds like you are saying no.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Saturday, April 10, 2010</h2><p>OOB may be different, I haven&#39;t checked that.</p>
<p>But SL has no concept of Windows auth. None.</p>
<p>However, SL (when running on Windows) does use Windows networking to talk to the server. Windows networking can be set up to automatically provide your credentials to the server. My understanding is that there are several different ways that can work - but I&#39;m not an IT Pro and really can&#39;t claim to understand all of them.</p>
<p>So if your server is identifying you as you, then Windows or your browser (or both) have provided the server with your credentials. Silverlight had nothing to do with it.</p>
<p>When you use the CSLA WindowsIdentity, what happens is that the CSLA WindowsIdentity object travels to the server, copies the Windows user information into its private fields and returns to the SL client. The SL client doesn&#39;t have the actual Windows identity object of course - that isn&#39;t serializable - but it has a CSLA object with a copy of the relevant data (username and groups/roles).</p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
