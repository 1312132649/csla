<html><header><title>3.6 CSLA --&gt; ObjectFactory setting Primary key / Identifier field</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>3.6 CSLA --&gt; ObjectFactory setting Primary key / Identifier field</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/5930.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>rfcdejong posted on Wednesday, December 03, 2008</h2><P>The primary key property doesn't want to be filled, maybe im doing it wrong?</P>
<P>Please help :)</P>
<P>My business object:</P><FONT size=2>
<P>[</FONT><FONT color=#2b91af size=2>Serializable</FONT><FONT size=2>()]<BR>[</FONT><FONT color=#2b91af size=2>CslaFactory</FONT><FONT size=2>(</FONT><FONT color=#a31515 size=2>"Factory Type=Data.Campagne.Factory.CampagneFactory, Data.Campagne;Item Type=Dias.Business.CampagneBO.Campagne, CampagneBO"</FONT><FONT size=2>)]<BR></FONT><FONT color=#0000ff size=2>public</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>class</FONT><FONT size=2> </FONT><FONT color=#2b91af size=2>Campagne</FONT><FONT size=2> : </FONT><FONT color=#2b91af size=2>U4ABusinessBase</FONT><FONT size=2>&lt;</FONT><FONT color=#2b91af size=2>Campagne</FONT><FONT size=2>&gt;<BR>{<BR></FONT><FONT color=#0000ff size=2>#region</FONT><FONT size=2> Business Methods</P>
<P></FONT><FONT color=#0000ff size=2>private</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>byte</FONT><FONT size=2>[] _timestamp = </FONT><FONT color=#0000ff size=2>new</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>byte</FONT><FONT size=2><img src="/emoticons/emotion-29.gif" alt="Music [8]" />;</P></FONT><FONT color=#0000ff size=2>
<P>#region</FONT><FONT size=2> Campagnenummer<BR></FONT><FONT color=#0000ff size=2>private</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>static</FONT><FONT size=2> </FONT><FONT color=#2b91af size=2>PropertyInfo</FONT><FONT size=2>&lt;</FONT><FONT color=#0000ff size=2>int</FONT><FONT size=2>&gt; _campagnenummerProperty = RegisterProperty(</FONT><FONT color=#0000ff size=2>typeof</FONT><FONT size=2>(</FONT><FONT color=#2b91af size=2>Campagne</FONT><FONT size=2>), </FONT><FONT color=#0000ff size=2>new</FONT><FONT size=2> </FONT><FONT color=#2b91af size=2>PropertyInfo</FONT><FONT size=2>&lt;</FONT><FONT color=#0000ff size=2>int</FONT><FONT size=2>&gt;(</FONT><FONT color=#a31515 size=2>"Campagnenummer"</FONT><FONT size=2>));<BR></FONT><FONT color=#0000ff size=2>private</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>int</FONT><FONT size=2> _campagnenummer = _campagnenummerProperty.DefaultValue;<BR></FONT><FONT size=2>[System.ComponentModel.</FONT><FONT color=#2b91af size=2>DataObjectField</FONT><FONT size=2>(</FONT><FONT color=#0000ff size=2>true</FONT><FONT size=2>, </FONT><FONT color=#0000ff size=2>true</FONT><FONT size=2>)]<BR></FONT><FONT color=#0000ff size=2>public</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>int</FONT><FONT size=2> Campagnenummer<BR>{<BR></FONT><FONT color=#0000ff size=2>&nbsp;&nbsp;&nbsp;get</FONT><FONT size=2> { </FONT><FONT color=#0000ff size=2>return</FONT><FONT size=2> GetProperty(_campagnenummerProperty, _campagnenummer); }<BR>&nbsp;&nbsp;&nbsp;</FONT><FONT color=#0000ff size=2>set</FONT><FONT size=2> { SetProperty(_campagnenummerProperty, </FONT><FONT color=#0000ff size=2>value</FONT><FONT size=2>); }<BR>}<BR></FONT><FONT color=#0000ff size=2>#endregion</FONT><FONT size=2> Campagnenummer</P></FONT>
<P>....</P>
<P>My factory:</P><FONT size=2>
<P></FONT><FONT color=#0000ff size=2>public</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>class</FONT><FONT size=2> </FONT><FONT color=#2b91af size=2>CampagneFactory</FONT><FONT size=2> : </FONT><FONT color=#2b91af size=2>ObjectFactory<BR></FONT><FONT size=2>{</P>
<P></FONT><FONT color=#0000ff size=2>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public</FONT><FONT size=2> Dias.Business.CampagneBO.</FONT><FONT color=#2b91af size=2>Campagne</FONT><FONT size=2> Fetch(</FONT><FONT color=#2b91af size=2>CriteriaBase</FONT><FONT size=2> criteria)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Dias.Business.CampagneBO.</FONT><FONT color=#2b91af size=2>Campagne</FONT><FONT size=2> result = (Dias.Business.CampagneBO.</FONT><FONT color=#2b91af size=2>Campagne</FONT><FONT size=2>)</FONT><FONT color=#2b91af size=2>Activator</FONT><FONT size=2>.CreateInstance(</FONT><FONT color=#0000ff size=2>typeof</FONT><FONT size=2>(Dias.Business.CampagneBO.</FONT><FONT color=#2b91af size=2>Campagne</FONT><FONT size=2>), </FONT><FONT color=#0000ff size=2>true</FONT><FONT size=2>);</P>
<P></FONT><FONT color=#0000ff size=2>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;using</FONT><FONT size=2> (</FONT><FONT color=#0000ff size=2>this</FONT><FONT size=2>.BypassPropertyChecks(result))<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;result.Campagnenummer = 1;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;result.Omschrijving = </FONT><FONT color=#a31515 size=2>"foo"</FONT><FONT size=2>;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<BR></FONT><FONT color=#0000ff size=2>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return</FONT><FONT size=2> result;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<BR>}</FONT></P>
<P>At the end: <FONT size=2><FONT size=3>result just has Campagnenummer 0</FONT></P></FONT></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>rfcdejong replied on Wednesday, December 03, 2008</h2><P>It seems i figured it out myself.. at least it seems to work :)</P><FONT size=2>
<P></FONT><FONT color=#0000ff size=2>set</FONT><FONT size=2> { SetProperty(_campagnenummerProperty, </FONT><FONT color=#0000ff size=2>ref</FONT><FONT size=2> _campagnenummer, </FONT><FONT color=#0000ff size=2>value</FONT><FONT size=2>); }</FONT></P>
<P><FONT size=2><FONT size=3>instead of</FONT><FONT size=2></P>
<P></FONT><FONT color=#0000ff size=2>set</FONT><FONT size=2> { SetProperty(_campagnenummerProperty,&nbsp;</FONT><FONT color=#0000ff size=2>value</FONT><FONT size=2>); }</P></FONT></FONT></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
