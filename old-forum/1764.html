<html><header><title>Reporting with Crystal Reports</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Reporting with Crystal Reports</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/1764.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>MvdHoning posted on Wednesday, November 15, 2006</h2>I am trying to make an report from an csla object with children.

I have an Quotation : Csla.ReadOnlyBase with QuotationLines : Csla.ReadOnlyListBase with QuotationLine : Csla.ReadOnlyBase

This i want to use to print a report.<br><br>I generated a typed dataset for it.<br><br>Next i use the following code to fill the object and turn in into an dataset<br><br>DocumentBuilder.Library.Quotation myquotation = DocumentBuilder.Library.Quotation.GetQuotation(1, 39907);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Csla.Data.ObjectAdapter myadd = new Csla.Data.ObjectAdapter();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; DataSet myds = new DataSet();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; myadd.Fill(myds, myquotation);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; myadd.Fill(myds, myquotation.QuotationLinesCollection);<br>&nbsp;&nbsp;  <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; BuildDocument.SetDataSource( myds );<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; crystalReportViewer1.ReportSource = BuildDocument;<br><br>No i get an empty report. However i can use:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; string test = myds.Tables[1].Rows[0]["ArticleId"].ToString();<br>This wil give me the correct articleid from the dataset generated from the QuotationLinesCollection<br><br>Also when i leave out the quotationlines fields from the report i do get an report with details from the quotation. So that works. Only when adding the fields for the quotationlines things go wrong.<br><br>QuotationLinesCollection is defined as followed:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; QuotationLines _quotationLines;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; public QuotationLines QuotationLinesCollection<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; get { return _quotationLines; }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //set { _quotationLines = value; }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>And is filled at:<br>&nbsp;&nbsp;&nbsp;&nbsp; private void FetchChildren(SafeDataReader dr)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; dr.NextResult();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; _quotationLines = QuotationLines.GetQuotationLines(dr);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>In the Quotation : Csla.ReadOnlyBase<br><br>Is there an better (and working) way to get this done?<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>MvdHoning replied on Wednesday, November 15, 2006</h2>I discovered what was wrong as i generated the xsd directly from the database it used quotationline instead of quotationlines so crystal could not get the correct table from the dataset.</div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
