<html><header><title>Portable Library Tools Support would be nice</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Portable Library Tools Support would be nice</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/10808.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>csmith1 posted on Tuesday, October 25, 2011</h2><p>I stumbled across Microsoft Portable Library Tools</p>
<p><a href="http://msdn.microsoft.com/en-us/library/gg597391.aspx">http://msdn.microsoft.com/en-us/library/gg597391.aspx</a></p>
<p><a href="http://visualstudiogallery.msdn.microsoft.com/b0e0b5e9-e138-410b-ad10-00cb3caf4981/">http://visualstudiogallery.msdn.microsoft.com/b0e0b5e9-e138-410b-ad10-00cb3caf4981/</a></p>
<p>It would be nice if CSLA models could support the Portable Library Tools. One complied library that support everything from .Net to WP7. I think I saw this was support by WinRT as well.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Tuesday, October 25, 2011</h2><p>Yes, this would be nice, and it is something we&#39;ve discussed.</p>
<p>The challenge, is that the result isn&#39;t 100% desirable.</p>
<p>All platform-specific code must be factored out of the portable assembly into platform-specific assemblies. Or all code in the framework must only use features available in the least advanced platform (lowest-common-denominator).</p>
<p>For example, right now the .NET Csla.dll uses some of the new .NET 4 threading features, but those features aren&#39;t on SL/WP. Even when they are in SL, they won&#39;t be in WP. Or, conversely, WinRT has some new threading features that aren&#39;t in .NET/SL/WP.</p>
<p>So, we can factor out all code that uses those threading features to create Csla.Net.dll, Csla.Sl.dll, etc. - and Csla.dll can use MEF or dynamic type loading to pull in the appropriate implementation per-platform.</p>
<p>But that means you&#39;d reference Csla.dll <em>and you&#39;d have to reference the platform-specific assembly</em> that contains the platform-specific providers. So you don&#39;t gain anything, because you are still stuck referencing a platform-specific assembly just like today.</p>
<p>Or, we can only use the features available in Windows Phone, because it is the lowest common denominator. This means .NET server code can&#39;t benefit from the faster/better threading features, and it means we wouldn&#39;t be able to support async/await for (probably) several years until WP gets that feature.</p>
<p>The async/await stuff is particularly problematic, because in CSLA 4 version 4.5 we&#39;ll expose async methods directly - at least for the data portal - but those features will only work on .NET 4.5, not on the phone, and I don&#39;t think SL5 has those keywords yet either (need to check on that).</p>
<p>In summary - I absolutely agree that having a portable library would be wonderful. I just don&#39;t see how to use the concept without giving up too much access to per-platform features.</p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
