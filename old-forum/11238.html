<html><header><title> Csla.Wpf.ViewModelBase and DesignTime_Create vs Blend Data (3.8.x)</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1> Csla.Wpf.ViewModelBase and DesignTime_Create vs Blend Data (3.8.x)</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/11238.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>jamie.clayton posted on Sunday, March 18, 2012</h2><p>G&#39;day,</p>
<p>I&#39;ve been slowly replacing all my WinForms UI with XAML UI and in the process implemented the ViewModel approach to data binding.&nbsp; One of the great disconnects to this whole process seems to be the way &quot;Design time data&quot; can be used.&nbsp; Previously I looked at DesignTime_Create dataportal methods to help achieve this, but I&#39;m not sure how that would be implemented in the ViewModel constructor in the UI.</p>
<p>The pattern for the ViewModel include the following (VB code example) approach.</p>
<pre style="font-family:Consolas;font-size:13px;color:black;background:none repeat scroll 0% 0% white;"><span style="color:blue;">Public Class MyVMBase</span>(<span style="color:blue;">Of</span>&nbsp;<span style="color:#2b91af;">T</span>)
<span style="color:blue;">Inherits</span>&nbsp;Csla.Wpf.<span style="color:#2b91af;">ViewModelBase</span>(<span style="color:blue;">Of</span>&nbsp;<span style="color:#2b91af;">T</span>)
<br /><span style="color:blue;">        Sub</span>&nbsp;<span style="color:blue;">New</span>()
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:blue;">MyBase</span>.New()
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:blue;">If</span>&nbsp;System.ComponentModel.<span style="color:#2b91af;">DesignerProperties</span>.GetIsInDesignMode(<span style="color:blue;">Me</span>)&nbsp;<span style="color:blue;">Then</span>
<span style="color:green;">                &#39; Is this where DesignTime_Create should go or <br />                &#39; does the ViewModelBase automatically pick up that dataportal code.</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color:blue;">Return</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:blue;">End</span>&nbsp;<span style="color:blue;">If</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;BeginRefresh(<span style="color:#a31515;">&quot;GetAllAsyncWithAllEntry&quot;</span>)
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color:blue;">End</span>&nbsp;<span style="color:blue;">Sub<br />End Class<br /></span></pre>
<p>Now when we get into the VS2010 IDE and wiring up the new ViewModel UI, it would be really nice to have a single sample record to make the design process more realistic. Hence my review of DesignTime_Create, the obvious design data population technique. However the CSLA source code doesn&#39;t seem to have ViewModel code tied to any of the DesignTime_Create code, which was unexpected. Is this an oversight?</p>
<p>Ok, so I then continue into Blend 4 to see how the &quot;data&quot; feature would tie together and again, I&#39;m a little confused about how my lovely CSLA business object and the data tools in that software should interact.&nbsp; The CSLA 4 videos and online books haven&#39;t covered these topics in any detail, so I&#39;m assuming that its a &quot;IDE limitation&quot; or I&#39;m barking up the wrong tree.&nbsp; Has anyone gone down this path?</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Sunday, March 18, 2012</h2><p>Having the business layer generate design time data is a mismatch of concepts. I did dabble with that idea early on, but it causes way more problems than it is worth - especially when it is really not the business layer&#39;s job.</p>
<p>It is the presentation layer&#39;s job to help designers build a good presentation. There are a couple options you can pursue.</p>
<p>One is to create dummy sample data types that are directly used by the XAML at design time. This is what Microsoft tends to do with their project templates for things like WP7 and Metro. I don&#39;t think they did so much of that for WPF/SL, but the same techniques apply.</p>
<p>Another is to create dummy sample data and return it from the viewmodel objects. So your viewmodel (probably in the constructor) recognizes that it is running in design time and returns some fake dummy objects instead of real objects. This can be a little harder, because your viewmodel is probably strongly typed.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>jamie.clayton replied on Thursday, March 22, 2012</h2><p><div style='padding-left: 50px;background-color:silver'><b>RockfordLhotka<br></b> I did dabble with that idea early on, but it causes way more problems than it is worth</div></p>
<p>I&#39;m going to assume this statements means that&nbsp; <span style="color:green;">DesignTime_Create</span> should really be marked [Obsolete(&quot;Don&#39;t use this method on pain of death&quot;)] in the CSLA codebase.&nbsp; I tend to agree that XAML design data for UI layout probably should stay in the UI side of things and I think I can fudge Blend 4 + into do some strongly typed random data based on some testing I&#39;ve done.</p>
<p><b>Mock or Test Data.<br /></b></p>
<p>&nbsp;</p>
<p>I know mock/test data can be another form of useful UI testing. From what I can recall, recommendations for are</p>
<ul>
<li>change the *.Config to point at another Dataportal implementation that &quot;imitates&quot; a database. Is that still the most practical solution? </li>
<li>setup a &quot;Test&quot; database with sample data and configure that in the *.config file as well.</li>
<li><div style='padding-left: 50px;background-color:silver'><b>RockfordLhotka<br></b>Another is to create dummy sample data and return it from the viewmodel objects</div></li>
<li>other ideas?</li>
</ul>
<p>I&#39;m thinking in terms of a external software development resource that needs to have some data to work with, but not &quot;real/sensitive&quot; data. What&#39;s the guide on this?&nbsp; I&#39;m trying to keep away from IOC containers as I&#39;m a noob in that area and I&#39;m not sure CSLA and existing IOC have a good relationship.</p>
<p>&nbsp;</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Thursday, March 22, 2012</h2><p>Design time create functionality was removed in 3.8 or 4 (I don&#39;t remember which). If you are using a version that still has the implementation, it was a valid technique at that time, but it was removed later.</p>
<p>The mock DAL technique is very valid. I discuss it in detail in the <em>Using CSLA 4: Data Access</em> book, including sample apps that include a mock provider. You don&#39;t need IoC to make this work, you can use a simple provider model that I show how to build. Or you can use IoC - that&#39;s really up to you.</p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
