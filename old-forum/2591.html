<html><header><title>Which CSLA class to choose?</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Which CSLA class to choose?</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/2591.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>RichardETVS posted on Tuesday, March 27, 2007</h2><P class=MsoNormal><SPAN>Hi<o:p></o:p></SPAN></P>
<P class=MsoNormal><SPAN><o:p>&nbsp;</o:p></SPAN></P>
<P class=MsoNormal><SPAN>I am a bit confused about the choice for some objects. <o:p></o:p></SPAN></P>
<P class=MsoNormal><SPAN><o:p>&nbsp;</o:p></SPAN></P>
<P class=MsoNormal><SPAN>Let’s say I have the <EM>Folder</EM> class, who has a field <EM>_DocumentsCollection</EM>. This field will contain instances of <EM>Document</EM> class. The <EM>Document</EM> class has a field <EM>_WritingUnitsCollection</EM>.<o:p></o:p></SPAN></P>
<P class=MsoNormal><SPAN>This field will contain instances of<SPAN>&nbsp; </SPAN><EM>WritingUnit</EM> class. The <EM>WritingUnit</EM> class is Composite Design pattern, with a leaf, <EM>BasicWritingUnit</EM>, and a collection of <EM>WritingUnits</EM>, <EM>WritingUnitComposite</EM>.<o:p></o:p></SPAN></P>
<P class=MsoNormal><SPAN><o:p>&nbsp;</o:p></SPAN></P>
<P class=MsoNormal><SPAN><o:p></o:p></SPAN>&nbsp;</P>
<P class=MsoNormal><SPAN>Here is the UML diagram.<o:p></o:p></SPAN></P>
<P class=MsoNormal><SPAN><o:p></o:p></SPAN></P>
<P class=MsoNormal><SPAN><A href="http://img249.imageshack.us/img249/8483/exempleyu1.jpg"></A><o:p></o:p></SPAN>&nbsp;</P>
<P class=MsoNormal><SPAN><a href="http://img249.imageshack.us/my.php?image=exempleyu1.jpg" target="_blank" title="http://img249.imageshack.us/my.php?image=exempleyu1.jpg"><img src="http://img249.imageshack.us/img249/8483/exempleyu1.th.jpg" border="0" /></a><o:p></o:p></SPAN></P>
<P class=MsoNormal><SPAN><o:p></o:p></SPAN>&nbsp;</P>
<P class=MsoNormal><SPAN><o:p>&nbsp;</o:p></SPAN></P>
<P class=MsoNormal><SPAN>I have to be able to retrieve and edit each object individually. If I retrieve a <EM>Folder</EM> instance, I have to treat all its documents and the writing units of each document. But I can have to retrieve a document directly, even to retrieve directly with a <EM>WritingUnit</EM>. If this Writing unit is a <EM>WritingUnitBasic</EM>, I’ll do basic operations with it, if it is a <EM>WritingUnitComposite</EM>, I’ll iterate through the collection of <EM>WritingUnits</EM>.<o:p></o:p></SPAN></P>
<P class=MsoNormal><SPAN><o:p></o:p></SPAN>&nbsp;</P>
<P class=MsoNormal><SPAN><o:p></o:p></SPAN>&nbsp;</P>
<P class=MsoNormal><SPAN><o:p>&nbsp;</o:p></SPAN></P>
<P class=MsoNormal><SPAN>My confusion is about the choice of CSLA objects. Root, child, BusinessListBase, EditableRootListBase, or another? Thank for yours lights :) !<o:p></o:p></SPAN></P>
<P class=MsoNormal><SPAN><o:p>&nbsp;</o:p></SPAN></P>
<P class=MsoNormal><SPAN>Cordially<o:p></o:p></SPAN></P>
<P class=MsoNormal><SPAN><o:p>&nbsp;</o:p></SPAN></P>
<P class=MsoNormal><SPAN>Richard <o:p></o:p></SPAN></P>
<P class=MsoNormal><SPAN><o:p>&nbsp;</o:p></SPAN></P>
<P class=MsoNormal><SPAN><o:p>&nbsp;</o:p></SPAN></P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Bayu replied on Wednesday, March 28, 2007</h2><BLOCKQUOTE><div><img src="/Themes/alternate1/images/icon-quote.gif"> <strong>RichardETVS:</strong></div><div><p class="MsoNormal"><span><o:p>&nbsp;</o:p></span></p>
<p class="MsoNormal"><span>I have to be able to retrieve and edit each object individually. If I retrieve a <em>Folder</em> instance, I have to treat all its documents and the writing units of each document. But I can have to retrieve a document directly, even to retrieve directly with a <em>WritingUnit</em>. If this Writing unit is a <em>WritingUnitBasic</em>, I’ll do basic operations with it, if it is a <em>WritingUnitComposite</em>, I’ll iterate through the collection of <em>WritingUnits</em>.<o:p></o:p></span></p>
<p class="MsoNormal"><span><o:p></o:p></span>&nbsp;</p></div></BLOCKQUOTE><br><br>You are facing two problems simultaneously:<br>- you are mixing up several use cases, at least so it seems:<br>&nbsp;&nbsp;&nbsp; - retrieving a Folder w Documents w WritingUnits is one use case:<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;  - Folder = EditableRoot<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;  - Documents = EditableChildList<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;  - WritingUnits = EditableChildList<br>&nbsp;&nbsp;&nbsp; - Retrieving a Document directly is another use case<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;  - Document = EditableRoot<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;  &nbsp;&nbsp;  - WritingUnits = EditableChildList<br>&nbsp;&nbsp;&nbsp; - and retrieving a WritingUnit directly is again another use case<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;  - WritingUnit = EditableRoot<br><br>If Folder and Document need to be editable in each of these use cases I think you may be in for a Switchable object (I am sure this comment will liven up this thread with people giving you warning about bad design, I hope to hear these folks as I am not sure myself ;-) ).<br><br>Otherwise, if only the WritingUnits are editable in every use case, you Folder and Document can be readonly objects and you could make WritingUnits a EditableRootList with WritingUnit be an EditableRoot. Then the Folder and Document are just different means to get a list of relevant WritingUnits, but you call save on the WritingUnits list.<br><br>So far about mixing up use cases. <br><br>The second thing you face is a flexible hierarchy (through the CompositeWritingUnit). Typically you would display these in treeviews, and as you probably already noted: treeviews don't support databinding (at least not yet in dotnet 2.0). So you will have bind items manually anyhow, so I would suggest to get all WritingUnits relevant to a Folder or Document in a list (EditableRootList/EditableChildList, depending on your use case design, see also my previous point). Each WritingUnit has properties that point to its parent and perhaps an index somehow so that you can figure out in the UI what the tree would have to look like. It is not too hard to catch all drag-drop events and reflect the structural changes in your BOs. I you don't need to support structural changes (drag-drops) than even better! ;-)<br><br>Just some food for thought.<br><br>Good luck!<br>Bayu<br><br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RichardETVS replied on Wednesday, March 28, 2007</h2><P class=MsoNormal><SPAN>Thanks for your reply, Bayu, it is helpful.<o:p></o:p></SPAN></P>
<P class=MsoNormal><SPAN><o:p>&nbsp;</o:p></SPAN></P>
<P class=MsoNormal><SPAN>I think it is clearer for me, now. As I use db4o, I’ll not go for the true “use case” driven design, which needs a relational database to be efficient. But I ‘have a mix between data-centric and use-case design.<o:p></o:p></SPAN></P>
<P class=MsoNormal><SPAN><o:p>&nbsp;</o:p></SPAN></P>
<P class=MsoNormal><SPAN>Actually, in my object model, the CSLA BO does not access to the data. The Data_PortalYXZ methods delegate the work to a data access layer who does the job with db4o. For that, this layer does not save the CSLA BO, but a persistence model, with simplified objects. <o:p></o:p></SPAN></P>
<P class=MsoNormal><SPAN><o:p>&nbsp;</o:p></SPAN></P>
<P class=MsoNormal><SPAN>So, in the persistence layer, I can have Folders, Documents and WritingUnits (who are not CSLA descendant classes), and in the Business Layer, I shall chose how to implement them (EditableRoot, EditableChild, etc.) according to the use case.<o:p></o:p></SPAN></P>
<P class=MsoNormal><SPAN><o:p>&nbsp;</o:p></SPAN></P>
<P class=MsoNormal><SPAN>Again, thanks :)<o:p></o:p></SPAN></P>
<P class=MsoNormal><SPAN><o:p>&nbsp;</o:p></SPAN></P>
<P class=MsoNormal><SPAN>Richard<o:p></o:p></SPAN></P></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
