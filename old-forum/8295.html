<html><header><title>Friendly name property is not available in the broken rule we are using CSLA 3.7</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Friendly name property is not available in the broken rule we are using CSLA 3.7</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/8295.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>arigney posted on Wednesday, January 06, 2010</h2><DIV align=left><FONT face=Arial color=#0000ff size=2><SPAN class=869161003-07012010></SPAN></FONT></DIV>
<DIV align=left><FONT face=Arial color=#0000ff size=2><SPAN class=869161003-07012010><FONT color=#0000ff size=2><FONT color=#0000ff size=2>
<P>Hi Guys,</P>
<P>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; We would like to do this but the friendly name is not available in a brokenrule object.</P>
<P>private</FONT></FONT><FONT color=#000000 size=2> </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>static</FONT></FONT><FONT color=#000000 size=2> </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>string</FONT></FONT><FONT color=#000000 size=2> GetValidationMessage(</FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>BaseElement</FONT></FONT><FONT size=2><FONT color=#000000> element)</FONT></P>
<P>{</P>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>if</FONT></FONT><FONT size=2> (element.IsValid)</P>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>return</FONT></FONT><FONT size=2> </FONT><FONT color=#a31515 size=2><FONT color=#a31515 size=2>"The element has no validation errors."</FONT></FONT><FONT size=2>;</P>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>else</P></FONT></FONT><FONT size=2>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>return</FONT></FONT><FONT size=2> </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>string</FONT></FONT><FONT size=2>.Format(</FONT><FONT color=#a31515 size=2><FONT color=#a31515 size=2>"The {0} element has the following validation errors: {1}{2}"</FONT></FONT><FONT size=2>,</P>
<P>((</FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>eElementType</FONT></FONT><FONT size=2>)element.Element_ElementTypePK).GetDescription(),</P>
<P></FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>Environment</FONT></FONT><FONT size=2>.NewLine, GetValidationErrors(element.BrokenRulesCollection));</P>
<P>}</P>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>private</FONT></FONT><FONT size=2> </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>static</FONT></FONT><FONT size=2> </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>string</FONT></FONT><FONT size=2> GetValidationErrors(</FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>BrokenRulesCollection</FONT></FONT><FONT size=2> brokenRules)</P>
<P>{</P>
<P></FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>StringBuilder</FONT></FONT><FONT size=2> builder = </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>new</FONT></FONT><FONT size=2> </FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>StringBuilder</FONT></FONT><FONT size=2>();</P>
<P>brokenRules.ToList().ForEach(x =&gt; builder.AppendFormat(</FONT><FONT color=#a31515 size=2><FONT color=#a31515 size=2>"\t{0}: {1}{2}"</FONT></FONT><FONT size=2>, x.Property, x.Description, </FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>Environment</FONT></FONT><FONT size=2>.NewLine));</P>
<P></FONT><FONT color=#008000 size=2><FONT color=#008000 size=2>// TODO next version of CSLA will probably give us access to the friendly name so we can do this </P></FONT></FONT><FONT size=2>
<P></FONT><FONT color=#008000 size=2><FONT color=#008000 size=2>//brokenRules.ToList().ForEach(x =&gt; builder.AppendFormat("\t{0}: {1}{2}", x.FriendlyName, x.Description, Environment.NewLine));</P></FONT></FONT><FONT size=2>
<P></FONT><FONT color=#008000 size=2><FONT color=#008000 size=2>// or this</P></FONT></FONT><FONT size=2>
<P></FONT><FONT color=#008000 size=2><FONT color=#008000 size=2>//brokenRules.ToList().ForEach(x =&gt; builder.AppendFormat("\t{0}: {1}{2}", x.GetType().GetProperty("FriendlyName"), x.Description, Environment.NewLine));</P></FONT></FONT><FONT size=2>
<P></FONT><FONT color=#008000 size=2><FONT color=#008000 size=2>// For now we have to use the property name as a friendly name.</P></FONT></FONT><FONT size=2>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>return</FONT></FONT><FONT size=2> builder.ToString();</P>
<P>}</P></FONT></SPAN></FONT></DIV><BR></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JonnyBee replied on Thursday, January 07, 2010</h2>Hi, <br><br>I do not agree that FriendlyName should be included in BrokenRules. You can get it from PropertyInfoManager - using the businessObject and PropertyName. <br><br>ex: <br><font face="Courier New" size="2"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; public string GetPropertyFriendlyName(object businessObject, string propertyName)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; var propertyInfo = Csla.Core.FieldManager.PropertyInfoManager.GetRegisteredProperties(businessObject.GetType()).Where(p =&gt; p.Name == propertyName).FirstOrDefault();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return propertyInfo != null ? propertyInfo.FriendlyName : propertyName;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</font><br><br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>arigney replied on Thursday, January 07, 2010</h2><P>Dear Johnny,</P>
<P>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Thanks very much mate? But we are using CSLA cslacs-3.7.0-090710 and in that version PropertyInfoManager is an internal class. Maybe its available in another version?</P>
<P>Regards,</P>
<P>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Alistair</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>rxelizondo replied on Thursday, January 07, 2010</h2><BLOCKQUOTE><div><img src="/Themes/default/images/icon-quote.gif"> <strong>arigney:</strong></div><div><br />But we are using CSLA cslacs-3.7.0-090710 and in that version PropertyInfoManager is an internal class. <br /></div></BLOCKQUOTE><br /><br />Yeah, that got me too. Not sure why PropertyInfoManager does not expose that functionality.<br /><br />Anyway, Jonny has answer this in other posts, the general idea is for you to create your own subclass of BussinesBase that implements the functionality  you need. Once you have that you will inherit from that class.<br /><br />You can use some code like the following:<br /><br />internal string GetPropertyFriendlyName(string propertyName)<br />{<br />    var propertyInfo = this.FieldManager.GetRegisteredProperties().Where(p => p.Name == propertyName).FirstOrDefault();<br />    return propertyInfo != null ? propertyInfo.FriendlyName : propertyName;<br />}</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>arigney replied on Thursday, January 07, 2010</h2><P>Awesome thanks Mate!</P>
<P>Kool so I guess I really need to ask what version of CSLA you recommend we use and is it much of a headache upgrading to that version. Maybe this has been "fixed" in a later release? Also with the version that you recommend, what other additions would you say that we need.</P>
<P>I guess we can pay you for any advice.We have been working on a big gov project here in Canberra Australia for the last year, we had to fight to get them to accept CSLA and the customer&nbsp;wouldn't let&nbsp;us use an ORM&nbsp;so we had to use our old dataset tools with CSLA as the ORM.</P>
<P>Best Regards,</P>
<P>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Alistair</P></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
