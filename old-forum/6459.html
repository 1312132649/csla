<html><header><title>OT: Dynamically configure a Windows Service thru a monitoring app</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>OT: Dynamically configure a Windows Service thru a monitoring app</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/6459.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>SonOfPirate posted on Wednesday, February 18, 2009</h2><P>I am developing a Windows Service application and would like to allow users to configure the behavior of the service during runtime.&nbsp; My initial thoughts are to create an MMC snap-in that exposes the properties that may be changed but I'd prefer to create an ASP.NET web app to allow remote management.</P>
<P>It seems that the easiest approach would be to have the settings defined in the app.config for the service application.&nbsp; I don't want to use a database for the settings, including SQL Server Express, because I don't want to add such a requirement for the solution.</P>
<P>My problems are based on creating two applications, the service and the monitor, that access the same configuration file.&nbsp; How can I accomplish this.&nbsp; Is there a better approach?</P>
<P>&nbsp;</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>tmg4340 replied on Thursday, February 19, 2009</h2><P><FONT face=Tahoma size=2>Well... you have a couple of issues to consider.&nbsp; </FONT><FONT face=Tahoma size=2>Configuration-file data is cached by the .NET runtime, and it does not watch for file changes and automatically refresh the data.&nbsp; So if your ASP.NET app does modify the service's configuration file (which you can certainly do - it's nothing more than an XML file to the website), you'd have to coordinate something with the Windows service to let it know to refresh the configuration info the next time it needs it.&nbsp; You could implement a file watcher relatively easily, but ultimately you&nbsp;may have some concurrency issues to deal with.&nbsp; That's probably going to be a relatively small concern, though.</FONT></P>
<P><FONT face=Tahoma size=2>A second issue is rights.&nbsp; Presumably, you're not going to&nbsp;house the Windows service from the same folder that your website resides in.&nbsp; That means your website ID (or the ID of the users, if you use Windows authentication and impersonation) have to have rights to the service directory.&nbsp; I'm assuming that this probably isn't a big issue for you (e.g. you've already figured this one out), but just in case...</FONT></P>
<P><FONT face=Tahoma size=2>If you're not keen on SQL Server Express, what about SQL Server CE?&nbsp; You don't have the overhead of SSE, and your database is a self-contained file.&nbsp; You don't have the caching issues of configuration files (but you still could have some concurrency questions.)&nbsp; You still have a rights issue, but like I said, I am assuming you've already worked that out.</FONT></P>
<P><FONT face=Tahoma size=2>HTH</FONT></P>
<P><FONT face=Tahoma size=2>- Scott</FONT></P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>SonOfPirate replied on Thursday, February 19, 2009</h2><P>Truthfully, no, we hadn't worked out the rights issues and you bring up a good point.&nbsp; We've been using IIS as a model for our design where they have the MMC snap-in, service application and metabase all in the same folder.&nbsp; The ASP.NET idea was based on IIS 7.0 providing the same but we didn't think much about rights issues.</P>
<P>I'm not very familiar with SQL CE.&nbsp; How is that different from SQL Express?</P>
<P>&nbsp;</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>tmg4340 replied on Thursday, February 19, 2009</h2><P><FONT face=Tahoma size=2>SQL CE was originally designed to support mobile devices.&nbsp; It's now also utilized in Microsoft's occasionally-connected-client scenarios.&nbsp; If you create a "local&nbsp;cache" in VS 2008, you're creating a SQL CE database.</FONT></P>
<P><FONT face=Tahoma size=2>It's a database that is completely self-contained within a file.&nbsp; There's no "server install" - just a single .NET DLL that you add as a reference to your project, and then your database file.&nbsp; It works&nbsp;pretty&nbsp;much like any other data provider, but it's very simplified - no stored procedures, no user views, just tables and indexes.&nbsp; But for simple configuration information, it should work well.&nbsp; Since it's just one file, you can pass it around however you need, and re-create it on the fly if you want to.</FONT></P>
<P><FONT face=Tahoma size=2>HTH</FONT></P>
<P><FONT face=Tahoma size=2>- Scott</FONT></P></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
