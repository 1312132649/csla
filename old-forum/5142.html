<html><header><title>SQL 2005 Timestamp comparing in C# using SafeDataReader</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>SQL 2005 Timestamp comparing in C# using SafeDataReader</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/5142.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>DazedAndConfused posted on Wednesday, July 23, 2008</h2><P>I have a time stamp on a SQL server table, which is set to a value of 0x00000000117A33F9. I am unable to extract this using the SafeDataReader, as it always gets returned as an empty byte array.</P>
<P>I have tried using GetBytes and GetValue and converting to a byte array, but can't seem to make the value change, based on the return result of the stored procedure.</P>
<P>How am I meant to do this in C#?</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>triplea replied on Wednesday, July 23, 2008</h2><P>Did you add the dimension of your byte array? If not then it will be empty. The correct syntax should be:<FONT size=2> </FONT></P><FONT color=#0000ff size=2>
<P>protected</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>byte</FONT><FONT size=2>[] _timestamp = </FONT><FONT color=#0000ff size=2>new</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>byte</FONT><FONT size=2>[ 8 ];&nbsp;&nbsp;&nbsp;//in your&nbsp;<FONT size=2>Business Methods </FONT>region</P></FONT>
<P>dr.GetBytes(<FONT color=#a31515 size=2>"TimeStamp"</FONT><FONT size=2>, 0, _timestamp, 0, 8);&nbsp;&nbsp;&nbsp;//in your Dataportal methods</P></FONT>
<P>Where _timestamp is your class member.</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>DazedAndConfused replied on Wednesday, July 23, 2008</h2>Hi, Thanks for the reply, yes tried that, the byte array never changes when I look at each byte, no matter what the SQL is returning, seems to be the same as a newly inititalised byte array every time.</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>triplea replied on Wednesday, July 23, 2008</h2><P>Sounds odd... Try running the PTracker example&nbsp;and inspect if that behaviour is also occuring. I would be surprised but give it a go nevertheless and let us know the result...</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>William replied on Thursday, July 24, 2008</h2>I use the following via SafeDataReader. It works.<br><br>byte[] timestamp = (byte[]) dr.GetValue("Timestamp");<br><br></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
