<html><header><title>CSLA 4.5 - Local Command Execution in Silverlight with asynchronous operation within DataPortal_Execute</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>CSLA 4.5 - Local Command Execution in Silverlight with asynchronous operation within DataPortal_Execute</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/11618.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>skagen00 posted on Wednesday, October 03, 2012</h2><p>We have a command BO in Silverlight that is configured to RunLocal, and the actions within this command are asynchronous.</p>
<p>We do this because we&#39;re calling out to a third party with a fair amount of network traffic and processing involved, and we wanted the client to shoulder the burden rather than have the web server shoulder the burden.</p>
<p>At present, it doesn&#39;t look like there is a place with the refactored dataportal to allow this to happen.&nbsp; The pre CSLA 4.5 code looks like this:</p>
<p>public void DataPortal_Execute(Csla.DataPortalClient.LocalProxy&lt;OurCommandObjectType&gt;.CompletedHandler handler)<br />{<br />&nbsp;&nbsp; // Call a third party asynchronously,<br />&nbsp;&nbsp; // invoking handler when completed.<br />}</p>
<p>Any suggestions?</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>skagen00 replied on Wednesday, October 03, 2012</h2><p>By the way, it was great seeing you give the keynote yesterday.&nbsp; You&#39;re always a great speaker to come and see.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Wednesday, October 03, 2012</h2><p>You should be able to mark the data portal method as async. For example:</p>
<p>[RunLocal]<br />private async Task DataPortal_Fetch()<br />{<br />&nbsp; // use await keyword in here<br />}</p>
<p>&nbsp;</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Wednesday, October 03, 2012</h2><p>You will need to learn the task parallel library patterns used to wrap &quot;old style&quot; async code, because most of the existing SL APIs use the older callback handler model.</p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
