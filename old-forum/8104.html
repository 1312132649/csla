<html><header><title>PropertyInfo{T} is killing the IPropertyInfo thunder.</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>PropertyInfo{T} is killing the IPropertyInfo thunder.</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/8104.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>rxelizondo posted on Sunday, December 06, 2009</h2>It appears that PropertyInfo{T} is used very liberally through the CSLA. Most notorious is that the implementation of all the RegisterProperty() methods return PropertyInfo{P} when they really should be returning the IPropertyInfo interface.... at least I think that is what supposed to be returned.<br /><br /><br />For this, I will quote the book (page 227 right at the top):<br />----------------------------<br />The PropertyInfo class is declared like this:<br /><br />public class PropertyInfo{T} : Core.IPropertyInfo, IComparable<br /><br />Notice that it implements an IPropertyInfo interface from the Csla.Core namespace. Technically, CSLA .NET accepts IPropertyInfo parameters everywhere, and this PropertyInfo class is just<br />one possible implementation. This is an intentional extensibility point for CSLA .NET, allowing you to create other IPropertyInfo implementations (or subclasses of PropertyInfo) that store other metadata<br />about each property.<br /><br />One scenario where you might do this is if you want to store data access metadata, such as the database, table, and column name where the property value is stored.<br />----------------------------<br /><br />To me, this sounds that you are not obligated to inherit from PropertyInfo but you are obligated to inherit from IPropertyInfo.<br /><br />There may be more to this issue, but before I go there, I would be interested to know if I am complete missing the point here.<br /><br />Thanks.</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Sunday, December 06, 2009</h2><P>My primary focus in the implementation was performance, which requires the use of generics to avoid boxing/unboxing through the process of storing field values. It is tricky.</P>
<P>As a secondary concern I wanted to make it possible to create your own subclass of PropertyInfo&lt;T&gt; to add extra metadata.</P>
<P>As a tertiary concern I wanted to let you create your own IPropertyInfo. I'm not entirely sure what the scenario is for this, but there's limited support for the concept if you really need it. I think it might work, but it isn't part of my test model, and no one has really pursued this to my knowledge.</P>
<P>Arguably this is a case of building something nobody asked for&nbsp;- which is never good. On the other hand there's the basic need for polymorphic behaviors that you can't get with a generic type, so the interface is necessary at some level regardless.</P></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
