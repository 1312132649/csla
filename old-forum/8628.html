<html><header><title>Implement a Property on an Editable Root List Object?</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Implement a Property on an Editable Root List Object?</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/8628.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>FrazerS posted on Monday, March 08, 2010</h2><p>I want to implement a property on an ERL - the problem I am having is that in the DataPortal_Update method, the property value is the default value and not the value set when I created the ERL.&nbsp; Is it possible to marshal a property value across the data portal line, and if so, how?</p>
<p>&nbsp;</p>
<p>Frazer</p>
<p>&nbsp;</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>FrazerS replied on Monday, March 08, 2010</h2><p>Got it&nbsp;.</p>
<p><br />instead of referring to the property as MyProperty in DataPortal_Update, I simply changed it to this.MyProperty, and it worked.</p>
<p>Frazer</p>
<p>&nbsp;</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>FrazerS replied on Monday, March 08, 2010</h2><p>I was mistaken.&nbsp; Original problem still exists.</p>
<p>&nbsp;</p>
<p>Frazer</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Monday, March 08, 2010</h2><p>If you are in .NET it should just work. Any fields defined in an object are, by default, serialized as part of the object state.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>tmg4340 replied on Monday, March 08, 2010</h2><p>IIRC, the CSLA collection classes aren&#39;t designed to have custom properties - managed or otherwise - on them.&nbsp; As such, the DP isn&#39;t designed to handle them for you.</p>
<p>As Rocky mentioned, you can implement your own serialization code on the collections if you&#39;re in SL using the &quot;state&quot; methods.&nbsp; In non-SL situations, I&#39;m not sure what your options are.&nbsp; The only serialization hook I know of is the OnDeserialized event, which doesn&#39;t give you access to the serialization stream used to hydrate the object.</p>
<p>- Scott</p></div><div style='padding:0 15 3 15;background-color:lightgreen'><h2>RockfordLhotka replied on Monday, March 08, 2010</h2><p>In .NET only code, the BinaryFormatter and NDCS should just serialize any fields declared in the type. CSLA doesn&#39;t do any serialization in the .NET world, it lets .NET do that - and the .NET serializers should just take care of it.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>FrazerS replied on Monday, March 08, 2010</h2><p>Thanks, I have this working now.</p>
<p>Rocky - thanks for your help on this and other issues.&nbsp; I think that if the Forum were not as responsive, &nbsp;I would not have the confidence to choose CSLA for my applications.&nbsp; Your apparently unflagging patience for questions (which must draw a sigh of exasperation from time to time)&nbsp;really make the difference.</p>
<p>thanks,</p>
<p>Frazer</p></div><div style='padding:0 15 3 15;background-color:lightgreen'><h2>RockfordLhotka replied on Monday, March 08, 2010</h2><p>You mean a subclass of BusinessListBase? And this is Silverlight?</p>
<p>You need to override OnGetState and OnSetState to manually serialize/deserialize private field values through the MobileFormatter. </p>
<p>If the value is a primitive type (int, string, etc) this is easy. If the value is a reference to another object it is harder, and you need to override different methods.</p>
<p>Here&#39;s an eample for a primitive value:</p>
<p>&nbsp;&nbsp;&nbsp; protected override void OnGetState(SerializationInfo info, StateMode mode)<br />&nbsp;&nbsp;&nbsp; {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; base.OnGetState(info, mode);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; info.AddValue(&quot;Csla.Xaml.SingleCriteria._value&quot;, _value);<br />&nbsp;&nbsp;&nbsp; }</p>
<p>&nbsp;&nbsp;&nbsp; protected override void OnSetState(SerializationInfo info, StateMode mode)<br />&nbsp;&nbsp;&nbsp; {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; base.OnSetState(info, mode);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; _value = info.GetValue&lt;C&gt;(&quot;Csla.Xaml.SingleCriteria._value&quot;);<br />&nbsp;&nbsp;&nbsp; }<br />&nbsp;</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>FrazerS replied on Monday, March 08, 2010</h2><p>No, not SilverLight.&nbsp; Does this impact your answer.&nbsp; As I stated in my previous post, it appears that I am getting the value on the dataportal side now, simply by changing how I reference the property (this.MyProperty versus simply MyProperty)&nbsp; however, I am now concerned that I am oversimplifying this and missing something fundamental.</p>
<p>&nbsp;</p>
<p>Frazer</p>
<p>&nbsp;</p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
