<html><header><title>&quot;Index was outside the bounds of the array.&quot; error with CSLA 3.5 Beta 1</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>&quot;Index was outside the bounds of the array.&quot; error with CSLA 3.5 Beta 1</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/4506.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>triplea posted on Sunday, March 16, 2008</h2><P>I finally got to play with the latest release (cslacs-3.5.0-080222.zip is the file I've got). It looks great but I stumbled upon my first problem.<BR>I have an editable root object (Customer) which has&nbsp;contains an&nbsp;editable child object (Address). Using a Linq DAL, I fetch the Customer fields fine but when I get to the fetch part of my Address object, the first line that tries to populate a property like this:</P><FONT size=2>
<P>LoadProperty&lt;</FONT><FONT color=#0000ff size=2>string</FONT><FONT size=2>&gt;(HouseNumberProperty, address.HouseNumber);</FONT></P>
<P><FONT size=2><FONT size=3>fails with the following error: "Index was outside the bounds of the array." which gets caught in <FONT color=#0000ff size=2>protected</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>void</FONT><FONT size=2> LoadProperty&lt;P&gt;(PropertyInfo&lt;P&gt; propertyInfo, P newValue)</FONT> and because in PropertyInfo.Index the index is -1. Now I checked another (very long) thread where a similar issue was reported but it seemed it happened for more complex scenarios. Mine is a straightforward one (I think).<BR>Apologies but I am a bit new to .Net 3.5 in general so might be doing something obviously silly here...</FONT></P></FONT></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>skagen00 replied on Sunday, March 16, 2008</h2><P>What does your property declaration look like? </P>
<P>And is your class just a concrete class with no registered properties declared in any parent classes? </P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Monday, March 17, 2008</h2>This problem is most likely caused by a bug in your RegisterProperty() call for this property. The most common issue is not getting the containing type parameter set correctly, so the property is registered with the wrong business object type.</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>skagen00 replied on Monday, March 17, 2008</h2>One of the common errors the team here makes is to leave off the "static" part of the declaration for the property, so you might look at that too. </div><div style='padding:0 15 3 15;background-color:powderblue'><h2>triplea replied on Monday, March 17, 2008</h2><P>Thanks to both. I was indeed using the wrong containing type parameter so I changed it and it works fine. I now begin to understand how this&nbsp;can&nbsp;be&nbsp;an issue with inheritance... I havent tried it yet but was there any final solution from the previous very big thread? I know its not best practice but in a lot of occasions I have something like:</P>
<P>Customer : BusinessBase&lt;Customer&gt;<BR>GoodCustomer : Customer<BR>BadCustomer : Customer</P>
<P>And use Customer to bind on a view that allows editing customers but doesnt (and shouldnt) care about the quality of the customer. That would mean that all the properties are defined in Customer but usually the validation/authorization rules are set in the conrete extended classes. Should I still register the properties in Customer with type Customer or is there a catch?</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Monday, March 17, 2008</h2>






 





<div class=Section1>

<p class=MsoNormal><span>You can register your properties in a base class &#8211; against
the base class type. That works fine.<o:p></o:p></span></p>

<p class=MsoNormal><span><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span>The issue with inheritance is that .NET won&#8217;t necessarily
initialize the static fields in your base class early enough in the process, so
you need to put code in your constructor on OnDeserialized() method to set a
static field (such as an integer field named _dummy or something). That forces
static fields to initialize in that class and all is well.<o:p></o:p></span></p>

<p class=MsoNormal><span><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span>Rocky<o:p></o:p></span></p>

</div>



</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>triplea replied on Monday, March 17, 2008</h2>Thanks, I will convert some such existing cases and see how that goes.</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Monday, March 17, 2008</h2>That would be very helpful - please let me know how it goes - thanks!</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>van replied on Tuesday, September 30, 2008</h2><P>I have a problem with&nbsp;<FONT color=#008000 size=2><FONT color=#008000 size=2>LoadProperty</FONT></FONT> in base class (CSLA 3.5 and 3.5.1 version). I have&nbsp;something like&nbsp;this:</P><FONT color=#0000ff size=2><FONT color=#0000ff size=2>
<P>public</FONT></FONT><FONT size=2> </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>abstract</FONT></FONT><FONT size=2> </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>class</FONT></FONT><FONT size=2> </FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>BaseObject</FONT></FONT><FONT size=2>&lt;T&gt; : </FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>BusinessBase</FONT></FONT><FONT size=2>&lt;T&gt;</FONT></P>
<P><FONT size=2><FONT color=#0000ff size=2><FONT color=#0000ff size=2>public</FONT></FONT><FONT size=2> </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>abstract</FONT></FONT><FONT size=2> </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>class</FONT></FONT><FONT size=2> </FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>BaseNameDescriptionBusinessObject</FONT></FONT><FONT size=2>&lt;T&gt; : </FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>BaseObject</FONT></FONT><FONT size=2>&lt;T&gt; </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>where</FONT></FONT><FONT size=2> T : </FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>BaseNameDescriptionBusinessObject</FONT></FONT><FONT size=2>&lt;T&gt;</FONT></FONT></P><FONT size=2><FONT size=2><FONT color=#0000ff size=2><FONT color=#0000ff size=2>
<P>public</FONT></FONT><FONT size=2> </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>class</FONT></FONT><FONT size=2> </FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>Funkcija</FONT></FONT><FONT size=2> : </FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>BaseNameDescriptionBusinessObject</FONT></FONT><FONT size=2>&lt;</FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>Funkcija</FONT></FONT><FONT size=2>&gt;</FONT></P>
<P><FONT size=2>and exception&nbsp;'Property load or set failed for property Naziv (One or more properties are not registered for this type)' appeare in <FONT color=#2b91af>BaseNameDescriptionBusinessObject</FONT><FONT size=2>&lt;T&gt; class when use <FONT color=#008000 size=2><FONT color=#008000 size=2>LoadProperty&lt;string&gt;(NazivProperty, reader.GetString("Naziv")); <FONT color=#000000>I try with dummy in constructor but it didn't help.</FONT></P></FONT></FONT></FONT></FONT></FONT></FONT></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Tuesday, September 30, 2008</h2><DIV>Do you also set the static/Shared _dummy field in an override of OnDeserialized()?</DIV>
<DIV><BR><BR>&nbsp;</DIV>
<BLOCKQUOTE>----- Original Message -----<BR>From: van <BR>To: "rocky@lhotka.net" <BR>Subject: Re: [CSLA .NET] "Index was outside the bounds of the array." error with CSLA 3.5 Beta 1<BR>Date: Tue, 30 Sep 2008 07:07:31 -0500<BR><BR>
<P>I have a problem with&nbsp;<FONT color=#008000 size=2><FONT color=#008000 size=2>LoadProperty</FONT></FONT> in base class. I have like something this:</P><FONT color=#0000ff size=2><FONT color=#0000ff size=2>
<P>public</FONT></FONT><FONT size=2> </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>abstract</FONT></FONT><FONT size=2> </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>class</FONT></FONT><FONT size=2> </FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>BaseObject</FONT></FONT><FONT size=2>&lt;T&gt; : </FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>BusinessBase</FONT></FONT><FONT size=2>&lt;T&gt;</FONT></P>
<P><FONT size=2><FONT color=#0000ff size=2><FONT color=#0000ff size=2>public</FONT></FONT><FONT size=2> </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>abstract</FONT></FONT><FONT size=2> </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>class</FONT></FONT><FONT size=2> </FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>BaseNameDescriptionBusinessObject</FONT></FONT><FONT size=2>&lt;T&gt; : </FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>BaseObject</FONT></FONT><FONT size=2>&lt;T&gt; </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>where</FONT></FONT><FONT size=2> T : </FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>BaseNameDescriptionBusinessObject</FONT></FONT><FONT size=2>&lt;T&gt;</FONT></FONT></P><FONT size=2><FONT size=2><FONT color=#0000ff size=2><FONT color=#0000ff size=2>
<P>public</FONT></FONT><FONT size=2> </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>class</FONT></FONT><FONT size=2> </FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>Funkcija</FONT></FONT><FONT size=2> : </FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>BaseNameDescriptionBusinessObject</FONT></FONT><FONT size=2>&lt;</FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>Funkcija</FONT></FONT><FONT size=2>&gt;</FONT></P>
<P><FONT size=2>and exception&nbsp;'Property load or set failed for property Naziv (One or more properties are not registered for this type)' appeare in <FONT color=#2b91af>BaseNameDescriptionBusinessObject</FONT><FONT size=2>&lt;T&gt; class when use <FONT color=#008000 size=2><FONT color=#008000 size=2>LoadProperty&lt;string&gt;(NazivProperty, reader.GetString("Naziv")); <FONT color=#000000>I try with dummy in constructor but it didn't help.</FONT></P></FONT></FONT></FONT></FONT></FONT></FONT><BR><BR><BR></BLOCKQUOTE><BR></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>van replied on Wednesday, October 01, 2008</h2><P>I try with an override of OnDeserialized() now, but it doesn't solve the problem.</P>
<P>Maybe I have a some bug in my classes and there is a code:</P>
<P>// <FONT size=2><FONT color=#2b91af>BaseObject</FONT>&lt;T&gt; class</FONT></P><FONT size=2>
<P>[</FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>Serializable</FONT></FONT><FONT size=2>]</P>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>public</FONT></FONT><FONT size=2> </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>abstract</FONT></FONT><FONT size=2> </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>class</FONT></FONT><FONT size=2> </FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>BaseObject</FONT></FONT><FONT size=2>&lt;T&gt; : </FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>BusinessBase</FONT></FONT><FONT size=2>&lt;T&gt;, </FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>IBusinessObjectId</FONT></FONT><FONT size=2> </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>where</FONT></FONT><FONT size=2> T : </FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>BaseObject</FONT></FONT><FONT size=2>&lt;T&gt;</P>
<P>{</P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>
<P>#region</FONT></FONT><FONT size=2> Constructor</P>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>protected</FONT></FONT><FONT size=2> BaseObject()</P>
<P>{</P>
<P>LoadProperty&lt;</FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>Guid</FONT></FONT><FONT size=2>&gt;(UidProperty, </FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>Guid</FONT></FONT><FONT size=2>.Empty);</P>
<P>}</P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>
<P>#endregion</P>
<P>#region</FONT></FONT><FONT size=2> FactoryMethods</P>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>public</FONT></FONT><FONT size=2> </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>static</FONT></FONT><FONT size=2> T CreateObject()</P>
<P>{</P>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>return</FONT></FONT><FONT size=2> </FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>DataPortal</FONT></FONT><FONT size=2>.Create&lt;</FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>BaseObject</FONT></FONT><FONT size=2>&lt;T&gt;&gt;() </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>as</FONT></FONT><FONT size=2> T;</P>
<P>}</P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>
<P>#endregion</P>
<P>#region</FONT></FONT><FONT size=2> DataAccess</P>
<P>[</FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>RunLocal</FONT></FONT><FONT size=2>()]</P>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>protected</FONT></FONT><FONT size=2> </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>override</FONT></FONT><FONT size=2> </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>void</FONT></FONT><FONT size=2> DataPortal_Create()</P>
<P>{</P>
<P>Uid = </FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>Guid</FONT></FONT><FONT size=2>.NewGuid();</P>
<P>}</P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>
<P>#endregion</P>
<P>#region</FONT></FONT><FONT size=2> Properties</P>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>private</FONT></FONT><FONT size=2> </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>static</FONT></FONT><FONT size=2> </FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>PropertyInfo</FONT></FONT><FONT size=2>&lt;</FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>Guid</FONT></FONT><FONT size=2>&gt; UidProperty = RegisterProperty&lt;</FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>Guid</FONT></FONT><FONT size=2>&gt;(</FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>typeof</FONT></FONT><FONT size=2>(T), </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>new</FONT></FONT><FONT size=2> </FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>PropertyInfo</FONT></FONT><FONT size=2>&lt;</FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>Guid</FONT></FONT><FONT size=2>&gt;(</FONT><FONT color=#a31515 size=2><FONT color=#a31515 size=2>"Uid"</FONT></FONT><FONT size=2>, </FONT><FONT color=#a31515 size=2><FONT color=#a31515 size=2>"Uid"</FONT></FONT><FONT size=2>));</P>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>public</FONT></FONT><FONT size=2> </FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>Guid</FONT></FONT><FONT size=2> Uid</P>
<P>{</P>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>get</FONT></FONT><FONT size=2> { </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>return</FONT></FONT><FONT size=2> GetProperty&lt;</FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>Guid</FONT></FONT><FONT size=2>&gt;(UidProperty); }</P>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>set</FONT></FONT><FONT size=2> { SetProperty&lt;</FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>Guid</FONT></FONT><FONT size=2>&gt;(UidProperty, </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>value</FONT></FONT><FONT size=2>); }</P>
<P>}</P>
<P></P></FONT><FONT size=2>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>public</FONT></FONT><FONT size=2> </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>bool</FONT></FONT><FONT size=2> IsNull</P>
<P>{</P>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>get</P></FONT></FONT><FONT size=2>
<P>{</P>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>return</FONT></FONT><FONT size=2> Uid.Equals(</FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>Guid</FONT></FONT><FONT size=2>.Empty);</P>
<P>}</P>
<P>}</P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>
<P>#endregion</P>
<P>#region</FONT></FONT><FONT size=2> Methods</P>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>protected</FONT></FONT><FONT size=2> </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>void</FONT></FONT><FONT size=2> DataFetch(</FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>NullableDataReader</FONT></FONT><FONT size=2> reader)</P>
<P>{</P>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>try</P></FONT></FONT><FONT size=2>
<P>{</P>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>if</FONT></FONT><FONT size=2> (reader.Read())</P>
<P>{</P>
<P>LoadData(reader);</P>
<P>}</P>
<P>}</P>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>catch</FONT></FONT><FONT size=2> (</FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>Exception</FONT></FONT><FONT size=2> ex)</P>
<P>{</P>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>throw</FONT></FONT><FONT size=2>;</P>
<P>}</P>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>finally</P></FONT></FONT><FONT size=2>
<P>{</P>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>if</FONT></FONT><FONT size=2> (!reader.IsClosed)</P>
<P>{</P>
<P>reader.Close();</P>
<P>}</P>
<P>}</P>
<P>}</P>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>protected</FONT></FONT><FONT size=2> </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>virtual</FONT></FONT><FONT size=2> </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>void</FONT></FONT><FONT size=2> LoadData(</FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>NullableDataReader</FONT></FONT><FONT size=2> reader)</P>
<P>{</P>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>try</P></FONT></FONT><FONT size=2>
<P>{</P>
<P>LoadProperty&lt;</FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>Guid</FONT></FONT><FONT size=2>&gt;(UidProperty, reader.GetGuid(</FONT><FONT color=#a31515 size=2><FONT color=#a31515 size=2>"Uid"</FONT></FONT><FONT size=2>));</P>
<P>}</P>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>catch</FONT></FONT><FONT size=2> (</FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>Exception</FONT></FONT><FONT size=2> ex)</P>
<P>{</P>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>throw</FONT></FONT><FONT size=2>;</P>
<P>}</P>
<P>}</P>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>protected</FONT></FONT><FONT size=2> </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>virtual</FONT></FONT><FONT size=2> </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>void</FONT></FONT><FONT size=2> LogicalDelete(</FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>string</FONT></FONT><FONT size=2> tableName)</P>
<P>{</P>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>try</P></FONT></FONT><FONT size=2>
<P>{</P>
<P></FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>Database</FONT></FONT><FONT size=2> db = </FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>DatabaseFactory</FONT></FONT><FONT size=2>.CreateDatabase();</P>
<P></FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>DbCommand</FONT></FONT><FONT size=2> cmd = db.GetStoredProcCommand(</FONT><FONT color=#a31515 size=2><FONT color=#a31515 size=2>"usp_LogicalDelete"</FONT></FONT><FONT size=2>);</P>
<P>db.AddInParameter(cmd, </FONT><FONT color=#a31515 size=2><FONT color=#a31515 size=2>"@tableName"</FONT></FONT><FONT size=2>, </FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>DbType</FONT></FONT><FONT size=2>.String, tableName);</P>
<P>db.AddInParameter(cmd, </FONT><FONT color=#a31515 size=2><FONT color=#a31515 size=2>"@uid"</FONT></FONT><FONT size=2>, </FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>DbType</FONT></FONT><FONT size=2>.Guid, Uid);</P>
<P>db.ExecuteNonQuery(cmd);</P>
<P>}</P>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>catch</FONT></FONT><FONT size=2> (</FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>Exception</FONT></FONT><FONT size=2> ex)</P>
<P>{</P>
<P></FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>LogHelper</FONT></FONT><FONT size=2>.LogException(ex);</P>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>throw</FONT></FONT><FONT size=2>;</P>
<P>}</P>
<P>}</P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>
<P>#endregion</P></FONT></FONT><FONT size=2>
<P>}</P>
<P>&nbsp;</P>
<P>// <FONT color=#2b91af>BaseNameDescriptionBusinessObject</FONT><FONT size=2>&lt;T&gt;</FONT></P>
<P><FONT size=2>[</FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>Serializable</FONT></FONT><FONT size=2>]</P>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>public</FONT></FONT><FONT size=2> </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>abstract</FONT></FONT><FONT size=2> </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>class</FONT></FONT><FONT size=2> </FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>BaseNameDescriptionBusinessObject</FONT></FONT><FONT size=2>&lt;T&gt; : </FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>BaseObject</FONT></FONT><FONT size=2>&lt;T&gt; </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>where</FONT></FONT><FONT size=2> T : </FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>BaseNameDescriptionBusinessObject</FONT></FONT><FONT size=2>&lt;T&gt;</P>
<P>{</P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>
<P>#region</FONT></FONT><FONT size=2> members</P>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>private</FONT></FONT><FONT size=2> </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>static</FONT></FONT><FONT size=2> </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>int</FONT></FONT><FONT size=2> _dummy;</P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>
<P>#endregion</P>
<P>#region</FONT></FONT><FONT size=2> Constuctor</P>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>protected</FONT></FONT><FONT size=2> BaseNameDescriptionBusinessObject()</P>
<P>{</P>
<P>_dummy = 10;</P>
<P></P>
<P>}</P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>
<P>#endregion</P>
<P>#region</FONT></FONT><FONT size=2> ValidationRules</P>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>protected</FONT></FONT><FONT size=2> </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>override</FONT></FONT><FONT size=2> </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>void</FONT></FONT><FONT size=2> AddBusinessRules()</P>
<P>{</P>
<P>AddCustomRules();</P>
<P>}</P>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>private</FONT></FONT><FONT size=2> </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>void</FONT></FONT><FONT size=2> AddCustomRules()</P>
<P>{</P>
<P>ValidationRules.AddRule&lt;T&gt;(NazivPostoji, </FONT><FONT color=#a31515 size=2><FONT color=#a31515 size=2>"Naziv"</FONT></FONT><FONT size=2>);</P>
<P>}</P>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>private</FONT></FONT><FONT size=2> </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>static</FONT></FONT><FONT size=2> </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>bool</FONT></FONT><FONT size=2> NazivPostoji&lt;T&gt;(T target, Csla.Validation.</FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>RuleArgs</FONT></FONT><FONT size=2> e) </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>where</FONT></FONT><FONT size=2> T : </FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>BaseNameDescriptionBusinessObject</FONT></FONT><FONT size=2>&lt;T&gt;</P>
<P>{</P>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>if</FONT></FONT><FONT size=2> (</FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>string</FONT></FONT><FONT size=2>.IsNullOrEmpty(target.Naziv))</P>
<P>{</P>
<P>e.Description = </FONT><FONT color=#a31515 size=2><FONT color=#a31515 size=2>"Unesite naziv."</FONT></FONT><FONT size=2>;</P>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>return</FONT></FONT><FONT size=2> </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>false</FONT></FONT><FONT size=2>;</P>
<P>}</P>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>return</FONT></FONT><FONT size=2> </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>true</FONT></FONT><FONT size=2>;</P>
<P>}</P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>
<P>#endregion</P>
<P>#region</FONT></FONT><FONT size=2> Property</P>
<P></FONT><FONT color=#008000 size=2><FONT color=#008000 size=2>//private static PropertyInfo&lt;string&gt; NazivProperty = RegisterProperty&lt;string&gt;(typeof(T), new PropertyInfo&lt;string&gt;("Naziv", "Naziv"));</P></FONT></FONT><FONT size=2>
<P></FONT><FONT color=#008000 size=2><FONT color=#008000 size=2>//private string _naziv;</P></FONT></FONT><FONT size=2>
<P></FONT><FONT color=#008000 size=2><FONT color=#008000 size=2>//public string Naziv</P></FONT></FONT><FONT size=2>
<P></FONT><FONT color=#008000 size=2><FONT color=#008000 size=2>//{</P></FONT></FONT><FONT size=2>
<P></FONT><FONT color=#008000 size=2><FONT color=#008000 size=2>// get { return GetProperty&lt;string&gt;(NazivProperty, _naziv); }</P></FONT></FONT><FONT size=2>
<P></FONT><FONT color=#008000 size=2><FONT color=#008000 size=2>// set { SetProperty&lt;string&gt;(NazivProperty, ref _naziv, value); }</P></FONT></FONT><FONT size=2>
<P></FONT><FONT color=#008000 size=2><FONT color=#008000 size=2>//}</P></FONT></FONT><FONT size=2>
<P></FONT><FONT color=#008000 size=2><FONT color=#008000 size=2>//private static PropertyInfo&lt;string&gt; OpisProperty = RegisterProperty&lt;string&gt;(typeof(T), new PropertyInfo&lt;string&gt;("Opis", "Opis"));</P></FONT></FONT><FONT size=2>
<P></FONT><FONT color=#008000 size=2><FONT color=#008000 size=2>//private string _opis;</P></FONT></FONT><FONT size=2>
<P></FONT><FONT color=#008000 size=2><FONT color=#008000 size=2>//public string Opis</P></FONT></FONT><FONT size=2>
<P></FONT><FONT color=#008000 size=2><FONT color=#008000 size=2>//{</P></FONT></FONT><FONT size=2>
<P></FONT><FONT color=#008000 size=2><FONT color=#008000 size=2>// get { return GetProperty&lt;string&gt;(OpisProperty, _opis); }</P></FONT></FONT><FONT size=2>
<P></FONT><FONT color=#008000 size=2><FONT color=#008000 size=2>// set { SetProperty&lt;string&gt;(OpisProperty, ref _opis, value); }</P></FONT></FONT><FONT size=2>
<P></FONT><FONT color=#008000 size=2><FONT color=#008000 size=2>//}</P></FONT></FONT><FONT size=2>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>private</FONT></FONT><FONT size=2> </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>static</FONT></FONT><FONT size=2> </FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>PropertyInfo</FONT></FONT><FONT size=2>&lt;</FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>string</FONT></FONT><FONT size=2>&gt; NazivProperty = RegisterProperty&lt;</FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>string</FONT></FONT><FONT size=2>&gt;(</FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>typeof</FONT></FONT><FONT size=2>(T), </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>new</FONT></FONT><FONT size=2> </FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>PropertyInfo</FONT></FONT><FONT size=2>&lt;</FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>string</FONT></FONT><FONT size=2>&gt;(</FONT><FONT color=#a31515 size=2><FONT color=#a31515 size=2>"Naziv"</FONT></FONT><FONT size=2>, </FONT><FONT color=#a31515 size=2><FONT color=#a31515 size=2>"Naziv"</FONT></FONT><FONT size=2>));</P>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>public</FONT></FONT><FONT size=2> </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>string</FONT></FONT><FONT size=2> Naziv</P>
<P>{</P>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>get</FONT></FONT><FONT size=2> { </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>return</FONT></FONT><FONT size=2> GetProperty&lt;</FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>string</FONT></FONT><FONT size=2>&gt;(NazivProperty); }</P>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>set</FONT></FONT><FONT size=2> { SetProperty&lt;</FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>string</FONT></FONT><FONT size=2>&gt;(NazivProperty, </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>value</FONT></FONT><FONT size=2>); }</P>
<P>}</P>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>private</FONT></FONT><FONT size=2> </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>static</FONT></FONT><FONT size=2> </FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>PropertyInfo</FONT></FONT><FONT size=2>&lt;</FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>string</FONT></FONT><FONT size=2>&gt; OpisProperty = RegisterProperty&lt;</FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>string</FONT></FONT><FONT size=2>&gt;(</FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>typeof</FONT></FONT><FONT size=2>(T), </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>new</FONT></FONT><FONT size=2> </FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>PropertyInfo</FONT></FONT><FONT size=2>&lt;</FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>string</FONT></FONT><FONT size=2>&gt;(</FONT><FONT color=#a31515 size=2><FONT color=#a31515 size=2>"Opis"</FONT></FONT><FONT size=2>, </FONT><FONT color=#a31515 size=2><FONT color=#a31515 size=2>"Opis"</FONT></FONT><FONT size=2>));</P>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>public</FONT></FONT><FONT size=2> </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>string</FONT></FONT><FONT size=2> Opis</P>
<P>{</P>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>get</FONT></FONT><FONT size=2> { </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>return</FONT></FONT><FONT size=2> GetProperty&lt;</FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>string</FONT></FONT><FONT size=2>&gt;(OpisProperty); }</P>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>set</FONT></FONT><FONT size=2> { SetProperty&lt;</FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>string</FONT></FONT><FONT size=2>&gt;(OpisProperty, </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>value</FONT></FONT><FONT size=2>); }</P>
<P>}</P>
<P>&nbsp;</P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>
<P>#endregion</P>
<P>#region</FONT></FONT><FONT size=2> Methods</FONT></P>
<P><FONT color=#0000ff size=2><FONT color=#0000ff size=2>protected</FONT></FONT><FONT size=2> </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>override</FONT></FONT><FONT size=2> </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>void</FONT></FONT><FONT size=2> LoadData(</FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>NullableDataReader</FONT></FONT><FONT size=2> reader)</P>
<P>{</P>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>try</P></FONT></FONT><FONT size=2>
<P>{</P>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>base</FONT></FONT><FONT size=2>.LoadData(reader);</P>
<P>LoadProperty&lt;</FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>string</FONT></FONT><FONT size=2>&gt;(NazivProperty, reader.GetString(</FONT><FONT color=#a31515 size=2><FONT color=#a31515 size=2>"Naziv"</FONT></FONT><FONT size=2>));</P>
<P>LoadProperty&lt;</FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>string</FONT></FONT><FONT size=2>&gt;(OpisProperty, reader.GetString(</FONT><FONT color=#a31515 size=2><FONT color=#a31515 size=2>"Opis"</FONT></FONT><FONT size=2>));</P>
<P></FONT><FONT color=#008000 size=2><FONT color=#008000 size=2>//_naziv = reader.GetString("Naziv");</P></FONT></FONT><FONT size=2>
<P></FONT><FONT color=#008000 size=2><FONT color=#008000 size=2>//_opis = reader.GetNullableString("Opis");</P></FONT></FONT><FONT size=2>
<P>}</P>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>catch</FONT></FONT><FONT size=2> (</FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>Exception</FONT></FONT><FONT size=2> ex)</P>
<P>{</P>
<P></FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>LogHelper</FONT></FONT><FONT size=2>.LogException(ex);</P>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>throw</FONT></FONT><FONT size=2>;</P>
<P>}</P>
<P>}</P>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>protected</FONT></FONT><FONT size=2> </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>override</FONT></FONT><FONT size=2> </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>void</FONT></FONT><FONT size=2> OnDeserialized(System.Runtime.Serialization.</FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>StreamingContext</FONT></FONT><FONT size=2> context)</P>
<P>{</P>
<P>_dummy = 20;</P>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>base</FONT></FONT><FONT size=2>.OnDeserialized(context);</P>
<P>}</P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>
<P>#endregion</P></FONT></FONT><FONT size=2>
<P>}</P>
<P>&nbsp;</P>
<P>// <FONT color=#2b91af>Funkcija</FONT><FONT size=2> </FONT></P><FONT size=2>
<P>[</FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>Serializable</FONT></FONT><FONT size=2>]</P>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>public</FONT></FONT><FONT size=2> </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>class</FONT></FONT><FONT size=2> </FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>Funkcija</FONT></FONT><FONT size=2> : </FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>BaseNameDescriptionBusinessObject</FONT></FONT><FONT size=2>&lt;</FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>Funkcija</FONT></FONT><FONT size=2>&gt;</P>
<P>{</P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>
<P>#region</FONT></FONT><FONT size=2> Constructors</P>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>private</FONT></FONT><FONT size=2> Funkcija()</P>
<P>{</P>
<P>}</P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>
<P>#endregion</P>
<P>#region</FONT></FONT><FONT size=2> FactoryMethods</P>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>public</FONT></FONT><FONT size=2> </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>static</FONT></FONT><FONT size=2> </FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>Funkcija</FONT></FONT><FONT size=2> CreateChildObject()</P>
<P>{</P>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>return</FONT></FONT><FONT size=2> </FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>DataPortal</FONT></FONT><FONT size=2>.CreateChild&lt;</FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>Funkcija</FONT></FONT><FONT size=2>&gt;();</P>
<P>}</P>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>public</FONT></FONT><FONT size=2> </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>static</FONT></FONT><FONT size=2> </FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>Funkcija</FONT></FONT><FONT size=2> GetFuinkcijaByUid(</FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>Guid</FONT></FONT><FONT size=2> uid)</P>
<P>{</P>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>return</FONT></FONT><FONT size=2> </FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>DataPortal</FONT></FONT><FONT size=2>.Fetch&lt;</FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>Funkcija</FONT></FONT><FONT size=2>&gt;(</FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>new</FONT></FONT><FONT size=2> </FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>SingleCriteria</FONT></FONT><FONT size=2>&lt;</FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>Funkcija</FONT></FONT><FONT size=2>, </FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>Guid</FONT></FONT><FONT size=2>&gt;(uid));</P>
<P>}</P>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>public</FONT></FONT><FONT size=2> </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>static</FONT></FONT><FONT size=2> </FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>Funkcija</FONT></FONT><FONT size=2> GetChildByReader(</FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>NullableDataReader</FONT></FONT><FONT size=2> reader)</P>
<P>{</P>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>return</FONT></FONT><FONT size=2> </FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>DataPortal</FONT></FONT><FONT size=2>.FetchChild&lt;</FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>Funkcija</FONT></FONT><FONT size=2>&gt;(</FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>new</FONT></FONT><FONT size=2> </FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>SingleCriteria</FONT></FONT><FONT size=2>&lt;</FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>Funkcija</FONT></FONT><FONT size=2>, </FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>NullableDataReader</FONT></FONT><FONT size=2>&gt;(reader));</P>
<P>}</P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>
<P>#endregion</P>
<P>#region</FONT></FONT><FONT size=2> DataAccess</P>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>private</FONT></FONT><FONT size=2> </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>void</FONT></FONT><FONT size=2> Child_Fetch(</FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>SingleCriteria</FONT></FONT><FONT size=2>&lt;</FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>Funkcija</FONT></FONT><FONT size=2>, </FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>NullableDataReader</FONT></FONT><FONT size=2>&gt; criteria)</P>
<P>{</P>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>try</P></FONT></FONT><FONT size=2>
<P>{</P>
<P>LoadData(criteria.Value);</P>
<P>}</P>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>catch</FONT></FONT><FONT size=2> (</FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>Exception</FONT></FONT><FONT size=2> ex)</P>
<P>{</P>
<P></FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>LogHelper</FONT></FONT><FONT size=2>.LogException(ex);</P>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>throw</FONT></FONT><FONT size=2>;</P>
<P>}</P>
<P>}</P>
<P></P>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>private</FONT></FONT><FONT size=2> </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>void</FONT></FONT><FONT size=2> DataPortal_Fetch(</FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>SingleCriteria</FONT></FONT><FONT size=2>&lt;</FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>Funkcija</FONT></FONT><FONT size=2>, </FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>Guid</FONT></FONT><FONT size=2>&gt; criteria)</P>
<P>{</P>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>try</P></FONT></FONT><FONT size=2>
<P>{</P>
<P></FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>Database</FONT></FONT><FONT size=2> db = </FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>DatabaseFactory</FONT></FONT><FONT size=2>.CreateDatabase();</P>
<P></FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>DbCommand</FONT></FONT><FONT size=2> cmd = db.GetStoredProcCommand(</FONT><FONT color=#a31515 size=2><FONT color=#a31515 size=2>"usp_GetFuncijaByUid"</FONT></FONT><FONT size=2>);</P>
<P>db.AddInParameter(cmd, </FONT><FONT color=#a31515 size=2><FONT color=#a31515 size=2>"@uid"</FONT></FONT><FONT size=2>, </FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>DbType</FONT></FONT><FONT size=2>.Guid, criteria.Value);</P>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>using</FONT></FONT><FONT size=2> (</FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>NullableDataReader</FONT></FONT><FONT size=2> reader = </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>new</FONT></FONT><FONT size=2> </FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>NullableDataReader</FONT></FONT><FONT size=2>(db.ExecuteReader(cmd)))</P>
<P>{</P>
<P>DataFetch(reader);</P>
<P>}</P>
<P>}</P>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>catch</FONT></FONT><FONT size=2> (</FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>Exception</FONT></FONT><FONT size=2> ex)</P>
<P>{</P>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>throw</FONT></FONT><FONT size=2>;</P>
<P>}</P>
<P>}</P>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>protected</FONT></FONT><FONT size=2> </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>override</FONT></FONT><FONT size=2> </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>void</FONT></FONT><FONT size=2> Child_Create()</P>
<P>{</P>
<P>Uid = </FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>Guid</FONT></FONT><FONT size=2>.NewGuid();</P>
<P>ValidationRules.CheckRules();</P>
<P>}</P>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>private</FONT></FONT><FONT size=2> </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>void</FONT></FONT><FONT size=2> Child_Insert()</P>
<P>{</P>
<P>DoSave();</P>
<P>}</P>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>private</FONT></FONT><FONT size=2> </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>void</FONT></FONT><FONT size=2> DoSave()</P>
<P>{</P>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>try</P></FONT></FONT><FONT size=2>
<P>{</P>
<P></FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>Database</FONT></FONT><FONT size=2> db = </FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>DatabaseFactory</FONT></FONT><FONT size=2>.CreateDatabase();</P>
<P></FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>DbCommand</FONT></FONT><FONT size=2> cmd = db.GetStoredProcCommand(</FONT><FONT color=#a31515 size=2><FONT color=#a31515 size=2>"usp_FunkcijaInsertUpdate"</FONT></FONT><FONT size=2>);</P>
<P>db.AddInParameter(cmd, </FONT><FONT color=#a31515 size=2><FONT color=#a31515 size=2>"@uid"</FONT></FONT><FONT size=2>, </FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>DbType</FONT></FONT><FONT size=2>.Guid, Uid);</P>
<P>db.AddInParameter(cmd, </FONT><FONT color=#a31515 size=2><FONT color=#a31515 size=2>"@naziv"</FONT></FONT><FONT size=2>, </FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>DbType</FONT></FONT><FONT size=2>.String, Naziv);</P>
<P>db.AddInParameter(cmd, </FONT><FONT color=#a31515 size=2><FONT color=#a31515 size=2>"@opis"</FONT></FONT><FONT size=2>, </FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>DbType</FONT></FONT><FONT size=2>.String, Opis);</P>
<P>db.AddInParameter(cmd, </FONT><FONT color=#a31515 size=2><FONT color=#a31515 size=2>"@isNew"</FONT></FONT><FONT size=2>, </FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>DbType</FONT></FONT><FONT size=2>.Boolean, IsNew);</P>
<P>db.ExecuteNonQuery(cmd);</P>
<P>}</P>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>catch</FONT></FONT><FONT size=2> (</FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>Exception</FONT></FONT><FONT size=2> ex)</P>
<P>{</P>
<P></FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>LogHelper</FONT></FONT><FONT size=2>.LogException(ex);</P>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>throw</FONT></FONT><FONT size=2>;</P>
<P>}</P>
<P>}</P>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>private</FONT></FONT><FONT size=2> </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>void</FONT></FONT><FONT size=2> Child_Update()</P>
<P>{</P>
<P>DoSave();</P>
<P>}</P>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>private</FONT></FONT><FONT size=2> </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>void</FONT></FONT><FONT size=2> Child_DeleteSelf()</P>
<P>{</P>
<P>LogicalDelete(</FONT><FONT color=#a31515 size=2><FONT color=#a31515 size=2>"Funkcije"</FONT></FONT><FONT size=2>);</P>
<P>}</P>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>#endregion</P></FONT></FONT><FONT size=2>
<P></P>
<P>}</P>
<P>&nbsp;</P>
<P>Is there I'm doing something wrong?</P></FONT></FONT></FONT></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>stefan replied on Wednesday, October 01, 2008</h2>Hi van,<br><br><font size="2"><BLOCKQUOTE><div><img src="/Themes/default/images/icon-quote.gif"> <strong>van:</strong></div><div></font><p><font size="2">// </font><font size="2"><font color="#2b91af">BaseObject</font>&lt;T&gt; class</font></p><font size="2">
</font><p><font size="2">[</font><font color="#2b91af" size="2"><font color="#2b91af" size="2">Serializable</font></font><font size="2">]</font></p>
<p><font color="#0000ff" size="2"><font color="#0000ff" size="2">public</font></font><font size="2"> </font><font color="#0000ff" size="2"><font color="#0000ff" size="2">abstract</font></font><font size="2"> </font><font color="#0000ff" size="2"><font color="#0000ff" size="2">class</font></font><font size="2"> </font><font color="#2b91af" size="2"><font color="#2b91af" size="2">BaseObject</font></font><font size="2">&lt;T&gt; : </font><font color="#2b91af" size="2"><font color="#2b91af" size="2">BusinessBase</font></font><font size="2">&lt;T&gt;, </font><font color="#2b91af" size="2"><font color="#2b91af" size="2">IBusinessObjectId</font></font><font size="2"> </font><font color="#0000ff" size="2"><font color="#0000ff" size="2">where</font></font><font size="2"> T : </font><font color="#2b91af" size="2"><font color="#2b91af" size="2">BaseObject</font></font><font size="2">&lt;T&gt;</font></p>
<p><font size="2">{</font></p><font color="#0000ff" size="2"><font color="#0000ff" size="2">
</font></font><p><font color="#0000ff" size="2"><font color="#0000ff" size="2">#region</font></font><font size="2"> Constructor</font></p>
<p><font color="#0000ff" size="2"><font color="#0000ff" size="2">protected</font></font><font size="2"> BaseObject()</font></p>
<p><font size="2">{</font></p>
<p><font size="2">LoadProperty&lt;</font><font color="#2b91af" size="2"><font color="#2b91af" size="2">Guid</font></font><font size="2">&gt;(UidProperty, </font><font color="#2b91af" size="2"><font color="#2b91af" size="2">Guid</font></font><font size="2">.Empty);</font></p>
<p><font size="2">}</font></p><font color="#0000ff" size="2"><font color="#0000ff" size="2">
</font></font><p><font color="#0000ff" size="2"><font color="#0000ff" size="2">#endregion</font></font></p>
<p><font color="#0000ff" size="2"><font color="#0000ff" size="2">...<br></font></font></p><font size="2"><font size="2"><font size="2">Is there I doing something wrong?</font></font></div></BLOCKQUOTE></font><br><br>Yes! Look at your constructor - missing something there<img src="/emoticons/emotion-5.gif" alt="Wink [;)]" /><br><br>Read this:&nbsp; http://forums.lhotka.net/forums/post/26436.aspx<br><br><br>Stefan<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>van replied on Thursday, October 02, 2008</h2><P>I added static field and an override of OnDeserialized() and I now have:</P>
<P>// <FONT size=2>BaseObject class</FONT></P><FONT color=#0000ff size=2><FONT color=#0000ff size=2>
<P>private</FONT></FONT><FONT size=2> </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>static</FONT></FONT><FONT size=2> </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>int</FONT></FONT><FONT size=2> _forceInit;</P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>
<P>#region</FONT></FONT><FONT size=2> Constructor</P>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>protected</FONT></FONT><FONT size=2> BaseObject()</P>
<P>{</P>
<P>_forceInit = 5;</P>
<P>LoadProperty&lt;</FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>Guid</FONT></FONT><FONT size=2>&gt;(UidProperty, </FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>Guid</FONT></FONT><FONT size=2>.Empty);</P>
<P>}</P>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>protected</FONT></FONT><FONT size=2> </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>override</FONT></FONT><FONT size=2> </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>void</FONT></FONT><FONT size=2> OnDeserialized(System.Runtime.Serialization.</FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>StreamingContext</FONT></FONT><FONT size=2> context)</P>
<P>{</P>
<P>_forceInit = 10;</P>
<P>}</P><FONT color=#0000ff size=2><FONT color=#0000ff size=2>
<P>&nbsp;</P>
<P>// <FONT size=2>BaseNameDescriptionBusinessObject class</FONT></FONT></FONT><FONT size=2></P>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>private</FONT></FONT><FONT size=2> </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>static</FONT></FONT><FONT size=2> </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>int</FONT></FONT><FONT size=2> _dummy;</FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2></P>
<P>#region</FONT></FONT><FONT size=2> Constuctor</P>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>protected</FONT></FONT><FONT size=2> BaseNameDescriptionBusinessObject()</P>
<P>{</P>
<P>_dummy = 10;</P>
<P></P>
<P>}</P><FONT color=#0000ff size=2><FONT color=#0000ff size=2>
<P>protected</FONT></FONT><FONT size=2> </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>override</FONT></FONT><FONT size=2> </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>void</FONT></FONT><FONT size=2> OnDeserialized(System.Runtime.Serialization.</FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>StreamingContext</FONT></FONT><FONT size=2> context)</P>
<P>{</P>
<P>_dummy = 20;</P></FONT><FONT size=2>
<P>}</P></FONT>
<P></FONT>&nbsp;</P>
<P>//&nbsp; Funkcija class</P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>
<P>private</FONT></FONT><FONT size=2> </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>static</FONT></FONT><FONT size=2> </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>int</FONT></FONT><FONT size=2> _forceInit;</P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>
<P>#region</FONT></FONT><FONT size=2> Constructors</P>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>private</FONT></FONT><FONT size=2> Funkcija()</P>
<P>{</P>
<P>_forceInit = 10;</P>
<P>}</P>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>protected</FONT></FONT><FONT size=2> </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>override</FONT></FONT><FONT size=2> </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>void</FONT></FONT><FONT size=2> OnDeserialized(System.Runtime.Serialization.</FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>StreamingContext</FONT></FONT><FONT size=2> context)</P>
<P>{</P>
<P>_forceInit = 15;</P>
<P>}</P>
<P>&nbsp;</P>
<P>and problem still exist. Properties in the BaseObject and Funkcija classes registered properly and there is not a problem, but property Naziv and Opis in the&nbsp;BaseNameDescriptionBusinessObject&nbsp;never registered. When I go through debug, lines</P>
<P><FONT color=#0000ff></FONT></P>
<P>private<FONT size=2> </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>static</FONT></FONT><FONT size=2> </FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>PropertyInfo</FONT></FONT><FONT size=2>&lt;</FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>string</FONT></FONT><FONT size=2>&gt; NazivProperty = RegisterProperty&lt;</FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>string</FONT></FONT><FONT size=2>&gt;(</FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>typeof</FONT></FONT><FONT size=2>(T), </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>new</FONT></FONT><FONT size=2> </FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>PropertyInfo</FONT></FONT><FONT size=2>&lt;</FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>string</FONT></FONT><FONT size=2>&gt;(</FONT><FONT color=#a31515 size=2><FONT color=#a31515 size=2>"Naziv"</FONT></FONT><FONT size=2>, </FONT><FONT color=#a31515 size=2><FONT color=#a31515 size=2>"Naziv"</FONT></FONT><FONT size=2>));</FONT></P>
<P><FONT size=2>and</FONT></P><FONT size=2><FONT color=#0000ff size=2><FONT color=#0000ff size=2>
<P>private</FONT></FONT><FONT size=2> </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>static</FONT></FONT><FONT size=2> </FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>PropertyInfo</FONT></FONT><FONT size=2>&lt;</FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>string</FONT></FONT><FONT size=2>&gt; OpisProperty = RegisterProperty&lt;</FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>string</FONT></FONT><FONT size=2>&gt;(</FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>typeof</FONT></FONT><FONT size=2>(T), </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>new</FONT></FONT><FONT size=2> </FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>PropertyInfo</FONT></FONT><FONT size=2>&lt;</FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>string</FONT></FONT><FONT size=2>&gt;(</FONT><FONT color=#a31515 size=2><FONT color=#a31515 size=2>"Opis"</FONT></FONT><FONT size=2>, </FONT><FONT color=#a31515 size=2><FONT color=#a31515 size=2>"Opis"</FONT></FONT><FONT size=2>));</P></FONT></FONT>
<P>executed before </P><FONT color=#0000ff size=2><FONT color=#0000ff size=2>
<P>protected</FONT></FONT><FONT size=2> </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>override</FONT></FONT><FONT size=2> </FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>void</FONT></FONT><FONT size=2> LoadData(</FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>NullableDataReader</FONT></FONT><FONT size=2> reader)</P>
<P>{</P>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>try</P></FONT></FONT><FONT size=2>
<P>{</P>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>base</FONT></FONT><FONT size=2>.LoadData(reader);</P>
<P>LoadProperty&lt;</FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>string</FONT></FONT><FONT size=2>&gt;(NazivProperty, reader.GetString(</FONT><FONT color=#a31515 size=2><FONT color=#a31515 size=2>"Naziv"</FONT></FONT><FONT size=2>));</P>
<P>LoadProperty&lt;</FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>string</FONT></FONT><FONT size=2>&gt;(OpisProperty, reader.GetString(</FONT><FONT color=#a31515 size=2><FONT color=#a31515 size=2>"Opis"</FONT></FONT><FONT size=2>));</P>
<P></FONT><FONT color=#008000 size=2><FONT color=#008000 size=2>//_naziv = reader.GetString("Naziv");</P></FONT></FONT><FONT size=2>
<P></FONT><FONT color=#008000 size=2><FONT color=#008000 size=2>//_opis = reader.GetNullableString("Opis");</P></FONT></FONT><FONT size=2>
<P>}</P>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>catch</FONT></FONT><FONT size=2> (</FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>Exception</FONT></FONT><FONT size=2> ex)</P>
<P>{</P>
<P></FONT><FONT color=#2b91af size=2><FONT color=#2b91af size=2>LogHelper</FONT></FONT><FONT size=2>.LogException(ex);</P>
<P></FONT><FONT color=#0000ff size=2><FONT color=#0000ff size=2>throw</FONT></FONT><FONT size=2>;</P>
<P>}</P>
<P>}</P>
<P>&nbsp;</P>
<P>but it's throw an exception 'Property load or set failed for property Naziv (One or more properties are not registered for this type)'</FONT></P></FONT></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Thursday, October 02, 2008</h2>






 





<div class=Section1>

<p class=MsoNormal><span>The _forceInit code looks right. You have it in EVERY class?
Base and sub?<o:p></o:p></span></p>

<p class=MsoNormal><span><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span>Rocky</span><o:p></o:p></p>

</div>



</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>van replied on Friday, October 03, 2008</h2>Yes, I know but stefan wrote that I missing something in BaseObject class. He meaned that I haven't _forceInit in this class. I readed your&nbsp;post&nbsp;at link&nbsp; <A href="/forums/post/26436.aspx">http://forums.lhotka.net/forums/post/26436.aspx</A>&nbsp;and I know that it&nbsp;is not need in BaseObject class, because inherited directly from BusinessBase&lt;T&gt;, but I try _forceInit in every class. Is it&nbsp;mean that my classes in second post are good and changes&nbsp;don't need? There is a&nbsp;_dummy only in BaseNameDescriptionBusinessObject.</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Friday, October 03, 2008</h2>






 





<div class=Section1>

<p class=MsoNormal>I&#8217;ll
try to be as clear as I can.<o:p></o:p></p>

<p class=MsoNormal>There
are exactly two scenarios.<o:p></o:p></p>

<p class=MsoNormal><span>1.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Your business
class inherits directly from a CSLA base class.<br>
<br>
In this case you don&#8217;t need to do anything special, your code should just
work.<br>
<br>
<o:p></o:p></span></p>

<p class=MsoNormal><span>2.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Your business
class inherits from a custom base class that inherits from a CSLA base class.
This scenario can go n levels deep.<br>
<br>
In this case you must include the _forceInit code in EVERY ONE OF YOUR CLASSES
in that inheritance hierarchy.<o:p></o:p></span></p>

<p class=MsoNormal>If
you are using code-gen, I&#8217;d just put it in the template and always
include the _forceInit code. It doesn&#8217;t cause harm, and would simplify
template creation.<o:p></o:p></p>

<p class=MsoNormal><span><o:p>&nbsp;</o:p></span></p>

</div>



</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>van replied on Saturday, October 04, 2008</h2>Thank you Rocky, thank you stefan. I try with complete new solution and it's work fine. <img src="/emoticons/emotion-1.gif" alt="Smile [:)]" /></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Jack replied on Tuesday, February 03, 2009</h2>I am getting this error in 3.6.1 (with _forceInit removed everywhere).<br><br>Any call in the overridden OnDeserialized event to a managed property blows up:<br><br><div>Index was outside the bounds of the array.<br><br></div><div>&nbsp;&nbsp; at Csla.Core.FieldManager.FieldDataManager.GetFieldData(IPropertyInfo prop) in C:\Csla\Framework\cslacs\Csla\Core\FieldManager\FieldDataManager.cs:line 142<br></div><br>Is that not the correct place to rebuild references and re-initialize 3rd party controls that don't support serialization?<br><br>I can get around the issue in my UI by calling GetBO, and then calling the ReLink method that I had referenced in my OnDeserialized.&nbsp; <br><br>I'm using a WCFProxy.<br><br>Thanks<br><br>jack<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Tuesday, February 03, 2009</h2>






 





<div class=Section1>

<p class=MsoNormal><span>Are you calling base.OnDeserialized()? And are you calling it
before your code runs?<o:p></o:p></span></p>

<p class=MsoNormal><span><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span>I haven&#8217;t looked into the code, but if I remember
correctly, some work occurs in some of the CSLA base classes that is rather
critical.<o:p></o:p></span></p>

<p class=MsoNormal><span><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span>Rocky<o:p></o:p></span></p>

</div>



</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Jack replied on Wednesday, February 04, 2009</h2><BLOCKQUOTE><div><img src="/Themes/default/images/icon-quote.gif"> <strong>RockfordLhotka:</strong></div><div>






 



<div class="Section1">

<p class="MsoNormal"><span>Are you calling base.OnDeserialized()? And are you calling it
before your code runs?<o:p></o:p></span></p>

<p class="MsoNormal"><span><o:p>&nbsp;</o:p></span></p>

<p class="MsoNormal"><span>I haven’t looked into the code, but if I remember
correctly, some work occurs in some of the CSLA base classes that is rather
critical.<o:p></o:p></span></p>

<p class="MsoNormal"><span><o:p>&nbsp;</o:p></span></p>

<p class="MsoNormal"><span>Rocky<o:p></o:p></span></p>

</div>

</div></BLOCKQUOTE><br><br>Beautiful - worked like a charm.&nbsp; Calling the Base.<span>OnDeserialized() first is required.&nbsp; Nice way to start the morning :-)<br><br>Thank you<br></span></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Wednesday, February 04, 2009</h2>






 





<div class=Section1>

<p class=MsoNormal><span>This, by the way, is a perfect example of why inheritance is a
tightly coupled relationship, and why (in general) it is best to favor
composition over inheritance.<o:p></o:p></span></p>

<p class=MsoNormal><span><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span>When you override a method you don&#8217;t explicitly know
whether you should or shouldn&#8217;t call the base method &#8211; and if you
do, you don&#8217;t know if you need to call it first, last or in the middle.<o:p></o:p></span></p>

<p class=MsoNormal><span><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span>That&#8217;s a serious weakness of the whole inheritance idea.<o:p></o:p></span></p>

<p class=MsoNormal><span><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span>Rocky </span><b><span><o:p></o:p></span></b></p>

<p class=MsoNormal><span><o:p>&nbsp;</o:p></span></p>

</div>



</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Wednesday, February 04, 2009</h2>I've handled this problem... maybe Csla can offer something similar.&nbsp; Of course I know the problem... everyone will want a different hook at some different point in the process.. <img src="/emoticons/emotion-2.gif" alt="Big Smile [:D]" /><br><br><font color="#0000ff"><font color="#000000">[<font color="#008000">OnDeserialized</font>]</font><br>private void</font> OnDeserialized( <font color="#008000">StreamingContext </font>context ) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; OnDeserializing( context );<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#008000"> // normal Csla OnDeserialized</font><br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; OnDeserlizeComplete( context );<br>}<br><br><font color="#0000ff">protected virtual</font> OnDeserializing( <font color="#008000">StreamingContext  </font>context ) { }<br><font color="#0000ff">protected virtual</font> OnDeserializeComplete( <font color="#008000">StreamingContext  </font>context ) { }<br><br>I've done this in my own code, when I absolutely want the base class behavior to run no matter what the subclass does, but still give the subclass different points in the process to hook into.<br><br>Just something to consider.. it seems to provide a little decoupling, in that you can't screw up what the base class needs to do.<br><br>Andy<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Wednesday, February 04, 2009</h2>That's a possible solution Andy, but only if there's behavior in just one level of the base class structure.<br /><br />If there's behavior in multiple base class levels (which may be the case in CSLA), then you'd have two protected virtual methods - which leads to confusion over which to override.<br /><br />Witness the confusion over the ChildChanged event methods (there were two - one with "Internal" in the name) and it confused the heck out of several people. So one of the first changes to 3.6 was to eliminate the "Internal" method so now there's just one.<br /><br />So you are right - in a simple case that's a good answer. But in the general case it is still an issue.</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Wednesday, February 04, 2009</h2>Yes, I realize it's not an ideal solution by any stretch, which is why I didn't post it yesterday when I discovered my issue.<img src="/emoticons/emotion-1.gif" alt="Smile [:)]" /><br><br>At the very least though if this were done the "missing behaviors" would always be behaviors users of the of the Csla framework coded themselves... not something unexpected like the ValidationRules being empty (and even that depending on how Csla was configured) as opposed to some rules were there and others were not.&nbsp; <br><br>I guess this is a matter of what is more confusing.&nbsp; <img src="/emoticons/emotion-1.gif" alt="Smile [:)]" /><br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>vbbeta replied on Wednesday, August 04, 2010</h2><p>Hey rocky this thread was very helpfull for me </p>
<p>&nbsp;</p>
<p>thanks a million i like when you reply onquestions its a big help...</p>
<p>CODE WELL</p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
