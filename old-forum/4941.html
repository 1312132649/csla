<html><header><title>BO Status after Delete</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>BO Status after Delete</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/4941.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>Warren posted on Thursday, June 05, 2008</h2><P>In my Winforms app I delete a bank editable base object and am unsure of&nbsp;the best steps to take in my UI after a successful delete. </P>
<P>I delete the current record like this:</P><FONT size=2>
<P>Bank.DeleteBank(mBank.BankId)</P>
<P>The sproc deletes the record and the record is still displayed in the form even though it no longer exists in the DB. My first thought was to re-load the form. </P>
<P>Should I be setting my object to nothing as in: </P>
<P>mbank = Nothing</P>
<P>then rebinding?</P>
<P>In the debugger I see that mbank is still populated with the values from the deleted record. </P>
<P>I am curious as to what others are doing in this situation. </P>
<P>Thanks in advance.</P></FONT></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>SomeGuy replied on Thursday, June 05, 2008</h2>I would either close the form, or create a new Bank and rebind. </div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Thursday, June 05, 2008</h2>Well, the object still exists and so behaves as a new object, with the values that WERE in the database.&nbsp; What to do is up to you.. maybe closing the form is appropriate?&nbsp; Moving to the next record? <br><br>For me most things that can be deleted are items in a grid... so deleted objects are off the grid (and eventually not referenced and GCed).&nbsp; The vast majority of my BOs though don't support delete, for history reasons.&nbsp; De-activating is the best you can do in my system for most BOs.<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Warren replied on Thursday, June 05, 2008</h2><P>I ended up clearing the form fields, deleteing the object, and calling <FONT size=2><FONT size=3>ResetControlAuthorization to reset the form controls.&nbsp; The form remains displayed, the fields are disabled and cleared and the buttons are reset which is what I wanted.&nbsp; </FONT></FONT></P>
<P><FONT size=2><FONT size=3>The last piece of the 'plumbing' puzzle for me is to handle referential integrity issues. I'll create a new post for that though :-)&nbsp;</FONT></FONT></P>
<P><FONT size=2><FONT size=3>Thanks for the help.</FONT></FONT></P>
<P><FONT size=2><FONT size=3></FONT>&nbsp;</P></FONT><FONT size=2></FONT>
<P>&nbsp;</P>
<P>&nbsp;</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>jeff replied on Friday, June 06, 2008</h2>You could add a static event to the bank object like this:<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; public static event EventHandler&lt;BankEventArgs&gt; BankDeleted;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; protected static void OnBankDeleted(BankEventArgs e)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; EventHandler&lt;BankEventArgs&gt; handler = BankDeleted;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (handler != null)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; handler(null, e);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br><br>You would raise this event in your static DeleteBank method after the dataportal call. Now have your form subscribe to this event and check if its bank.Id = e.Bank.Id. If so, the form could close/reset itself. <br><br>Now, if you decide to allow bank deletion at other places in the UI you won't need any specific code there to handle this open form issue. You push the responsibility onto the form itself.<br><br><br><br></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
