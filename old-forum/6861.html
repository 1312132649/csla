<html><header><title>EditLevel not incrementing</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>EditLevel not incrementing</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/6861.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>shawndewet posted on Tuesday, April 28, 2009</h2><P><FONT face=Arial>Using WPF, I have set my CSLA BusinessBase object as the DataContext&nbsp; (as opposed to going via the CslaDataProvider), and the databinding is working to the extent that I can see the values of the properties showing up on the form in the text boxes as expected.</FONT></P>
<P><FONT face=Arial>When I edit a value in&nbsp;a text box and tab off it, the appropriate property setter is hit (confirmed by the use of breakpoints) and the underlying value of the field is changed, and the object's IsDirty correctly returns True.</FONT></P>
<P><FONT face=Arial>However, the problem is that the EditLevel of the object is still 0 (zero).&nbsp; The effect of this is that calling CancelEdit does nothing.&nbsp;&nbsp; According to page 279 of the VB 2008 book, BeginEdit (which&nbsp;does the stack copy,&nbsp;resulting in&nbsp;EditLevel being incremented)&nbsp;is called by DataBinding automatically.&nbsp; So it seems to me that I am missing something in my implementation...does anybody have any idea what this missing piece may be?&nbsp; It's no different (in concept)&nbsp;to what would do in Windows databinding, and there it is working fine.</FONT></P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Tuesday, April 28, 2009</h2><P>BeginEdit() is called automatically by data binding in Windows Forms. And it is called automatically (via the IEditableObject interface) in a WPF grid.</P>
<P>But outside a grid, WPF doesn't call IEditableObject at all, and it is your responsibility to manage the undo behaviors of the object.</P>
<P>The CslaDataProvider (with ManageObjectLifetime="true") does work with data binding to automatically call BeginEdit() - this is one of the benefits of using the CslaDataProvider.</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>shawndewet replied on Tuesday, April 28, 2009</h2><P><FONT face=Arial>Thanks Rocky.&nbsp; I guess I should read the book finished, huh? ;-)</FONT></P>
<P><FONT face=Arial>Could you please expand on what you mean by "in a WPF grid"? (I do presume you mean "grid" here as opposed to "datagrid").&nbsp; All my databound controls are indeed inside a grid control.&nbsp; Does this mean I should be setting the binding source on the grid control (as opposed to setting it on the usercontrol as I am currently doing)?</FONT></P></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
