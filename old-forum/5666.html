<html><header><title>Overriding &quot;Controls&quot; property of a panel in C#</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Overriding &quot;Controls&quot; property of a panel in C#</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/5666.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>Lalit posted on Friday, October 24, 2008</h2>I have to override Add method of "Controls" property of myControl that is extended from a Panel control of windows. For that i extended ControlCollection class into MyControlCollection where i overriden its Add method. Now i declared a Controls property of MyControlCollection type to hide panel's Controls property. When i am accessing this.Controls.Add(control), it refers to overriden Add method. But if i drags and drops a control on myControl the behaviour is of base type's Add method. Can any body suggest the cause and remedy for this problem? Thanks in advance.</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>skagen00 replied on Friday, October 24, 2008</h2><P>You're not going to get the behavior that you want by hiding it, because the call to drag and drop isn't going to have an instance typed as YourPanel, it'll have an instance typed as the ancestor.</P>
<P>The additional behavior you want, is it complementary to base behavior when controls are added? Are you just trying to do some extra tracking/etc on controls being added? </P>
<P>If so, I'd suggest just looking at this method:</P>
<P>&nbsp;&nbsp;&nbsp; public class MyPanel : Panel<BR>&nbsp;&nbsp;&nbsp; {<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; protected override void AddedControl(Control control, int index)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...</P>
<P>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<BR>&nbsp;&nbsp;&nbsp; }</P>
<P>AddedControl&nbsp;is called on the owner of the ControlCollection&nbsp;by ControlCollection when a control is added via Add. </P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Lalit replied on Thursday, October 30, 2008</h2><P>Hi,</P>
<P>The fuctionality i require is when i drag n drops a control on MyPanel, based upon some properties of MyPanel i have to allow or disallow adding control on MyPanel. Now windows exposes only ControlAdded event for add control action. I found that this event occurs after adding child control on MyPanel at 0, 0 location and after raising that event it relocates the child control according to the mouse position on MyPanel. If i handle that event and removes the child control from list, it throws exception as it is referring that child after that event to relocate the same.</P>
<P>I have not checked that AddedControl&nbsp;method yet, but soon i will work upon it. If you have some another approach for my problem please tell me. It will be a great help.</P>
<P>&nbsp;</P>
<P>Thanks</P>
<P>Lalit</P></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
