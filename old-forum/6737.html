<html><header><title>client / application server</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>client / application server</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/6737.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>martin_s posted on Friday, April 03, 2009</h2>Sorry for the newbie style questions - I feel I shall be asking more of these :)<br>
<br>
I come from a Delphi background working on a large system with our own
in-house framework so I'm currently in that mindset and trying to make
the transition as we being R&amp;D to prepare for a large migration over to .NET<br>
<br>
The application server currently comprises COM+ components and the
customer is keen to keep this multi-tier architecture which will mean
a WCF application server and winform clients.&nbsp; <br>
<br>
In csla on the client side I'm assuming calling the save methods to
persist the data will serialize the objects and send them via WCF to
the application server where they will be deserialized back into
objects and
persisted -&nbsp; the same when loading (in reverse of course).&nbsp; Does this
mean client classes and server classes (as we currently have).&nbsp; The
client classes just know how to serialize and call the server, the
server calls the data access layer to persist the data from the
populated objects.<br>
<br>
In our current system we have request stacking (we term a request as
any load/save method calls to an object).&nbsp; We can issue
Object.LoadByKey(...) etc on several (unlinked) objects, then issue a
supplierclient.execute which will dispatch the stacked up requests to
the application server where the class factory deals with the requests,
creates and populates
the objects, serializes the data and returns it to the client in one
single network trip.&nbsp; Is there any equivalent, single trip, multiple
requests in csla.<br>
<br>
In our current system we have lots of application server business methods - such as
PlaceProductOnHold(...) etc.&nbsp; These methods will use many objects to
implement the business rules resulting in several objects
being updated and persisted to the database (in a single MSDTC
transaction).&nbsp; The client class has a PlaceProductOnHold method, which
simply calls the server where the business rules are implemented and receives a response.&nbsp; Is this something
that is appropriate to the csla framework.<br>
<br>
I'm trying to work out what adjustments I need to make in my thinking -
Never easy when you've put so much commitment into an existing project and designed your own framework.</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JoeFallon1 replied on Saturday, April 04, 2009</h2>Those are a lot of good questions. <br /><br />The first and best piece of advice is to buy the 2008 book (VB or C#) and sit down and read the whole thing. It is the best book on distributed architecture you will ever read. And you will instantly recognize Rocky's easy going style in explaining very difficult concepts.<br /><br />Your initial assumption is correct. A Business Object (BO) can be serialized and deserialized to/from an app server. The next part of your statement is not correct. In CSLA it is the exact same BO which appears on both sides. No client classes, no server clases. Just 1 BO class. This is what Rocky defines as a Mobile Object. It moves itself across the wire and is self contained in terms of data and validation and authorization rules.<br /><br />The CSLA framework takes care of contacting the app server if required. If you want to run without one it is just a different setting in the config file.<br /><br />If you have a root level BO it can contain many other BOs. So a request across the wire to populate this root will cause all its children to get populated too. Then the whole object graph is sent back. I call this a Use Case Controller object - it is a standard root BO which contains all the other BOs to perform a use case. e.g. Enter a new invoice may require 5 BOs - they are all contained in the Invoice unit of work.<br /><br />You cannot make a single request and get back multiple unrelated BOs. You can make 1 request per BO and get back each one.<br /><br />App server methods can be "translated" to the CSLA CommandBase object. It can contain many other BOs if needed. You instantiate it client side - give it whatever parameters it needs (PO Number, Date Range, etc.) and call Execute to send it to the app server where it deserializes and calls DataPortal_Execute. In the execute method you do whatever needs to be done server side. You can even set flags and messages and the BO is returned to the client with that information intact so you can inform the user what happened.<br /><br />HTH<br />Joe</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>martin_s replied on Sunday, April 05, 2009</h2>Thanks for the reply.<br><br>C# 2008 Business Objects landed on my desk on friday, although where I'm going to find the time to read it all I don't know.&nbsp; <br><br>Are there any code examples available which demonstrate the mobile objects model using WCF and how the config file is used to configure csla to perform its object persistance via an application server.<br><br>Its a shame that we cant stack requests in the framework and execute them in a single trip.&nbsp; The customers network is a busy place and the fewer trips we have to make to the app server the better, which is why we designed our existing framework with this feature.<br><br>There are many instances where I can design parent/child relationships based on our database design, but in the applications there are cases where I would only want the parent to be loaded, and other cases where parent and child loading is required.&nbsp; I'm assuming in parent only cases lazy loading of the child objects would handle this, but is there a way from the client app to specify load parent and children, or load parent only.<br><br>In our existing system we use raw ADO datasets for readonly data.&nbsp; Mostly for report generation and grid displays where the data view is specific to a single application and usually relies on cross table joins to retrieve the data.&nbsp; I can't see the benefit of using a BO in these instances. Is this a model which would be valid in a csla &nbsp; <br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Sunday, April 05, 2009</h2><P><BLOCKQUOTE><div><img src="/Themes/default/images/icon-quote.gif"> <strong>JoeFallon1:</strong></div><div></P>
<P>You cannot make a single request and get back multiple unrelated BOs.</div></BLOCKQUOTE></P>
<P>That's not <EM>entirely</EM> true. Joe is right, in that this shouldn't come up if you do good object modeling, but <EM>technically</EM> you can use a Command or ReadOnlyBase object as a "request object" that returns multiple unrelated objects in a single data portal call.</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>DocJames replied on Saturday, April 25, 2009</h2><BLOCKQUOTE><div><img src="/Themes/default/images/icon-quote.gif"> <strong>RockfordLhotka:</strong></div><div><P><BLOCKQUOTE><div><img src="/Themes/default/images/icon-quote.gif"> <strong>JoeFallon1:</strong></div><div></P><br /><P>You cannot make a single request and get back multiple unrelated BOs.</div></BLOCKQUOTE></P><br /><P>That's not <EM>entirely</EM> true. Joe is right, in that this shouldn't come up if you do good object modeling, but <EM>technically</EM> you can use a Command or ReadOnlyBase object as a "request object" that returns multiple unrelated objects in a single data portal call.</P></div></BLOCKQUOTE><br /><br />The same way you would use "Saving Multiple Root Objects" ( http://www.lhotka.net/cslanet/faq/(S(rm1rki45kyfvdk55hcxgjoj5))/SaveMultipleRootObjects.ashx ) you can Load multiple root object istead of saving them.<br /><br />Jimmy</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Saturday, April 25, 2009</h2>I think that even with good object modeling, you can easily envision<br />scenarios where it is more efficient to retrieve multiple root objects in a<br />single call to the app server.<br /><br />There's another thread running now about use case "controller" objects (or<br />something like that) - which is really along this same line.<br /><br />And using a ReadOnlyBase or Command object to go retrieve a set of root<br />objects is a fine thing in that case - I really don't know that it breaks<br />the object model as long as this "retriever object" has exactly one<br />responsibility: to retrieve these other objects.<br /><br />Rocky</div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
