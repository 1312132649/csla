<html><header><title>Is It Possible with CSLA?</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Is It Possible with CSLA?</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/2938.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>SimpleCSLA posted on Wednesday, May 23, 2007</h2>I just received my Expert VB 2005 Business Objects book yesterday.&nbsp; After downloading CSLA Project Tracker and continuously getting a DataPortal.Fetch error, then reading dozens of such problems on this web site, I (we) have literally wasted 2 full days trying to get the program running.&nbsp; <br><br>So here's my question - is this framework worth the hassle?&nbsp; I'm being 100% serious - do you guys really read the entire book before trying to install the sample web or did it just work when you installed it?&nbsp; We've got 15 programmers here and three of us are trying to figure out why we keep getting DataPortal.Fetch errors.&nbsp; We've installed the EnterpriseServicesHostvb.dll, but it seems that the dozens of errors people have received have numerous possible solutions.<br><br>The other 12 programmers are just snickering saying "We told you CSLA was too complicated?", but I can't imagine it is.&nbsp; There has too be something dumb I'm missing.&nbsp; I've gone through Chapter 12, but everything seems fine.<br><br>If its of any help I think the section in the web.config &lt;add key="CslaAuthentication" value="CSLA"/&gt;, has something to do with the problem.&nbsp; It keeps returning the IDENTITY.IsAuthorized=False,&nbsp; but I can't figure out why.&nbsp; Changing the value to "Windows" only gives me an error on the line "Return svc.Fetch(objectType, criteria, context)" in EnterpriseServicesProxy.vb.<br><br>Sorry for my EXTREME frustration.<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Michael Hildner replied on Wednesday, May 23, 2007</h2>Did you check out the InnerException of your DataPortalException? That will give you some details.</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Brian Criswell replied on Wednesday, May 23, 2007</h2>First, hands down CSLA is worth the hassle.&nbsp; End of story.<br><br>Second, there are a few things you should be aware of:<br><ul><li>As with any framework, there is a learning curve.&nbsp; CSLA encompasses app/server, authentication, authorization, validation and more, so the curve is a bit steep, but when you learn the stuff (a few weeks of spare time for me), you know pretty much all there is.</li><li>Because of the way the DataPortal works, you need to create your object graphs so that there is a single root object in an fetch/insert/update scenario, as that object becomes the entrypoint into the DataPortal and all of the child objects hang off of that single root object.</li><li>The previous item means that you must make objects that fit your use cases not your data.&nbsp; A classic example would be that your application allows an administrator to select users and edit them.&nbsp; Many who start with CSLA make the mistake of creating a list of users (UserList of User) and allow the administrator to select one of the User objects and edit it.&nbsp; But everything works much better if you have a UserInfoList of UserInfo objects to select the a user.&nbsp; UserInfo has just enough information to select a User from a list (Id and Name).&nbsp; There would then be a User object that handled the edit user use case.</li></ul>Third, a few of the benefits:<br><ul><li>Because CSLA handles, authentication, authorization, etc., the business object programmer is able to focus on just the behaviour that makes that object unique.&nbsp; There are simple and specific entrypoints into the plumming code that CSLA provides.</li><li>Even though you find yourself making more objects, this does not require too much extra initial time and means your are making more maintainable code.&nbsp; <i>Object Thinking</i> by Dave West gives some good insight into breaking objects down by behaviour instead of by data.&nbsp; This does mean a shift in thinking about OOP for most people, but it does mean that they usually end up being better programmers.&nbsp; On the other hand, some people refuse to alter their thinking and then find that parts of CSLA just will not work for them.<br></li><li>Your objects are very usable by other developers (such as UI developers).&nbsp; I have had people say some of my objects look over-engineered because of the validation rules and entrypoints into the CSLA base classes, but I am then able to work with the objects in ways that the other programmers are only able to dream of (app/server, instant sorting and filtering, UIs that react to the object's status, and more).</li><li>A vibrant user community that has a very low signal to noise ratio.&nbsp; People who were newbies a few months ago are already helping the new newbies, and Rocky himself answers a lot of people's questions and gives practical advice.<br></li></ul>Your specific problem could be many things from a missing option in a config file to missing permissions in the database.&nbsp; The exception thrown has a BusinessException property on it that will tell you what exception occured within the DataPortal.&nbsp; When you get that exception, if you cannot figure it out yourself, post it on the boards here and someone should be able to quickly help you out.<br><br>Also, if you have any other questions about the framework, ask them and we will answer.<br><br>Also, what version of the framework are you using?<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>xal replied on Wednesday, May 23, 2007</h2>So, I gather you're trying to run the Project tracker. I see that you're having trouble with the enterprise services host. Do you really intend to use Enterprise Services?<br>If the answer is no, then take a look at the app.config and comment out the enterprise services part.<br>Enterprise services can be a pain to configure, but if you just want to get familiarized with the framework, you don't really need enterprise services or remoting.<br>In that case, comment out anything in the web config that defines a dataportal proxy and a dataportal url. Just having the connection strings in the app config will have csla use a simple portal that connects directly to the db.<br><br>Once you're comfortable with csla you can test other setups like remoting, which is the most common for client server setups.<br><br>I hope that helps.<br><br>Andrés<br><br><br>PS: Yes, it's is really worth it. (but I'm biased) :D<br>PPS: Also, once you're more comfortable with csla, you can take a look at <a href="http://groups.google.com/group/CslaGenerator">this</a>.<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>xal replied on Wednesday, May 23, 2007</h2>Also, here's a guide to setting up the project tracker:<br>http://www.lhotka.net/files/csla20/BuildCsla.pdf<br><br>Andrés<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>SimpleCSLA replied on Thursday, May 24, 2007</h2>The error I keep receiving is:<br><br><b>DataPortal.Fetch failed (System.NullReferenceException: Object reference not set to an instance of an object.at ProjectTracker.Library.Database.get_SecurityConnection() in <br>C:\CSLA_214\csla20vb\ProjectTracker20vb\ProjectTracker.Library\Database.vb:line 13 at ProjectTracker.Library.Security.PTIdentity.DataPortal_Fetch(Criteria criteria) in <br>C:\CSLA_214\csla20vb\ProjectTracker20vb\ProjectTracker.Library\Security\PTIdentity.vb:line 110)<br><br></b>I put a break point on Line 13 in the Database.vb class, but it never stops.&nbsp; <br><br>I've read through Chapter 4 where Lhotka recommends using the LocalProxy, but I don't know on his Project Tracker program where to set it to use LocalProxy (maybe it already is).<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Thursday, May 24, 2007</h2>Are you trying the WinForms application or the asp.net one?&nbsp; If its WinForms, check the App.Config file.&nbsp; Otherwise, check the Web.config file.<br><br>there are a few things to look for in those files.&nbsp; One would be anything DataPortal settings Andres (Xal) has already discussed.&nbsp; The other is the database connection strings.&nbsp; I THINK that Rocky has things setup for Sql Server Express, where you specify a file path to the .mdb file and SSE will create a User Instance.&nbsp; Basicaly an instance that only exists for the user while the app is running.<br><br>If you're not on Sql Express, you should 1) Attach the mdb file to your running Sql Server instance and 2) change the connection strings appropriately.<br><br>Note that there are TWO databases; a Security database and a PTracker database.&nbsp; You'll need to attach and change the connection strings for BOTH to get the sample working.<br><br>HTH<br>Andy<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>dlambert replied on Thursday, May 24, 2007</h2>Any time you build an application from scratch, it's easier to start with "Hello, world", and build only what you need when you need it.&nbsp; That will last until the application reaches a size where the complexity you've built starts to become your own worst enemy.&nbsp; <br><br>At that point, if you examine what you've built, you'll begin to realize that the stuff you've constructed covers a portion of the functionality in a framework like CSLA, only it doesn't work quite right.&nbsp; I can say this with some confidence because I've found myself in this position a couple of times.&nbsp; <br><br>The real value of this kind of framework comes over the course of a project when you'd normally reach inflection points where things break for no apparent reason and massive hunks of the system must then be refactored.&nbsp; That's less likely in a framework-built application because the structure of the framework helps channel development in "healthy" directions.<br><br>You can also see value in a framework like this when it's used across multiple applications in an enterprise becuase the learning curve for a new developer is compressed.&nbsp; Learn one framework, and you're well on your way to understanding multiple systems.&nbsp; Based on your original post, I think this could be the case for you.<br><br>Just a word of caution:&nbsp; If you're facing a room filled with nay-sayers, you could be in for a tough battle.&nbsp; That sort of mob mentality has a way of latching onto any excuse, real or imagined, in order to get its way.&nbsp; Keep an&nbsp; eye on the political aspects of this evaluation in addition to the factual aspects.<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>SimpleCSLA replied on Thursday, May 24, 2007</h2>Thanks for the help.&nbsp; In another thread Rocky gave me some tips and I turned off EnterpriseServicesVB.dll, and ran the data locally via my own SQL 2005 dbase.<br><br>I am now in a position to write some basic code and argue for using CSLA (assuming I like it, which I probably will).&nbsp; Later I can attempt to get remoting to work, but for now all is well.<br><br>For those who care, the solution was to comment out the EnterpriseServices call in web.config.&nbsp; Once that is gone, Database.vb looks at the connection string.&nbsp; Once the connection string is right, it works.&nbsp; I couldn't get this to work with SQLExpress, but 2005 caused no issues.<br><br>Thanks again.&nbsp;&nbsp;  <br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>DansDreams replied on Thursday, May 24, 2007</h2><P>All frameworks are complicated inside by definition.&nbsp;&nbsp; The only way they provide value is hiding the complication.&nbsp; </P>
<P>That's true of the .NET framework as well, of course.&nbsp; Who wants to go back to manipulating strings the C++ way?!&nbsp; You could argue it was decidedly "simpler", but it was way more difficult overall in the long run.</P>
<P>I've found that a new developer can be productive working on my enterprise application with almost zero understanding of CSLA.&nbsp; In fact, they can use copy and search/replace and create a new fully-functional robust business object in short order.</P>
<P>Precisely the point of the framework in the first place, IMO.&nbsp; It's&nbsp;why there is an Enterprise Library from Microsoft.</P>
<P>So, yes, you could do that too, starting with the ProjectTracker sample application.&nbsp; No, you don't really have to read the book to use CSLA.&nbsp; But somebody in your organization with the architect role/responsibility should.&nbsp; Many people that start pushing CSLA end up wanting to change or add behavior, and you do need some level of understanding for that, of course.</P></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
