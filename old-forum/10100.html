<html><header><title>CSLA 3.8 - Fetch Not Allowed ???</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>CSLA 3.8 - Fetch Not Allowed ???</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/10100.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>Q Johnson posted on Wednesday, February 23, 2011</h2><p>I&#39;m trying to load a Dynamic List and when the Shared Factory method tries the call to Fetch, an exception is raised saying Fetch Not Allowed.&nbsp; I&#39;m using a nested criteria class and the constructor fired just fine and all the properties are set appropriately.&nbsp; The very brief code in the DynList executed, too (AllowNew = True).</p>
<p>In the stack trace I see:&nbsp; Csla.EditableRootListBase`1.DataPortal_Fetch(Object criteria)</p>
<p>Here&#39;s all the details offered, below.&nbsp; I can&#39;t help but wonder if there&#39;s a typo in CSLA code that generated the odd character between the e in Base and the 1, just before .DataPortal.&nbsp; Any thoughts?</p>
<p>&nbsp;</p>
<p><span style="font-size:xx-small;">Csla.DataPortalException was unhandled<br />&nbsp; Message=&quot;DataPortal.Fetch failed (Invalid operation - fetch not allowed)&quot;<br />&nbsp; Source=&quot;Csla&quot;<br />&nbsp; StackTrace:<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at Csla.EditableRootListBase`1.DataPortal_Fetch(Object criteria)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at dm(Object , Object[] )<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at Csla.Reflection.MethodCaller.CallMethod(Object obj, DynamicMethodHandle methodHandle, Object[] parameters)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at Csla.Reflection.MethodCaller.CallMethod(Object obj, DynamicMethodHandle methodHandle, Object[] parameters)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at Csla.Reflection.MethodCaller.CallMethod(Object obj, String method, Object[] parameters)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at Csla.Reflection.LateBoundObject.CallMethod(String method, Object[] parameters)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at Csla.Server.SimpleDataPortal.Fetch(Type objectType, Object criteria, DataPortalContext context)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at Csla.DataPortal.Fetch(Type objectType, Object criteria)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at Csla.DataPortal.Fetch[T](Object criteria)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at KyStartRptLibrary.RptDetailRecordList.GetRecordDetail(String pstrServerName, String pstrDBName, DateTime pdtmBegin, DateTime pdtmEnd, Double pdblIRSLimit) in C:\VS2008_Solutions\KyStartRpt\KyStartRptLibrary\Collections\RptDetailRecordList.vb:line 334<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at KyStartRptUI.BuildReportFile.btnReportData_Click(Object sender, EventArgs e) in C:\VS2008_Solutions\KyStartRpt\KyStartRptUI\BuildReportFile.vb:line 110<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at System.Windows.Forms.Control.OnClick(EventArgs e)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at DevExpress.XtraEditors.BaseButton.OnClick(EventArgs e)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at DevExpress.XtraEditors.BaseButton.OnKeyUp(KeyEventArgs e)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at System.Windows.Forms.Control.ProcessKeyEventArgs(Message&amp; m)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at System.Windows.Forms.Control.WmKeyChar(Message&amp; m)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at System.Windows.Forms.Control.WndProc(Message&amp; m)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at DevExpress.Utils.Controls.ControlBase.WndProc(Message&amp; m)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at System.Windows.Forms.Control.ControlNativeWindow.WndProc(Message&amp; m)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at System.Windows.Forms.NativeWindow.DebuggableCallback(IntPtr hWnd, Int32 msg, IntPtr wparam, IntPtr lparam)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at System.Windows.Forms.UnsafeNativeMethods.DispatchMessageW(MSG&amp; msg)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at System.Windows.Forms.Application.ComponentManager.System.Windows.Forms.UnsafeNativeMethods.IMsoComponentManager.FPushMessageLoop(Int32 dwComponentID, Int32 reason, Int32 pvLoopData)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at System.Windows.Forms.Application.ThreadContext.RunMessageLoopInner(Int32 reason, ApplicationContext context)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at System.Windows.Forms.Application.ThreadContext.RunMessageLoop(Int32 reason, ApplicationContext context)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at KyStartRptUI.TeamNFPCoreMod.Main() in C:\VS2008_Solutions\KyStartRpt\KyStartRptUI\TeamNFPCoreMod.vb:line 28<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at System.AppDomain._nExecuteAssembly(Assembly assembly, String[] args)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at System.Threading.ThreadHelper.ThreadStart()<br />&nbsp; InnerException: Csla.Reflection.CallMethodException<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Message=&quot;DataPortal_Fetch method call failed&quot;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Source=&quot;Csla&quot;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; StackTrace:<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at Csla.EditableRootListBase`1.DataPortal_Fetch(Object criteria)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at dm(Object , Object[] )<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at Csla.Reflection.MethodCaller.CallMethod(Object obj, DynamicMethodHandle methodHandle, Object[] parameters)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at Csla.Reflection.MethodCaller.CallMethod(Object obj, DynamicMethodHandle methodHandle, Object[] parameters)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at Csla.Reflection.MethodCaller.CallMethod(Object obj, String method, Object[] parameters)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at Csla.Reflection.LateBoundObject.CallMethod(String method, Object[] parameters)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at Csla.Server.SimpleDataPortal.Fetch(Type objectType, Object criteria, DataPortalContext context)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; InnerException: System.NotSupportedException<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Message=&quot;Invalid operation - fetch not allowed&quot;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Source=&quot;Csla&quot;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; StackTrace:<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at <span style="text-decoration:underline;">Csla.EditableRootListBase`1.DataPortal_Fetch(Object criteria</span>)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at dm(Object , Object[] )<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at Csla.Reflection.MethodCaller.CallMethod(Object obj, DynamicMethodHandle methodHandle, Object[] parameters)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; InnerException: <br /></span><span style="font-size:xx-small;">
<p>&nbsp;</p>
</span></p></div><div style='padding:0 15 3 15;background-color:lightgreen'><h2>RockfordLhotka replied on Wednesday, February 23, 2011</h2><p>It sounds like the data portal can&#39;t find a matching overload for your criteria type, so it is falling back to the base implementation that accepts an object parameter, and that base implementation throws this exception.</p>
<p>Make sure you have a DataPortal_Fetch overload that accepts the correct criteria parameter type.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Q Johnson replied on Friday, February 25, 2011</h2><p>That was it, exactly.&nbsp; (of course &lt;g&gt;)</p>
<p>Thanks!</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ntimothys replied on Thursday, September 20, 2012</h2><p>Had the same problem on my very first project - turned out I to be a typo of the Dataportal_Fetch method</p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
