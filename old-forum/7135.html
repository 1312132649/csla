<html><header><title>Business Objects and Serialization with NetDataContractSerializer</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Business Objects and Serialization with NetDataContractSerializer</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/7135.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>Cristina Lopez Perera posted on Thursday, June 18, 2009</h2><P class=MsoNormal><SPAN><FONT face=Arial><FONT color=#000000>I’m developing an application in C#3.5 that uses WCF.<o:p></o:p></FONT></FONT></SPAN></P>
<P class=MsoNormal><SPAN><FONT face=Arial><FONT color=#000000>I have had many issues dealing with the serialization of the objects in the communication.<o:p></o:p></FONT></FONT></SPAN></P>
<P class=MsoNormal><SPAN><FONT face=Arial><FONT color=#000000>Taking the codes of CSLA as a good dessign pattern, I discovered that I should use NetDataContractSerializer instead of the default XmlObjectSerializer that doesn’t keep references.<o:p></o:p></FONT></FONT></SPAN></P>
<P class=MsoNormal><SPAN><FONT face=Arial><FONT color=#000000>Now, when passing arguments in the WCF calls, I’m getting the exception “<EM>MyCollection is an invalid collection type since it does not have a default constructor</EM>”<o:p></o:p></FONT></FONT></SPAN></P>
<P class=MsoNormal><SPAN><FONT face=Arial><FONT color=#000000>Reading the book Expert VB 2008 Bussiness Objects, page 165, Non-Public Default Constructor topic, it says that <STRONG>every business object should have a default constructor</STRONG>, even if it is not for public use.<o:p></o:p></FONT></FONT></SPAN></P>
<P class=MsoNormal><SPAN><FONT face=Arial><FONT color=#000000>Here is the question:<o:p></o:p></FONT></FONT></SPAN></P>
<P class=MsoNormal><SPAN><STRONG><FONT face=Arial><FONT color=#000000>The reason Lhotka says every business object need to have a default constructor is because WCF and the issues I’m having when serializing with the NetDataContractSerializer? Or there is another reason?<o:p></o:p></FONT></FONT></STRONG></SPAN></P>
<P class=MsoNormal><SPAN><FONT face=Arial><FONT color=#000000>I want to be sure that I’m designing correctly and the dummies private default constructors are really needed.<o:p></o:p></FONT></FONT></SPAN></P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JonnyBee replied on Thursday, June 18, 2009</h2>Hi,<br><br>A public class with a default constructor (ie no constructor in your class code) gets a public default constructor by the compiler. If you create a constructor with parameters you will not get a default constructor. <br><br>Using CSLA you typically want the consumers of your BOs to get instances by using static methods (New.../Get...) and thus hide the constructors of your classes. And hiding the constructor means that you must have a private parameterless constructor in your classes. <br><br>This is NOT a requirement because of WCF. <br><br>/jonnybee<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Cristina Lopez Perera replied on Friday, June 19, 2009</h2><P class=MsoNormal><FONT face=Calibri>I don’t want the consumers to use my constructors, but the static methods, that’s right. But that doesn’t mean I need to have private parameterless constructor. In some cases I have private constructors with parameters, that are invoked by the static methods. </FONT></P>
<P class=MsoNormal><FONT face=Calibri>My question: is why the parameterless constructor is needed?</FONT></P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Saturday, June 20, 2009</h2><P>The CSLA .NET data portal requires a parameterless constructor, because the data portal creates instances of your object.</P>
<P>If you don't want that constraint (and you aren't using Silverlight), I think you can use the object factory model with the data portal - in which case the data portal doesn't create your objects - you do. In that model I <EM>think</EM> (but don't know for sure) that you could skip having a default ctor.</P>
<P>I don't think the WCF NDCS requires a default ctor. It uses the one the compiler spits when you mark the class as [Serializable]. It might be that [DataContract] would require a default ctor.</P></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
