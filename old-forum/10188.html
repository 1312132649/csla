<html><header><title>Best way to Trigger Validation on Entire Object Graph?</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Best way to Trigger Validation on Entire Object Graph?</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/10188.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>mosgath posted on Tuesday, March 22, 2011</h2><p>In our object design we have Header - &gt; Lines -&gt; Line -&gt; Material.&nbsp; When data changes on Header, the Line and Material need to have validation rules reran to recalculate pricing options and validate other items validated on selections from the header.&nbsp;&nbsp;The BusinessRules.CheckRules() is only validate the current object&#39;s rules, not the&nbsp;children or grandchildren, etc.&nbsp;&nbsp; What is the best way to trigger the rules in child based on data in the parent?&nbsp; </p>
<p>We are using CSLA 4.1 with a Silverlight client and have rules that are both Asynchronous and Synchronous at all levels.</p></div><div style='padding:0 15 3 15;background-color:lightgreen'><h2>ajj3085 replied on Tuesday, March 22, 2011</h2><p>Create internal instance methods on your child classes, which the parent class can call.&nbsp; For collections, these should loop through the collection calling this same method on the items in the collection.&nbsp; The method can just call check rules on itself.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>mosgath replied on Monday, March 28, 2011</h2><p>Thanks Andy.&nbsp; That is what I figured, but wanted to make sure there wasn&#39;t a better way.&nbsp; Since our object model consists of many children on the parent, I separated it a little and created the separate&nbsp;CheckRules by child and a master function that I could check the current object rules and the children rules.&nbsp; Then in the Child objects, I included similar functions for their children.&nbsp; We also had the requirement that&nbsp;one of the properties needed to recheck all children rules while another only needed to check one of the children. I then created Business Rules to call&nbsp;the appropriate function.</p>
<p>internal void CheckRules(Boolean checkSelf)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (checkSelf)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; { this.BusinessRules.CheckRules(); }</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; CheckChild1Rules();<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; CheckChild2Rules();<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; CheckChild3Rules();<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; internal void CheckChild1Rules()<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (this.Child1 != null)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; this.Child1.CheckRules(true);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; internal void CheckChild2Rules()<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (this.Child2 != null)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; this.Child2.CheckRules(true);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; internal void CheckChild3Rules()<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (this.Child3 != null)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; this.Child3.CheckRules(true);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
