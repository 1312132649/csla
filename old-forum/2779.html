<html><header><title>RowGuid as primary key</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>RowGuid as primary key</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/2779.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>Cslah posted on Wednesday, April 25, 2007</h2><P><FONT face="Courier New"><FONT face="Courier New">I'm developing on SQL Server 2005 and our database needs to be 'replication-capable'. To do this we have added a Guid column, with a uniqueidentifier type and marking the RowGuid column property to True. We also have an integer ID column marked as the primary key.</FONT></FONT></P>
<P><FONT face="Courier New"><FONT face="Courier New">My question is if I should make this rowguid column the primary key in the tables in our database and get rid of the integer primary key. Will it make any difference on the speed of the indexes or anything? We have to have this thing there anyways so the argument against it because it causes bloat is not valid. I would think that since we've got this RowGuid there, and it's unique, we might as well use it for the index. I searched on google and couldn't find anything that said it's a performance hit. Our tables aren't going to have millions (let alone tens of thousands) of records.</FONT></FONT></P>
<P><FONT face="Courier New"><FONT face="Courier New">Any comments on this?</FONT></FONT></P>
<P><FONT face="Courier New"><FONT face="Courier New"><BR>B</FONT></P></FONT><FONT face="Courier New"></FONT></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Bayu replied on Thursday, April 26, 2007</h2>Funny question actually,<br><br>You moved from integer primary keys to Guid primary keys because you could not ensure uniqueness of the integers across replicated tables.<br><br>And now you ask if you would need to keep the integer primary key .....!? :D<br><br>You answered your own question already I believe. ;-)<br><br><br>In case of replicated tables you cannot ensure unique integers. So in fact it CANNOT even be a primary key any more. You would have to get rid of the primary key constraint anyways, and when you have done that you will be left with an integer column that is of no use whatsoever. <br><br>Hence, imo: ditch it! ;-)<br><br>Regards,<br>Bayu<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>xal replied on Thursday, April 26, 2007</h2>Here's a good article that talks about performance and shows some test results:<br><br>http://www.informit.com/articles/article.asp?p=25862&amp;seqNum=1&amp;rl=1<br><br>Andr√©s<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Thursday, April 26, 2007</h2>It will impact peformance somewhat, if you do not use what is called a sequencial guid.&nbsp; For a replication scenario though, I would avoid such guids, because I'm not sure how the generation of the SG affects the chance of a collision.&nbsp; <br><br>You can add a repl_id column, which contains straight guids to use for replication only.&nbsp; That's probably your best bet, and the least amount of work.<br><br>HTH<br>Andy<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Cslah replied on Thursday, April 26, 2007</h2><P>Thanks everyone.&nbsp;</P>
<P>I haven't actually removed the integer primary key yet and have both it and the RowGuid column (which is only there for, and marked&nbsp;for, replication) in my DB. I was just pondering if it makes sense to combine them.<BR><BR>I posted this question on the sql server replication newsgroup also. It seems that SQL Server takes care of your integers colliding when replicating different databases. For example, on two different databases that are replicated, if you create a new item on&nbsp;each one, the PK is 1 on each record in both databases, but the data is different. Replication somehow will resolve this using the RowGuid column and probably a combination of the int primary key.</P>
<P>Thanks for the responses.</P>
<P>Brian</P></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
