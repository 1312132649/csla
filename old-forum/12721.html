<html><header><title>Authorization rule on Null value property</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Authorization rule on Null value property</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/12721.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>jteneglio posted on Thursday, August 14, 2014</h2><p>Again I may be doing something wrong but is it normal that an authorization rule on a property that is NULL does not work? &nbsp; and I soon as you put something in the property it triggers?</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JonnyBee replied on Thursday, August 14, 2014</h2><p>Hi,&nbsp;</p>
<p>The built-in authorization rules does NOT inspect the value - only looks at the ApplicationContext.User.IsInRole.</p>
<p>So is that a custom authorization rule?&nbsp;</p>
<p>The Authz rule for AuthorizationActions.CanWriteProperty should be triggered on first attempt to set the property value.<br />The BuiltIn rules will instruct the object to cache the result and so the rule will not be called on later SetProperty calls for that property.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>jteneglio replied on Friday, August 15, 2014</h2><p>I should have added that this happens in the UI a XAML WinRT UI using a propertyInfo</p>
<p>&lt;TextBox Text=&quot;Some Ttext&quot;&nbsp;IsEnabled=&quot;{Binding CanWrite, ElementName=ObjectPropertytPropertyInfo}&quot;&gt;</p>
<p>&nbsp;&lt;csla:PropertyInfo x:Name=&quot;ObjectPropertyPropertyInfo&quot; Property=&quot;{Binding Object.Property}&quot; /&gt;</p>
<p>&nbsp;</p>
<p>This seems to not work when the Object.Property is null</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>jteneglio replied on Tuesday, August 19, 2014</h2><p>and to answer your question Yes it is a custom authorization rule based on some property of the object, The property that I&#39;m using for the CanWriteProperty is actually Null.</p>
<p>It seems that when Object1.Property1 = null the CanWriteProperty(Propert1property) does not fire since the property1 is null</p>
<p>&nbsp;</p>
<p>Am I understanding it right?</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Wednesday, August 20, 2014</h2><p>Csla will only run rules if the property value has changed from its current value;&nbsp; its smart enough to know that if the property is already null and you try setting it to null again not to do anything (since the state isn&#39;t actually changing), so in your case I wouldn&#39;t expect the rule to fire.&nbsp; If you need to check to see if you can write to the property you can use CanWriteProperty.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>jteneglio replied on Wednesday, August 20, 2014</h2><p>Right, that&#39;s what I understand, but it seems to NOT fire at all when the property the Authorization Rule is based on.&nbsp; anyone experiencing this?</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Friday, August 22, 2014</h2><p>I would like Johnny or Rocky to confirm this, but I think the result of the CanWriteProperty evaluation is cached by Csla.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>jteneglio replied on Friday, August 22, 2014</h2><p>After some tests I narrowed it down to WinRT XAML&nbsp;</p>
<p>&lt;TextBox Text=&quot;Some Ttext&quot;&nbsp;IsEnabled=&quot;{Binding CanWrite, ElementName=ObjectPropertytPropertyInfo}&quot;&gt;<br /> &lt;csla:PropertyInfo x:Name=&quot;ObjectPropertyPropertyInfo&quot; Property=&quot;{Binding Object.Property}&quot; /&gt;</p>
<p>&nbsp;When Object.Property &nbsp;is null this thing does not get fired from the UI</p>
<p>&nbsp;</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>mbblum replied on Friday, August 22, 2014</h2><p>The ElementName&nbsp;has a typo, extra &#39;t&#39; in ObjectPropertytPropertyInfo. If in actual xaml, i.e. not just error in post,&nbsp;may cause issues. Wouldn&#39;t expect what you describe, but never know.</p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
