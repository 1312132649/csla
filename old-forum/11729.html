<html><header><title>Help with database in CSLA MVC sample project </title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Help with database in CSLA MVC sample project </h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/11729.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>Aravinda posted on Wednesday, November 28, 2012</h2><p>Hi,<br />&nbsp;&nbsp; I have downloaded project trackaer sample application(CSLA MV sample proect). Earlier, I had it installed on Windows 7 home premium machine(32 bit) with SQL Server 2008 express edition.<br />I could not attach/open ptracker.mdf(I was getting the error shown below). So, I installed SQL Server 2008 R2 Express. Then I was able to attach/open ptracker.mdf database. Now I have changed my machine to Windows 7 64 bit professional.<br />Now, no matter which SQL Server edition I install, I am getting the same old error. See the details below. I have also included SQL server version details which I got from Help--&gt;About menu.<br />Please help. </p>
<p>Thanks,<br />-Aravinda</p>
<p>&nbsp;</p>
<p>ADDITIONAL INFORMATION:<br />An exception occurred while executing a Transact-SQL statement or batch. (Microsoft.SqlServer.ConnectionInfo)<br />------------------------------<br />The database &#39;C:\VISUAL STUDIO PROJECTS\CSLA\40\SAMPLES\NET\CS\PROJECTTRACKER\WCFAPPSERVER\APP_DATA\PTRACKER.MDF&#39; cannot be opened because it is version 661. This server supports version 655 and earlier. A downgrade path is not supported.<br />Could not open new database &#39;C:\VISUAL STUDIO PROJECTS\CSLA\40\SAMPLES\NET\CS\PROJECTTRACKER\WCFAPPSERVER\APP_DATA\PTRACKER.MDF&#39;. CREATE DATABASE is aborted. (Microsoft SQL Server, Error: 948)<br />&nbsp;<br />Sql Server version<br />Microsoft SQL Server Management Studio&nbsp; 10.50.4000.0<br />Microsoft Data Access Components (MDAC)&nbsp; 6.1.7601.17514<br />Microsoft MSXML&nbsp;&nbsp;&nbsp;&nbsp; 3.0 4.0 6.0 <br />Microsoft Internet Explorer&nbsp;&nbsp; 9.0.8112.16421<br />Microsoft .NET Framework&nbsp;&nbsp; 2.0.50727.5466<br />Operating System&nbsp;&nbsp;&nbsp; 6.1.7601</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JonnyBee replied on Wednesday, November 28, 2012</h2><p>Version 661 is SqlServer 2008 R2 and 655 is SqlServer 2008. </p>
<p>You may have more than one instance of SqlServer Express on your computer. Please make sure to use the R2 instance.Or if you did an update the SqlServer express may not have been updated correctly.</p>
<p>Another option is to download an older version of the PTracker samples databases and replace the ones in your sample folder. </p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Aravinda replied on Wednesday, November 28, 2012</h2><p>Jonny,</p>
<p>&nbsp;Thank you for your reply. I did further investigation to check if there areany other versions of SQL Server in my machine while I had uninstalled SQL Server 2008. I found some registry entries and there was no SQl Server installed. I followed the following steps</p>
<p>1. Uninstalled SQl Server<br />2. Removed nodes for SQL Server registry entries (I think 3 of them SQLExpress, MSSQLServer.. )<br />3. Reinstalled SQL Server 2008 R2 Express with SP2<br />4. I could now attach the data base from SQl Server. But could not connect via Visual Studio 2010. I got the following error:</p>
<p><strong>Failed to generate a user instance of sql server due to failure in starting the process for the user instance. The connection will be closed.</strong><br /><br />5. I followed instructions from&nbsp;<a href="http://social.msdn.microsoft.com/Forums/en-US/sqldatabaseengine/thread/06b101fd-38c9-42ce-a4d8-29b914efd9c8/">this</a> site to delete content from %localAppData% folder<br />6. Eevrything worked fine after restarting the machine</p>
<p>&nbsp;</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>tiago replied on Thursday, November 29, 2012</h2><p>Hi Aravinda,</p>
<p><div style='padding-left: 50px;background-color:silver'><b>Aravinda<br></b><strong>Failed to generate a user instance of sql server due to failure in starting the process for the user instance. The connection will be closed.</strong><br /><br /></div></p>
<p><a href="http://social.msdn.microsoft.com/forums/en-US/sqldatabaseengine/thread/88def9dd-5bf7-4156-b416-6db1c6752d48/">http://social.msdn.microsoft.com/forums/en-US/sqldatabaseengine/thread/88def9dd-5bf7-4156-b416-6db1c6752d48/</a></p>
<p>1) Open SQL Management Studio<br />2) On a new query editor window type exec sp_configure &#39;user instances enabled&#39;, 1. <br />3) Then type: Reconfigure.<br />4) Then restart the SQL Server database.</p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
