<html><header><title>Reloading a property</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Reloading a property</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/7505.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>rfcdejong posted on Monday, August 24, 2009</h2>For us it's very common to reload a property (child list), we didn't find a clear way reloading a property. I couldn't find FieldManager.ClearField or FieldManager.ReloadField or FieldManager.DeleteField. Searching it into another corner: LoadProperty with null doesn't work and if it did it feels like an hack.<br /><br />What we currently do is having lazy loaded property's and let them reload based on a private bool.</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Monday, August 24, 2009</h2>Can you describe the scenario you are talking about, as I don't understand what you are trying to accomplish and why?</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>rfcdejong replied on Tuesday, August 25, 2009</h2><P><BLOCKQUOTE><div><img src="/Themes/default/images/icon-quote.gif"> <strong>RockfordLhotka:</strong></div><div>Can you describe the scenario you are talking about, as I don't understand what you are trying to accomplish and why?</div></BLOCKQUOTE></P>
<P>For example having an financial application where a customer is selecting the way he wants to pay:</P>
<P>In a field the customer has to select a type of payment, after selecting the paymenttype there is a "OnPropertyChange" event&nbsp;on the&nbsp;paymenttype property. <BR>When it's a specific paymenttype value then another (lazy loaded property) named banklist (with child bankinfolist bo) has to be reloaded since the paymenttype changed and it's dependend on it.<BR><BR>We'll have alot of property dependent lists where&nbsp;the values of a&nbsp;combobox has to be reloaded after selecting another value in another combobox. Where the other combobox value will be passed as criteria.<BR><BR>It would be very nice if the FieldManager.ClearField / RemoveField or something&nbsp;comes available in a future version.</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Wednesday, August 26, 2009</h2><P>I added this to the wish list</P>
<P><A href="http://www.lhotka.net/cslabugs/edit_bug.aspx?id=540">http://www.lhotka.net/cslabugs/edit_bug.aspx?id=540</A></P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>rfcdejong replied on Tuesday, January 05, 2010</h2>This is more and more becomming an hack for several of our developers. I might try to impliment this in our abstractionlayer but it'll require access to the fieldmanager's data. It would be alot easier to impliment this in csla, perhaps i'll modify csla code :)<br /><br />But until now i focussed on not modifying csla code so we've a low level of risk in upgrading to a new version.<br /><br />I see Issue ID 540 changed 49 days ago from priority "none" to priority "med". There are also several posts about refreshing on this forum, clearing a managed property so it can be reloaded is one step.</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Tuesday, January 05, 2010</h2>I've been reviewing the backlog over the past few weeks - consolidating and reprioritizing as I plan for CSLA 4. That's why the priority changed to medium - this is basically on the short list of things to do in CSLA 4.</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>rfcdejong replied on Monday, November 12, 2012</h2><p>Any update on this wish?<br /> It has been awhile and we have still the wish to make it possible to remove a field so it will be forced into reloading.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JonnyBee replied on Monday, November 12, 2012</h2><p>Hi,</p>
<p>I did look into this item and got into difficulties with the N-Level Undo - which requires access to the FieldInfo.</p>
<p>IE: The Undo would fail to reset the field if the Property backing field is null ==&gt; so for all practical purposes - you could only be allowed to call ClearField/RemoveField when EditLevel is 0.</p>
<p>I believe this would probably not solve your issues which would be when the object is DataBound. </p>
<p>One could argue that the BusinessRules will now allow you to create rules (CsLA 4.2 and later)&nbsp; that only runs on the client when the user edits/changes a value and that your app should rather look into a cache/run async call and set the appropriate list into the BO. This can be accomplished by setting : </p>
<ul>
<li>CanRunAsAffectedProperty = false</li>
<li>CanRunInCheckRules = false</li>
<li>CanRunonServer = false</li>
</ul>
<p>This is (IMO) a better solution than having a rule call ClearField/RemoveField and then databinding makes a new async load. </p>
<p>The other solution would be to add a new property to the FieldInfo to indicate that this fieldvalue is now Empty (which I am hesitant to do as it will add more payload to transfers and memory usage). </p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>rfcdejong replied on Monday, November 12, 2012</h2><p>My&nbsp;<span>colleagues are trying to avoid busines rules just to speed up or something, i don&#39;t know why. For such simple things it&#39;s often too easy just to define a private bool and read that bool in the getter if there is a refresh needed.</span></p>
<p>The idea of a generic rule might be worth a shot. I could create a client-only RefreshPropertyRule that executes the lazy loaded lambda assignment when CheckPropertyRules(MyListProperty) is being called.&nbsp;</p>
<p><br />PS: Is it possible to execute a specific rule? Not just any rule defined on the property..<br />Something like ExecuteRule(&quot;MyRefreshRule&quot;) or ExecuteRule(r =&gt; r.Name == &quot;MyRefreshRule&quot;)</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JonnyBee replied on Monday, November 12, 2012</h2><p>No, sorry.It really doesn&#39;t make any sense to the rule engine to offer that type of functionality. When a property is changed - all rules for that property must be rechecked in correct order (read Priority).</p>
<p>But as I wrote in the previous post - you can restrict rules from running in a certain context. </p>
<p>You should be able to write a general client side refresh rule with a lambda fetch assignment&nbsp; (but I haven&#39;t tried to do that myself) so please post if you are successful.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>rsbaker0 replied on Monday, August 24, 2009</h2>I have a similar scenario and LoadProperty with null works fine, at least as long as the child property is an object versus a value type. FieldManager.FieldExists will still return true, but the actual property value will be null. We reload on the next property Get if either of these conditions is true. </div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JonnyBee replied on Monday, August 24, 2009</h2>Hi, <br><br>We had the same requirement with a large customer object with lazy loaded properties (lists) that during a Save needs to remove/delete several managed field. <br><br>The purpose is to use only FieldManager.FieldExists(...) to determine whether field needs to lazyload or return existing object. <br><br>It would be nice to ha both <br>FieldManager.RemoveField(propertDesciptor)&nbsp;&nbsp;&nbsp; and<br>FieldManager.RemoveAllFields()<br><br>( I ended up making the changes to FieldManager in our internal version of Csla) <br><br>/jonnybee<br><br><br><br><br><br></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
