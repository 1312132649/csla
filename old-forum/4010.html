<html><header><title>NHibernate and Criteria not by ID</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>NHibernate and Criteria not by ID</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/4010.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>d3vil posted on Sunday, December 09, 2007</h2>hey,<br>I'm trying to use <span class="inlineLink">David Dilworth implemention using NH, but got stuck in a problem.<br>The implementation uses DataPortal_Fetch(object) to call session.Load(this, identifier); and fill the instance "from inside".<br><br>the problem is when I want to load a single object and i don't have it's id (I do have some other info about it). the only way to get a persist instance is to create a new one - and leave the current instance (which dataportal_fetch is currently executing on) - empty.<br><br>I can't use BusinessListBase.Get(...) because that will create the object in as child object of the list.<br><br>any suggestions?<br><br>d3vil<br></span></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>DavidDilworth replied on Wednesday, December 12, 2007</h2><P>I would suggest that your best choice would be to get the ID of the object.</P>
<P>How can you have other information about an object, but not its unique identifier?</P>
<P>Think objects, not data.</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>d3vil replied on Wednesday, December 12, 2007</h2>The current structure is unchangeable at the moment...<br><br>I have an unique id but its not its PK.<br><br>as its seems at the moment i shell load an object the just copy its fields to the object that originally created by the dataPortal.<br><br>d3vil<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>DavidDilworth replied on Thursday, December 13, 2007</h2><P>I'm sorry&nbsp;but I don't understand <img src="/emoticons/emotion-43.gif" alt="Confused [8-)]" />.</P>
<P>You are trying to load an individual Business Object.&nbsp;&nbsp; And this BO has a unique identifier.&nbsp; This is perhaps a guid?&nbsp; So you should be able to write standard CSLA-style code that does&nbsp;this.</P>
<P>Are you saying that the unique identifier (guid) is not the PK on the database table and therefore the NHibernate mapping does not work for you?&nbsp; And that actually some other column is the PK for that table.</P>
<P>If that is the case, then your Business Object should use the actual PK as the unique identifier instead of a guid.</P>
<P>The whole point of a unique identifier is that "it does what it says on the tin" - it uniquely identifies your BO.&nbsp; It can be a guid, an int identity, a string.&nbsp; It doesn't matter as long as it uniquely identifies the BO.</P>
<P>Or am I missing something here??</P>
<P>&nbsp;</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>d3vil replied on Thursday, December 13, 2007</h2>well i wish it was that simple :)<br><br>but the object has an id (long) that is it's PK (both DB and CSLA)<br>and i have an option (from business part) to load it according to another id (long) that it is unique in some scenarios.<br><br>to make it more visual:<br>i have an object called foo.<br>it has a unique id of type long and another column called OnlineFoo which is the Online Id of the Foo object (you can say its a FK).<br>the "Off-Line" and "Online" foo are the same class object and the off-line has the online Id<br>so i can get the off-line object using the online Id.<br><br>i know its sound very very stupid but this is the situation.<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>DavidDilworth replied on Friday, December 14, 2007</h2><P>So could you model it with two different BOs?&nbsp; It sounds like you have two different Use Cases: 1 for an OnlineFoo and 1 for an OfflineFoo.</P>
<P>By chance they share the same data from the same table, which is fine, but they are used in different places in your application.</P>
<P>Each BO can then have it's own unique identifier marked up as required.&nbsp; And you would then be able to load the OnlineFoo using the ID from the OfflineFoo.</P>
<P>Would that work?</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>d3vil replied on Friday, December 14, 2007</h2>well yes, this is how we do it.<br>but its only working from this direction - load online by offline<br>i sometimes need to load the offline using the online id (and the online has no reference to the offline id - e.g. offlineFoo(id: 1, online id:2) onlineFoo( id2, online:2) - this is how the system work right now.....<br><br><br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>DavidDilworth replied on Friday, December 14, 2007</h2><P>I think you need to think through your object model.&nbsp; </P>
<P>You load the Online BO using an Online unique identifier.<BR>You load the Offline BO using an Offline unique identifier.</P>
<P>What you can't do is load an Offline BO directly using an Online unique identifier.&nbsp; That doesn't really make sense for an individual BO.</P>
<P>Could you perhaps load the Online BO (using an Online unique identifier).&nbsp; Then get the Offline unique identifier from the Online BO, which would allow you to load the Offline BO?</P></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
