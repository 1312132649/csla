<html><header><title>Saving in windows form</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Saving in windows form</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/9964.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>ksavoie posted on Thursday, January 20, 2011</h2><p><span style="font-family:&#39;Arial&#39;,&#39;sans-serif&#39;;color:black;font-size:9pt;">Hi </span></p>
<p><span style="font-family:&#39;Arial&#39;,&#39;sans-serif&#39;;color:black;font-size:9pt;">We are using CSLA version 2.0 on .NET 2.0 VS2005.&nbsp; We notice something and we don&#39;t know if we are the only one that this happens to and if there&#39;s a fix for it.&nbsp; So here it is...</span></p>
<p><span style="font-family:&#39;Arial&#39;,&#39;sans-serif&#39;;color:black;font-size:9pt;">We build our Windows form no problem, we can fetch the information no problem.&nbsp; When we do a modification in a field, let&#39;s say a textbox, and we don&#39;t tab out of that field (i.e. the cursor is still in the textbox I just modified) and I click my save button, the modification I made in that particular textbox does not get save.&nbsp; But if I do tab out everything gets save.</span></p>
<p><span style="font-family:&#39;Arial&#39;,&#39;sans-serif&#39;;color:black;font-size:9pt;">This is getting a bit of a pain when I&#39;m testing.&nbsp; I have to make sure that I tab out of the field or click out of the field for the changes to be saved.</span></p>
<p><span style="font-family:&#39;Arial&#39;,&#39;sans-serif&#39;;color:black;font-size:9pt;">Is there a work around for this issue?</span></p>
<p><span style="font-family:&#39;Arial&#39;,&#39;sans-serif&#39;;color:black;font-size:9pt;">We <b style="mso-bidi-font-weight:normal;">don&#39;t</b> want to change to CSLA Version 3, because everything is working fine for now and we are too advanced in our project to switch now...&nbsp; We will be upgrading later on.</span></p>
<p><span style="font-family:&#39;Arial&#39;,&#39;sans-serif&#39;;color:black;font-size:9pt;">Thanks</span></p>
<p><span style="font-family:&#39;Arial&#39;,&#39;sans-serif&#39;;color:black;font-size:9pt;">Kat</span></p>
<p>&nbsp;</p></div><div style='padding:0 15 3 15;background-color:lightgreen'><h2>reagan123 replied on Thursday, January 20, 2011</h2><p>I&#39;m not sure if this is a Windows issue or a CSLA issue, but there is one thing you can maybe look at. &nbsp;What is the DataSourceUpdateMode on your Windows forms controls? &nbsp;Try changing them to &quot;OnPropertyChanged&quot; if that is not what they are set as to see if this helps.</p>
<p>Hopefully someone with more knowledge will come along to help, but I&#39;d look at this first.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JonnyBee replied on Thursday, January 20, 2011</h2><p>Verify that your Save button has &quot;CausesValidation&quot; set to True. </p>
<p>When databinding is set to use OnValidation (default) as updatemode then it is when you leave the input control <b>and </b>another control that has &quot;CausesValidation&quot; get focus that the value is actually written to the databound property. </p>
<p>You can read more about databinding in the <a href="http://www.windowsclient.net/Samples/Go%20To%20Market/Data%20Binding/DataBinding%20FAQ.doc">Databinding FAQ </a></p>
<p>&nbsp;</p></div><div style='padding:0 15 3 15;background-color:lightgreen'><h2>ajj3085 replied on Friday, January 21, 2011</h2><p><div style='padding-left: 50px;background-color:silver'><b>ksavoie<br></b><span style="FONT-FAMILY:&#39;Arial&#39;,&#39;sans-serif&#39;;COLOR:black;FONT-SIZE:9pt;">We <b style="mso-bidi-font-weight:normal;">don&#39;t</b> want to change to CSLA Version 3, because everything is working fine for now and we are too advanced in our project to switch now...&nbsp; We will be upgrading later on.</span></div></p>
<p>Just be aware that there are a lot of databinding fixes in the latest 3.x version of Csla.</p>
<p>That said, what you&#39;re seeing is normal.&nbsp; Clicking a toolbar button does NOT cause the focus to change.&nbsp; This is by design and a feature of the toolbar.&nbsp; A workaround which should help is calling Validate on your form before you try to save, and this should trigger the desired behavior.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ksavoie replied on Monday, January 24, 2011</h2><p>Will try that out for sure and get back to you</p>
<p>Thanks</p>
<p>Kat</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>lukky replied on Tuesday, January 25, 2011</h2><p>Kat,</p>
<p>Is your save button part of a toolbar ? If so, then it&#39;s a &quot;lightweight&quot; control that doesn&#39;t steal focus from the previous control, and as such doesn&#39;t trigger the validation on your TextBox. Been bitten by that one before.</p>
<p>As mentioned, make sure you call Validate() in your Save button&#39;s handler.</p>
<p>Cheers</p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
