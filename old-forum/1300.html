<html><header><title>Does/Can CSLA instantiate a parent's children objects automatically?</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Does/Can CSLA instantiate a parent's children objects automatically?</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/1300.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>luterguy posted on Thursday, September 21, 2006</h2><P>Does/Can CSLA instantiate a parent's children objects automatically? </P>
<P>I have an ASP.net form using a parent object with a child (not a collection- it is one-to-one). The form creates the parent object, however the child does not get instatitated. I have access to the child properties, however it balks when I try to set them (saying that their is no object). I have tried forcing the istantiation of the children both in the UI and within the parent (DataPortal_Create), however neither have been hugely successful. Does anyone have experience, advice, information, tips for this situation?</P>
<P>I currently don't want to roll the child into the parent, but that is a last ditch effort option.</P>
<P>Essentially I hoping to be able to instantiate a child whenever the Parent is instantiated. If you look at the DataPortal_<STRONG>Fetch</STRONG> and DataPortal_<STRONG>Update</STRONG> you will see that children are updated and fetched. However, on the DataPortal_<STRONG>Create</STRONG> the children are not created. </P>
<P>I first looked to instantiate the children in the DataPortal_Create (like Fetch and Update), however that seemed to cause issues. I also did try to instantiate them in the UI (which I would rather not do) with similar issues. I hoped that since I had access to the Parent's child properties that I could set them (it would automatically instantiate) and that the save/update would take care of the rest. This was not tha case.</P>
<P>I have used parents and children in the manner they are usually described in the book and in examples: A user (through the UI) selects add (collection) to add a child to the collection. This works fine. In this case I want the child to behave just like the parent (be instantiated when it is).</P>
<P>As I said I did try to force instantiate the childin the Parent's DataPortal_Create and in the UI (tried seperately) however I never had the success I had hoped for.&nbsp;&nbsp;I still am working on this to see if I can get it to work. However, I think I could use the help, experience of someone who has tried this before.</P>
<P>Does anyone have suggestions, input, advice?</P>
<P>Thanks in advance,<BR>luterguy</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Q Johnson replied on Thursday, September 21, 2006</h2>Have you tried doing it in the Parent's constructor?</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>skagen00 replied on Thursday, September 21, 2006</h2><P>Am I misunderstanding the question? </P>
<P>Isn't it just a matter of:</P>
<P>public class Parent : BusinessBase&lt;Parent&gt;</P>
<P>{</P>
<P>private Child _myChild = <STRONG>Child.NewChild();</STRONG></P>
<P>public Child MyChild</P>
<P>{</P>
<P>get { return _myChild; }</P>
<P>}</P>
<P>}</P>
<P>&nbsp;</P>
<P>&nbsp;</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JoeFallon1 replied on Thursday, September 21, 2006</h2><P>I agree. That is the way I have it set up in one of my BOs.</P>
<P>The only slight difference is that I have decide to skip the initialization in the private member variable and use the lazy loading pattern in the getter instead.</P>
<P>&nbsp;&nbsp;&nbsp;&nbsp;Get<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; If mChild Is Nothing Then<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; mChild = Child.NewChild ()<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; End If<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Return mChild&nbsp;<BR>&nbsp;&nbsp;&nbsp; End Get</P>
<P>It does not make any difference in this case.</P>
<P>But for collections which get Fetched it avoids creating them twice: once in the private variable initialization and once in the fetch.</P>
<P>Joe</P>
<P>&nbsp;</P>
<P>&nbsp;</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Friday, September 22, 2006</h2>That's valid, but I do it in the DataPortal_XXX methods, because even internally I use factory methods.<br><br><font color="#0000ff">protected override void</font> DataPortal_Create() {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; MyChild = <font color="#008000">ChildBO</font>.NewChild();<br>}<br><br><font color="#0000ff">private void</font> DataPortal_Fetch( <font color="#0000ff">object </font>criteria ) {<br>&nbsp;&nbsp;&nbsp; MyChild = <font color="#008000">ChildBO</font>.GetChild( <font color="#008000">/* arguments which will load child */ </font>);<br>}<br><br>Finally, one other point.&nbsp; You should have the parent listening to its child events.&nbsp; so your property setting should look like this (even if you go the route of creating the child via a ctor):<br><br><font color="#0000ff">public </font><font color="#008000">ChildBO </font>MyChild {<br>&nbsp;&nbsp;&nbsp; <font color="#0000ff">get </font>{ <font color="#0000ff">return </font>myChild; }<br>&nbsp;&nbsp;&nbsp;<font color="#0000ff"> private set</font> {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <font color="#0000ff">if </font>( myChild != <font color="#0000ff">value </font>) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <font color="#0000ff">if </font>(myChild != <font color="#0000ff">null </font>) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; myChild.PropertyChanged -= <font color="#0000ff">new </font><font color="#008000">PropertyChangedEventHandler</font>( handler );<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; myChild = <font color="#0000ff">value</font>;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <font color="#0000ff">if </font>(myChild != <font color="#0000ff">null </font>) {<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; myChild.PropertyChanged += <font color="#0000ff">new </font><font color="#008000">PropertyChangedEventHandler</font>( handler );<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp;&nbsp;
}<br>}<br><br><br><font color="#0000ff">private void </font>handler( <font color="#0000ff">object </font>sender, <font color="#008000">PropertyChangedEventArgs </font>e ) {<br>&nbsp;&nbsp;&nbsp; PropertyHasChanged( <font color="#ff0000">"MyChild"</font> );<br>}<br></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
