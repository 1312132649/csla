<html><header><title>protected override void OnChildChanged(Csla.Core.ChildChangedEventArgs e) does not fire after .Save</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>protected override void OnChildChanged(Csla.Core.ChildChangedEventArgs e) does not fire after .Save</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/9009.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>Lord02 posted on Sunday, May 30, 2010</h2><p>Hi there,</p>
<p>I&#39;m having a really weird problem using CSLA 3.8.X ...</p>
<p>I&#39;ll try to explain in as simple way I can:</p>
<p>I have 3 level CSLA objects ( e.g. parent, child, grandchild ) bound to a Infragistics UltraGrid ( version 2010 ). Using WinForms solution.-<br />I have a &quot;CanSave&quot; property in a &quot;MasterClass&quot; which is responsible for the whole form ... this &quot;CanSave&quot; property is bound to a Save button on the form, and if the CSLA classes which are bound to the UltraGrid are valid and Save&#39;able, the button is enabled, else it&#39;s disabled.<br /><br />I have multiple forms which all use this mechanism, where I have a &quot;MasterClass&quot; for each form, and this MasterClass contains the datasource ( e.g. &quot;AvailableProjects&quot; which is a CSLA BusinessBaseList, &quot;AvailabelBranches&quot; which is a CSLA BusinessBaseList, &quot;CanSave&quot; the property I mentioned above etc ... )<br />- This is working very well on all the forms, and I&#39;ve been using CSLA for a long time</p>
<p>Anyways ...<br />To check the validity of the Children on the form I have this:<br />protected override void OnChildChanged(Csla.Core.ChildChangedEventArgs e)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; base.OnChildChanged(e);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (CurrentStatusList != null)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; CanSave = this.IsSavable &amp;&amp; CurrentStatusList.IsSavable;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br /><br />And this:<br /><br />public bool CanSave<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; get<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return IsSavable &amp;&amp; ((CurrentStatusList == null)&nbsp; || (CurrentStatusList.IsSavable));<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; set<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (_canSave != value)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; _canSave = value;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; PropertyHasChanged(&quot;CanSave&quot;);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</p>
<p><br />Everything is working fine untill I call the .SAVE function of the parent ... and then I rebind like I do normally<br />like this:<br />_statusManager = _statusManager.Save();<br /><br />and then:<br />_masterStatusBindingSource.DataSource = _statusManager;<br /><br />this _statusManager is this &quot;ManagerClass&quot; which I mentioned and it contains e.g. the &quot;CanSave&quot; property and all the datasources needed on the form.<br /><br />but after I rebind ( e.g. the two lines above ... Save and the rebinding ) this</p>
<p>protected override void OnChildChanged(Csla.Core.ChildChangedEventArgs e) does not fire, ever again !!!<br />- So the button ( which is databound to &quot;CanSave&quot; property is always DISABLED after the first save, so I can never update items again, nor can I save a new one.-</p>
<p>I have breakpointed into the grandChild and it DOES enter the &quot;Set&quot; methods (Managed properties) for all the properties when it&#39;s being changed in the UI which should then trigger the OnChildChanged, but it does NOT fire the OnChildChanged ( or PropertyChanged for that matter ).<br /><br />So there&#39;s something seriously wrong with the re-hooking of the parent,child,grandparents I think ....<br />But I cannot find what it is !<br />I should mention that I&#39;m using the CodeSmith CSLA v. 1560 templates <br />( from here: http://community.codesmithtools.com/nightly/csla/ ) and everything has been working great throught the development process ... I&#39;m working closely with the CodeSmith CSLA templates author to work on the templates and improving them. So far, so good. I&#39;m REALLY fast developing a full blown databound applications databound against CSLA objects.</p>
<p>I hope I descripted the problem well enough, any help would be greatly appriciated.-</p>
<p>Kind regards,<br />EE.</p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
