<html><header><title>CSLA exception error</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>CSLA exception error</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/11083.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>tzfj7l posted on Tuesday, January 24, 2012</h2><p>Hi Rocky,</p>
<p>I am getting the following error while opening an report in pdf. It is working fine on my development machine and having problems on production server.</p>
<p>Unexpected error occured:The formatter threw and exception while trying to deserialize the message: There was an error while trying to deserialize parameter <a href="http://ws.lhotka.net/WcfDataPortal:UpdateResult">http://ws.lhotka.net/WcfDataPortal:UpdateResult</a>. The InnerException message was &#39;The constructor with parameters (SerializationInfo, StreamingContext) is not found in ISerializable type &#39;Microsoft.Reporting.WebForms.ReportServerException&#39;. Please see InnerException for more details.</p>
<p>Thank you,</p>
<p>Siva</p>
<p>&nbsp;</p>
<p>&nbsp;</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Tuesday, January 24, 2012</h2><p>You are trying to return a pdf document through the data portal?</p>
<p>You may be running into size limitations - a serialized pdf document is probably massively huge, and WCF is probably failing in the middle.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>tzfj7l replied on Wednesday, January 25, 2012</h2><p>The following are&nbsp;the settings in my App and web config files. This is not a new application. I upgraded my current application from Csla 3.5 to 4.1. </p>
<p><strong><span style="text-decoration:underline;">AppConfig:</span></strong></p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;bindings&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;basicHttpBinding&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;binding name=&quot;basicHttpBinding_IWcfPortal&quot; maxReceivedMessageSize=&quot;2147483647&quot; receiveTimeout=&quot;00:10:00&quot;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; sendTimeout=&quot;00:10:00&quot; openTimeout=&quot;00:10:00&quot; closeTimeout=&quot;00:5:00&quot;&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;readerQuotas maxBytesPerRead=&quot;2147483647&quot; maxArrayLength=&quot;2147483647&quot;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; maxStringContentLength=&quot;2147483647&quot; maxDepth=&quot;2147483647&quot; /&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/binding&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/basicHttpBinding&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/bindings&gt;<br />&lt;!--endpoint name=&quot;WcfDataPortal&quot; <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; address= &quot;<a href="http://www.*******.com/interactive/wcfportal.svc">http://www.*******.com/interactive/wcfportal.svc</a>&quot;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; binding=&quot;basicHttpBinding&quot; <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; bindingConfiguration=&quot;basicHttpBinding_IWcfPortal&quot; <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; contract=&quot;Csla.Server.Hosts.IWcfPortal&quot; <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; behaviorConfiguration=&quot;CompressionBehavior&quot; /&gt;--&gt;</p>
<p>WebConfig:</p>
<p>&lt;basicHttpBinding&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&lt;binding name=&quot;basicHttpBinding_IWcfPortal&quot; <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; maxReceivedMessageSize=&quot;2147483647&quot; <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; receiveTimeout=&quot;00:30:00&quot; <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; sendTimeout=&quot;00:30:00&quot; <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; openTimeout=&quot;00:10:00&quot; <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; closeTimeout=&quot;00:5:00&quot;&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;readerQuotas maxBytesPerRead=&quot;2147483647&quot;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; maxArrayLength=&quot;2147483647&quot;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; maxStringContentLength=&quot;2147483647&quot;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; maxNameTableCharCount=&quot;2147483647&quot;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; maxDepth=&quot;2147483647&quot;/&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&lt;/binding&gt;<br />&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&lt;binding name=&quot;basicHttpBinding_IWcfPortal_HTTPS&quot;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;maxReceivedMessageSize=&quot;2147483647&quot;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;receiveTimeout=&quot;00:30:00&quot;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sendTimeout=&quot;00:30:00&quot;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;openTimeout=&quot;00:10:00&quot;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;closeTimeout=&quot;00:5:00&quot;&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&lt;readerQuotas<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;maxBytesPerRead=&quot;2147483647&quot;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;maxArrayLength=&quot;2147483647&quot;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;maxStringContentLength=&quot;2147483647&quot;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; maxDepth=&quot;2147483647&quot;/&gt;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&lt;security mode=&quot;Transport&quot;&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&lt;transport clientCredentialType=&quot;None&quot;/&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&lt;/security&gt;<br />&nbsp;&nbsp;&nbsp;&lt;/binding&gt;<br />&nbsp;&nbsp;&nbsp;&lt;/basicHttpBinding&gt;</p>
<p>&nbsp;</p></div><div style='padding:0 15 3 15;background-color:lightgreen'><h2>RockfordLhotka replied on Wednesday, January 25, 2012</h2><p>Did you upgrade your server to .NET 4 at the same time? Maybe there&#39;s something different in ASP.NET or WCF&nbsp;4.</p>
<p>In fact, it seems to me that they might have added another config size limit in .NET 4. I don&#39;t remember for sure when all the various options were added to WCF.</p>
<p>The one I&#39;m thinking of goes in system.web and is the httpRuntime masRequestLength setting.</p>
<p>I&#39;d recommend carefully comparing your client and server settings with the ones in the <em>Using CSLA 4: Data Portal Configuration</em> ebook. That&#39;s the most comprehensive coverage of the .NET 4 WCF configuration requirements.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>tzfj7l replied on Wednesday, January 25, 2012</h2><p>Yes Rocky we upgraded the Frame work to 4.0. </p>
<p>I already have the following&nbsp;in the webconfig file.</p>
<p>&lt;system.Web&gt;</p>
<p>&nbsp; &lt;sessionState timeout = &quot;120&quot; /&gt;</p>
<p>&lt;httpRuntime maxRequestLength=&#39;2147483647&quot;/&gt;</p>
<p>I&#39;ll look into the Data Portal Configuration book one more time. Thank you.</p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
