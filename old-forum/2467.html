<html><header><title>System.Threading.Timer to refresh data - security problems</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>System.Threading.Timer to refresh data - security problems</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/2467.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>brucep posted on Friday, March 02, 2007</h2><P>Hi:</P>
<P>I have a website that that has a /public directory, so I created a /public/web.config file and in that file I set the Authentication token to "Windows". Everything works fine for normal pages that need to show data, if the query takes place in that *.aspx page. However, I have one page that calls into a static class (in the App_Code directory). This static class uses a System.Threading.Timer (I tried using a System.Timers.Timer but it swallows all exceptions so I couldn't find out why it wasn't working). When the timer calls the callback method after the set interval, it of course is called on a new thread. That is apparently where my problem is. I get a SecurityException that says the principal is of the wrong type. I even tried explicitly setting the DataPortal.Authentication directly to "Windows" inside the callback method, and this didn't work either.</P>
<P>Any help here?</P>
<P>--Bruce</P></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
