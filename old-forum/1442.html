<html><header><title>ReadOnlyRoot.cst</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>ReadOnlyRoot.cst</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/1442.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>smark posted on Tuesday, October 10, 2006</h2>Generating from ReadOnlyRoot.cst gives me the following exception:<br>------------------------------------------------------------------------------------------------<br>System.Exception: Unique Column(s) is required.<br>&nbsp;&nbsp; at CodeSmith.Csla.TemplateBase.ObjectInfo.Validate()<br>&nbsp;&nbsp; at CodeSmith.Csla.TemplateBase.ObjectInfo.LoadFromSchema(CodeTemplate template)<br>&nbsp;&nbsp; at CodeSmith.Csla.TemplateBase.ObjectInfo..ctor(CodeTemplate template)<br>&nbsp;&nbsp; at _CodeSmith.ReadOnlyRoot_cst.__RenderMethod1(TextWriter writer, Control control)<br>&nbsp;&nbsp; at CodeSmith.Engine.DelegateControl.Render(TextWriter writer)<br>&nbsp;&nbsp; at CodeSmith.Engine.Control.RenderChildren(TextWriter writer)<br>&nbsp;&nbsp; at CodeSmith.Engine.CodeTemplate.Render(TextWriter writer)<br>&nbsp;&nbsp; at CodeSmith.Engine.CodeTemplate.RenderToString()<br>&nbsp;&nbsp; at CodeSmith.Gui.CodeTemplateGenerator.f(Object A_0, EventArgs A_1)<br>------------------------------------------------------------------------------------------------<br><br>I selected a RootCommand and even supplied the name of the unique column, a Guid primary key column after the exception, but I keep getting the exception. Now, I do not get the exception if I select the RootTable option. However, I only want a couple of columns ( the primary key Guid column, and a string column) in this ReadOnlyRoot and selecting the RootTable option pulls out all the columns. <br><br>I am obviously missing something. Any suggestion would be greatly appreciated. Thanks. <br><br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>rasupit replied on Tuesday, October 10, 2006</h2><P>Can you post how your stored procedure look like? Is this for C# or VB?</P>
<P>Ricky</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>smark replied on Tuesday, October 10, 2006</h2>This is for C#. And the sproc is just a simple select as in/for ProjectInfo in CSLA ProjectTracker.<br><br>Select [pkGuidColumn], [stringName]<br>From Table<br>Where Deleted = 0<br>Order By [Name]<br><br>Thanks.<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>rasupit replied on Tuesday, October 10, 2006</h2><P>The sproc does not look like the kind you would use for a root object. For root object, all sproc parameter(s) will be the unique columns.</P>
<P>Try to use a stored procedure that would return a single record such as getProject in PTracker.</P>
<P>Ricky</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>smark replied on Tuesday, October 10, 2006</h2>I think I am headed the wrong path. What I wanted was a ReadOnlyListBase derived collection such as the ProjectList in PTracker. The child object in ProjectList is ProjectInfo which is derived from ReadOnlyBase. I guess we currently do not have a template that would generate a class such as ProjectInfo -- basically a couple of properties: a Guid/Id value and a string value.<br><br>So I generated my ReadOnlyListBase class from ReadOnlyRootList.cst and thought I could generate a ProjectInfo-like class from ReadOnlyRoot.cst which is based on ReadOnlyBase. But that doesn't appear to be the case. <br><br>So what I am doing right now is hand-coding a ProjectInfo-like class that provides ReadOnlyBase objects to the generated ReadOnlyListBase class. And later may be I could write a template for a ProjectInfo-like class; that could be a good way to learn CodeSmith.<br><br>Thanks Ricky.<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>rasupit replied on Wednesday, October 11, 2006</h2>Well, in this case you'll use ReadOnlyRootList &amp; ReadOnlyChild template.<br><br>However, I found there is bug which would not allow you to generate ReadOnlyChild using the sproc above.&nbsp; The template would return the same error message and would not accept unique column entry.<br><br>I'll have this fixed for the next release.&nbsp; In the mean time, you can change line 1436 on TemplateBase.cs to:<br>if (resultSetIndex == 0 &amp;&amp; !IsChild &amp;&amp; CslaObjectType != ObjectType.NameValueList)<br><br>I think this will solve the problem.<br>Ricky<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>smark replied on Friday, October 13, 2006</h2>Thanks Ricky<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ChristianPena replied on Monday, October 23, 2006</h2><P>Thanks for this. A co-worker pointed this out in our VB templates and I wasn't sure where to begin looking. He had a similar stored procedure.</P>
<P>Christian</P></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
