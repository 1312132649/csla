<html><header><title>Feedback on approach</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Feedback on approach</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/1498.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>ChristianPena posted on Monday, October 16, 2006</h2><P>Hello,</P>
<P>We are currently ramping up to use CSLA on a rewrite of an application here at work. While thinking through our requirements, we started thinking about how we can lower our maintenance time. One issue that came to mind was the columns displayed in our ReadOnlyListBase views. These columns can be easily hidden if the user decides they want that, but it is a more involved change if the user wants to add new columns. We would have to change the stored procedure and ReadOnly object definition to match the new requirements. </P>
<P>We have designed a new&nbsp;class to meet this specific need: DynamicInfo. This class is a ReadOnly object that has properties indexed by a string index and can be bound to a grid through custom databinding. This is different from the typical approach to ReadOnly objects in that the DyamicInfo class does not have any hardcoded properties. The object will be populated by the results of a query or stored procedure.&nbsp;If the user wants to see new columns in the grid, then we just have to change the source data to meet the need.</P>
<P>The DynamicInfo class will&nbsp;have behavior like any other ReadOnly class. It can assume that some specific columns will be returned but any other columns not related to the behavior of the object are purely to meet the users needs. For example, it can be assumed that "Contact ID" will always&nbsp;be returned as it is important for the behavior of the class. On the other hand, "Nickname" will be returned only if user wishes to see that column.</P>
<P>I have attached&nbsp;the necessary classes and&nbsp;sample class&nbsp;here (with my manager's permission) in order to get feedback on the concept as well as to contribute to the CSLA community. This implementation is a proof of concept and will be improved if the idea seems viable. Any feedback on the concept or approach is appreciated. We will </P>
<P>Thank you,</P>
<P>Christian</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Fintanv replied on Monday, October 16, 2006</h2><P>We did something similar to this based on some work we found at CodeProject.&nbsp; It has worked well for us, except when it comes to wanting to display hierarchical data.&nbsp; In this case you have to be careful since it is the root bound class that gets queried for the property descriptors of all the child collections.&nbsp; This means that it needs to know what properties each of its contained child collections, will hold.</P>
<P>Cheers,</P>
<P>Fintan</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ChristianPena replied on Monday, October 16, 2006</h2><P>Fintan,</P>
<P>Thanks for the reply. That is a good thing to note. I am not sure that we will be displaying hierarchical data in a grid so in our case it may not be an issue, but I will keep it in mind. </P>
<P>Have you found that you have saved yourself any work by taking this approach?</P>
<P>Thank you,</P>
<P>Christian</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JoeFallon1 replied on Monday, October 16, 2006</h2><P>Interesting idea. </P>
<P>How much testing/progress have you made on it? </P>
<P>Does it work? </P>
<P>Is it saving you time and effort?</P>
<P>How would you handle modifying the AuthorizationRules if you added a new column to the source query?</P>
<P>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 'AuthorizationRules.AllowRead("ServAcctNo", "ServiceAccountInfoReadGroup")</P>
<P>&nbsp;</P>
<P>Joe<BR></P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ChristianPena replied on Monday, October 16, 2006</h2><P>Joe,</P>
<P>This was implemented last week so I have not done extensive testing. It works in the sense that it binds to the grid that I am using. I am seeing some strange behavior in that an integer column is being bound to a checkbox. I haven't yet investigated why that is. </P>
<P>It hasn't saved me any time or effort except in the theoretical/academic sense that I can change the columns displayed by changing the stored procedure.</P>
<P>As for Authorization, I hadn't given it detailed thought yet, but I don't see why that wouldn't be database driven and so therefore dynamic as well. If I add a new column to a view, I could just as easily add the column to the groups that have permission to it. The only real issue is to take care in not throwing exceptions or handling them to return a null value or some other default value to indicate that the value could not be retrieved because of Authorization reasons.</P>
<P>Thank you,</P>
<P>Christian</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Kahn replied on Monday, October 23, 2006</h2>Please keep us updated on this as I want to use something like thiis for a reporting kind of tool. i.e. rendering a DevX grid to look like a report and make it dynamic so that users can hide and add columns as they wish...However, I want to take it a bit further...and that is filtering dynamically...Any implementation details on this?<br><br>Thanks for posting your idea :)<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Bayu replied on Monday, October 23, 2006</h2><font face="Tahoma" size="2">Hi Christian,<br><br>Your DynamicInfo looks very much like an experiment we have conducted here as well. Like you we found that many of the maintenance tasks were related to these kinds of minor changes, column additions/removals/renames and the likes.<br><br>Our experiment went one step further than your DynamicInfo in the sense that we also implemented a DynamicBusinessObject, i.e.: the editable complement that allows for the CRUD operations. We got it to work just fine, but in the end we ditched it. <br><br>Why?<br><br>Well, because:<br>- the 'dynamic' approach works great for business objects that simply serve as data containers<br>- but NOT for business objects that 'serve a use case' (this is an change of paradigm often mentioned on this forum, it means to not see BOs as data containers but as the servants of your use case).<br>- someone already mentioned things like authorization and validation, these are good examples of the use-case paradigm, but also think about scenarios where multiple BOs are orchestrated to fullfill a complex behavioral requirement (we had this with Order-related BOs which contain a LOT of constraints and logic)<br>- of course, you can make everything data-driven, it's easy to see how this could be accomplished for validation rules and authorization schemes. But when all your business objects are dynamic, i.e. they are data-driven, you will find that ALL your business logic needs to be data driven as well .... and that's simply too much (undebuggable, enormous administrative overhead, unmaintainable, etc) and in the end you are further away from your goal then when you started. <br><br>So we did something else:<br>- the core part of our BOs are codegen-ed, this involves at least all dataportal_xxx functionality, stored procs and business properties, so adding/removing columns is a no-brainer<br>- and we made all our data management related UI views dynamic .... <br><br><br>This last thing, dynamic UIs, made all the difference, we implemented 2&nbsp; views one for displaying editable lists and one for displaying a single editable object. Both views can be rendered 'read-only' and 'editable' and fully support all validation and authorization stuff. They are fully dynamic, i.e. they can edit <i>any</i> CSLA-object. It took some time to get it right, but using one custom attribute and some reflection it is actually quite straightforward. <br><br>In sum:<br>- dymamic BOs will preclude support for complex use cases, which is the opposite of where they are intended for<br>- using codegen though, maintenance can be made easy on the and BO-level and below<br>- by making use of dynamic UI-views most of the changes made during maintenance tasks have no repercussions on the UI-level<br><br>Just my experience in an attempt to broaden the number of viewpoints in this discussion. Let us know what your final decision will be, I'm very much interested in this topic.<br><br>Cheers!<br>Bayu<br><br><br><br></font></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Blarm replied on Monday, October 23, 2006</h2><P>Christian,</P>
<P>This is something that I have been thinking about, but taking it a bit further.</P>
<P>In every application there are the 'master file'/maintenance tables, like the name/value list and similar tables with a few more columns. You can look at the table design and visiualise exactly what the business object code will look like. For these simple objects where the business object maps directly to the database table, I was thinking about having one business object that when created you would set the TableName, Primary Key Column and Primary Key Value which would be used to dynamically create the SQL statement for the Fetch (e.g. "SELECT * FROM tblNameValues WHERE ID = 1") .</P>
<P>The properties would then be populated as in your example (I was thinking of using XML rather than the dictionary). Also the CRUD methods would dynamically create the SQL statements at runtime.</P>
<P>As Bayu had rightly stated, this idea would be of no use where the&nbsp;business object&nbsp; is anything other than a simple data container that maps directly to a databse table. However, for the simple case then I don't see the point of having several business objects&nbsp;gluttering up a project .</P>
<P>Unfortunately this is all just a thought at the moment and so I don't have any code to share.</P>
<P>Bill</P>
<P>&nbsp;</P>
<P>&nbsp;</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ChristianPena replied on Monday, October 23, 2006</h2><P>Kahn,</P>
<P>I am not sure that there is any filtering method inherent in this approach.&nbsp;You may have already seen the following thread, but I found it useful in&nbsp;drawing up&nbsp;ideas about how I can approach dynamic filtering:</P>
<P><A href="/forums/permalink/1024/1080/ShowThread.aspx#1080">http://forums.lhotka.net/forums/permalink/1024/1080/ShowThread.aspx#1080</A>&nbsp;</P>
<P>Bayu,</P>
<P>Thank you for the reply. I was hoping someone else had gone down this road and could shed some light on the experience ahead. </P>
<P>I see all of your concerns regarding this approach for&nbsp;a full Business Object. I agree that you are losing the sense of what the Business Object is supposed to be. If it is a full Business Object and it is completely dynamic, then it can have little or no behavior that makes it useful to you besides acting as a data container. For this reason, I am considering holding to the following rules when using this approach:</P>
<UL>
<LI>Only utilize this class in a situation where a read-only info class is needed, presumably in a grid where, potentially, the object will be drilled down into by requesting the Dynamic Info object to return the full Business Object version of itself 
<LI>Inherit from the DynamicInfo class in order to provide behavior such as the ability to retrieve the full Business Object. In this way, you can remove some logic from your UI by leaving that responsibility with the object 
<LI>For all full Business Objects, generate code into partial classes and implemenent behavior in seperate files</LI></UL>
<P>Blarm,</P>
<P>That is another viable approach. I had not considered storing XML, but I will certainly look at trying that approach. I was a little concerned with the weight of the dictionary per object. I was hoping to optimize the objects through the use of the Flyweight pattern, but I have not been able to get the implementation to a point where it is worth the trouble. </P>
<P>While I can sympathize with you on the issue of having too many files given a large number of use cases, I would argue that each instance required should have a class that wraps around your base dynamic class. I would do this in the interest of keeping the UI independent from the database layer. If in your UI code, you are instantiating a class by telling it what table and keys to use, then you are losing the buffering against data structure changes that you gain by using objects. Ultimately, there is no black or white when dealing with such issues, so please do share with us how you decide to approach the problem.</P>
<P>Thanks for your responses!</P>
<P>Christian</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>gdk9am replied on Tuesday, February 13, 2007</h2><P>Hi</P>
<P>&nbsp;</P>
<P>I am trying to developing a dynamic business object for All CRUD operations with </P>
<P>(a) dynamic properties</P>
<P>(b) dynamic business rules</P>
<P>(c) dynamic authorisation rules</P>
<P>Bayu, I am interesting how you handled dynamic properties when a new record is added ?</P></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
