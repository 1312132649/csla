<html><header><title>OnChildChanged when deleting from a child collection</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>OnChildChanged when deleting from a child collection</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/6694.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>shawndewet posted on Saturday, March 28, 2009</h2><P><FONT face=Arial>I have a typical InvoiceHeader / InvoiceDetail scenario.</FONT></P>
<P><FONT face=Arial>My InvoiceHeader class has a property called MyInvoiceDetails&nbsp;representing its associated&nbsp;InvoiceDetail records.&nbsp; I am overriding the OnChildChanged method in InvoiceHeader to handle additions to, changes in, and deletions from MyInvoiceDetails.</FONT></P>
<P><FONT face=Arial>It works perfectly for additions and changes.&nbsp; However, when deleting an InvoiceDetail from MyInvoiceDetails, e.ChildObject represents the InvoiceDetailCollection: I would expect it to represent the&nbsp;deleted InvoiceDetail instead.</FONT></P>
<P><FONT face=Arial>Is this by design?&nbsp;If not, I guess I've found a bug.&nbsp; If indeed it is by design, please advise as to what other approach I should use to trigger business logic associated with the deletion of an item from a child collection in my scenario.</FONT></P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>msk replied on Sunday, March 29, 2009</h2><P>There is an event raised by BusinessListBase called RemovingItem.&nbsp; You should be able to hook into that.&nbsp; </P>
<P>Martin. </P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>shawndewet replied on Monday, March 30, 2009</h2>mmm that's a pity the design has to be different for the scenario of removing an item (as opposed to being able to use the overridden OnChildChanged).&nbsp; Is there any advice as to where the right place is to put&nbsp;the AddHandler for the RemovingItem event?&nbsp; In the constructor of the parent; In the FromDataReader?</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>shawndewet replied on Monday, March 30, 2009</h2><P><FONT face=Arial>Reading through Rocky's book on this topic, it is clear that OnChildChanged is there to be overridden in a Parent class to indicate to the parent what child has changed, and what detail about that child has changed, so that business logic can be executed accordingly.</FONT></P>
<P><FONT face=Arial>This "indication" of the change is indeed&nbsp;done perfectly in the ChildChangedEventArgs parameter&nbsp;when adding to&nbsp;and changing items in a child collection.&nbsp; I therefore can't help but feel that it is <STRONG>not</STRONG> by design that when <EM>deleting</EM> a record from the child collection, all that ChildChangedEventArgs reports is the <EM>changed child collection</EM>, without any indication of which item was deleted from the collection.</FONT></P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Tuesday, March 31, 2009</h2>Actually I think that is on purpose.&nbsp; You can hook up an event listener for RemovingItem, which will fire before the item is removed.&nbsp; Maybe raising the event via ChildChanged would be considered redundant.<br></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
