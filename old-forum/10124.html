<html><header><title>Async Rules, AddOutValue, and BrokenRules Collection</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Async Rules, AddOutValue, and BrokenRules Collection</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/10124.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>mosgath posted on Wednesday, March 02, 2011</h2><p>I developing an application that uses CSLA 4.1 with a Silverlight UI.&nbsp; There is an Async business rule triggered off of Property&nbsp;A&nbsp;that calls asynchronous command objects to connect to&nbsp;a backend system to verify data and populate Properties B &amp; C.&nbsp;Properties B &amp; C can also be manually entered if Property A is blank.&nbsp; I had the rule update the additional properties using the AffectedProperties and AddOutValue.&nbsp; Then overwrote the CanWriteProperty to check if the property being written to was Properties B &amp; C and if Property A had any value.&nbsp; If so, it returned false.&nbsp; When the rule fires and brings back data, Properties B &amp; C are updated but still contain the broken rules for containing no data.&nbsp; I understand that AddOutValue uses the LoadProperty method and bypasses the rules and security.&nbsp; I tried using the dependency rule I use for Synchronous rules to allow the Async rule&nbsp;to fire (Priority: 1) and then dependency rules (Priority: 2)&nbsp;to trigger for the additional fields.&nbsp; However, it appears the rules for priority 2 trigger even if the async rule with priority 1 hasn&#39;t completed.&nbsp;&nbsp;I also tried updating the fields from the context.Target (not preferred, I know).&nbsp; This caused the&nbsp;set on the property to error because it was no longer Writeable.&nbsp;&nbsp;Any thoughts on how I can get the properties updated and rules reran for Properties B &amp; C from the Async rule and still provide the CanWrite check?</p>
<p>&nbsp;</p></div><div style='padding:0 15 3 15;background-color:lightgreen'><h2>mosgath replied on Wednesday, March 02, 2011</h2><p>Sounds like the changes mentioned here will actually fix my issue:</p>
<p><a href="http://forums.lhotka.net/forums/t/10113.aspx">http://forums.lhotka.net/forums/t/10113.aspx</a></p>
<p>&nbsp;</p>
<p>&nbsp;</p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
