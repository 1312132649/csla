<html><header><title>XMLElement with childnodes as a parameter to ReadOnlyBase?</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>XMLElement with childnodes as a parameter to ReadOnlyBase?</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/2780.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>colema18 posted on Wednesday, April 25, 2007</h2><P>This is blowing up.&nbsp; It appears to only blow up if the Node has child nodes.&nbsp; Can someone tell me what I am doing wrong? (It blows up on the "Taxes" node).</P>
<P>PayoffQuote.cs<FONT color=#0000ff size=2><BR>private</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>void</FONT><FONT size=2> Fetch(</FONT><FONT color=#008080 size=2>Criteria</FONT><FONT size=2> crit)<BR>{<BR></FONT><FONT color=#0000ff size=2>&nbsp; int</FONT><FONT size=2> i = 0;<BR></FONT><FONT color=#008080 size=2>&nbsp; XmlDocument</FONT><FONT size=2> doc = </FONT><FONT color=#0000ff size=2>new</FONT><FONT size=2> </FONT><FONT color=#008080 size=2>XmlDocument</FONT><FONT size=2>();<BR>&nbsp; doc.Load(</FONT><FONT color=#800000 size=2>"C:\\Clients\\FinanceSource\\FinanceSource.Library\\xml\\MockLease.xml"</FONT><FONT size=2>);<BR></FONT><FONT color=#008080 size=2>&nbsp; XmlElement</FONT><FONT size=2> root = doc.DocumentElement;<BR></FONT><FONT color=#008080 size=2>&nbsp; XmlNode</FONT><FONT size=2> quoteInfo = root.ChildNodes[0];<BR></FONT><FONT color=#0000ff size=2>&nbsp; foreach</FONT><FONT size=2> (</FONT><FONT color=#008080 size=2>XmlElement</FONT><FONT size=2> detail </FONT><FONT color=#0000ff size=2>in</FONT><FONT size=2> quoteInfo.ChildNodes)<BR>&nbsp; {<BR></FONT><FONT color=#0000ff size=2>&nbsp;&nbsp;&nbsp;&nbsp; if</FONT><FONT size=2>(detail.Name == </FONT><FONT color=#800000 size=2>"QuoteDetail"</FONT><FONT size=2>)<BR>&nbsp;&nbsp;&nbsp; {<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; QuoteDetails.Add(i,</FONT><FONT color=#0000ff size=2>new</FONT><FONT size=2> </FONT><FONT color=#008080 size=2>QuoteDetail</FONT><FONT size=2>(detail));<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; i += 1;<BR>&nbsp;&nbsp;&nbsp;&nbsp; }<BR>&nbsp; } <BR>}</FONT></P>
<P><FONT size=2>QuoteDetail.cs<BR><FONT color=#0000ff size=2>public</FONT><FONT size=2> QuoteDetail(</FONT><FONT color=#008080 size=2>XmlElement</FONT><FONT size=2> detailNode)<BR>{<BR></FONT><FONT color=#0000ff size=2>&nbsp; int</FONT><FONT size=2> i = 0;<BR>&nbsp; _title = detailNode.Attributes[</FONT><FONT color=#800000 size=2>"Text"</FONT><FONT size=2>].Value;<BR></FONT><FONT color=#0000ff size=2>&nbsp; if</FONT><FONT size=2>(detailNode.HasAttribute(</FONT><FONT color=#800000 size=2>"Amount"</FONT><FONT size=2>))<BR>&nbsp; {<BR>&nbsp;&nbsp;&nbsp;&nbsp; _amount = </FONT><FONT color=#0000ff size=2>double</FONT><FONT size=2>.Parse(detailNode.Attributes[</FONT><FONT color=#800000 size=2>"Amount"</FONT><FONT size=2>].Value);<BR>&nbsp; }<BR></FONT><FONT color=#0000ff size=2>&nbsp; if</FONT><FONT size=2>(detailNode.HasChildNodes)<BR>&nbsp; {<BR></FONT><FONT color=#0000ff size=2>&nbsp;&nbsp;&nbsp;&nbsp; foreach</FONT><FONT size=2> (</FONT><FONT color=#008080 size=2>XmlElement</FONT><FONT size=2> detail </FONT><FONT color=#0000ff size=2>in</FONT><FONT size=2> detailNode.ChildNodes)<BR>&nbsp; {<BR>&nbsp; QuoteDetails.Add(i,</FONT><FONT color=#0000ff size=2>new</FONT><FONT size=2> </FONT><FONT color=#008080 size=2>QuoteDetail</FONT><FONT size=2>(detail));<BR>&nbsp; i += 1;<BR>}</P></FONT></FONT>
<P><FONT size=2>MockLease.xml file:<BR></P><FONT color=#0000ff size=2>
<P>&lt;?</FONT><FONT color=#800000 size=2>xml</FONT><FONT color=#0000ff size=2> </FONT><FONT color=#ff0000 size=2>version</FONT><FONT color=#0000ff size=2>=</FONT><FONT size=2>"</FONT><FONT color=#0000ff size=2>1.0</FONT><FONT size=2>"</FONT><FONT color=#0000ff size=2> </FONT><FONT color=#ff0000 size=2>encoding</FONT><FONT color=#0000ff size=2>=</FONT><FONT size=2>"</FONT><FONT color=#0000ff size=2>utf-8</FONT><FONT size=2>"</FONT><FONT color=#0000ff size=2> ?&gt;<BR>&lt;</FONT><FONT color=#800000 size=2>PayoffQuote</FONT><FONT color=#0000ff size=2>&gt;<BR>&lt;</FONT><FONT color=#800000 size=2>QuoteInformation</FONT><FONT color=#0000ff size=2>&gt;<BR>&lt;</FONT><FONT color=#800000 size=2>QuoteDetail</FONT><FONT color=#0000ff size=2> </FONT><FONT color=#ff0000 size=2>Text</FONT><FONT color=#0000ff size=2>=</FONT><FONT size=2>"</FONT><FONT color=#0000ff size=2>Residual Value (Purchase Option Amount)</FONT><FONT size=2>"</FONT><FONT color=#0000ff size=2> </FONT><FONT color=#ff0000 size=2>Amount</FONT><FONT color=#0000ff size=2>=</FONT><FONT size=2>"</FONT><FONT color=#0000ff size=2>10585.00</FONT><FONT size=2>"</FONT><FONT color=#0000ff size=2>/&gt;<BR>&lt;</FONT><FONT color=#800000 size=2>QuoteDetail</FONT><FONT color=#0000ff size=2> </FONT><FONT color=#ff0000 size=2>Text</FONT><FONT color=#0000ff size=2>=</FONT><FONT size=2>"</FONT><FONT color=#0000ff size=2>Taxes</FONT><FONT size=2>"</FONT><FONT color=#0000ff size=2>&gt;<BR>&lt;</FONT><FONT color=#800000 size=2>QuoteDetail</FONT><FONT color=#0000ff size=2> </FONT><FONT color=#ff0000 size=2>Text</FONT><FONT color=#0000ff size=2>=</FONT><FONT size=2>"</FONT><FONT color=#0000ff size=2>Sales Tax</FONT><FONT size=2>"</FONT><FONT color=#0000ff size=2> </FONT><FONT color=#ff0000 size=2>Amount</FONT><FONT color=#0000ff size=2>=</FONT><FONT size=2>"</FONT><FONT color=#0000ff size=2>10</FONT><FONT size=2>"</FONT><FONT color=#0000ff size=2>/&gt;<BR>&lt;</FONT><FONT color=#800000 size=2>QuoteDetail</FONT><FONT color=#0000ff size=2> </FONT><FONT color=#ff0000 size=2>Text</FONT><FONT color=#0000ff size=2>=</FONT><FONT size=2>"</FONT><FONT color=#0000ff size=2>Transport Tax</FONT><FONT size=2>"</FONT><FONT color=#0000ff size=2> </FONT><FONT color=#ff0000 size=2>Amount</FONT><FONT color=#0000ff size=2>=</FONT><FONT size=2>"</FONT><FONT color=#0000ff size=2>20</FONT><FONT size=2>"</FONT><FONT color=#0000ff size=2>/&gt;<BR>&lt;</FONT><FONT color=#800000 size=2>QuoteDetail</FONT><FONT color=#0000ff size=2> </FONT><FONT color=#ff0000 size=2>Text</FONT><FONT color=#0000ff size=2>=</FONT><FONT size=2>"</FONT><FONT color=#0000ff size=2>RipOff Tax</FONT><FONT size=2>"</FONT><FONT color=#0000ff size=2> </FONT><FONT color=#ff0000 size=2>Amount</FONT><FONT color=#0000ff size=2>=</FONT><FONT size=2>"</FONT><FONT color=#0000ff size=2>30.50</FONT><FONT size=2>"</FONT><FONT color=#0000ff size=2>/&gt;<BR>&lt;/</FONT><FONT color=#800000 size=2>QuoteDetail</FONT><FONT color=#0000ff size=2>&gt;<BR></FONT><FONT color=#0000ff size=2>&lt;/</FONT><FONT color=#800000 size=2>QuoteInformation</FONT><FONT color=#0000ff size=2>&gt;<BR>&lt;/</FONT><FONT color=#800000 size=2>PayoffQuote</FONT><FONT color=#0000ff size=2>&gt;</P>
<P></FONT></FONT><FONT size=2>Thanks</FONT></P>
<P><FONT size=2>~james</FONT></P>
<P><FONT size=2><A href="mailto:colema18@gmail.com">colema18@gmail.com</A></FONT></P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>skagen00 replied on Thursday, April 26, 2007</h2><P>I'm afraid I don't work with XML too often, but I will tell you there was a strange&nbsp;&lt;/font&gt; tag in the email I received from your post.&nbsp;(I'm going say closing "font" element in case my text gets rendered as HTML) This font tag appears between the last quotedetail closing node and the quoteinformation closing node.</P>
<P>You also appear to have an extra closing node of QuoteDetail. </P>
<P>Perhaps your file isn't formed well. </P>
<P>Here's a cut and paste of the MockLease file as I saw it in my e-mail (assuming it shows properly)</P>
<P>&lt;?<FONT color=#800000 size=2>xml</FONT><FONT color=#0000ff size=2> </FONT><FONT color=#ff0000 size=2>version</FONT><FONT color=#0000ff size=2>=</FONT><FONT size=2>"</FONT><FONT color=#0000ff size=2>1.0</FONT><FONT size=2>"</FONT><FONT color=#0000ff size=2> </FONT><FONT color=#ff0000 size=2>encoding</FONT><FONT color=#0000ff size=2>=</FONT><FONT size=2>"</FONT><FONT color=#0000ff size=2>utf-8</FONT><FONT size=2>"</FONT><FONT color=#0000ff size=2> ?&gt;<BR>&lt;</FONT><FONT color=#800000 size=2>PayoffQuote</FONT><FONT color=#0000ff size=2>&gt;<BR>&lt;</FONT><FONT color=#800000 size=2>QuoteInformation</FONT><FONT color=#0000ff size=2>&gt;<BR>&lt;</FONT><FONT color=#800000 size=2>QuoteDetail</FONT><FONT color=#0000ff size=2> </FONT><FONT color=#ff0000 size=2>Text</FONT><FONT color=#0000ff size=2>=</FONT><FONT size=2>"</FONT><FONT color=#0000ff size=2>Residual Value (Purchase Option Amount)</FONT><FONT size=2>"</FONT><FONT color=#0000ff size=2> </FONT><FONT color=#ff00 size=2>Amount</FONT><FONT color=#0000ff size=2>=</FONT><FONT size=2>"</FONT><FONT color=#0000ff size=2>10585.00</FONT><FONT size=2>"</FONT><FONT color=#0000ff size=2>/&gt;<BR>&lt;</FONT><FONT color=#800000 size=2>QuoteDetail</FONT><FONT color=#0000ff size=2> </FONT><FONT color=#ff0000 size=2>Text</FONT><FONT color=#0000ff size=2>=</FONT><FONT size=2>"</FONT><FONT color=#0000ff size=2>Taxes</FONT><FONT size=2>"</FONT><FONT color=#0000ff size=2>&gt;<BR>&lt;</FONT><FONT color=#800000 size=2>QuoteDetail</FONT><FONT color=#0000ff size=2> </FONT><FONT color=#ff0000 size=2>Text</FONT><FONT color=#0000ff size=2>=</FONT><FONT size=2>"</FONT><FONT color=#0000ff size=2>Sales Tax</FONT><FONT size=2>"</FONT><FONT color=#0000ff size=2> </FONT><FONT color=#ff0000 size=2>Amount</FONT><FONT color=#0000ff size=2>=</FONT><FONT size=2>"</FONT><FONT color=#0000ff size=2>10</FONT><FONT size=2>"</FONT><FONT color=#0000ff size=2>/&gt;<BR>&lt;</FONT><FONT color=#800000 size=2>QuoteDetail</FONT> <FONT color=#ff0000 size=2>Text</FONT><FONT color=#0000ff size=2>=</FONT><FONT size=2>"</FONT><FONT color=#0000ff size=2>Transport Tax</FONT><FONT size=2>"</FONT><FONT color=#0000ff size=2> </FONT><FONT color=#ff0000 size=2>Amount</FONT><FONT color=#0000ff size=2>=</FONT><FONT size=2>"</FONT><FONT color=#0000ff size=2>20</FONT><FONT size=2>"</FONT><FONT color=#0000ff size=2>/&gt;<BR>&lt;</FONT><FONT color=#800000 size=2>QuoteDetail</FONT><FONT color=#0000ff size=2> </FONT><FONT color=#ff0000 size=2>Text</FONT><FONT color=#0000ff size=2>=</FONT><FONT size=2>"</FONT><FONT color=#0000ff size=2>RipOff Tax</FONT><FONT size=2>"</FONT><FONT color=#0000ff size=2> </FONT><FONT color=#ff0000 size=2>Amount</FONT><FONT color=#0000ff size=2>=</FONT><FONT size=2>"</FONT><FONT color=#0000ff size=2>30.50</FONT><FONT size=2>"</FONT><FONT color=#0000ff size=2>/&gt;<BR>&lt;/</FONT><FONT color=#800000 size=2>QuoteDetail</FONT><FONT color=#0000ff size=2>&gt;<BR>&lt; /FONT&gt;<FONT color=#0000ff size=2>&lt;/</FONT><FONT color=#800000 size=2>QuoteInformation</FONT><FONT color=#0000ff size=2>&gt;<BR>&lt;/</FONT><FONT color=#800000 size=2>PayoffQuote</FONT><FONT color=#0000ff size=2>&gt;</FONT></FONT></P>
<P>&nbsp;</P>
<P>&nbsp;</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>colema18 replied on Thursday, April 26, 2007</h2>I think the post just didn't come through in email.&nbsp; There is no font tag, and the nodes might have gotten messed up in the email.&nbsp; The code looks right via the web site post.&nbsp; I still have the problem if anyone else can try it out.&nbsp; It blows up when it recursively calls itself.&nbsp; I am sure it is something silly that I am missing.&nbsp; It is rather frustrating because the only reason I am doing this is because I am mocking out the data until the backend is available - so this quick mock approach is actually taking a lot more effort than I anticipated.<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>colema18 replied on Friday, April 27, 2007</h2>Well it was a silly mistake and not even CSLA related, so sorry for the post.&nbsp; It turned out I neglected to actually instantiated my sortedlist before I added something to it.<br></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
