<html><header><title>Propagating information from DAL to UI</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Propagating information from DAL to UI</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/6435.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>Katani posted on Tuesday, February 17, 2009</h2>I want to ask if there is a way to inform UI that specific property should be edited using specified control.<br>Lets say i have a Person object. Person have Status property which in database is stored in separate table. I want to ask is there a way to set something i Person object which will tell UI to edit Status using combobox in which list will be filled with Status objects?<br><br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Antonio Sandoval replied on Tuesday, February 17, 2009</h2>If you have something Like This<br><br>Table Person<br>PersonID (PK)<br><br>Table PersonStatus<br>PersonID&nbsp; (PK)<br>StatusID <br><br>Table Status<br>StatusID&nbsp; (PK)<br>StatusName<br><br>In your BO you can have something like this<br><br>Person : BusinesBase{<br>&nbsp;&nbsp;&nbsp; int _PersonID;<br><br>&nbsp;&nbsp; PersonStatus _PersonStatus;<br>&nbsp; <br>&nbsp;public PersonStatus PersonStatus{<br>get{<br>&nbsp;return _PersonStatus;<br>}<br>}<br>&nbsp; public Person GetPerson(int PersonID){<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; DataPortal&lt;Person&gt;.Fetch(new Criteria(PersionID));<br>&nbsp; }<br><br>&nbsp; private Person(){<br>&nbsp;&nbsp;&nbsp;&nbsp; _PersonStatus=PersonStatus.NewPersonStatus();&nbsp; //Status by default<br>&nbsp; }<br><br>internal Fetch(SafeDataReader dr){<br>}<br><br>&nbsp; DataPortal_Fetch(Criteria )<br>&nbsp;{<br>&nbsp;&nbsp;&nbsp; using(DBManager db =new DBManger(connectionString)){<br>&nbsp;&nbsp;&nbsp; db.Parameters.Clear();<br>&nbsp;&nbsp;&nbsp;&nbsp; db.AddParameter("@PersonID",criteria.PersonID);<br>&nbsp;&nbsp;&nbsp;&nbsp; SafeDataReader dr = db.GetDataReader();<br>&nbsp;&nbsp;&nbsp;&nbsp; Fetch(dr);<br>&nbsp;&nbsp;&nbsp;&nbsp; dr.NextResult();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; _PersonStatus.Fetch(dr,db);&nbsp; <br>}<br>&nbsp;}<br>[Transactional(TransactionScope)]<br>&nbsp; DataPortal_Update(){<br>&nbsp;&nbsp;&nbsp; using(DBManager db =new DBManger(connectionString)){<br>&nbsp;&nbsp;&nbsp;&nbsp; Update your person in database<br>&nbsp;&nbsp;&nbsp;&nbsp; _PersonStatus.Update(this,db);//Using the same connection for TransactionScope<br>&nbsp; }<br>&nbsp;}<br>}<br><br>[Transactional(TransactionScope)]<br>&nbsp; DataPortal_Insert(){<br>&nbsp;&nbsp;&nbsp; using(DBManager db =new DBManger(connectionString)){<br>&nbsp;&nbsp;&nbsp;&nbsp; Update your person in database<br>&nbsp;&nbsp;&nbsp;&nbsp; _PersonStatus.Insert(this,db);//Using the same connection for TransactionScope<br>&nbsp; }<br>&nbsp;}<br>}<br><br>PersonStatus : BusinesBase<br>&nbsp;&nbsp; int _PersonID;<br>&nbsp;&nbsp; string StatusID;<br>&nbsp;&nbsp; internal Update(Person myperson,DBManager db){<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; _PersonID =myperson.PersonID;<br>&nbsp;&nbsp;&nbsp;&nbsp; Update in database<br>&nbsp;&nbsp; }<br>&nbsp;&nbsp; internal void Insert(Person myperson,DBManager db){<br>&nbsp;_PersonID=myperson.PersonID;<br>&nbsp;insert data;<br>}<br>&nbsp;&nbsp;&nbsp; internal void Fetch(SafeDataReader dr){<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Fill yours properties;<br>&nbsp;&nbsp;&nbsp; }<br><br><br>}<br><br>Status: BusinessBase {<br><br>public string StatusID {<br>}<br>public string StatusName{<br>}<br><br>}<br><br>StatusList: BussinesListBase {<br>}<br><br>So now for the databindings in your WinForm or in ASP controls:<br><br>Person myperson = Person.GetPerson(1);<br>personBindingSource.DataSource=myperson;<br>personStatusBindingSource.dataSource=personBindingSource;<br>personStatusBindingSource.DataNember="PersonStatus";<br>statusListBindingSource.DataSource=StatusList.GetStatusList();<br><br>cboPersonStatus.DataSource=statusListBindingSource;<br>cboPersonStatus.ValueMember="StatusID";<br>cboPersonStatus.DisplayMember="StatusName";<br>cboPersonStatus.DataBindings.Add("ValueMember",personStatusBindingSource,"StatusID");<br><br>Following the example of projecttracker is so easy to make this effort. DBManager is my DAL.<br><br><br><br><br><br></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
