<html><header><title>Which DataPortal to use?</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Which DataPortal to use?</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/1249.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>DeHaynes posted on Monday, September 18, 2006</h2><P>&nbsp;&nbsp;&nbsp;Ok, I have gone through the framework and modified it quite a bit.&nbsp; I have gone through the process of building datatables, stored procedures, business objects, etc, etc.&nbsp; I have a fully working system, but I am going to take the advice of a couple of people and start from scratch with the intent of subclassing instead of modifying the existing framework.&nbsp; This will be my production framework.</P>
<P>&nbsp;&nbsp;&nbsp;I need to make a final decision which DataPortal type to use?&nbsp; Remoting, Web Services or Enterprise Services.&nbsp; So I am interested in some opinions on how you have set it up along with some numbers.&nbsp; </P>
<P>&nbsp;&nbsp;&nbsp;My situation is I am building the company central database.&nbsp; Yes, that is right, they don't have one yet.&nbsp; I plan on using CSLA-type BOs for every application we have that requires access with the SQL Server.&nbsp; For hardware, we have a brand new IBM xSeries server with a 3.06 Ghz XEON and an open slot for another CPU.&nbsp; It has 1.5 Gb of RAM and is&nbsp;running SQL2005.&nbsp; I had planned on running the CSLA application server on the same box as the SQL server.&nbsp; My company only has 50 employees so I expect our connection load to be around 75 - 150 when considering&nbsp;Internet access.&nbsp; I read about the different connection options in the forums and I don't want to put words in Rocky's mouth but he seemed to say he did ES only because he was forced to.&nbsp; He didn't see an issue with using Remoting or Web Services.</P>
<P>&nbsp;&nbsp;&nbsp;So have any of you put the BOs into production and what is your opinion?</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Monday, September 18, 2006</h2>To be very clear: my absolute preference is the LocalProxy - avoiding all the overhead, complexity and cost of a remote app server. If you can find any way to use the local data portal configuration, you should do it!<br><br>I created the Web Service channel as a proof of concept - illustrating that even a technology not designed for client/server can still be used for the purpose. And illustrating the basic code you'd need to support WSE to get the WS-* benefits. But I personally would lean away from using the Web Service channel if possible.<br><br>I created the Enterprise Services channel because there are cases where Enterprise Services (DCOM) is faster on the network. It is also the case that COM+ provides more management capabilities than IIS. Finally, this channel doesn't require IIS on the server, and some companies view this as a key benefit. However, this channel does use DCOM, and thus is problematic for no-touch or ClickOnce deployment, and so I would lean away from this channel as well.<br><br>That leaves the Remoting channel. The only drawback to this channel is the oft-repeated Microsoft mantra to "avoid Remoting". They give that advice primarily to avoid headaches when upgrading to WCF in the future. But within the context of CSLA that isn't such a big issue, since there'll be a WCF channel, and you should be able to switch to it with little or no impact on your application.<br><br>But again, physical n-tier is costly - in terms of hardware, hardware support, points of failure, software complexity, software support and performance. If you can avoid physical n-tier, you should.<br><br>If you need n-tier to get scalability or security, then make sure those benefits outweigh the costs.<br><br>If you still decide to do n-tier, then I'd lean toward the Remoting data portal channel as my first option.<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>DeHaynes replied on Monday, September 18, 2006</h2><P>&nbsp;&nbsp;&nbsp;I am a little confused.&nbsp; In order to use local Data Portal, then I would have to have the factory setup on every client right?</P>
<P>&nbsp;&nbsp;&nbsp;Maybe I need to do some more reading.</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Monday, September 18, 2006</h2>No, you shouldn't need anything special on the client, except of course the .Net framework itself.&nbsp; The local data portal is the default; everything runs on the client, and the client connects directly to the database.<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Monday, September 18, 2006</h2>One of the primary benefits of the data portal is that you can switch from local (2-tier) to remote (3-tier) with no changes to your application's code.<br><br>Now you can defeat that benefit by making certain architectural or coding decisions, but the core and intended behavior is to provide this flexibility.<br><br>There are coding errors you can make in a 2-tier model that prevent moving to 3-tier. But in my view those are bugs, and should be avoided. This is why I recommend continual n-tier testing, even if you plan to deploy in a 2-tier mode. N-tier testing will rapidly uncover such bugs so you can fix them early.<br><br>There are architectural decisions you can make - most notably having a separate DAL assembly - that <i>might </i>make 2-tier not work. But the reality is that a properly designed DAL could be installed on the client as well as on a server, and so the 2-/3-tier flexibility should be retained.<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>DeHaynes replied on Monday, September 18, 2006</h2><P>&nbsp;&nbsp;&nbsp;If I understand right, when you compile your application, you will get a DLL that is the framework.&nbsp; When you set the application to run in in a Local Data Portal mode, you put the settings into App.config to tell it to rode the code that will make it do the data-calls itself.</P>
<P>&nbsp;&nbsp;&nbsp;If later you want to centralize the data acces, you just change the settings in App.config and that will instruct it to run the code to communicate with a network computer via remoting, Web Services, or ES.&nbsp; No matter, the DLL will already be on the client.</P>
<P>&nbsp;&nbsp;&nbsp;Is that right?</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Monday, September 18, 2006</h2>Yes, that is essentially correct.<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>DansDreams replied on Tuesday, September 19, 2006</h2><P><BLOCKQUOTE><div><img src="/Themes/default/images/icon-quote.gif"> <strong>RockfordLhotka:</strong></div><div>To be very clear: my absolute preference is the LocalProxy - avoiding all the overhead, complexity and cost of a remote app server. If you can find any way to use the local data portal configuration, you should do it!</P>
<P>&lt;snip&gt;</P>
<P><BR>That leaves the Remoting channel. The only drawback to this channel is the oft-repeated Microsoft mantra to "avoid Remoting". They give that advice primarily to avoid headaches when upgrading to WCF in the future. But within the context of CSLA that isn't such a big issue, since there'll be a WCF channel, and you should be able to switch to it with little or no impact on your application.<BR><BR></div></BLOCKQUOTE></P>
<P>I've also always just assumed I'd use the LocalProxy (direct DB connection) for performance reasons unless I needed to do something else.&nbsp; But if you're using the remoting server and the application is set up to use SQL security there would be a performance bonus from the database connection pooling, right?&nbsp; Given the&nbsp;appealing security bonus remoting offers and what may be just a trade-off of more or less equivalent performance results, I'm becoming intrigued by remoting as my "standard" implementation.</P>
<P>Secondly, I just went to the Microsoft WCF (or WinCF as the slides called it) presentation.&nbsp; Yeah they gave the "avoid remoting" mantra, but as you say it was in the context of what you'll need to do to upgrade to WCF.</P>
<P>Which leads me to my question, Rocky&nbsp;- have you written of what your WCF channel will look like?&nbsp; Given that WCF itself is similar to your design in that the "channel" is simply a configured option and really transparent to the application, it would seem that implementing a WCF channel within your design would end up with a configurable channel that has as one of its options a configurable channel.&nbsp; Or is the end result going to be more along the lines of choosing between the current paradigm and switching to WCF and configuring that via the&nbsp;standard WCF configuration?</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Tuesday, September 19, 2006</h2><BLOCKQUOTE><div><img src="/Themes/default/images/icon-quote.gif"> <strong>DansDreams:</strong></div><div><p>I've also always just assumed I'd use the LocalProxy (direct DB connection) for performance reasons unless I needed to do something else.&nbsp; But if you're using the remoting server and the application is set up to use SQL security there would be a performance bonus from the database connection pooling, right?&nbsp; Given the&nbsp;appealing security bonus remoting offers and what may be just a trade-off of more or less equivalent performance results, I'm becoming intrigued by remoting as my "standard" implementation.</p></div></BLOCKQUOTE><br><br>I am reasonably convinced that database connection pooling will not offset the performance hit incurred by communicating with an application server - at least not until you have a large number of users.<br><br>You get connection "pooling" on your client too you know. Your own connection(s) are pooled for your subsequent use. As long as the user is hitting the database on a relatively frequent basis (there's a timeout somewhere), their connection actually stays open and is reused over and over again.<br><br>The value of the app server and pooling is that the database itself will have fewer open connections to deal with. So the scalability benefit of having an app server comes when the number of open connections to the database starts to impact the database server's performance.<br><br>Another possible perf benefit to an app server is where the client is using a (comparatively) slow link to the servers. Since talking to the database can be chatty, direct communication over a slow, or high latency, connection can be very problematic. In that case, the data portal is helpful, because it sends an entire object graph in one call - allowing the app server to handle the chatty dialog with the database (presumably over a much higher speed connection).<br><p><BLOCKQUOTE><div><img src="/Themes/default/images/icon-quote.gif"> <strong>DansDreams:</strong></div><div></p><p>Which leads me to my question, Rocky&nbsp;- have you written of what your WCF channel will look like?&nbsp; Given that WCF itself is similar to your design in that the "channel" is simply a configured option and really transparent to the application, it would seem that implementing a WCF channel within your design would end up with a configurable channel that has as one of its options a configurable channel.&nbsp; Or is the end result going to be more along the lines of choosing between the current paradigm and switching to WCF and configuring that via the&nbsp;standard WCF configuration?</p></div></BLOCKQUOTE><br><br>I do have a prototype WCF channel available that you can look at - <a href="http://www.lhotka.net/Article.aspx?area=11&amp;id=0eec56bb-2a61-47c4-a9ca-f98371db1cad">click here</a>.<br><br>However, that's really only half the story, because it doesn't allow you to use DataContract. To make DataContract work requires deeper changes in the framework, because it requires avoiding all use of the BinaryFormatter in favor of the new NetDataContractSerializer.<br><br>So that WCF channel works today, against .NET 2.0 apps that use Serializable objects. But there'll be an updated version of CSLA for .NET 3.0 - see <a href="http://www.lhotka.net/Article.aspx?area=4&amp;id=6ae50dc6-7fa5-4568-ab53-05869f0b4dd4">the roadmap</a>.<br><br><br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>DansDreams replied on Tuesday, September 19, 2006</h2><P><BLOCKQUOTE><div><img src="/Themes/default/images/icon-quote.gif"> <strong>RockfordLhotka:</strong></div><div><BR><BR>You get connection "pooling" on your client too you know. Your own connection(s) are pooled for your subsequent use. As long as the user is hitting the database on a relatively frequent basis (there's a timeout somewhere), their connection actually stays open and is reused over and over again.<BR><BR>The value of the app server and pooling is that the database itself will have fewer open connections to deal with. So the scalability benefit of having an app server comes when the number of open connections to the database starts to impact the database server's performance.</P>
<P></div></BLOCKQUOTE></P>
<P>Right.&nbsp; I guess the important point here (an enlightening duh moment for me) is that since it's a fairly trivial matter to switch to the remoting server when you have reason to believe the total database connections have become a bottleneck, that's the proper approach from a performance perspective since by definition you can't realize any performance advantage from reducing them until they are a problem.</P>
<P><BR><BLOCKQUOTE><div><img src="/Themes/default/images/icon-quote.gif"> <strong>RockfordLhotka:</strong></div><div><BR>I do have a prototype WCF channel available that you can look at - <A href="http://www.lhotka.net/Article.aspx?area=11&amp;id=0eec56bb-2a61-47c4-a9ca-f98371db1cad">click here</A>.<BR><BR>However, that's really only half the story, because it doesn't allow you to use DataContract. To make DataContract work requires deeper changes in the framework, because it requires avoiding all use of the BinaryFormatter in favor of the new NetDataContractSerializer.<BR><BR>So that WCF channel works today, against .NET 2.0 apps that use Serializable objects. But there'll be an updated version of CSLA for .NET 3.0 - see <A href="http://www.lhotka.net/Article.aspx?area=4&amp;id=6ae50dc6-7fa5-4568-ab53-05869f0b4dd4">the roadmap</A>.<BR><BR></div></BLOCKQUOTE></P>
<P>I think that answers my real question.&nbsp; I was struggling to align the current CSLA design with the contract paradigm, since they're essentially alternative solutions to the same problem.&nbsp; (Not the data contract, the&nbsp;channel one, whatever the WCF term is.)</P>
<P>On that note - I did ask the presenter yesterday about remoting under WCF.&nbsp; Since WCF seems to be largely a wrapper for the underlying communication, serialization and security protocols, you would still be ultimately making the determination of what communication protocal is best for your situation.&nbsp; And in that case wouldn't you end up with remoting as often as you do today?&nbsp; The presenter indicated that you <EM>could</EM> set up a remoting under WCF but his response was sort of one of "why would any sane person do that?" which seemed to come mostly from the Microsoft mantra that remoting is dead.</P>
<P>Or is the paradigm that you could end up with the same end result as remoting by configuring the WCF contract and channel, an HTTP channel talking to a server hosted under IIS, without it being true remoting as we know it today?</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>DansDreams replied on Tuesday, September 19, 2006</h2><P>Actually, remembering the presentation I can partly answer my own questions.</P>
<P>Part of the position of remoting being dead was that the concept of your objects moving around the network is so "yesterday" compared to SOA.</P>
<P>Guess to that&nbsp;degree the concept of "smart mobile objects" is going to be even harder to justify against the juggernaut caused by Microsoft's endorsement of SOA, eh?</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Tuesday, September 19, 2006</h2><BLOCKQUOTE><div><img src="/Themes/default/images/icon-quote.gif"> <strong>DansDreams:</strong></div><div><p>Guess to that&nbsp;degree the concept of "smart mobile objects" is going to be even harder to justify against the juggernaut caused by Microsoft's endorsement of SOA, eh?</p></div></BLOCKQUOTE><br><br>Well, that's true. But our industry is circular in nature. SOA is just a fad - a rebirth of EAI from the 90's and EDI from the late 80's. Just like SaaS is a rebirth of ASP, which was a rebirth of "outsourcing" from the early 90's (the word meant something different then).<br><br>Marketing people get these ideas (most of which have little basis in reality) and they push them until they fail. Then they rename the idea and push again. Each time they make a lot of money off the newest crop of CxO's, who weren't around the last time they got ripped off by the idea.<br><br>I speak at so many events around the world (15-20 per year), and attendees, by and large, don't buy into the "SOA replaces n-tier client/server OO" crap. Service-orientation is a powerful concept and a good tool, but it doesn't replace OO any more than OO replaced procedural design. And it doesn't replace client/server. The goals of client/server and the goals of SO are fundamentally different, and if you use client/server to solve an SO problem you are in trouble - and visa versa.<br><br>Microsoft is very good at getting their people lined up along the party line. All working together to push a common agenda. But due to their size, they have a hard time anticipating and adjusting to market realities.<br><br>The reality is that SOA is at or beyond the peak of hype (Gartner Group has this excellent "hype cycle" chart, from which I pull the concept). The slope is all downhill from here, as people actually try SOA and find out that it is very useful, but only in very limited scenarios. And that if you "SOA" a client/server scenario you get terrible performance and software that is very costly to build and maintain.<br><br>Note that I am not saying SOA/SO is bad. On the contrary, when used to solve the problem for which it is designed (inter-application communication), it is excellent. By far the best solution evolved to date. But when misused (as a replacement for client/server for example), it is a <i>terrible </i>solution.<br><br>Use the right tool for the right job...<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Tuesday, September 19, 2006</h2><BLOCKQUOTE><div><img src="/Themes/default/images/icon-quote.gif"> <strong>DansDreams:</strong></div><div><p>Or is the paradigm that you could end up with the same end result as remoting by configuring the WCF contract and channel, an HTTP channel talking to a server hosted under IIS, without it being true remoting as we know it today?</p></div></BLOCKQUOTE><br><br>That's right. WCF <i>does not </i>do .NET Remoting as we know it today. At least in terms of the wire protocol.<br><br>However, look at the architecture of WCF: channels, sinks, formatters, etc. It is <i>very much</i> inspired by the architecture of Remoting. Much more so than the architecture of Web Services for instance.<br><br>But how many of us care what's on the wire? Really?<br><br>We care about the functionality provided by the technology. And it is at this level where WCF provides comparable functionality to Remoting. And to Web Services (asmx and WSE), Enterprise Services and MSMQ.<br><br>In the case of ES and MSMQ, WCF actually uses them behind the scenes - it is a wrapper.<br><br>But for Remoting, asmx and WSE, WCF is a complete replacement, and it does not use any of that pre-existing technology behind the scenes. What it does do, is provide the moral equivalents to the <i>functionalty </i>of those technologies.<br><br>In the case of Web Services, because SOAP is a standard, you can configure WCF to be wire-protocol compatible. In other words, WCF essentially has a "compatibility mode" so it can talk to older-style Web Services.<br><br>No such compatibility mode exists for Remoting. So the drawback to Remoting, when migrating to WCF, is that you must upgrade both the client and server to WCF at once. And that can be a serious drawback in some cases.<br><br>In the case of CSLA and the data portal, due to the use of mobile objects you need to upgrade client and server in lockstep regardless. So the Remoting-&gt;WCF issue is, in my view, secondary and relatively unimportant. By the time you've chosen to use mobile objects (via CSLA or not), you have acknowledged that your client and server are part of a single client/server application anyway.<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>DansDreams replied on Wednesday, September 20, 2006</h2><P><BLOCKQUOTE><div><img src="/Themes/default/images/icon-quote.gif"> <strong>RockfordLhotka:</strong></div><div><BR>In the case of CSLA and the data portal, due to the use of mobile objects you need to upgrade client and server in lockstep regardless. So the Remoting-&gt;WCF issue is, in my view, secondary and relatively unimportant. By the time you've chosen to use mobile objects (via CSLA or not), you have acknowledged that your client and server are part of a single client/server application anyway.<BR></div></BLOCKQUOTE></P>
<P>Which is why I would expect Microsoft and other SOA pushers to&nbsp;suggest that mobile objects are such a bad idea.</P>
<P>And this I guess gets back to something you've written about several times - the seemingly obvious flaw in considering service&nbsp;type communication as the basis for <EM>all</EM> communication, even intranet inter-tier.</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Wednesday, September 20, 2006</h2>




<DIV align=left><SPAN class=343332200-21092006><FONT face=Arial color=#0000ff size=2>Yes, in the SOA world there is a lot of focus on the 
_syntactic_ concerns around communication, to the complete and utter exclusion 
of _semantic_ concerns.</FONT></SPAN></DIV>
<DIV align=left><SPAN class=343332200-21092006><FONT face=Arial color=#0000ff size=2></FONT></SPAN>&nbsp;</DIV>
<DIV align=left><SPAN class=343332200-21092006><FONT face=Arial color=#0000ff size=2>In other words, they are very focused on ensuring that the 
service endpoint and its acceptable communication parameters be clearly defined 
and unambiguous. And they are very focused on ensuring that the procedure API 
and parameter serialization conform to a strict contract. But the _meaning_ of 
the data is entirely outside the scope of anything within 
SOA.</FONT></SPAN></DIV>
<DIV align=left><SPAN class=343332200-21092006><FONT face=Arial color=#0000ff size=2></FONT></SPAN>&nbsp;</DIV>
<DIV align=left><SPAN class=343332200-21092006><FONT face=Arial color=#0000ff size=2>So as long as you conform to the syntax of the contract, 
you can send anything - even things that have no meaning to the 
recipient.</FONT></SPAN></DIV>
<DIV align=left><SPAN class=343332200-21092006><FONT face=Arial color=#0000ff size=2></FONT></SPAN>&nbsp;</DIV>
<DIV align=left><SPAN class=343332200-21092006><FONT face=Arial color=#0000ff size=2>I still remember a project from 1996, where I worked with a 
client that had been part of a working group for FIVE years: trying to define 
the word "product". They had, long before, defined the syntactic issues around 
how to transfer data (using COBOL-style data maps, a moral predecessor to 
today's XSD). But the _semantic_ meaning of the data was so different between 
the various parties that they'd spent five years unable to implement 
anything!</FONT></SPAN></DIV>
<DIV align=left><SPAN class=343332200-21092006><FONT face=Arial color=#0000ff size=2></FONT></SPAN>&nbsp;</DIV>
<DIV align=left><SPAN class=343332200-21092006><FONT face=Arial color=#0000ff size=2>Not that mobile objects would have solved the issue 
outright. But that story illustrates the importance of semantic information, and 
mobile objects, by their very nature, bring semantic information (behavior) 
along with the data itself.</FONT></SPAN></DIV>
<DIV align=left><SPAN class=343332200-21092006><FONT face=Arial color=#0000ff size=2></FONT></SPAN>&nbsp;</DIV>
<DIV align=left><SPAN class=343332200-21092006><FONT face=Arial color=#0000ff size=2>So while SOA is incredibly valuable when used for the right 
reasons, it is a choice that can cripple applications when used in other 
contexts - specifically because it goes out of its way to prevent the sharing of 
any sort of semantic meaning about the data that is ferried across the wire in 
those clearly defined contracts.</FONT></SPAN></DIV>
<DIV align=left><SPAN class=343332200-21092006><FONT face=Arial color=#0000ff size=2></FONT></SPAN>&nbsp;</DIV>
<DIV align=left><SPAN class=343332200-21092006><FONT face=Arial color=#0000ff size=2>Rocky</FONT></SPAN></DIV><BR>
<BLOCKQUOTE>
  <DIV class=OutlookMessageHeader align=left>
  <HR>
  <FONT face=Tahoma size=2><B>From:</B> DansDreams [mailto:cslanet@lhotka.net] 
  <BR><B>Sent:</B> Wednesday, September 20, 2006 12:33 PM<BR><B>To:</B> 
  rocky@lhotka.net<BR><B>Subject:</B> Re: [CSLA .NET] Which DataPortal to 
  use?<BR></FONT><BR></DIV>
  <DIV></DIV>
  <P>
  <BLOCKQUOTE>
    <DIV><IMG src="/Themes/default/images/icon-quote.gif"> 
    <STRONG>RockfordLhotka:</STRONG></DIV>
    <DIV><BR>In the case of CSLA and the data portal, due to the use of mobile 
    objects you need to upgrade client and server in lockstep regardless. So the 
    Remoting-&gt;WCF issue is, in my view, secondary and relatively unimportant. 
    By the time you've chosen to use mobile objects (via CSLA or not), you have 
    acknowledged that your client and server are part of a single client/server 
    application anyway.<BR></DIV></BLOCKQUOTE>
  <P></P>
  <P>Which is why I would expect Microsoft and other SOA pushers to&nbsp;suggest 
  that mobile objects are such a bad idea.</P>
  <P>And this I guess gets back to something you've written about several times 
  - the seemingly obvious flaw in considering service&nbsp;type communication as 
  the basis for <EM>all</EM> communication, even intranet 
  inter-tier.</P><BR><BR><BR></BLOCKQUOTE></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>DansDreams replied on Wednesday, September 20, 2006</h2><BLOCKQUOTE><div><img src="/Themes/default/images/icon-quote.gif"> <strong>RockfordLhotka:</strong></div><div> 

<DIV align=left><SPAN class=343332200-21092006><FONT face=Arial color=#0000ff size=2>COBOL-style data maps</FONT></SPAN></DIV>
<DIV align=left><SPAN class=343332200-21092006><FONT face=Arial color=#0000ff size=2></div></BLOCKQUOTE></FONT></SPAN></DIV>
<DIV align=left><SPAN class=343332200-21092006><FONT face=Arial color=#0000ff size=2></FONT></SPAN>&nbsp;</DIV>
<DIV align=left><SPAN class=343332200-21092006><FONT face=Arial color=#0000ff size=2>Oh lordy, the memories.&nbsp; We show our age.</FONT></SPAN></DIV></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>shawndewet replied on Thursday, November 26, 2009</h2>Rocky said:<br />"I am reasonably convinced that database connection pooling will not offset the performance hit incurred by communicating with an application server - at least not until you have a large number of users.<br />...<br />The value of the app server and pooling is that the database itself will have fewer open connections to deal with. So the scalability benefit of having an app server comes when the number of open connections to the database starts to impact the database server's performance."<br /><br />Have there been any studies/experiences/recommendations regarding what this number of database connections is at which point one should start considering use of a remote dataportal instead of the client dataportal?<br /><br />I KNOW someone's first answer will contain "this is dependant on the hardware", so I'll lay out a few scenario's (and leave it to you to imagine the "typical" hardware that one could expect to find in their server rooms):<br />1) a small business with 5 to 20 users connected concurrently;<br />2) a medium business with 15 to 50 users connected concurrently;<br />3) a larger business with 30 to 100 users connected concurrently;<br />4) a corporation with 70+ users connected concurrently<br />5) anything bigger is typically out of my market.<br /><br />So I'm just trying to find out if there are recommendations/experiences about when to use the remote dataportal (and which one (WCF, etc.) to use).<br /><br />Any advice?</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Thursday, November 26, 2009</h2>As you guess, it does depend on the hardware, and on what other apps are<br />using the database.<br /><br />Using "modern hardware" you can probably assume a database server is minimum<br />quad core, probably eight core. Minimum 8 gb ram, probably 16+. Minimum 7200<br />rpm drives in a RAID, probably 10k rpm in a RAID or a SAN.<br /><br />Such database servers can easily handle around 500 concurrent users for an<br />app, unless that app is incredibly badly written.<br /><br />So my rule of thumb is (in terms of scalability) to go 2-tier unless I have<br />hundreds of concurrent users.<br /><br />OR the users are in a WAN (because WAN networks have higher latency).<br /><br />OR there are security concerns where the connection strings need to be moved<br />off the client and onto an app server.</div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
