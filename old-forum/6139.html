<html><header><title>Common Language Runtime detected an invalid program.</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Common Language Runtime detected an invalid program.</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/6139.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>rfcdejong posted on Tuesday, January 13, 2009</h2>What a wonderfull exception, wow..<br />[System.InvalidProgramException] = {"Common Language Runtime detected an invalid program."}<br /><br />I guess having a relatie business object being inherited by a person business object is the problem.. while using just 1 smart-factory which knows uses typeof() the generic type.<br /><br />Does anyone has an idea what i do wrong? Please reply if u have a suggestion or have an idea.. or even if u don't know either hehe. Just such a strange exception!<br /><br />The MethodCaller.CallMethod dynamic method stuff just doesn't know anymore.<br /><br />      try<br />      {<br />        result = methodHandle.DynamicMethod(obj, inParams);<br />      }<br />      catch (Exception ex)<br /><br /><br />obj --> {U4A.Ceedrie.Data.Relatiemanagement.Factory.RelatieFactory}<br /><br />inParams --> {Csla.SingleCriteria}<br /><br /><br />Persoon business object<br /><br />    [CslaFactory("Factory Type=U4A.Ceedrie.Data.Relatiemanagement.Factory.RelatieFactory, Data.Relatiemanagement;Item Type=U4A.Ceedrie.Business.Relatiemanagement.Persoon, Business.Relatiemanagement")]<br />    public class Persoon : Relatie<br />...<br /><br />Relatie business object<br /><br />    [CslaFactory("Factory Type=U4A.Ceedrie.Data.Relatiemanagement.Factory.RelatieFactory, Data.Relatiemanagement;Item Type=U4A.Ceedrie.Business.Relatiemanagement.Relatie, Business.Relatiemanagement")]<br />    public class Relatie : U4ABusinessBase><br />...<br /><br />RelatieFactory : ObjectFactory<br /><br />implimenting a method<br /><br />        public Business.Relatiemanagement.Relatie Fetch(SingleCriteria, int> criteria)<br />        {<br />...</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>rfcdejong replied on Tuesday, January 13, 2009</h2>hmmm... the generic brackets aren't visible in my post, i guess the forum sees them as specials?</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>rfcdejong replied on Tuesday, January 13, 2009</h2>I managed to find that it's the signature in the ObjectFactory being the cause of this InvalidProgramException.

It seems that the signature cannot contain a generic, if it does then it doesn't say "Method not found", but it just gives this InvalidProgramException.

Maybe that the dynamic method implimentation isn't perfect yet? Maybe someone want to take a look at the implimentation in Methodcaller.cs?

Greetings,
Raymond de Jong</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>rfcdejong replied on Friday, January 16, 2009</h2><BLOCKQUOTE><div><img src="/Themes/default/images/icon-quote.gif"> <strong>rfcdejong:</strong></div><div>I managed to find that it's the signature in the ObjectFactory being the cause of this InvalidProgramException.<br /><br />It seems that the signature cannot contain a generic, if it does then it doesn't say "Method not found", but it just gives this InvalidProgramException.<br /><br />Maybe that the dynamic method implimentation isn't perfect yet? Maybe someone want to take a look at the implimentation in Methodcaller.cs?<br /><br />Greetings,<br />Raymond de Jong</div></BLOCKQUOTE><br /><br />Can this 'bug' or 'wish' be added into the bugtracker system?<br /><br /></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Friday, January 16, 2009</h2>The exception you're getting is usually caused by a bug in the compiler.&nbsp; Can you post a small complete sample that reproduces the issue?<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>rfcdejong replied on Friday, January 16, 2009</h2>i'll try and create a small sample when i'm back at work</div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
