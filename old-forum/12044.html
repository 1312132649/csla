<html><header><title>TriggerAction customization</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>TriggerAction customization</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/12044.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>TygreWolf posted on Thursday, June 27, 2013</h2><p>Two questions relating to the TriggerAction control and the XAML around it.&nbsp; First, I&#39;ve read Rocky&#39;s blog post <a href="http://www.lhotka.net/weblog/UsingTheTriggerActionControl.aspx">here</a>&nbsp;about the control.&nbsp; My questions are:<br /><br />1. Does the TriggerEvent attribute absolutely have to be in the format<br /><br />public void MyAction(object sender, ExecuteEventArgs e)<br /><br />or can it be:<br /><br />public void MyAction(object sender, MyOwnEventArgs e) where MyOwnEventArgs inherits directly from System.EventArgs?<br /><br />2. After the TriggerEvent is defined, how can I use MethodParameter to define a particular parameter from the EventArgs to pass into a specific function (MethodName) that doesn&#39;t have the same signature?<br /><br />Example: MyOwnEventArgs contains a UserInfo object.&nbsp; The Method which the TriggerAction will call&nbsp;only takes a UserInfo object.&nbsp; What do I put&nbsp;as a&nbsp;MethodParameter value to pull the UserInfo object out of my event args and pass it to the LoadUser method?<br /><span style="color:blue;"><span style="color:blue;"><br />&lt;</span><span style="color:#a31515;">v</span><span style="color:blue;">:</span><span style="color:#a31515;">UserList</span><span style="color:red;">&nbsp;x</span><span style="color:blue;">:</span><span style="color:red;">Name</span><span style="color:blue;">=</span><span style="color:blue;">&quot;UserList&quot;</span><span style="color:blue;">/&gt;</span><br /><span style="color:blue;">&lt;</span><span style="color:#a31515;">csla</span><span style="color:blue;">:</span><span style="color:#a31515;">TriggerAction</span><span style="color:red;">&nbsp;x</span><span style="color:blue;">:</span><span style="color:red;">Name</span><span style="color:blue;">=</span><span style="color:blue;">&quot;UserSelectedTrigger&quot;</span><span style="color:red;">&nbsp;<br />TargetControl</span><span style="color:blue;">=&quot;{</span><span style="color:#a31515;">Binding</span><span style="color:red;">&nbsp;ElementName</span><span style="color:blue;">=</span><span style="color:blue;">UserList</span><span style="color:blue;">}</span><span style="color:blue;">&quot;</span><span style="color:red;">&nbsp;<br />TriggerEvent</span><span style="color:blue;">=</span><span style="color:blue;">&quot;OnUserSelected&quot;</span><span style="color:red;">&nbsp;<br />MethodName</span><span style="color:blue;">=</span><span style="color:blue;">&quot;LoadUser&quot;</span><span style="color:red;">&nbsp;<br />MethodParameter</span><span style="color:blue;">=</span><span style="color:blue;">&quot;???&quot;</span><span style="color:blue;">/&gt;</span></span><br /><br />-Jason</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>TygreWolf replied on Thursday, June 27, 2013</h2><p>Alright, I&#39;ve simplified the design of my view a little bit.&nbsp; I&#39;m attempting to call a method &quot;LoadUser&quot; on my ViewModel when an item is selected on a datagrid.&nbsp; I&#39;m using a CSLA TriggerAction to do via the following code:<br /><br /><span style="COLOR:blue;">&lt;</span><span style="COLOR:#a31515;">DataGrid</span><span style="COLOR:red;">&nbsp;x</span><span style="COLOR:blue;">:</span><span style="COLOR:red;">Name</span><span style="COLOR:blue;">=</span><span style="COLOR:blue;">&quot;DgUsers&quot;</span><span style="COLOR:red;">&nbsp;ItemsSource</span><span style="COLOR:blue;">=&quot;{</span><span style="COLOR:#a31515;">Binding</span><span style="COLOR:red;">&nbsp;Source</span><span style="COLOR:blue;">={</span><span style="COLOR:#a31515;">StaticResource</span><span style="COLOR:red;">&nbsp;UserListModelViewSource</span><span style="COLOR:blue;">}}</span><span style="COLOR:blue;">&quot;</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="COLOR:red;">&nbsp;AlternatingRowBackground</span><span style="COLOR:blue;">=</span><span style="COLOR:blue;">&quot;AliceBlue&quot;</span><span style="COLOR:red;">&nbsp;SelectionMode</span><span style="COLOR:blue;">=</span><span style="COLOR:blue;">&quot;Single&quot;</span><span style="COLOR:red;">&nbsp;CanUserResizeRows</span><span style="COLOR:blue;">=</span><span style="COLOR:blue;">&quot;False&quot;</span><span style="COLOR:red;">&nbsp;DockPanel.Dock</span><span style="COLOR:blue;">=</span><span style="COLOR:blue;">&quot;Top&quot;</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="COLOR:red;">&nbsp;HorizontalAlignment</span><span style="COLOR:blue;">=</span><span style="COLOR:blue;">&quot;Stretch&quot;</span><span style="COLOR:red;">&nbsp;ColumnWidth</span><span style="COLOR:blue;">=</span><span style="COLOR:blue;">&quot;*&quot;</span><span style="COLOR:red;">&nbsp;CanUserAddRows</span><span style="COLOR:blue;">=</span><span style="COLOR:blue;">&quot;False&quot;</span><span style="COLOR:red;">&nbsp;AutoGeneratingColumn</span><span style="COLOR:blue;">=</span><span style="COLOR:blue;">&quot;DgUsers_AutoGeneratingColumn&quot;</span><span style="COLOR:blue;">&gt;</span><br /><span style="COLOR:blue;">&lt;/</span><span style="COLOR:#a31515;">DataGrid</span><span style="COLOR:blue;">&gt;</span><br /><span style="COLOR:blue;">&lt;</span><span style="COLOR:#a31515;">csla</span><span style="COLOR:blue;">:</span><span style="COLOR:#a31515;">TriggerAction</span><span style="COLOR:red;">&nbsp;x</span><span style="COLOR:blue;">:</span><span style="COLOR:red;">Name</span><span style="COLOR:blue;">=</span><span style="COLOR:blue;">&quot;SelectedUserTrigger&quot;</span><span style="COLOR:red;">&nbsp;TargetControl</span><span style="COLOR:blue;">=&quot;{</span><span style="COLOR:#a31515;">Binding</span><span style="COLOR:red;">&nbsp;ElementName</span><span style="COLOR:blue;">=</span><span style="COLOR:blue;">DgUsers</span><span style="COLOR:blue;">,</span><span style="COLOR:red;">&nbsp;Path</span><span style="COLOR:blue;">=</span><span style="COLOR:blue;">SelectedItem</span><span style="COLOR:blue;">}</span><span style="COLOR:blue;">&quot;</span><span style="COLOR:red;">&nbsp;MethodName</span><span style="COLOR:blue;">=</span><span style="COLOR:blue;">&quot;LoadUser&quot;</span><span style="COLOR:red;">&nbsp;DockPanel.Dock</span><span style="COLOR:blue;">=</span><span style="COLOR:blue;">&quot;Bottom&quot;</span><span style="COLOR:blue;">/&gt;<br /><br /><span style="color:#000000;">At this point, I get first chance exceptions (2 similar, but not exact errors) occurring when I select a user in the grid:<br /><br />System.Windows.Data Error: 23 : Cannot convert &#39;Jane Smith&#39; from type &#39;UserInfo&#39; to type &#39;System.Windows.FrameworkElement&#39; for &#39;en-US&#39; culture with default conversions; consider using Converter property of Binding. NotSupportedException:&#39;System.NotSupportedException: TypeConverter cannot convert from STIPEMSimulator.Library.BusinessObjects.Users.UserInfo.<br />&nbsp;&nbsp; at System.ComponentModel.TypeConverter.GetConvertFromException(Object value)<br />&nbsp;&nbsp; at System.ComponentModel.TypeConverter.ConvertFrom(ITypeDescriptorContext context, CultureInfo culture, Object value)<br />&nbsp;&nbsp; at MS.Internal.Data.DefaultValueConverter.ConvertHelper(Object o, Type destinationType, DependencyObject targetElement, CultureInfo culture, Boolean isForward)&#39;<br />A first chance exception of type &#39;System.NotSupportedException&#39; occurred in PresentationFramework.dll<br />System.Windows.Data Error: 6 : &#39;ObjectSourceConverter&#39; converter failed to convert value &#39;Jane Smith&#39; (type &#39;UserInfo&#39;); fallback value will be used, if available. BindingExpression:Path=SelectedItem; DataItem=&#39;DataGrid&#39; (Name=&#39;DgUsers&#39;); target element is &#39;TriggerAction&#39; (Name=&#39;SelectedUserTrigger&#39;); target property is &#39;TargetControl&#39; (type &#39;FrameworkElement&#39;) NotSupportedException:&#39;System.NotSupportedException: TypeConverter cannot convert from STIPEMSimulator.Library.BusinessObjects.Users.UserInfo.<br />&nbsp;&nbsp; at MS.Internal.Data.DefaultValueConverter.ConvertHelper(Object o, Type destinationType, DependencyObject targetElement, CultureInfo culture, Boolean isForward)<br />&nbsp;&nbsp; at MS.Internal.Data.ObjectSourceConverter.Convert(Object o, Type type, Object parameter, CultureInfo culture)<br />&nbsp;&nbsp; at System.Windows.Data.BindingExpression.ConvertHelper(IValueConverter converter, Object value, Type targetType, Object parameter, CultureInfo culture)&#39;<br /><br />Any thoughts here?&nbsp; The dgUsers data grid is bound to a CSLA ViewModel&lt;UserList&gt;, where UserList is a ReadOnlyList of UserInfo objects.</span></span></p></div><div style='padding:0 15 3 15;background-color:lightgreen'><h2>TygreWolf replied on Thursday, June 27, 2013</h2><p>Nevermind, found my answer.<br /><br />The correct usage is:<br /><br /><span style="color:blue;">&lt;</span><span style="color:#a31515;">csla</span><span style="color:blue;">:</span><span style="color:#a31515;">TriggerAction</span><span style="color:red;">&nbsp;x</span><span style="color:blue;">:</span><span style="color:red;">Name</span><span style="color:blue;">=</span><span style="color:blue;">&quot;SelectedUserTrigger&quot;</span><span style="color:red;">&nbsp;TargetControl</span><span style="color:blue;">=&quot;{</span><span style="color:#a31515;">Binding</span><span style="color:red;">&nbsp;ElementName</span><span style="color:blue;">=</span><span style="color:blue;">DgUsers</span><span style="color:blue;">}</span><span style="color:blue;">&quot;</span><span style="color:red;">&nbsp;TriggerEvent</span><span style="color:blue;">=</span><span style="color:blue;">&quot;SelectionChanged&quot;</span><span style="color:red;">&nbsp;MethodName</span><span style="color:blue;">=</span><span style="color:blue;">&quot;LoadUser&quot;</span><span style="color:red;">&nbsp;</span><span style="color:blue;">/&gt;</span></p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
