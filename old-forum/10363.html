<html><header><title>System.IO.FileNotFoundException</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>System.IO.FileNotFoundException</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/10363.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>tesicg posted on Wednesday, May 11, 2011</h2><p>Hi,</p>
<p>I&#39;m new user of CSLA and don&#39;t have enough&nbsp;experience. I use VS 2010 and Silverlight 4.</p>
<p>I&#39;ve created new Silverlight library (DLL) and added a class that deals with deserializing and decompressing (SharpZipLib library). The project compiles successfully.</p>
<p>There&#39;s a method in my class:</p>
<p>&nbsp;&nbsp;&nbsp; private static string Deserialize(byte[] bin)<br />&nbsp;&nbsp;&nbsp; {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; string res = null;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (bin == null)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return null;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; object o = Csla.Serialization.Mobile.MobileFormatter.Deserialize(bin);</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; XmlSerializer s = new XmlSerializer(o.GetType());<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; StringBuilder a = new StringBuilder();<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; TextWriter writer = new StringWriter(a);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; s.Serialize(writer, o);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; writer.Close();<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; res = a.ToString();</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return res;<br />&nbsp;&nbsp;&nbsp; }</p>
<p>The exception: System.IO.FileNotFoundException was thrown on calling this method:</p>
<p>object o = Csla.Serialization.Mobile.MobileFormatter.Deserialize(bin);</p>
<p>Detailed message is:</p>
<p>System.IO.FileNotFoundException was unhandled<br />&nbsp; Message=Could not load file or assembly &#39;System.Xml, Version=2.0.5.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e&#39; or one of its dependencies. The system cannot find the file specified.<br />&nbsp; Source=Csla<br />&nbsp; FileName=System.Xml, Version=2.0.5.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e<br />&nbsp; FusionLog==== Pre-bind state information ===<br />LOG: User = TESIC-8CC108F46\Goran<br />LOG: DisplayName = System.Xml, Version=2.0.5.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e<br />&nbsp;(Fully-specified)<br />LOG: Appbase = <a>file:///D:/Programiranje/Amphora/C1/ConsoleApplication1/ConsoleApplication1/bin/Debug/</a><br />LOG: Initial PrivatePath = NULL<br />Calling assembly : Csla, Version=4.1.0.0, Culture=neutral, PublicKeyToken=93be5fdc093e4c30.<br />===<br />LOG: This bind starts in default load context.<br />LOG: No application configuration file found.<br />LOG: Using host configuration file: <br />LOG: Using machine configuration file from c:\WINDOWS\Microsoft.NET\Framework\v4.0.30319\config\machine.config.<br />LOG: Post-policy reference: System.Xml, Version=2.0.5.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e<br />LOG: Attempting download of new URL <a>file:///D:/Programiranje/Amphora/C1/ConsoleApplication1/ConsoleApplication1/bin/Debug/System.Xml.DLL</a>.<br />LOG: Attempting download of new URL <a>file:///D:/Programiranje/Amphora/C1/ConsoleApplication1/ConsoleApplication1/bin/Debug/System.Xml/System.Xml.DLL</a>.<br />LOG: Attempting download of new URL <a>file:///D:/Programiranje/Amphora/C1/ConsoleApplication1/ConsoleApplication1/bin/Debug/System.Xml.EXE</a>.<br />LOG: Attempting download of new URL <a>file:///D:/Programiranje/Amphora/C1/ConsoleApplication1/ConsoleApplication1/bin/Debug/System.Xml/System.Xml.EXE</a>.</p>
<p>&nbsp; StackTrace:<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at Csla.Serialization.Mobile.MobileFormatter.Deserialize(Stream serializationStream)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at Csla.Serialization.Mobile.MobileFormatter.Deserialize(Byte[] data)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at SL1.Transformer.Deserialize(Byte[] bin) in D:\Programiranje\Amphora\C1\ConsoleApplication1\SL1\Transformer.cs:line 98<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at SL1.Transformer.DecodeToXml(String encodedText) in D:\Programiranje\Amphora\C1\ConsoleApplication1\SL1\Transformer.cs:line 136<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at ConsoleApplication1.Program.Main(String[] args) in D:\Programiranje\Amphora\C1\ConsoleApplication1\ConsoleApplication1\Program.cs:line 26<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at System.AppDomain._nExecuteAssembly(RuntimeAssembly assembly, String[] args)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at System.AppDomain.ExecuteAssembly(String assemblyFile, Evidence assemblySecurity, String[] args)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at System.Threading.ThreadHelper.ThreadStart_Context(Object state)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean ignoreSyncCtx)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at System.Threading.ThreadHelper.ThreadStart()<br />&nbsp; InnerException:</p>
<p>How to overcome this?</p>
<p>Thank you in advance.</p>
<p>Regards,</p>
<p>Goran</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Wednesday, May 11, 2011</h2><p>Your project compiles, but are there any warnings about missing reference exceptions?&nbsp; </p>
<p>It looks like you have a console application referencing a Silverlight library, which won&#39;t work (they are different runtimes).</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>tesicg replied on Wednesday, May 11, 2011</h2><p>You&#39;re right. I have a&nbsp;console applications that referencing Silverlight library. In that case I would please you for advise what to do.</p>
<p>Let me explain in short&nbsp;our situation. We need to create DLL or something else (but, what?) that should be imported in HP LoadRunner application. HP LoadRunner is&nbsp;application that uses for testing automation purposes. We need to&nbsp;automatically&nbsp;test our&nbsp;Silverlight application. After we import such Silverlight library into HP LoadRunner we should call functions from that library.</p>
<p>But, according to what you wrote - &quot;which won&#39;t work (they are different runtimes)&quot;, it seems to me it won&#39;t work as well because HP LoadRunner is not Silverlight based application. Does it mean Silverlight libraries&nbsp;works only with Silverlight based applications and DLLs?</p>
<p>Or I&#39;m wrong? Is it possible to import such Silverlight DLL into non Silverlight based application and use it?</p>
<p>What to do in case we can&#39;t use Silverlight DLL? Once again we need to test Silverlight application.</p>
<p>Thank you in advanced.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JonnyBee replied on Thursday, May 12, 2011</h2><p>In a .NET 4 application you can load a Silverlight assembly and call methods on it but there are some restrictions:</p>
<h4><i>&quot;Portability Explained</i></h4>
<p><i>
</i></p>
<p><i>We named this new feature &ldquo;assembly portability&rdquo;, given that the 
feature allows your code to be &ldquo;ported&rdquo; between both Silverlight and 
.NET. Portability provides the ability to compile your source with the 
Silverlight tools, and run your built assemblies on both the Silverlight
 and .NET runtimes. This feature </i><i>doesn&rsquo;t change the underlying 
implementation of either the Silverlight or .NET runtimes; instead, if 
you write code that only uses APIs that have the same behavior across 
Silverlight and .NET, it allows you to use one set of binaries to target
 both. But how do you know if the APIs you are using are compatible? We 
have identified five key assemblies that are compatible between 
Silverlight and .NET. (The Silverlight UI layer is of course not one of 
these &ndash; there are some important differences between Silverlight UI and 
WPF.)&quot;</i></p>
<p>Read more about &quot;assembly portability&quot; here: </p>
<p><a href="http://blogs.msdn.com/b/clrteam/archive/2009/12/01/sharing-silverlight-assemblies-with-net-apps.aspx">http://blogs.msdn.com/b/clrteam/archive/2009/12/01/sharing-silverlight-assemblies-with-net-apps.aspx</a></p>
<p><a href="https://msmvps.com/blogs/kevinmcneish/archive/2010/05/28/silverlight-4-101-using-silverlight-assemblies-in-your-non-silverlight-projects.aspx">https://msmvps.com/blogs/kevinmcneish/archive/2010/05/28/silverlight-4-101-using-silverlight-assemblies-in-your-non-silverlight-projects.aspx </a><i><br /></i></p></div><div style='padding:0 15 3 15;background-color:lightgreen'><h2>RockfordLhotka replied on Thursday, May 12, 2011</h2><p>Given that Csla.dll isn&#39;t a portable assembly, I doubt that you can use this technique to create business libraries.</p>
<p>Making Csla.dll be a portable assembly is on my future to-do list, but it requires some non-trivial effort. Jonny actually did some of the required prep work to do the Mono port, but there&#39;s more to be done.</p>
<p>To head of the next question: No, I don&#39;t have a prediction on when this change will occur, because it is a lot of work.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>tesicg replied on Friday, May 13, 2011</h2><p>Thank you Rockford.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Friday, May 13, 2011</h2><p>To answer your other question, you create two projects; one for silverlight, one for .net.&nbsp; You add files to the .net library, and in the SL library you can add files from the .Net library using &quot;Add as Link.&quot;&nbsp; Compiler directives can be used to remove .net code which doesnt&#39; belong in silverlight.</p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
