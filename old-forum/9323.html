<html><header><title>Displaying &quot;Are you sure&quot; confirmation on Cancel button</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Displaying &quot;Are you sure&quot; confirmation on Cancel button</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/9323.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>jtrotman posted on Wednesday, August 04, 2010</h2><p>This is kind of a trivial thing, but I wanted to see if anyone had any thoughts on this.</p>
<p>When a user clicks the Cancel button on a screen where they have been editing an object, my application pops up a MessageBox that says something like &quot;You have unsaved changes. Are you sure you want to cancel?&quot;&nbsp; I use the IsDirty property to decide whether or not to display this.</p>
<p>I just realized that if the user clicks the New button to create a new object/record, and then Cancels without making any changes&nbsp;- they get the &quot;You have unsaved changes...&quot; message even though they really don&#39;t.&nbsp; I now see that IsDirty (more specifically IsSelfDirty) defaults to True on a new object.&nbsp; </p>
<p>At the top of p. 266 of the 2008 C# book, Rocky says &quot;The IsSelfDirty property defaults to true because a new object&#39;s field values won&#39;t correspond to values in the database.&quot;&nbsp; This is true, but I would argue that it would be more useful if the default was False because:</p>
<p>IsNew = True &amp; IsDirty = True means a new item needs saving</p>
<p>IsNew = True &amp; IsDirty = False means there is a new item, but there&#39;s nothing to save yet because the user hasn&#39;t done anything that needs saving&nbsp;(in which case I wouldn&#39;t display the &quot;Are you sure...&quot; confirmation if the user cancels in this state.</p>
<p>Thoughts?&nbsp; Also, does anyone have a better way of doing this as the framework is now?&nbsp; I can&#39;t imagine I&#39;m the only one doing this.</p>
<p>Thanks,<br />Jeff Trotman</p>
<p>&nbsp;</p>
<p>&nbsp;</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Wednesday, August 04, 2010</h2><p>You are certainly not alone. But you can override the default behavior by overriding MarkNew() in your custom base class:</p>
<p style="padding-left:30px;">protected override void MarkNew()<br />{<br />&nbsp; base.MarkNew();<br />&nbsp; MarkClean();<br />}</p>
<p>That switches the behavior so new objects are not dirty.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>jtrotman replied on Thursday, August 05, 2010</h2><p>That works for me (overriding MarkNew).</p>
<p>Thanks for the quick reply (as well as all of your effort - both with the books and the time you spend here.)</p>
<p>JT</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Jav replied on Wednesday, August 04, 2010</h2><p>Creating a new record introduces changes in the object graph.&nbsp; So the mesage, &quot;You have unsaved changes....&quot; is correct.</p>
<p>On creation of a new object, the&nbsp;behavior IsNew = True &amp; IsDirty = True is the correct bevavior.&nbsp; Now the user has two choices: either Save the new object (with or without manual changes); or Undo the creation of the new object.</p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
