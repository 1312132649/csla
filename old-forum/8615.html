<html><header><title>WCF Impersonation and Delegation</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>WCF Impersonation and Delegation</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/8615.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>frankhoffy posted on Thursday, March 04, 2010</h2><p>We have the following setup:</p>
<ol>
<li>Client (Windows Forms)</li>
<li>IIS Server</li>
<li>Database Server</li>
</ol>
<p>We have written a CSLA 3.8.0 library and would like to run it remotely via WCF.&nbsp; We would like to set up the following scenarios:</p>
<ol>
<li>Authenticate to the database server with the logged-in user&#39;s credentials</li>
<li>Authenticate to the database server using a dedicated Active Directory account</li>
</ol>
<p>We&#39;ve really been beating our heads against the wall trying to figure out what we need to put in our config files to make this happen though.&nbsp; When we make the call to our WCF service, it seems to lose the credentials when it tries to connect to the database.&nbsp; Both servers trust each other for delegation.</p>
<p>If somebody could provide me with a very simple example of how to set up those two authentication scenarios, I would greatly appreciate it.</p>
<p>If not an example, I&#39;d like to at least know if anybody out there has 
successfully implemented this.&nbsp; The goal on our end is to be able to do 
all of this through configuration files, so that we can switch between 
running locally versus remotely without having to implement code 
changes.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>frankhoffy replied on Monday, March 08, 2010</h2><p>I feel like I&#39;m getting close but I&#39;m not quite there.&nbsp; I have a hard time believing nobody has attempted this before.</p>
<p>So far I have added this to the service&#39;s web.config file:</p>
<p>&nbsp; &lt;system.serviceModel&gt;<br />&nbsp;&nbsp;&nbsp; &lt;behaviors&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;serviceBehaviors&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;behavior name=&quot;ServiceBehavior&quot;&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;serviceMetadata httpGetEnabled=&quot;true&quot; /&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;serviceDebug includeExceptionDetailInFaults=&quot;false&quot; /&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;serviceAuthorization impersonateCallerForAllOperations=&quot;true&quot; /&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/behavior&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/serviceBehaviors&gt;<br />&nbsp;&nbsp;&nbsp; &lt;/behaviors&gt;<br />&nbsp;&nbsp;&nbsp; &lt;services&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;service behaviorConfiguration=&quot;ServiceBehavior&quot; name=&quot;Csla.Server.Hosts.WcfPortal&quot;&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;endpoint binding=&quot;wsHttpBinding&quot;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; contract=&quot;Csla.Server.Hosts.IWcfPortal&quot; /&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/service&gt;<br />&nbsp;&nbsp;&nbsp; &lt;/services&gt;<br />&nbsp; &lt;/system.serviceModel&gt;</p>
<p>I also added this to the client&#39;s app.config:</p>
<p>&nbsp; &lt;system.serviceModel&gt;<br />&nbsp;&nbsp;&nbsp; &lt;behaviors&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;endpointBehaviors&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;behavior name=&quot;ImpersonationBehavior&quot;&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;clientCredentials&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;windows allowedImpersonationLevel=&quot;Impersonation&quot; /&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/clientCredentials&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/behavior&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/endpointBehaviors&gt;<br />&nbsp;&nbsp;&nbsp; &lt;/behaviors&gt;<br /><br />&nbsp;&nbsp;&nbsp; &lt;client&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;endpoint name=&quot;WcfDataPortal&quot; behaviorConfiguration=&quot;ImpersonationBehavior&quot;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; address=&quot;http://mywebserver/DocumentManagementHost/WcfService.svc&quot;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; binding=&quot;wsHttpBinding&quot;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; contract=&quot;Csla.Server.Hosts.IWcfPortal&quot; /&gt;<br />&nbsp;&nbsp;&nbsp; &lt;/client&gt;<br />&nbsp; &lt;/system.serviceModel&gt;</p>
<p>What I&#39;m getting back from the server&#39;s event log is the following:</p>
<p>WebHost failed to process a request.<br />&nbsp;Sender Information: System.ServiceModel.ServiceHostingEnvironment+HostingManager/2685261<br />&nbsp;Exception: System.ServiceModel.ServiceActivationException: The service &#39;/DocumentManagementHost/WcfService.svc&#39; cannot be activated due to an exception during compilation.&nbsp; The exception message is: The service operation &#39;Create&#39; that belongs to the contract with the &#39;IWcfPortal&#39; name and the &#39;http://ws.lhotka.net/WcfDataPortal&#39; namespace does not allow impersonation.. ---&gt; System.InvalidOperationException: The service operation &#39;Create&#39; that belongs to the contract with the &#39;IWcfPortal&#39; name and the &#39;http://ws.lhotka.net/WcfDataPortal&#39; namespace does not allow impersonation.<br />&nbsp;&nbsp; at System.ServiceModel.Dispatcher.SecurityValidationBehavior.WindowsIdentitySupportRule.Validate(ServiceDescription description)<br />&nbsp;&nbsp; at System.ServiceModel.Dispatcher.SecurityValidationBehavior.System.ServiceModel.Description.IServiceBehavior.Validate(ServiceDescription description, ServiceHostBase serviceHostBase)<br />&nbsp;&nbsp; at System.ServiceModel.Description.DispatcherBuilder.ValidateDescription(ServiceDescription description, ServiceHostBase serviceHost)<br />&nbsp;&nbsp; at System.ServiceModel.Description.DispatcherBuilder.InitializeServiceHost(ServiceDescription description, ServiceHostBase serviceHost)<br />&nbsp;&nbsp; at System.ServiceModel.ServiceHostBase.InitializeRuntime()<br />&nbsp;&nbsp; at System.ServiceModel.ServiceHostBase.OnOpen(TimeSpan timeout)<br />&nbsp;&nbsp; at System.ServiceModel.Channels.CommunicationObject.Open(TimeSpan timeout)<br />&nbsp;&nbsp; at System.ServiceModel.Channels.CommunicationObject.Open()<br />&nbsp;&nbsp; at System.ServiceModel.ServiceHostingEnvironment.HostingManager.ActivateService(String normalizedVirtualPath)<br />&nbsp;&nbsp; at System.ServiceModel.ServiceHostingEnvironment.HostingManager.EnsureServiceAvailable(String normalizedVirtualPath)<br />&nbsp;&nbsp; --- End of inner exception stack trace ---<br />&nbsp;&nbsp; at System.ServiceModel.ServiceHostingEnvironment.HostingManager.EnsureServiceAvailable(String normalizedVirtualPath)<br />&nbsp;&nbsp; at System.ServiceModel.ServiceHostingEnvironment.EnsureServiceAvailableFast(String relativeVirtualPath)<br />&nbsp;Process Name: w3wp<br />&nbsp;Process ID: 8500<br /><br />For more information, see Help and Support Center at http://go.microsoft.com/fwlink/events.asp.</p>
<p>It looks like if I can allow impersonation for WcfDataPortal somehow, I may be OK.&nbsp; I&#39;m just not sure how to do that.&nbsp; I suspect it has something to do with adding  [OperationBehavior(Impersonation = ImpersonationOption.Required)] to the service methods.</p>
<p>I&#39;m not sure what sort of settings I would have to use to impersonate a different user as well.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Monday, March 08, 2010</h2><p>You may also need to subclass WcfProxy to configure the underlying WCF proxy object with your client Windows credentials. I don&#39;t know if that&#39;s required, but I do know we enhanced WcfProxy a long time ago so it was easy to subclass for the purpose of setting things like credentials on the actual WCF objects.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>frankhoffy replied on Monday, March 08, 2010</h2><p>Thank you for the reply Rocky.&nbsp; I feel like I&#39;m getting much closer to the answer.&nbsp; I implemented my own custom WcfProxy in my client app.&nbsp; I tried setting some different values of the ChannelFactory but I kept getting the error I pasted above.&nbsp; I may not be setting all that I need to be setting though.&nbsp; There appears to be some provision for logging in as a specific user as well.&nbsp; I pasted the basic code for the proxy below.</p>
<p>using System;<br />using System.Collections.Generic;<br />using System.Linq;<br />using System.Text;<br />using System.Security.Principal;<br />using System.ServiceModel;<br />using System.ServiceModel.Security;<br /><br />namespace DocumentManagementUI<br />{<br />&nbsp;&nbsp;&nbsp; public class WcfProxy : Csla.DataPortalClient.WcfProxy<br />&nbsp;&nbsp;&nbsp; {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; protected override ChannelFactory&lt;Csla.Server.Hosts.IWcfPortal&gt; GetChannelFactory()<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; var f = base.GetChannelFactory();<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return f;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br />&nbsp;&nbsp;&nbsp; }<br />}</p>
<p>All I need to figure out now is what goes before &quot;return f&quot;.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Monday, March 08, 2010</h2><p>Have you read through the WCF security guidance book from Patterns and Practices?</p>
<p><a href="http://www.codeplex.com/WCFSecurity/">http://www.codeplex.com/WCFSecurity/</a></p>
<p>That&#39;s probably the most comprehensive source for WCF security configuration available.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>frankhoffy replied on Tuesday, March 09, 2010</h2><p>Thank you Rocky that link was very helpful.&nbsp; I believe I have put all of the pieces together.&nbsp; Hopefully this thread will be helpful for anybody attempting this in the future.</p>
<p>First and foremost, I had to make a modification to CSLA to make this happen.&nbsp; I would like to request this as an enhancement to the framework.&nbsp; I had to go into the WcfPortal class and decorate all of the methods with the following attribute:</p>
<p>[OperationBehavior(Impersonation = ImpersonationOption.Allowed)]</p>
<p>I confirmed that my configuration would not work without this attribute being defined.&nbsp; I would hope that this could be added to CSLA without causing any unwanted side effects.</p>
<p>Below I have pasted the complete web.config file for the service (which is hosted in IIS).&nbsp; This is essentially the same as what I pasted earlier.&nbsp; In IIS, the web application is configured to allow anonymous as well as windows integrated authentication.&nbsp; WCF has its own authentication mechanism.&nbsp; If you don&#39;t allow anonymous in IIS, WCF will give you an error.</p>
<p>&lt;?xml version=&quot;1.0&quot;?&gt;<br />&lt;configuration&gt;<br /><br />&nbsp; &lt;appSettings&gt;<br />&nbsp;&nbsp;&nbsp; &lt;add key=&quot;CslaAuthentication&quot; value=&quot;Windows&quot;/&gt;<br />&nbsp; &lt;/appSettings&gt;<br /><br />&nbsp; &lt;connectionStrings&gt;<br />&nbsp;&nbsp;&nbsp; &lt;add name=&quot;DocumentManagement&quot; connectionString=&quot;Data Source=mytestserver;Initial Catalog=DocumentManagement;Integrated Security=True&quot; providerName=&quot;System.Data.SqlClient&quot;/&gt;<br />&nbsp;&nbsp;&nbsp; &lt;add name=&quot;Biennium&quot; connectionString=&quot;Data Source=mytestserver;Initial Catalog=Atlas;Integrated Security=True&quot; providerName=&quot;System.Data.SqlClient&quot;/&gt;<br />&nbsp; &lt;/connectionStrings&gt;<br /><br />&nbsp; &lt;system.serviceModel&gt;<br />&nbsp;&nbsp;&nbsp; &lt;behaviors&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;serviceBehaviors&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;behavior name=&quot;ServiceBehavior&quot;&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;serviceMetadata httpGetEnabled=&quot;true&quot; /&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;serviceDebug includeExceptionDetailInFaults=&quot;false&quot; /&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;serviceAuthorization impersonateCallerForAllOperations=&quot;true&quot; /&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/behavior&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/serviceBehaviors&gt;<br />&nbsp;&nbsp;&nbsp; &lt;/behaviors&gt;<br />&nbsp;&nbsp;&nbsp; &lt;services&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;service behaviorConfiguration=&quot;ServiceBehavior&quot; name=&quot;Csla.Server.Hosts.WcfPortal&quot;&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;endpoint binding=&quot;wsHttpBinding&quot;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; contract=&quot;Csla.Server.Hosts.IWcfPortal&quot; /&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/service&gt;<br />&nbsp;&nbsp;&nbsp; &lt;/services&gt;<br />&nbsp; &lt;/system.serviceModel&gt;<br />&lt;/configuration&gt;</p>
<p>It&#39;s up to the client to determine which identity to send to the service.&nbsp; In the first scenario, I wanted to impersonate the calling user.&nbsp; To do that, this is how I had to configure the client&#39;s app.config.&nbsp; Note that I had to adjust the maxReceivedMessageSize or I&#39;d get an error about the message being too big.&nbsp; The kicker here is that I had to set allowedImpersonationLevel to Delegation, not Impersonation.</p>
<p>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot; ?&gt;<br />&lt;configuration&gt;<br />&nbsp; &lt;appSettings&gt;<br />&nbsp;&nbsp;&nbsp; &lt;add key=&quot;CslaAuthentication&quot; value=&quot;Windows&quot;/&gt;<br />&nbsp;&nbsp;&nbsp; &lt;add key=&quot;CslaDataPortalProxy&quot; value=&quot;Csla.DataPortalClient.WcfProxy, Csla&quot;/&gt;<br />&nbsp; &lt;/appSettings&gt;<br /><br />&nbsp; &lt;system.serviceModel&gt;<br />&nbsp;&nbsp;&nbsp; &lt;bindings&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;wsHttpBinding&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;binding name=&quot;wsHttpBinding_Limits&quot;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; maxReceivedMessageSize=&quot;2147483647&quot;&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/binding&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/wsHttpBinding&gt;<br />&nbsp;&nbsp;&nbsp; &lt;/bindings&gt;<br />&nbsp;&nbsp;&nbsp; <br />&nbsp;&nbsp;&nbsp; &lt;behaviors&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;endpointBehaviors&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;behavior name=&quot;ImpersonationBehavior&quot;&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;clientCredentials&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;windows allowedImpersonationLevel=&quot;Delegation&quot; /&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/clientCredentials&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/behavior&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/endpointBehaviors&gt;<br />&nbsp;&nbsp;&nbsp; &lt;/behaviors&gt;<br /><br />&nbsp;&nbsp;&nbsp; &lt;client&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;endpoint name=&quot;WcfDataPortal&quot; behaviorConfiguration=&quot;ImpersonationBehavior&quot;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; address=&quot;http://mywebserver/DocumentManagementHost/WcfService.svc&quot;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; binding=&quot;wsHttpBinding&quot;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; bindingConfiguration=&quot;wsHttpBinding_Limits&quot;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; contract=&quot;Csla.Server.Hosts.IWcfPortal&quot; /&gt;<br />&nbsp;&nbsp;&nbsp; &lt;/client&gt;<br />&nbsp; &lt;/system.serviceModel&gt;<br />&lt;/configuration&gt;</p>
<p>Next I wanted to test impersonating a specific user.&nbsp; To do this, I had to subclass my own WcfProxy class in the client application.&nbsp; Here&#39;s what that code looks like:</p>
<p>using System;<br />using System.Collections.Generic;<br />using System.Linq;<br />using System.Text;<br />using System.Security.Principal;<br />using System.ServiceModel;<br />using System.ServiceModel.Security;<br /><br />namespace DocumentManagementUI<br />{<br />&nbsp;&nbsp;&nbsp; public class WcfProxy : Csla.DataPortalClient.WcfProxy<br />&nbsp;&nbsp;&nbsp; {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; protected override ChannelFactory&lt;Csla.Server.Hosts.IWcfPortal&gt; GetChannelFactory()<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; var f = base.GetChannelFactory();<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; f.Credentials.Windows.ClientCredential = new System.Net.NetworkCredential(&quot;userName&quot;, &quot;password&quot;, &quot;domain&quot;);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return f;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br />&nbsp;&nbsp;&nbsp; }<br />}</p>
<p>After that was done, I had to go back into the client&#39;s app.config and modify the CslaDataPortalProxy value to look like this:</p>
<p>&nbsp;&nbsp;&nbsp; &lt;add key=&quot;CslaDataPortalProxy&quot; value=&quot;DocumentManagementUI.WcfProxy, DocumentManagement&quot;/&gt;</p>
<p>That&#39;s about it.&nbsp; Both scenarios are taken care of using this method.&nbsp; Hopefully my plea to get those attributes added to those CSLA methods goes through so I don&#39;t have to keep modifying the library :).</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>brianbuten replied on Monday, September 26, 2011</h2><p>I tried the suggestion of adding the attribute tags as suggested and it works, thanks for posting.&nbsp; Has this been addressed in later releases, or are we supposed to modify the framework?</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Monday, September 26, 2011</h2><p>I don&#39;t think modifying&nbsp; the framework is required, because you can create your own subclass of WcfPortal and use that instead.</p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
