<html><header><title>non generic DataPortal exception bug?</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>non generic DataPortal exception bug?</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/7336.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>rfcdejong posted on Friday, July 24, 2009</h2><P>Someone at my company was using </P>
<BLOCKQUOTE dir=ltr>
<P>DataPortal.Delete(SingleCriteria&lt;T, C&gt; foobar);</P></BLOCKQUOTE>
<P>And it worked as expected&nbsp;:)<BR>But somewhere else at his learningcurve he made a own criteria class derived from CriteriaBase which he uses for several situations in&nbsp;multiple business objects. Then he wrote:</P>
<BLOCKQUOTE dir=ltr>
<P>DataPortal.Delete(new MyCriteriaClass(param1, param2));</P></BLOCKQUOTE>He kinda forgot to use the generic DataPortal.<BR>He got an ArgumentNullException "Value cannot be null. Parameter name: key" at the DataPortal. That is because the CriteriaClass didn't return an objecttype.<BR><BR><BR>I would like an better exception when the criteria class does not provide an type (the generic DataPortal should be used?) 
<BLOCKQUOTE dir=ltr>
<P>public static void Delete(object criteria)<BR> {<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Type objectType = MethodCaller.GetObjectType(criteria);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Delete(objectType, criteria); <BR>} </P></BLOCKQUOTE></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Friday, July 24, 2009</h2>MyCriteriaClass should be inheriting CriteriaBase, and it should be calling the constructor and giving it the type there.  That's typically what I do, but maybe its not required if you simply add the type between the end of the method name and the opening (.<br /><br />DataPortal.Delete&amp;lt;T&amp;gt;( new MyCriteriaClass )</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>rfcdejong replied on Monday, August 10, 2009</h2><BLOCKQUOTE><div><img src="/Themes/default/images/icon-quote.gif"> <strong>ajj3085:</strong></div><div>MyCriteriaClass should be inheriting CriteriaBase, and it should be calling the constructor and giving it the type there.  That's typically what I do, but maybe its not required if you simply add the type between the end of the method name and the opening (.<br /><br />DataPortal.Delete( new MyCriteriaClass )</div></BLOCKQUOTE><br /><br />Yes a generic along with it, but if u forget it then there is a invalid value exception which is not clear on what the programmer did wrong.<br /><br />I would like to see this as a bug, to raise an exception in run time telling the programmer might had forgotten the generic type argument.<br /><br />PS: I've been on vacation so this post is a bit late.</div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
