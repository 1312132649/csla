<html><header><title>DataPortal_Update error - Transactions</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>DataPortal_Update error - Transactions</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/4268.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>Inquistive_Mind posted on Thursday, January 31, 2008</h2><P>Hello,</P>
<P>I have a Parent and Child relationship object where in I am trying to insert a child to the list and I am getting the following error.I am following the example given in Chapter 8 of Expert C# 2005 Business object. Is this because I am opening another connection inside the child Insert method?</P>
<P><FONT color=#a52a2a>DataPortal.Update failed (System.Transactions.TransactionException: The operation is not valid for the state of the transaction. ---&gt; System.TimeoutException: Transaction Timeout<BR>&nbsp;&nbsp; --- End of inner exception stack trace ---<BR>&nbsp;&nbsp; at System.Transactions.TransactionState.EnlistPromotableSinglePhase(InternalTransaction tx, IPromotableSinglePhaseNotification promotableSinglePhaseNotification, Transaction atomicTransaction)<BR>&nbsp;&nbsp; at System.Transactions.Transaction.EnlistPromotableSinglePhase(IPromotableSinglePhaseNotification promotableSinglePhaseNotification)<BR>&nbsp;&nbsp; at System.Data.SqlClient.SqlInternalConnection.EnlistNonNull(Transaction tx)<BR>&nbsp;&nbsp; at System.Data.SqlClient.SqlInternalConnection.Enlist(Transaction tx)<BR>&nbsp;&nbsp; at System.Data.SqlClient.SqlInternalConnectionTds.Activate(Transaction transaction)<BR>&nbsp;&nbsp; at System.Data.ProviderBase.DbConnectionInternal.ActivateConnection(Transaction transaction)<BR>&nbsp;&nbsp; at System.Data.ProviderBase.DbConnectionPool.GetConnection(DbConnection owningObject)<BR>&nbsp;&nbsp; at System.Data.ProviderBase.DbConnectionFactory.GetConnection(DbConnection owningConnection)<BR>&nbsp;&nbsp; at System.Data.ProviderBase.DbConnectionClosed.OpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory)<BR>&nbsp;&nbsp; at System.Data.SqlClient.SqlConnection.Open()</FONT></P>
<P><FONT color=#000000>Thanks in Advance for your time and suggestions.</FONT></P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Inquistive_Mind replied on Thursday, January 31, 2008</h2><P>I resolved the issue.I had to enable Network Access on my Local MSDTC and allow Inbound and Outbound communication.</P>
<P>Thanks again</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>tarekahf replied on Tuesday, February 01, 2011</h2><p>Thanks a lot for the info. I was able to solve the same problem I am facing, though a bit late <img src="http://forums.lhotka.net/emoticons/emotion-4.gif" alt="Stick out tongue" /></p>
<p>I followed the steps as per this article:</p>
<p><a href="http://support.microsoft.com/kb/817064">http://support.microsoft.com/kb/817064</a></p>
<p>Tarek.</p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
