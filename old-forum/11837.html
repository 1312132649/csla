<html><header><title>Authorization rules not running for new object</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Authorization rules not running for new object</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/11837.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>jmuller posted on Thursday, February 14, 2013</h2><p>When I create a new instance of a business object, the authorization rules do not run. &nbsp;I have a custom authorization rule that changes access to a property based on the state of another property. &nbsp;This rule runs as expected when fetching an existing object and editing it, but it seems like the authorization rules are ignored when checking business rules for new objects. &nbsp;Is there a way to get the authorization rules to run for new objects?</p></div><div style='padding:0 15 3 15;background-color:lightgreen'><h2>JonnyBee replied on Friday, February 15, 2013</h2><p>Property level authorization rules is cached by default. </p>
<p>Depending on which version of CSLA you are using you must either </p>
<ul>
<li>overload the CacheResult method to return false or </li>
<li>set CacheResult property to false </li>
</ul>
<p>to tell the BO to NOT cache the result of the AuthorizationRule. . </p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>jmuller replied on Friday, February 15, 2013</h2><p>Thanks for the response. &nbsp;I actually ran into that same issue when I initially wrote the custom authorization rules. &nbsp;I made sure that CacheResult returns false. &nbsp;This works as expected for editing existing objects. &nbsp;Unfortunately, the custom authorization rules do not run at all for new objects.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JonnyBee replied on Friday, February 15, 2013</h2><p>Hi,</p>
<p>Authorization rules do not run similar to business rules. Instance level AuthorizationRules is checked within the CanReadProperty/CanWriteProperty/CanExecuteMethod methods of the business object to determine if user is allowed to do the AuthorizationAction. </p>
<p>AuthorizationRules do not run as such when you call BusinessRules.CheckRules. </p>
<p>Can you show some sample code from your&nbsp;rules/business object?&nbsp;&nbsp;</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>jmuller replied on Friday, February 15, 2013</h2><p>Thanks for your quick response. &nbsp;I created a code sample that has only the relevant properties and authorization rules, but I don&#39;t feel comfortable posting it in a public forum (because of the type of project). &nbsp;Is there a way to send you a private message with the code?</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JonnyBee replied on Friday, February 15, 2013</h2><p>Send private mail to jonny.bekkum(a)gmail.com&nbsp;</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>jmuller replied on Friday, February 15, 2013</h2><p>Thanks, will do.</p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
