<html><header><title>MVVM question</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>MVVM question</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/10683.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>stefan posted on Wednesday, September 14, 2011</h2><p>Think of an inventory management system.</p>
<p>Imagine the user scenario of&nbsp;creating a new inventory&nbsp;item.</p>
<p>This&nbsp;is implemented using a wizzard-like UI.</p>
<p>First step: The user is told to&nbsp;enter some&nbsp;limited but basic&nbsp;information that he knows about the new item.</p>
<p>Next&nbsp;step: The system&nbsp;takes that key information, and looks&nbsp;if there&nbsp;already are similar items in the inventory. The user is shown the resultlist of that lookup. The user can then decide to go on creating a new item by entering more required data on subsequent&nbsp;steps, or leave the creation process by picking an existing item from the resultlist of matching inventory items. Note that the list is only used to enable a human interaction at that early point in the process.</p>
<p>I have an ItemCreator editable root class that&nbsp;is responsible for the process of creating a new item.&nbsp;</p>
<p>The point where I am struggling is whether the resultlist of possibly matching items should be a&nbsp;property&nbsp;of the ItemCreator class or be better located as a property&nbsp;inside the ItemCreatorViewModel class.</p>
<p>What do you think?</p>
<p>Any hints are greatly appreciated.</p></div><div style='padding:0 15 3 15;background-color:lightgreen'><h2>Curelom replied on Wednesday, September 14, 2011</h2><p>If you set the resultlist as a property on your view model, you can then bind to it with your list control with ease.&nbsp; Using Property Change events, it will also automatically change the list in the control whenever the criteria is changed.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>stefan replied on Monday, September 19, 2011</h2><p>Thanks for Your answer!</p>
<p>That is the way I have actually implemented it.</p>
<p>What keeps me confused, is the fact that my ItemCreator object knows nothing about this intermediate step involving the lookup...</p>
<p>Isn&#39;t that business logic that should&nbsp;be&nbsp;placed within the responsible class rather than be loosely coupled through some viewmodel object, which is a UI thing...?</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Curelom replied on Monday, September 19, 2011</h2><p>I don&#39;t think this loose coupling pushes business logic out to the UI at all. The ItemCreator is presenting a collection and pretty much says to the UI, here&#39;s a collection, do what you want with it, UI can display it upside-down for all the ItemCreator cares.&nbsp; What it does care about is&nbsp;if the UI breaks any of&nbsp; business rules which are still contained within the Collection, It will let UI&nbsp;know of the broken rules. The Business Rules are still contained within ItemCreator.&nbsp; This loose coupling also has some other advantages such as being able to use it on multiple UIs or Test scenarios.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>stefan replied on Tuesday, September 20, 2011</h2><p>I was talking about NOT exposing the collection through the ItemCreator, but&nbsp;just keep it as a property on the ViewModel. That is what&nbsp;I meant with loose coupling, and I thought&nbsp;you were promoting that idea.</p>
<p>At the moment I still see the ItemCreator being saved at the end of the process, persisting a new inventory item. That is the reason I did not want to have the lookup collection as a child inside ItemCreator.</p>
<p>But the more I think about it, the ItemCreator class could end up being&nbsp;a UOW object. Then the matching items collection would becomes a child property of the UOW object.</p>
<p>In my case I cannot rely on business rules involving the collection, because it is not possible to determine what an empty/big collection really means. Are there really no matching items? Or did the user fail in entering the right search criteria...&nbsp; But I can add a boolean property NoMatchesFound to the ItemCreator class, and add a corresponding business rule that, for validity,&nbsp;expects that property to be true. Then the collection is only a UI helper, that enables the user to make a decision and&nbsp;manually set&nbsp;the NoMatchesFound&nbsp;property on the ItemCreator.</p>
<p>Any other ideas?</p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
