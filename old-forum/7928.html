<html><header><title>Getting CSLALight to Build</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Getting CSLALight to Build</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/7928.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>FCazabon posted on Monday, November 02, 2009</h2>Hi,<br /><br />I've been trying to get the CSLALight stuff to build and run the demo apps for a while now with much frustration.  I do not think the problem is with CSLA itself, but believe that there is some installation problem I have on my PC.  Due to my lack of experience with all the technologies involved I am having difficulty working out what is wrong.<br /><br />I have VS2008 with SP1 installed.<br />I installed Silverlight 2 SDK and Silverlight 3 Tools (which includes the Silverlight 3 SDK).<br /><br />When I open the cslacs (3.8 beta 3) solution and try to build it I get a number of warnings and errors.  I also installed the ASP.NET MVC thing that was mentioned in the new thread about the release of beta 3.<br /><br />For example, this is one of the warnings: <br />Warning	1	#warning: 'Improve if items is a counting bag'	C:\csla\cslacs\Csla\C5\Hashing\HashBag.cs	297	10	Csla<br /><br />and this is one of the errors:<br /><br />Error	14	The type or namespace name 'Interactivity' does not exist in the namespace 'System.Windows' (are you missing an assembly reference?)	C:\csla\cslacs\Csla\Wpf\Execute.cs	3	22	Csla<br /><br />Can anyone help me sort this out?  I would really love to get csla light up and running for a new peoject.<br /><br />Thanks</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Monday, November 02, 2009</h2><P>I'm glad you caught this. The Dependencies folder isn't being exported as part of my release process...</P>
<P>If you download and unpack the cslatest or cslalighttest archive you'll get the Dependencies folder, which includes the System.Windows.Interactivity.dll file you need.</P>
<P>I'll fix my release process to export Dependencies so the file is there for release.</P>
<P>(please note that to get localization and intellisense help for System.Windows.Interactivity you need to install the Blend 3 SDK and change the project references to the SDK directory - my inclusion of the assembly in the CSLA download enables CSLA to build, but doesn't (can't) include everything you'd normally get with the SDK)</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>FCazabon replied on Tuesday, November 03, 2009</h2>Thanks Rocky.<br /><br />That fixed that problem and I have now got much further in evaluating this stuff.<br /><br />I have tried to run the InventoryDemo solution and am getting this error when I click on the Products (or Warehouses or Customers) button: <br /><br />DataPortal.Fetch failed (The type initializer for 'InvDal.MockDb' threw an exception.)<br /><br />Any idea what could be the cause of this?</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Tuesday, November 03, 2009</h2>I don't know. The only thing that comes to mind is to make sure the web app is your startup app in the solution, though I think you'd get a different exception if that were wrong...</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>FCazabon replied on Wednesday, November 04, 2009</h2>The web app is the startup app.  Any hints on trying to debug this, bearing in mind that I'm a beginner in VS, .NET and CSLA?</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Wednesday, November 04, 2009</h2>What is the full stack trace from the exception you are getting? Often the real problem is in line 2 or 3 of the stack trace.</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>FCazabon replied on Wednesday, November 04, 2009</h2>I'm googling how to create a stack trace right now. :)</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>FCazabon replied on Wednesday, November 04, 2009</h2>Hmm.  No real luck with getting the stack trace for you.<br /><br />I start the project with debugging, click on Products and get the error.  At this point in tim eI look in the VS IDE and bring up the Call Stack window, but it is blank/empty.  I try to Attach to a different process, but there is only the one process that looks like it has anything to do with this project and that is already selected.<br /><br />Any assistance will be greatly appreciated.</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>FCazabon replied on Wednesday, November 04, 2009</h2>I've found some information getting sent to the Output window:<br /><br />A first chance exception of type 'Csla.Server.DataPortalException' occurred in Csla.DLL<br />A first chance exception of type 'Csla.Server.DataPortalException' occurred in Csla.DLL<br />A first chance exception of type 'Csla.DataPortalException' occurred in Csla.DLL<br />A first chance exception of type 'Csla.DataPortalException' occurred in Csla.DLL<br /><br />Maybe this is what you asked for?</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Wednesday, November 04, 2009</h2>If you get the exception, just do a ToString() on it - that'll get you the<br />stack trace.</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>FCazabon replied on Wednesday, November 04, 2009</h2>Please remember I'm a beginner here.  Where/how do I do a ToString() on an exception?  All that happens is I get a messagebox displaying the original error message.  I don't know things well enough to track down where this is happening in the code.</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Wednesday, November 04, 2009</h2>I appreciate the challenges you are facing. But I must be honest and say<br />that I personally don't have time to teach the basics of using .NET and VS<br />through the forum, sorry...<br /><br />Your best bet is to put a breakpoint in the constructor for the MockDb class<br />to see if that even runs. The top level exception says the type initialize<br />didn't run though, which is usually a bad sign - means something is wrong<br />with the type loader, or maybe (if you are lucky) with the constructor.<br /><br />This is a very odd exception - so you are unfortunately a beginner trying to<br />debug a type of exception that throws most experts for a loop.</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>FCazabon replied on Wednesday, November 04, 2009</h2>Fair enough.  I understand (and half expected) that.<br /><br />Hopefully someone else with more time on their hands may be able to help me out.  <br /><br />Meanwhile I will go back to getting my head around the basics.<br /><br />Thanks</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>FCazabon replied on Tuesday, November 10, 2009</h2>Rocky,<br /><br />I've managed to get a bit further with the debugging (I've downloaded the full 3.8 version and started over from scratch ensuring I had all the folders set as recommended).<br /><br />The error that is occurring is:<br /><br />String was not recognized as a valid DateTime.<br /><br />I would guess this is because I don't use American format dates and the dates used in LoadOrders are in that format.<br /><br />Is there somewhere to change the settings used date format settings in CSLA, or do I need to change the demo code?<br /><br />FWIW I changed the dates to the British (DD/MM/YYYY) format and the demo now works.<br /><br /><br />The call stack is: <br /><br />>	Csla.DLL!Csla.Reflection.MethodCaller.CallMethod(object obj = {InvDal.ProductList}, Csla.Reflection.DynamicMethodHandle methodHandle = {Csla.Reflection.DynamicMethodHandle}, object[] parameters = {object[0]}) Line 359	C#<br /> 	Csla.DLL!Csla.Reflection.MethodCaller.CallMethod(object obj = {InvDal.ProductList}, string method = "Fetch", object[] parameters = {object[0]}) Line 270 + 0xf bytes	C#<br /> 	Csla.DLL!Csla.Server.FactoryDataPortal.InvokeMethod(string factoryTypeName = "InvDal.ProductList,InvDal", string methodName = "Fetch", Csla.Server.DataPortalContext context = {Csla.Server.DataPortalContext}) Line 59 + 0x2a bytes	C#<br /> 	Csla.DLL!Csla.Server.FactoryDataPortal.Fetch(System.Type objectType = {Name = "ProductList" FullName = "InvLib.ProductList"}, object criteria = 1, Csla.Server.DataPortalContext context = {Csla.Server.DataPortalContext}) Line 133 + 0x4c bytes	C#<br /> 	Csla.DLL!Csla.Server.DataPortalSelector.Fetch(System.Type objectType = {Name = "ProductList" FullName = "InvLib.ProductList"}, object criteria = 1, Csla.Server.DataPortalContext context = {Csla.Server.DataPortalContext}) Line 75 + 0x14 bytes	C#<br /> 	Csla.DLL!Csla.Server.DataPortal.Fetch(System.Type objectType = {Name = "ProductList" FullName = "InvLib.ProductList"}, object criteria = 1, Csla.Server.DataPortalContext context = {Csla.Server.DataPortalContext}) Line 186 + 0x12 bytes	C#<br /> 	Csla.DLL!Csla.DataPortalClient.LocalProxy.Fetch(System.Type objectType = {Name = "ProductList" FullName = "InvLib.ProductList"}, object criteria = 1, Csla.Server.DataPortalContext context = {Csla.Server.DataPortalContext}) Line 42 + 0x1b bytes	C#<br /> 	Csla.DLL!Csla.DataPortal.Fetch(System.Type objectType = {Name = "ProductList" FullName = "InvLib.ProductList"}, object criteria = 1) Line 232 + 0x12 bytes	C#<br /> 	Csla.DLL!Csla.DataPortal.Fetch(System.Type objectType = {Name = "ProductList" FullName = "InvLib.ProductList"}) Line 203 + 0x2f bytes	C#<br /> 	Csla.DLL!Csla.Server.Hosts.Silverlight.WcfPortal.Fetch(Csla.Server.Hosts.Silverlight.CriteriaRequest request = {Csla.Server.Hosts.Silverlight.CriteriaRequest}) Line 139 + 0x9 bytes	C#<br /> 	[External Code]</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Tuesday, November 10, 2009</h2><P>Ahh, interesting.</P>
<P>If you look in InvDal\MockDb.cs you can see that I initialize a "database" in memory with mock data. This includes some date values.</P>
<P>I didn't think about culture settings. But I suppose my fixed date values won't parse on your machine because your culture settings are different.</P>
<P>I suppose the answer is to initialize the dates like this: new DateTime(2008, 10, 5)</P>
<P>instead of what I do now like this: DateTime.Parse("10/5/08")</P>
<P>&nbsp;</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>FCazabon replied on Tuesday, November 10, 2009</h2>Thanks, that's what I had done, and it works.</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ludwigs3rd replied on Monday, November 23, 2009</h2>I'm having the same problem with 3.8.1. I downloaded cslatest and cslalighttest for 3.8.0 and 3.8.1 and haven't been able to find the Dependencies folder.  The root folder contains Data* folders then DPException and that's it. </div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ludwigs3rd replied on Monday, November 23, 2009</h2>Sorry, just installed Silverlight 3 SDK and Blend 3 SDK and it seems to have fixed the problem.</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Monday, November 23, 2009</h2>The top level items in cslacs-3.8.1-091111.zip are<br /><br />cslacs<br />Dependencies<br />README.txt<br /><br />In the cslalightcs-3.8.1-091111.zip archive the top level items are<br /><br />cslacs<br />cslalightcs<br />Dependencies<br />README.txt<br /><br />It is true that there is no longer a Dependencies folder in the test<br />archives, because you can't build the test projects without first having<br />CSLA .NET for Windows or CSLA .NET for Sivleright. I thought it was silly to<br />make everyone download the dependencies twice, when they clearly already got<br />them in the framework download.</div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
