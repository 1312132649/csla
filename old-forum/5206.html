<html><header><title>WCF Host/Windows Service</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>WCF Host/Windows Service</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/5206.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>whelzer posted on Thursday, August 07, 2008</h2>I'm trying to set my app up to to use WCF Data portal and an very near getting it working but one area is killing me....<br><br>Using VS 2005, VB, CSLA 3.04 all on a local domain<br><br>For my WCF host I've created a Win Forms app and have the following on a button:<br><br><i>Private Sub btnStart_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnStart.Click<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; _host = New ServiceHost(GetType(Csla.Server.Hosts.WcfPortal), New Uri("net.tcp://localhost:8008"))<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; _host.Open()<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; btnStart.Enabled = False<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; btnStop.Enabled = True<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; End Sub<br><br></i>Where _host is of type ServiceHost.<br><br>This works ok - my client is running fine, so I'm assuming that my app.configs' are all ok aswell.<br>When I click Stop, client gives back "correct" exception.<br><br>Rather than have WCF host in a Windows App I'd like to have it as a Windows Service.<br>I've no issues with creating a WS, I'm just not sure how to hook up my WCF service into one.<br><br>Any ideas much appreciated.<br><br>Thanks<i><br></i><br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Friday, August 08, 2008</h2><P>You should start by reading up (on MSDN or elsewhere) on how to build a Windows Service. It isn't terribly hard, thanks to base classes already existing in .NET.</P>
<P>When the service is started, a method executes (you override it if I remember right). In that method, you are supposed to start doing your work on a background thread.</P>
<P>Of course WCF listens on a background thread automatically - so this is trivial. Just put your two lines of code into that start method and you are done. (well...you also need code in the stop method to close down the listener)</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>jeffq replied on Wednesday, July 29, 2009</h2>Would you mind sharing a copy of your app.config for this incredibly simple app?</div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
