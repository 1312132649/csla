<html><header><title>PropertyChanged Notifications with &quot;using relationships&quot;</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>PropertyChanged Notifications with &quot;using relationships&quot;</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/12582.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>utexas posted on Thursday, April 10, 2014</h2><p>I was hoping that someone could lend some ideas on how to properly setup a scenario I&#39;m working with:</p>
<p>In my situation, I have a parent business object which uses another object as a property. &nbsp;As a simple example, consider this parent is a &quot;Person&quot; and the property is &quot;FavoriteColor&quot;. &nbsp;In the user interface, the &quot;FavoriteColor&quot; property would be selected from a list of &quot;Color&quot; items, which are separately maintained &amp; edited in a &quot;Colors&quot; collection.</p>
<p>Since the &quot;Color&quot; objects can be used by many &quot;Person&quot; objects, I understand the most appropriate way to set the &quot;FavoriteColor&quot; property on the &quot;Person&quot; is by storing the ID of the &quot;Color&quot; object and not a reference to the actual instance of the &quot;Color&quot; itself. &nbsp;In other words, a &quot;using relationship&quot; model.</p>
<p>However, by only storing the ID of the object, it seems that the &quot;Person&quot; will not be aware of any changes which occur to the properties of the &quot;Color&quot; object.</p>
<p><strong>My question is: When applying the &quot;using relationship&quot; model and only the ID of the referenced &quot;Color&quot; object is stored, what is the best way to make sure the &quot;Person&quot; is aware of changes made to the assigned &quot;Color&quot; item?</strong></p>
<p>My best guess is that this will require I set up a listener on the &quot;Color&quot; item when the ID is assigned to the &quot;FavoriteColor&quot; property.</p>
<p>Thanks for your help!</p>
<p>&nbsp;</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Saturday, April 19, 2014</h2><p>In what context would a color change while the person is also being changed?&nbsp; how would the change affect the person?</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>utexas replied on Saturday, April 19, 2014</h2><p>The color would be modified while the user is editing the person. &nbsp;Imagine a dialog window in which the details of the person are being edited. &nbsp;Within this dialog window, a button would open up a child window where the collection of colors can be edited, then the user would return back to the person after editing. &nbsp;As soon as the color is edited, the person would need to be notified of changes so it could execute any necessary business rules.</p>
<p>A &quot;color&quot; property is obviously too simple and perhaps a bad choice to describe the scenario. &nbsp;</p>
<p>In my actual case, the child property is a &quot;material&quot; (steel, etc) where the selected material will have properties such as cost, density, etc. &nbsp;If the cost of the &quot;material&quot; is changed, then the parent that references the &quot;material&quot; item will need to be notified so that the total cost of the parent can be updated (or total weight is updated if density is changed on the child).</p></div><div style='padding:0 15 3 15;background-color:lightgreen'><h2>JonnyBee replied on Sunday, April 20, 2014</h2><p>Hi,&nbsp;</p>
<p>If my understanding is correct then you should revisit your object design.&nbsp;</p>
<p>In an &quot;Edit&quot; scenario where you can edit several objects you should rather have &quot;owning&quot; references rather than viewing it as &quot;independent&quot; objects with a &quot;using&quot; relationship. In an owning relationship you WILL automatically subscribe property changed in child objects (and get &quot;Child-Changed&quot; events).</p>
<p>So I would rather suggest to have material and the &quot;editable&quot; properties as child objects rather than independent objects and maybe &quot;copy&quot; the default values from a standard material list.&nbsp;</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>utexas replied on Monday, April 21, 2014</h2><p>JohnnyBee - Thanks for the reply. &nbsp;I was planning a &quot;using&quot; relationship since the &quot;colors&quot; collection items could be used by many &quot;person&quot; objects. &nbsp;In other words, many parents could refer to a single child. &nbsp;</p></div><div style='padding:0 15 3 15;background-color:lightgreen'><h2>skagen00 replied on Monday, April 21, 2014</h2><p>We handle this kind of thing.</p>
<p>When one is say - editing an organization record, we have a primary contact Id on that record and some associated read-only information for display - the contact&#39;s name, etc.</p>
<p>We have a pretty rich app where people can have multiple browser windows open with multiple records open (can switch between open records).&nbsp; When for example we&#39;d have the primary contact and the organization both opened, we handle the idea that a saving of the primary contact can update the read-only information in the organization business object (that describes that contact).</p>
<p>We allow an interface to be defined on our business objects called IRecordChangeEventListener.&nbsp; The UI is responsible for knowing what records it has open.&nbsp; It is responsible for understanding when any given record it has open is saved/updated.</p>
<p>It then invokes a &quot;ReflectRecordChanged&quot; method through that interface on any of the open records that implement it.&nbsp;&nbsp; It includes the record type and the record Id.&nbsp; So the open organization would get this call and see, &quot;hey, the contact matching my primary contact ID changed...I need to go back to the database to get some updated information&quot; - this just leverages the same logic that would fire if my primary contact ID changed from 4 to 5 and I needed to get a new first &amp; last name for example.</p>
<p>Such a record change notification system ends up working very nicely in our system.&nbsp;&nbsp; Whether it reflects &quot;perfect design&quot; or not, it allows objects to be told that other objects they are *using*&nbsp;were changed and to handle that information accordingly.</p>
<p>&nbsp;</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>skagen00 replied on Monday, April 21, 2014</h2><p>Just to add, we would never really store an editable Contact object as a child object of Organization.&nbsp; We would either store just the couple read-only properties containing first name, last name (things we need) as individual managed properties of an Organization or we would have a ContactInfo read-only object as a child object of Organization.</p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
