<html><header><title>cannot load csla.dll</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>cannot load csla.dll</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/2821.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>demon_roby@hotmail.com posted on Friday, May 04, 2007</h2><P>hi, i'm a new user of csla framework, i find it really interesting.<BR>I make a project to undestand how it works with&nbsp;a dataPortal (remoting on IIS) and a win app, and it seems to work properly, my application can get object and update; authentication is windows, i use the impersonate to pass credential.<BR>now the real problem, my application get a 'Pippo object', populates the&nbsp;properties, save the object (all this work)&nbsp;and then send it to a NTService that host a provider which exposes a queue.<BR>in this enqueuing process this provider needs to call some operation on this 'Pippo', in fact on calling dataPortal methods&nbsp;it FAULTS..<BR>the error is </P>
<P>System.IO.FileLoadException:&nbsp;Impossible to load file or&nbsp;'Csla' or one of its dependency. Access denied.<BR>File Name: 'Csla'</P>
<P>===&nbsp;Preassociation&nbsp;infos ===<BR>REG: User = Unknown<BR>REG: DisplayName = Csla<BR>&nbsp;(Partial)<BR>REG: Appbase = <A>file:///Z:/WinServiceProjects/AMCommunicator/AMCommunicator/bin/Release/</A><BR>REG: PrivatePath iniziale = NULL<BR>Assembly chiamante: Csla, Version=2.1.4.0, Culture=neutral, PublicKeyToken=93be5fdc093e4c30.<BR>===<BR>... [omissis] ...<BR><BR>REG: tentativo di download del nuovo URL <A>file:///Z:/WinServiceProjects/AMCommunicator/AMCommunicator/bin/Release/Csla.DLL</A>.<BR>ERR: errore irreversibile durante il recupero della base di codice successiva per il download (hr = 0x80070005).<BR></P>
<P>everyone that have an idea of what is wrong? <BR>remoting is still impersonating the win app, perhaps it cannot call the dataportal impersonating me?<BR>thanks for any information.</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Saturday, May 05, 2007</h2><P>It looks like your queue software is trying to load Csla.dll from a Z: drive. Is this a network drive? If so, you are probably running into .NET security (CAS), because a network drive defaults to being in the Intranet zone.</P>
<P>Or, perhaps the user account of the Windows service doesn't have access to the folder containing Csla.dll?</P>
<P>Also, if you are dynamically loading assemblies you'll almost certainly run into a bug/feature of .NET where deserialization is unable to find an already loaded assembly in memory. This is NOT the problem you are having now, but one you are likely to have after you solve the current one <img src="/emoticons/emotion-5.gif" alt="Wink [;)]" /></P>
<P>If you look at the EnterpriseServices data portal host class in CSLA you'll find code for a "serialization workaround" and this code should solve this second problem.</P>
<P>But your first problem certainly looks like a security problem where your process simply doesn't have security to the file itself, or security to load the file.</P></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
