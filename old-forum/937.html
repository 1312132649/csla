<html><header><title>AcceptChanges of BusinessBaseList doesn't remove delete objects from DeletedList collection</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>AcceptChanges of BusinessBaseList doesn't remove delete objects from DeletedList collection</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/937.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>oshokodk posted on Thursday, August 17, 2006</h2><FONT size=2>
<P>AcceptChanges method of BusinessListBase doesn't remove deleted objects from DeletedList collection. The following fragment of AcceptCahnges checks EditLevelAdded proprety before deleting an object from collection. Objects loaded from DB never get deleted. They just sit in DeletedList collection until end of BusinessListBase lifespan. </P>
<P></FONT><FONT color=#0000ff size=2>for</FONT><FONT size=2> (</FONT><FONT color=#0000ff size=2>int</FONT><FONT size=2> index = DeletedList.Count - 1; index &gt;= 0; index--)</P>
<P>{</P>
<P>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;C child = DeletedList[index];</P>
<P>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;child.AcceptChanges();</P>
<P></FONT><FONT color=#008000 size=2>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// if item is below its point of addition, remove</P></FONT><FONT size=2>
<P></FONT><FONT color=#0000ff size=2>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if</FONT><FONT size=2> (child.EditLevelAdded &gt; _editLevel)</P>
<P>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DeletedList.RemoveAt(index);</P>
<P>}</P>
<P>I think check should be&nbsp;<FONT color=#0000ff>&nbsp;if</FONT><FONT size=2> (child.EditLevelAdded <FONT color=#ff0000>&nbsp;&gt;=</FONT> _editLevel).&nbsp; </FONT></P>
<P><FONT size=2>Is this is a bug or&nbsp; a</FONT>m I doing anything wrong?</P></FONT></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Saturday, August 19, 2006</h2>They must remain in DeletedList until after the Save() operation - otherwise you'd never know which items to delete during the data access process. Only newly added and then deleted items are ever removed from the collection entirely.<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>oshokodk replied on Monday, August 21, 2006</h2><P>At what time are "old" but deleted items removed from DeletedList collection?&nbsp;Only&nbsp;2 methods remove object from&nbsp; DeletedList : UndoChanges and AcceptChanges. Both of them however perform check</P><FONT size=2><FONT size=2>
<P><FONT size=3><FONT color=#0000ff>if</FONT> (child.EditLevelAdded &gt; _editLevel)</FONT></P>
<P><FONT size=3>I don't see DeletedList collection being cleared either. </FONT></P>
<P><FONT size=3>At what time are "old" but deleted items removed from DeletedList collection?</FONT>&nbsp;</P>
<P>&nbsp;</P>
<P>Thanks,</P>
<P>Oleg Shokodko</P></FONT></FONT></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Monday, August 21, 2006</h2>Old items are cleared when you save the collection.&nbsp; You have to code this yourself.<br></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
