<html><header><title>CSLA with Entity Framework</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>CSLA with Entity Framework</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/9201.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>Sara posted on Tuesday, July 13, 2010</h2><p>Hi,</p>
<p>We have a solution which use ADO.NET before. Now we want to use Entity Framework instead of ADO.NET. </p>
<p>Can someone advise if&nbsp;there is&nbsp;a way we switch data access between them without any change of DAL?</p>
<p>Lot of thanks in advance.</p>
<p>Sara</p>
<p>&nbsp;</p></div><div style='padding:0 15 3 15;background-color:lightgreen'><h2>RockfordLhotka replied on Tuesday, July 13, 2010</h2><p>You should read Chapter 18 of the <em>Expert 2008 Business Objects</em> book, and probably watch the <em>Core 3.8 video series</em>, because there&#39;s an entire video segment devoted to data access. Also read the data access FAQ: <a href="http://www.lhotka.net/cslanet/faq/DataFaq.ashx">http://www.lhotka.net/cslanet/faq/DataFaq.ashx</a></p>
<p>CSLA supports four data access models (see the FAQ). If you are using models 2-4, and your DAL interface is highly abstract (probably means using DTO objects for data transfer between your business objects and the DAL), then you can switch between DAL implementations very easily. Of course that comes at a cost, in that your DAL implementations are a little more complex than otherwise - but nothing comes for free.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Sara replied on Tuesday, July 13, 2010</h2><p>Thanks a lot, Rockford. </p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>k2so replied on Wednesday, July 14, 2010</h2><p>Hi Rocky, </p>
<p>In the video 3.8 video 3 &nbsp;you demonstrated how to create an interface DAL factory&nbsp; so that we can switch btw data access technologies easily. The sample you created for one of the BO DAL (TestObject)&nbsp;used a IDataReader as return type of the Fetch method. This won&#39;t be applicable for EF as&nbsp;all the results are returned as IEnumerable. </p>
<p>So does it make sense to make the return type to IEnumerable instead, as that would allow the data reader to be return as well? But this means we cannot just dump it into the SafeDataReader, can we?</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Wednesday, July 14, 2010</h2><p>The problem with IDataReader is that EF doesn&#39;t expose data reader objects. Really, IDataReader is an excellent choice if your DAL implementations will be based on ADO.NET itself.</p>
<p>If your DAL implementations are going to be EF based, or will be a mix of EF, ADO.NET and who-knows-what-else, then your DAL interface needs to be more abstract, and should probably use DTOs.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>k2so replied on Thursday, July 15, 2010</h2><p>Thanks Rocky.</p>
<p>Mix of EF &amp; ADO.NET - This is exactly the direction we are exploring. Basically, we would like to examine the pros and cons of changing the DAL to EF, hence we are changing part of the BOs to fetch via EF but we would like to switch back easily. Existing DAL objects are all using ADO.NET right now and returning the results in the IDataReader type, which is as you mentioned not exposed by the EF.</p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
