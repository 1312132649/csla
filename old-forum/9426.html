<html><header><title>Installation help - anyone?</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Installation help - anyone?</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/9426.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>Q Johnson posted on Wednesday, August 25, 2010</h2><p>I&#39;m not new to CSLA, but I&#39;ve sure been away a LONG time. <img src="http://forums.lhotka.net/emoticons/emotion-6.gif" alt="Sad" /></p>
<p>I tried today to follow the installation instructions (the most recent I can find here) that are aimed at CSLA 3.6 and VS2008.&nbsp; But I was doing it with the 3.83 download and VS 2010.&nbsp; It was dreadful.</p>
<p>I&#39;d be happy to pay a reasonable rate to somebody who can accept an invitation for a remote connection to my workstation (Windows 7 64-bit with 8 GB RAM) and spend an hour or so with me to get the framework and samples working (including set up of the IIS 7 support needed for the sample web projects). I&#39;ve already downloaded them and set up the recommended folder structure.</p>
<p>Any takers?&nbsp; Or should I just put a call in to Magenic?</p>
<p>Many thanks!</p>
<p>&nbsp;</p>
<p>&nbsp;</p></div><div style='padding:0 15 3 15;background-color:lightgreen'><h2>RockfordLhotka replied on Wednesday, August 25, 2010</h2><p>The IIS7 stuff is a pain.</p>
<p>You should start be making sure the non-web samples work - that will establish that you have CSLA built and all the folders in the right relative locations.</p>
<p>The biggest issue I encounter with IIS7 is that the default app pool typically doesn&#39;t have access to any of my folders. The easiest solution (right or wrong I really don&#39;t know) is to create a new application pool that runs under your user id. Then have your web apps run in that app pool, and thus under your user id. That way they have access to your personal folders, which is probably where the samples are located.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Q Johnson replied on Wednesday, August 25, 2010</h2><p>I&#39;d feel a lot more confident implementing this advice if the only other time I&#39;ve ever used the IIS manager wasn&#39;t to set up CSLA for 1.5 about six or seven years ago <img src="http://forums.lhotka.net/emoticons/emotion-7.gif" alt="Tongue Tied" /></p>
<p>So I should try it again?&nbsp; And do I build the cslacs.sln solution (that was called csla in the directions)?&nbsp; Or should I be trying to build the cslacs-build.sln?</p>
<p>I&#39;ll post my results in the morning.&nbsp; I expect they will include another plea for that remote connection assistance, but we&#39;ll see. <img src="http://forums.lhotka.net/emoticons/emotion-1.gif" alt="Smile" /></p>
<p>Thanks, Rocky!</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Wednesday, August 25, 2010</h2><p>Build cslacs.sln. The other solution was created to drive a build server (which has since died), and it almost certainly won&#39;t work outside that server.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Q Johnson replied on Thursday, August 26, 2010</h2><p>Thanks, Rocky.&nbsp; I went through the process again and built cslacs.sln in each case.</p>
<p><span style="text-decoration:underline;">Framework</span></p>
<p>Step 1: no problem.&nbsp; Step 2: I used our own key file per step 2a and will follow 2b and 2c, of course.&nbsp; I&#39;m not sure what the counsel in 2d really means, but it looks like choices I&#39;ll make once I&#39;m in a project that references CSLA (with the appSettings, right), so it shouldn&#39;t affect my steps at installation here.&nbsp; Built debug solution.&nbsp; Then I used ConfigMgr to change to Realease mode and did step 3, Build Release solution.&nbsp; I&#39;ll take care of referencing the custom controls in the toolbox (step 4) when I get PTracker open.</p>
<p><span style="text-decoration:underline;">Sample Applications</span></p>
<p>Steps 1 and 2: no problem, really.&nbsp; VS2010 converted ProjectTrackervb.sln and offered only two warnings - </p>
<p>Converting deprecated dbp file &#39;C:\Visual Studio Projects\csla\samples\CslaNet\vb\ProjectTrackervb\PTData\PTData.dbp&#39; to &#39;C:\Visual Studio Projects\csla\samples\CslaNet\vb\ProjectTrackervb\PTData\PTData.dbproj&#39;</p>
<p>and</p>
<p>Your project is targeting .NET Framework 2.0 or 3.0. If your project uses assemblies requiring a newer .NET Framework, your project will fail to build. You can change the .NET Framework version by&nbsp;...</p>
<p>And both of these seem OK.&nbsp; If I want to use .NET 4, obviously I&#39;ll have to install CSLA 4; makes sense.&nbsp;</p>
<p>Steps 3 and 4 (that involve IIS) are going to be challenging for me, but your advice above to be sure and get PTWin working first is a great idea.&nbsp; So I&nbsp;tried that first. </p>
<p><span style="font-family:Consolas;color:#0000ff;font-size:x-small;"><span style="font-family:Consolas;color:#0000ff;font-size:x-small;"><span style="font-family:Consolas;color:#0000ff;font-size:x-small;"><span style="font-family:Arial;color:#000000;">And&nbsp;I&#39;m having no luck with getting it to work, even after moving the mdf/ldf files to my SQL Server&#39;s data folder and trying (apparently unsuccessfully) to attach them.&nbsp; I can negotiate the login in screen as pm/pm, but it shows that I&#39;m not logged in and any attempt to use menu items throw authentication exceptions.&nbsp; On stepping through the code, it sure looks like a problem with wcfHost, but I can&#39;t figure out how to execute the instructions in step 3, even with your suggestion above.&nbsp; (Hell, I can&#39;t even find a valid user name to use instead of the default ApplicationPoolIdentity.)&nbsp; </span></span></span></span></p>
<p><span style="font-family:Consolas;color:#0000ff;font-size:x-small;"><span style="font-family:Consolas;color:#0000ff;font-size:x-small;"><span style="font-family:Consolas;color:#0000ff;font-size:x-small;"><span style="font-family:Arial;color:#000000;">Any ideas on where to go from here?&nbsp; </span></span></span></span></p>
<p><span style="font-family:Consolas;color:#0000ff;font-size:x-small;"><span style="font-family:Consolas;color:#0000ff;font-size:x-small;"><span style="font-family:Consolas;color:#0000ff;font-size:x-small;"><span style="font-family:Arial;color:#000000;">I feel increasingly in need of hand-holding.&nbsp; I don&#39;t expect you have the time for it, but I&#39;m hoping somebody reading this wants to sell an hour or so of their time to repeat something they&#39;ve obviously done successfully in their own environment.&nbsp; Any takers?</span></span></span></span></p></div><div style='padding:0 15 3 15;background-color:lightgreen'><h2>griff replied on Thursday, August 26, 2010</h2><p>Hi</p>
<p>don&#39;t know if this will help - but on Vista (maybe Win7) I had to &#39;unblock&#39; the mdf file (and some other dll&#39;s) via file properties as they became &#39;blocked&#39; when downloaded from internet. &nbsp; Don&#39;t know of this applies to you here?</p>
<p>Richard</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Q Johnson replied on Thursday, August 26, 2010</h2><p>FYI, I unblocked the zip fie before I unzipped the contents and I belive that eliminated this potential problem.&nbsp; I don&#39;t have an Unblock button available when I look at these files&#39; properties.</p>
<p>FYI, even though the attachment attempt failed, when I attempt again subsequently, it tells me it is failing on a CREATE FILE method because the file is already open in SQL Server (even though it doesn&#39;t show up in the list of databases... even when logged in as the sa account).&nbsp; And when I try and delete the copies that are there (in the SQL data folder), Windows balks and tells me that they are open in SQL Server, too.</p>
<p>I also tried detaching by executing sp_detach_db, but, of course, it failed complaining that the database doesn&#39;t exist.</p>
<p>Although I hate how superstitious it sounds, I think I&#39;m going to reboot and see if it clears up some current confusion on Windows&#39; part that the file is open in SQL Server even though it is not.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Thursday, August 26, 2010</h2>it is likely that the cb projecttracker does not work in csla 4, that moght be the core issue here.

rocky</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Q Johnson replied on Thursday, August 26, 2010</h2><p>After rebooting, the databases show up in SQL Mgt Studio with their file names, no doubt caused by the connection string with the syntax that was so odd-looking to me (i.e., the&nbsp;part with AttachDbFilename= in it).</p>
<p>Now I&#39;m wondering if the .\SqlExpress should have been left in there, too.&nbsp; Is that a shortcut expression to whatever server is available?</p>
<p><span style="font-family:Consolas;color:#0000ff;font-size:x-small;"><span style="font-family:Consolas;color:#0000ff;font-size:x-small;"><span style="font-family:Consolas;color:#0000ff;font-size:x-small;">and moments later... YES!! It&#39;s working.&nbsp; When I (a) restored the connectionstring all the way back to its default value from the original download AND (b) commented out the CslaDataPortalProxy key in the appSettings section&nbsp;in the app.config file (the one for WcfProxy was the only one of the four there that wasn&#39;t already commented out), I get logged in correctly and can see the Projects in search window when I choose the Edit Project menu item in PTracker.</span></span></span></p>
<p><span style="font-family:Consolas;color:#0000ff;font-size:x-small;"><span style="font-family:Consolas;color:#0000ff;font-size:x-small;"><span style="font-family:Consolas;color:#0000ff;font-size:x-small;">I&#39;m perplexed by the fact that the copies of the db files in the SQL Server data folder still appear to be in use by SQL Server, though.&nbsp; Clearly the files in use are the ones in the C:\Visual Studio Projects\.... folder location.&nbsp;</span></span></span><span style="font-family:Consolas;color:#0000ff;font-size:x-small;"><span style="font-family:Consolas;color:#0000ff;font-size:x-small;"><span style="font-family:Consolas;color:#0000ff;font-size:x-small;">I&#39;m also a little confused by the different path values for the databases in the SQL Mgt Studio. </span></span></span></p>
<p><span style="font-family:Consolas;color:#0000ff;font-size:x-small;"><span style="font-family:Consolas;color:#0000ff;font-size:x-small;"><span style="font-family:Consolas;color:#0000ff;font-size:x-small;">Here are the three values shown in app.config:</span></span></span></p>
<p><span style="font-family:Consolas;color:#0000ff;font-size:x-small;"><span style="font-family:Consolas;color:#0000ff;font-size:x-small;"><span style="font-family:Consolas;color:#0000ff;font-size:x-small;">PTracker: C:\Visual Studio Projects\csla\Samples\CslaNet\vb\ProjectTrackervb\PTracker.mdf</span></span></span></p>
<p><span style="font-family:Consolas;color:#0000ff;font-size:x-small;"><span style="font-family:Consolas;color:#0000ff;font-size:x-small;"><span style="font-family:Consolas;color:#0000ff;font-size:x-small;">Security: C:\Visual Studio Projects\csla\Samples\CslaNet\vb\ProjectTrackervb\Security.mdf</span></span></span></p>
<p><span style="font-family:Consolas;color:#0000ff;font-size:x-small;"><span style="font-family:Consolas;color:#0000ff;font-size:x-small;"><span style="font-family:Consolas;color:#0000ff;font-size:x-small;">PTWin.My.MySettings.PTrackerConnectionString: C:\Visual Studio Projects\csla\Samples\CslaNet\vb\ProjectTrackervb\PTData\PTracker.mdf&nbsp; (which doesn&#39;t even exist???)<br /></span></span></span><span style="font-family:Consolas;color:#0000ff;font-size:x-small;"><span style="font-family:Consolas;color:#0000ff;font-size:x-small;"><span style="font-family:Consolas;color:#0000ff;font-size:x-small;"></span></span></span></p>
<p><span style="font-family:Consolas;color:#0000ff;font-size:x-small;"><span style="font-family:Consolas;color:#0000ff;font-size:x-small;"><span style="font-family:Consolas;color:#0000ff;font-size:x-small;">The value for the path for Security in SQL Mgt Studio looks the same as it does in app.config.&nbsp; But the one for PTracker is:</span></span></span></p>
<p><span style="font-family:Consolas;color:#0000ff;font-size:x-small;"><span style="font-family:Consolas;color:#0000ff;font-size:x-small;"><span style="font-family:Consolas;color:#0000ff;font-size:x-small;">C:\VISUAL STUDIO PROJECTS\CSLA20\PROJECTTRACKER20VB\PTRACKER.MDF</span></span></span></p>
<p><span style="font-family:Consolas;color:#0000ff;font-size:x-small;"><span style="font-family:Consolas;color:#0000ff;font-size:x-small;"><span style="font-family:Consolas;color:#0000ff;font-size:x-small;">Why are those twenties embedded in the path name?&nbsp; There is no ..\CSLA20 or ..\PROJECTTRACKER20VB path on the machine.&nbsp; And why does the connection work from the PTracker app when the DataSource name doesn&#39;t really match what is in SQL Server for the PTracker db??</span></span></span></p>
<p><span style="font-family:Consolas;color:#0000ff;font-size:x-small;"><span style="font-family:Consolas;color:#0000ff;font-size:x-small;"><span style="font-family:Consolas;color:#0000ff;font-size:x-small;">If you have time to answer these, great.&nbsp;But I&#39;m just glad to be able to be running PTracker again after these too many years &lt;g&gt;. For now I&#39;m going to&nbsp;get back to&nbsp;the video series and try and get up to speed.&nbsp; btw, if you haven&#39;t seen these and you&#39;re reading this because you&#39;re fairly new here... get them.&nbsp; They&#39;re terrific.</span></span></span></p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Thursday, August 26, 2010</h2><p>When you said that VS had to upgrade the solution, that&#39;s when I realized what you were doing.</p>
<p>ProjectTracker in C# only partially works in CSLA 4. ProjectTracker in VB probably won&#39;t even build, much less run.</p>
<p>ProjectTracker is an odd duck. It is a &quot;sample&quot; but really it is part of the <i>Expert Business Objects</i> books. And I update that &quot;sample&quot; as part of the book project, not part of the CSLA dev work.</p>
<p>I&#39;m not 100% sure I&#39;m going to keep it going forward, though I might. Certainly I&#39;ll need a sample for the new ebook series. Right now I&#39;m working on the <i>CSLA 4 Overview</i> ebook, which is more concept heavy and less code heavy - so no sample is required quite yet. But as soon as I get into subsequent ebooks I&#39;ll be using a sample (one or more samples actually). That might be an updated ProjectTracker, or it might be something else - depends on how bored/frustrated I am with PTracker when I get there :)</p>
<p>In any case, that&#39;s not a good sample to be looking at for CSLA 4 - at least not in VB. It is the <i>only</i> sample for ASP.NET MVC 2 in C# right now - though that should change in the next couple weeks when Gary gets his new MVC sample into svn.</p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
