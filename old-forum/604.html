<html><header><title>SafeDataReader (default values)</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>SafeDataReader (default values)</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/604.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>rbraun posted on Wednesday, July 12, 2006</h2><P><FONT face=Arial size=2>I have a question regarding default values in the SafeDataReader that I was hoping to get help with (or at least point me in the right direction).</FONT></P>
<P><FONT face=Arial size=2>Unfortunately, when we get data from our external source, it is not guaranteed to populate all columns in our tables. So this means in our table design we can't use the 'not null' option in our column definition. This also means that we might or might not have 'real' data when our objects are created. The problem is that when we call our SafeDataReader.GetInt32 for instance (this also applies to GetBoolean(), GetDouble(), etc), we may get a value because of the null value in the column but this might or might not be valid data.</FONT></P>
<P><FONT face=Arial size=2>To get around this, I created a simple class to with two properties, HasData (bool) and Value (contains real value). The HasData property is set after determining !IsDbNull for that column value. So before using the data, we ask if it HasData before proceeding. This solution seems a bit sketchy, but at least gives us an indicator if the value is real or not. Does anyone have a better solution for this?</FONT></P>
<P><FONT face=Arial size=2><BR>SafeDataReader.cs---------------------------------<BR>...<BR>&nbsp;&nbsp;&nbsp; public virtual int GetInt32(int i)<BR>&nbsp;&nbsp;&nbsp; {<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (_dataReader.IsDBNull(i))<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return 0;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; else<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return _dataReader.GetInt32(i);<BR>&nbsp;&nbsp;&nbsp; }<BR>...</FONT></P>
<P><FONT face=Arial size=2>&nbsp;</FONT></P>
<P><FONT face=Arial size=2></FONT>&nbsp;</P>
<P><FONT face=Arial size=2></FONT>&nbsp;</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Wednesday, July 12, 2006</h2>My only comment is that you may want to do this outside the reader, and have the BO 'figure out' if the value is null.&nbsp; The reason is that your default may vary in different BOs.&nbsp; If&nbsp; you embed the choosing of the default in the SafeDataReader, you're locking yourself into saying that a particular data type is ALWAYS doing to default to that value.<br></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
