<html><header><title>CSLA 2.0 Rules not breaking?</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>CSLA 2.0 Rules not breaking?</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/4330.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>KickTheSky posted on Monday, February 11, 2008</h2>&nbsp;Hi,<br><br>I am trying to set up a prototype of a CSLA project so that we can use this for an upcoming project.&nbsp; Everything works really well except for one thing.&nbsp; The rules never break on the business objects I am creating.&nbsp; Here is an example of some rules I declared for a simple state/country class...<br><br>protected override void AddBusinessRules()<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ValidationRules.AddRule(new RuleHandler(CommonRules.StringRequired), "StateCode");<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ValidationRules.AddRule(new RuleHandler(CommonRules.StringMaxLength),<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; new CommonRules.MaxLengthRuleArgs("StateCode", 5));<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ValidationRules.AddRule(new RuleHandler(CommonRules.StringRequired), "Name");<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ValidationRules.AddRule(new RuleHandler(CommonRules.StringMaxLength),<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; new CommonRules.MaxLengthRuleArgs("Name", 50));<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ValidationRules.AddRule(new RuleHandler(CommonRules.StringRequired), "CountryCode");<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ValidationRules.AddRule(new RuleHandler(CommonRules.StringMaxLength),<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; new CommonRules.MaxLengthRuleArgs("CountryCode", 5));<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br><br>When NewState() is called, none of the rules are broken.&nbsp; If I make an edit to one of the fields and the others are still blank, it is still valid and no rules are broken.&nbsp; What am I missing?<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>webjedi replied on Monday, February 11, 2008</h2><P>Generally the rules are only checked at time the object is created (using the ctor). Check that in your DataPortal_Create for the object you are asserting the rules like this:</P><FONT color=#eddac0 size=3>
<P><FONT color=#000000>ValidationRules</FONT></FONT><FONT size=3>.</FONT><FONT size=3>CheckRules();</FONT></P>
<P><FONT color=#000000><FONT color=#e0e0e0 size=3><FONT color=#000000>After the object has been created you could call this as the last step of the set part of the property.&nbsp; I think...haven't tried that myself.</FONT></P></FONT></FONT></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JoeFallon1 replied on Tuesday, February 12, 2008</h2><P>In addition to the reply above make sure your properties are coded correctly: (note that they are case sensitive so your Strings must match the case of the Property name.)</P><FONT size=2>
<P></FONT><FONT color=#0000ff size=2>Public</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>Overridable</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>Property</FONT><FONT size=2> Statecode() </FONT><FONT color=#0000ff size=2>As</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>String<BR></FONT><FONT color=#0000ff size=2>&nbsp; Get<BR></FONT><FONT color=#0000ff size=2>&nbsp;&nbsp;&nbsp; Return</FONT><FONT size=2> mStatecode<BR></FONT><FONT color=#0000ff size=2>&nbsp; End</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>Get</P></FONT><FONT size=2>
<P></FONT><FONT color=#0000ff size=2>&nbsp; Set</FONT><FONT size=2>(</FONT><FONT color=#0000ff size=2>ByVal</FONT><FONT size=2> Value </FONT><FONT color=#0000ff size=2>As</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>String</FONT><FONT size=2>)<BR>&nbsp;&nbsp;&nbsp; </FONT><FONT color=#0000ff size=2>If</FONT><FONT size=2> mStatecode&lt;&gt; Value </FONT><FONT color=#0000ff size=2>Then<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </FONT><FONT size=2>mStatecode= Value<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; PropertyHasChanged(</FONT><FONT color=#ff00ff size=2>"Statecode"</FONT><FONT size=2>)<BR>&nbsp;&nbsp;&nbsp; </FONT><FONT color=#0000ff size=2>End</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>If<BR>&nbsp;</FONT><FONT size=2><FONT color=#0000ff>&nbsp;End</FONT> <FONT color=#0000ff>Set<BR></FONT></FONT><FONT size=2><FONT color=#0000ff>End</FONT> <FONT color=#0000ff>Property</P></FONT></FONT></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
