<html><header><title>Cascade delete with ObjectListView</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Cascade delete with ObjectListView</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/3374.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>SonOfPirate posted on Monday, August 13, 2007</h2><P>I have a Windows Forms application that consists of a root object, let's say, "Catalog" that contains 3 child collections: Artists, Titles and Genres.&nbsp; Each Artist contains a collection of Titles that belong to that artist.&nbsp; Likewise, each Genre has a collection of Titles that belong to that genre.</P>
<P>The ArtistTitles and GenreTitles collections are implemented as ObjectListViews on the Catalog.Titles collection.&nbsp; This ensure that all references to a title, whether obtained directly through the Titles property or indirectly through the Artist or Genre, are pointing to the same instance in memory.&nbsp; This is working great (thanks to those responsible for the ObjectListView!).&nbsp; However...</P>
<P>We are displaying each list in an editable grid.&nbsp; As part of this, we allow the user to remove items from each list.&nbsp; This uses the IBindingList.Remove(object) on the collection.&nbsp; So, when viewing the list of artists in the current catalog, we can remove an artist by clicking the delete key which calls IBindingList.Remove on the Artists collection.&nbsp; Internally, we mark the Artist as deleted and move it to the collection's DeletedItems collection.&nbsp; Great.</P>
<P>The problem we have found is that when we delete an Artist, we also need to delete all of the titles belonging to that artist.&nbsp; If we don't we receive a referential integrity error from the database because the foreign key constraint on the Title's Artist column isn't valid (cuz the Artist wasn't saved!).</P>
<P>How best to cascade the delete so that we don't try to save the child items?</P>
<P>I have some thoughts but don't want to lead the witness and would like to hear your ideas/suggestions.</P>
<P>&nbsp;</P></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
