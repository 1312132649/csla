<html><header><title>OT:  Linq lazy loading not working?</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>OT:  Linq lazy loading not working?</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/4499.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 posted on Friday, March 14, 2008</h2>Hi, <br> <p>I have an Association on my table; the association doesn't seem to <br> load. &nbsp;Here's the association: <br> </p><p>private EntityRef&lt;Shared.Employee&gt; createdBy = <br> default( EntityRef&lt;Shared.Employee&gt; ); <br> </p><p>[Association( ThisKey = "CreatedById", IsForeignKey = true )] <br> public Shared.Employee CreatedBy { <br> &nbsp; &nbsp;get { return createdBy.Entity; } <br> &nbsp; &nbsp;set { createdBy.Entity = value; } <br> </p><div id="qhide_171886" class="qt">} <br> <br></div>I try to access the association like this: <br> <p>createdByName = myClass.CreatedBy.LogonName; // Shouldn't this cause <br> CreatedBy to load? <br> </p><p>Instead I get a NullReferenceException. &nbsp;CreatedById is a valid value <br> and a record does exist, but Linq never seems to even bother executing <br> the select to load the Shared.Employee instance. <br> </p><p>Any ideas? <br> </p>Thanks <br> Andy </div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Skafa replied on Friday, March 14, 2008</h2>I haven't tried this, but when looking at the examples in de documentation (http://msdn2.microsoft.com/en-us/library/bb425822.aspx)<br>the EntityRef field isn't initialized with something... <br><br>so, try removing default(EntityRef&lt;...<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Friday, March 14, 2008</h2>I'm trying to figure this out by creating entites via the designer instead of hand coding the needed additions.&nbsp; That default( EntityRef&lt;entity&gt; ) is in the designer generated code as well. I'm at a point now where everything is almost identical to the designer code, expect I don't tell Linq the private backing field. maybe that has something to do with it?&nbsp; I'll post back..<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Skafa replied on Friday, March 14, 2008</h2>I don't know either then..<br><br>When you specify a private backing field. Dlinq doesn't use the getter/setter for that property. So if you have custom business logic in your setter/getters, you should'nt specify a backing field.<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Friday, March 14, 2008</h2>Argh,<br><br>Ok.&nbsp; When you have an association, you MUST specify the Stroage for the association, or it just silently fails.<br><br>Hope that helps someone else..<br><br>Andy<br></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
