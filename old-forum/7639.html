<html><header><title>SafeDataReader SQL2008 time(7) datatype, GetTimeSpan()</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>SafeDataReader SQL2008 time(7) datatype, GetTimeSpan()</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/7639.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>JohnyNFullEffect posted on Wednesday, September 16, 2009</h2><P>Hey all,</P>
<P>I was working with the SQL2008 time data type today.&nbsp; My table has two time(7) columns and I am looking to use our current CSLA implementation to get the values from the database.&nbsp; We are on CSLA.NET 3.6.</P>
<P>I was looking at the SafeDataReader class and looking for something that would correctly get this data from the SafeDataReader.&nbsp; Obviously, there is no GetTimeSpan() method.&nbsp; What would work for this?&nbsp; I read on an MSDN page that in SQL2008, the best data type in .NET is a TimeSpan.</P>
<P>Should I extend the class and write my own?&nbsp; How do I figure out what is happening under the covers for something like SafeDataReader.GetSmartDate() to extend that to&nbsp;GetTimeSpan.</P>
<P>Thanks!</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Wednesday, September 16, 2009</h2><P>SafeDataReader just implements IDataReader, automatically handling null values.</P>
<P>OK, so it also does string&lt;-&gt;ordinal index translations and has GetSmartDate(), but otherwise it is just a wrapper over IDataReader.</P>
<P>If your specific database provider (such as SQL Server or Oracle) has custom types or other non-standard stuff in their particular datareader (such as SqlDataReader) you might consider creating your own wrapper around <EM>that particular datareader</EM> to tap into that non-standard functionality.</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Turntwo replied on Tuesday, February 19, 2013</h2><p>You could use&nbsp;</p>
<p>(TimeSpan)datareader.GetValue(&quot;ReturnTime&quot;)</p>
<p>If your column allows nulls, then you would have to handle that yourself, because I&#39;m pretty sure the GetValue method doesn&#39;t convert nulls for you (what would it convert it to?). &nbsp;</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JonnyBee replied on Wednesday, February 20, 2013</h2><p>Or you could also write an extension method to add a GetTimeSpan method to IDataReader/SafeDataReader. </p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
