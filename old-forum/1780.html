<html><header><title>Migration to CSLA 2.x</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Migration to CSLA 2.x</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/1780.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>JonM posted on Thursday, November 16, 2006</h2><P>Hey everyone,</P>
<P>I've got a large winforms application that I just finished in CSLA 1.5x.&nbsp; The application is actually built-on .NET 2.0 but uses the CSLA 1.5x framewrok because the CSLA 2.0 did not come out until we were like 80% done with the project.&nbsp; Now there are 2 big migration problems I see.</P>
<OL>
<LI>We implemented our validation using the dead CheckRules() pattern.&nbsp; I saw a lot of complaining about it in the forums, but we got it to work just fine.</LI>
<LI>We have rolled our own security model that is nothing like the CSLA 2.x security setup.</LI></OL>
<P>Here are my question</P>
<OL>
<LI>Can I just ignore the new CSLA 2.x security model and use my own?</LI>
<LI>Is there anything I can do to convert validation rules while I'm still using the CSLA 1.5x framework so the transition to 2.0 won't be so bad?</LI></OL></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JonM replied on Tuesday, November 21, 2006</h2>No takers on this one?&nbsp; I know migration isn't going to be easy but any advice from the CSLA.net gurus would be great.</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Tuesday, November 21, 2006</h2>Search on this forum, others have posted their upgrade experiences here.&nbsp; <br><br>Mainly you'll need to focus on validation rules / auth rules, and how DP_C is called.&nbsp; I can't quite recall anything else at the moment, but Rocky's change log gives a pretty good indication on the major areas that could cause pain.<br><br>HTH<br>Andy<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Tuesday, November 21, 2006</h2><BLOCKQUOTE><div><img src="/Themes/default/images/icon-quote.gif"> <strong>JonM:</strong></div><div><ol><li>Can I just ignore the new CSLA 2.x security model and use my own?</li>
<li>Is there anything I can do to convert validation rules while I'm still using the CSLA 1.5x framework so the transition to 2.0 won't be so bad?</li></ol></div></BLOCKQUOTE><br><br>1. Yes, you can simply ignore the authorization support in CSLA if you'd like. Alternately, you can override CanReadProperty() and CanWriteProperty() and replace those methods with your own logic - thus partially integrating with the existing infrastructure. That might be best if you can make it work, as you'll be able to take advantage of some new features in this area over time (like IAuthorizeReadWrite).<br><br>2. No, this one is difficult. If you used the BrokenRules.Assert() approach in 1.x there's nothing to be done but convert the rules to rule methods. However, the process tends to be rather mechanical. BrokenRules.Assert() needs the property name, a human-readable description and a conditional - which is exactly what you need to implement a rule method.<br><br>However, if you are using the CheckRules() concept in 1.3 or higher, that is pretty close to the 2.x model, and so conversion shouldn't be too difficult.<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JonM replied on Sunday, November 26, 2006</h2><P dir=ltr>We'll I've converted a few of my classes to CSLA 2.1 and created a checklist of what has to be changed.&nbsp; Conversion to the new business rules has not been that difficult.&nbsp; However, there are just a lot of other minor changes.&nbsp; In general, I'm in favor of all of the changes, even the dataportal changes that break up the Insert and Update code blocks.&nbsp; I'm starting to think that the easiest and cleanest thing to do will be to just dump my 1.5x business objects and rebuilt them from scratch using the class templates that are included with CSLA framework.&nbsp; I should be able to keep my database schema, my sql stored procedures, and my .NET 2.0 winforms client.&nbsp; I'm thinking I should just swap out my middle tier with a rebuilt CSLA .NET 2.0 dataportal.&nbsp;&nbsp;Do you forsee any nasty issues with databinding differences to 1.5x and 2.x objects?&nbsp; Note, my current 1.5x project is already using a .net 2.0 winforms client and databinding.</P></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
