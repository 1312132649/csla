<html><header><title>Purchase Order Object - Managing Work Flow</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Purchase Order Object - Managing Work Flow</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/5093.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>xxxJasonxxx posted on Monday, July 14, 2008</h2><P>I'm trying to figure out the best way to manage work flow for a purchase order object.....</P>
<P>I've been working on an application for handling our company's purchase orders.&nbsp; I've encapsulated the basic purchase order business logic inside of objects using CSLA 3.0.4.0..&nbsp; The UI is Windows forms.&nbsp; </P>
<P>Currently, I'm&nbsp;trying to work out how to handle the multiple steps/statuses a purchase order follows as it gradually moves through our system ("work flow"???).&nbsp; My original idea was to use the "State" Design Pattern and have all of this logic encapsulated inside the business objects.&nbsp; </P>
<P>However, it was recently suggested that I should use Windows Workflow Foundation instead of the "State" Design Pattern.&nbsp; I am not very familiar with Workflow Foundation and I have some concerns.&nbsp; </P>
<P>At first glance&nbsp;Workflow Foundation&nbsp;appears to be something that I would use for writing scheduled nighttime processes that kick off and perform several tasks in&nbsp;a controlled&nbsp;sequence.&nbsp; And at first glance, I'm struggling to see how&nbsp;WF would work with an event-driven&nbsp;Windows application that starts and stops with no continuous flow.&nbsp; Would WF be appropriate for&nbsp;my purchase order Windows app I described above?&nbsp;</P>
<P>I'm also concerned about the encapsulation of rules and logic related to my purchase order object.&nbsp; It sounds like if I somehow use WF, some of the validation code and security code related to a purchase order would end up in the WF code instead of my purchase order object.&nbsp; I really like how the CSLA-based objects encapsulate everything.&nbsp; So the thought of breaking this encapsulation makes me very uncomfortable (maybe I've become too obsessed with my objects lately).&nbsp; Am I thinking correctly and is this bad?</P>
<P>Any other advise/experiences/links you can share related to this would be greatly appreciated.&nbsp; </P>
<P>Thanks!</P>
<P>Jason</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JoeFallon1 replied on Tuesday, July 15, 2008</h2><P>I write PO and Invoice systems for a living and do not use Windows Workflow. (Nor would I want to.)</P>
<P>I have a large Web app that is CSLA based. It is in production at numerous Fortune 500 companies and has been for&nbsp;4-5 years.</P>
<P>I try and "keep it simple" so I just use a Status field and switch the values as it moves into different states.</P>
<P>YMMV.</P>
<P>Joe</P>
<P>&nbsp;</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>xxxJasonxxx replied on Tuesday, July 15, 2008</h2><P>Joe:</P>
<P>I totally agree with the K.I.S.S. (keep it simple...) ideology -- assuming&nbsp;you're operating in an environment that will allow it.&nbsp; Everything seems to gravitate towards getting way overcomplicated if you let it.</P>
<P>My purchase order object has a "Status" property, but that just tells&nbsp;us what the current status is.&nbsp; It doesn't provide&nbsp;any work flow management.&nbsp; How do you handle which status transitions are allowed and which are not?&nbsp;&nbsp;Also, how do you handle which functionality is allowed or not allowed in each status?&nbsp;&nbsp; These questions are why I'm looking at the State pattern and WF.&nbsp; </P>
<P>Our purchase orders&nbsp;have 23 different statuses all of which prevent/allow certain activities.&nbsp; So I'm trying to come up with a way to manage this.&nbsp; I think at our company, the K.I.S.S. train may have derailed and left behind a lot of carnage.&nbsp; :-)</P>
<P>Jason</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JoeFallon1 replied on Tuesday, July 15, 2008</h2><P>23?? I won't ask.</P>
<P>I only have a handful for POs and Invoices.</P>
<P>Essentially a given step in the flow equates to a Screen (or offline task) which equates to a BO. So the BO in charge of that Use Case is the one that determines if everything is valid and then saves the data and changes the status to the next step.</P>
<P>So a user could enter something in a screen and it is status=1.</P>
<P>Then a task can pick it up and validate it and change it to status=2.</P>
<P>Then users who need to work with stuff at status=2 open their screens and see the list of fully validated items. They can pick one for processing which will change the status to 3.</P>
<P>Then an approval workflow could kick in (which is separate from status in my app.) As it goes through all levels of approval the status stays the same but the approval data changes to show who approved what when.</P>
<P>When the last approver gives the Ok - then the status changes to 4.</P>
<P>Or it could be rejected which may be status 5.</P>
<P>Or Cancelled - status 6.</P>
<P>Data could be exported&nbsp; by an offline task - change status to 7.</P>
<P>Status values of 1-7 are just figurative - you can call them anything.</P>
<P>Anyway - that's how I do it. </P>
<P>KISS.</P>
<P>Joe</P>
<P>&nbsp;</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>xxxJasonxxx replied on Tuesday, July 15, 2008</h2><P>Thanks Joe!&nbsp; I really like your idea.&nbsp; I'm going to run that by our team as a new option to consider.</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>jeff replied on Tuesday, July 15, 2008</h2>One app I did a while back had a table that defined what status choices were valid to transition to from a given status. And there was a visual designer so the end users could change around the "workflow" which really was just this simple transition flow diagram. So some managers could kick something back to a previous step or whatever, and ultimately with the right approvals the entity would get to the "closed" or final stage. Each transition was stored in a history table so users could add comments about why they were changing to whatever status.<br><br><br><br><br><br><br><br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>xxxJasonxxx replied on Friday, July 25, 2008</h2><P>We decided to bring in a Magenic consultant to help us determine if/how Microsoft's WF would work for us.&nbsp; We've worked with Magenic on a couple&nbsp;other projects and all the consultants they've sent us have been outstanding.</P>
<P>It sounds like there are 2 kinds of WF workflows - Sequential and State Machine.&nbsp; I think in our situation we need State Machine.&nbsp; But unfortunately, the majority of the documentation and examples we've found focus on&nbsp;Sequential.&nbsp; So at this point we're waiting for the the Magenic guy to&nbsp;come next week and show us what we need to do.</P></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
