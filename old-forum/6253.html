<html><header><title>Complex validation</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Complex validation</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/6253.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>Slayer posted on Monday, January 26, 2009</h2>Hi everyone...<br /><br />I have a scenario where I have a parent(customer) object, which contains a collection of child(address) objects. When there are more that 5 child objects, my parent object`s state must become invalid. But when I remove a child object, my parent`s state must become valid again. <br /><br />Is this possible with the CSLA framework ? My experience is somewhat limited.<br /><br />Thanks in advance...</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ayubu replied on Monday, January 26, 2009</h2><P>You can addbusiness rule&nbsp;for the Collection property as normal then inside the validation method you just call</P>
<P>&nbsp;</P>
<P>if targe t.Addresses.Count &gt; 5 then</P>
<P>e.Description ="Error message"</P>
<P>return false</P>
<P>else</P>
<P>return true</P>
<P>end if</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Slayer replied on Monday, January 26, 2009</h2>Im not sure I understand...My collection property only has a GET.<br /><br />public Addresses AddrColl<br />{<br />      get<br />      {<br />            return _addrColl;       <br />      }<br />}<br /><br />So the validation needs to happen after I call Customer.AddrColl.Remove(addrObj).</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Fintanv replied on Monday, January 26, 2009</h2>I handle a similar requirement in the following way.&nbsp; My collection is actually a child of a business object.&nbsp; The root object contains 0 or more root level properties, 1 or more editable child collections, and 0 or more read only collections for pick lists.&nbsp; Since the editable collection is a property of the root, the rule to check the valid/invalid count quantity of the collection, exists in the root object.&nbsp; <br><br>The root object also overrides the OnChildChanged method, and if the changed child is the collection with the count rule then I run the ValidationRules.CheckRules(property_name) and OnPropertyChanged(property_name).<br><br>Regards<br>-- Fintan<br></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
