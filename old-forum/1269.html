<html><header><title>Looking for another way to implement</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Looking for another way to implement</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/1269.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>DeHaynes posted on Tuesday, September 19, 2006</h2><P>&nbsp;&nbsp;&nbsp;In my first foray into the CSLA framework, I hacked the framework to get the functionality I was looking for.&nbsp; One of the things I did was add the capability for records to be marked inactive.&nbsp; This allowed the records to continue to exist for historical purposes but also removed them from mainstream processing.&nbsp; I did this by hacking the DataPortal classes as follows:</P>
<P>&nbsp;&nbsp;&nbsp;I added the following to the client side DataPortal</P><FONT size=2>
<P></FONT><FONT color=#808080 size=2>///</FONT><FONT color=#008000 size=2> </FONT><FONT color=#808080 size=2>&lt;summary&gt;<BR></FONT><FONT color=#808080 size=2>///</FONT><FONT color=#008000 size=2> Called by the business object's Save() method to<BR></FONT><FONT color=#808080 size=2>///</FONT><FONT color=#008000 size=2> deactivate an object in the database.<BR></FONT><FONT color=#808080 size=2>///</FONT><FONT color=#008000 size=2> </FONT><FONT color=#808080 size=2>&lt;/summary&gt;<BR></FONT><FONT color=#808080 size=2>///</FONT><FONT color=#008000 size=2> </FONT><FONT color=#808080 size=2>&lt;remarks&gt;<BR></FONT><FONT color=#808080 size=2>///</FONT><FONT color=#008000 size=2> Note that this method returns a reference to the updated business object.<BR></FONT><FONT color=#808080 size=2>///</FONT><FONT color=#008000 size=2> If the server-side DataPortal is running remotely, this will be a new and<BR></FONT><FONT color=#808080 size=2>///</FONT><FONT color=#008000 size=2> different object from the original, and all object references MUST be updated<BR></FONT><FONT color=#808080 size=2>///</FONT><FONT color=#008000 size=2> to use this new object.<BR></FONT><FONT color=#808080 size=2>///</FONT><FONT color=#008000 size=2> </FONT><FONT color=#808080 size=2>&lt;/remarks&gt;<BR></FONT><FONT color=#808080 size=2>///</FONT><FONT color=#008000 size=2> </FONT><FONT color=#808080 size=2>&lt;typeparam name="T"&gt;</FONT><FONT color=#008000 size=2>Specific type of the business object.</FONT><FONT color=#808080 size=2>&lt;/typeparam&gt;<BR></FONT><FONT color=#808080 size=2>///</FONT><FONT color=#008000 size=2> </FONT><FONT color=#808080 size=2>&lt;param name="obj"&gt;</FONT><FONT color=#008000 size=2>A reference to the business object to be updated.</FONT><FONT color=#808080 size=2>&lt;/param&gt;<BR></FONT><FONT color=#808080 size=2>///</FONT><FONT color=#008000 size=2> </FONT><FONT color=#808080 size=2>&lt;returns&gt;</FONT><FONT color=#008000 size=2>A reference to the updated business object.</FONT><FONT color=#808080 size=2>&lt;/returns&gt;</P></FONT><FONT size=2>
<P>[System.Diagnostics.CodeAnalysis.</FONT><FONT color=#008080 size=2>SuppressMessage</FONT><FONT size=2>(</FONT><FONT color=#800000 size=2>"Microsoft.Design"</FONT><FONT size=2>, </FONT><FONT color=#800000 size=2>"CA1062:ValidateArgumentsOfPublicMethods"</FONT><FONT size=2>)][System.Diagnostics.CodeAnalysis.</FONT><FONT color=#008080 size=2>SuppressMessage</FONT><FONT size=2>(</FONT><FONT color=#800000 size=2>"Microsoft.Globalization"</FONT><FONT size=2>, </FONT><FONT color=#800000 size=2>"CA1303:DoNotPassLiteralsAsLocalizedParameters"</FONT><FONT size=2>, MessageId = </FONT><FONT color=#800000 size=2>"Framework.DataPortalException.#ctor(System.String,System.Exception,System.Object)"</FONT><FONT size=2>)]<BR></FONT><FONT color=#0000ff size=2>public</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>static</FONT><FONT size=2> T Deactivate&lt;T&gt;(T obj)<BR>{<BR>&nbsp;&nbsp;&nbsp;</FONT><FONT color=#0000ff size=2>return</FONT><FONT size=2> (T)Deactivate((</FONT><FONT color=#0000ff size=2>object</FONT><FONT size=2>)obj);<BR>}</P>
<P></FONT><FONT color=#808080 size=2>///</FONT><FONT color=#008000 size=2> </FONT><FONT color=#808080 size=2>&lt;summary&gt;<BR></FONT><FONT color=#808080 size=2>///</FONT><FONT color=#008000 size=2> Called by the business object's Save() method to deactivate an object in the database.<BR></FONT><FONT color=#808080 size=2>///</FONT><FONT color=#008000 size=2> </FONT><FONT color=#808080 size=2>&lt;/summary&gt;<BR></FONT><FONT color=#808080 size=2>///</FONT><FONT color=#008000 size=2> </FONT><FONT color=#808080 size=2>&lt;remarks&gt;<BR></FONT><FONT color=#808080 size=2>///</FONT><FONT color=#008000 size=2> Note that this method returns a reference to the updated business object.<BR></FONT><FONT color=#808080 size=2>///</FONT><FONT color=#008000 size=2> If the server-side DataPortal is running remotely, this will be a new and<BR></FONT><FONT color=#808080 size=2>///</FONT><FONT color=#008000 size=2> different object from the original, and all object references MUST be updated<BR></FONT><FONT color=#808080 size=2>///</FONT><FONT color=#008000 size=2> to use this new object.<BR></FONT><FONT color=#808080 size=2>///</FONT><FONT color=#008000 size=2> </FONT><FONT color=#808080 size=2>&lt;/remarks&gt;<BR></FONT><FONT color=#808080 size=2>///</FONT><FONT color=#008000 size=2> </FONT><FONT color=#808080 size=2>&lt;param name="obj"&gt;</FONT><FONT color=#008000 size=2>A reference to the business object to be updated.</FONT><FONT color=#808080 size=2>&lt;/param&gt;<BR></FONT><FONT color=#808080 size=2>///</FONT><FONT color=#008000 size=2> </FONT><FONT color=#808080 size=2>&lt;returns&gt;</FONT><FONT color=#008000 size=2>A reference to the updated business object.</FONT><FONT color=#808080 size=2>&lt;/returns&gt;</P></FONT><FONT size=2>
<P></FONT><FONT color=#0000ff size=2>public</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>static</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>object</FONT><FONT size=2> Deactivate(</FONT><FONT color=#0000ff size=2>object</FONT><FONT size=2> obj)<BR>{<BR>&nbsp;&nbsp;&nbsp;Server.</FONT><FONT color=#008080 size=2>DataPortalResult</FONT><FONT size=2> result;<BR>&nbsp;&nbsp;&nbsp;</FONT><FONT color=#008080 size=2>MethodInfo</FONT><FONT size=2> method = </FONT><FONT color=#008080 size=2>MethodCaller</FONT><FONT size=2>.GetMethod(obj.GetType(), </FONT><FONT color=#800000 size=2>"DataPortal_Deactivate"</FONT><FONT size=2>);<BR>&nbsp;&nbsp;&nbsp;DataPortalClient.</FONT><FONT color=#008080 size=2>IDataPortalProxy</FONT><FONT size=2> proxy;<BR>&nbsp;&nbsp;&nbsp;proxy = GetDataPortalProxy(RunLocal(method));<BR>&nbsp;&nbsp;&nbsp;Server.</FONT><FONT color=#008080 size=2>DataPortalContext</FONT><FONT size=2> dpContext = </FONT><FONT color=#0000ff size=2>new</FONT><FONT size=2> Server.</FONT><FONT color=#008080 size=2>DataPortalContext</FONT><FONT size=2>(GetPrincipal(), proxy.IsServerRemote);<BR>&nbsp;&nbsp;&nbsp;OnDataPortalInvoke(</FONT><FONT color=#0000ff size=2>new</FONT><FONT size=2> </FONT><FONT color=#008080 size=2>DataPortalEventArgs</FONT><FONT size=2>(dpContext));</FONT></P>
<P><FONT color=#0000ff size=2>&nbsp;&nbsp;&nbsp;try<BR></FONT><FONT size=2>&nbsp;&nbsp;&nbsp;{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;result = proxy.Deactivate(obj, dpContext);<BR>&nbsp;&nbsp;&nbsp;}</FONT></P>
<P><FONT color=#0000ff size=2>&nbsp;&nbsp;&nbsp;catch</FONT><FONT size=2> (Server.</FONT><FONT color=#008080 size=2>DataPortalException</FONT><FONT size=2> ex)<BR>&nbsp;&nbsp;&nbsp;{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;result = ex.Result;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT color=#0000ff size=2>if</FONT><FONT size=2> (proxy.IsServerRemote)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT color=#008080 size=2>ApplicationContext</FONT><FONT size=2>.SetGlobalContext(result.GlobalContext);</FONT></P>
<P><FONT color=#0000ff size=2>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>new</FONT><FONT size=2> </FONT><FONT color=#008080 size=2>DataPortalException</FONT><FONT size=2>(</FONT><FONT color=#800000 size=2>"DataPortal.Update "</FONT><FONT size=2> + </FONT><FONT color=#008080 size=2>Resources</FONT><FONT size=2>.Failed, ex.InnerException, result.ReturnObject);<BR>&nbsp;&nbsp;&nbsp;}</P>
<P></FONT><FONT color=#0000ff size=2>&nbsp;&nbsp;&nbsp;if</FONT><FONT size=2> (proxy.IsServerRemote)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT color=#008080 size=2>ApplicationContext</FONT><FONT size=2>.SetGlobalContext(result.GlobalContext);<BR></FONT><FONT size=2>&nbsp;&nbsp; OnDataPortalInvokeComplete(</FONT><FONT color=#0000ff size=2>new</FONT><FONT size=2> </FONT><FONT color=#008080 size=2>DataPortalEventArgs</FONT><FONT size=2>(dpContext));<BR></FONT><FONT color=#0000ff size=2>&nbsp;&nbsp;&nbsp;return</FONT><FONT size=2> result.ReturnObject;<BR>}</P>
<P></FONT><FONT color=#808080 size=2>///</FONT><FONT color=#008000 size=2> </FONT><FONT color=#808080 size=2>&lt;summary&gt;<BR></FONT><FONT color=#808080 size=2>///</FONT><FONT color=#008000 size=2> Called by the business object's Save() method to re-activate an object in the database.<BR></FONT><FONT color=#808080 size=2>///</FONT><FONT color=#008000 size=2> </FONT><FONT color=#808080 size=2>&lt;/summary&gt;<BR></FONT><FONT color=#808080 size=2>///</FONT><FONT color=#008000 size=2> </FONT><FONT color=#808080 size=2>&lt;remarks&gt;<BR></FONT><FONT color=#808080 size=2>///</FONT><FONT color=#008000 size=2> Note that this method returns a reference to the updated business object.<BR></FONT><FONT color=#808080 size=2>///</FONT><FONT color=#008000 size=2> If the server-side DataPortal is running remotely, this will be a new and<BR></FONT><FONT color=#808080 size=2>///</FONT><FONT color=#008000 size=2> different object from the original, and all object references MUST be updated<BR></FONT><FONT color=#808080 size=2>///</FONT><FONT color=#008000 size=2> to use this new object.<BR></FONT><FONT color=#808080 size=2>///</FONT><FONT color=#008000 size=2> </FONT><FONT color=#808080 size=2>&lt;/remarks&gt;<BR></FONT><FONT color=#808080 size=2>///</FONT><FONT color=#008000 size=2> </FONT><FONT color=#808080 size=2>&lt;param name="obj"&gt;</FONT><FONT color=#008000 size=2>A reference to the business object to be updated.</FONT><FONT color=#808080 size=2>&lt;/param&gt;<BR></FONT><FONT color=#808080 size=2>///</FONT><FONT color=#008000 size=2> </FONT><FONT color=#808080 size=2>&lt;returns&gt;</FONT><FONT color=#008000 size=2>A reference to the updated business object.</FONT><FONT color=#808080 size=2>&lt;/returns&gt;</P></FONT><FONT size=2>
<P></FONT><FONT color=#0000ff size=2>public</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>static</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>object</FONT><FONT size=2> Reactivate(</FONT><FONT color=#0000ff size=2>object</FONT><FONT size=2> obj)<BR>{<BR></FONT><FONT size=2>&nbsp;&nbsp;&nbsp;Server.</FONT><FONT color=#008080 size=2>DataPortalResult</FONT><FONT size=2> result;<BR></FONT><FONT size=2>&nbsp;&nbsp;&nbsp;</FONT><FONT color=#008080 size=2>MethodInfo</FONT><FONT size=2> method = </FONT><FONT color=#008080 size=2>MethodCaller</FONT><FONT size=2>.GetMethod(obj.GetType(), </FONT><FONT color=#800000 size=2>"DataPortal_Reactivate"</FONT><FONT size=2>);<BR></FONT><FONT size=2>&nbsp;&nbsp;&nbsp;DataPortalClient.</FONT><FONT color=#008080 size=2>IDataPortalProxy</FONT><FONT size=2> proxy;<BR></FONT><FONT size=2>&nbsp;&nbsp;&nbsp;proxy = GetDataPortalProxy(RunLocal(method));<BR>&nbsp;&nbsp;&nbsp;Server.</FONT><FONT color=#008080 size=2>DataPortalContext</FONT><FONT size=2> dpContext = </FONT><FONT color=#0000ff size=2>new</FONT><FONT size=2> Server.</FONT><FONT color=#008080 size=2>DataPortalContext</FONT><FONT size=2>(GetPrincipal(), proxy.IsServerRemote);<BR></FONT><FONT size=2>&nbsp;&nbsp;&nbsp;OnDataPortalInvoke(</FONT><FONT color=#0000ff size=2>new</FONT><FONT size=2> </FONT><FONT color=#008080 size=2>DataPortalEventArgs</FONT><FONT size=2>(dpContext));</FONT></P>
<P><FONT size=2>&nbsp;&nbsp;&nbsp;</FONT><FONT color=#0000ff size=2>try<BR>&nbsp;&nbsp;&nbsp;</FONT><FONT size=2>{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;result = proxy.Reactivate(obj, dpContext);<BR>&nbsp;&nbsp;&nbsp;}</P>
<P></FONT><FONT color=#0000ff size=2>&nbsp;&nbsp;&nbsp;catch</FONT><FONT size=2> (Server.</FONT><FONT color=#008080 size=2>DataPortalException</FONT><FONT size=2> ex)<BR>&nbsp;&nbsp;&nbsp;{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;result = ex.Result;<BR></FONT><FONT color=#0000ff size=2>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if</FONT><FONT size=2> (proxy.IsServerRemote)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT color=#008080 size=2>ApplicationContext</FONT><FONT size=2>.SetGlobalContext(result.GlobalContext);&nbsp;&nbsp;&nbsp;</FONT></P>
<P><FONT color=#0000ff size=2>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>new</FONT><FONT size=2> </FONT><FONT color=#008080 size=2>DataPortalException</FONT><FONT size=2>(</FONT><FONT color=#800000 size=2>"DataPortal.Update "</FONT><FONT size=2> + </FONT><FONT color=#008080 size=2>Resources</FONT><FONT size=2>.Failed, ex.InnerException, result.ReturnObject);<BR>&nbsp;&nbsp;&nbsp;}</P>
<P></FONT><FONT color=#0000ff size=2>&nbsp;&nbsp;&nbsp;if</FONT><FONT size=2> (proxy.IsServerRemote)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT color=#008080 size=2>ApplicationContext</FONT><FONT size=2>.SetGlobalContext(result.GlobalContext);</FONT></P>
<P><FONT size=2>&nbsp;&nbsp;&nbsp;OnDataPortalInvokeComplete(</FONT><FONT color=#0000ff size=2>new</FONT><FONT size=2> </FONT><FONT color=#008080 size=2>DataPortalEventArgs</FONT><FONT size=2>(dpContext));<BR></FONT><FONT color=#0000ff size=2>&nbsp;&nbsp;&nbsp;return</FONT><FONT size=2> result.ReturnObject;<BR>}</FONT></P>
<P><FONT size=2></FONT>&nbsp;</P>
<P><FONT size=2>I added the following to the server side DataPortal</FONT></P><FONT size=2><FONT size=2>
<P></FONT><FONT color=#808080 size=2>///</FONT><FONT color=#008000 size=2> </FONT><FONT color=#808080 size=2>&lt;summary&gt;<BR></FONT><FONT color=#808080 size=2>///</FONT><FONT color=#008000 size=2> Deactivates a business object.<BR></FONT><FONT color=#808080 size=2>///</FONT><FONT color=#008000 size=2> </FONT><FONT color=#808080 size=2>&lt;/summary&gt;<BR></FONT><FONT color=#808080 size=2>///</FONT><FONT color=#008000 size=2> </FONT><FONT color=#808080 size=2>&lt;param name="criteria"&gt;</FONT><FONT color=#008000 size=2>Criteria object describing business object.</FONT><FONT color=#808080 size=2>&lt;/param&gt;<BR></FONT><FONT color=#808080 size=2>///</FONT><FONT color=#008000 size=2> </FONT><FONT color=#808080 size=2>&lt;param name="context"&gt;<BR></FONT><FONT color=#808080 size=2>///</FONT><FONT color=#008000 size=2> </FONT><FONT color=#808080 size=2>&lt;see cref="Server.DataPortalContext" /&gt;</FONT><FONT color=#008000 size=2> object passed to the server.<BR></FONT><FONT color=#808080 size=2>///</FONT><FONT color=#008000 size=2> </FONT><FONT color=#808080 size=2>&lt;/param&gt;</P></FONT><FONT size=2>
<P></FONT><FONT color=#0000ff size=2>public</FONT><FONT size=2> </FONT><FONT color=#008080 size=2>DataPortalResult</FONT><FONT size=2> Deactivate(</FONT><FONT color=#0000ff size=2>object</FONT><FONT size=2> obj, </FONT><FONT color=#008080 size=2>DataPortalContext</FONT><FONT size=2> context)<BR>{<BR>&nbsp;&nbsp;&nbsp;</FONT><FONT color=#0000ff size=2>try<BR>&nbsp;&nbsp;&nbsp;</FONT><FONT size=2>{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SetContext(context);<BR></FONT><FONT color=#008080 size=2>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DataPortalResult</FONT><FONT size=2> result;<BR></FONT><FONT color=#008080 size=2>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MethodInfo</FONT><FONT size=2> method = </FONT><FONT color=#008080 size=2>MethodCaller</FONT><FONT size=2>.GetMethod(obj.GetType(), </FONT><FONT color=#800000 size=2>"DataPortal_Deactivate"</FONT><FONT size=2>);<BR></FONT><FONT color=#008080 size=2>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IDataPortalServer</FONT><FONT size=2> portal;<BR></FONT><FONT color=#0000ff size=2>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;switch</FONT><FONT size=2> (TransactionalType(method))<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT color=#0000ff size=2>case</FONT><FONT size=2> </FONT><FONT color=#008080 size=2>TransactionalTypes</FONT><FONT size=2>.EnterpriseServices:<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT size=2>portal = </FONT><FONT color=#0000ff size=2>new</FONT><FONT size=2> </FONT><FONT color=#008080 size=2>ServicedDataPortal</FONT><FONT size=2>();</P>
<P></FONT><FONT color=#0000ff size=2>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;try<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT size=2>{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;result = portal.Deactivate(obj, context);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<BR></FONT><FONT color=#0000ff size=2>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;finally<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT size=2>{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((</FONT><FONT color=#008080 size=2>ServicedDataPortal</FONT><FONT size=2>)portal).Dispose();<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<BR></FONT><FONT color=#0000ff size=2>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break</FONT><FONT size=2>;</P>
<P></FONT><FONT color=#0000ff size=2>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case</FONT><FONT size=2> </FONT><FONT color=#008080 size=2>TransactionalTypes</FONT><FONT size=2>.TransactionScope:<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;portal = </FONT><FONT color=#0000ff size=2>new</FONT><FONT size=2> </FONT><FONT color=#008080 size=2>TransactionalDataPortal</FONT><FONT size=2>();<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;result = portal.Deactivate(obj, context);<BR></FONT><FONT color=#0000ff size=2>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break</FONT><FONT size=2>;</P>
<P></FONT><FONT color=#0000ff size=2>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;default</FONT><FONT size=2>:<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;portal = </FONT><FONT color=#0000ff size=2>new</FONT><FONT size=2> </FONT><FONT color=#008080 size=2>SimpleDataPortal</FONT><FONT size=2>();<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;result = portal.Deactivate(obj, context);<BR></FONT><FONT color=#0000ff size=2>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break</FONT><FONT size=2>;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<BR></FONT><FONT color=#0000ff size=2>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return</FONT><FONT size=2> result;<BR>&nbsp;&nbsp;&nbsp;}</P>
<P></FONT><FONT color=#0000ff size=2>&nbsp;&nbsp;&nbsp;finally<BR>&nbsp;&nbsp;&nbsp;</FONT><FONT size=2>{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ClearContext(context);<BR>&nbsp;&nbsp;&nbsp;}<BR>}</P>
<P></FONT><FONT color=#808080 size=2>///</FONT><FONT color=#008000 size=2> </FONT><FONT color=#808080 size=2>&lt;summary&gt;<BR></FONT><FONT color=#808080 size=2>///</FONT><FONT color=#008000 size=2> Re-activates a business object.<BR></FONT><FONT color=#808080 size=2>///</FONT><FONT color=#008000 size=2> </FONT><FONT color=#808080 size=2>&lt;/summary&gt;<BR></FONT><FONT color=#808080 size=2>///</FONT><FONT color=#008000 size=2> </FONT><FONT color=#808080 size=2>&lt;param name="criteria"&gt;</FONT><FONT color=#008000 size=2>Criteria object describing business object.</FONT><FONT color=#808080 size=2>&lt;/param&gt;<BR></FONT><FONT color=#808080 size=2>///</FONT><FONT color=#008000 size=2> </FONT><FONT color=#808080 size=2>&lt;param name="context"&gt;<BR></FONT><FONT color=#808080 size=2>///</FONT><FONT color=#008000 size=2> </FONT><FONT color=#808080 size=2>&lt;see cref="Server.DataPortalContext" /&gt;</FONT><FONT color=#008000 size=2> object passed to the server.<BR></FONT><FONT color=#808080 size=2>///</FONT><FONT color=#008000 size=2> </FONT><FONT color=#808080 size=2>&lt;/param&gt;</P></FONT><FONT size=2>
<P></FONT><FONT color=#0000ff size=2>public</FONT><FONT size=2> </FONT><FONT color=#008080 size=2>DataPortalResult</FONT><FONT size=2> Reactivate(</FONT><FONT color=#0000ff size=2>object</FONT><FONT size=2> obj, </FONT><FONT color=#008080 size=2>DataPortalContext</FONT><FONT size=2> context)<BR>{<BR>&nbsp;&nbsp;&nbsp;</FONT><FONT color=#0000ff size=2>try<BR>&nbsp;&nbsp;&nbsp;</FONT><FONT size=2>{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SetContext(context);<BR></FONT><FONT color=#008080 size=2>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DataPortalResult</FONT><FONT size=2> result;<BR></FONT><FONT color=#008080 size=2>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MethodInfo</FONT><FONT size=2> method = </FONT><FONT color=#008080 size=2>MethodCaller</FONT><FONT size=2>.GetMethod(obj.GetType(), </FONT><FONT color=#800000 size=2>"DataPortal_Reactivate"</FONT><FONT size=2>);<BR></FONT><FONT color=#008080 size=2>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IDataPortalServer</FONT><FONT size=2> portal;<BR></FONT><FONT color=#0000ff size=2>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;switch</FONT><FONT size=2> (TransactionalType(method))<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT color=#0000ff size=2>case</FONT><FONT size=2> </FONT><FONT color=#008080 size=2>TransactionalTypes</FONT><FONT size=2>.EnterpriseServices:<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;portal = </FONT><FONT color=#0000ff size=2>new</FONT><FONT size=2> </FONT><FONT color=#008080 size=2>ServicedDataPortal</FONT><FONT size=2>();</P>
<P></FONT><FONT color=#0000ff size=2>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;try<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT size=2>{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;result = portal.Reactivate(obj, context);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<BR></FONT><FONT color=#0000ff size=2>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;finally<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT size=2>{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((</FONT><FONT color=#008080 size=2>ServicedDataPortal</FONT><FONT size=2>)portal).Dispose();<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<BR></FONT><FONT color=#0000ff size=2>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break</FONT><FONT size=2>;</P>
<P></FONT><FONT color=#0000ff size=2>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case</FONT><FONT size=2> </FONT><FONT color=#008080 size=2>TransactionalTypes</FONT><FONT size=2>.TransactionScope:<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;portal = </FONT><FONT color=#0000ff size=2>new</FONT><FONT size=2> </FONT><FONT color=#008080 size=2>TransactionalDataPortal</FONT><FONT size=2>();<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;result = portal.Reactivate(obj, context);<BR></FONT><FONT color=#0000ff size=2>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break</FONT><FONT size=2>;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT color=#0000ff size=2>default</FONT><FONT size=2>:<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;portal = </FONT><FONT color=#0000ff size=2>new</FONT><FONT size=2> </FONT><FONT color=#008080 size=2>SimpleDataPortal</FONT><FONT size=2>();<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;result = portal.Reactivate(obj, context);<BR></FONT><FONT color=#0000ff size=2>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break</FONT><FONT size=2>;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</P>
<P></FONT><FONT color=#0000ff size=2>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return</FONT><FONT size=2> result;<BR>&nbsp;&nbsp;&nbsp;}</P>
<P></FONT><FONT color=#0000ff size=2>&nbsp;&nbsp;&nbsp;finally<BR>&nbsp;&nbsp;&nbsp;</FONT><FONT size=2>{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ClearContext(context);<BR>&nbsp;&nbsp;&nbsp;}<BR>}</FONT></P>
<P><FONT size=2>I am now trying to subclass the framework.&nbsp; Can anyone think of a way to subclass the frame work and still have this functionality?&nbsp; I can't think of a way without making my own DataPortals.</P></FONT></FONT></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>DeHaynes replied on Tuesday, September 19, 2006</h2><P>Is it possible to partial class from a different project?</P>
<P>So if I create a Partial Class for Both the client and server DataPortals and only put in it the code I need to add my functionality.&nbsp; Then in the future when a new version of CSLA comes out, I only have to go modify the DataPortal Classes and make them partial classes.</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>DeHaynes replied on Tuesday, September 19, 2006</h2><P>After further review, I have custom code in the following classes</P><FONT color=#0000ff size=2><FONT size=2>
<P>namespace<FONT color=#000000 size=2> Csla</FONT></P><FONT color=#0000ff size=2>
<P>public</FONT><FONT color=#000000 size=2> </FONT><FONT color=#0000ff size=2>static</FONT><FONT color=#000000 size=2> </FONT><FONT color=#0000ff size=2>class</FONT><FONT color=#000000 size=2> </FONT><FONT color=#008080 size=2>DataPortal<BR><FONT color=#0000ff size=2>public</FONT><FONT color=#000000 size=2> </FONT><FONT color=#0000ff size=2>abstract</FONT><FONT color=#000000 size=2>&nbsp;</FONT><FONT color=#0000ff size=2>class</FONT><FONT color=#000000 size=2> </FONT><FONT color=#008080 size=2>EnterpriseServicesProxy<BR><FONT color=#0000ff size=2>public</FONT><FONT color=#000000 size=2>&nbsp;</FONT><FONT color=#0000ff size=2>class</FONT><FONT color=#000000 size=2> </FONT><FONT color=#008080 size=2>LocalProxy<BR><FONT color=#0000ff size=2>public</FONT><FONT color=#000000 size=2> </FONT><FONT color=#0000ff size=2>class</FONT><FONT color=#000000 size=2> </FONT><FONT color=#008080 size=2>RemotingProxy<BR></FONT></FONT></FONT></FONT><FONT color=#008080 size=2><FONT color=#008080 size=2><FONT color=#008080 size=2><FONT color=#008080 size=2><FONT color=#0000ff size=2>public</FONT><FONT color=#000000 size=2>&nbsp;</FONT><FONT color=#0000ff size=2>class</FONT><FONT color=#000000 size=2> </FONT><FONT color=#008080 size=2>WebServicesProxy<BR></FONT></FONT></FONT></FONT></FONT></P>
<P></FONT>namespace</FONT><FONT size=2> Csla.Server.Hosts</P>
<P></FONT><FONT color=#0000ff size=2>public</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>abstract</FONT><FONT size=2>&nbsp;</FONT><FONT color=#0000ff size=2>class</FONT><FONT size=2> </FONT><FONT color=#008080 size=2>EnterpriseServicesPortal<BR></FONT><FONT color=#008080 size=2><FONT color=#0000ff size=2>public</FONT><FONT size=2>&nbsp;</FONT><FONT color=#0000ff size=2>class</FONT><FONT size=2> </FONT><FONT color=#008080 size=2>RemotingPortal</FONT><FONT size=2> <BR></FONT></FONT></P><FONT color=#008080 size=2><FONT size=2><FONT color=#0000ff size=2>
<P>namespace</FONT><FONT size=2><FONT color=#000000> Csla.Server</FONT></FONT></P><FONT size=2><FONT color=#0000ff size=2>
<P>public</FONT><FONT color=#000000 size=2>&nbsp;</FONT><FONT color=#0000ff size=2>class</FONT><FONT color=#000000 size=2> </FONT><FONT color=#008080 size=2>DataPortal<BR></FONT><FONT color=#008080 size=2><FONT color=#0000ff size=2>public</FONT><FONT color=#000000 size=2>&nbsp;</FONT><FONT color=#0000ff size=2>interface</FONT><FONT color=#000000 size=2> </FONT><FONT color=#008080 size=2>IDataPortalServer<BR><FONT color=#0000ff size=2>public</FONT><FONT color=#000000 size=2>&nbsp;</FONT><FONT color=#0000ff size=2>class</FONT><FONT color=#000000 size=2> </FONT><FONT color=#008080 size=2>ServicedDataPortal<BR><FONT color=#0000ff size=2>public</FONT><FONT color=#000000 size=2>&nbsp;</FONT><FONT color=#0000ff size=2>class</FONT><FONT color=#000000 size=2> </FONT><FONT color=#008080 size=2>SimpleDataPortal<BR><FONT color=#0000ff size=2>public</FONT><FONT color=#000000 size=2>&nbsp;</FONT><FONT color=#0000ff size=2>class</FONT><FONT color=#000000 size=2> </FONT><FONT color=#008080 size=2>TransactionalDataPortal<BR><BR></FONT></FONT></FONT></FONT></FONT><FONT color=#008080 size=2><FONT color=#008080 size=2><FONT color=#008080 size=2><FONT color=#008080 size=2><FONT color=#008080 size=2></FONT></FONT></FONT></FONT></FONT></P>
<P><FONT color=#008080 size=2><FONT color=#008080 size=2><FONT color=#008080 size=2><FONT color=#008080 size=2><FONT color=#008080 size=2><FONT color=#000000 size=3>My solution so far has been to make them all partial classes, so I can move my custom code to their own files.&nbsp; I have run into a snag,&nbsp; "<FONT color=#0000ff size=2>public</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>class</FONT><FONT size=2> </FONT><FONT color=#008080 size=2>WebServicePortal</FONT>".&nbsp; In my hacked up version I had to resort to some trickery to get the class customized.&nbsp; Is there any way to <STRONG><EM>partial</EM></STRONG> the class so I can add my custom code?</FONT></FONT></FONT></FONT></FONT></FONT><FONT color=#008080 size=2><FONT color=#008080 size=2><FONT color=#008080 size=2><FONT color=#008080 size=2><FONT color=#008080 size=2></P></FONT></FONT></FONT></FONT></FONT></FONT></FONT></FONT></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>DeHaynes replied on Tuesday, September 19, 2006</h2><P>Specifically my issue I am having is with WebServiceHost under web references.&nbsp; I need to add some items too it. </P>
<P>DeactivateCompletedEventArgs<BR>DactivateCompletedEventHander</P>
<P>ReactivateCompletedEventArgs<BR>RactivateCompletedEventHander</P>
<P>&nbsp;</P>
<P>I am not not familiar with web services.&nbsp; Is there some way to partial this reference too?</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>DeHaynes replied on Tuesday, September 19, 2006</h2>I think I will start a seperate post.&nbsp; I have this pretty much nailed down to a certain area AND the echo in here is too much.</div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
