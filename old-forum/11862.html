<html><header><title>Broken Rule for 1 property</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Broken Rule for 1 property</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/11862.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>jteneglio posted on Friday, March 01, 2013</h2><p>I&#39;m somewhat new with CSLA so this could be a silly question, but is there a way to get all the broken rules for a specific Property.</p>
<p>IE: Person.LastName = &quot;123456&quot;</p>
<p>I would like to have the broken rule&nbsp;&quot;Last Name Invalid -&nbsp;Only numbers not allowed&quot;</p>
<p>I would like to have something like </p>
<p>Person.LastName.BrokenRules containing only errors related to the Last Name<br />&nbsp;even if there are plenty of other broken rules.</p>
<p>let me know</p>
<p>Thanks,<br />jean</p></div><div style='padding:0 15 3 15;background-color:lightgreen'><h2>JonnyBee replied on Saturday, March 02, 2013</h2><p>BusinessObjects expose a GetBrokenRules method that returns a collection with&nbsp;all broken rules for this instance.&nbsp;</p>
<p>You can do a linq query to get all broken rules for a given property.&nbsp;</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>jteneglio replied on Tuesday, March 05, 2013</h2><p>Right, but here is what i&#39;m trying to do, in the XAML I need to change the TextBox border color if there is an error , but it seems that the BrokenRuleCollection does not trigger an event or somehow the xaml does not get it. </p>
<p>So for each properties of the object I need to know if there are broken rules related to it, in the XAML so I can first change the background of the textbox and second display the error in another textblock for that same properties.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>skagen00 replied on Tuesday, March 05, 2013</h2><p>Can you bind the textbox&#39;s border to the property&#39;s propertystatus&#39; IsValid property&nbsp;and just throw a converter on it ... i.e. PropertyValidToControlBackgroundConverter or what have you.</p>
<p>&nbsp;</p></div><div style='padding:0 15 3 15;background-color:lightgreen'><h2>RockfordLhotka replied on Tuesday, March 05, 2013</h2><p>This is the purpose behind the Csla.Xaml.PropertyInfo control. It elevates all the metastate about a property so everything is bindable to other XAML controls.</p>
<p>I discuss this in the <em>Using CSLA 4</em> ebook, and many of the sample apps use this technique.</p>
<p>What is even nicer, is that you can use PropertyInfo within a control template so you can create reusable styles that consistently display errors or other metastate values (tooltips, etc) based on the metadata in the business objects.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>jteneglio replied on Wednesday, March 06, 2013</h2><p>I see , now I tried this code in my Win8 application XAML</p>
<p>&lt;csla:PropertyInfo x:Name=&quot;LastNamePropertyInfo&quot; Source=&quot;{Binding PersonEdit.LastName}&quot;&nbsp; &gt;<br />&lt;TextBlock&nbsp; Text=&quot;{Binding ElementName=LastNamePropertyInfo, Path=IsValid}&quot;</p>
<p>And the TextBlock always return true even I have intentionally make the validation for that field fail.</p>
<p>Anything I&#39;m doing wrong ?</p></div><div style='padding:0 15 3 15;background-color:lightgreen'><h2>RockfordLhotka replied on Wednesday, March 06, 2013</h2><p>By &quot;Win8&quot; do you mean WinRT?</p>
<p>Some features of the WinRT runtime are more similar to Silverlight 2 than to modern XAML. As a result the PropertyInfo control uses the SL2 binding scheme because the modern binding scheme can&#39;t be implemented :(</p>
<p>&lt;csla:PropertyInfo Name=&quot;blah&quot; Source=&quot;{Binding PersonEdit}&quot; PropertyName=&quot;LastName&quot;/&gt;</p>
<p>The Source property must reference the source business object.</p>
<p>The PropertyName property is a string that indicates the property to which we&#39;re &quot;binding&quot;.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>jteneglio replied on Thursday, March 07, 2013</h2><p>Yeah I mean WinRT/Metro/Windows Store app/Modern app / what ever they are going to call it in the future :-)</p>
<p>And the SL2 binding scheme works, thanks</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>jteneglio replied on Sunday, March 10, 2013</h2><p><span style="font-size:x-small;font-family:Consolas;color:#ffffff;"><span style="font-size:x-small;font-family:Consolas;color:#ffffff;"><span style="font-size:x-small;font-family:Consolas;color:#ffffff;"><span style="font-size:x-small;font-family:Consolas;color:#b1b1b1;"><span style="font-size:x-small;font-family:Consolas;color:#b1b1b1;"><span style="font-size:x-small;font-family:Consolas;color:#b1b1b1;">
<p><span style="font-family:Arial;color:#000000;">&lt;TextBlock Style=&quot;{StaticResource ViewerFormTitleStyle}&quot; HorizontalAlignment=&quot;left&quot;&nbsp; Text=&quot;Last Name&quot; Foreground=&quot;{Binding AccentColorBrush, Converter={StaticResource ColorConverter}}&quot; /&gt;<br />&lt;controls:FormFieldTextBox&nbsp;&nbsp; Style=&quot;{StaticResource FormFieldStyle}&quot;&nbsp;&nbsp; Text=&quot;{Binding PersonEdit.LastName, Mode=TwoWay}&quot; <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; behaviors:HighlightFormFieldOnErrors.PropertyErrors=&quot;{Binding ElementName=LastNamePropertyInfo, Path=IsValid}&quot; /&gt;<br />&lt;TextBlock Style=&quot;{StaticResource ErrorMessageStyle}&quot; Text=&quot;{Binding ElementName=LastNamePropertyInfo, Path=BrokenRules, Mode=OneWay, Converter={StaticResource FirstErrorConverter}}&quot; TextWrapping=&quot;Wrap&quot;/&gt;<br />&lt;csla:PropertyInfo x:Name=&quot;LastNamePropertyInfo&quot; Source=&quot;{Binding PersonEdit}&quot; Property=&quot;LastName&quot; /&gt;</span></p>
</span></span></span></span></span></span></p>
<p><span style="font-size:x-small;font-family:Consolas;color:#ffffff;"><span style="font-size:x-small;font-family:Consolas;color:#ffffff;"><span style="font-size:x-small;font-family:Consolas;color:#ffffff;"></span></span></span></p>
<p>&nbsp;</p>
<p>It is strange that in that code, the Behavior works (ElementName=LastNamePropertyInfo Path= IsValid )<br />and the <br />Converter does not with Text=&quot;{Binding ElementName=LastNamePropertyInfo, Path=BrokenRules, </p>
<p>It seems like i&#39;m not getting an event for BrokenRules but I&#39;m with IsValid</p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
