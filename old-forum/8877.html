<html><header><title>Force validation on property even if value has not changed...</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Force validation on property even if value has not changed...</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/8877.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>ballistic posted on Tuesday, May 04, 2010</h2><p>I have a CountryId property that when set, I need to always validate.<br /><br />What is happening is that members register and do not need to set a countryId (using my class AccountRegistration). </p>
<p>Once they go to update an account, they are forced to select a country. However, since they initially signed up and did not set a countryId, I recorded NULL in the database, now, when I go to read this value, it gets converted to 0. &nbsp;When the members update the new form without selecting a country, I am presented with 0. &nbsp;So since the country value is 0 when it&#39;s read and 0 when it is updated, validation never kicks in. &nbsp;<br /><br />Is there a way to force SetProperty to trigger validation even if the value has not changed?<br /><br />I do not want to use ValidationRules.CheckRules() to &nbsp;check all the rules or ValidationRules.CheckRules(CountryIdProperty) to check the one property. &nbsp;I would like to do it in the setter of the CountryId.&nbsp;</p>
<p>&nbsp;- Andres</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>tmg4340 replied on Tuesday, May 04, 2010</h2><p>For what it&#39;s worth, there is an alternative way to look at this.</p>
<p>CSLA provides diffferent tools to allow you to not have to consider NULL values from the database.&nbsp; This is done because, for the most part, a NULL value is not significant to the user interface.&nbsp; However, in your case, it appears that it is.</p>
<p>Depending on how complex you want to make your code (and what your UI controls can manage), I see two different options:</p>
<p>1. Change your CountryId field to a nullable type.&nbsp; CSLA supports these just fine, and if your UI controls can deal with it, the solution is relatively painless.</p>
<p>2. Change your NULL-to-0 conversion to something else - say, NULL-to- -1.</p>
<p>Either solution should give you what you want, which is a way to differentiate &quot;no country selected in the UI&quot;&nbsp;from &quot;no country provided from the database&quot;.&nbsp; That should get CSLA&#39;s validation subsystem to kick in without you having to do anything special.</p>
<p>HTH</p>
<p>- Scott</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>rsbaker0 replied on Wednesday, May 05, 2010</h2><p><div style='padding-left: 50px;background-color:silver'><b>ballistic<br></b> </p>
<p>I do not want to use ValidationRules.CheckRules() to &nbsp;check all the rules or ValidationRules.CheckRules(CountryIdProperty) to check the one property. &nbsp;I would like to do it in the setter of the CountryId.&nbsp;</p>
<p></div></p>
<p>You could do something like this in your setter: (a slight hack but it might solve your particular problem here):</p>
<p>&nbsp;set <br />{<br />&nbsp;&nbsp; if (value != CountryId) <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; SetProperty(CountryIdProperty, value)<br />&nbsp;&nbsp; else if (value == 0)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; PropertyHasChanged(CountryIdProperty.Name);<br />}</p>
<p>Note, however the setter may not even be called if the user doesn&#39;t interact with the corresponding field on your form (not sure what your target UI platform is, but in WinForms controls are often smart enough not to call set property if you don&#39;t change anything), so a better solution is to use nullable types as suggested above.</p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
