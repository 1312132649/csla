<html><header><title>RuleDescription in 3.6 beta2</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>RuleDescription in 3.6 beta2</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/5687.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>Killian35 posted on Tuesday, October 28, 2008</h2>Hello,<br><br>I upgraded my project to 3.6 and noticed the RuleDescription property MethodName now returns a &lt;RuleMethodName/PropertyName&gt; format and it seems the property PropertyName tries to do the same thing, however, the value from PropertyName seems to have trimmed off the first letter. So in the Csla test ValidationTests.MergeBrokenRules the result is:<br>MethodName: RuleBroken/Test1<br>PropertyName: uleBroken/Test1<br><br>Now it's hard for me to belive that is the desired result from PropertyName ;)<br><br>Kelly<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Killian35 replied on Tuesday, October 28, 2008</h2>Hello again,<br><br>Also, I noticed that the BrokenRule.RuleName property returns a different format based on how you define your ValidationRules.AddRule call. For instance:<br><br><font face="Courier New">{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ValidationRules.AddRule&lt;BrokenRulesMergeRoot&gt;(CustomValidate, DurationProperty);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ValidationRules.AddRule(CustomValidate, "Duration");<br>&nbsp;&nbsp;&nbsp;&nbsp; ...<br>}<br><br>&nbsp;&nbsp;&nbsp; private static PropertyInfo&lt;int&gt; DurationProperty = RegisterProperty(new PropertyInfo&lt;int&gt;("Duration", "Duration"));<br>&nbsp;&nbsp;&nbsp; public int Duration<br>&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; get { return GetProperty(DurationProperty); }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; set { SetProperty(DurationProperty, value); }<br>&nbsp;&nbsp;&nbsp; }<br><br>&nbsp;&nbsp;&nbsp; private static bool CustomValidate(BrokenRulesMergeRoot target, RuleArgs args)<br>&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; args.Description = "CustomValidate Broken";<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return false;<br>&nbsp;&nbsp;&nbsp; }<br><br>&nbsp;&nbsp;&nbsp; private static bool CustomValidate(object target, RuleArgs args)<br>&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; args.Description = "CustomValidate Broken";<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return false;<br>&nbsp;&nbsp;&nbsp; }</font><br><br><br>These lines of code were added to the BrokenRulesMergeRoot class in the Csla.Validation tests. Each broken rule name in the broken rules collection is different:<br><br>The rule that uses the string "Default" returns the following rule name: rule://root.Csla.Test.ValidationRules.BrokenRulesMergeRoot/CustomValidate/Duration<br><br>and the one that uses the DefaultProperty info returns this : rule://root.CustomValidate/Duration<br><br>The RuleDescription class doesn't handle the second rule name very well, so I hope this is a fixable bug.<br><br>Thanks,<br>Kelly<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Tuesday, October 28, 2008</h2><P>Thank you for finding this - I'll add it to the bug list.</P></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
