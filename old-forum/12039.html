<html><header><title>Hiding properties in datagrid</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Hiding properties in datagrid</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/12039.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>TygreWolf posted on Tuesday, June 25, 2013</h2><p>Hello,<br /><br />I have a simple WPF application using CSLA 4.5.30, with a DataGrid bound to a CollectionViewSource, which in turn is bound to a ViewModel that inherits from a CSLA ViewModel&lt;T&gt; object.&nbsp; In my case, it&#39;s a UserList (CSLA style) containing UserInfo objects.<br /><br />The data grid by default has the AutoGenerateColumns property set to true.&nbsp; When displayed, it shows both the IsBusy and IsSelfBusy properties of the Model, along with the data associated with the UserInfo object.<br /><br />Why are the IsBusy and IsSelfBusy properties exposed as columns on the data grid, and what is the best way to make sure they are hidden?<br /><br />-Jason</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JonnyBee replied on Tuesday, June 25, 2013</h2><p>Hi,&nbsp;</p>
<p>It is a balance between hiding values from databinding and expose them for databinding so that you can f.ex bind the enabled value of a button to IsDirty.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>TygreWolf replied on Tuesday, June 25, 2013</h2><p>So other than turning off AutoGenerateColumns and manually defining each column in the XAML, is there any other (read: better) way to hide those two properties?</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JonnyBee replied on Tuesday, June 25, 2013</h2><p>Do you use your own intermediate base classes? </p>
<p>In the Csla.Core.BusinessBase class the IsBusy, IsSelfBusy, IsDirty etc all have:</p>
<pre style="font-family:Consolas;font-size:13;color:black;background:white;">&nbsp;&nbsp;&nbsp;&nbsp;[<span style="color:#2b91af;">Browsable</span>(<span style="color:blue;">false</span>)]
&nbsp;&nbsp;&nbsp;&nbsp;[<span style="color:#2b91af;">Display</span>(AutoGenerateField&nbsp;=&nbsp;<span style="color:blue;">false</span>)]</pre>
<p>attributes attached to them so none of them should show up by default in DataGrid. </p>
<p>And this has been unchanged for more than a year.</p>
<p>&nbsp;</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>TygreWolf replied on Tuesday, June 25, 2013</h2><p>No, I don&#39;t.<br /><br />I have<br /><span style="color:blue;"><br />public</span>&nbsp;<span style="color:blue;">sealed</span>&nbsp;<span style="color:blue;">class</span>&nbsp;<span style="color:#2b91af;">UserListViewModel</span>&nbsp;:&nbsp;<span style="color:#2b91af;">ViewModel</span>&lt;Library.BusinessObjects.Users.<span style="color:#2b91af;">UserList</span>&gt;<br /><br />The UserList inherits directly from&nbsp;&nbsp;<span style="color:#2b91af;">ReadOnlyListBase</span>&lt;<span style="color:#2b91af;">UserList</span>,&nbsp;<span style="color:#2b91af;">UserInfo</span>&gt;<br /><br />And the XAML <br /><span style="color:blue;"><br />&lt;</span><span style="color:#a31515;">UserControl.Resources</span><span style="color:blue;">&gt;</span><br />&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:blue;">&lt;</span><span style="color:#a31515;">vm</span><span style="color:blue;">:</span><span style="color:#a31515;">UserListViewModel</span><span style="color:red;">&nbsp;x</span><span style="color:blue;">:</span><span style="color:red;">Key</span><span style="color:blue;">=</span><span style="color:blue;">&quot;UserListViewModel&quot;</span><span style="color:blue;">/&gt;</span><br />&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:blue;">&lt;</span><span style="color:#a31515;">CollectionViewSource</span><span style="color:red;">&nbsp;x</span><span style="color:blue;">:</span><span style="color:red;">Key</span><span style="color:blue;">=</span><span style="color:blue;">&quot;UserListModelViewSource&quot;</span><span style="color:red;">&nbsp;Source</span><span style="color:blue;">=&quot;{</span><span style="color:#a31515;">Binding</span><span style="color:red;">&nbsp;Path</span><span style="color:blue;">=</span><span style="color:blue;">Model</span><span style="color:blue;">,</span><span style="color:red;">&nbsp;Source</span><span style="color:blue;">={</span><span style="color:#a31515;">StaticResource</span><span style="color:red;">&nbsp;UserListViewModel</span><span style="color:blue;">}}</span><span style="color:blue;">&quot;</span><span style="color:blue;">/&gt;</span><br /><span style="color:blue;">&lt;/</span><span style="color:#a31515;">UserControl.Resources</span><span style="color:blue;">&gt;</span><br /><span style="color:blue;">&lt;</span><span style="color:#a31515;">DataGrid</span><span style="color:red;">&nbsp;x</span><span style="color:blue;">:</span><span style="color:red;">Name</span><span style="color:blue;">=</span><span style="color:blue;">&quot;DgUsers&quot;</span><span style="color:red;">&nbsp;ItemsSource</span><span style="color:blue;">=&quot;{</span><span style="color:#a31515;">Binding</span><span style="color:red;">&nbsp;Source</span><span style="color:blue;">={</span><span style="color:#a31515;">StaticResource</span><span style="color:red;">&nbsp;UserListModelViewSource</span><span style="color:blue;">}}</span><span style="color:blue;">&quot;/</span><span style="color:blue;">&gt;</span></p>
<p>This displays a data grid that, as far as I can see, has 2 issues.&nbsp; The first, is that <em>IsBusy</em> and <em>IsSelfBusy </em>are displayed as columns in the grid.&nbsp; The second is that the column headers do not match what is defined in my <em>UserInfo</em> class (whether I use FriendlyName in the RegisterProperty constructor, or just use the Display attribute).</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JonnyBee replied on Tuesday, June 25, 2013</h2><p>Can you verify that the base class for UserInfo has: </p>
<pre style="font-family:Consolas;font-size:13;color:black;background:white;">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:gray;">///</span><span style="color:green;">&nbsp;</span><span style="color:gray;">&lt;summary&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:gray;">///</span><span style="color:green;">&nbsp;Gets&nbsp;a&nbsp;value&nbsp;indicating&nbsp;whether&nbsp;this</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:gray;">///</span><span style="color:green;">&nbsp;object&nbsp;or&nbsp;any&nbsp;of&nbsp;its&nbsp;child&nbsp;objects&nbsp;are</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:gray;">///</span><span style="color:green;">&nbsp;running&nbsp;an&nbsp;async&nbsp;operation.</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:gray;">///</span><span style="color:green;">&nbsp;</span><span style="color:gray;">&lt;/summary&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;[<span style="color:#2b91af;">Browsable</span>(<span style="color:blue;">false</span>)]
&nbsp;&nbsp;&nbsp;&nbsp;[<span style="color:#2b91af;">Display</span>(AutoGenerateField&nbsp;=&nbsp;<span style="color:blue;">false</span>)]
&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:blue;">public</span>&nbsp;<span style="color:blue;">virtual</span>&nbsp;<span style="color:blue;">bool</span>&nbsp;IsBusy
&nbsp;&nbsp;&nbsp;&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:blue;">get</span>&nbsp;{&nbsp;<span style="color:blue;">return</span>&nbsp;IsSelfBusy&nbsp;||&nbsp;(_fieldManager&nbsp;!=&nbsp;<span style="color:blue;">null</span>&nbsp;&amp;&amp;&nbsp;FieldManager.IsBusy());&nbsp;}
&nbsp;&nbsp;&nbsp;&nbsp;}

&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:gray;">///</span><span style="color:green;">&nbsp;</span><span style="color:gray;">&lt;summary&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:gray;">///</span><span style="color:green;">&nbsp;Gets&nbsp;a&nbsp;value&nbsp;indicating&nbsp;whether&nbsp;this</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:gray;">///</span><span style="color:green;">&nbsp;object&nbsp;is</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:gray;">///</span><span style="color:green;">&nbsp;running&nbsp;an&nbsp;async&nbsp;operation.</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:gray;">///</span><span style="color:green;">&nbsp;</span><span style="color:gray;">&lt;/summary&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;[<span style="color:#2b91af;">Browsable</span>(<span style="color:blue;">false</span>)]
&nbsp;&nbsp;&nbsp;&nbsp;[<span style="color:#2b91af;">Display</span>(AutoGenerateField&nbsp;=&nbsp;<span style="color:blue;">false</span>)]
&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:blue;">public</span>&nbsp;<span style="color:blue;">virtual</span>&nbsp;<span style="color:blue;">bool</span>&nbsp;IsSelfBusy
&nbsp;&nbsp;&nbsp;&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:blue;">get</span>&nbsp;{&nbsp;<span style="color:blue;">return</span>&nbsp;_isBusy&nbsp;||&nbsp;LoadManager.IsLoading;&nbsp;}
&nbsp;&nbsp;&nbsp;&nbsp;}<br /><br />and that these properties is not overriden in your UserInfo class. <br /><br />Which DataGrid do you use?  <br /></pre></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JonnyBee replied on Tuesday, June 25, 2013</h2><p>Or maybe it&#39;s just the Microsoft DataGrid does not check AutogenerateField = false on the Display attribute.</p>
<p><a href="http://social.msdn.microsoft.com/Forums/vstudio/en-US/825b9300-5479-41d8-8c6c-30cfeb226c6e/hide-column-inside-a-wpf-datagrid">http://social.msdn.microsoft.com/Forums/vstudio/en-US/825b9300-5479-41d8-8c6c-30cfeb226c6e/hide-column-inside-a-wpf-datagrid </a></p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>TygreWolf replied on Tuesday, June 25, 2013</h2><p>I can&#39;t validate the code of the base class.&nbsp; The CSLA reference I&#39;m using is downloaded from NuGet.&nbsp; I can tell you that it&#39;s version 4.5.30.0.&nbsp; Also, my UserInfo class does not override either of those properties.<br /><br />All in all, these are pretty simplistic classes.&nbsp; I&#39;m not really sure how the DataGrid performs the data binding under the hood, so it&#39;s quite possible that it&#39;s ignoring certain aspects of the binding and/or CSLA framework.<br /><br />Then again, it could just be something stupid that I&#39;m doing (or not doing).<br /><br />I&#39;ve put together a sample solution that shows this behavior.&nbsp; It&#39;s a VS2012 solution.&nbsp; The file is Sample.zip and can be found&nbsp;at <a href="http://www.fileswap.com/dl/PgVg7YriLE/">http://www.fileswap.com/dl/PgVg7YriLE/</a>.<br /><br />-Jason</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>TygreWolf replied on Tuesday, June 25, 2013</h2><p>Just an FYI, I&#39;ve also tried adjusting the XAML to:<br /><span style="color:blue;"><br />&lt;</span><span style="color:#a31515;">DataGrid</span><span style="color:red;">&nbsp;x</span><span style="color:blue;">:</span><span style="color:red;">Name</span><span style="color:blue;">=</span><span style="color:blue;">&quot;DgUsers&quot;</span><span style="color:red;">&nbsp;AutoGenerateColumns</span><span style="color:blue;">=</span><span style="color:blue;">&quot;False&quot;</span><span style="color:red;">&nbsp;ItemsSource</span><span style="color:blue;">=&quot;{</span><span style="color:#a31515;">Binding</span><span style="color:red;">&nbsp;Source</span><span style="color:blue;">={</span><span style="color:#a31515;">StaticResource</span><span style="color:red;">&nbsp;UserListModelViewSource</span><span style="color:blue;">}}</span><span style="color:blue;">&quot;</span><span style="color:blue;">&gt;</span><br />&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:blue;">&lt;</span><span style="color:#a31515;">DataGrid.Columns</span><span style="color:blue;">&gt;</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:blue;">&lt;</span><span style="color:#a31515;">DataGridTextColumn</span><span style="color:red;">&nbsp;Binding</span><span style="color:blue;">=&quot;{</span><span style="color:#a31515;">Binding</span><span style="color:red;">&nbsp;Path</span><span style="color:blue;">=</span><span style="color:blue;">UserId</span><span style="color:blue;">}</span><span style="color:blue;">&quot;</span><span style="color:red;">&nbsp;Header</span><span style="color:blue;">=&quot;{</span><span style="color:#a31515;">Binding</span><span style="color:red;">&nbsp;Source</span><span style="color:blue;">=</span><span style="color:blue;">UserIdProperty</span><span style="color:blue;">,</span><span style="color:red;">&nbsp;Path</span><span style="color:blue;">=</span><span style="color:blue;">FriendlyName</span><span style="color:blue;">}</span><span style="color:blue;">&quot;</span><span style="color:blue;">/&gt;</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:blue;">&lt;</span><span style="color:#a31515;">DataGridTextColumn</span><span style="color:red;">&nbsp;Binding</span><span style="color:blue;">=&quot;{</span><span style="color:#a31515;">Binding</span><span style="color:red;">&nbsp;Path</span><span style="color:blue;">=</span><span style="color:blue;">FirstName</span><span style="color:blue;">}</span><span style="color:blue;">&quot;</span><span style="color:red;">&nbsp;Header</span><span style="color:blue;">=&quot;{</span><span style="color:#a31515;">Binding</span><span style="color:red;">&nbsp;Source</span><span style="color:blue;">=</span><span style="color:blue;">FirstNameProperty</span><span style="color:blue;">,</span><span style="color:red;">&nbsp;Path</span><span style="color:blue;">=</span><span style="color:blue;">FriendlyName</span><span style="color:blue;">}</span><span style="color:blue;">&quot;</span><span style="color:blue;">/&gt;</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:blue;">&lt;</span><span style="color:#a31515;">DataGridTextColumn</span><span style="color:red;">&nbsp;Binding</span><span style="color:blue;">=&quot;{</span><span style="color:#a31515;">Binding</span><span style="color:red;">&nbsp;Path</span><span style="color:blue;">=</span><span style="color:blue;">LastName</span><span style="color:blue;">}</span><span style="color:blue;">&quot;</span><span style="color:red;">&nbsp;Header</span><span style="color:blue;">=&quot;{</span><span style="color:#a31515;">Binding</span><span style="color:red;">&nbsp;Source</span><span style="color:blue;">=</span><span style="color:blue;">LastNameProperty</span><span style="color:blue;">,</span><span style="color:red;">&nbsp;Path</span><span style="color:blue;">=</span><span style="color:blue;">FriendlyName</span><span style="color:blue;">}</span><span style="color:blue;">&quot;</span><span style="color:blue;">/&gt;</span><br />&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:blue;">&lt;/</span><span style="color:#a31515;">DataGrid.Columns</span><span style="color:blue;">&gt;</span><br /><span style="color:blue;">&lt;/</span><span style="color:#a31515;">DataGrid</span><span style="color:blue;">&gt;<br /><br /><span style="color:#000000;">This successfully limits what columns are shown on the data grid, thereby keeping <em>IsBusy </em>and <em>IsSelfBusy</em> from being displayed, but the binding to the <em>Header</em> property from the friendly name does not work.&nbsp; Having to define the columns individually is not an ideal solution, and having to define the display name of the column header by static text (Header = &quot;User ID&quot;) is an even less ideal solution.</span></span></p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>thaehn replied on Tuesday, June 25, 2013</h2><p>I typically have a root object that hosts my list object, so the binding would be Model.MyList.&nbsp; By doing this only the items on the list show up and I can use auto generated columns.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>TygreWolf replied on Wednesday, June 26, 2013</h2><p>Understood, but I don&#39;t think that type of redundancy should be necessary.&nbsp; It would actually take less code just to define the columns in the XAML.&nbsp; It also doesn&#39;t solve the column naming/friendly name/display attribute&nbsp;&nbsp;issue.<br /><br />-Jason</p></div><div style='padding:0 15 3 15;background-color:lightgreen'><h2>TygreWolf replied on Wednesday, June 26, 2013</h2><p>So based on the post found <a href="http://social.msdn.microsoft.com/Forums/vstudio/en-US/4e5ab8ac-0591-458b-a187-8c3f4ea5234d/datagrid-dataannotations-displayattribute">here</a>, WPF doesn&#39;t support data annotations.<br /><br />That being the case, I added code in the code-behind (something I hate doing) that takes care of both the displaying of extra columns, and the column header naming issue:<br /><br /><span style="color:blue;">private</span>&nbsp;<span style="color:blue;">void</span>&nbsp;DgUsers_AutoGeneratingColumn(<span style="color:blue;">object</span>&nbsp;sender,&nbsp;<span style="color:#2b91af;">DataGridAutoGeneratingColumnEventArgs</span>&nbsp;e)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:blue;">var</span>&nbsp;pd&nbsp;=&nbsp;(<span style="color:#2b91af;">PropertyDescriptor</span>)e.PropertyDescriptor;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:blue;">var</span>&nbsp;da&nbsp;=&nbsp;(<span style="color:#2b91af;">DisplayAttribute</span>)&nbsp;pd.Attributes[<span style="color:blue;">typeof</span>&nbsp;(<span style="color:#2b91af;">DisplayAttribute</span>)];<br /> <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:blue;">if</span>&nbsp;(da&nbsp;==&nbsp;<span style="color:blue;">null</span>)&nbsp;<span style="color:blue;">return</span>;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:blue;">var</span>&nbsp;autoGenerateField&nbsp;=&nbsp;da.GetAutoGenerateField();<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:blue;">if</span>&nbsp;(autoGenerateField&nbsp;!=&nbsp;<span style="color:blue;">null</span>&nbsp;&amp;&amp;&nbsp;!autoGenerateField.Value)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;e.Cancel&nbsp;=&nbsp;<span style="color:blue;">true</span>;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br /> <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:blue;">if</span>&nbsp;(!<span style="color:blue;">string</span>.IsNullOrEmpty(da.Name))<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;e.Column.Header&nbsp;=&nbsp;da.Name;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br /><br />It&#39;s not the most elegant solution, since I&#39;d rather have everything hooked up via data binding and defined in the XAML, rather than writing code-behind, but it works.&nbsp; I&#39;m not sure if there&#39;s another possible solution, or if WPF will support the data annotations in the future.<br /><br />-Jason</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JonnyBee replied on Wednesday, June 26, 2013</h2><p>Well, you could create your own subclassed DataGrid with your desired behavior and thus not require codebehind in your View.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>TygreWolf replied on Wednesday, June 26, 2013</h2><p><img src="http://forums.lhotka.net/emoticons/emotion-21.gif" alt="Yes" /> Jason likes this post.<br /><br />Perhaps in the future.&nbsp; It&#39;d be nice to have some automated grouping functionality, as well.&nbsp; For now, I&#39;ll stick with the basic requirements my application needs to perform its intended duty.<br /><br />-Jason</p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
