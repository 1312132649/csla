<html><header><title>IFieldData.MarkClean()</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>IFieldData.MarkClean()</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/8134.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>rxelizondo posted on Saturday, December 12, 2009</h2>Hello,<br /><br />Well, I have to tell you, this IFieldData.MarkClean() method is just driving me nuts. I mean, I am sure I am not getting something here but to me, the IFieldData.MarkClean()  method looks like a method that its tightly coupled to the default  implementation of the way the CSLA keeps track of the IsDirty state of the object.<br /><br />I mean, let’s think about this for a moment, does this method make sense if someone was to code an IFieldData{T} implementation that determined if the BusinessObject property was dirty based on doing a comparison between the original and current values? Probably not right? I mean, I could imagine the implementation of IsDirty property in that case being something like:<br /><br />return object.Equal(oldVal, newVal);<br /><br />There would be absolutely no need for an _isDirty field that keept track of the object state right? And if we don’t’ need an _isDirty field then there is really no need for a MarkClean() method correct?<br /><br />So what are you guys thoughts?<br /><br />Thanks.<br /></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Saturday, December 12, 2009</h2><P>There's a semantic meaning to "mark clean", which is that the object should consider itself to be no longer dirty/changed when that call occurs. If an object doesn't provide an implementation following that semantic behavior, then other parts of CSLA will appear to work incorrectly - though the bug lies in the object that doesn the wrong thing.</P>
<P>So even a custom FieldData object must follow that semantic behavior, or it will appear to break other parts of CSLA (most notably dependent properties like IsSavable, and some aspects of data binding).</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>rxelizondo replied on Sunday, December 13, 2009</h2>Yeah, I should have taken more time to analyze this before posting.<br /><br />So basically, in the case of my example, one of the jobs of the IFieldData.MarkClean() implementation would be to set the old value to be the current value.<br /><br />So if the value was originally “abc” and then the value is changed to “xyz”, the moment the framework calls the IFieldData.MarkClean(), the “xyz” value must become the new original value (basically replacing the “abc” value).<br /><br />There are probably be other things that should happen when IFieldData.MarkClean() but that is one that sticks out in my head as one of the most obvious one.<br /><br />Thanks Rocky.</div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
