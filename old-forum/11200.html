<html><header><title>Question: using M$ MemberShip API in a CSLA.NET for WinForm App</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Question: using M$ MemberShip API in a CSLA.NET for WinForm App</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/11200.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>chinaray posted on Monday, February 27, 2012</h2><p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;">Dear Sir,</span><span style="font-size:10pt;">&nbsp;</span><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;"></span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;">I am trying to use ASP.NET 2.0 in a winform application.</span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;">Because I don&rsquo;t need create a membership db and can use existing membership API.</span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;">Below is my custom code for Principle and Identity, it looks works.</span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;">if you are free, could you please give a look,</span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;color:red;font-size:10pt;">I wonder to know whether I am in the right way, any better way?</span><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;"></span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;">By the way, I cannot use your MembershipTest code in a winform, fail, don&rsquo;t know why.</span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;">&nbsp;</span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;">Best wishes,</span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;">ChinaRay</span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="color:#339966;font-size:10pt;">&nbsp;</span><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;"></span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="color:#339966;font-size:10pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;color:#339966;font-size:10pt;">&nbsp;&nbsp;&nbsp; Test code:</span><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;"></span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;color:#339966;font-size:10pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;"></span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;color:#339966;font-size:10pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; KsPrincipal.Logout();</span><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;"></span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;color:#339966;font-size:10pt;">&nbsp;</span><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;"></span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;color:#339966;font-size:10pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; KsPrincipal.Login(&quot;admin&quot;, &quot;123456=&quot;);</span><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;"></span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;color:#339966;font-size:10pt;">&nbsp;</span><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;"></span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;color:#339966;font-size:10pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; System.Security.Principal.IPrincipal user = Csla.ApplicationContext.User;</span><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;"></span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;color:#339966;font-size:10pt;">&nbsp;</span><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;"></span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;color:#339966;font-size:10pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (user.Identity.IsAuthenticated)</span><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;"></span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;color:#339966;font-size:10pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {</span><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;"></span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;color:#339966;font-size:10pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; MemberUtility.Log(&quot;Logged in as &quot; + user.Identity.Name);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;"></span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;color:#339966;font-size:10pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;"></span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;color:#339966;font-size:10pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; else</span><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;"></span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;color:#339966;font-size:10pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {</span><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;"></span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;color:#339966;font-size:10pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; MemberUtility.Log(&quot;Not logged in&quot;);</span><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;"></span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;color:#339966;font-size:10pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;"></span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-size:10pt;">&nbsp;</span><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;"></span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="color:blue;font-size:10pt;">&nbsp;</span><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;"></span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;color:blue;font-size:10pt;">&nbsp; [Serializable()]</span><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;"></span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;color:blue;font-size:10pt;">&nbsp; public class KsIdentity : CslaIdentity</span><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;"></span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;color:blue;font-size:10pt;">&nbsp; {</span><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;"></span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;color:blue;font-size:10pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; #region&nbsp; Factory Methods</span><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;"></span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;color:blue;font-size:10pt;">&nbsp;</span><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;"></span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;color:blue;font-size:10pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; internal static KsIdentity GetIdentity(string username, string password)</span><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;"></span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;color:blue;font-size:10pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; {</span><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;"></span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;color:blue;font-size:10pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; return DataPortal.Fetch&lt;KsIdentity&gt;(new UsernameCriteria(username, password));</span><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;"></span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;color:blue;font-size:10pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; }</span><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;"></span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;color:blue;font-size:10pt;">&nbsp;</span><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;"></span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;color:blue;font-size:10pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; internal static KsIdentity GetIdentity(string username)</span><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;"></span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;color:blue;font-size:10pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; {</span><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;"></span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;color:blue;font-size:10pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; MessageBox.Show(&quot;GetIdentity UnImplemented&quot;);</span><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;"></span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;color:blue;font-size:10pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; return null;</span><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;"></span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;color:blue;font-size:10pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; //return DataPortal.Fetch&lt;PTIdentity&gt;(new LoadOnlyCriteria(username));</span><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;"></span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;color:blue;font-size:10pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; }</span><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;"></span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;color:blue;font-size:10pt;">&nbsp;</span><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;"></span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;color:blue;font-size:10pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; private KsIdentity()</span><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;"></span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;color:blue;font-size:10pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; {&nbsp; }</span><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;"></span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;color:blue;font-size:10pt;">&nbsp;</span><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;"></span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;color:blue;font-size:10pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; #endregion</span><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;"></span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;color:blue;font-size:10pt;">&nbsp;</span><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;"></span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;color:blue;font-size:10pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; #region&nbsp; Data Access</span><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;"></span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;color:blue;font-size:10pt;">&nbsp;</span><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;"></span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;color:blue;font-size:10pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; [Serializable()]</span><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;"></span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;color:blue;font-size:10pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; private class LoadOnlyCriteria</span><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;"></span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;color:blue;font-size:10pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; {</span><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;"></span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;color:blue;font-size:10pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; private string mUsername;</span><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;"></span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;color:blue;font-size:10pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; public string Username {&nbsp; get&nbsp; { return mUsername; }&nbsp; }</span><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;"></span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;color:blue;font-size:10pt;">&nbsp;</span><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;"></span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;color:blue;font-size:10pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; public LoadOnlyCriteria(string username)</span><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;"></span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;color:blue;font-size:10pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; {&nbsp; mUsername = username; }</span><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;"></span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;color:blue;font-size:10pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; }</span><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;"></span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;color:blue;font-size:10pt;">&nbsp;</span><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;"></span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;color:blue;font-size:10pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; private void DataPortal_Fetch(UsernameCriteria criteria)</span><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;"></span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;color:blue;font-size:10pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; {</span><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;"></span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;color:blue;font-size:10pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; Name = &quot;&quot;;</span><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;"></span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;color:blue;font-size:10pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; IsAuthenticated = false;</span><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;"></span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;color:blue;font-size:10pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; Roles = new Csla.Core.MobileList&lt;string&gt;();</span><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;"></span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;color:blue;font-size:10pt;">&nbsp;</span><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;"></span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;color:blue;font-size:10pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; System.Web.Security.Membership.ApplicationName = &quot;kuaishou&quot;; //important</span><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;"></span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;color:blue;font-size:10pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; System.Web.Security.MembershipUser m_defaultUser = null;</span><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;"></span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;color:blue;font-size:10pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; m_defaultUser = System.Web.Security.Membership.GetUser(criteria.Username);</span><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;"></span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;color:blue;font-size:10pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; if (m_defaultUser == null)</span><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;"></span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;color:blue;font-size:10pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; return;</span><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;"></span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;color:blue;font-size:10pt;">&nbsp;</span><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;"></span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;color:blue;font-size:10pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; bool bValid = System.Web.Security.Membership.ValidateUser(criteria.Username, criteria.Password);</span><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;"></span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;color:blue;font-size:10pt;">&nbsp;</span><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;"></span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;color:blue;font-size:10pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; if (bValid == true)</span><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;"></span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;color:blue;font-size:10pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; {</span><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;"></span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;color:blue;font-size:10pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; Name = criteria.Username;</span><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;"></span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;color:blue;font-size:10pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; IsAuthenticated = true;</span><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;"></span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;color:blue;font-size:10pt;">&nbsp;</span><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;"></span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;color:blue;font-size:10pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; var roleList = new Csla.Core.MobileList&lt;string&gt;();</span><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;"></span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;color:blue;font-size:10pt;">&nbsp;</span><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;"></span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;color:blue;font-size:10pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; System.Web.Security.MembershipUser membershipUser = System.Web.Security.Membership.GetUser();</span><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;"></span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;color:blue;font-size:10pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; string[] roles = System.Web.Security.Roles.GetRolesForUser(criteria.Username);</span><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;"></span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;color:blue;font-size:10pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; foreach (var role in roles)</span><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;"></span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;color:blue;font-size:10pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; roleList.Add(role);</span><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;"></span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;color:blue;font-size:10pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; Roles = roleList;</span><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;"></span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;color:blue;font-size:10pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; }</span><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;"></span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;color:blue;font-size:10pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; }</span><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;"></span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;color:blue;font-size:10pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; #endregion</span><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;"></span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;color:blue;font-size:10pt;">&nbsp; }</span><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;"></span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;color:blue;font-size:10pt;">&nbsp;</span><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;"></span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;">&nbsp;</span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [Serializable]</span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; public class KsPrincipal : BusinessPrincipalBase</span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {</span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; protected KsPrincipal(IIdentity identity) : base(identity)</span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; { </span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;">&nbsp;</span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //public static KsPrincipal Login(string username, string password)</span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //{</span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //&nbsp;&nbsp;&nbsp; var identity = MembershipIdentity.GetMembershipIdentity&lt;MembershipIdentity&gt;(username, password, true);</span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //&nbsp;&nbsp;&nbsp; return new KsPrincipal(identity);</span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //}</span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;">&nbsp;</span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; public static bool Login(string username, string password)</span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {</span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return SetPrincipal(KsIdentity.GetIdentity(username, password));</span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;">&nbsp;</span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; public static void LoadPrincipal(string username)</span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {</span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; SetPrincipal(KsIdentity.GetIdentity(username));</span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;">&nbsp;</span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; private static bool SetPrincipal(KsIdentity identity)</span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {</span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (identity.IsAuthenticated)</span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {</span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; KsPrincipal principal = new KsPrincipal(identity);</span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Csla.ApplicationContext.User = principal;</span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return identity.IsAuthenticated;</span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;">&nbsp;</span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; public static void Logout()</span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {</span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Csla.ApplicationContext.User = new UnauthenticatedPrincipal();</span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;color:#993300;font-size:10pt;">&lt;configuration&gt;</span><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;"></span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;color:#993300;font-size:10pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;appSettings&gt;</span><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;"></span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;color:#993300;font-size:10pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;add key=&quot;CslaAuthentication&quot; value=&quot;Csla&quot; /&gt;</span><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;"></span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;color:#993300;font-size:10pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/appSettings&gt;</span><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;"></span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;color:#993300;font-size:10pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;"></span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;color:#993300;font-size:10pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;connectionStrings&gt;</span><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;"></span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;color:#993300;font-size:10pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;add name=&quot;AspNetDB&quot; connectionString=&quot;Data Source=.\SQLEXPRESS;Initial Catalog=aspnetdb;Integrated Security=SSPI&quot; /&gt;</span><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;"></span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;color:#993300;font-size:10pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/connectionStrings&gt;</span><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;"></span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;color:#993300;font-size:10pt;">&nbsp;</span><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;"></span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;color:#993300;font-size:10pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;system.web&gt;</span><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;"></span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;color:#993300;font-size:10pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;!-- &lt;roleManager enabled=&quot;true&quot; defaultProvider=&quot;AspNetSqlRoleProvider&quot;/&gt; --&gt;</span><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;"></span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;color:#993300;font-size:10pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;roleManager enabled=&quot;true&quot;&gt;</span><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;"></span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;color:#993300;font-size:10pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;providers&gt;</span><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;"></span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;color:#993300;font-size:10pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;clear/&gt;</span><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;"></span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;color:#993300;font-size:10pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;add connectionStringName=&quot;AspNetDB&quot; applicationName=&quot;kuaishou&quot; name=&quot;AspNetSqlRoleProvider&quot; </span><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;"></span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;color:#993300;font-size:10pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; type=&quot;System.Web.Security.SqlRoleProvider, System.Web, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a&quot;/&gt;</span><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;"></span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;color:#993300;font-size:10pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/providers&gt;</span><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;"></span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;color:#993300;font-size:10pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/roleManager&gt;</span><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;"></span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;color:#993300;font-size:10pt;">&nbsp;</span><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;"></span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;color:#993300;font-size:10pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;!--</span><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;"></span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;color:#993300;font-size:10pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;authentication mode=&quot;Forms&quot;/&gt;</span><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;"></span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;color:#993300;font-size:10pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; --&gt;</span><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;"></span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;color:#993300;font-size:10pt;">&nbsp;</span><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;"></span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;color:#993300;font-size:10pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;membership&gt;</span><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;"></span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;color:#993300;font-size:10pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;providers&gt;</span><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;"></span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;color:#993300;font-size:10pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;remove name=&quot;AspNetSqlMembershipProvider&quot;/&gt;</span><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;"></span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;color:#993300;font-size:10pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;add name=&quot;AspNetSqlMembershipProvider&quot;</span><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;"></span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;color:#993300;font-size:10pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; type=&quot;System.Web.Security.SqlMembershipProvider, System.Web, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a&quot;</span><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;"></span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;color:#993300;font-size:10pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; connectionStringName=&quot;AspNetDB&quot;</span><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;"></span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;color:#993300;font-size:10pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; enablePasswordRetrieval=&quot;false&quot;</span><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;"></span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;color:#993300;font-size:10pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; enablePasswordReset=&quot;true&quot;</span><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;"></span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;color:#993300;font-size:10pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; requiresQuestionAndAnswer=&quot;false&quot;</span><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;"></span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;color:#993300;font-size:10pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; applicationName=&quot;/&quot;</span><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;"></span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;color:#993300;font-size:10pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; requiresUniqueEmail=&quot;false&quot;</span><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;"></span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;color:#993300;font-size:10pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; passwordFormat=&quot;Hashed&quot;</span><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;"></span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;color:#993300;font-size:10pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; maxInvalidPasswordAttempts=&quot;5&quot;</span><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;"></span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;color:#993300;font-size:10pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; minRequiredPasswordLength=&quot;1&quot;</span><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;"></span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;color:#993300;font-size:10pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; minRequiredNonalphanumericCharacters=&quot;0&quot;</span><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;"></span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;color:#993300;font-size:10pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; passwordAttemptWindow=&quot;10&quot;</span><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;"></span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;color:#993300;font-size:10pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; passwordStrengthRegularExpression=&quot;&quot; /&gt;</span><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;"></span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;color:#993300;font-size:10pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/providers&gt;</span><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;"></span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;color:#993300;font-size:10pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/membership&gt;</span><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;"></span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;color:#993300;font-size:10pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/system.web&gt;</span><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;"></span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;color:#993300;font-size:10pt;">&lt;/configuration&gt;</span><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;"></span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;color:#993300;font-size:10pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;"></span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="color:#993300;font-size:10pt;">&nbsp;</span><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;"></span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="color:#993300;font-size:10pt;">&nbsp;</span><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;"></span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="color:#993300;font-size:10pt;">&nbsp;</span><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;"></span></p>
<p class="MsoNormal" style="text-align:justify;"><span style="font-size:10pt;">&nbsp;</span><span style="font-family:&#39;Century Gothic&#39;,&#39;sans-serif&#39;;font-size:10pt;"></span></p></div><div style='padding:0 15 3 15;background-color:lightgreen'><h2>RockfordLhotka replied on Wednesday, February 29, 2012</h2><p>Have you read through the section on this topic in the <em>Using CSLA 4: Data Portal Configuration </em>book? The specific base classes have changed over the past few versions of CSLA, but the basic code and concepts are the same.</p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
