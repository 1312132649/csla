<html><header><title>More design questions..</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>More design questions..</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/870.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 posted on Thursday, August 10, 2006</h2>I'm building editable objects for modifying a product database.<br><br>I have two seperate root objects; Product and ProductBundle.&nbsp; There's a common interface between them (although I'm not sure its needed.. I'll likely take this out).&nbsp; The main difference is that a product bundle includes a list of products and different rules for what is an acceptable product number, and has an option for how the price is set (fixed price, or the sum of the prices of the consitutent products).<br><br>Its the list and UI I have some questions about.<br><br>The list itself may have an existing product added or removed, however the items IN the list are not editable.&nbsp; I'm thinking that the ProductInfo class (a read-only class) could be acceptable; the information displayed would be the same here as any other place ProductInfo would be used to display read-only Product information.&nbsp; So is the answer to build a new kind of BusinessListBase, which allows only readonly objects (the current BLB only allows IEditiableBusinessObjects)?<br><br>Onto the UI; the form would be mostly the same.&nbsp; The only difference would be a grid for the bundle's products and the option on how to set the price.&nbsp; So should I use the same form, which can handle either?&nbsp; Or should I just build two distinct forms?<br><br>Thanks<br>Andy<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JHurrell replied on Friday, August 11, 2006</h2>Andy,<br><br>There's a pattern I use when I have to establish relationships or associations between an object and other objects. <br><br>In my case, it's usually users and roles. I like to use UI where you have two lists. One list displays the roles that are associated with a user, the other list displays the roles that are not associated with the user. In between the two lists are the typical &gt;, &gt;&gt;, &lt;, &lt;&lt; buttons that allow you to associaciate/disassociate the selected, or associate/disassociate all. (I've attached a screenshot as an example).<br><br>The properties of each of the items includes it's ID, a friendly text description, and a bool that indicates whether it's associated with the parent (true) or not (false). I create two filters and bind the filtered list to the appropriate ListBox.<br><br>When each child saves, it just calls an Update procedure if dirty and the procedure will create or delete the association.<br><br>I've found that users really like this type of pattern for creating the kinds of associations that we're both talking about. It's very easy to use and understand and it's pretty simple to program.<br><br>The trickiest part is the SQL that you'd write to retrieve the product associations. Assuming that you have a Products table and a ProductBundles table, the SQL could look something like this:<br><br><font face="Courier New" size="2">CREATE PROCEDURE [dbo].getProductAssociations<br>(<br>&nbsp;&nbsp;&nbsp; @ProductBundleID AS INTEGER<br>)<br>AS<br>SELECT <br>&nbsp;&nbsp;&nbsp; Products.ProductID,<br>&nbsp;&nbsp;&nbsp; Products.ProductName,<br>&nbsp;&nbsp;&nbsp; CASE <br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; WHEN ProductBundleID = @ProductBundleID THEN CAST(1 AS BIT)<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ELSE CAST(0 AS BIT)<br>&nbsp;&nbsp;&nbsp; END AS Associated<br>FROM <br>&nbsp;&nbsp;&nbsp; Products<br>&nbsp;&nbsp;&nbsp; LEFT OUTER JOIN ProductBundles<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ON Products.ProductID = ProductBundles.ProductID<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; AND ProductBundles.ProductBundleID = @ProductBundleID<br>ORDER BY<br>&nbsp;&nbsp;&nbsp; Products.ProductName<br>GO</font><br><br>Anyway, just wanted to offer my idea.<br><br>- John<br></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
