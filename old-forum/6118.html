<html><header><title>Possible request : BrokenRulesCollection</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Possible request : BrokenRulesCollection</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/6118.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>decius posted on Friday, January 09, 2009</h2><P>At the client/UI development, I find myself frequently coding foreach loops of an object's BrokenRulesCollection just to determine if the collection contains a specific property name.</P>
<P>It would be nice if there was a <STRONG>brokenRules.Contains("MyProperty") </STRONG>overload, but there's not.</P>
<P>How are other people handling this scenario?&nbsp; I've thought about just adding the overload to the framework myself, but I HATE tweaking unless necessary.</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>skagen00 replied on Friday, January 09, 2009</h2><FONT color=#0000ff size=2><FONT color=#0000ff size=2>
<P>this</FONT></FONT><FONT size=2>.BrokenRulesCollection.GetFirstBrokenRule("MyProperty");&nbsp; ... that work for you?</P></FONT></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>decius replied on Friday, January 09, 2009</h2><P>No unfortunately, I need to find out if the collection contains a property, and I can't be sure that it is the first broken rule in the collection.</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>skagen00 replied on Friday, January 09, 2009</h2>You understand that method gets the first broken rule that is in the collection that applies to that property, right? It could be the 5th in the list. </div><div style='padding:0 15 3 15;background-color:powderblue'><h2>SonOfPirate replied on Saturday, January 10, 2009</h2><P>GetFirstBrokenRule is great if I only care to get the first broken rule or simply need to know if there are any broken rules for a property.&nbsp; However, I have had cases where I want to list ALL of the broken rules for a given property.&nbsp; And it sounds like decius is doing something similar.</P>
<P>When I want to do this, I use LINQ to generate a "sublist" of broken rules by property that I can iterate on.&nbsp; If it is empty, then no broken rules exist for that property and I don't waste my time iterating.&nbsp; If it isn't empty, then I don't waste my time iterating over the full list checking to see if each entry corresponds to the chosen property because my sublist only contains broken rules for that property.</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>skagen00 replied on Saturday, January 10, 2009</h2><P>I appreciate that it only gives you the first broken rule for that property, but I think from his question that GetFirstBrokenRule serves its purpose in his case - I think he just had a slight misunderstanding that it doesn't apply to only BrokenRulesCollection[0]. </P>
<P>e.g. "No unfortunately, I need to find out if the collection contains a property, and I can't be sure that it is the first broken rule in the collection."</P>
<P>That said, it seems that a method such as this might perhaps contain an index overload from with which to start with - that way, one can iterate over all broken rules that apply to that property. </P>
<P>Of course, as you mention, if that's the goal, LINQ is a solution now too. </P>
<P>&nbsp;</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>simon_may replied on Sunday, January 11, 2009</h2><P>In my own BusinessBase and BusinessBaseList classes (these inherit directly from the CSLA classes) I implement an IBrokenRuleSource&nbsp;interface which declares one Property __BrokenRules that returns a string array containing all brokent rules in the object graph. So a call the the Root BO __BrokentRules property walks through the graph collecting the broken rules. </P>
<P>Further all my forms Save button click events check validity of the BO and outputs the broken rules in a messagebox - all implemented in the Forms base class. Save loads of time when developing and testing new BOs</P>
<P>HTH</P>
<P>Regards</P>
<P>Simon May</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>decius replied on Monday, January 12, 2009</h2><P>Thanks for the insights.&nbsp; Yes, GetFirstBrokenRule returns the first rule for the given property, but i need all the broken rules for a particular property, sorry if I wasn't clear on that.</P>
<P>what i'v been doing is iterating with foreach to stuff the completed message into something like a StringBuilder.&nbsp; But that's a lot of unnecessary iterations I bet! I guess I could use the GetFirstBrokenRule and then check if it's null before iterating.&nbsp; That would atleast avoid unnessary iterations.&nbsp; </P>
<P>Perhaps what I really need is a GetBrokenRules("MyProperty") that returns an array of rules for the given property.&nbsp; I'll keep hunting, perhaps what I needs there and I just have never found it.</P>
<P>I like that LINQ concept though! I might start using that.</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Monday, January 12, 2009</h2>Can't you case the BO to IDataErrorInfo and use the indexer?&nbsp; That should give you a concatenation of all descriptions of broken rules.<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>simon_may replied on Monday, January 12, 2009</h2>That will work for a single BO but not for any broken rules that further down the graph, child or grandchild&nbsp;BOs, &nbsp;that may still be causng the&nbsp;BO to be invalid</div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
