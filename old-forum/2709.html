<html><header><title>Design question</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Design question</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/2709.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>albruan posted on Monday, April 16, 2007</h2><P>I have a ROB object that checks for the existence of any Drawing objects having a particular drawingCode; it returns a bool based on whether or not any such objects exist.&nbsp; Additionally, I have a DrawingTypes collection of DrawingType objects.&nbsp; If the call to my ROB shows a DrawingType is referenced by my collection of Drawings, I want to disallow deletion of the DrawingType.&nbsp; I'd originally thought of using a CommandObject similar to what Rocky describes in chapter 8 until I read his response to a question someone else posed at <A HREF="/forums/thread/3261.aspx">http://forums.lhotka.net/forums/thread/3261.aspx</A>.&nbsp; Anyway, since this isn't something the UI should access, I have it declared as a protected method within my DrawingExists class.&nbsp; My question is: where should I place the call to it?&nbsp; Should it be in my DrawingTypes DataPortal_Update method?&nbsp; Or should it be in my DrawingType's internal DeleteSelf method?</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JoeFallon1 replied on Monday, April 16, 2007</h2><P>I put calls like this in my&nbsp;ValidationRules code.</P>
<P>I also set the priority to 1 so that all the level 0 rules must first be passed (length&lt;&gt;0, length &lt;10, etc.) before the rules that hit the DB run.&nbsp;</P>
<P>In the case of a Delete I would probaly have the call in DeleteSelf and then branch accordingly.</P>
<P>You probably have to throw an Exception as there is no Return value from a Delete. You know the Delete succeeded if there is no Exception. Catch it and then present a friendly message to the user:</P>
<P>"Caanot delete drawing type&nbsp;as child drawings exist."</P>
<P>Joe</P>
<P>&nbsp;</P>
<P>&nbsp;</P></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
