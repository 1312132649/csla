<html><header><title>Security Question</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Security Question</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/4294.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>JoOfMetL posted on Tuesday, February 05, 2008</h2><br>Hi, <br><br>I have this Code : <br><br><span>public static Currency GetCurrency(Guid id) {</span><br><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (!CanGetObject())</span><br><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; throw new System.Security.SecurityException("User not authorized to view a Currency");</span><br><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return DataPortal.Fetch&lt;Currency&gt;(new Criteria(id));</span><br><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span><br><br>So The Security is applied in the CanGetObject<br><br>I use a web service host to get my object.<br><br>If someone knows the Type Of my object he can write code to get my Object. whitout the securty ?<br><br>For instance, he can write : <br><br><span>public static Currency GetCurrency(Guid id) {</span><br><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return DataPortal.Fetch&lt;Currency&gt;(new Criteria(id));</span><br><span>}</span><br><br>So no security is applied.<br><br>This is a mistake on my part ?<br><br>Thank you.<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Tuesday, February 05, 2008</h2>Well, that's always a risk in 2-tier deployment.&nbsp; You probably would need to include some code in the DP_F to filter our results that can't be seen by the user.&nbsp; The static method check isn't meant to be the only security in your system.<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JoOfMetL replied on Tuesday, February 05, 2008</h2><br>Do you hava a example to show me&nbsp; when you speak to filter the result of the data according to user ?<br><br>Thank you<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Wednesday, February 06, 2008</h2>Well, I have documents, which are quotes, orders, etc.&nbsp; In the DataPortal_Fetch, if the user does not have permission to see orders, for example, I add " and DocumentType != 'O'" to the sql query.<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JoOfMetL replied on Wednesday, February 06, 2008</h2>So For instance, in the DataPortalFetch, I Can Add: <br><br>private void DataPortal_Fetch(Criteria criteria) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <b>if (!CanGetObject())<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; throw new System.Security.SecurityException("User not authorized to view a Currency");</b><br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; using (SqlConnection cn = new SqlConnection(Database.Connection)) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cn.Open();<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ExecuteFetch(cn, criteria);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }//using<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br><br><br>?</div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
