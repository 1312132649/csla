<html><header><title>CSLA 3.0.4.0: EditLevel</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>CSLA 3.0.4.0: EditLevel</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/5094.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>cjherasmus posted on Tuesday, July 15, 2008</h2><P><FONT face=Arial size=2>Using:</FONT></P>
<P><FONT face=Arial size=2>VS 2005 C#, CSLA 3.0.4, Remoting, SQL 2005, Infragistics UltraGrid</FONT></P>
<P><FONT face=Arial size=2>I have a solution much like the PT project. I have Person, Contract, PersonContract, PersonContracts and Assignment. A Contract is assigned to a Person. A Person have many assigned contracts.</FONT></P>
<P><FONT face=Arial size=2>I have a single form with Person attributes and Contracts grid. Assigning and removing to the grid works great but the Contracts does not get saved to the DB when editing a Person. Funny thing is: when a new person object is created and contracts assigned, everything gets saved to DB. If the object is opened for editing, the contracts gets assigned but not saved to DB. The only way to solve is to make a change on a person attribute, then the contracts get saved.</FONT></P>
<P><FONT face=Arial size=2>I get the idea that it's something to do with the editlevel of the person object. In my case I have to get the edit level of person to 1 before I can save contracts. Isn't this wrong ?</FONT></P>
<P><FONT face=Arial size=2>Explanation would be appreciated. </FONT></P>
<P><FONT face=Arial size=2>Regards, Thanks</FONT></P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Dawn replied on Tuesday, July 15, 2008</h2>It look like&nbsp; you don't override IsDirty, a new Person is always dirty, so it save child collection to DB,&nbsp; old Person dones't save to DB util it's get dirty.<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>cjherasmus replied on Tuesday, July 15, 2008</h2><P><FONT face=Arial size=2>Dawn,</FONT></P>
<P><FONT face=Arial size=2>do you mean this, which is in my Person BO</FONT></P><FONT color=#0000ff>
<P><FONT face=Arial size=2>public</FONT></FONT><FONT size=2><FONT face=Arial> <FONT color=#0000ff>override</FONT> <FONT color=#0000ff>bool</FONT></FONT><FONT face=Arial> IsDirty</FONT></FONT></P>
<P><FONT face=Arial size=2>{</FONT></P>
<P><FONT face=Arial><FONT size=2><FONT color=#0000ff>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;get</FONT> { <FONT color=#0000ff>return</FONT> <FONT color=#0000ff>base</FONT>.IsDirty || _contracts.IsDirty; }<FONT color=#008000></P></FONT></FONT></FONT>
<P><FONT face=Arial size=2>}</FONT></P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Dawn replied on Wednesday, July 16, 2008</h2>The IsDirty is correct. I have no idea, sorry.<br></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
