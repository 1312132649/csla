<html><header><title>ASP.NET 2.0 - ReadOnlyListBase or BusinessListBase</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>ASP.NET 2.0 - ReadOnlyListBase or BusinessListBase</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/10.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>glenntoy posted on Friday, May 05, 2006</h2><P>Most of my experience are working with winforms now my new job are more on web apps and I decided to go for ASP.NET 2.0 and CSLA 2.0 ..</P>
<P>When enabling Edit, Update and Cancel and Delete commands using GridView in ASP.NET it display a hyperlink edit and delete each row. It means you can edit / delete a row one at a time. </P>
<P>Given:</P>
<OL>
<LI>A business object (editable)&nbsp;that has&nbsp;15 fields, but the number of fields to be used in the GridView are only six. 
<LI>Out of six fields that were displayed in the GridView only three fields are editable.</LI></OL>
<P>My plan is to use ReadOnlyListBase for listing it in the gridview and using the business object in #1 for editing/deleting&nbsp;over BusinessListBase. </P>
<P>Am I right with my plan? Any suggestions?</P>
<P>P.S. I'll read your replies tomorrow 05/06/2006. cause its 4:28am dawn here in Phil. Cebu</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Friday, May 05, 2006</h2><P>I've thought that, for this type of scenario, having a new collection type wouldn't be all bad. Something like LiveListBase - because the list would be "live" against the data store.</P>
<P>This class would inherit from List&lt;T&gt; and would implement only DataPortal_Fetch().</P><FONT size=2>
<P>&lt;Serializable()&gt; _<BR></FONT><FONT color=#0000ff size=2>Public</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>Class</FONT><FONT size=2> WebListBase(</FONT><FONT color=#0000ff size=2>Of</FONT><FONT size=2> C </FONT><FONT color=#0000ff size=2>As</FONT><FONT size=2> Csla.BusinessBase(</FONT><FONT color=#0000ff size=2>Of</FONT><FONT size=2> C))<BR>&nbsp; </FONT><FONT color=#0000ff size=2>Inherits</FONT><FONT size=2> List(</FONT><FONT color=#0000ff size=2>Of</FONT><FONT size=2> C)</P>
<P></FONT>Then it would overload the Add() method so when a child is added to the collection it is automatically and immediately persisted:</P><FONT size=2>
<P></FONT><FONT color=#0000ff size=2>Public</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>Overloads</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>Sub</FONT><FONT size=2> Add(</FONT><FONT color=#0000ff size=2>ByVal</FONT><FONT size=2> child </FONT><FONT color=#0000ff size=2>As</FONT><FONT size=2> C)<BR>&nbsp; child = child.Save()<BR></FONT><FONT color=#0000ff size=2>&nbsp; Me</FONT><FONT size=2>.Add(child)<BR></FONT><FONT color=#0000ff size=2>End</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>Sub</P></FONT>
<P>Similarly there'd be a Remove() overload so when a child is removed from the collection it is automatically removed from the data store:</P><FONT size=2>
<P></FONT><FONT color=#0000ff size=2>Public</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>Overloads</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>Sub</FONT><FONT size=2> Remove(</FONT><FONT color=#0000ff size=2>ByVal</FONT><FONT size=2> child </FONT><FONT color=#0000ff size=2>As</FONT><FONT size=2> C)<BR>&nbsp; child.Delete()<BR>&nbsp; child = child.Save<BR>&nbsp; </FONT><FONT color=#0000ff size=2>Me</FONT><FONT size=2>.RemoveAt(</FONT><FONT color=#0000ff size=2>Me</FONT><FONT size=2>.IndexOf(child))<BR></FONT><FONT color=#0000ff size=2>End</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>Sub</P></FONT>
<P>I haven't tried this, so there may be unforseen issues, but it seems like an easy thing to do to support the atomic add/remove scenarios for the web (and maybe for some types of Windows app too).</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>glenntoy replied on Saturday, May 06, 2006</h2><FONT size=2>
<P><FONT size=3>I see.. you really ROCKS Rocky. But right now, I stick on the ReadOnlyListBase w/ BusinessBase but I'll do my research and testing on your suggestion and post it back here later if I'm done with it. Thanks for your info I'll try to look at this if it is feasible in my scenario.</FONT></P>
<HR>

<P><FONT size=3>Doing web apps is very different compared doing win apps. In my own perspective it has many things to considered like when to store a set of data in a session or just retrieved back from its datas source during post backs because we want to achieve realtime information. </FONT></P>
<P><FONT size=3>In my case, I didn't store the ReadOnlyList in the session I just let it retrieved it back from the datasource for the reason&nbsp;it might be too large to store in a session if the result of the DataPortal_Fetch() is&nbsp;big also. &nbsp;</FONT></P>
<P><FONT size=3>I dont know if this is the professional way of doing it, but this is how I did:</FONT></P>
<P><FONT size=3>Given:</FONT></P>
<P><FONT size=3>BookList&nbsp;- Is the ReadOnyListBase (implemented as Root)<BR>BookListInfo - Is the a ReadOnlyBase (that only implements 6 properties)<BR>My reason for doing this is that I dont need to implement those fields that will not be used in the ReadOnlyList. <BR><BR>Book - Is the BusinessBase object (implemented as Root) and implements 20 properties<BR><BR>The said 3 fields that will be edited doesn't have business rules. </FONT></P>
<OL>
<LI><FONT size=3>From the GridView, I convert all the 6 fields to template fields and it includes the primary key field of the Book but its hidden</FONT></LI>
<LI><FONT size=3>I store the current edited/deleted index of the gridview in a session when it triggers the RowEditing() and RowDeleting() gridview events. </FONT></LI>
<LI><FONT size=3>In the UpdateObject csla datasource event</FONT></LI>
<OL>
<LI><FONT size=3>I get the primary key field value of the book in the index that I saved in the session.</FONT></LI>
<LI><FONT size=3>I retrieved again the full blown object which is book (eg. mybook = Book.GetBook(id))</FONT></LI>
<LI><FONT size=3>From here I updated the book object with the changes of the properties and call Save Method()</FONT></LI></OL></OL>
<P></FONT>&nbsp;</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Monday, May 08, 2006</h2><P>The big question with the web is whether you can use state on the web server or not. If you can, then it doesn't have to be much different from Windows. But if you can't, then you need to artificially alter your object model to compensate for the constraints of the web - which complicates things.</P>
<P>Specifically, if you are going to be stateless then resign yourself to only having editable root objects, and collections of editable root objects. Resign yourself to manually coding to detect things like duplicate child data, or summarized data on parent objects. You have to manually code these things, because you won't have actual parent-child object relationships (which would have automatically handled most of the business rules).</P>
<P>In short, writing a stateless object model is more complex and thus more expensive than a stateful one, because you lose the abiltity to take advantage of relationships between objects. However, it can certainly be done, and must be done for some higher-volume web sites.</P></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
