<html><header><title>User Preferences</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>User Preferences</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/3748.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>juddaman posted on Friday, October 19, 2007</h2><P>Hi all</P>
<P>I've posted a few times on this topic but it's still bugging me so here I go again.</P>
<P>In my application I have two types of "user preference", the first being those needed by the business layer, the second being those required by the UI. To me these are distinct. Those "user preferences" required by the BLL must of course be accessable regardless of the intereface, so they should be stored on the server (in the database). Where as&nbsp;those required by the UI may be stored on the server (for web apps I guess) but could also be stored on the client (for win apps) in the form of application settings say. </P>
<P>I'm storing the users BLL prefs in a Profile table in the DB. The UI prefs are stored in application settings on the client. To present the configuration of these user preferences to user for editing I have two dialogs. One called Profile where the user can edit the settings for the his BLL preferences and one called Options for editing UI user preferences. Does this make sense? Also any good naming cons for the two types of preference anyone?</P>
<P>Who thinks I should just store all the prefs in the Profile table?&nbsp;Even if the options don't make sense for some interfaces (eg start miminized on the web)???</P>
<P>Anybody with experience with business layer user preferences (including user configurable defaults) please reply :-)</P>
<P>Thanks guys, George.</P>
<P>&nbsp;</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ozitraveller replied on Monday, October 22, 2007</h2><P>Hi George</P>
<P>It really depends on the app. I've used a combination of both at various times. So I don't think there is one definitive answer here as things tend to change over time.</P>
<P>If you store all the prefs in the db, and the connection goes down.....oops.</P>
<P>Even if the options don't make sense for some interfaces (eg start miminized on the web)??? Add more fields to Profile table e.g. UI type (Web, Win, Win Service, ..) , UserEditable, LoadStartUp......</P>
<P>You could use a tab control and combine the Preferences form.</P>
<P>Sorry I can't be more helpful</P>
<P>&nbsp;</P>
<P>My rule of thumb:</P>
<P>As a starting point I usually use the config file&nbsp;for per users settings, and a db table for applcation wide settings. Also I keep any sensitive info in the db. I also tend to 'lazyload' my settings, e.g. I only load what I need to startup, and the rest I load as required.</P>
<P>&nbsp;</P>
<P>&nbsp;</P>
<P>&nbsp;</P>
<P>&nbsp;</P>
<P>&nbsp;</P>
<P>&nbsp;</P>
<P>&nbsp;</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>juddaman replied on Monday, November 05, 2007</h2>Hi!<br><br>Thanks for the reply. Sorry I'm slow getting back to you, been super busy.<br><i><b><br>If you store all the prefs in the db, and the connection goes down.....oops.<br></b></i>Not such a big issue in my app, if the connection goes down you can't do much anyway.<br><br><b><i>Even if the options don't make sense for some interfaces (eg start
miminized on the web)??? Add more fields to Profile table e.g. UI type
(Web, Win, Win Service, ..) , UserEditable, LoadStartUp....</i></b>..<br>Yes good point. I suppose the user may even want to set his WinForms specfic prefs in the Web version anyway. Users are very strange after all! :)<br><b><i><br>You could use a tab control and combine the Preferences form.<br></i></b>This is actually what I ended up doing. It hurt me from a tech point of view though. With the 'Save' storing to both a file and DB -- it just doesn't quite sit with me, but it does the job. I did want to store all the users prefs (bar things like windows size and other properties the users doesn't directly enter) in the db. However one property caused me problems, "Start Minimized". As this value is needed before the user is even logged on, so I can't get it from the DB. It would look stupid all on it's own in a Prefs dialog. Bar merging any others suggestions how I could deal with that one property? I though about just a checkbox directly on the menu, but I'm not too sure....<br><br>Cheers, George.<br><br><br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>SonOfPirate replied on Tuesday, November 06, 2007</h2><P>George,</P>
<P>I've been down this road quite a few times as well and the fact that you are already differentiating between what I refer to as User Settings and Application Settings gives you a great head-start.&nbsp; I too consider User Settings to be those things, such as Language, that should be persisted as part of the application's data.&nbsp; Application Settings, to me, are those things that the drives the UI such as grid sorts &amp; filters and are persisted locally although I have an application where I allow "roaming users" which saves the Application Settings to the server so that the user has the same settings when they access the app from a different system.</P>
<P>To make this work, I stole a page from the way MS has the Office apps setup in this regard.&nbsp; I have separate business objects for each "category" of settings.&nbsp; Each of these BO's can be bound to an individual tab in the Options dialog if you want.&nbsp; When the user hits the OK button to commit the Options dialog, the AcceptChanges method is called on each BO.&nbsp; This allows each to handle its persistance on its own.&nbsp; If I want to save both to the db, I can.&nbsp; If I want one to go to Isolated Storage or some other location while the other goes to the db, I can.</P>
<P>I find this approach fits right into the use of business objects and the framework we have in place and gives us the flexibility we need for our applications.</P>
<P>Hope that helps.</P>
<P>&nbsp;</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>juddaman replied on Wednesday, November 07, 2007</h2>Hi. Thanks for your input. Are you suggesting you sometimes use a BO to store settings to Application Settings? George<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>juddaman replied on Thursday, November 08, 2007</h2>By this I mean.. In your Save method or DataPortal_Insert you insert the value in to application settings. So you have code like:<br><br>Properties.Settings.Defailt.FavColour = this._FavColour;<br><br>If so I like this idea :-) <br><br>Could you just post a snippet of code to check I'm understanding you correctly?<br><br>Thank you very much. George.<br><br><br></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
