<html><header><title>DataGridView.OnPaint() and the BusinessBase.IsValid Property</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>DataGridView.OnPaint() and the BusinessBase.IsValid Property</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/6858.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>mfegter posted on Monday, April 27, 2009</h2><P>I am developing a Windows Form application using the CSLA 2.0 framework.&nbsp; I was stepping through my code, and everytime&nbsp;a DataGridView is shown on the form through its OnPaint() event (specifically System.Windows.Forms.DataGridView.OnPaint(PaintEventArgs e)), the IsValid property of my BusinessBase object is checked.&nbsp; </P>
<P>No where in my form code have I called the .IsValid property (yet -- I'm just trying to get the form to display&nbsp;values right now, no inserts/updates/deletions have been implimented).&nbsp; I have all the form objects (the form itself, a group control, the datagridview itself) to have their CausesValidation properties set to false.</P>
<P>This seems to be quite inefficient, since I noticed the IsValid property being checked 8 times for each record in the DataGridView control.&nbsp; I have 8 controls on my form (labels, drop down lists, etc.)</P>
<P>Any ideas?</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Monday, April 27, 2009</h2><P>IsValid is probably being invoked through IDataErrorInfo, which is part of the data binding infrastructure.</P>
<P>Windows Forms data binding <EM>is</EM> terribly inefficient. You have just found the tip of the iceberg.</P>
<P>For the most part it doesn't matter (fortunately), because this is all running on a client workstation, so you have near-supercomputer power and can afford to waste some cycles.</P>
<P>However, this has certainly impacted the design of CSLA. This is why, for example, the validation and authorization subsystems minimize invocation of actual business rules, and try to cache the results when possible. This is why the broken rules collection exists, and the rules aren't checked each time the UI asks if the object is valid.</P>
<P>In other words, data binding is inefficient. But if you know <EM>how</EM> it is inefficient, then it isn't as big&nbsp;a deal as it might otherwise appear.</P>
<P>Remember that premature optimization is an anti-pattern.</P></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
