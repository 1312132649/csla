<html><header><title>Localisation issue with Unit Test for SmartDateTest.cs</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Localisation issue with Unit Test for SmartDateTest.cs</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/7112.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>CraigLittlewood posted on Tuesday, June 16, 2009</h2><P>After installing NUnit (albeit version 2.5), I was able to successfully compile CslaTest project.&nbsp; However, on running the tests, I get a failure with SmartDate -&gt; TestConverters tests.</P>
<P>Csla.Test.SmartDate.SmartDateTests.TestConverters:<BR>&nbsp; Expected string length 8 but was 10. Strings differ at index 0.<BR>&nbsp; Expected: "1/1/2005"<BR>&nbsp; But was:&nbsp; "01/01/2005"<BR>&nbsp; -----------^<BR></P>
<P>Looking at the code, it appears that CurrentUICulture is being set to en-US, as opposed to CurrentCulture.&nbsp; As I am running in the UK, this causes a problem.&nbsp; If I amend all CurrentUICulture references in this module to CurrentCulture, it appears to work.</P>
<P>Is this a known issue, or is there something else I should be doing.</P>
<P>Thanks and regards</P>
<P>Craig Littlewood</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Wednesday, June 17, 2009</h2><P>I think the culture is set explicitly to fix a previous culture problem with this (and maybe other) tests.</P>
<P>Obviously things have changed over time that created another problem - probably because we actually spin up other appdomains and threads for certain tests now.</P>
<P>If you have a solution please let me know and we can work it in.</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>CraigLittlewood replied on Thursday, June 18, 2009</h2><P>Rocky</P>
<P>All I did to make it work was change all references to ".CurrentUICulture" to ".CurrentCulture" in SmartDateTest.cs.&nbsp; From what I make of the documentation on these properties, ".CurrentUICulture" only affects the loading of the resource files.&nbsp; ".CurrentCulture" is the one that changes operation of date time formatting functions.&nbsp; However, I am no expert on this - hence the reason for my question.&nbsp; I&nbsp;have attached&nbsp;my modified source module from version 3.6.</P>
<P>Regards</P>
<P>Craig</P></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
