<html><header><title>Passing additional HTTP headers over .NET Remoting hosted in IIS</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Passing additional HTTP headers over .NET Remoting hosted in IIS</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/3421.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>ktweedy posted on Friday, August 24, 2007</h2><P>Hi,</P>
<P>To support an authentication system we have call siteMinder which is an ISAPI filter on our webservice I need to be able to pass a token in the header of the HTTP request that .NET romoting uses with it performs the call to the DLL on the server.</P>
<P>Anyone know how to do this?</P>
<P>I ma using the Remoting proxy and have .NET Remoting configuration.</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Friday, August 24, 2007</h2><P>I think you'll need to create your own variation on the remoting proxy. You can just copy-paste the proxy code from CSLA into your project, then alter the way remoting is configured to put the custom header information into the message.</P>
<P>Unfortunately I don't know <EM>how</EM> to put the custom header information in the message, sorry... I'd recommend looking at Ingo Rammer's remoting book to see if he discusses that topic.</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ktweedy replied on Friday, August 24, 2007</h2>Thanks, I have that book right in front of me.&nbsp; Will let you know if I figure it out.&nbsp;</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ktweedy replied on Monday, September 24, 2007</h2><P>In&nbsp;case anyone else needs to do this the way i solved it is adding a custom client sink to the .NET Remoting HTTP Channel so insert the needed headers into the HTTP request objects and a custom server sink to extract header information.</P>
<P>My RemotingProxy.cs constructor HTTP channel create looks&nbsp; like this.</P><FONT size=2>
<P></FONT><FONT color=#008080 size=2>BinaryClientFormatterSinkProvider</FONT><FONT size=2> formatter = </FONT><FONT color=#0000ff size=2>new</FONT><FONT size=2> </FONT><FONT color=#008080 size=2>BinaryClientFormatterSinkProvider(</FONT><FONT size=2>)</FONT><FONT color=#008080 size=2>;<BR>SecurityClientChannelSinkProvider</FONT><FONT size=2> clientChannelSinkProvider = </FONT><FONT color=#0000ff size=2>new</FONT><FONT size=2> </FONT><FONT color=#008080 size=2>SecurityClientChannelSinkProvider</FONT><FONT size=2>();<BR>formatter.Next = clientChannelSinkProvider;<BR></FONT><FONT color=#008080 size=2>HttpChannel</FONT><FONT size=2> channel = </FONT><FONT color=#0000ff size=2>new</FONT><FONT size=2> </FONT><FONT color=#008080 size=2>HttpChannel</FONT><FONT size=2>(properties, formatter, </FONT><FONT color=#0000ff size=2>null</FONT><FONT size=2>);</P></FONT></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
