<html><header><title>mBindingEdit inBusinessBase</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>mBindingEdit inBusinessBase</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/4040.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>Sergey68 posted on Friday, December 14, 2007</h2><P class=MsoNormal><SPAN>Ok, this case is convoluted, but I will try to explain the best I can,<o:p></o:p></SPAN></P>
<P class=MsoNormal><SPAN>I have a business object on a form.<SPAN>&nbsp; </SPAN>Once it is created in form_load, I issue BeginEdit on it. <o:p></o:p></SPAN></P>
<P class=MsoNormal><SPAN>There is a button on that form that launches a popup form that edits a property on that object. That form has its own OK and Cancel buttons and this form directly modifies a property on my business object.<SPAN>&nbsp; </SPAN>What I do to react to OK and Cancel button on popup form is the following.<SPAN>&nbsp; </SPAN>I issue another BegingEdit on my main formt before popup form is launched.<SPAN>&nbsp; </SPAN>Once the popup form is closed, I examine DialogResult and either issue ApplyEdit or CancelEdit on my business object depending on which button was clicked on popup form.<SPAN>&nbsp; </SPAN>So far so good, once the routine is completed, EditLevel on my business object is still 1.<o:p></o:p></SPAN></P>
<P class=MsoNormal><SPAN>However, once another property on the same business object is edited on the main form, EditLevel goes to 2, causing Save function to error out with “Object is still being edited” exception.<SPAN>&nbsp; </SPAN>I traced what causes this error.<SPAN>&nbsp; </SPAN>Binding infrastructure calls BeginEdit on the IEditableObject (BusinessBase) during PullData call.<SPAN>&nbsp; </SPAN>Issue is that mBindingEdit variable is set to False at that time, and another stack state push occurs.<SPAN>&nbsp; </SPAN>Seems to me that ApplyEdit and CancelEdit should only set mBindingEdit to False if Stack length is zero, but I am not sure.<o:p></o:p></SPAN></P>
<P class=MsoNormal><SPAN>Any suggestions or opinion on this?<o:p></o:p></SPAN></P>
<P class=MsoNormal><SPAN>Thanks.<o:p></o:p></SPAN></P>
<P class=MsoNormal><SPAN>Sergey</SPAN></P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Friday, December 14, 2007</h2><P>CSLA 3.0.3 includes some help and bug fixes around this area. Getting Windows Forms data binding correct is challenging.</P>
<P>Some help will come if you look at the PTWin example from version 3.0.3. That illustrates (and is explained in <EM>Using CSLA .NET 3.0</EM>) how to properly use data binding. Some of the bug fixes in CSLA 3.0 are also required for some in-place editing scenarios in grids, but even 2.1.4 should work pretty well if you follow the UI coding patterns from PTWin 3.0.3.</P></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
