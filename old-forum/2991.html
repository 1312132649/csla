<html><header><title>Batch import in collections?</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Batch import in collections?</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/2991.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>SonOfPirate posted on Tuesday, June 05, 2007</h2><P>I have an application that requires us to populate an object model with external data upon start-up then, when the user elects to, save the entire object model in one swoop to the database.&nbsp; Because the populated object model&nbsp;could have anywhere&nbsp;from 1 to&nbsp;10,000 objects spread out through its 4 levels of depth and several siblings of width, it is taking forever to perform an insert!</P>
<P>Once the first save is performed, everything is okay because we can rapidly navigate the object model and commit only those objects that have changed to the db.&nbsp; But, it is this initial save (INSERT) that is killing us.</P>
<P>So, I began thinking about the possibility of having some kind of bulk/batch insert controlled by the containing collection when the collection is flagged as "new".&nbsp; But, for one, I'm not sure how to even approach the SQL part of it and, two, how to pass this down through the object model like we do now?</P>
<P>I've also thought about multi-threading the save process but I'm worried about data concurrency and collisions if we allow the user access to the data again through the UI while we are trying to commit changes.&nbsp; So, I considered creating a Clone of the root object (and all of its children, grandchildren, etc) and saving that, but how then do we mark the original objects as clean after the save?</P>
<P>Does anyone have any thoughts on how to address this or had any experience with this issue?</P>
<P>Thx in advance.</P>
<P>&nbsp;</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>William replied on Wednesday, June 06, 2007</h2>Just a willd thought.<br><br>Assuming that your BO supports two modes of data access.<br><br>1) Regular CSLA way.<br><br>2) On new instance of external data. In this case, what if your root BO takes slightly heavy responsibility that the DataPortal_Insert() generates the necessary BULK INSERT SQL batch script in memory (i.e. basically a long string of SQL statements) for the entire hierarchy of your object model and send it to your database server.<br><br>Regards,<br>William<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>SonOfPirate replied on Wednesday, June 06, 2007</h2><P>#2 is exactly the direction I was thinking, but how then do we clear the IsDirty flag from all of the objects?</P>
<P>&nbsp;</P></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
