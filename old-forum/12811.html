<html><header><title>ASP NET DetailsView issue</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>ASP NET DetailsView issue</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/12811.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>Marian posted on Sunday, January 11, 2015</h2><p>Hello everybody,</p>
<p>I started to use the&nbsp;ProjectEdit functionality exposed by Rocky in WEB ProjectTracker project. But DetailsView control give me an ugly issue: Insert and Update&nbsp;are working fine only for the first press of these buttons.&nbsp; My object has errors so, when I press insert button first time, all error are displayed properly in label error. If I will press insert button again, details view become invisible. </p>
<p>Bellow is the list of events when I press insert button first time:</p>
<p>1. <span style="font-size:x-small;font-family:Consolas;"><span style="font-size:x-small;font-family:Consolas;">DetailsView1_ItemCreated. It allows to fill values of controls from DetailsView:</span></span></p>
<p><span style="font-size:x-small;font-family:Consolas;"><span style="font-size:x-small;font-family:Consolas;">
<p><span style="font-size:x-small;font-family:Consolas;color:#0000ff;"><span style="font-size:x-small;font-family:Consolas;color:#0000ff;"><span style="font-size:x-small;font-family:Consolas;color:#0000ff;">If</span></span></span><span style="font-size:x-small;font-family:Consolas;"><span style="font-size:x-small;font-family:Consolas;"> DetailsView1.DefaultMode = </span></span><span style="font-size:x-small;font-family:Consolas;color:#2b91af;"><span style="font-size:x-small;font-family:Consolas;color:#2b91af;"><span style="font-size:x-small;font-family:Consolas;color:#2b91af;">DetailsViewMode</span></span></span><span style="font-size:x-small;font-family:Consolas;"><span style="font-size:x-small;font-family:Consolas;">.Insert </span></span><span style="font-size:x-small;font-family:Consolas;color:#0000ff;"><span style="font-size:x-small;font-family:Consolas;color:#0000ff;"><span style="font-size:x-small;font-family:Consolas;color:#0000ff;">Then</span></span></span></p>
<p><span style="font-size:x-small;font-family:Consolas;color:#0000ff;"><span style="font-size:x-small;font-family:Consolas;color:#0000ff;"><span style="font-size:x-small;font-family:Consolas;color:#0000ff;">&nbsp;&nbsp; Dim</span></span></span><span style="font-size:x-small;font-family:Consolas;"><span style="font-size:x-small;font-family:Consolas;"> obj </span></span><span style="font-size:x-small;font-family:Consolas;color:#0000ff;"><span style="font-size:x-small;font-family:Consolas;color:#0000ff;"><span style="font-size:x-small;font-family:Consolas;color:#0000ff;">As</span></span></span><span style="font-size:x-small;font-family:Consolas;"><span style="font-size:x-small;font-family:Consolas;">&nbsp;</span></span><span style="font-size:x-small;font-family:Consolas;color:#2b91af;"><span style="font-size:x-small;font-family:Consolas;color:#2b91af;"><span style="font-size:x-small;font-family:Consolas;color:#2b91af;">RootObject</span></span></span><span style="font-size:x-small;font-family:Consolas;"><span style="font-size:x-small;font-family:Consolas;"> = GetObject()</span></span></p>
<p><span style="font-size:x-small;font-family:Consolas;"><span style="font-size:x-small;font-family:Consolas;">&nbsp;&nbsp; -------------</span></span><span style="font-size:x-small;font-family:Consolas;"><span style="font-size:x-small;font-family:Consolas;"></span></span>
<p><span style="font-size:x-small;font-family:Consolas;color:#0000ff;"><span style="font-size:x-small;font-family:Consolas;color:#0000ff;"><span style="font-size:x-small;font-family:Consolas;color:#0000ff;">End</span></span></span><span style="font-size:x-small;font-family:Consolas;"><span style="font-size:x-small;font-family:Consolas;"> </span></span><span style="font-size:x-small;font-family:Consolas;color:#0000ff;"><span style="font-size:x-small;font-family:Consolas;color:#0000ff;"><span style="font-size:x-small;font-family:Consolas;color:#0000ff;">If</span></span></span></p>
</p>
</span></span></p>
<p>2. BusinessRootDataSource_<span style="font-size:x-small;font-family:Consolas;"><span style="font-size:x-small;font-family:Consolas;">InsertObject. It calls Save method that returns 0 reccords affected and set properly text of label error.</span></span></p>
<p><span style="font-size:x-small;font-family:Consolas;"><span style="font-size:x-small;font-family:Consolas;">3.<span style="font-size:x-small;font-family:Consolas;"><span style="font-size:x-small;font-family:Consolas;">DetailsView1_ItemInserted is invoked: it keeps DetailsView in insert mode: <span style="font-size:x-small;font-family:Consolas;"><span style="font-size:x-small;font-family:Consolas;">e.KeepInInsertMode = </span></span><span style="font-size:x-small;font-family:Consolas;color:#0000ff;"><span style="font-size:x-small;font-family:Consolas;color:#0000ff;"><span style="font-size:x-small;font-family:Consolas;color:#0000ff;">True</span></span></span></span></span></span></span></p>
<p>This is the right behaviour!</p>
<p>Second time when I press Insert Button, <span style="font-size:x-small;font-family:Consolas;"><span style="font-size:x-small;font-family:Consolas;">DetailsView1.DefaultMode is ReadOnly and DetailsView become invisible. <span style="font-family:Arial;">BusinessRootDataSource_</span><span style="font-size:x-small;font-family:Consolas;"><span style="font-size:x-small;font-family:Consolas;">InsertObject and <span style="font-size:x-small;font-family:Consolas;"><span style="font-size:x-small;font-family:Consolas;">DetailsView1_ItemInserted&nbsp;are skipped! <span style="font-size:x-small;font-family:Consolas;"><span style="font-size:x-small;font-family:Consolas;">DetailsView1.Rows.Count became 0!</span></span></span></span></span></span></span></span>
<p><span style="font-size:x-small;font-family:Consolas;"><span style="font-size:x-small;font-family:Consolas;"><span style="font-size:x-small;font-family:Consolas;"><span style="font-size:x-small;font-family:Consolas;"><span style="font-size:x-small;font-family:Consolas;"><span style="font-size:x-small;font-family:Consolas;">A similar behaviour has Cancel Button also. First time is working properly, but, the second time when is pressed it sets displayview default mode in readonly</span></span></span></span></span></span></p>
<p><span style="font-size:x-small;font-family:Consolas;"><span style="font-size:x-small;font-family:Consolas;"><span style="font-size:x-small;font-family:Consolas;"><span style="font-size:x-small;font-family:Consolas;"><span style="font-size:x-small;font-family:Consolas;"><span style="font-size:x-small;font-family:Consolas;"></span></span>&nbsp;</span></span><span style="font-size:x-small;font-family:Consolas;"><span style="font-size:x-small;font-family:Consolas;">
<p>&nbsp;</p>
</span></span></span><span style="font-size:x-small;font-family:Consolas;">
<p>&nbsp;</p>
</span></span></p>
<p>&nbsp;</p>
<p>Many Thanks and HNY for all of you!&nbsp;</p>
<p>&nbsp;</p>
</p></div><div style='padding:0 15 3 15;background-color:lightgreen'><h2>Marian replied on Sunday, January 11, 2015</h2><p>Business object and asp net page are working properly. There is an issue&nbsp;in master page related with aspx splitter control! I cheked all project step by step and finally I discover the problem. </p>
<p>I consider closed this problem!</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Marian replied on Sunday, January 11, 2015</h2><p>After two days I discovered that object and aspx page are working perfectly. My project uses Devexpress controls and Master page created&nbsp;based on DevExpress Template. All above issues are related with ASPxSplitter control used in my Master page. I create&nbsp;a new Master page without this control and all is fine. But I like how it appears my pages before, so, I will continue to investigate what exactly is responsible for above issues.</p>
<p>Best regards,</p>
<p>Marian</p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
