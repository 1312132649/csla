<html><header><title>Configuring my client app to use my CSLA 2.0 objects</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Configuring my client app to use my CSLA 2.0 objects</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/401.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>Norma_B posted on Sunday, June 18, 2006</h2><P>I'm very new to VS.NET, and am monumentally confused how to configure my client application to use my CSLA 2.0 business objects. I'm okay with setting the references (I'm including both CSLA and my business objects), but I get confused trying to:</P>
<P>1) ensure my custom principal and identity objects are used </P>
<P>2) ensure that the data access runs locally</P>
<P>I tried making a post with more detail, but it got pretty deep. (And rather pathetic. ;) )&nbsp;I hope this is sufficient. Thanks!</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>bcdennis replied on Sunday, June 18, 2006</h2>Norma,<br>Both those things are addressed &amp; covered in explicit detail in Rocky's book.&nbsp; (Chapter 4, i think.) <br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Norma_B replied on Monday, June 19, 2006</h2><P>After a good night's sleep and a quick review of the code, I found my problem. We store user information keyed on their network login. I was using My.User.Name to get that info at runtime, but when I switched to Application-Defined authentication, My.User no longer contained the network credentials -- thus no match was being found. I've inserted a call to My.User.InitializeWithWindowsUser() before I initialize my custom Principal object, and we'll see how it works so far.</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Norma_B replied on Monday, June 19, 2006</h2>I also learned that one should not use a BackgroundWorker component to run the CustomPrincipal.Initialize event... the Principal ends up attached to the wrong thread. Sigh. Guess I will have to defeat the Splash screen in single combat after all.</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Monday, June 19, 2006</h2>FWIW, you can attach the principal to the foreground thread as well.&nbsp; Nothing wrong with that, and its a simple statement.<br><br>Andy<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Norma_B replied on Monday, June 19, 2006</h2><P><BLOCKQUOTE><div><img src="/Themes/default/images/icon-quote.gif"> <strong>ajj3085:</strong></div><div>FWIW, you can attach the principal to the foreground thread as well.&nbsp; Nothing wrong with that, and its a simple statement.<BR><BR>Andy<BR></div></BLOCKQUOTE></P>
<P>So simple I wasn't able to figure out how to do it. <img src="/emoticons/emotion-5.gif" alt="Wink [;)]" /> (Please see above where I said I was "very new" to VS.NET.) Any pointers?</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Monday, June 19, 2006</h2>Just before your DoWork event handler finishes (and is successful) store the Thread.CurrrentPrincipal in an instance variable.<br><br>Then in your backgroundworker's <span class="identifier">RunWorkerCompleted event, set Thread.CurrentPrincpal equal to the instance variable you used to store the principal at the end of your DoWork event handler.<br><br>Make sense?<br><br>Andy<br></span></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Norma_B replied on Monday, June 19, 2006</h2>Got it. (For some reason, I was looking on the BackgroundWorker component for the Thread info, which is pretty daft in retrospect.) It's working now, but I had to move the assignment of the stored Principal to code called after RunWorkerCompleted in order to get it to work. Don't know if that should worry me or not.</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Monday, June 19, 2006</h2>Well, as long as the thread you care about has the proper principal, i wouldn't worry about it.<br></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
