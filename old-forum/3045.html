<html><header><title>Effectively Logout a Specific Principal</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Effectively Logout a Specific Principal</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/3045.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>steve_smith posted on Friday, June 15, 2007</h2>Yes I have the want to logout a specific user (principal) from within my web application.<br><br>How might I be able to achieve this?<br><br>Thanks in advance for assistance!<br><br><br><br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Friday, June 15, 2007</h2><P>You obviously can't get any immediate results - it is the web, and the best you can do is invalidate their login token the next time they hit your server. In other words, they could sit on your web page for minutes or hours before hitting your web server again, but you can't do anything to them until they hit your web server.</P>
<P>When they <EM>do</EM> hit your web server, you need a mechanism by which you can detect that the user should get logged out. Obviously this requires some central list of users-to-be-logged-out.</P>
<P>If you have (or may have) a web server farm, then this list will probably need to be in your database. If you only have (and only <EM>ever</EM> have one web server) you could use the ASP.NET Application object to store the list.</P>
<P>Either way, in your global.asax code, before re-establishing the user's principal from Session (or where ever you keep it), you need to check this list to see if the user is on it. Since this will happen on every page request, make sure your list can be hit quickly.</P>
<P>If the user is on the list, remove them from the list, call your Logout() method on your principal object and invalidate the ASP.NET security token, then do a redirect to some safe page (like the login page perhaps, or a page explaining to the poor user what just happened to them and why the data they just entered on the page they are posting has now been lost and who they should call to express their frustration <img src="/emoticons/emotion-5.gif" alt="Wink [;)]" />).</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>steve_smith replied on Friday, June 15, 2007</h2>thanks for that Rocky<br><br>It was the 'immediate result' that I was after but understand why that can't happen.&nbsp; The approach you've outlined makes good sense and I will post back with any interesting implementation details.<br><br></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
