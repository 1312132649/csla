<html><header><title>CancelEdit Doesn't Work</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>CancelEdit Doesn't Work</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/12026.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>tsvideo posted on Monday, June 17, 2013</h2><p>What all can be, if call of Model.CancelEdit() Doesn&#39;t Work ?<br /><br />The Model IsDirty and e.g. Save can Execute.<br />It&#39;s a WPF Application with MVVM (own ViewModelBase).<br />The call of Model.CancelEdit() runs, but no changed Property are reset to the original value.<br />It&#39;s a Parent Model with Csla Propertys and Csla ChildLists Propertys.</p></div><div style='padding:0 15 3 15;background-color:lightgreen'><h2>JonnyBee replied on Monday, June 17, 2013</h2><p>Are you sure BeginEdit has been called first to create an initial snapshot?&nbsp;</p>
<p>Check Model.EditLevel - it should be &gt; 0 before you call CancelEdit</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>tsvideo replied on Tuesday, June 18, 2013</h2><p>Hello Jonny,<br />Yes, this did the trick, i have to call first, after Loading the Model, the Model.BeginEdit() function to get an Snapshot.<br />I thought it was automaticaly called, but it didn&#39;t.<br />Rockys Post <a href="http://forums.lhotka.net/forums/p/6861/32872.aspx#32872">http://forums.lhotka.net/forums/p/6861/32872.aspx#32872</a>&nbsp;explained it.</p>
<p>But, to get Model.EditLevel (Using CSLA 4.5.30) i have to cast it to <span style="font-size:x-small;font-family:Consolas;"><span style="font-size:x-small;font-family:Consolas;">Csla.Core.</span></span><span style="font-size:x-small;font-family:Consolas;color:#2b91af;"><span style="font-size:x-small;font-family:Consolas;color:#2b91af;"><span style="font-size:x-small;font-family:Consolas;color:#2b91af;">IUndoableObject<br /></span></span></span><span style="font-family:Consolas;color:#2b91af;"><span style="font-family:Consolas;color:#2b91af;"><span style="font-family:Consolas;color:#2b91af;"><span style="font-size:x-small;"><span style="font-family:Arial;color:#000000;">Is that right ?<br />I would use it in the Undo Command Button CanExecute to examine if the Undo Button is On or Off.</span><br /></span></span></span></span></p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JonnyBee replied on Tuesday, June 18, 2013</h2><p>Hi,</p>
<p>I think BeginEdit is only called if the ViewModel has ManageLifeTime = true. </p>
<p>Yes this is correct. You need to cast the object IUndoableObject.</p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
