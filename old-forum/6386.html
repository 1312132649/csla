<html><header><title>UndoChanges for deleted child objects</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>UndoChanges for deleted child objects</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/6386.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>Codelines posted on Monday, February 09, 2009</h2><P>UndoableBase.CopyState doesn't save undoable child objects, only cascade the call to CopyState for this objects. If a child object is deleted there is no way to undo this action. By example, if I have a page object, add a footer child object and delete the footer afterwards, how can I undo this action if I don't have any information stored about the footer?</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>rsbaker0 replied on Monday, February 09, 2009</h2><P>I ran into this a week or so ago -- evidently it's not supported yet but it's on the wish list:</P>
<P><A href="http://www.lhotka.net/cslabugs/edit_bug.aspx?id=49">http://www.lhotka.net/cslabugs/edit_bug.aspx?id=49</A></P>
<P>The full thread which led me to this is here: <A HREF="/forums/thread/30317.aspx">http://forums.lhotka.net/forums/thread/30317.aspx</A>. There are other possible side effects if you are using managed fields. </P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Codelines replied on Sunday, July 31, 2011</h2><p>I think this could be addressed with a reference stack for each field/property used to reference an undoable object. CopyState will not only cascade for undoable objects but store their references in the reference stack. If an undoable object reference is removed, UndoChanges could restore that reference from the reference stack. When we have the same undoable object referenced multiple times in the object graph, an attribute could be created for signaling that those extra references will only be stored in the reference stack. As managed fields can&#39;t have attributes, a new RelationshipType could be created to signal those cases. Doing so, CopyState will not cascade twice for the same object nor increment multiple times its EditLevel.&nbsp;</p>
<p>&nbsp;</p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
