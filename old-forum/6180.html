<html><header><title>Authorisation and the GetProperty&lt;&gt; property</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Authorisation and the GetProperty&lt;&gt; property</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/6180.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>rfcdejong posted on Friday, January 16, 2009</h2>Just before the weekend hits there was a discussion at my work. Another collegua is going to implement our custom authorisation into our new application-framework. The current application has restrictions on the database foreach userrole, based upon a table/field customized by the applicationmanager.<br /><br />The discussion went about where to implement the authorisation.<br /><br />He says: The dataaccess service should not do a LoadProperty when the current user isn't allowed to see the field on screen. <br /><br />I asked him: Why don't u want to use the AllowRead(propertyname) method in the businessobject currently available in the CSLA core? Then in our own businessbase class we can dynamicly load the custom rules from an authorisation businessobject.<br /><br />He says: The dataaccess service is the safest place to implement that so noone can make an mistake and the performance will always be better since the businessobjects will contain less.<br /><br />I say: What about business behind the screen? Maybe an Execute within the businessobject need to access the property? <br /><br />... and so on<br /><br />1 hour later we just decided to go home with no real results :(<br /><br />Anyway, who is voting for me and who is voting for him? :)<br /><br />The real question is:<br />Why use LoadProperty and when CanReadProperty will always return false?</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Friday, January 16, 2009</h2>Well... there are a few things I can think of.<br><br>One, if you're like me, you're using stored procedures.&nbsp; So you need to have the original value around when you call the procedure, otherwise you'll blank out the value... either that or you have A LOT more work to do to prevent that from happening.&nbsp; So updating is easier, which means your code is simpler.<br><br>The performance gains your co-worker is talking about will likely be minimal.&nbsp; My first response to his "pro" would be: do we CURRENTLY have performance issues?&nbsp; If the answer is no, then performance is irrelevant, and to do something for the sake of performance when you don't have a performance problem would be following the <a href="http://en.wikipedia.org/wiki/Optimization_%28computer_science%29#When_to_optimize">Premature optimization</a> <a href="http://en.wikipedia.org/wiki/Anti-pattern">Anti-pattern</a>.&nbsp; <br><br>He's is right though that if you didn't load the value, the un-authorized user can't see it.&nbsp; My response to that is that you need to determine if that's a risk worth the cost of addressing.&nbsp; As I said, your code will be much more complex without the value.&nbsp; So what is the cost of implementing the more secure way vs. the risk that this will actually happen.&nbsp; If you're doing an application for internal employees, your risk would likely be less than a Silverlight application deployed over the internet.&nbsp; But it's a matter of risk vs. cost analysis.&nbsp; <br><br>Those are my thoughts on this question..<br><br>HTH!<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>rfcdejong replied on Saturday, January 17, 2009</h2>Ok, but what about when an user is not allowed to read a property value on screen, but he is allowed to execute business code which will require the property in the businessobject? I would say that the value always needs to go into the business layer, let the data layer only be smart for dataaccess and nothing else.<br /><br />Then he'll just say that in that case a businessobject will use some sort of impersionation to outsmart the datalayer.<br /><br />Are there any other statements i can use to defend my thinking? Maybe something about the command objects, since i have less knowledge about the command objects :)</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>rfcdejong replied on Sunday, January 18, 2009</h2>Nothing else, anyone?</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Monday, January 19, 2009</h2>Well, that was the point I made.&nbsp; You at least need to value to not wipe it out on update, and as you said you may need to use the value (say in a calculation) on the business object, and not having it prevents you from doing so.<br><br>I'm not sure what you think his counterpoint will be though.&nbsp; I don't see how impersonation will help outsmart anything.&nbsp; And if you have one layer trying to use another layer in a way you didn't intend... well I'm not sure what the point of that would be.&nbsp; Either you goofed on the data layer design or your breaking your established architecture, which will make your application&nbsp; harder to maintain.<br></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
