<html><header><title>property IsDirty ?</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>property IsDirty ?</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/6879.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>martin_s posted on Thursday, April 30, 2009</h2>Can you check which properties of a object are dirty (v3.6.2) ?<br>We may want to use this to generate SQL update statements including only changed database fields.<br>Also, is it possible to retrieve the previous value of a dirty property ?<br><br>The SQL would be generated in the application server tier of an N-Tier system.<br><br>Cheers<br>Martin.<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Thursday, April 30, 2009</h2>There's no built in support for this, but you can create your own implemenation of certain Csla objects that tracks this.  I believe JoeFallon1 has done this, a search of the forum should yield the answer.</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Thursday, April 30, 2009</h2><P>It is easier in 3.6.x because of the field manager.</P>
<P>However, the default FieldData object may not track per-field dirty state as you'd like, so you may need to create your own IFieldData implementation - which is a fine thing to do.</P>
<P>You can ask the GetFieldData() method on the FieldManager to get access to the individual IFieldData object for each managed property, and that has an IsDirty property. Using this, you can enhance your business class to expose such a value. Something like this:</P>
<BLOCKQUOTE dir=ltr>
<P>public bool IsPropertyDirty(IPropertyInfo prop)<BR>{<BR>&nbsp; return FieldManager.GetFieldData(prop).IsDirty;<BR>}</P></BLOCKQUOTE>
<P>Again, the default IsDirty implementation is pretty basic, so you may need to create a more powerful IFieldData implementation (and corresponding PropertyInfo&lt;T&gt; subclass).</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JoeFallon1 replied on Thursday, April 30, 2009</h2>Here is a good thread:<br />http://forums.lhotka.net/forums/thread/28073.aspx<br /><br />Joe<br /></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
