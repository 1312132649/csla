<html><header><title>Silverlight, loading authorization rules from database</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Silverlight, loading authorization rules from database</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/9143.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>mesh posted on Tuesday, June 29, 2010</h2><p>What would be the most efficient way to load authorization rules from the database, especially when it comes to Silverlight?<br /><br />1) I already have users, roles, permissions class model <br />2) I have a BusinessBase base class where I can override AddAuthorizationRules<br />3) If I try to load the permissions from the database (in AddAuthorizationRules), authorization rules are loaded after the object has been used (because of async DataPortal call, in unit tests).<br />4) I think the best solution is to load all the privileges in a static property that is shared by both server side and Silverlight. But I do not know how, when and where.<br /><br />Can someone please point me in the right direction?<br /><br />Thanks</p></div><div style='padding:0 15 3 15;background-color:lightgreen'><h2>RockfordLhotka replied on Tuesday, June 29, 2010</h2><p>Yes, the async nature of SL makes this more complex.</p>
<p>What I&#39;ve been doing is using a unit of work object (in my case a ReadOnlyBase subclass) to go retrieve the metadata as the app loads. I block the app&#39;s navigation system (the toolbar or whatever) until the metadata is available.</p>
<p>I do the same thing for the login process - block navigation until the identity object has come back from the server.</p>
<p>If you have a lot of metadata this might cause too much of a startup delay - in which case you might consider loading the metadata in chunks - and unlocking parts of the navigation system as the various chunks of metadata come back from the server.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>mesh replied on Tuesday, June 29, 2010</h2><p>Thanks Rocky.<br />Yes, &nbsp;UI based solution would be easy. I was thinking more of unit tests with permissions stored in database.<br />Calling objects directly in VM or code behind would be another example. What is the best way to override AddAuthorizationRules in similar situations?</p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
