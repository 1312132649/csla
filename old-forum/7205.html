<html><header><title>Hybrid security</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Hybrid security</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/7205.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>dbrillon posted on Tuesday, June 30, 2009</h2>I have been searching for a solution in the forum for my problem but I could only find partial answer.  <br /><br />I want to use my business object in a Winforms application.  I want the application to do the authentication with the Widows security but I want the authorization to be loaded from the database the same way as in the ProjectTracker sample. What should I do to achieve that?<br /><br />Is the following solution a valid option?<br />- Set the security to CSLA<br />- Create custom Principal and Identity classes<br /><br />In the Login method of the Principal class use the Windows principal to do the authentication and use the custom principal for the authorisation.<br /><br />E.g.:<br /><br />In the CustomPrincipal class I have this method: <br /><br />Public static bool LoginAsWindows()<br />{<br />  String windowsId =   System.Threading.Thread.CurrentPrincipal.Identity.Name;<br />  CustomIdentity identity = CustomIdentity.GetIdentity(windowsId);<br />  If (identity.IsAuthenticated)<br />    {<br />      CustomPrincipal principal = new CustomPrincipal(identity);<br />      Csla.ApplicationContext.User = principal;<br />    }<br />  Return identity.IsAuthenticated<br />}<br /><br />Any suggestion?  <br /><br /><br /></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Tuesday, June 30, 2009</h2><P>Yes, that is basically what you need to do.</P>
<P>Also, if you are using a 3-tier deployment, so you have an app server, you'll need to configure the app server to disallow anonymous users and set it to impersonate the caller so the Windows identity flows from client to server along with your custom identity (assuming you actually care about the real Windows identity on the server for things like filesystem access, etc).</P></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
