<html><header><title>RuleDescription throwing exception in constructor when passed RuleName in 3.8.2 (worked in 3.5.1)</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>RuleDescription throwing exception in constructor when passed RuleName in 3.8.2 (worked in 3.5.1)</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/8924.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>rsbaker0 posted on Thursday, May 13, 2010</h2><p>I&#39;m trying to construct a RuleDescription for a broken rule and getting this exception:</p>
<p>&nbsp;System.UriFormatException occurred<br />&nbsp; Message=&quot;Invalid URI: The hostname could not be parsed.&quot;<br />&nbsp; Source=&quot;System&quot;<br />&nbsp; StackTrace:<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at System.Uri.CreateThis(String uri, Boolean dontEscape, UriKind uriKind)<br />&nbsp; InnerException: </p>
<p><br />The rule name has some sort of&nbsp;format that looks like this:</p>
<p>&quot;rule://Csla.WORMapper.WORMapperBusinessBase%601%5B%5BCompany.Application.Data.EMPLOYEE%2C%20CMDATA%2C%20Version%3D9.1.20423.0%2C%20Culture%3Dneutral%2C%20PublicKeyToken%3Dnull%5D%5D/KeyChangeNotification/Id&quot;</p>
<p>I&#39;m not sure what changed here as I thought the rule format looked more straightforward in the 3.5.1 code. </p>
<p>The same rule in my 3.5.1 build looks like this:</p>
<p>&quot;rule://KeyChangeNotification/Id&quot;&nbsp;<br />&nbsp;</p>
<p>EDIT: I see the code was changed to include the full declaring type name, but even changing it to use the short type name doesn&#39;t work. It chokes on this also:</p>
<p>rule://WORMapperBusinessBase%601/KeyChangeNotification/Id</p>
<p>I think the problem is the generic type names have the `&nbsp; (reverse single quote if that doesn&#39;t show up) character in them and maybe&nbsp;those aren&#39;t valid in host names. </p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Thursday, May 13, 2010</h2><p>I&#39;m sure you are right about the ` character. I think the value is encoded, but there&#39;s a different encoder required to catch that. Or maybe I had to write some extra manual encoding. In any case I know I hit this in the v4 code and had to fix it - didn&#39;t know it occurred in 3.8 code though...</p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
