<html><header><title>Getting client side variables passed to IAuthorizeDataPortal.Authorize method</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Getting client side variables passed to IAuthorizeDataPortal.Authorize method</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/11072.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>wesa posted on Thursday, January 19, 2012</h2><p>Hi, I was hoping someone could help me with a problem I&#39;m trying to solve. </p>
<p>I&#39;m setting up a WCF security application to run on our application server that will be used to verify client data portal requests. I have the application running and the client side data portal fetch triggers the IAuthorizeDataPortal.Authorize method that I have implemented. The issue is that I need to get a specific variable from the data portal request and the client&#39;s active directory username to verify that they have the proper access rights for the data.</p>
<p>I know that three objects are passed into the Authorize method: ObjectType, RequestObject and DataPortalOperation. I am just at a loss at how to retrieve the variable from the object(s).</p>
<p>&nbsp;</p>
<p>Thanks!</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>wesa replied on Thursday, January 19, 2012</h2><p>I should have also said that I am using CSLA.NET 4.0 and VB.NET.</p></div><div style='padding:0 15 3 15;background-color:lightgreen'><h2>JonnyBee replied on Thursday, January 19, 2012</h2><pre style="font-family:Consolas;background:#fafafa;color:black;font-size:13px;">Hi</pre>
<pre style="font-family:Consolas;background:#fafafa;color:black;font-size:13px;">  <span style="color:#2b91af;">ApplicationContext</span>.ClientContext&nbsp;&nbsp;<br />&nbsp;&nbsp;<span style="color:#2b91af;">ApplicationContex.</span>CGlobalContext<br /></pre>
<p>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:blue;">if</span>&nbsp;(<span style="color:#2b91af;">ApplicationContext</span>.AuthenticationType&nbsp;!=&nbsp;<span style="color:#a31515;">&quot;Windows&quot;</span>)
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color:#2b91af;">ApplicationContext</span>.User&nbsp;=&nbsp;request.Principal;
&nbsp;&nbsp;&nbsp;</p>
<p>is set by the DataPortal before AuthorizeRequest is called. </p>
<p>So any context values set on the client in ClientContext and GlobalContext + the user principal when not WindowsPrincipal is set and available for use in the AuthorizeRequest implmenetation. </p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
