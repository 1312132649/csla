<html><header><title>Building a tree in CSLA</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Building a tree in CSLA</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/5014.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>sixeyes posted on Tuesday, June 24, 2008</h2>I'm just starting out with CSLA. I'm using C# 3.0 and I've read the 2005 book and the ebooks but I am still struggling.<br><br>I'm trying to create a tree view consisting of three levels (Groups, Prototypes and Samples). I decided to create a base class (I'm using the PropertyInfo&lt;P&gt; stuff but removed it here for clarity):<br><br>public abstract class NodeItem : ReadOnlyBase&lt;NodeItem&gt;<br>{<br>&nbsp;&nbsp;&nbsp; public int Id;<br>&nbsp;&nbsp;&nbsp; public string Name;<br>&nbsp;&nbsp;&nbsp; public bool HasChildren;<br>&nbsp;&nbsp;&nbsp; abstract protected List&lt;NodeItem&gt; GetChildren();<br>}<br><br>The idea is to create derived classes for each different type of node in the tree. There are two types of group, Favourites and Filtered but only one type of Prototype and Sample.<br><br>So I was going to do:<br><br>public class FavouriteNodeItem : NodeItem <br>public class FilteredNodeItem : NodeItem<br><br>GetChildren() for these classes would return a List&lt;PrototypeNodeItem&gt;<br><br>public class PrototypeNodeItem : NodeItem<br><br>GetChildren() for this class would return a List&lt;SampleNodeItem&gt;<br><br>public class SampleNodeItem : NodeItem<br><br>GetChildren() for this class would return an empty list and HasChildren() would always be false.<br><br>This is how I've done trees in C++. However I'm wondering how this fits in with ReadOnlyListBase?<br><br>Do I create a ROLB for each different node type and load them in GetChildren() or do I remove GetChildren() from NodeItem class and require the UI to call the correct ROLB?<br><br>Iain<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>tiago replied on Wednesday, June 25, 2008</h2><P><A href="http://www.codeproject.com/KB/recipes/CslaGen.aspx">http://www.codeproject.com/KB/recipes/CslaGen.aspx</A>&nbsp;is a CslaGen project that builds a tree of mothers and daughters. By the way, using CslaGen is a great way of learning Csla.</P>
<P>Tiago</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>vdhant replied on Friday, June 27, 2008</h2>If i understand what you are after correctly, generics (i.e. templates) will be able to do what you want.<br /><br />To implement this the NodeItem, the class will look something like the below;<br /><br />public abstract class NodeItem[T] : ReadOnlyBase[T]<br />where T : NodeItem[T]<br />{<br />    .....<br />    abstract protected List[T] GetChildren();<br />}<br /><br />If you do this you will be able to get the object structure you want. See below;<br /><br />public class FavouriteNodeItem : NodeItem[PrototypeNodeItem] {...} <br />public class FilteredNodeItem : NodeItem[PrototypeNodeItem] {...}<br /><br />public class PrototypeNodeItem : NodeItem[SampleNodeItem] : {...}<br /><br />public class SampleNodeItem : NodeItem[SampleNodeItem] : {...}<br /><br />Hope this helps.<br />Anthony<br /><br />PLEASE NOTE -- I have had to use square brackets (i.e. [ and ]) as my browser is playing up when i use diamond brackets (i am currently on a mac)</div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
