<html><header><title>4.1 Business objects creating other business objects async, is this kosher?</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>4.1 Business objects creating other business objects async, is this kosher?</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/10150.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>JCardina posted on Wednesday, March 09, 2011</h2><p>In a business library where Silverlight and .net need to be supported I have a class method in an object that returns a new object of the same type with all the fields copied over to create a duplicate object .</p>
<p>(I can&#39;t just call the standard New method because it won&#39;t work under silverlight so I&#39;m caling the async method and waiting on the result which can&#39;t fail since the DataPortal_Create is simple property setting not involving the database)</p>
<p>Is this kosher?</p>
<p>public Client Duplicate()<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Client dest = null;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Client.New((o, e) =&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (e.Error != null)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; throw e.Error;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; else<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; dest = e.Object;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; });<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; while (dest == null) ;//&lt;--seems ugly but how else ?</p>
<p>... copy fields etc etc ...</p>
<p>}</p></div><div style='padding:0 15 3 15;background-color:lightgreen'><h2>RockfordLhotka replied on Wednesday, March 09, 2011</h2><p>How about this (given that no database access is required)?</p>
<p>public Client Duplicate()<br />{<br />&nbsp; var result = new Client();<br />&nbsp; result.MarkNew();<br />&nbsp; using (BypassPropertyChecks)<br />&nbsp; {<br />&nbsp;&nbsp;&nbsp; using (result.BypassPropertyChecks)<br />&nbsp;&nbsp;&nbsp; {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; result.Name = this.Name;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // copy all properties<br />&nbsp;&nbsp;&nbsp; }<br />&nbsp; }<br />&nbsp; result.BusinessRules.CheckRules();<br />&nbsp; return result;<br />}</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JCardina replied on Wednesday, March 09, 2011</h2><p>Yes, that would definitely work.&nbsp; Thanks Rocky.</p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
