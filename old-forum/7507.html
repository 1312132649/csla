<html><header><title>Windows Forms DataBinding Positions problem and solution</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Windows Forms DataBinding Positions problem and solution</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/7507.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>CorsairX posted on Tuesday, August 25, 2009</h2>Hello,<br /><br />i am new user to CSLA.NET. For the moment i am using it in Windows Forms Applications.<br /><br />I found a problem in BindingSourceNode and helper mechanism. After i Save the root object the positions of all child bindingsources are reset as the way to do it is to rebind the ui as i understood.<br /><br />I tried first to extend the BindingSourceNode class but i couldn;t have access to _Source and other nice properties, so that i added some methods to the one from the framework. i dont know if this is allowed, so that i post here them for the responsibles of this project to take a look and give an opinion about them.<br /><br />Basically i add 2 public methods UserBeginEdit and UserEndEdit that saves/restores positions of all the tree of bindingsources. UserBeginEdit must be called before MyObject.Save() and the other one after.<br />The additions are :<br /><br />private int _currentPosition = -1;<br />public int CurrentPosition {<br />	get { return _currentPosition; }<br />	set { _currentPosition = value; }<br />}<br /><br />private void SavePositions( BindingSourceNode bs ) {<br /><br />bs.CurrentPosition = bs.Source.Position;<br /><br />if ( bs.Children.Count > 0 ) {<br />foreach ( BindingSourceNode child in bs.Children ) {<br />	SavePositions( child );<br />                  } //EndFor<br />         } EndIf<br />}EdnMethod<br /><br />private void RestorePositions( BindingSourceNode bs ) {<br /><br />bs.Source.Position = bs.CurrentPosition;<br />if ( bs.Children.Count > 0 ) {<br /><br />foreach ( BindingSourceNode child in bs.Children ) {<br />RestorePositions( child );<br />} // EndFor<br />} //EndIf<br />} //EndMethod<br /><br />public void UserBeginEdit( ) {<br />	SavePositions( this );<br />}<br /><br />public void UserEndEdit( ) {<br />	RestorePositions( this );<br />}<br /><br />I am currently working to have them also working when the user adds/deletes from a sorted List.<br /><br />Thank you and i can hardly wait for your comments positive or negative about this.<br />Have a nice day.<br /></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Tuesday, August 25, 2009</h2><P>This seems like a good idea overall. I wonder if it would be better to raise events so the UI developer could store/restore the positions and do other things if they needed?</P>
<P>I also wonder what would happen if the new object graph was different - in particular suppose the new object graph had fewer items, so the positions were no longer valid - would that cause exceptions?</P></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
