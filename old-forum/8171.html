<html><header><title>Exceptions crossing the app domain boundary.</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Exceptions crossing the app domain boundary.</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/8171.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>markell posted on Wednesday, December 16, 2009</h2>Dear ladies and sirs.<br><br>I have the following question. When an exception occurs on the server, it is embedded in a DataPortalException, which then crosses the app domain boundary to the client.<br><br>In our case, the exception may be of a type unknown to the client side. For example, NHibernate may throw an exception, but the client side does not have any NHibernate assemblies deployed to it.<br><br>One way to solve the issue would be to compile a stub of NHibernate (we build it from the sources) with just the exceptions in it, but this is a bad solution, because it cannot be applied to libraries for which we do not have the sources.<br><br>So, I hardly see any choice but to somehow intercept the exceptions at the point where they are wrapped with DataPortalException and apply some custom logic on them.<br><br>Is there a well defined way to achieve this? Because, I did not notice any extension points in the server DataPortal type to plug in custom logic at the time of an exception.<br><br>Thanks.<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JonnyBee replied on Wednesday, December 16, 2009</h2>Hi, <br><br>There are 2 separate issues that you may run into on Exception handling in serverside code. <br><br>1. Exceptions that are not Serializable (ex. MQException) <br>2. Exceptions from an assembly that is not available on the client. <br><br>Csla could handle #1 in a more graceful way - and extract info from a non-serializable exception into DataPortalException. <br><br>For #2 - the developer should make sure that only "standard .Net framework" or "known" exceptions are thrown back to the client. <br><br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Wednesday, December 16, 2009</h2><P>Look at the ErrorInfo property of the DataPortalException in Silveright. This contains the entire server-side exception hierarchy, though obviously not the server-side types (because as you note they don't exist on the client).</P>
<P>The CSLA .NET for Silverlight data portal, on the server side, rips the exception hierarchy apart and uses it to create the ErrorInfo hierarchy. That is then returned to the client, so the client has access to most of the exception data.</P></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
