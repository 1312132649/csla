<html><header><title>BusinessListBase MarkOld() is empty?</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>BusinessListBase MarkOld() is empty?</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/8747.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>billtylerjr posted on Wednesday, March 31, 2010</h2><p>Hello, I am new to CSLA so please excuse me if this is trivial as I am trying to get my head around the framework.&nbsp; I am reading the BO 2008 book while working on my first implementation.</p>
<p>I am having an issue with retrieving root objects from an object list factory.&nbsp; When I get the list of objects from the database they are all marked as new and when I save changes they get inserted rather than updated.&nbsp; When I dig into this I see that BusinessListBase implements a MarkOld method but it is an empty method.&nbsp; However if I fetch a single object is is marked correctly as old.</p>
<p>Can someone please point me in the direction to figure this out?&nbsp; I am sure I just havn&#39;t found something simple yet.</p>
<p>Thanks, Bill</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>billtylerjr replied on Wednesday, March 31, 2010</h2><p>I forgot to mention that I am using 3.8.2.</p></div><div style='padding:0 15 3 15;background-color:lightgreen'><h2>RockfordLhotka replied on Wednesday, March 31, 2010</h2><p>If you are using the DataPortal_Fetch() method to get the list, that method should be calling DataPortal.FetchChild() to get each child object. That will automatically set the metastate of the child objects as they are created.</p>
<p>If you are using an object factory then you must explicitly call MarkOld() on each child object. The easiest way to do this is to have your factory object inherit from ObjectFactory, which as a protected MarkOld() method for your use.</p>
<p>Or if you are using a pre-3.5 style of coding with DataPortal_Fetch() (so you aren&#39;t using the child data portal feature) then you really need to look at the older 2005 book or the older ProjectTracker versions to see how child objects call MarkOld() themselves as they are created. The reason for creating the child data portal functionality was to eliminate this old style of coding, because it was too easy for people to forget key bits of code.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JoeFallon1 replied on Wednesday, March 31, 2010</h2><p>When you use a factory you become responsible for setting the state to New or Old among many other things.</p>
<p>If you use the DataPortal_XYZ methods instead then the framework will handle it for you.</p>
<p>Joe</p>
<p>&nbsp;</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>billtylerjr replied on Wednesday, March 31, 2010</h2><p>When I fetch a single object rather than a list it works just fine.&nbsp; It calls this.MarkOld from business base.</p>
<p>How would I go about handling this myself?&nbsp; Forgive me for the nubie questions.</p>
<p>Thanks for the quick response.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>rsbaker0 replied on Wednesday, March 31, 2010</h2><p><div style='padding-left: 50px;background-color:silver'><b>billtylerjr<br></b>
<p>When I fetch a single object rather than a list it works just fine.&nbsp; It calls this.MarkOld from business base.</p>
<p>How would I go about handling this myself?&nbsp; Forgive me for the nubie questions.</p>
<p>Thanks for the quick response.</p>
<div style="CLEAR:both;"></div>
</div></p>
<p>I think this is an issue of doing MarkOld() on each object in the list as you fetch it.&nbsp; (I&#39;ll have to review what we did as this is from memory).&nbsp;&nbsp; I started with CSLA before there was an object factory or child data portal, but the child data portal does a lot of work for you that I had previously implemented manaually. </p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
