<html><header><title>Design question</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Design question</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/1898.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>albruan posted on Tuesday, December 05, 2006</h2>I have a question on whether I should use an EditableRootList or an EditableRoot for retrieving data for the security portion of an app.&nbsp; I've attached a JPEG of my database diagram.&nbsp; My question is: which BusinessBase class type should I use for accessing UserRoles and RolesDepartments objects?&nbsp; I want to be sure that an assignment of a user to a UserRole doesn't already exist before attempting to add it; additionally, I want to be sure that a RolesDepartments&nbsp;doesn't already exist before attempting to add another one.&nbsp;</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Tuesday, December 05, 2006</h2>Hi,<br><br>The answer lies within your use cases, not your database design.&nbsp; How will your uses be working with user roles and department roles?&nbsp; Post your use cases for managing security in your application, and we'll be better able to help you.<br><br>Andy<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>albruan replied on Tuesday, December 05, 2006</h2><P>Let's say the administrator wants to assign a role to a user.&nbsp; I have a dialog box with two dropdown lists, one each for users and for roles.&nbsp; The admin selects a user and a role and clicks a button to assign the role to the user...pretty much the same as in PTracker; however, I&nbsp;want to perform a check against all previous assignments to verify this one doesn't exist prior to attempting to persist it to the database.</P>
<P>Where RolesDepartments is concerned, I'm attempting to assign a role to a department.&nbsp; I have a sproc that selects a user and determines if that user's role has access to a certain department.&nbsp; So, if I want to see if the user is an estimator in the electrical department, I execute a statement such as: bool isPermitted = IsPermitted("estimator", "electrical"); and it returns a true or false for isPermitted.</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Tuesday, December 05, 2006</h2><BLOCKQUOTE><div><img src="/Themes/basicblue/images/icon-quote.gif"> <strong>albruan:</strong></div><div>Let's say the administrator wants to assign a role to a user.&nbsp; I have a dialog box with two dropdown lists, one each for users and for roles.&nbsp; The admin selects a user and a role and clicks a button to assign the role to the user...pretty much the same as in PTracker; however, I&nbsp;want to perform a check against all previous assignments to verify this one doesn't exist prior to attempting to persist it to the database.</div></BLOCKQUOTE><br><br>This would best be acomplished by creating a command object that checks this before you save.&nbsp; However, there is still a small possibility that someone else will create that data before your first user saves it and your save will thrown an exception... so it doesn't seem worth it in this case to build the command object unless you're going to call it on every drop down selection change..<br>
<p><BLOCKQUOTE><div><img src="/Themes/basicblue/images/icon-quote.gif"> <strong>albruan:</strong></div><div>Where RolesDepartments is concerned, I'm attempting to assign a role to a department.&nbsp; I have a sproc that selects a user and determines if that user's role has access to a certain department.&nbsp; So, if I want to see if the user is an estimator in the electrical department, I execute a statement such as: bool isPermitted = IsPermitted("estimator", "electrical"); and it returns a true or false for isPermitted.</div></BLOCKQUOTE></p><p>That doesn't sound like you're assigning a role to a department, it sounds like you're checking that the user has a role and is a member of a particular department.&nbsp; In that sense, a department would be a role in and of itself (semantically, not necessarly stored that way in your db, but your BOs could make it appear as though departments are roles).</p>At any rate, forget your db for the moment and design objects to acomplish the tasks in your use cases.&nbsp; Then worry about how they will get or store the relevent data.<br><br>HTH<br>Andy<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>albruan replied on Tuesday, December 05, 2006</h2>I've had to add an additional table to the database due to a many-to-many relationship between Users and Departments.&nbsp; I've been rethinking this whole thing and kind of mentally set it on the back burner while working on a few other things.</div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
