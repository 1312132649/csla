<html><header><title>Cant set formatString in SmartDate?</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Cant set formatString in SmartDate?</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/7688.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>Nemisis posted on Monday, September 28, 2009</h2>Hi everyone, i have the following code<br /><br />Private Shared FailedDateProperty As BSLPropertyInfo(Of SmartDate) = RegisterProperty(New BSLPropertyInfo(Of SmartDate)(&quot;FailedDate&quot;))<br />Public ReadOnly Property FailedDate() As String<br />&nbsp;&nbsp;&nbsp; Get<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Return GetPropertyConvert(Of SmartDate, String)(FailedDateProperty)<br />&nbsp;&nbsp;&nbsp; End Get<br />End Property<br /><br />But i want to return this particular date in a different format to the other SmartDates throughout the system.&nbsp; In my DataPortal_Create method i have the following code to create a new smartdate with the format string that i want.<br /><br />Dim failDate As New SmartDate(True)<br />failDate.FormatString = &quot;f&quot;<br />LoadProperty(FailedDateProperty, passwordDate)<br /><br />Now i have to load the value in my DataPortal_Fetch method using this:<br /><br />LoadProperty(Of SmartDate)(FailedProperty, .GetSmartDate(&quot;FailedDate&quot;))<br /><br />but i cannot figure out how to set FormatString property of the managed field?&nbsp; I get an error from intellisense saying &quot;Expression is a value and therefore cannot be a target of an assignment&quot;<br /><br />I have tried the following lines.<br /><br />ReadProperty(Of SmartDate)(FailedDateProperty).FormatString = &quot;f&quot;<br />GetProperty(Of SmartDate)(FailedDateProperty).FormatString = &quot;f&quot;<br /><br />Sorry if i am having a stupid moment, it is a monday afterall.<br /><br />Is it a case that i should be loading the value into a variable, setting the formatstring and then loading the variable into my managed field?<br /></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Tuesday, September 29, 2009</h2><P>The get/read/load/set helpers should maintain whatever format you set initially for the default SmartDate value of the property. And they should maintain whether empty means infinitely large or small.</P>
<P>In other words, you should be able to specfy a default SmartDate value on the RegisterProperty() call to define the basic settings of the value.</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>rfcdejong replied on Wednesday, July 14, 2010</h2><p>Ok this is an old topic, but i&#39;ve the same problem.. and there isn&#39;t a solution if u ask me.<br />I tried to set a default SmartDate in the RegisterProperty() but the SmartDate is lacking a constructor to set the formatstring<br /><br />This is the code in the business object.<br /><span style="color:#0000ff;font-size:x-small;"><span style="color:#0000ff;font-size:x-small;"><br />internal</span></span><span style="font-size:x-small;"> </span><span style="color:#0000ff;font-size:x-small;"><span style="color:#0000ff;font-size:x-small;">static</span></span><span style="font-size:x-small;"> </span><span style="color:#2b91af;font-size:x-small;"><span style="color:#2b91af;font-size:x-small;">PropertyInfo</span></span><span style="font-size:x-small;">&lt;</span><span style="color:#2b91af;font-size:x-small;"><span style="color:#2b91af;font-size:x-small;">SmartDate</span></span><span style="font-size:x-small;">&gt; DtmExportEndProperty = RegisterProperty&lt;</span><span style="color:#2b91af;font-size:x-small;"><span style="color:#2b91af;font-size:x-small;">SmartDate</span></span><span style="font-size:x-small;">&gt;(c =&gt; c.DtmExportEnd, </span><span style="color:#a31515;font-size:x-small;"><span style="color:#a31515;font-size:x-small;">&quot;Einddatum export&quot;</span></span><span style="font-size:x-small;">, </span><span style="color:#0000ff;font-size:x-small;"><span style="color:#0000ff;font-size:x-small;">new</span></span><span style="font-size:x-small;"> </span><span style="color:#2b91af;font-size:x-small;"><span style="color:#2b91af;font-size:x-small;">SmartDate</span></span><span style="font-size:x-small;">());<br /></span><span style="color:#0000ff;font-size:x-small;"><span style="color:#0000ff;font-size:x-small;">public</span></span><span style="font-size:x-small;"> </span><span style="color:#0000ff;font-size:x-small;"><span style="color:#0000ff;font-size:x-small;">string</span></span><span style="font-size:x-small;"> DtmExportEnd<br />{<br />&nbsp;&nbsp;&nbsp; </span><span style="color:#0000ff;font-size:x-small;"><span style="color:#0000ff;font-size:x-small;">get</span></span><span style="font-size:x-small;"> { </span><span style="color:#0000ff;font-size:x-small;"><span style="color:#0000ff;font-size:x-small;">return</span></span><span style="font-size:x-small;"> GetPropertyConvert&lt;</span><span style="color:#2b91af;font-size:x-small;"><span style="color:#2b91af;font-size:x-small;">SmartDate</span></span><span style="font-size:x-small;">, </span><span style="color:#0000ff;font-size:x-small;"><span style="color:#0000ff;font-size:x-small;">string</span></span><span style="font-size:x-small;">&gt;(DtmExportEndProperty); }<br />}</span><br /><br />For now a workaround while loading it<br /><br /><span style="color:#0000ff;font-size:x-small;"><span style="color:#0000ff;font-size:x-small;">var</span></span><span style="font-size:x-small;"> exportEnd = </span><span style="color:#0000ff;font-size:x-small;"><span style="color:#0000ff;font-size:x-small;">new</span></span><span style="font-size:x-small;"> </span><span style="color:#2b91af;font-size:x-small;"><span style="color:#2b91af;font-size:x-small;">SmartDate</span></span><span style="font-size:x-small;">(dbItem.DtmExportEnd, </span><span style="color:#0000ff;font-size:x-small;"><span style="color:#0000ff;font-size:x-small;">true</span></span><span style="font-size:x-small;">);<br />exportEnd.FormatString = </span><span style="color:#a31515;font-size:x-small;"><span style="color:#a31515;font-size:x-small;">&quot;f&quot;</span></span><span style="font-size:x-small;">;<br />LoadProperty(item, </span><span style="color:#2b91af;font-size:x-small;"><span style="color:#2b91af;font-size:x-small;">ExportInfoItem</span></span><span style="font-size:x-small;">.DtmExportEndProperty, exportEnd);</span></p>
<p><span style="font-size:x-small;">PS: Somehow noone within the company is using the SmartDate, most people just use DateTime or Nullable&lt;DateTime&gt; and have a valueconverter&nbsp;in wpf.. but i just wanted to use the SmartDate :)</span></p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Wednesday, July 14, 2010</h2><p>How about this:</p>
<p>new SmartDate { Format = &quot;d&quot; }</p>
<p>&nbsp;</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>rfcdejong replied on Wednesday, July 14, 2010</h2><p>i tried it, but it still shows the default format<span style="font-size:x-small;"><span style="font-size:x-small;">&nbsp;</span></span></p>
<p>
<p><span style="color:#0000ff;font-size:x-small;"><span style="color:#0000ff;font-size:x-small;">internal</span></span><span style="font-size:x-small;"> </span><span style="color:#0000ff;font-size:x-small;"><span style="color:#0000ff;font-size:x-small;">static</span></span><span style="font-size:x-small;"> </span><span style="color:#2b91af;font-size:x-small;"><span style="color:#2b91af;font-size:x-small;">PropertyInfo</span></span><span style="font-size:x-small;">&lt;</span><span style="color:#2b91af;font-size:x-small;"><span style="color:#2b91af;font-size:x-small;">SmartDate</span></span><span style="font-size:x-small;">&gt; DtmExportStartProperty = RegisterProperty&lt;</span><span style="color:#2b91af;font-size:x-small;"><span style="color:#2b91af;font-size:x-small;">SmartDate</span></span><span style="font-size:x-small;">&gt;(c =&gt; c.DtmExportStart, </span><span style="color:#a31515;font-size:x-small;"><span style="color:#a31515;font-size:x-small;">&quot;Startdatum van de export&quot;</span></span><span style="font-size:x-small;">, </span><span style="color:#0000ff;font-size:x-small;"><span style="color:#0000ff;font-size:x-small;">new</span></span><span style="font-size:x-small;"> </span><span style="color:#2b91af;font-size:x-small;"><span style="color:#2b91af;font-size:x-small;">SmartDate</span></span><span style="font-size:x-small;">() { FormatString = </span><span style="color:#a31515;font-size:x-small;"><span style="color:#a31515;font-size:x-small;">&quot;g&quot;</span></span><span style="font-size:x-small;"> });</span></p>
</p>
<p><span style="font-size:x-small;">The SmartDate doesn&#39;t&nbsp;seem to work, i solved it without a SmartDate and without wpf valueconverter.<br />Not really how i want it..<br /><br /><span style="color:#0000ff;font-size:x-small;"><span style="color:#0000ff;font-size:x-small;">return</span></span><span style="font-size:x-small;"> GetProperty(DtmExportStartProperty).HasValue ? GetProperty(DtmExportStartProperty).Value.ToString(</span><span style="color:#a31515;font-size:x-small;"><span style="color:#a31515;font-size:x-small;">&quot;g&quot;</span></span><span style="font-size:x-small;">, </span><span style="color:#2b91af;font-size:x-small;"><span style="color:#2b91af;font-size:x-small;">CultureInfo</span></span><span style="font-size:x-small;">.CreateSpecificCulture(</span><span style="color:#a31515;font-size:x-small;"><span style="color:#a31515;font-size:x-small;">&quot;nl-NL&quot;</span></span><span style="font-size:x-small;">)) : </span><span style="color:#0000ff;font-size:x-small;"><span style="color:#0000ff;font-size:x-small;">string</span></span><span style="font-size:x-small;">.Empty;</span></span></p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Wednesday, July 14, 2010</h2><p>SmartDate is primarily intended for use in creating a string property, not a public SmartDate property:</p>
<p>&nbsp; [Serializable]<br />&nbsp; public class SDtest : BusinessBase&lt;SDtest&gt;<br />&nbsp; {<br />&nbsp;&nbsp;&nbsp; public static PropertyInfo&lt;Csla.SmartDate&gt; TextDateProperty = <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; RegisterProperty&lt;Csla.SmartDate&gt;(c =&gt; c.TextDate, null, new Csla.SmartDate { FormatString = &quot;g&quot; });<br />&nbsp;&nbsp;&nbsp; public string TextDate<br />&nbsp;&nbsp;&nbsp; {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; get { return GetPropertyConvert&lt;Csla.SmartDate, string&gt;(TextDateProperty); }<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; set { SetPropertyConvert&lt;Csla.SmartDate, string&gt;(TextDateProperty, value); }<br />&nbsp;&nbsp;&nbsp; }<br />&nbsp; }</p>
<p>In this case the format is preserved, because SetPropertyConvert() understands how to preserve the format of an existing SmartDate as it updates the value.</p>
<p>If you are directly exposing the SmartDate value, then you need to understand and deal with more detail on your own.</p>
<p>Before I go further, I really must question why you&#39;d expose a SmartDate directly? What are you gaining that you can&#39;t get by using the nullable DateTime? type?</p>
<p>SmartDate is a <i>value type</i>, not a reference type. So when you expose a SmartDate property, you must understand that .NET uses value type semantics when working with the property.</p>
<p>What this means is that when you set the property, you are setting it <i>to a new SmartDate value</i>. </p>
<p>obj.MyDate = DateTime.Now; // casts the DateTime to a new SmartDate</p>
<p>The key here is to understand that C# (or VB) does an implicit cast of DateTime.Now into a new SmartDate instance, which is then assigned to the property.</p>
<p>Of course this new SmartDate is entirely unaware of the previous value - they are completely separate values. So there&#39;s no way for this new SmartDate to mystically know about the state of the previous property value - they are completely separate values.</p>
<p>So you&#39;ve set the FormatString on one SmartDate - but that has no impact on other SmartDate values in your application.</p>
<p>One solution is to interact with the <i>existing SmartDate value</i> rather than setting the property to a new SmartDate:</p>
<p>obj.MyDate.Date = DateTime.Now; // sets the existing SmartDate value to a new value</p>
<p>This approach means your property has the same value - the same SmartDate - but the SmartDate itself now has a new Date (and therefore Text) value.</p>
<p>Another solution is to do what SetPropertyConvert() does, which is to understand the special semantics of SmartDate. What I mean by this, is that SetPropertyConvert() knows to initialize the new SmartDate with the state of the previous SmartDate value, including FormatString.</p>
<p>Yet another solution is to call the static SetDefaultFormatString method of the SmartDate type to globally set the default format string for all SmartDate values across your entire application.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>rfcdejong replied on Friday, July 16, 2010</h2><p>hmm.. i never sad i was exposing the SmartDate property directly.<br />Anyway, since noone was using the SmartDate i was just going to see if it&#39;s &quot;smart&quot; to use it in our projects.</p>
<p>The SetDefaultFormatString isn&#39;t that good because mostly it&#39;s ok to have only the Date and not the Time.<br /><br />Below didn&#39;t... with LoadProperty(), but it might work with SetPropertyConvert, maybe even with LoadPropertyConvert, but i didn&#39;t use that.<br /><br /><span lang="EN" style="font-family:&#39;Arial&#39;,&#39;sans-serif&#39;;color:blue;font-size:10pt;mso-ansi-language:EN;">internal</span><span lang="EN" style="font-family:&#39;Arial&#39;,&#39;sans-serif&#39;;color:#333333;font-size:10pt;mso-ansi-language:EN;"> </span><span lang="EN" style="font-family:&#39;Arial&#39;,&#39;sans-serif&#39;;color:blue;font-size:10pt;mso-ansi-language:EN;">static</span><span lang="EN" style="font-family:&#39;Arial&#39;,&#39;sans-serif&#39;;color:#333333;font-size:10pt;mso-ansi-language:EN;"> </span><span lang="EN" style="font-family:&#39;Arial&#39;,&#39;sans-serif&#39;;color:#2b91af;font-size:10pt;mso-ansi-language:EN;">PropertyInfo</span><span lang="EN" style="font-family:&#39;Arial&#39;,&#39;sans-serif&#39;;color:#333333;font-size:10pt;mso-ansi-language:EN;">&lt;</span><span lang="EN" style="font-family:&#39;Arial&#39;,&#39;sans-serif&#39;;color:#2b91af;font-size:10pt;mso-ansi-language:EN;">SmartDate</span><span lang="EN" style="font-family:&#39;Arial&#39;,&#39;sans-serif&#39;;color:#333333;font-size:10pt;mso-ansi-language:EN;">&gt; DtmExportStartProperty = RegisterProperty&lt;</span><span lang="EN" style="font-family:&#39;Arial&#39;,&#39;sans-serif&#39;;color:#2b91af;font-size:10pt;mso-ansi-language:EN;">SmartDate</span><span lang="EN" style="font-family:&#39;Arial&#39;,&#39;sans-serif&#39;;color:#333333;font-size:10pt;mso-ansi-language:EN;">&gt;(c =&gt; c.DtmExportStart, </span><span lang="EN" style="font-family:&#39;Arial&#39;,&#39;sans-serif&#39;;color:#a31515;font-size:10pt;mso-ansi-language:EN;">&quot;Startdatum van de export&quot;</span><span lang="EN" style="font-family:&#39;Arial&#39;,&#39;sans-serif&#39;;color:#333333;font-size:10pt;mso-ansi-language:EN;">, </span><span lang="EN" style="font-family:&#39;Arial&#39;,&#39;sans-serif&#39;;color:blue;font-size:10pt;mso-ansi-language:EN;">new</span><span lang="EN" style="font-family:&#39;Arial&#39;,&#39;sans-serif&#39;;color:#333333;font-size:10pt;mso-ansi-language:EN;"> </span><span lang="EN" style="font-family:&#39;Arial&#39;,&#39;sans-serif&#39;;color:#2b91af;font-size:10pt;mso-ansi-language:EN;">SmartDate</span><span lang="EN" style="font-family:&#39;Arial&#39;,&#39;sans-serif&#39;;color:#333333;font-size:10pt;mso-ansi-language:EN;">() { FormatString = </span><span lang="EN" style="font-family:&#39;Arial&#39;,&#39;sans-serif&#39;;color:#a31515;font-size:10pt;mso-ansi-language:EN;">&quot;g&quot;</span><span lang="EN" style="font-family:&#39;Arial&#39;,&#39;sans-serif&#39;;color:#333333;font-size:10pt;mso-ansi-language:EN;"> });<br /></span><span lang="EN" style="font-family:&#39;Arial&#39;,&#39;sans-serif&#39;;color:blue;font-size:10pt;mso-ansi-language:EN;">public</span><span lang="EN" style="font-family:&#39;Arial&#39;,&#39;sans-serif&#39;;color:#333333;font-size:10pt;mso-ansi-language:EN;"> </span><span lang="EN" style="font-family:&#39;Arial&#39;,&#39;sans-serif&#39;;color:blue;font-size:10pt;mso-ansi-language:EN;">string</span><span lang="EN" style="font-family:&#39;Arial&#39;,&#39;sans-serif&#39;;color:#333333;font-size:10pt;mso-ansi-language:EN;"> DtmExportEnd<br />{<br />&nbsp;&nbsp;&nbsp; </span><span lang="EN" style="font-family:&#39;Arial&#39;,&#39;sans-serif&#39;;color:blue;font-size:10pt;mso-ansi-language:EN;">get</span><span lang="EN" style="font-family:&#39;Arial&#39;,&#39;sans-serif&#39;;color:#333333;font-size:10pt;mso-ansi-language:EN;"> { </span><span lang="EN" style="font-family:&#39;Arial&#39;,&#39;sans-serif&#39;;color:blue;font-size:10pt;mso-ansi-language:EN;">return</span><span lang="EN" style="font-family:&#39;Arial&#39;,&#39;sans-serif&#39;;color:#333333;font-size:10pt;mso-ansi-language:EN;"> GetPropertyConvert&lt;</span><span lang="EN" style="font-family:&#39;Arial&#39;,&#39;sans-serif&#39;;color:#2b91af;font-size:10pt;mso-ansi-language:EN;">SmartDate</span><span lang="EN" style="font-family:&#39;Arial&#39;,&#39;sans-serif&#39;;color:#333333;font-size:10pt;mso-ansi-language:EN;">, </span><span lang="EN" style="font-family:&#39;Arial&#39;,&#39;sans-serif&#39;;color:blue;font-size:10pt;mso-ansi-language:EN;">string</span><span lang="EN" style="font-family:&#39;Arial&#39;,&#39;sans-serif&#39;;color:#333333;font-size:10pt;mso-ansi-language:EN;">&gt;(DtmExportEndProperty); }<br />}</span></p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Friday, July 16, 2010</h2><p>It is the zzzConvert() methods that do the work of converting the value safely, so it won&#39;t do what you want if you use anything other than those methods.</p>
<p>SetProperty/LoadProperty/etc all follow the normal .NET behaviors for value types as I described in my previous post.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Russ replied on Friday, July 16, 2010</h2><p>Here is a&nbsp;simple way that I use to change the format of a smartdate property.&nbsp;</p>
<p class="MsoNormal" style="LINE-HEIGHT:normal;MARGIN:0in 0in 0pt;tab-stops:9.0pt .25in 27.0pt .5in 45.0pt;mso-layout-grid-align:none;"><span style="FONT-FAMILY:Consolas;COLOR:blue;FONT-SIZE:8pt;mso-bidi-font-size:9.5pt;mso-bidi-font-family:Consolas;">private</span><span style="FONT-FAMILY:Consolas;FONT-SIZE:8pt;mso-bidi-font-size:9.5pt;mso-bidi-font-family:Consolas;"> <span style="COLOR:blue;">static</span> <span style="COLOR:#2b91af;">PropertyInfo</span>&lt;<span style="COLOR:#2b91af;">SmartDate</span>&gt; CreatedDateProperty = </span></p>
<p class="MsoNormal" style="LINE-HEIGHT:normal;MARGIN:0in 0in 0pt;tab-stops:9.0pt .25in 27.0pt .5in 45.0pt;mso-layout-grid-align:none;"><span style="FONT-FAMILY:Consolas;FONT-SIZE:8pt;mso-bidi-font-size:9.5pt;mso-bidi-font-family:Consolas;"><span style="mso-tab-count:2;">&nbsp;&nbsp;&nbsp; </span>RegisterProperty&lt;<span style="COLOR:#2b91af;">SmartDate</span>&gt;(c =&gt; c.CreatedDate, <span style="COLOR:#a31515;">&quot;Created Date&quot;</span>);</span></p>
<p class="MsoNormal" style="LINE-HEIGHT:normal;MARGIN:0in 0in 0pt;tab-stops:9.0pt .25in 27.0pt .5in 45.0pt;mso-layout-grid-align:none;"><span style="FONT-FAMILY:Consolas;COLOR:blue;FONT-SIZE:8pt;mso-bidi-font-size:9.5pt;mso-bidi-font-family:Consolas;">public</span><span style="FONT-FAMILY:Consolas;FONT-SIZE:8pt;mso-bidi-font-size:9.5pt;mso-bidi-font-family:Consolas;"> <span style="COLOR:blue;">string</span> CreatedDate</span></p>
<p class="MsoNormal" style="LINE-HEIGHT:normal;MARGIN:0in 0in 0pt;tab-stops:9.0pt .25in 27.0pt .5in 45.0pt;mso-layout-grid-align:none;"><span style="FONT-FAMILY:Consolas;FONT-SIZE:8pt;mso-bidi-font-size:9.5pt;mso-bidi-font-family:Consolas;">{</span></p>
<p class="MsoNormal" style="LINE-HEIGHT:normal;MARGIN:0in 0in 0pt;tab-stops:9.0pt .25in 27.0pt .5in 45.0pt;mso-layout-grid-align:none;"><span style="FONT-FAMILY:Consolas;FONT-SIZE:8pt;mso-bidi-font-size:9.5pt;mso-bidi-font-family:Consolas;"><span style="mso-tab-count:1;">&nbsp; </span><span style="COLOR:blue;">get</span> { <span style="COLOR:blue;">return</span> GetProperty(CreatedDateProperty).ToString(<span style="COLOR:#a31515;">&quot;dd-MMM-yyyy hh:mm tt&quot;</span>); }</span></p>
<p class="MsoNormal" style="LINE-HEIGHT:normal;MARGIN:0in 0in 0pt;tab-stops:9.0pt .25in 27.0pt .5in 45.0pt;mso-layout-grid-align:none;"><span style="FONT-FAMILY:Consolas;FONT-SIZE:8pt;mso-bidi-font-size:9.5pt;mso-bidi-font-family:Consolas;"><span style="mso-tab-count:1;">&nbsp; </span><span style="COLOR:blue;">set</span> { SetPropertyConvert&lt;<span style="COLOR:#2b91af;">SmartDate</span>, <span style="COLOR:blue;">string</span>&gt;(CreatedDateProperty, <span style="COLOR:blue;">value</span>); }</span></p>
<p class="MsoNormal" style="LINE-HEIGHT:normal;MARGIN:0in 0in 0pt;tab-stops:9.0pt .25in 27.0pt .5in 45.0pt;mso-layout-grid-align:none;"><span style="FONT-FAMILY:Consolas;FONT-SIZE:8pt;mso-bidi-font-size:9.5pt;mso-bidi-font-family:Consolas;">}</span></p>
<p>&nbsp;Hope this helps.</p>
<p>Russ.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>decius replied on Wednesday, August 18, 2010</h2><p><div style='padding-left: 50px;background-color:silver'><b>Russ<br></b></p>
<p>Here is a&nbsp;simple way that I use to change the format of a smartdate property.&nbsp;</p>
<p class="MsoNormal"><span style="FONT-FAMILY:Consolas;COLOR:blue;FONT-SIZE:8pt;mso-bidi-font-size:9.5pt;mso-bidi-font-family:Consolas;">private</span><span style="FONT-FAMILY:Consolas;FONT-SIZE:8pt;mso-bidi-font-size:9.5pt;mso-bidi-font-family:Consolas;"> <span style="COLOR:blue;">static</span> <span style="COLOR:#2b91af;">PropertyInfo</span>&lt;<span style="COLOR:#2b91af;">SmartDate</span>&gt; CreatedDateProperty = </span></p>
<p class="MsoNormal"><span style="FONT-FAMILY:Consolas;FONT-SIZE:8pt;mso-bidi-font-size:9.5pt;mso-bidi-font-family:Consolas;"><span style="mso-tab-count:2;">&nbsp;&nbsp;&nbsp; </span>RegisterProperty&lt;<span style="COLOR:#2b91af;">SmartDate</span>&gt;(c =&gt; c.CreatedDate, <span style="COLOR:#a31515;">&quot;Created Date&quot;</span>);</span></p>
<p class="MsoNormal"><span style="FONT-FAMILY:Consolas;COLOR:blue;FONT-SIZE:8pt;mso-bidi-font-size:9.5pt;mso-bidi-font-family:Consolas;">public</span><span style="FONT-FAMILY:Consolas;FONT-SIZE:8pt;mso-bidi-font-size:9.5pt;mso-bidi-font-family:Consolas;"> <span style="COLOR:blue;">string</span> CreatedDate</span></p>
<p class="MsoNormal"><span style="FONT-FAMILY:Consolas;FONT-SIZE:8pt;mso-bidi-font-size:9.5pt;mso-bidi-font-family:Consolas;">{</span></p>
<p class="MsoNormal"><span style="FONT-FAMILY:Consolas;FONT-SIZE:8pt;mso-bidi-font-size:9.5pt;mso-bidi-font-family:Consolas;"><span style="mso-tab-count:1;">&nbsp; </span><span style="COLOR:blue;">get</span> { <span style="COLOR:blue;">return</span> GetProperty(CreatedDateProperty).ToString(<span style="COLOR:#a31515;">&quot;dd-MMM-yyyy hh:mm tt&quot;</span>); }</span></p>
<p class="MsoNormal"><span style="FONT-FAMILY:Consolas;FONT-SIZE:8pt;mso-bidi-font-size:9.5pt;mso-bidi-font-family:Consolas;"><span style="mso-tab-count:1;">&nbsp; </span><span style="COLOR:blue;">set</span> { SetPropertyConvert&lt;<span style="COLOR:#2b91af;">SmartDate</span>, <span style="COLOR:blue;">string</span>&gt;(CreatedDateProperty, <span style="COLOR:blue;">value</span>); }</span></p>
<p class="MsoNormal"><span style="FONT-FAMILY:Consolas;FONT-SIZE:8pt;mso-bidi-font-size:9.5pt;mso-bidi-font-family:Consolas;">}</span></p>
<p>&nbsp;Hope this helps.</p>
<p>Russ.</p>
<p style="CLEAR:both;">&nbsp;</p>
<p></div></p>
<p>I ran into this same problem. This was also the path I started going down, but wasn&#39;t confident I wasn&#39;t missing some kind of&nbsp;logic that the GetPropertyConvert method encapsulated... This solution, of course, assumes that the SmartDate is never null which I suppose could be argued to be bad practice. But this solves my problem easily....&nbsp;Seeing someone else suggest the same thing makes me feel a little safer.</p>
<p>With this though, I have to wonder, what was really the purpose of creating the GetPropertyConvert method if the above syntax is indeed&nbsp;deemed appropriate?</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Wednesday, August 18, 2010</h2><p>Various parts of CSLA have evolved over the past decade, including property syntax and SmartDate. I&#39;ve tried to keep them all working together as much as possible, but I can&#39;t change the way things like core .NET work.</p>
<p>Value types are what they are. They might sometimes seem like reference types, but they aren&#39;t. </p>
<p>SmartDate is a value type, which comes with specific semantics we have to live with.</p>
<p>SetPropertyConvert() does include some special coding to try and preserve metastate properties like the format string as the value is set. This is absolutely not normal .NET behavior - it is something I&#39;ve added in an effort to preserve a level of backward compatibility with the way SmartDate has traditionally been used - while also allowing people to use the new property syntax.</p>
<p>That&#39;s clearly not a perfect solution. My only meaningful alternative is to just drop the whole thing - maybe even drop SmartDate entirely (though I use it a lot, so I really don&#39;t consider that an alternative). But I could just say that, like other simple value types, SmartDate just works as it does, and if you need to do special formatting you have to do that in your own code - and the reality is that you may have to do that anyway.</p>
<p>If you have a workable solution I&#39;m entirely open to it though - if there&#39;s a way to make things better that&#39;s great!</p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
