<html><header><title>Confusion with Child object default value setting.</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Confusion with Child object default value setting.</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/2122.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>Tommybouy posted on Thursday, January 11, 2007</h2><P>Hello,</P>
<P>I am getting confused with child objects and setting their default values. I have been doing alot of reading and I see Rocky mention that children don't use the DataPortal_Create method but then in other posts and in the book it mentions that you set defaults there. </P>
<P>We use VB and also use the CodeSmith SplitPartial templates so the generated code for a EditableChildList never calls the DataPortal_Create. It instead calls the Object.ObjectNew method. I tried adding a call to a&nbsp;SetDefaults method inside of the Initialize method but this runs before the variables are created.</P>
<P>What am I doing wrong here??</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Brian Criswell replied on Thursday, January 11, 2007</h2>The DataPortal_XYZ methods are called by the DataPortal against an object once the object is in the DataPortal.&nbsp; You call DataPortal_Create when you need to prefill an object (even a child one) from a data source.&nbsp; If your child needs to get default information from the database then ChildObject.NewChildObject would need to call DataPortal.Create.&nbsp; If nothing from the data source is needed to create a ChildObject, then just initialise the variables when they are created or put it in the constructor.<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Thursday, January 11, 2007</h2>That's not correct.&nbsp; There's no need in NewChildObject to call DataPortal.Create; you're already running on the remote server at that point.<br><br>Instead, NewChildObject (which may take parameters, which may determine which set of defaults to load) should look something like this:<br><br><font color="#0000ff">internal static</font> <font color="#008000">ChildObject </font>NewChildObject() {<br>&nbsp;&nbsp;&nbsp; <font color="#008000">ChildObject </font>result;<br><br>&nbsp;&nbsp;&nbsp; result = <font color="#0000ff">new </font><font color="#008000">ChildObject</font>();<br>&nbsp;&nbsp;&nbsp; result.CreateSelf();&nbsp; <font color="#008000">// This would be the eviquolent of DP_C, if this was a root object</font><br><br>&nbsp;&nbsp;&nbsp; <font color="#0000ff">return </font>result;<br>}<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Brian Criswell replied on Friday, January 12, 2007</h2>Not if the child object is a child of a list and the new items are added after the root object has returned from the DataPortal.<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Friday, January 12, 2007</h2>Ahh, fair enough.&nbsp; I was concidering the case when the root is being created new as well.<br></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
