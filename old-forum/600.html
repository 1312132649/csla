<html><header><title>OO Advice needed</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>OO Advice needed</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/600.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>david.wendelken posted on Wednesday, July 12, 2006</h2><P>I'm looking for advice on best practices here...</P>
<P>Data Tables:</P>
<P>Measurement<BR>===========<BR>measureId&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; number<BR>measureText&nbsp; varchar(50)<BR>statusId&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; number<BR></P>
<P>Status<BR>======<BR>statusId&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; number<BR>statusText&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; varchar(50)<BR><BR>Here are the two classes I need to define:</P>
<P>Measurement : BusinessBase&lt;Measurement&gt; <BR>MeasurementInfo : ReadOnlyBase&lt;MeasurementInfo&gt; </P>
<P>Given that statusId is a meaningless computer-generated Id, it's pretty worthless as a value in a list of measurements (from a human understanding perspective).&nbsp; So my query (and thus the associated read only properties for MeasurementInfo would be:<BR><BR>select <BR>&nbsp;m.measureId<BR>,m.measureText<BR>,m.statusId<BR>,s.statusText<BR>from Measurement as M<BR>inner join Status as s on m.statusId = s.statusId<BR><BR>But what about the Measurement object?<BR><BR>Should I have a read-only property StatusText and a read-write property StatusId, where setting StatusId causes the StatusText property to be changed (after a quick query to the database)?<BR><BR>What have people found to be the cleanest and most productive course of action in this situation?<BR><BR>Should I include StatusText as a read-only property of Measurement?&nbsp; I'm sure to need it when a person takes a look at a detailed Measurement data entry/data review screen...</P>
<P><BR><BR><BR><BR>&nbsp;</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Wednesday, July 12, 2006</h2><P>You might consider using a NameValueList named StatusOptions or something. Then Measurement can expose a read-write StatusId property and a read-only StatusText property - but your UI could use a combobox bound to StatusId and to the StatusOptions object - thus hiding the Id from the user while providing edit capabilities.</P>
<P>Measurement.StatusText is probably best implemented using StatusOptions too - as you'd want it to change as the StatusId changes:</P>
<P>public string StatusText<BR>{<BR>&nbsp; get {<BR>&nbsp;&nbsp;&nbsp; return StatusOptions.GetOptions().Value(_statusId);<BR>&nbsp; }<BR>}</P>
<P>As long as you implement StatusOptions along the lines of RoleList from Chapter 8 (so it is cached) this is typically a good answer.</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Wednesday, July 12, 2006</h2>What I do is have a NameValueList for the Status.<br><br>Status is then a text property on Measurement.&nbsp; Setting the string actually looks up the value in the NVL to get the id, and the id is what is actually stored.&nbsp; The property get is similar, except that it gets the value for the key.&nbsp; <br><br>If the value isn't found when the property is set, I set the statusId = -1; in the getter, I return a blank string if the id is -1.&nbsp;&nbsp; Also, there's a business rule that says the object can't have a statusId of -1.<br><br>HTH<br>Andy<br></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
