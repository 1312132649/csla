<html><header><title>Somewhat OT:  Add New button on Infragistics UltraGrid</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Somewhat OT:  Add New button on Infragistics UltraGrid</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/1334.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 posted on Tuesday, September 26, 2006</h2>Hi,<br><br>I have a UltraGrid which is bound to one of my business collections.&nbsp; I can't allow new rows to be added like you would a DataGridView, that is by typing in the 'blank' row at the bottom to auto create the row because I need to create the object in the collection via a factory method, which takes parameters.<br><br>So I show the Add new button at the button of the grid.&nbsp; What I'd like to do is when the user clicks this button, I can show a dialog where the user enters the necessary information.<br><br>If they cancel, no row should be added.&nbsp; If they enter all the info in the dialog, the row should be added.<br><br>I can't find which events are appropriate to enable this behavior; the grid always tries to find a default constructor on the BO which is contained in the list.&nbsp; <br><br>Any help would be appreciated.<br>Thanks<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Michael Hildner replied on Tuesday, September 26, 2006</h2><P>Hi Andy,</P>
<P>Not sure if this will help or not. I've found the add new button to be limiting, so I just don't use it.&nbsp;I just put my own button below the grid, then you can code whatever you want, such as calling .AddNew().</P>
<P>Mike</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Tuesday, September 26, 2006</h2>Mike,<br><br>I was afraid of that.&nbsp; I guess that's the approach I'll take, unless someone else knows how to make it more useful.<br><br>Andy<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Michael Hildner replied on Tuesday, September 26, 2006</h2><P>Andy,</P>
<P>I'm curious - what's the advantage of the add new button over a regular button? I want to see what I'm missing out on.</P>
<P>Just a couple thoughts. I guess you could copy the data into something that did work with the add new button (dataset / datatable?)- I haven't tried it, so I don't know what you'd lose out on. </P>
<P>I'm assuming you're getting that "Unable to add a row: Row insertion not supported by&nbsp;<BR> this data source" message - that was happening to me. I tried to handle the grid's BeforeRowInsert event, but that I guess that happens after that message. You could handle the grid's Error event, check for the error, do your thing and then cancel the event. I tried that and it worked. Seems ugly though.</P>
<P>Mike</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Wednesday, September 27, 2006</h2>Mike,<br><br>Apparently there isn't. <img src="/emoticons/emotion-1.gif" alt="Smile [:)]" /><br><br>It was mainly just because the button was part of the grid, it looked nicer because its next to another grid.&nbsp; So putting normal buttons outside and below the grid makes the grid smaller and puts more white space into the mix.<br><br>Yes, I was getting that message, although I though that BeforeRowInsert was firing before I got that event (although there seemed to be nothing I could do to create the data before it continued on... unless I could cancel.. hmm.<br><br>Andy<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>leyh replied on Thursday, September 28, 2006</h2>Hi,<br /><br />I have a somewhat related question regarding the AddNew button.<br /><br />Is it possible to bind the following data structure to a 2-band UltraGrid: <br /><br />BOList and BOList<br /><br />I receive the error message "Row insertion not supported by this data source." when I try to create a new row in  BOList using the AddNew button.<br /><br />Thanks in advance.<br /><br />Leyh<br /></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>leyh replied on Thursday, September 28, 2006</h2><BLOCKQUOTE><div><img src="/Themes/default/images/icon-quote.gif"> <strong>leyh:</strong></div><div>Hi,<br /><br />I have a somewhat related question regarding the AddNew button.<br /><br />Is it possible to bind the following data structure to a 2-band UltraGrid: <br /><br />BOList and BOList<br /><br />I receive the error message "Row insertion not supported by this data source." when I try to create a new row in  BOList using the AddNew button.<br /><br />Thanks in advance.<br /><br />Leyh</div></BLOCKQUOTE><br /><br />I forgot to mention I am using version 2.03<br /><br />cheers,<br /><br />Leyh</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Thursday, September 28, 2006</h2>Make sure BOList has its AllowNew property set to true; also make sure the BindingSource to which BOList is bound has its AllowNew property set to true.&nbsp; Finally, make sure the grid allows new objects.<br><br>HTH<br>Andy<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>leyh replied on Thursday, September 28, 2006</h2>Andy,<br /><br />The AllowNew property of the two BOList is already set to true.  However, only still the first band can accpet new <br /><br />objects but NOT the second band.<br /><br />Binding a  nested List to the second band on the other hand is fine.<br /><br />ie. This is ok.<br /> class Items : BOList<br />{<br />   private List listOfSubItems;  // This is exposed as property<br />}<br /><br />but not this one<br /><br /> class Items : BOList{}; // Ok to add a new object.<br /> class Item : BOList{};  // CAN'T add a new object<br /><br />Is there anything speical with binding a sub-BOList(ie the Item BOList) to the second band?<br /><br />Thanks in advance,<br /><br />Leyh</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Thursday, September 28, 2006</h2>Hmm, I wouldn't think that Item would subclass BOList<br><br>Also, you don't need to have a List to store the items in your Items class. BOList is itself a collection (assuming BOList inhertis BusinessListBase, which I would think it should).<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>leyh replied on Thursday, September 28, 2006</h2>Please disregard my previous post.  The angle brackets didn't show up properly.<br /><br />Andy, <br /><br />The AllowNew property of the two BOList is already set to true.  However, only still the first band can accpet new objects but NOT the second band.<br /><br />Binding a  nested List{BO} to the second band on the other hand is fine.<br /><br />ie. This is ok.<br /> class Items : BOList { Items, Item }<br />{<br />   private List { SubItems } listOfSubItems;  // This is exposed as property<br />}<br /><br />but not this one<br /><br /> class Items : BOList { Items, Item }  {}; // Ok to add a new object.<br /> class Item : BOList  { Item, SubItem }  {};  // CAN'T add a new object<br /><br />Basically Items contains a list of items and each item contains a list of sub items.  <br /><br />Is there anything speical with binding a sub-BOList(ie the Item BOList) to the second band?<br /><br />Thanks in advance,<br /><br />Leyh</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>vandero replied on Friday, October 13, 2006</h2><P>Hello,</P>
<P>I'm having the same problem as what you describe. In an UltraGrid I cannot add records to a child band. The grid is bound to a BusinessListBase object Contacts, that contains Contact objects that each have a BusinessListBase collection ContactPersons of ContactPerson objects.</P>
<P>Adding rows to the parent band works but when I try to add a row to the child band then I get the error: "Row insertion not supported by this data source.".</P>
<P>Also, I looked into the BusinessListBase objects themselves (which inherit from BindingList&lt;&gt;) and it seems that both for the parent and child the AllowNew is set to False which seems strange to me because adding a row to Contacts DOES work.</P>
<P>Does anybody have a solution to this? Is it a problem related to UltraGrid or does anybody else have this problem also with another grid control?</P>
<P>Thanks in advance,</P>
<P>Robin</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Friday, October 13, 2006</h2>You have to set AllowNew on the collection, and also on any binding source controls your have as well.&nbsp; Sometimes they set themselves to False by default.<br><br>You'll have to do what I did to add the rows which require data to create; a button outside the grid which will gather the data, call the factory method for the object, then call Add on the appropriate binding source object.&nbsp; That last part is important because you'll want to keep the BindingSource 'in the loop,' so to speak.<br><br>HTH<br>Andy<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>themanfromsql replied on Wednesday, March 28, 2007</h2>Hello, <br><br>I was having the same problem with a nested List&lt;T&gt; and getting the error message above.&nbsp; My problem was due to the fact that the nested List's type T didn't have an empty constructor.&nbsp; I had a single constructor that took in a string value.&nbsp; As soon as I created a second empty constructor, it started allowing me to add nested types.&nbsp; <br></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
