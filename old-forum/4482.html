<html><header><title>New feature request to support multiple remote data portals.</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>New feature request to support multiple remote data portals.</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/4482.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>boo posted on Saturday, March 08, 2008</h2>Often in shops such as mine you're left in a situation where you're string together lots of already written assemblies to make a final product.&nbsp; Case in point in my current project.<br><br>We have a security framework that uses CSLA at it's core. (A)<br>We have a library that is a mix of legacy DTO's (prior to us incorporating CSLA) and CSLA objects. (B)<br>We have a library that is pure CSLA for working with another core system in the company. (C).<br><br>We DON'T want applications that use (A) to ever use the assembly in 'local portal' mode - we insist that they use the remote data portal and point to a particular server where we keep the security database, hash type, etc - we don't want every Tom, ***, and Sally knowing what that assembly hits on the remote machine.&nbsp; This information is living on a remote portal that most developers don't have access to gives people a sense of security. <br><br>Currently (C) is going to be upgraded because of performance reasons so that all applications that use (C) have to use remote data portal where the remote data portal has a lot closer access to the system it communicates with.&nbsp; THIS IS NOT THE SAME LOCATION WHERE (A) IS.<br><br>(B) has been and always will use the local data portal because of reasons too long to get into.<br><br>So individually these requirements aren't a problem, until your application has to use assemblies A, B, and C.&nbsp; Currently CSLA either has remote data portal at X location or it uses local data portal.<br><br>I'll will do this on my own if need be, but I think this feature would benifit the entire community, be a nice feature for CSLA overall, and you guys could implement it a lot quicker and BETTER than I could.<br><br>I would like to see a client configuration section for the client data portal.&nbsp; This would be optional and by default the data portal would work using the appSettings as it always has (for backwards compatability).&nbsp; If this configuration section is present on the client though, the appSettings are ignored.<br><br>The configuration section would basically map what assembly goes to what remote data portal, for example:<br><br>&lt;csla.client&gt;<br>&nbsp;&nbsp;&nbsp; &lt;dataportal&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;assembly name="Assembly, Version=1.0.0.0, PublicKeyToken=null, Culture=neutral"<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; proxy="Csla.DataPortalClient.RemotingProxy, Csla"<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; url="http://somehost/RemotingHost/RemotingPortal.rem" /&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;assembly name="Assembly, Version=2.1.4.0, PublicKeyToken=null, Cuture=netural"<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; proxy="Csla.DataPortalClient.RemotingProxy, Csla"<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; url="http://someOtherHost/RemotingHost/RemotingPortal.rem" /&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;!-- this would be the default for any assembly not mentioned above, but can be declared explicitly also - useLocalPortal is optional attribute that if set to true ignores any enteries for the name, proxy, url attributes and default is false (obviously for the above to work) --&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;assembly name="Assembly, Verision=1.0.0.0, PublicKeyToken=null, Cutlture=neutral"<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; useLocalPortal="true" /&gt;<br>&nbsp;&nbsp;&nbsp; &lt;/dataportal&gt;<br>&lt;/csla.client&gt;<br><br>This also infers that one assembly communicating to remote location Y could also communicate with location Z through enterise services - they don't all have to be the same type of server portal proxy.<br><br>Thoughts?<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Sunday, March 09, 2008</h2><P>I see. From the other thread (<SPAN><A HREF="/forums/thread/21918.aspx">http://forums.lhotka.net/forums/thread/21918.aspx</A></SPAN>) I thought you were chaining data portals. But that is incorrect - you just want to have two data portals and to call different ones for different object types.</P>
<P>You can do this by creating your own data portal proxy class. This runs on the client and is invoked by the client-side data portal. This proxy is responsible for routing the call to the server, but you can create your own proxy that routes the call to various existing data portal proxies (like the local and WCF proxies or whatever).</P>
<P>Your proxy would need to have some metadata scheme by which it knows what objects to route where - similar to the config file concept you are describing.</P>
<P>I don't plan to do this in core CSLA, but this scenario is one of the primary reasons I allow you to transparently use your own proxy as I'm describing here.</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>boo replied on Sunday, March 09, 2008</h2>I think I follow what you're saying; but this implies for each application I have to create this custom data portal proxy, whereas I'm thinking more of a global solution for all of our applications by putting the code down in the CSLA core itself.<br><br>But building upon what you said....and perhaps what you were getting at my my brain is just fried from a 70 hour week....<br><br>I should be able to create my own proxy in a seperate assembly, which then all application could use (giving me the re-use I desire) without having to modify the CSLA core.&nbsp; So basically I would just instead of in the appSettings pointing to a remote proxy, I'd point to my custom proxy, which then would in-turn use the remote, local, or whatever proxy based upon my metadata?<br><br>I think that makes sense?... :)<br><br><br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Sunday, March 09, 2008</h2>Yes, put it in a seperate assembly and reuse it - that is exactly what I'm talking about doing.</div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
