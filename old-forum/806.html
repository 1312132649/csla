<html><header><title>ProjectTracker ProjectEdit empty project saving allowed?!</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>ProjectTracker ProjectEdit empty project saving allowed?!</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/806.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>cultofluna posted on Thursday, August 03, 2006</h2>Hello,<br><br>I'm truly sorry if my question was already answered many times before, but I could not find the answer yet.<br>I'm new to the CSLA and after I studied the book I've started testing the ProjectTracker demo. Something strikes me as being kind of strange; When creating a project the Save button is immediately enabled.&nbsp; I am able to save an empty project (no description, etc.) without the CSLA complaing about any BrokenRules. <br>Has this got something to do with the use of binding? Is binding slow in any kind of way?<br><br>Thanks in advance for any answer.<br><br>Best regards,<br><br><br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>cultofluna replied on Friday, August 04, 2006</h2>It seems to go wrong with the if(_name != value) check in the set of the Name property. When the _name == "" and value == "" according to the rules of the Name the rules are broken, however the if statement prevents this check when initializing the value.<br><br>Cheers<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Friday, August 04, 2006</h2>I think that's a bug in the sample code; just before DataPortal_Create exits, it should be calling ValidationRules.CheckRules().&nbsp;&nbsp; This topic comes up from time to time.. but its fixed in the latest version (2.0.3, in C# at least).&nbsp; <br><br>Try grabbing that version and trying again.<br><br>Andy<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>cultofluna replied on Friday, August 04, 2006</h2>I'm using CSLA 1.0 and I can't seem to find ValidationRules.<br><br>I've tried calling BrokenRules.CheckRules(),&nbsp; however this does not do the trick. Is ValidationRules new in CSLA 2.0?<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Brian Criswell replied on Friday, August 04, 2006</h2>ValidationRules is the new form of BrokenRules in CSLA 2.0.<br><br>Could you post your DataPortal_Create() method?<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>cultofluna replied on Friday, August 04, 2006</h2>&nbsp;&nbsp;&nbsp; // called by DataPortal so we can set defaults as needed<br>&nbsp;&nbsp;&nbsp; protected override void DataPortal_Create(object criteria)<br>&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // for this object the criteria can be ignored on creation<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; _id = Guid.NewGuid();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Started = DateTime.Today.ToShortDateString();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Name = String.Empty;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp; &nbsp; //***** Added for testing<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; BrokenRules.CheckRules();<br>&nbsp;&nbsp;&nbsp; }</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Brian Criswell replied on Friday, August 04, 2006</h2>Could you post the rule handler methods you are using?<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>cultofluna replied on Friday, August 04, 2006</h2>I'm sorry I don't quite understand; You mean the following:<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; BrokenRules.Assert("NameLen", "Name too long", (value.Length &gt; 50));<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; BrokenRules.Assert("NameRequired", "Project name required", <br><br>etc.?<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Brian Criswell replied on Friday, August 04, 2006</h2>Ah, if you are going to use BrokenRules.CheckRules() you need to set up delegates for your rules instead of using BrokenRules.Assert().&nbsp; Look for examples of BrokenRules.Add on the forum or on Rocky's website in the errata for version 1.x.<br><br>http://www.lhotka.net/Article.aspx?id=12983bcf-4599-4a11-917c-72f3d473883e&nbsp; You then call BrokenRules.CheckRules("PropertyName") to check all of the rules for a property.<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>cultofluna replied on Friday, August 04, 2006</h2>Dear Brian,<br><br>Thanks alot, this is what I was looking for. I will try using it immediately and post the results...<br><br>Best regards,<br><br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Friday, August 04, 2006</h2><P>If you are using version 1.0 I recommend at least upgrading to 1.2, as some important bugs were fixed (<A href="http://www.lhotka.net/cslanet/download10.aspx">www.lhotka.net/cslanet/download10.aspx</A>) and you want those fixes.</P>
<P>However, if you upgrade to 1.3 or higher (1.53 is the latest) then you'll get an earlier version of the ValidationRules concept that is in 2.0 and that will make your life easier.</P>
<P>If you want to continue using BrokenRules.Assert(), there are some good threads on the old forum (<A href="http://www.searchcsla.com">www.searchcsla.com</A>&nbsp;to search) about ways to consolidate your rules. One common approach is to create a private CheckRules() method that contains all your Assert() calls within a swtich/Select block organized by property. This keeps the rules centralized, and allows you to relatively easily call them from each property set, and other locations in your code (like when you create a new object).</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>cultofluna replied on Wednesday, August 09, 2006</h2>Thanks for your answer. I'm sorry, I made a mistake, because I am using 1.53. At this moment I can't make the upgrade to 2005 yet, however with your tips and Brian's I think I will be able to handle this problem for now. Hoping to find out about 2.0 soon though!<br><br>Best regards<br></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
