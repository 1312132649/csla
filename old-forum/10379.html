<html><header><title>CSLA and MVVM frameworks 2011?</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>CSLA and MVVM frameworks 2011?</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/10379.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>lewischris posted on Tuesday, May 17, 2011</h2><p>I&#39;m new to MVVM and I&#39;m struggling to make a decision on which MVVM framework to adopt. We use CSLA extensively on the app server side, but not currently within our WinForms client apps which are 2-tier apps using an SOA architecture - i.e. loosely coupled from the server. Some of these apps are a bit long in the tooth, and due for update and enhancement - but we will keep the SOA architecture (i.e. we will not adopt the n-tier DataPortal model because we need the loose coupling).&nbsp; </p>
<p>I want to migrate to WPF, Silverlight, WP7 and iOS ultimately - or at least be able to have these platforms included on our roadmap.</p>
<p>I like various aspects of different MVVM frameworks:</p>
<p>* PRISM has built-in MEF and extensibility support which would be ideal - I like the IModule concept.</p>
<p>* MVVM Light seems lightweight, has a less steep learning curve than PRISM and seems to have good inter-view model messaging support.</p>
<p>* Bxf seems to be the easiest of all to adopt and obviously comes with CSLA support out of the box.</p>
<p>Does anyone have any pearls of wisdom, or better still some great code examples of CSLA integrated with MVVM frameworks other than Bxf?</p>
<p>Strategically I want to go in the right direction with this but I must admit that my shortcomings in .NET, WPF and Silverlight are making this a difficult decision!</p>
<p>Chris</p></div><div style='padding:0 15 3 15;background-color:lightgreen'><h2>tmg4340 replied on Tuesday, May 17, 2011</h2><p>Given that you&#39;re going with a pure SOA architecture, and not using CSLA on the client, the integration with any MVVM framework you choose and CSLA doesn&#39;t really matter, because there won&#39;t be any.&nbsp;&nbsp;Whichever framework you choose will communicate with your back-end via your SOA interface, not with CSLA.</p>
<p>To be honest, I think you&#39;re going to have a tough time choosing an MVVM framework that will work with all those client OS&#39;s.&nbsp; iOS is going to be the tough one - none of the popular MVVM frameworks I know of work in iOS (presumably running under Mono) - heck, I don&#39;t think Rocky&#39;s got all of CSLA working under Mono yet.&nbsp; But if you leave that out, then I think any of the ones you&#39;ve chosen will work fine.&nbsp; Bxf loses some steam given how you&#39;re going to structure your client.&nbsp; Prism is probably the one with the steepest learning curve, because it&#39;s trying to do more than the others.&nbsp; It also sometimes gets dismissed purely because it comes from Microsoft, but from what I&#39;m seeing it really isn&#39;t all that bad.</p>
<p>Presuming you&#39;re OK with a more convention-based approach, you might also look at Caliburn.Micro - based on my very informal research, it seems to be running neck-and-neck with MVVMLight as the &quot;MVVM framework du jour&quot;.&nbsp; All of them&nbsp;should work&nbsp;with all the Microsoft UI technologies, though I haven&#39;t seen much on Prism and WP7.&nbsp; There could be some issues there, given that WP7 is still basically SL3.</p>
<p>HTH</p>
<p>- Scott</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>lewischris replied on Tuesday, May 17, 2011</h2><p>Thanks for your reply Scott - it certainly helps.</p>
<p>I agree that if we are not using CSLA on the client then integration with CSLA is clearly not an issue. I don&#39;t want to close the door to using CSLA on the client, because of all the well understood reasons why we all use CSLA. Clearly we would have different objects on client and server side, but that is how we tend to do these clients anyway. Our current &#39;legacy&#39; apps do not use CSLA because they were built way before we adopted CSLA. </p>
<p>I will definitely have a look at Caliburn.Micro, thanks for the tip. </p>
<p>I am naturally attracted by PRISM simply because it is Microsoft and it uses MEF, and (perhaps) offers guidance as to how things in the composite client area will develop in .NET. </p>
<p>Chris</p>
<p>&nbsp;</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>tmg4340 replied on Tuesday, May 17, 2011</h2><p>I&#39;m not sure what you mean by &quot;Clearly we would have different objects on client and server side&quot;.&nbsp; If you&#39;re talking about the normal differences between a server-side CSLA object and a client-side CSLA object for things like Silverlight, then OK.&nbsp; But if you&#39;re talking about something else... CSLA&#39;s mobile-object concept works because the objects are essentially the same on both client and server.&nbsp; The differences between the objects because of Silverlight concerns are fairly minimal.&nbsp; Anything beyond that, and you may run into issues with the DataPortal.</p>
<p>Obviously, going to a CSLA-based client creates even more issues for iOS - just take a look at what Rocky is doing with MonoDroid and MonoTouch to see some of the issues.&nbsp; I believe he has it working, but I also believe there are some caveats.&nbsp; However, that would also give some extra &quot;oomph&quot; to considering Bxf.</p>
<p>FWIW, there were some Caliburn.Micro-compatible classes posted to the CLSAContrib site recently that are supposed to provide easier integration of the two.&nbsp; So you might take a look at those as well.&nbsp; I haven&#39;t seen anything like that for Prism, but I&#39;m betting they wouldn&#39;t be all that hard, and given Prism&#39;s overall structure, they may not be necessary.</p>
<p>As to your last point... this is purely conjecture/opinion on my part, and perhaps Rocky can step in and flesh out some more detail - he has much better contacts at Microsoft than I do.&nbsp; <img src="http://forums.lhotka.net/emoticons/emotion-1.gif" alt="Smile" />&nbsp; I wouldn&#39;t consider Prism to be indicative of much of anything vis-a-vis Microsoft&#39;s &quot;composite client area&quot; strategy.&nbsp; I&#39;m not even sure Microsoft has one, to be honest.&nbsp; The P&amp;P folks&#39; influence on Microsoft&#39;s strategic direction hasn&#39;t been that big, and I think that was&nbsp;a conscious decision.&nbsp;&nbsp;It&#39;s my opinion that Prism was more of a reaction to (a) the negativity surrounding CAB; and (b) everybody going &quot;MVVM wild&quot; but not having an &quot;official Microsoft MVVM framework&quot;.&nbsp; That second point is probably the most important, since there are&nbsp;an awful lot of shops that simply won&#39;t use anything non-Microsoft (see: Unity&nbsp;- also a P&amp;P creation.)&nbsp; Microsoft has traditionally tried not to develop anything &quot;official&quot; in this area -&nbsp;primarily because they don&#39;t want to step on their developer community, but also because doing so has ended up turning off a portion of the market.&nbsp;&nbsp;So if you&#39;re expecting portions of Prism to make their way into the .NET framework - well, I might not hold my breath on that.</p>
<p>Good luck!</p>
<p>- Scott</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Tuesday, May 17, 2011</h2><p>Scott is correct, although Prism can be very useful and can be taken as broad patterns-based guidance, it is not an official Microsoft product. It is a pseudo-open source project from the Patterns and Practices group. Generally, things from PnP should be viewed like any other open source project. If you are comfortable using open source, you should be comfortable using their stuff, otherwise don&#39;t use it.</p>
<p>Clearly you are comfortable with open source, because you use CSLA .NET. And you are looking at numerous MVVM or MVP frameworks (Prism is technically MVP, not MVVM) that are open source.</p>
<p>You might consider that one of the primary benefits of CSLA is that it grants your business domain objects full data binding capabilties. Nobody else does this. By restricting the use of CSLA to the server, you obviously can&#39;t take advantage of one of the primary features of the framework. I&#39;m not saying your choice is incorrect, but I thought I should bring this up in case you hadn&#39;t considered what you aren&#39;t able to leverage :)</p>
<p>Because you are only using CSLA on the server, your choice of client-side UI framework is entirely unaffected by your use of CSLA.</p>
<p>I think all the primary options I&#39;m aware of have been listed already:</p>
<ol>
<li>Prism</li>
<li>MVVM Light</li>
<li>Caliburn and Caliburn Light</li>
</ol>
<p>If you did decide to use CSLA to create your client-side model objects (even if they are independent from the server objects to maintain an SOA architecture and good decoupling), then your choice of UI framework might be impacted.</p>
<p>In that case you&#39;d probably do what I do, and have your viewmodel objects expose a Model property so the view can bind to the model. This radically reduces the normal (inefficient) code in the viewmodel classes, and leverages the power of CSLA and MVVM together.</p>
<p>To my knowledge all these UI frameworks can support this concept, but I&#39;m told that MVVM Light and Caliburn are easier than Prism. You might also look at the <em>super lightweight</em> Bxf framework (<a href="http://bxf.codeplex.com">http://bxf.codeplex.com</a>) that I created to support my CSLA demos. It is designed to do the absolute minimum necessary to support the MVVM pattern, and so isn&#39;t a complete UI framework. But it might be instructive anyway.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>lewischris replied on Tuesday, May 17, 2011</h2><p>By &quot;Clearly we would have different objects on client and server side&quot; what I mean is that we won&#39;t necessarily use the mobile objects capability because of our need for loose-coupling. So we could (hypothetically) have separately developed CSLA object models on client and server side that talk to each other in a loosely coupled way (e.g. using DTOs).</p>
<p>I&#39;m sure you are right about PRISM integration into .NET - perhaps what I mean is that the P&amp;P initiative has been going for some time and has a certain &#39;staying power&#39; so can (perhaps) be relied upon to be around for a while yet...</p>
<p>I have seen reference to what Rocky is doing in MonoTouch and that is really interesting. I just don&#39;t know how he finds the time to do everything he does!&nbsp; <img src="http://forums.lhotka.net/emoticons/emotion-1.gif" alt="Smile" /></p>
<p>Thanks,</p>
<p>Chris</p>
<p>ps. Just seen response from Rocky - thanks for this comprehensive answer. I have tied myself in knots with this for a few days, and I think I&#39;m going to take Scott and Rocky&#39;s advice and look again at Bxf. What I really need to get off the ground is minimal &#39;baggage&#39; so that I can get to grips with the fundamentals - then decide later on whether I need all the &#39;extras&#39; that PRISM offers.</p>
<p>&nbsp;</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JCardina replied on Tuesday, May 17, 2011</h2><p>Hi Chris, I&#39;m also new to MVVM but perhaps a little ahead of you.&nbsp; I&#39;ve looked at them all and settled on Prism.&nbsp; I think there are a few misconceptions in this thread:</p>
<p>Prism is *not* an MVVM or MVP framework and it isn&#39;t tied to MEF at all, any of the frameworks can use MEF or their own rolled approach.</p>
<p>Prism is a *lot* more than that and can happily co-exist with an actual MVVM framework like Cinch or Caliburn.&nbsp; MVVM is more how you use it than any specific framework.&nbsp; The &quot;MVVM&quot; frameworks that exist do so purely to provide assistance with coding MVVM style and it&#39;s actually a lot less than you&#39;d think.&nbsp; Mostly convenience stuff like handling modal dialogs and hooking up views and viewmodels etc.</p>
<p>Coding MVVM is more about just doing it that way.</p>
<p>If you are making a large app in a modular manner with traditional slew of app features like logging (for example) and want easy testing etc then prism might be for you.&nbsp; I chose it because there are so many examples and books on how to use it and for the maturity of what it offers.&nbsp; I took a serious look at Caliburn but couldn&#39;t find as much info on it.</p>
<p>I have a zillion links to things I found on Prism but probably the single most useful one is a set of Visual Studio templates that will generate a working MVVM application for you using either Unity or MEF (I use MEF, I think Unity is a dead end but a lot of examples use it because it came first for Prism).</p>
<p>&nbsp;</p>
<p>[EDIT: Sorry Chris after I posted I realized that for some reason this forum software doesn&#39;t automatically turn urls into clickable links as most do now]</p>
<p>&nbsp;</p>
<p>Here is a link to those templates, they are very useful because they generate a *working* MVVM application and it&#39;s a priceless reference when you&#39;re getting started:</p>
<p>http://blogs.msdn.com/b/dphill/archive/2011/03/04/prism-template-pack-1-4-now-with-mef-support.aspx</p>
<p>Also here is a checklist to follow when making a Prism 4 MVVM application:</p>
<p>http://www.codeproject.com/KB/WPF/Prism4AppChecklist.aspx</p>
<p>And an example of how to make an outlook style view switching Prism 4 MVVM application :</p>
<p>http://www.codeproject.com/KB/WPF/ViewSwitchingAppsPrism4.aspx</p>
<p>Also the tricky area of Authentication in an MVVM application, this thread contains good info and links:</p>
<p>http://compositewpf.codeplex.com/discussions/212991?ProjectName=compositewpf</p>
<p>What you will want to focus on initially if you are coming from anwyhere near where I came from is first all the XAML stuff particularly databinding etc:</p>
<p>http://www.amazon.com/WPF-4-Unleashed-Adam-Nathan/dp/0672331195</p>
<p>Then prism:</p>
<p>http://oreilly.com/catalog/0790145315496</p>
<p>And MEF on it&#39;s own, here&#39;s an excellent simple intro:</p>
<p>http://community.bartdesmet.net/blogs/bart/archive/2009/08/07/a-whirlwind-tour-through-the-managed-extensibility-framework.aspx</p>
<p>And for MEF here is a more detailed overview but not too detailed:</p>
<p>http://msdn.microsoft.com/en-us/magazine/ee291628.aspx</p>
<p>Also if you are going to support 3rd party plugins via MEF or just want to make them as loosely coupled as humanly possible you can go one step further here:</p>
<p>http://blogs.msdn.com/b/delay/archive/2011/03/09/mef-addict-combining-net-4-s-type-embedding-and-mef-to-enable-a-smooth-upgrade-story-for-applications-and-their-extensions.aspx</p>
<p>Coming from winforms you can quickly become lost in this stuff and it can seem overwhelming, take it bit by bit and make a few test applications to get the hang of it and it will start to all click.</p>
<p>As for IOS I would recommend strongly you rethink that entirely and instead look at using MVVM with Asp.net MVC and JQuery to do an html 5 interface instead so you can support all the different mobile devices.&nbsp; I know that&#39;s an unpopular view here, everyone seems to think there&#39;s some value in writing native apps for CSLA LOB applications but people in the trenches disagree completely unless there is a very specific need for a native app.</p>
<p>I&#39;ve come across something that sounds ideal for that scenario but haven&#39;t had a chance to really dig through it yet but you might find it interesting:</p>
<p>http://knockoutjs.com/</p>
<p>Cheers!</p>
<p>&nbsp;</p>
<p>&nbsp;</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>lewischris replied on Tuesday, May 17, 2011</h2><p>Thanks for all of this - I will certainly have a look at your references. The &#39;authentication&#39; one is of particualr interest, because this does seem tricky to do, and there are very few (virtually none) examples for any of the frameworks of how to do it elegantly. Rocky was kind enough to suggest an approach with Bxf on the Bxf codeplex site here: http://bxf.codeplex.com/discussions/257775</p>
<p>Point taken about PRISM not being an MVVM framework and MEF being a separate thing - down to my ignorance of the subject I&#39;m afraid to say! </p>
<p>Chris</p>
<p>&nbsp;</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JCardina replied on Tuesday, May 17, 2011</h2><p>Actually once you see the techniques the authentication is the easiest part of all! :)</p>
<p>The main problem I had was continually trying to find fully working examples that reflected a real application.&nbsp; I eventually came to realize it&#39;s kind of a wild west frontier for MVVM and you pretty much go with whatever you find works and fulfills the requirements for properly separation of concerns and inversion of control.</p>
<p>I.E. the login: there are so many ways to do this, one way is to have your modules all get a message when a user logs in or out&nbsp; or simply unload all modules on a logout and reload them on a login from the shell etc etc.&nbsp; It&#39;s all pretty much up to you.</p>
<p>The big brains that come up with frameworks rarely ever seem to do actual real world application development or at least they don&#39;t take the time to make end to end real world samples which makes learning this stuff like doing a treasure hunt.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Tuesday, May 17, 2011</h2><p>I think the big thing with MVVM is enabling automated testing of the viewmodel. I&#39;ve seen several projects where testing wasn&#39;t implemented from day one - and then couldn&#39;t be implemented later because fundamental mistakes were made in the MVVM framework design or in the viewmodel code.</p>
<p>The thing to remember - and this is what turns the world upside down - is that the viewmodel can&#39;t contain any code that relies on knowledge of the view, or of specific UI controls, or of specific UI types. Nor can it display a messagebox or otherwise directly interact with things like the navigation shell.</p>
<p>Do any of those things, and you have created untestable code - and thereby have lost the primary value of MVVM.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>lewischris replied on Wednesday, May 18, 2011</h2><p>I take your point about automated testing Rocky, and this is very much at the top of my list of priorities going forward.</p>
<p>Final two questions: </p>
<p>1. I do like what PRISM offers in terms of extensbility and it is reasonably well documented. Would it make sense, and would it work if I used Bxf as the MVVM framework <i>within</i> a PRISM IModule? Does this even make sense?</p>
<p>2. Same question but using Caliburn.Micro (thanks to Tiago for his reply) - can I use the CSLA integration that it offers, within PRISMs extensibility framework, to code IModules?</p>
<p>Anyone ?</p>
<p>&nbsp;</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>lewischris replied on Thursday, May 19, 2011</h2><p>Anyone care to help with my question - particularly 1?</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JCardina replied on Thursday, May 19, 2011</h2><p>I&#39;ll answer it if it&#39;s not still answered when I get there.&nbsp; As far as I can tell I won&#39;t need bxf at all with Prism but right now I&#39;m just working on making a working MVVM app that contains all the stuff I need in terms of the shell and infrastructure as a learning exercise.&nbsp; Once that&#39;s done I&#39;ll add my CSLA 4.x business objects to the mix and see where that takes me.</p>
<p>This stuff is still too new to find any easy answers out there from what I can tell.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JCardina replied on Thursday, May 19, 2011</h2><p>As for number two I think you&#39;re mixing up things, MEF provides all the modularity you need if you had read the link I provided about MEF and I&#39;m pretty sure Caliburn has all the MVVM stuff you need so Prism is irrelevant in that scenario.</p>
<p>CSLA basically already works with any MVVM framework, the extensions for caliburn are convenience stuff easily replicated for prism.</p>
<p>I think you&#39;re trying to find a bunch of stuff you can plug together and just have a working app, you&#39;re not going to find it, none of this stuff is plug and play by any stretch of the imagination.</p>
<p>&nbsp;</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>lewischris replied on Monday, May 23, 2011</h2><p>@ JCardina. I really appreciate your responses, and I have looked at your list of links very closely - thanks very much for taking the time to do this. I have found the &#39;ready-made&#39; PRISM app with switchable views particularly interesting and useful and am looking to use this as a possible framework within which to go forward.</p>
<p>I realise that there is no plug-and-play stuff available for all of this - as you said in one of your posts this seems a little like a wild frontier!!</p>
<p>&nbsp;</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>tiago replied on Tuesday, May 17, 2011</h2><p>Just to add my 2 cents.</p>
<p>Caliburn.Micro has a nice integration with CSLA that is available at <a href="http://cslacontrib.codeplex.com/">http://cslacontrib.codeplex.com/</a></p>
<p>Raed more about it <a href="http://forums.lhotka.net/forums/t/10178.aspx">http://forums.lhotka.net/forums/t/10178.aspx</a></p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
