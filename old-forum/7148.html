<html><header><title>Linq2CSLA:  Group By Into not working in BusinessListBase</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Linq2CSLA:  Group By Into not working in BusinessListBase</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/7148.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>amselem posted on Monday, June 22, 2009</h2>I'm running latest CSLA 3.6.3 and found that this expression returns Nothing:<br /><br /> Dim MyGroupedData = From lin In MyBusinessListBase _<br />                      Group By lin.PKey Into g = Group<br /><br /><br />This is what I found if it may help:<br /><br />It looks like that this linq expression maps to this function:<br /> _<br />Public Shared Function GroupBy(Of TSource, TKey) ( _<br />    source As IEnumerable(Of TSource), _<br />    keySelector As Func(Of TSource, TKey), _<br />    comparer As IEqualityComparer(Of TKey) _<br />) As IEnumerable(Of IGrouping(Of TKey, TSource))<br /><br /><br />CslaQueryProvider fails to map at the MethodsEquivalent function the third parameter (IEqualityComparer) and the whole expression returns nothing.<br /><br />According to MSDN: "If comparer is a null reference (Nothing in Visual Basic), the default equality comparer Default is used to compare keys.", maybe we can handle this as a special case and send Nothing?<br /></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>AaronErickson replied on Monday, June 22, 2009</h2>Thanks for finding this - I will take a look over the next couple days and see if we can handle this as a special case.  I would be curious why the mapping does not occur - maybe I can find that and not have to do a special case.<br /><br />-A</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>amselem replied on Tuesday, July 28, 2009</h2>Hi again Aaron. Any updates on this one? <br /><br />I'm still having issues when grouping BLB using the posted syntax :(</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>MikeH replied on Thursday, October 22, 2009</h2>Having same issue ... is there any resolution? Thanks</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>amselem replied on Friday, October 23, 2009</h2>AFAIK thereâ€™s no resolution, but you could workaround using  this syntax:<br /><br />Dim MyGroupedData = (From lin In MyBusinessListBase). _<br />                      GroupBy(Function(x)(x.PKey))<br /></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>AaronErickson replied on Tuesday, October 27, 2009</h2>This is what I recommend for now... sorry I lost track of this thread, but I plan to look into this this week.<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>AaronErickson replied on Sunday, November 01, 2009</h2>Hi there-<br><br>I just committed a test into the csla 3.8 branch to exercise this.&nbsp; It is not failing, but if you have a chance, maybe see what I am doing to see if perhaps there is some variation that you are doing in your case that might change things.<br><br>If you give me an updated test that manages to fail, it will expedite things.<br><br>Also, there is a good chance that this got fixed with one of the interim releases.&nbsp; A lot of detail work has been done with the methodmapper that fixed a number of grouped issues, including possibly this one.<br></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
