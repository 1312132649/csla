<html><header><title>How do I remove an item from a list</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>How do I remove an item from a list</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/8574.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>JohnH posted on Wednesday, February 24, 2010</h2><p>Hi,</p>
<p>I have a collection that derives from BusinessListBase<span style="color:#2b91af;font-size:x-small;"><span style="color:#2b91af;font-size:x-small;">. </span></span>How do I remove an item from the collection so that I can add it to another colection? When I try, it wants to mark the item as deleted and add it to the deleted list. I don&#39;t want to do this, I just want to move it to a different list.</p>
<p>Thanks.<span style="color:#2b91af;font-size:x-small;"><span style="color:#2b91af;font-size:x-small;"></span></span></p></div><div style='padding:0 15 3 15;background-color:lightgreen'><h2>ajj3085 replied on Wednesday, February 24, 2010</h2><p>Csla doesn&#39;t support that concept.&nbsp; At item can have one and only one parent in its lifetime.&nbsp; You could create a new item with the same values (but probably not the same key values) and put that in the list, then do the delete.</p>
<p>See <a href="http://forums.lhotka.net/forums/p/8090/38777.aspx#38777">this thread</a> for more details regarding the &quot;one parent&quot; statement.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RedShiftZ replied on Wednesday, February 24, 2010</h2><p>Wondering out loud here, because I did something vaguely similar in my app....</p>
<p>Could you not do something along these lines?</p>
<p>//Get the Object...</p>
<p>MyObject obj = MyList.GetObjectByID(id);</p>
<p>//Make a non list copy</p>
<p>MyObject obj2 = obj.Clone();</p>
<p>//Add the object to the new list</p>
<p>myList2.Add(obj2);</p>
<p>obj.Delete();</p>
<p>//Flush the Delete</p>
<p>myList = myList.Save();</p>
<p>//Write the new DB records</p>
<p>myList2 = myList2.Save();</p>
<p>Like I said, since I did something similar, and it works for me... I&#39;d like to know the downfall of this. (Besides the 2 database hits)</p>
<p>&nbsp;</p>
<p>&nbsp;</p></div><div style='padding:0 15 3 15;background-color:lightgreen'><h2>RockfordLhotka replied on Wednesday, February 24, 2010</h2><p>You can probably do this, as long as you know what you are doing <img src="http://forums.lhotka.net/emoticons/emotion-1.gif" alt="Smile" /></p>
<ol>
<li>Make sure the child object is not bound to a Windows Forms UI</li>
<li>Call BeginEdit() on the child item to elevate its edit level</li>
<li>You&#39;ll need a method on the source list that <i>really</i> removes an item from that list - by first removing it and then removing it from DeletedList; though this will leave the child&#39;s IsDeleted value as true</li>
<li>Call CancelEdit() on the child item to reset its IsDeleted property to false</li>
<li>Add the child to the new list</li>
</ol>
<p>Assuming you are using CSLA .NET 3.8 this should work, because when you add the child to the new list, the new list should change the Parent property and edit level to match that of the new list.</p>
<p>The only thing I don&#39;t know for sure is whether the source list will properly unbind the child&#39;s PropertyChanged and ChildChanged events. I <i>think</i> that happens when the child is moved to DeletedList, but it might not happen - because it wouldn&#39;t be really necessary - so you&#39;d have to check that.</p>
<p>The safer solution is to do a Clone() as you suggest, because the clone won&#39;t have any legacy event hookups to worry about, nor will its IsDeleted flag be set.</p>
<p>You still need to make sure to <i>completely</i> remove the old child from the original list - both the list and DeletedList, or you could find your being deleted out from under you unexpectedly when the original list is saved.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JohnH replied on Thursday, February 25, 2010</h2><p>Thanks, that seems to work OK. I&#39;m not actually using the PropertyChanged/ChildChanged&nbsp;events on this object so thats not an issue.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Thursday, February 25, 2010</h2><p><div style='padding-left: 50px;background-color:silver'><b>JohnH<br></b></p>
<p>Thanks, that seems to work OK. I&#39;m not actually using the PropertyChanged/ChildChanged&nbsp;events on this object so thats not an issue.</p>
<div style="clear:both;"></div>
<p></div></p>
<p>It doesn&#39;t matter if you use them or not - those events get hooked by the collection, and if they don&#39;t get unhooked you could end up with some really strange results and/or memory leaks.</p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
