<html><header><title>DA Video Series - Business Object Invokes DAL</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>DA Video Series - Business Object Invokes DAL</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/9106.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>Phlar posted on Friday, June 18, 2010</h2><p>Hi All,</p>
<p><span style="font-family:&#39;Arial&#39;,&#39;sans-serif&#39;;color:black;font-size:9pt;">I&#39;ve just completed watching the 4 video in the CSLA Core video series.&nbsp; We currently are utilizing the standard DataPortal_XYZ methods to retrieve our data but want to move to utilize a separate DAL (i.e. DataAccess.SQL and DataAccess.DB2).</span></p>
<p><span style="font-family:&#39;Arial&#39;,&#39;sans-serif&#39;;color:black;font-size:9pt;">Has anyone utilize this option or is the general consensus to use the ObjectFactory the way to go.<span style="mso-spacerun:yes;">&nbsp; </span>We plan on utilizing EF if that changes the decision any way.</span></p>
<p><span style="font-family:&#39;Arial&#39;,&#39;sans-serif&#39;;color:black;font-size:9pt;">Additionally, are there any examples available in constructing this DAL project with DB access (SQLExpress) available?<span style="mso-spacerun:yes;">&nbsp; </span>I&rsquo;m a little hung up on utilizing the connection manager with the DAL project but passing back the DataReader back to the BO to populate the fields.</span></p>
<p><span style="font-family:&#39;Arial&#39;,&#39;sans-serif&#39;;color:black;font-size:9pt;">Thanks,</span></p>
<p>&nbsp;</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Phlar replied on Friday, June 18, 2010</h2><p>Hi All,</p>
<p>I found the answer to my second question and corrected my issue with the DAL.&nbsp; I had missed the DpRepos project included with the Core videos.&nbsp; My mistake.</p>
<p>I would still like to know (or get a consensus) on my first question though, taking into consideration EF.</p>
<p>Object Factory vs. DP with DAL </p>
<p>Thanks All.</p></div><div style='padding:0 15 3 15;background-color:lightgreen'><h2>RockfordLhotka replied on Friday, June 18, 2010</h2><p>The thing about creating a pluggable DAL is that you need to define the contract for the DAL in a way that is independent of any specific DAL implementation.</p>
<p>IDataReader is one way to do this, because it is an interface-driven scheme. </p>
<p>Data transfer objects (DTOs) are another way to do this, because the DTOs are a consistent type regardless of the DAL implementation - but this incurs extra overhead (typically an extra data copy operation).</p>
<p>EF is hard, because it works on concrete types that are (by default) not polymorphic across different EF models. If you want to directly use EF types, you&#39;ll need to make them polymorphic by using partial classes to have them implement a set of interfaces that are consistent for all entities across your different DAL implementations. This can be done, but requires defining and working with a lot of interface types (one for each entity type).</p>
<p>But in the end, this is the key: you must have an implementation-neutral contract for the DAL, so your DP_XYZ or object factory methods can interact with this contract at all times, regardless of which concrete DAL implementation is being invoked.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Phlar replied on Friday, June 18, 2010</h2><p>Thanks for the extra insight Rocky.&nbsp; Definitely something we&#39;ll have to consider in implementing a plugable DAL with EF.</p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
