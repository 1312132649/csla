<html><header><title>Not performance when open a new connection.</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Not performance when open a new connection.</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/517.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>phucphlq posted on Friday, June 30, 2006</h2><P>I see ProjectTracker, everytime DataPortal_XX is called, a connection is opened. I think program is slowly.</P>
<P><FONT color=#008000>private void DataPortal_Fetch(Criteria criteria)<BR>&nbsp;&nbsp;&nbsp; {<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <FONT color=#ff1493>using (SqlConnection cn = new SqlConnection(Database.PTrackerConnection))</FONT><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cn.Open();<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; using (SqlCommand cm = cn.CreateCommand())<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cm.CommandType = CommandType.StoredProcedure;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cm.CommandText = "getResources";</FONT></P>
<P><FONT color=#008000>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; using (SafeDataReader dr = <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; new SafeDataReader(cm.ExecuteReader()))<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; IsReadOnly = false;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; while (dr.Read())<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ResourceInfo info = new ResourceInfo(dr);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; this.Add(info);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; IsReadOnly = false;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<BR>&nbsp;&nbsp;&nbsp; }</FONT></P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>cmellon replied on Friday, June 30, 2006</h2><P>Hi,</P>
<P>You will notice if you test this out that you only get the initial connection hit the first time you connect (and even that is minimal), any subsequent calls after that are almost instant due to connection pooling.</P>
<P>I haven't had any perfomance issues with the connection.&nbsp; </P>
<P>Regards</P>
<P>Craig</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Massong replied on Friday, June 30, 2006</h2><P>Hi,</P>
<P>CSLA is a form of disconnected data: the connection to the database should only be held open as short as possible while retrieving or storing data but not while the user works with the data or drinks a cup of coffee. This way ADO.NET can use connection pooling and can reuse closed connections.</P>
<P>Greetings,<BR>Christian</P>
<P>&nbsp;</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>cultofluna replied on Tuesday, May 08, 2007</h2>ok, so connection pooling is a smart solution. however, for my current project it is kind of disastrous... i use a remote mysql database and for every connection i make the waitingtime is approx. 8 sec!! pooling or no pooling, i would really like the possibility now to keep my connection open, but i guess this is not possible as it would break usage of the dataportal on a remote server?<br><br>any thoughts?<br></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
