<html><header><title>MVVM and the proper place to customize data to fit a particular View</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>MVVM and the proper place to customize data to fit a particular View</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/10846.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>TSF posted on Friday, November 04, 2011</h2><p>If I have a NVL object exposed to my view through a VM, and I want to add an extra item to the NVL that says &quot;Make a selection&quot; so that item can be the default in a combobox,&nbsp;should I add that extra item in the BO itself, or should I do it in my VM? I tried to add the extra item in the VM, but because the NVL is exposed as a property in a parent ReadOnlyBase UoW object I can&#39;t add items in the VM without an insert error. (Note - I&#39;m following the ProjectGetter example in Rocky&#39;s e-book.)</p>
<p>If I follow the idea that objects should be created with a specific use-case in mind, then I guess I should be okay with adding this extra item in my NVL&#39;s DP Fetch method.&nbsp; But for some reason that doesn&#39;t seem ideal.&nbsp; For example, what if the UI designer wanted to do something different to indicate to the user that he has to pick a value from the list?</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>StefanCop replied on Friday, November 04, 2011</h2><p><div style='padding-left: 50px;background-color:silver'><b>TSF<br></b>For example, what if the UI designer wanted to do something different to indicate to the user that he has to pick a value from the list?</div></p>
<p>I would treat this in the same manner as you would if the UI designer want to change labels: through localization. You also have a similar problem if he wants to change the text of validation messages or the friendly name of properties. To me it&#39;s good practice to put all texts, which an end user sees to ressources. </p>
<p>If your domain knowledge says, that the BO&#39;s property, which is bound to the combo box, should have a null value (undefined, not selected,...), the I would add it to your business NVL either right in the database or while the DP Fetch method. <br />Otherwise, I think it&#39;s more a presentation thing you want to solve, and in this case I wouldn&#39;t add in the business layer. This value doesn&#39;t intrinsically belong to your business.&nbsp;</p>
<p>To overcome the read only restriction of your list, i.e. you can <br />&nbsp; a) code an &quot;add&quot; method in your BO, that first sets the IsReadOnly temp. to false (as in DP Fetch),&nbsp; if you look at the NVL as a presenation object <br />&nbsp; b) create a simple .NET list for your presentation purpose and add there your item.</p>
<p>I usually choose b) because it often depends on the use case whether the user can select &quot;nothing&quot;. </p>
<p>&nbsp;</p>
<p>&nbsp;</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>TSF replied on Friday, November 04, 2011</h2><p>What, then, is in charge of getting that resource value injected into combo box items?&nbsp;&nbsp;In other words, what is responsible for picking up a default entry such as &quot;select a value&quot; and adding that to the items of the NVL?&nbsp; Is the object responsible since it owns the data?&nbsp; Or the VM?&nbsp; Or could the UI designer inject that in some way?&nbsp; I haven&#39;t done anything with localization before so I&#39;m not sure of how that fits in.&nbsp; Thanks for your help.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>StefanCop replied on Friday, November 04, 2011</h2><p>Ok, you meant a &quot;real&quot; combo box, in which you also type free text; and not a drop down box to choose from a fixed list. </p>
<p>The view model is in charge, I suppose.</p>
<p>In that (first) case I think the NVL is a presentation thing and you there&#39;s nothing wrong adding an item in the view model (using the IsReadOnly = false). </p>
<p>&nbsp;</p>
<p>&nbsp;</p></div><div style='padding:0 15 3 15;background-color:lightgreen'><h2>TSF replied on Friday, November 04, 2011</h2><p>Sorry, it would act as a drop down.&nbsp; I&#39;m using the combobox control in SL xaml.&nbsp; But still, maybe what you say at the end is the right way for me to go about it.&nbsp; Just set IsReadOnly = false in the object and that should the VM&nbsp;to add this default item to the list.&nbsp; Is that what you&#39;re saying?&nbsp; Thanks.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>StefanCop replied on Friday, November 04, 2011</h2><p>Yes. </p>
<p>As you might know the setter of IsReadOnly is protected. That&#39;s why you need to add the item in the BO. </p>
<p>Maybe you have two factory methods: standard GetList() and addition GetListWithUndefined(), something like that.</p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
