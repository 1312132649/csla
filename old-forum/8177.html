<html><header><title>So, are we eliminating non-generic code from CSLA 4.0?</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>So, are we eliminating non-generic code from CSLA 4.0?</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/8177.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>rxelizondo posted on Wednesday, December 16, 2009</h2>Rocky, I understand that you went ahead and eliminated non-generic data portal calls. Have you decided if you are going to eliminate other non-generic code once and for all?
<br>
<br>
Just for fun, one more reason why non-generic methods SHOULD be eliminated:
<br>
<br>
public static PropertyInfo&lt;int&gt; XyzProperty = RegisterProperty&lt;int&gt;(m =&gt; m.Xyz);
<br>public void DoIt()
<br>{
<br>    SetProperty(XyzProperty, &quot;Hey I am a string, when I should be an int, watch me crash at runtime!!!&quot;);
<br>}
<br>
<br>
Yes, I know, it’s another one of my silly pointless posts but come on, there is zero need to let something like this happen in this day in age when issues like this can be nonexistent…. At least that’s what it looks to me, please help me undestand if am I missing something.
</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>rxelizondo replied on Thursday, December 17, 2009</h2>Just&nbsp;a&nbsp;quick&nbsp;observation,&nbsp;I&nbsp;think&nbsp;the&nbsp;two&nbsp;methods&nbsp;listed&nbsp;below&nbsp;(generic&nbsp;and&nbsp;non&nbsp;generic&nbsp;equivalents)&nbsp;should&nbsp;return&nbsp;the&nbsp;same&nbsp;value&nbsp;but&nbsp;they&nbsp;don&#x2019;t.&nbsp;&nbsp;<br /><br />Perhaps&nbsp;there&nbsp;is&nbsp;a&nbsp;good&nbsp;reason&nbsp;they&nbsp;are&nbsp;implemented&nbsp;the&nbsp;way&nbsp;they&nbsp;are&nbsp;but&nbsp;I&nbsp;just&nbsp;figure&nbsp;I&nbsp;bring&nbsp;them&nbsp;up&nbsp;to&nbsp;your&nbsp;attention&nbsp;(Csla.Core.BusinessBase).<br /><br />protected&nbsp;P&nbsp;ReadProperty&lt;P&gt;(PropertyInfo&lt;P&gt;&nbsp;propertyInfo)<br />protected&nbsp;object&nbsp;ReadProperty(IPropertyInfo&nbsp;propertyInfo)<br /><br />You&nbsp;can&nbsp;tell&nbsp;right&nbsp;away&nbsp;what&#x2019;s&nbsp;the&nbsp;issue&nbsp;by&nbsp;just&nbsp;looking&nbsp;at&nbsp;the&nbsp;code&nbsp;for&nbsp;the&nbsp;methods&nbsp;but&nbsp;I&nbsp;just&nbsp;created&nbsp;a&nbsp;little&nbsp;test&nbsp;app&nbsp;just&nbsp;for&nbsp;clarity.<br /><br />private&nbsp;static&nbsp;PropertyInfo&lt;int&gt;&nbsp;XyzProperty&nbsp;=&nbsp;RegisterProperty&lt;int&gt;(m&nbsp;=&gt;&nbsp;m.Xyz);<br />public&nbsp;void&nbsp;DoIt()<br />{<br />&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;nonGen&nbsp;=&nbsp;ReadProperty((Csla.Core.IPropertyInfo)XyzProperty);<br />&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;yesGen&nbsp;=&nbsp;ReadProperty&lt;int&gt;(XyzProperty);<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;Debug.Assert(object.Equals(nonGen,&nbsp;yesGen),&nbsp;&quot;Why&nbsp;did&nbsp;we&nbsp;get&nbsp;here??&quot;);<br />}<br /></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Thursday, December 17, 2009</h2>Hmm, I wonder if removing the non-generic overload would limit extensibility around IPropertyInfo.</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>rxelizondo replied on Thursday, December 17, 2009</h2>Note that regarding the ReadProperty post&#x2026; for that particular post, I didn&#x2019;t mean to say that the non generic method should be removed but more than in my mind (and for consistency), the return values should be the same for both of them (other than one has the potential of returning a boxed value type). I didn’t really take the time to dig in on how this methods are used by the framework.

<br /> <br />I am perfectly aware that there are times when a non generic interface is needed to account for the lack of generic covariance and contra-variance support on the current versions of the framework, so I am ok with the non-generic support.


<br /><br />If each ReadProperty supposed to work the way it does then I think it would be more appropriate to rename the method just to avoid the confusion or if it&#x2019;s meant to only be used by the framework then perhaps change the scope to internal.<br /></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>rfcdejong replied on Sunday, December 20, 2009</h2>We are using some reflection for dynamic business properties which require the non-generic IPropertyInfo.</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Sunday, December 20, 2009</h2>CSLA itself uses the non-generic IPropertyInfo in some cases. Generics are not polymorphic, so it is important to have some generic base type or interface for nearly all generic types.</div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
