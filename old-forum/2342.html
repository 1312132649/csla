<html><header><title>OT:  Databinding</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>OT:  Databinding</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/2342.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>SultanOfSuede posted on Wednesday, February 14, 2007</h2>The data binding for objects in .net 2.0 looks powerful, but I've noticed that all the samples studiously avoid cases where the properties of the objects being bound are something other than primitive types.<br><br>If I have a Customer class with a property of type Address, then binding to a grid becomes problematic.&nbsp; At run time, the Customer.Name property will bind to a column but the Address will have its ToString() method called and I get something like MyCompany.Library.Address instead of what I really want, the Address.StreetOne property.&nbsp;&nbsp; I've not seen anything in the designers&nbsp; that will allow me to bind to a child object's property.&nbsp; <br><br>If I want to have a grid that just shows this:<br><br>Customer Name&nbsp; &nbsp;&nbsp;  Address<br>------------------------------------------------------<br>John Doe&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 123 Main St.<br><br>How do I specify that Address is really referring to Address.StreetOne?&nbsp; <br><br>Are people just flattening their bound objects instead?<br><br>Thx in advance<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Brian Criswell replied on Wednesday, February 14, 2007</h2>Working off of the top of my head, you should just be able to bind to Customer.Address.StreetOne.<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>McManus replied on Wednesday, February 14, 2007</h2><P>Hi,</P>
<P>I think Brian is right. I've not used it in a grid, but I was able to bind Customer.Address.StreetOne (at least something similar)&nbsp;to the Text property of a TextBox.</P>
<P>Cheers,</P>
<P>Herman</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>robert_m replied on Thursday, February 15, 2007</h2><P>Hi everyone</P>
<P>Yes, you can bind a TextBox to Customer.Address.StreetOne but you can not bind a grid column to a child object (nested)&nbsp;property. I tried this with both MS DataGridView and DevExpress grid and it doesn't work (you get empty cells).</P>
<P>For the time being, I use additional properties in CSLA objects, for instance if you want to see Customer.Address.Street in datagrid you can always create additional&nbsp;string property in Customer class&nbsp;like this:</P>
<P>public string AddressStreet</P>
<P>{</P>
<P>&nbsp;&nbsp;&nbsp;get { return Address.Street; }</P>
<P>}</P>
<P>This is a bit awkward and it diminishes the elegance of code :), but&nbsp;it works..&nbsp;</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>DansDreams replied on Thursday, February 15, 2007</h2><P>I'm not clear, are you trying to bind the <EM>whole</EM> child object to the column, or are you saying simply that you can't enter Customer.Address.StreetOne as the binding source for a column?</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Thursday, February 15, 2007</h2>You could also create a second BindingSource, and set its datasource property equal to the object.Childbobject.&nbsp; In design time, you just set the datasource for the bindingsource to the ChildObject class.&nbsp; That should allow you to work with the databinding in the designer as you'd expect.<br><br>HTH<br>Andy<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>SultanOfSuede replied on Thursday, February 15, 2007</h2>For grids, I found a couple of solutions by consulting technical support at Infragistics. I'm not sure whether it would work for all grids, but I offer it here as a resource.<br><br>You can override the ToString() method of each object to return only the property.&nbsp; By default, when bound, the child reference property (Customer.Address) just emits its type as a string, so the column ends up with MyCompany.MyApp.Customer.Address.&nbsp; Overriding the ToString() to return StreetOne of the Address object will instead show something like "123 Main Street."&nbsp; This works in a pinch but is not elegant.<br><br>The second and more cumbersome approach involves using unbounded columns in addition to the bound columns.&nbsp; With the Infragistics UltraWinGrid, you simply write code in InitializeLayout event that adds an additional column(s) to your grid.&nbsp; These will show the actual values of the child properties.&nbsp; The original bound column (Customer.Address) has to be hidden so that the unbounded column can show its primitive property (Customer.Address.StreetOne).<br><br>Next, you have to write a handle for the InitializeRow event.&nbsp; This is where you will actually assign the property values to the columns added in the previous step.&nbsp; This works because the event fires for each row as its added to the grid.&nbsp; The Value property of each cell is of type object and can be cast to the exact type it's actually bound to at runtime.&nbsp; From there, you can get the property you need.<br><br>Here's a code snippet:<br><br><font size="1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; void lstCustomers_InitializeRow(object sender, Infragistics.Win.UltraWinGrid.InitializeRowEventArgs e)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; e.Row.Cells["Address"].Value = ((Address)e.Row.Cells["Address"].Value).StreetOne;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }&nbsp;  </font><br><br>The final grid would look like this, with the last column being generated through the sample code just given:<br><br>Customer &nbsp;&nbsp;  &nbsp;&nbsp;  Address (hidden object)&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; Address.StreetOne (unbounded column)<br>-------------------------------------------------------------------------------------------------------<br>John Doe&nbsp;&nbsp;  &nbsp;&nbsp;  MyCompany.MyApp.Customer.Address &nbsp;&nbsp;&nbsp;  &nbsp;&nbsp;&nbsp; 123 Main St.<br><br>HTH,<br><br>Ian<br></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
