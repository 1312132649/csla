<html><header><title>Edit level mismatch in AcceptChange: Winform</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Edit level mismatch in AcceptChange: Winform</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/8024.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>simon posted on Friday, November 20, 2009</h2>I have a root BO with two child BO:<br /><br />RootBO:<br />   public class TechDoc : BusinessBase<br />    {<br /><br />        #region Business Methods<br />        private static PropertyInfo RowIdProperty = RegisterProperty(c => c.RowId);<br />        public int RowId<br />        {<br />            get { return GetProperty(RowIdProperty); }<br />            set { SetProperty(RowIdProperty, value); }<br />        }<br />      <br />        private static PropertyInfo RelDocProperty = RegisterProperty(c => c.RelDoc);<br />        public Document RelDoc<br />        {<br />            get<br />            {             <br />                return GetProperty(RelDocProperty);<br />            }<br />            set<br />            {<br />                SetProperty(RelDocProperty, value);<br />            }<br /><br />        }<br /><br />   public class Document : BusinessBase<br />    {<br />       <br />        #region Business Methods<br /><br />        private static PropertyInfo DocIdProperty = RegisterProperty(c => c.DocId);<br />        public Guid DocId<br />        {<br />            get { return GetProperty(DocIdProperty); }<br />            set { SetProperty(DocIdProperty, value); }<br />        }<br />     <br />        private static PropertyInfo LeafNameProperty = RegisterProperty(c => c.LeafName);<br />        public string LeafName<br />        {<br />            get { return GetProperty(LeafNameProperty); }<br />            set { SetProperty(LeafNameProperty, value); }<br />        }<br /><br />        private static PropertyInfo SizeProperty = RegisterProperty(c => c.Size);<br />    <br />    <br />        #endregion<br /><br />        #region Validation Rules<br /><br />        protected override void AddBusinessRules()<br />        {<br />            // TODO: add validation rules<br />        }<br /><br />        #endregion<br />    <br /><br />        public static Document NewChildDocument()<br />        {<br />             return DataPortal.CreateChild();<br />        }<br /><br />        public static Document GetChildDocument(int listId,int docLibRowId,bool? orginFlag)<br />        {            <br />           Document obj= DataPortal.FetchChild(new Criteria(listId, docLibRowId, orginFlag));<br />            if (obj.DocId ==Guid.Empty)<br />               return null;<br />            else<br />                return obj ;<br /><br />        }<br /><br />    <br />        private Document()<br />        {  /* Require use of factory methods */ }<br /><br />        #endregion<br />        #region Data Access<br />       [RunLocal ]<br />        protected override void Child_Create()<br />        {<br />            using (BypassPropertyChecks)<br />            {<br />                DocId = Guid.NewGuid();<br />            }<br />        }<br /><br /><br />        private void Child_Fetch(Criteria criteria)<br />        {<br />            using (var ctx = ContextManager.GetManager(MES.DalLinq.Database.Document))<br />            {<br />                var d = (from i in ctx.DataContext.ALLDoc<br />                         where i.ListId == criteria.Id &amp;&amp; i.DoclibRowId == criteria.DocLibRowId &amp;&amp; i.OriginFlag == criteria.OriginFlag<br />                         select i).SingleOrDefault();<br />                if (d != null)<br />                {<br />                    using (BypassPropertyChecks)<br />                    {<br />                        DocId = d.DocId;<br />                        LeafName = d.LeafName;<br />                                            <br />                    }<br />                }<br />                <br />                <br />            }<br />        }<br /><br /><br />in winform<br /><br />     private void InitBinding()<br />        {<br />            hyperLinkEdit1.DataBindings.Add("EditValue", techDocBindingSource, "RelDoc.LeafName" l);<br />      <br />            textEdit7.DataBindings.Add("EditValue", techDocBindingSource, "RelDoc.Size");<br />               <br />        }<br /><br />   private void sbAttachRelease_Click(object sender, EventArgs e)<br />        {<br />            Document doc = Common.OpenFileDialog("");<br />            if (doc != null)<br />            {<br />                if (_TechDoc.RelDoc == null)<br />                    _TechDoc.RelDoc = MES.Library.DMS.Document.NewChildDocument();<br />                _TechDoc.RelDoc.LeafName = doc.Name;<br />                _TechDoc.RelDoc.Extension = doc.Ext;<br />                _TechDoc.RelDoc.OriginFlag = false;<br />                _TechDoc.RelDoc.Size = doc.Size;<br />                _TechDoc.RelDoc.DocContent = doc.Stream;<br /><br />            }<br />        }<br /><br /><br /><br />   protected bool Save()<br />        {<br />            bool ret = false;<br />            try<br />            {<br />                BaseBindingSource.EndEdit();<br /><br />                BindingTree.Apply();<br /><br /><br />                BaseBO = (BaseBO as ISavable).Save();<br />                ret = true;<br />            }<br />            catch <br />            {<br />                //MessageBox.Show(ex.Message);<br />                ret = false;<br />                throw;<br />            }<br /><br />            return ret;<br />        }<br /><br />###########################################<br />when call the save. rasie error:Edit level mismatch in AcceptChanges<br />how can i solve it! help me.<br /></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
