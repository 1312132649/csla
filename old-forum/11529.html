<html><header><title>How to tell if business object was created/fetched async?</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>How to tell if business object was created/fetched async?</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/11529.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>jhardman posted on Tuesday, August 14, 2012</h2><p>Is there a way to tell if an editable business object was created/fetched async?&nbsp; I am looking into the idea of lazy loading child lists async or sync depending on how the business object was instantiated.&nbsp; At first I thought of using a similar method as running business runs async or sync:</p>
<pre style="font-family:Consolas;background:white;color:black;font-size:13px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:blue;">if</span>&nbsp;(System.Web.<span style="color:#2b91af;">HttpContext</span>.Current&nbsp;!=&nbsp;<span style="color:blue;">null</span>)
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IsAsync&nbsp;=&nbsp;<span style="color:blue;">false</span>;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:blue;">else</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IsAsync&nbsp;=&nbsp;<span style="color:blue;">true</span>;</pre>
<p>However the problem with this logic is that if running in web context then it is sync.&nbsp; What about running in Windows Service?&nbsp; I can&#39;t wait for the lazy loaded child collection to return at some point in the future and set its property since there are no UI bindings.</p></div><div style='padding:0 15 3 15;background-color:lightgreen'><h2>RockfordLhotka replied on Tuesday, August 14, 2012</h2><p>You would need to pass that bit of info via a criteria object. Or in ClientContext. There is no automatically passed vale that tells the server side code that the client did an async call.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>jhardman replied on Wednesday, August 15, 2012</h2><p>Thanks, I was hoping there may have been a way with DataPortal.BeginFetch to raise an event or call a method in the business object that I could override.</p>
<p>I have never used ClientContext and don&#39;t know what it is or what it does. Can you point me in the right direction or which ebook covers it?</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JonnyBee replied on Wednesday, August 15, 2012</h2><p>I think this should rather be a config setting on the client as to whether <em>client&nbsp;data access/lazy load child</em> &nbsp;should be async or sync.&nbsp; </p>
<p>I don&#39;t like the ideat that the object itself must keep track of how it was created from the client.&nbsp;</p>
<p>Remember, with the new async/await keywords in .NET 4.5/4.0 you can also use async data portal / data access in ASP.NET application and WCF services. </p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JonnyBee replied on Wednesday, August 15, 2012</h2><p>Then there&#39;s also at least 2 different types of async:</p>
<ol>
<li>The client makes an async <strong>DataPortal.XYZAsync</strong> call to a sync DataAccess&nbsp;</li>
<li>The DataAccess is async,&nbsp;ex: <strong>DataPortal_XYZ</strong> methods in the BO&nbsp;return a Task&lt;T&gt; (no matter if the client did a sync or async call)</li>
</ol>
<p>(This is all similar to how WCF 4.5 client and server works too!)</p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
