<html><header><title>BusinessListBase parent reference</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>BusinessListBase parent reference</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/4738.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>wch posted on Tuesday, April 22, 2008</h2><P>Hi, I'm new to CSLA. I have read Rocky's&nbsp;Expert C# 2005 Business Objects&nbsp;and&nbsp;have recently&nbsp;started using&nbsp;CSLA 3.5. I'm trying to&nbsp;use the&nbsp;Parent property in&nbsp;my ScheduleList BusinessListBase with the following BO hierarchy ...</P>
<P>Schedule - BB</P>
<P>--ScheduleList - BLB</P>
<P>-----ScheduleDay - BB</P>
<P>&nbsp;</P>
<P>I would like to&nbsp;use a property contained in Schedule&nbsp;for some ScheduleDay validation logic&nbsp;and thought that if I exposed the ScheduleList Parent property&nbsp;to ScheduleDay this might work. When I examine ScheduleList's Parent property&nbsp;when ScheduleDay's validation method&nbsp;executes, it is null. I tried manually setting ScheduleList's Parent property right after&nbsp;loading the list&nbsp; and&nbsp;overriding OnDeserialized&nbsp;&nbsp;but &nbsp;OnDeserialized is called after ScheduleDays validation logic executes so this won't work. Is there&nbsp;an&nbsp;event&nbsp;in&nbsp;Schedule that I could&nbsp;use to set ScheduleList's Parent&nbsp;before ScheduleDay's validation fires?&nbsp;Is this a wrong approach to reference root BO properties in a child BO?</P>
<P>Thanks much.</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Wednesday, April 23, 2008</h2><P>In CSLA 3.5, assuming you are using the new technique for declaring child properties, the Parent property should be set automatically.</P>
<P>But if you are using the 3.0 technique for declaring child properties, where you declare your own private field, then Parent would be null, because in 3.0 you had to manage all those details yourself.</P>
<P>To use the 3.5 features for child objects, your child property should be something like:</P>
<BLOCKQUOTE dir=ltr>
<P>private static PropertyInfo&lt;ChildType&gt; ChildProperty =<BR>&nbsp; RegisterProperty&lt;ChildType&gt;(typeof(ParentType),<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;new PropertyInfo&lt;ChildType&gt;("Child"));<BR>public ChildType Child<BR>{<BR>&nbsp; get { return GetProperty&lt;ChildType&gt;(ChildProperty);&nbsp;}<BR>}</P></BLOCKQUOTE>
<P>This allows CSLA to manage the child reference, including setting the Parent property value.</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>wch replied on Wednesday, April 23, 2008</h2>Thanks for the tip! I still had properties using the&nbsp;old&nbsp;declaration method.&nbsp; Your model&nbsp;is a great way to explore new features in .NET 3.5 ... thanks for what you do&nbsp;<img src="/emoticons/emotion-1.gif" alt="Smile [:)]" /></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
