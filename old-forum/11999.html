<html><header><title>Business process and process object - Best practices?</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Business process and process object - Best practices?</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/11999.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>ColourHaze posted on Thursday, May 30, 2013</h2><p><span style="font-size:9pt;font-family:&#39;Arial&#39;,&#39;sans-serif&#39;;color:black;mso-ansi-language:EN-GB;" lang="EN-GB">Hello,</span></p>
<p><span style="font-size:9pt;font-family:&#39;Arial&#39;,&#39;sans-serif&#39;;color:black;mso-ansi-language:EN-GB;" lang="EN-GB">I&rsquo;m trying to grasp the concept of modelling a business process using CSLA.NET. As far as I understand the concept of business objects the golden rule is all about finding, centralizing and encapsulating behaviour. <span style="mso-spacerun:yes;">&nbsp;</span></span></p>
<p><span style="font-size:9pt;font-family:&#39;Arial&#39;,&#39;sans-serif&#39;;color:black;mso-ansi-language:EN-GB;" lang="EN-GB">But what happens when the business object is part of a process, or in other words, what if the business object is the entity moving through the business process? In this case it seems unnatural to place the behaviour of the process inside the object, as the process describes the workflow for an object and not the other way around.</span></p>
<p><span style="font-size:9pt;font-family:&#39;Arial&#39;,&#39;sans-serif&#39;;color:black;mso-ansi-language:EN-GB;" lang="EN-GB">Point 5 of Rocky&#39;s post on deciding to use (or not use) CSLA.NET (</span><span style="font-size:9pt;font-family:&#39;Arial&#39;,&#39;sans-serif&#39;;color:black;"><a href="http://www.lhotka.net/Article.aspx?id=40048e03-6f9e-44a4-8322-80cb5de8303a"><span style="mso-ansi-language:EN-GB;" lang="EN-GB"><span style="color:#0000ff;">http://www.lhotka.net/Article.aspx?id=40048e03-6f9e-44a4-8322-80cb5de8303a</span></span></a></span><span style="font-size:9pt;font-family:&#39;Arial&#39;,&#39;sans-serif&#39;;color:black;mso-ansi-language:EN-GB;" lang="EN-GB">) he wrote:</span></p>
<p><span style="font-size:9pt;font-family:&#39;Arial&#39;,&#39;sans-serif&#39;;color:black;mso-ansi-language:EN-GB;" lang="EN-GB">&quot;An extension of a command object is a process object, that orchestrates a complex business process or workflow through the use of entity business objects.&quot;</span></p>
<p><span style="font-size:9pt;font-family:&#39;Arial&#39;,&#39;sans-serif&#39;;color:black;mso-ansi-language:EN-GB;" lang="EN-GB">The command object is quite obvious of course, but what about the process object? It doesn&rsquo;t seem like a pattern is defined for this. At first I thought it matched the state pattern or chain of responsibility, but that doesn&rsquo;t seem to be the case. </span></p>
<p><span style="font-size:9pt;font-family:&#39;Arial&#39;,&#39;sans-serif&#39;;color:black;mso-ansi-language:EN-GB;" lang="EN-GB">I also found a nice pattern called the sequential execution orchestrator pattern (</span><span style="font-size:9pt;font-family:&#39;Arial&#39;,&#39;sans-serif&#39;;color:#333333;mso-ansi-language:EN;" lang="EN"><a href="http://codereview.stackexchange.com/questions/25435/sequential-execution-orchestrator-pattern"><span style="color:#0000ff;">http://codereview.stackexchange.com/questions/25435/sequential-execution-orchestrator-pattern</span></a></span><span style="font-size:9pt;font-family:&#39;Arial&#39;,&#39;sans-serif&#39;;mso-ansi-language:EN;" lang="EN">) which might be useful. I still need to test this one however.</span></p>
<p><span style="font-size:9pt;font-family:&#39;Arial&#39;,&#39;sans-serif&#39;;mso-ansi-language:EN;" lang="EN">The use of course of WWF doesn&rsquo;t seem like a real option. I have the feeling that is just a temporary thing, and that a more &ldquo;raw&rdquo; approach is much cleaner.</span><span style="font-size:9pt;font-family:&#39;Arial&#39;,&#39;sans-serif&#39;;mso-ansi-language:EN-GB;" lang="EN-GB"></span></p>
<p><span style="font-size:9pt;font-family:&#39;Arial&#39;,&#39;sans-serif&#39;;mso-ansi-language:EN-GB;" lang="EN-GB">So I&rsquo;m curious how you guys would approach this scenario? Are there best practices, patterns, or anything like that within the world of OO?</span></p>
<p><span style="font-size:9pt;font-family:&#39;Arial&#39;,&#39;sans-serif&#39;;mso-ansi-language:EN-GB;" lang="EN-GB">Thanks in advance for your response,</span></p>
<p><span style="font-size:9pt;font-family:&#39;Arial&#39;,&#39;sans-serif&#39;;mso-ansi-language:EN-GB;" lang="EN-GB">Best regards,</span></p>
<p><span style="font-size:9pt;font-family:&#39;Arial&#39;,&#39;sans-serif&#39;;mso-ansi-language:EN-GB;" lang="EN-GB">Peter</span></p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Friday, May 31, 2013</h2><p>The &#39;Using CSLA 4: Business Object Implementation&#39; ebook discusses this topic at some length, covering key concepts such as a command object and a unit of work object.</p>
<p>CSLA has the CommandBase class that is designed to support scenarios where the object model must represent an action with little or no data in the object model itself.</p>
<p>It is also very common to use ReadOnlyBase to implement scenarios where numerous objects must be retrieved as a unit. Although you can implement this with a CommandBase too, it is more efficient to use a ReadOnlyBase for pure object retrieval scenarios.</p>
<p>But those concepts focus primarily on the business object model exposed to the presentation layer, and they work well for scenarios where the user (or in broader terms the caller) will be waiting for the results of the operation. If you need truly async batch operations on the server then you need more components in the picture.</p>
<p>Specifically, if you use a command object to launch an async batch process, that batch process must run in some server-side host process that won&#39;t get recycled. That rules out hosting in IIS. Remaining options include:</p>
<ul>
<li>A custom Windows service you create</li>
<li>A COM+ MSMQ listener</li>
</ul>
<p>How you implement the batch process that runs inside your host process, and how you trigger that host process to actually start is largely up to you.</p>
<p>If you use an MSMQ listener Microsoft handles the triggering part for you, but you still need to write the code that processes the MSMQ message. If you create your own daemon (Windows service) you can trigger in many ways, including:</p>
<ul>
<li>Manually reading from an MSMQ queue</li>
<li>Reading from a .NET Service Bus queue</li>
<li>Reading from a database table that you treat like a queue</li>
</ul>
<p>Again, once you&#39;ve realized there&#39;s work to be done by reading something from a queue/table you still need to write the code that processes the message.</p>
<p>To process the message you have many options. You might:</p>
<ul>
<li>Fire off a workflow using Windows Workflow</li>
<li>Run some normal .NET code written in C#/VB</li>
</ul>
<p>I&#39;m not a big proponent of WF, so personally I tend to gravitate toward the use of normal .NET code for these sorts of thing.</p>
<p>Either way though, your .NET code or your WF tasks (written in .NET too btw) can make use of your CSLA business classes if that makes sense.</p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
