<html><header><title>CSLA used in MVP or MVVM</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>CSLA used in MVP or MVVM</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/8519.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>TEden posted on Thursday, February 11, 2010</h2><p>Hello,</p>
<p>I am looking for an example app that anyone my point me to where CSLA is implemented in an MVP or MVVM presentation pattern.&nbsp; I feel confident enough, thanks to Rocky&#39;s explanations in posts and his video series (thanks for that btw) that the data access can be abstracted and de-coupled from the business layer, however I am struggling to find a decent example where the presentation logic has been done the same.</p>
<p>I am architecting a solution that will require not only webform clients, but also xaml clients and I would really like to have one business layer coupled loosely to the presentation logic, presentation logic that is ideally not repeated to host multiple views.&nbsp; I am very new to CSLA, and the existing application is a mess of classic asp, asp.net and zero concept of layer or separation of concerns.&nbsp; I have to fix all that and provide a solution that is capable of adapting to new ui platforms of the future.&nbsp; </p>
<p>My first reaction was MVP, I have have implemented supervising controller solutions many times in the past and thought a passive view would easily solve this problem, however the more I learn about MVVM the more I am liking this approach.&nbsp; IMO, it&#39;s a much more familiar model I can teach my developers as the VM is really just an adapter to the view, much like other .Net concepts.&nbsp; I also feared that I would have to be forced to re-factor smart business objects into an anemic model, but I don&#39;t think that is the case any longer.&nbsp; I am concerned though I will not be able to support webforms and xaml (or other) without duplicating presentation logic just to adapt to multiple views though at the same time, perhaps seperate VM&#39;s is actually a good design since the VM is not abstracting the Model, but instead it&#39;s purpose is to abstract the view?&nbsp; </p>
<p>So in short, does anyone have any thoughts on how best to leverage CSLA, be domain driven and have a clear SoC specifically at the presentation layer?</p>
<p>Is it possible to create a presentation layer that is view independent and at the same time leverage concepts like databinding while maintaining a clear separation of concerns and is MVVM, MVP or another pattern best suited for this?&nbsp; Perhaps I am asking too much, I mean if I can solve this we could be almost future proof as technologies change.&nbsp; I could really use an example, I know one was requested in a previous post but I did not see an answer.</p>
<p>thank you very much</p></div><div style='padding:0 15 3 15;background-color:lightgreen'><h2>RockfordLhotka replied on Thursday, February 11, 2010</h2><p>The challenge I&#39;ve been facing in building an MVVM sample is two-fold.</p>
<p><ol>
<li>MVVM is a pattern, not a UI framework - and you can&#39;t <i>really</i>&nbsp;implement the pattern without a UI framework - and I&#39;ve been hesitant to build out the necessary UI framework elements (and surely don&#39;t plan to include them in CSLA)</li>
<li>I&#39;ve been waiting for the XAML designer in VS10 to mature - though with the RC out now that excuse is no longer valid <img src="http://forums.lhotka.net/emoticons/emotion-5.gif" alt="Wink" /> - because if I do give in and build out the necessary UI framework elements, I want them to work within the context of the VS10 designer, which imposes some constraints on how the View and ViewModel interact, because of the way it generates the XAML and supporting constructs</li>
</ol></p>
<p>That said, for the <a href="http://www.codemastery.com">Code Mastery</a> event today I did build a decent start on a VS10 MVVM sample. I&#39;m still trying to figure out some of the&nbsp;idiosyncrasies&nbsp;around the VS10 designer, so while I have a working sample, I&#39;m not real happy because I did have to manually type some XAML - and that&#39;s just not right... (imo)</p>
<p>The thing is, an MVC or MVVM UI framework does a lot of work, so the business developer only has to create the M, V, C or VM. The UI framework, at a minimum, must handle message routing, rendering and (in the case of XAML) some enhanced form of commanding. Without these things, you can&#39;t get testability of the VM - which is the ultimate goal of using MVVM (or test the C in MVC).</p>
<p>ASP.NET MVC is a good example of a framework that does robust message routing and has a rendering engine (the thing that invokes the controller and renders the view returned by each controller method). A business developer never really thinks about these elements - they are &quot;part of the platform&quot;, but they are very real.</p>
<p>No such thing exists in XAML - not natively. So you must either adopt an existing UI framework or build one.</p>
<p>You might (and probably should) choose to adopt an existing UI framework - which means they&#39;ll provide those elements, along with constraints on your V and VM (at a minimum) based on the design choices made by the UI framework developer.</p>
<p>For my purposes, I want to deeply understand the nature of these elements, and so my new sample includes simplistic (but functional) message routing and rendering so the VM can be executed outside of a XAML environment (e.g. in a unit testing environment).</p>
<p>I haven&#39;t put this sample in svn yet, because I literally just created it, and as I said, I&#39;m not happy with some of how it works - my goal is to avoid manual editing of XAML and I&#39;m just not there yet...</p>
<p>I rather suspect any other UI frameworks you find won&#39;t worry about manual editing of XAML - up to VS10 you <i>had to edit XAML</i>&nbsp;because there was no designer. But I hope that over the next several months we&#39;ll start to see UI frameworks that build off the VS10 designer concepts, making it possible to build decent business apps without the need to see or manipulate XAML by hand.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Heinz replied on Tuesday, April 13, 2010</h2><p>Hi,</p>
<p>there is a very good example at</p>
<p><a href="http://beyondthispoint.blogspot.com/2009/02/using-repository-pattern-with-cslanet.html">http://beyondthispoint.blogspot.com/2009/02/using-repository-pattern-with-cslanet.html</a></p>
<p>It&#39;s a complete example with a MVP approach, using the Repository Pattern and Unity for Unit Tests.<br />It&nbsp;shows how to load the CSLA Objects automatically into the Unity Container. There&nbsp;is&nbsp;also UI Testcode, that tests the MVP</p>
<p>The UI is a windows form one, but it may give you a clue how to do it. </p>
<p>Kind regards <br />Heinz</p>
<p>&nbsp;</p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
