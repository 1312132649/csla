<html><header><title>Some UI design questions</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Some UI design questions</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/2125.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 posted on Thursday, January 11, 2007</h2>HI all,<br><br>I have now two applications (exe) that I will be supporting.&nbsp; Both operate on the same database and they share a number of screens.&nbsp; Both use a Software business library and Contacts business library.&nbsp; <br><br>To get things going more quickly, I copied the forms from one application into the other so that they are totally seperate.&nbsp; Obviously this isn't ideal, but I can deal with it for now.<br><br>In the very near future though, I'm thinking of moving most of the forms into UI assemblies, based functional areas.&nbsp; So the screens relating to software would be Software.UI, contact screens would be in Contacts.UI, etc.<br><br>Now, some of the forms currently are dependant on each other.&nbsp; For example, the SerialNumberFind form uses the CompanyFind and DepartmentFind forms so that the user can select a department as search criteria to find all serial numbers belonging to a department.&nbsp; Likewise, SoftwareRegistrationEdit form uses ContactFind form so that the user may lookup an existing contact to for the registration information.<br><br>I'm trying to decide if I should keep these seperate.&nbsp; One advantage is that there's actually a third business library which one of the apps will never need access to, and thus wouldn't have an dependancies on it.&nbsp; Another is that it keeps each assembly smaller and hopefully easier to understand.&nbsp; To break the dependencies, the SoftwareRegistrationForm could have an event, ContactRequest to request that a contact be provided by someone else (likely the main form).&nbsp; <br><br>Alternately, all the screens could be tossed into one assembly.&nbsp; Then applications would just use this one assembly.&nbsp; One advantage is that if an app every needs a UI already defined in the common UI assembly, its already there.<br><br>What does everyone think?&nbsp; I'm leaning toward the seperate route.&nbsp; I'll have other 'applications' later, and it seems like it would be easiser to only select functional areas I need.<br><br>Thanks<br>Andy<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>rlarno replied on Friday, January 12, 2007</h2>Andy,<br><br>Just my 0.02â‚¬<br><br>I would focus on having your components (UI or otherwise) clearly seperated in different namespaces. I always tend to start out putting everyting in a single project (~ assembly) since this keeps things very simple to refactor and move code around. I use project folders a lot to keep the code visually strutured, following the namespaces used.<br><br>Splitting items up into seperate assemblies, is a decision to be made because of deployment choices. For web applications, I tend to stick to as minimal assemblies as possible. For Windows Applications, it really depends on keeping the features that will always be used together in the same mininal set of assemblies. E.g. the main form uses component a, b, and c, and classes x, y, z, so if all of these live in the same assembly, these all get loaded from disk immediatly. Optional features, one-time configuration wizards, or option screens, or help or about stuff, can live in a seperate assembly, which will not be loaded until the funtionality is required. This sort of splitting up code into assemblies can help manage the working set of large windows forms applications.<br><br><br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>SonOfPirate replied on Friday, January 12, 2007</h2><P>My recommendation is to restructure your apps&nbsp;using a multi-tiered architecture where you have a common assembly used by both (all) applications.&nbsp; This is, in fact, how I approach all applications I design because (as I've mentioned in other posts), you never know what the future will bring!</P>
<P>So, in my case, I will typically have a common assembly that contains all of the common business object, UI controls, forms, etc.&nbsp; I think we all find the idea of a common assembly for BO's intuitive but hesitate when it comes to UI elements.&nbsp; Just think of this as an extension to the old CommonDialog concept or a continuation of what MS provides in the FCL, e.g. PrintDialog, etc.</P>
<P>As a result, you'd end up with a common assembly referenced by each of your applications making it easier to add new application making use of the same common BO's and UI elements along the lines of:</P>
<P>
<TABLE cellPadding=3>

<TR>
<TD>[AppName].[Version].[dll | exe]</TD>
<TD>Software.v1.00.exe</TD>
<TD>application assembly</TD></TR>
<TR>
<TD>[AppName].[Version].[dll | exe]</TD>
<TD>Contacts.v1.00.exe</TD>
<TD>application assembly</TD></TR>
<TR>
<TD>[FamilyName].[Version].dll</TD>
<TD>Common.v1.00.dll</TD>
<TD>common assembly</TD></TR></TABLE></P>
<P>(Kinda like Word, Excel, etc. all make use of common Office - the family - assemblies.)</P>
<P>As for the question of dependancies between the forms, etc.&nbsp; I would do what I could to break these.&nbsp; The idea you had to make use of events and have the client application determine how to respond is best.&nbsp; This will provide better flexibility down the road should you have a new app that you need a different ContactFind form, for instance.</P>
<P>You can use a trick that I've adopted if you want to provide default behavior that can be overriden when needed:</P>
<P><CODE>public class SoftwareRegistrationForm : Form<BR>{<BR>&nbsp; &nbsp; public event EventHandler ContactRequest;<BR>&nbsp; &nbsp; <BR>&nbsp; &nbsp; protected void OnContactRequest(EventArgs e)<BR>&nbsp; &nbsp; {<BR>&nbsp; &nbsp; &nbsp; &nbsp; if (ContactRequest == null)<BR>&nbsp; &nbsp; &nbsp; &nbsp; {<BR>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // Default behavior<BR>&nbsp; &nbsp; &nbsp; &nbsp; }<BR>&nbsp; &nbsp; &nbsp; &nbsp; else<BR>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ContactRequest(this, e);<BR>&nbsp; &nbsp; }<BR>}</CODE></P>
<P>This way, you can wire-up the forms to emulate their current dependancies but allow customization later.&nbsp; If you use explicit declarations for you revents, you'll obviously have to tweak the example...</P>
<P>HTH</P>
<P>&nbsp;</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Friday, January 12, 2007</h2>Sounds like you're advocating the split.&nbsp; I already to have a common UI library, which contains an About form that can be reused and a message notification component I have, which runs in the background and provides messages to my users via a sytem tray icon.<br><br>Keeping in with your specific example, maybe I should define some interfaces which common forms should implement, like IContactFindForm.&nbsp; That would keep the specific forms decoupled while adhering to a standard.. or maybe that's going too far.<br><br>I'm not sure the 'default' behavior would work, because if there's no handler the RegistrationEditForm won't know anything about the contacts business layer at all, and won't be able to do anything if there's no handler..<br><br><br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>SonOfPirate replied on Friday, January 12, 2007</h2>Yea, the default behavior would require that you've fully implemented the forms and requisite (extensible) BO's in the common assembly.</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Friday, January 12, 2007</h2><BLOCKQUOTE><div><img src="/Themes/basicblue/images/icon-quote.gif"> <strong>rlarno:</strong></div><div>Splitting items up into seperate assemblies, is a decision to be made because of deployment choices.</div></BLOCKQUOTE><br><br>Well I also think you would split them to be able to reuse them as well, which is what I'm coming up against at the moment.&nbsp; Its not so much that I'm losing track of the forms, its that a fair number are now needed in a few places.&nbsp; Reusing forms across applications will also help me keep a consistent look / feel across applications.<br><br>That's a good point about keeping less used code in a seperate assembly to speed load time.&nbsp; I'll have to remember that moving forward.<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Friday, January 12, 2007</h2>Actually I'm thinking about the seperate assemblies idea, and I think what you might be getting at may be to have multiple assemblies, possibly one that only contains forms related to looking up contacts, and the other with the edit forms.. that'd be a great idea I think.<br><br>The software application doesn't need any of the forms to edit contacts, it only needs to look them up.<br><br>The downside is now I'll have potentially 2 or more UI assemblies per functional area, but that might be outweighted by the fact that applications won't even see forms it really won't ever be using...<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>SonOfPirate replied on Friday, January 12, 2007</h2><P>Not sure if I'm following your thought process completely.&nbsp; But, if both apps use contacts and&nbsp;the ContactFind form, then I would put those in the common assembly.&nbsp; If only one allows editing, then decide if you think that functionality is something that <EM>could</EM> be required for another app.&nbsp; If not, leave it in the application assembly; otherwise, put it in there too.</P>
<P>I try to put everything related to an object together, so even though the Software application does need the ContactEdit form, because it directly relates to a basic operation with the Contact BO that is included in the common assembly, I'd include that form too.&nbsp; But, that's just my preference.</P>
<P>Obviously there is nothing wrong with looking at what you have and moving ONLY what is common between the two apps into a common assembly.&nbsp; Downside is that you may find later that something you left in the application library would be better suited in the common one, maybe because a 3rd app has entered the picture and does use it (like the ContactEdit form, for instance) and you'll have to change the app <U>and</U> the common assembly in addition to the new app.&nbsp; But, that may be a more prudent way to go because you'll know that you have only included what you <EM>need</EM> in the common assembly and won't spend too much time trying to predict the future.</P>
<P>HTH</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Friday, January 12, 2007</h2>Pirate,<br><br>Basically I'd have a Contacts.Edit.UI and Contacts.Display.UI.<br><br>The Edit assembly would include forms that help edit contact data.&nbsp; The Display assembly would only be those forms that deal with displaying and finding contacts; that is, forms which don't use the editable contact business objects.<br><br>Software and Quoting would be split the same.&nbsp; That way, the Software editing application would use both Software.UI assemblies, but only the Contacts.Display.UI.<br><br>The other application would be similar, but because it edits quotes and contacts, it wouldn't need th Software.Edit.UI assembly. <br><br>The main application would then only contain application specific forms and controls.&nbsp; If something ends up being shared later, it could be moved fairly easily to a library assembly.<br><br>Is that a clearer picture of what I'm thinking?&nbsp; Does it sound like a good idea?<br><br>Andy<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>SonOfPirate replied on Saturday, January 13, 2007</h2>Sounds&nbsp;a bit more complicated (4 assemblies with only slightly different names and purposes plus 2 more for each additional app you add???) but if it works for you, then go for it.</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Monday, January 15, 2007</h2>Well I wouldn't need any addition per application; application specific forms would live just in the exe assembly.<br></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
