<html><header><title>Best way to implement?</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Best way to implement?</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/5156.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 posted on Friday, July 25, 2008</h2>Hi,<br><br>I have a quoting / ordering / invoicing system built on Csla.&nbsp; I now need to have the system automatically create a new back order if any items on the invoice have a quantity shipped less than quantity ordered.<br><br>The business rule is this; documents can be closed, an once closed are not to be modified again.&nbsp; In the case of an invoice, the invoice then gets exported to our accounting system.&nbsp;&nbsp; The requirement is to have a new order be created when the invoice is closed in the database (the user clicks the Close button, then Save).<br><br>My initial thinking is to put code in the DP_InvokeComplete to call a stored procedure that creates the back order.&nbsp; No big deal, except that I do want to automatically bring up the newly created order so the user can print it if needed.&nbsp; I'm trying to think of the best way to get this information back to the user.&nbsp; One simple option is certainly to add a property to the Invoice.&nbsp; The odd part of this is that the property will only ever have a value if a back order was just created.&nbsp; Otherwise the value will always be null.&nbsp; So, doesn't feel quite right, but I'm not sure of other good ways to handle this.<br><br>Any ideas?<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>tmg4340 replied on Friday, July 25, 2008</h2><P><FONT face=Tahoma size=2>I don't think that adding a property on your Invoice object is&nbsp;necessarily a bad idea.&nbsp; From a certain perspective, the new order is now part of your Invoice use case, so it would seem to have some merit.&nbsp; But if you don't like that idea, the next best one I can think of is to stuff it into the GlobalContext.&nbsp; Then you can check for your new Order ID after the save and launch your order form as necessary.</FONT></P>
<P><FONT face=Tahoma size=2>HTH</FONT></P>
<P><FONT face=Tahoma size=2>- Scott</FONT></P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>SonOfPirate replied on Friday, July 25, 2008</h2><P>Nah, this is a process issue.&nbsp; Sounds like a good candidate for WF under-the-hood to manage the process (business) rules you described.</P>
<P>Not knowing how your UI is built, I'd say that I'd have some sort of OrderManager or InvoiceManager that handles the business rules and checks to see if a back order exists whenever an invoice is closed.&nbsp; If it does, it notifies the UI that it needs to display the back-order.&nbsp; Remember that your classes should only serve one purpose (single-responsibility) and if your Invoice class is there to support viewing/printing/editing an invoice, then it already has a purpose.&nbsp; Delegate this responsibility to another object.</P>
<P>HTH</P>
<P>&nbsp;</P></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
