<html><header><title>Custom ISerializationFormatter Feature Request</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Custom ISerializationFormatter Feature Request</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/12881.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>BrettJaner posted on Thursday, May 14, 2015</h2><p>I&#39;d like to see the ISerializationFormatter feature extended to allow applying my own implementation. &nbsp;Being able to specify the type in the app.config/web.config similarly to how you provide a custom WcfProxy or DataPortalActivator would be perfect for me. &nbsp;My current problem requires me to provide the BinaryFormatter with a custom SerializationBinder. &nbsp;This feature would make this a lot easier. &nbsp;Has this idea been tossed around at all?</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JonnyBee replied on Friday, May 15, 2015</h2><p>Hi,</p>
<p>Did you look at the MobileFormatter and its supported formatters?&nbsp;</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>BrettJaner replied on Friday, May 15, 2015</h2><p>Thanks JonnyBee for your reply!</p>
<p>I have looked at the MobileFormatter&nbsp;and I don&#39;t believe it provides the extension points I need, even if I implemented my own ICslaWriter and ICslaReader.&nbsp; Basically I have my own custom SerializationBinder which I need to apply to the BinaryFormatter.&nbsp; This represents my custom formatter.&nbsp; I have created by own WcfProxy and DataPortal&nbsp;so I&#39;ve&nbsp;been able to apply my custom formatter there.&nbsp; I&#39;ve overridden GetClone in my BusinessBases as well.&nbsp;&nbsp;However not sure how to provide my custom formatter to the UndoableBase for the n-level undo feature.&nbsp; The further I dig, the more it seems I need this feature.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Wednesday, May 20, 2015</h2><p>This has not been tossed around at all.</p>
<p>Creating a serialized that actually works (does deserialization properly - that&#39;s the hard part) is really hard, and you are perhaps the third person to bring up the desire to do so at all.</p>
<p>(fwiw, the first two people said &quot;this is easy&quot;, I warned them it was hard, then they disappeared never to be heard from again - so I&#39;m guessing the effort broke them :)&nbsp; )</p>
<p>I obviously haven&#39;t put any thought or analysis into how difficult it would be to allow the use of a custom type, but I imagine the changes to CSLA would be relatively small. The risk to someone providing such a type would be high, but could be mitigated through extensive testing of cloning complex object graphs, just like we do with MobileFormatter.</p>
<p>In other words, if this is highly important to you, and can be done with minimal change/risk to CSLA itself, I would consider accepting a pull request along this line.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>BrettJaner replied on Tuesday, May 26, 2015</h2><p>I completely agree.&nbsp; Writing my own serialization/deserialization code would be hard and I have no interest in doing so.&nbsp; I simply want to provide the BinaryFormatter with a custom implementation of a SerializationBinder.&nbsp; SerializationBinder is a abstract class in BCL that has one abstract method, BindToType to aid in deserialization.&nbsp; The way you apply a custom binder to a formatter is as follows:</p>
<p>var formatter = new BinaryFormatter();</p>
<p>formatter.Binder = new MyCustomBinder();</p>
<p>However, since CSLA controls the object initialization of its formatter, I&#39;m unable to supply my custom binder.&nbsp; So from a framework standpoint,&nbsp;I&#39;d figured there would be more use cases for customizing the whole formatter, instead of just allowing a custom binder.&nbsp; I&#39;ll start digging in to see how much work the change to CSLA would be.&nbsp; If its simple enough, I&#39;ll send a pull request for review.</p></div><div style='padding:0 15 3 15;background-color:lightgreen'><h2>RockfordLhotka replied on Tuesday, June 09, 2015</h2><p><span style="font-size:x-small;">
<p>https://github.com/MarimerLLC/csla/issues/361</p>
<p>&nbsp;</p>
</span></p>
<p>&nbsp;</p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
