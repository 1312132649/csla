<html><header><title>Child_Insert Not Being Called when Parent Saved</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Child_Insert Not Being Called when Parent Saved</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/7084.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>Frazer posted on Thursday, June 11, 2009</h2><P>I have an ER :&nbsp; Request which has a property: Followups which is of type FollowupList which in turn is an editable child collection.</P>
<P><FONT size=2>I&nbsp;have implemented a method called ExecuteRequest, the purpose of which is to execute a query against a database and generate the Followup children from the query result set and add them to the Followups collection property.</FONT></P>
<P><FONT size=2>The method is as follows (trimmed for clarity)</FONT></P>
<P><FONT face="Courier New" size=2>Public Function ExecuteRequest(request as Request) as Request<BR>&nbsp; dim dtFollowupResults as DataTable = ...query the db and return a dataset ...<BR>&nbsp;&nbsp;for each row in the datatable....<BR>&nbsp;&nbsp;&nbsp;&nbsp; dim newFollowup as Followup.NewFollowup()<BR>&nbsp;&nbsp;&nbsp;&nbsp; ... populate its properties from the row...<BR>&nbsp;&nbsp;&nbsp;&nbsp; request.Followups.Add(newFollowup)<BR>&nbsp; next row<BR>&nbsp; request = request.Save()<BR>&nbsp; return request<BR>End Function</FONT></P>
<P><FONT size=2>My problem is that a DataPortalExecption is thrown when I call the Request.Save() method.&nbsp; Stack trace as follows:<BR><BR>&nbsp;&nbsp; at dm(Object , Object[] )<BR>&nbsp;&nbsp; at Csla.Reflection.MethodCaller.CallMethod(Object obj, DynamicMethodHandle methodHandle, Object[] parameters) in C:\Users\FSmith\Documents\Visual Studio 2008\Projects\csla\Csla\Reflection\MethodCaller.cs:line 298<BR>&nbsp;&nbsp; at Csla.Reflection.MethodCaller.CallMethod(Object obj, DynamicMethodHandle methodHandle, Object[] parameters) in C:\Users\FSmith\Documents\Visual Studio 2008\Projects\csla\Csla\Reflection\MethodCaller.cs:line 305<BR>&nbsp;&nbsp; at Csla.Reflection.MethodCaller.CallMethod(Object obj, String method, Object[] parameters) in C:\Users\FSmith\Documents\Visual Studio 2008\Projects\csla\Csla\Reflection\MethodCaller.cs:line 226<BR>&nbsp;&nbsp; at Csla.Reflection.LateBoundObject.CallMethod(String method, Object[] parameters) in C:\Users\FSmith\Documents\Visual Studio 2008\Projects\csla\Csla\Reflection\LateBoundObject.cs:line 86<BR>&nbsp;&nbsp; at Csla.Server.ChildDataPortal.Update(Object obj, Object[] parameters) in C:\Users\FSmith\Documents\Visual Studio 2008\Projects\csla\Csla\Server\ChildDataPortal.cs:line 201<BR>&nbsp;&nbsp; at Csla.Server.ChildDataPortal.Update(Object obj, Object[] parameters) in C:\Users\FSmith\Documents\Visual Studio 2008\Projects\csla\Csla\Server\ChildDataPortal.cs:line 262<BR>&nbsp;&nbsp; at Csla.DataPortal.UpdateChild(Object child, Object[] parameters) in C:\Users\FSmith\Documents\Visual Studio 2008\Projects\csla\Csla\DataPortal.cs:line 939<BR>&nbsp;&nbsp; at Csla.BusinessListBase`2.Child_Update(Object[] parameters) in C:\Users\FSmith\Documents\Visual Studio 2008\Projects\csla\Csla\BusinessListBase.cs:line 957<BR>&nbsp;&nbsp; at dm(Object , Object[] )<BR>&nbsp;&nbsp; at Csla.Reflection.MethodCaller.CallMethod(Object obj, DynamicMethodHandle methodHandle, Object[] parameters) in C:\Users\FSmith\Documents\Visual Studio 2008\Projects\csla\Csla\Reflection\MethodCaller.cs:line 298<BR>&nbsp;&nbsp; at Csla.Reflection.MethodCaller.CallMethod(Object obj, DynamicMethodHandle methodHandle, Object[] parameters) in C:\Users\FSmith\Documents\Visual Studio 2008\Projects\csla\Csla\Reflection\MethodCaller.cs:line 305<BR>&nbsp;&nbsp; at Csla.Reflection.MethodCaller.CallMethod(Object obj, String method, Object[] parameters) in C:\Users\FSmith\Documents\Visual Studio 2008\Projects\csla\Csla\Reflection\MethodCaller.cs:line 226<BR>&nbsp;&nbsp; at Csla.Reflection.LateBoundObject.CallMethod(String method, Object[] parameters) in C:\Users\FSmith\Documents\Visual Studio 2008\Projects\csla\Csla\Reflection\LateBoundObject.cs:line 86<BR>&nbsp;&nbsp; at Csla.Server.ChildDataPortal.Update(Object obj, Object[] parameters) in C:\Users\FSmith\Documents\Visual Studio 2008\Projects\csla\Csla\Server\ChildDataPortal.cs:line 228<BR>&nbsp;&nbsp; at LSI.Business.Followup.Request.DataPortal_Update() in C:\Users\FSmith\Documents\Visual Studio 2008\Projects\LSI.Followup\LSI.Business.Followup\Request.vb:line 759<BR>&nbsp;&nbsp; at dm(Object , Object[] )<BR>&nbsp;&nbsp; at Csla.Reflection.MethodCaller.CallMethod(Object obj, DynamicMethodHandle methodHandle, Object[] parameters) in C:\Users\FSmith\Documents\Visual Studio 2008\Projects\csla\Csla\Reflection\MethodCaller.cs:line 298<BR>&nbsp;&nbsp; at Csla.Reflection.MethodCaller.CallMethod(Object obj, DynamicMethodHandle methodHandle, Object[] parameters) in C:\Users\FSmith\Documents\Visual Studio 2008\Projects\csla\Csla\Reflection\MethodCaller.cs:line 305<BR>&nbsp;&nbsp; at Csla.Reflection.MethodCaller.CallMethod(Object obj, String method, Object[] parameters) in C:\Users\FSmith\Documents\Visual Studio 2008\Projects\csla\Csla\Reflection\MethodCaller.cs:line 226<BR>&nbsp;&nbsp; at Csla.Reflection.LateBoundObject.CallMethod(String method) in C:\Users\FSmith\Documents\Visual Studio 2008\Projects\csla\Csla\Reflection\LateBoundObject.cs:line 70<BR>&nbsp;&nbsp; at Csla.Server.SimpleDataPortal.Update(Object obj, DataPortalContext context) in C:\Users\FSmith\Documents\Visual Studio 2008\Projects\csla\Csla\Server\SimpleDataPortal.cs:line 211<BR>&nbsp;&nbsp; at LSI.Business.Followup.RequestList.ExecuteRequest(Guid requestID) in C:\Users\FSmith\Documents\Visual Studio 2008\Projects\LSI.Followup\LSI.Business.Followup\RequestList.vb:line 170<BR>&nbsp;&nbsp; at LSI.UI.Followup.frmMain.RequestMenuClick(Object sender, EventArgs e) in C:\Users\FSmith\Documents\Visual Studio 2008\Projects\LSI.Followup\LSI.UI.Followup\Forms\frmMain.vb:line 301<BR>&nbsp;&nbsp; at Gizmox.WebGUI.Forms.Component.FireEvent(IEvent objEvent)<BR>&nbsp;&nbsp; at Gizmox.WebGUI.Forms.TreeNode.FireEvent(IEvent objEvent)<BR>&nbsp;&nbsp; at Gizmox.WebGUI.Forms.RegisteredComponent.2AAAA(IEvent 0AAAA)<BR>&nbsp;&nbsp; at Gizmox.WebGUI.Server.Content.ProcessRequest(HttpContext objHttpContext)</FONT></P>
<P><FONT size=2>I am sure I have made an error in the implementation of one of my business object classes, however, I have tried to follow the templates in the book closely and cannot see where my mistake is.&nbsp; Can anyone suggest, based on where this exception is thrown in the framework, where I might look for my problem/</FONT></P>
<P><FONT size=2>&nbsp;</P></FONT></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Frazer replied on Thursday, June 11, 2009</h2><P>Problem solved.&nbsp; My child portal methods were expecting an additional argument (parent EF data entity) which were not been provided by the caller.</P>
<P>&nbsp;</P>
<P>&nbsp;</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Friday, June 12, 2009</h2>Unfortunately, while you provided the stack trace, you didn't provide the exception itself?</div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
