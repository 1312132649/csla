<html><header><title>Newbie questions relating to all sorts of things :-)</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Newbie questions relating to all sorts of things :-)</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/5556.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>tkd posted on Thursday, October 09, 2008</h2><P>1. When a BO is remoted to a client, some changes are made. When the object is Saved, is the entire object sent back to the server or only the dirtyobjects? From what I can see its the whole object which makes it a bit inefficient if the object has a child relationship with lots of records in it.</P>
<P>2. When I am using remoting and I have a number of objects that I want to save, e.g.</P>
<P>Product1.Save</P>
<P>Product2.Save</P>
<P>Each Save is going to be a call back to the server. Can those saves be wrapped in one transaction? I see Transactional support but can that work over the remote wire?</P>
<P>&nbsp;</P>
<DIV class=ForumPostContentText id=ctl00_ctl01_bcr_ctl00___PostRepeater_ctl02_PostViewWrapper>
<P>3. Possible to collect the Product.Save from the previous example and bundle them as one call back to the server? If you had 100 purchase orders being created together by an end of day process, it would be nice to be able to do a collection save on all of them to reduce the network calls. But I don't think this one could work, given that the code to handlign the remoting would be in the data portal in the CSLA object itself?</P>
<P>4. Is there any functionality to generate an XSD from your business object and then be able to receive an XML from a third party, validate against the XSD and then load that XML into a CSLA object? To me would provide an SOA type interface to external clients.</P>
<P>5. With the WPF components there is a CSLA notification event that can be used to determine whether a field is readonly, enabled, etc. Can this be used to actually hide the component? For example, users of certain levels&nbsp;should not even know some fields exist.</P>
<P>6. Can these notifications be used on any WPF component or only a subset prescribed by CSLA?</P>
<P>7. I saw some sample CSLA code like this.</P>
<P>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <FONT size=2><FONT face="Courier New"><FONT color=#008000>'&nbsp;We&nbsp;create&nbsp;the&nbsp;order<BR></FONT>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT color=#0000ff>Dim</FONT>&nbsp;<FONT color=black>objOrder</FONT>&nbsp;<FONT color=#0000ff>As</FONT>&nbsp;<FONT color=black>Order</FONT>&nbsp;<FONT color=#804040>=</FONT>&nbsp;<FONT color=black>Order</FONT><FONT color=black>.</FONT><FONT color=black>NewOrder</FONT><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT color=black>objOrder</FONT><FONT color=black>.</FONT><FONT color=black>CustomerID</FONT>&nbsp;<FONT color=#804040>=</FONT>&nbsp;<FONT color=magenta>"CHOPS"</FONT><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT color=black>objOrder</FONT><FONT color=black>.</FONT><FONT color=black>EmployeeID</FONT>&nbsp;<FONT color=#804040>=</FONT>&nbsp;<FONT color=black>1</FONT><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT color=black>objOrder</FONT><FONT color=black>.</FONT><FONT color=black>ShipVia</FONT>&nbsp;<FONT color=#804040>=</FONT>&nbsp;<FONT color=black>1</FONT><BR><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT color=#008000>'&nbsp;We&nbsp;create&nbsp;the&nbsp;Order&nbsp;Detail</FONT><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT color=#0000ff>Dim</FONT>&nbsp;<FONT color=black>objDetail</FONT>&nbsp;<FONT color=#0000ff>As</FONT>&nbsp;<FONT color=black>OrderDetail</FONT>&nbsp;<FONT color=#804040>=</FONT>&nbsp;<FONT color=black>OrderDetail</FONT><FONT color=black>.</FONT><FONT color=black>NewOrderDetail</FONT><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT color=black>objDetail</FONT><FONT color=black>.</FONT><FONT color=black>Product</FONT>&nbsp;<FONT color=#804040>=</FONT>&nbsp;<FONT color=black>objProduct</FONT><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT color=black>objDetail</FONT><FONT color=black>.</FONT><FONT color=black>Quantity</FONT>&nbsp;<FONT color=#804040>=</FONT>&nbsp;<FONT color=black>100</FONT><BR><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT color=#008000>'&nbsp;Add&nbsp;the&nbsp;OrderDetail&nbsp;to&nbsp;the&nbsp;order</FONT><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT color=black>objOrder</FONT><FONT color=black>.</FONT><FONT color=black>Orderdetails</FONT><FONT color=black>.</FONT><FONT color=black>Add</FONT><FONT color=black>(</FONT><FONT color=black>objDetail</FONT><FONT color=black>)</FONT><BR><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT color=#008000>'&nbsp;Save&nbsp;the&nbsp;Order</FONT><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT color=black>objOrder</FONT><FONT color=black>.</FONT><FONT color=black>Save</FONT><FONT color=black>()</FONT></FONT></FONT><BR></P>
<P>The objDetail isn't added until the end. I can think of a case where I would want the object added first and then set the product ID. For example, I need to ensure the item on the detail line is for the supplier on the order. If I did add the objDetail to OrderDetails first, does the child know its parent? So in the validation code could I do something like?:</P>
<P>&nbsp; if item.supplier&nbsp;&lt;&gt; &nbsp;parent.supplier&nbsp;<BR>&nbsp;&nbsp;&nbsp;&nbsp; error&nbsp;</P>
<P>8. Can a child object belong to more than one type of parent, e.g.</P>
<P>Order -&gt; OrderLines -&gt; ItemDetail</P>
<P>Invoice -&gt; InvoiceLines -&gt; ItemDetail</P>
<P>9. Can you build light weight CSLA objects. For example, I need to get data from the server but its for info only so I don't need to worry about implementing delete or update methods. Does the object still carry the overhead of those methods?</P>
<P>10. I know via a config flag you can say whether to be two tier or three tier application. Can you configure certain business objects to go to one server and others to go to a different one to help in load balancing?</P>
<P>&nbsp;</P>
<P>&nbsp;</P>
<P>That will do for now. None of these are deal breakers for me. Well 1 might be. Using a dataset/datatable method I would expect to only get the deltas come back. Its a lot&nbsp;more efficient when doing just a&nbsp;few updates on a lot of records.</P>
<P>I'm mainly just interested to know what support there is for them. I've been doing a lot of reading around on the NET there are some people who really like CSLA and then there are a number who seem vehmently opposed, espieclaly the DDD guys. Thing is for all their 'this can be done better with DDD, n-hibernate,e tc', I still haven't seen examples of&nbsp;frameworks that handle the connect of the object to the user interface through databinding as well as this, that does proper tracking of the updates especially deletes on child lists, that handles n-tier well as transparently as this. Its somewhat similar to the dataset type approach we currently have and if I was wanting to write a framework from scratch is probably the way I would go about it. I guess its all trade-offs, but I think I'd be getting a lot of power with CSLA to quickly build LOB applications.</P>
<P>&nbsp;</P></DIV></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>richardb replied on Thursday, October 09, 2008</h2><P><FONT color=#0000ff>Lots of questions :-)</FONT></P>
<P><BLOCKQUOTE><div><img src="/Themes/default/images/icon-quote.gif"> <strong>tkd:</strong></div><div> </P>
<P>1. When a BO is remoted to a client, some changes are made. When the object is Saved, is the entire object sent back to the server or only the dirtyobjects? From what I can see its the whole object which makes it a bit inefficient if the object has a child relationship with lots of records in it.</P>
<P><FONT color=#0000ff>In a remoting situation the entire objects <U>data</U> would be serialized across the wire, but once on the server only the dirty objects would then cause a database trip.&nbsp; </FONT></P>
<P>2. When I am using remoting and I have a number of objects that I want to save, e.g.</P>
<P>Product1.Save</P>
<P>Product2.Save</P>
<P>Each Save is going to be a call back to the server. Can those saves be wrapped in one transaction? I see Transactional support but can that work over the remote wire?</P>
<P><FONT color=#0000ff>Yes this is possible.&nbsp; You might have a controlling object that wraps the updates in a transaction.&nbsp; I think JoeFallon uses this technique nicely.</FONT></P>
<DIV class=ForumPostContentText id=ctl00_ctl01_bcr_ctl00___PostRepeater_ctl02_PostViewWrapper>
<P>3. Possible to collect the Product.Save from the previous example and bundle them as one call back to the server? If you had 100 purchase orders being created together by an end of day process, it would be nice to be able to do a collection save on all of them to reduce the network calls. But I don't think this one could work, given that the code to handlign the remoting would be in the data portal in the CSLA object itself?</P>
<P><FONT color=#0000ff>If I understand you, sounds like you want an editable collection&nbsp;BusinessCollectionBase object.</FONT></P>
<P>4. Is there any functionality to generate an XSD from your business object and then be able to receive an XML from a third party, validate against the XSD and then load that XML into a CSLA object? To me would provide an SOA type interface to external clients.</P>
<P><FONT color=#0000ff>Pass.&nbsp;But I would write a facade on top of my business objects that took the XML, validated it and then set the properties on my business objects.&nbsp; That way, you can change you business object interface without worrying about breaking the Web Service interface.</FONT></P>
<P>5. With the WPF components there is a CSLA notification event that can be used to determine whether a field is readonly, enabled, etc. Can this be used to actually hide the component? For example, users of certain levels&nbsp;should not even know some fields exist.</P>
<P><FONT color=#0000ff>Pass - not tackeld WPF yet!</FONT></P>
<P>6. Can these notifications be used on any WPF component or only a subset prescribed by CSLA?</P>
<P><FONT color=#0000ff>Pass - not tackeld WPF yet!</FONT></P>
<P>7. I saw some sample CSLA code like this.</P>
<P>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <FONT size=2><FONT face="Courier New"><FONT color=#008000>'&nbsp;We&nbsp;create&nbsp;the&nbsp;order<BR></FONT>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT color=#0000ff>Dim</FONT>&nbsp;<FONT color=black>objOrder</FONT>&nbsp;<FONT color=#0000ff>As</FONT>&nbsp;<FONT color=black>Order</FONT>&nbsp;<FONT color=#804040>=</FONT>&nbsp;<FONT color=black>Order</FONT><FONT color=black>.</FONT><FONT color=black>NewOrder</FONT><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT color=black>objOrder</FONT><FONT color=black>.</FONT><FONT color=black>CustomerID</FONT>&nbsp;<FONT color=#804040>=</FONT>&nbsp;<FONT color=magenta>"CHOPS"</FONT><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT color=black>objOrder</FONT><FONT color=black>.</FONT><FONT color=black>EmployeeID</FONT>&nbsp;<FONT color=#804040>=</FONT>&nbsp;<FONT color=black>1</FONT><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT color=black>objOrder</FONT><FONT color=black>.</FONT><FONT color=black>ShipVia</FONT>&nbsp;<FONT color=#804040>=</FONT>&nbsp;<FONT color=black>1</FONT><BR><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT color=#008000>'&nbsp;We&nbsp;create&nbsp;the&nbsp;Order&nbsp;Detail</FONT><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT color=#0000ff>Dim</FONT>&nbsp;<FONT color=black>objDetail</FONT>&nbsp;<FONT color=#0000ff>As</FONT>&nbsp;<FONT color=black>OrderDetail</FONT>&nbsp;<FONT color=#804040>=</FONT>&nbsp;<FONT color=black>OrderDetail</FONT><FONT color=black>.</FONT><FONT color=black>NewOrderDetail</FONT><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT color=black>objDetail</FONT><FONT color=black>.</FONT><FONT color=black>Product</FONT>&nbsp;<FONT color=#804040>=</FONT>&nbsp;<FONT color=black>objProduct</FONT><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT color=black>objDetail</FONT><FONT color=black>.</FONT><FONT color=black>Quantity</FONT>&nbsp;<FONT color=#804040>=</FONT>&nbsp;<FONT color=black>100</FONT><BR><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT color=#008000>'&nbsp;Add&nbsp;the&nbsp;OrderDetail&nbsp;to&nbsp;the&nbsp;order</FONT><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT color=black>objOrder</FONT><FONT color=black>.</FONT><FONT color=black>Orderdetails</FONT><FONT color=black>.</FONT><FONT color=black>Add</FONT><FONT color=black>(</FONT><FONT color=black>objDetail</FONT><FONT color=black>)</FONT><BR><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT color=#008000>'&nbsp;Save&nbsp;the&nbsp;Order</FONT><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT color=black>objOrder</FONT><FONT color=black>.</FONT><FONT color=black>Save</FONT><FONT color=black>()</FONT></FONT></FONT><BR></P>
<P>The objDetail isn't added until the end. I can think of a case where I would want the object added first and then set the product ID. For example, I need to ensure the item on the detail line is for the supplier on the order. If I did add the objDetail to OrderDetails first, does the child know its parent? So in the validation code could I do something like?:</P>
<P>&nbsp; if item.supplier&nbsp;&lt;&gt; &nbsp;parent.supplier&nbsp;<BR>&nbsp;&nbsp;&nbsp;&nbsp; error&nbsp;</P>
<P><FONT color=#0000ff>I'd probably do this.</FONT></P>
<P><FONT color=#0000ff><FONT size=2><FONT face="Courier New">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Dim<FONT color=#000000>&nbsp;objOrder&nbsp;</FONT><FONT color=#0000ff>As</FONT><FONT color=#000000>&nbsp;Order</FONT><FONT color=#000000>&nbsp;</FONT><FONT color=#804040>=</FONT><FONT color=#000000>&nbsp;</FONT><FONT color=#000000>Order.NewOrder</FONT><BR><FONT color=#000000>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;objOrder.CustomerID</FONT><FONT color=#000000>&nbsp;</FONT><FONT color=#804040>=</FONT><FONT color=#000000>&nbsp;</FONT><FONT color=magenta>"CHOPS"</FONT><BR><FONT color=#000000>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;objOrder.EmployeeID</FONT><FONT color=#000000>&nbsp;</FONT><FONT color=#804040>=</FONT><FONT color=#000000>&nbsp;1</FONT><BR><FONT color=#000000>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;objOrder.ShipVia</FONT><FONT color=#000000>&nbsp;</FONT><FONT color=#804040>=</FONT><FONT color=#000000>&nbsp;1</FONT><BR><BR><FONT color=#000000>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT color=#008000>'&nbsp;We&nbsp;create&nbsp;the&nbsp;Order&nbsp;Detail<BR></FONT></FONT></FONT></FONT><FONT color=#0000ff><FONT size=2><FONT face="Courier New"><FONT color=#000000>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;objOrder.Orderdetails.Add(productid:=1001, qty:=100)</FONT><BR><BR><FONT color=#000000>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT color=#008000>'&nbsp;Save&nbsp;the&nbsp;Order</FONT><BR><FONT color=#000000>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT color=#000000>objOrder.Save()</FONT></FONT></FONT><BR></FONT><FONT color=#0000ff><BR>In the Add method you could put a check in to lookup the product ID to make sure it is for the same supplier.&nbsp; Of course, in your UI code you would also just show products for the chosen supplier.</P></FONT>
<P>8. Can a child object belong to more than one type of parent, e.g.</P>
<P>Order -&gt; OrderLines -&gt; ItemDetail</P>
<P>Invoice -&gt; InvoiceLines -&gt; ItemDetail</P>
<P><FONT color=#0000ff>Yes subject to your OO design.&nbsp; You can do TypeOf checks to see what type of business object you have and then act accordingly.</FONT></P>
<P>9. Can you build light weight CSLA objects. For example, I need to get data from the server but its for info only so I don't need to worry about implementing delete or update methods. Does the object still carry the overhead of those methods?</P>
<P><FONT color=#0000ff>Yes the ReadOnlyBase and ReadOnlyCollection objects are lightweight - they jsut get data.</FONT></P>
<P>10. I know via a config flag you can say whether to be two tier or three tier application. Can you configure certain business objects to go to one server and others to go to a different one to help in load balancing?</P>
<P><FONT color=#0000ff>Pass.</FONT></P>
<P>HTH, Richard.</P></DIV></div></BLOCKQUOTE></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>tkd replied on Friday, October 10, 2008</h2><P>Thanks Richard. That certainly helps in some areas. Now I just need to someone else to answer those other questions ;-)</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>tmg4340 replied on Friday, October 10, 2008</h2><P><FONT face=Tahoma size=2>I can answer one of them.</FONT></P>
<P><FONT face=Tahoma size=2>CSLA does not come with support for DataPortal routing by BO "out of the box".&nbsp;&nbsp;But you can get what you want by developing a custom DataPortal proxy.&nbsp; As far as your app is concerned, the DataPortal runs locally.&nbsp; But this local DataPortal would use your custom proxy, which would route to the various remote DataPortals by whatever criteria you need.</FONT></P>
<P><FONT face=Tahoma size=2>Creating&nbsp;a custom proxy isn't hard - it's just implementing an interface and&nbsp;creating some configuration information.&nbsp; This has been discussed before in the forums, so a search should yield you some more info.</FONT></P>
<P><FONT face=Tahoma size=2>HTH</FONT></P>
<P><FONT face=Tahoma size=2>- Scott</FONT></P></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
