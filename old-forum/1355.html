<html><header><title>Recommended pattern?</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Recommended pattern?</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/1355.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 posted on Thursday, September 28, 2006</h2>OK,<br><br>Now I'm implementing my <a HREF="/forums/thread/4155.aspx">LineItems and various LineItem</a> classes.&nbsp; The basic design is that you can't create any LineItem directly, you do so by calling various methods on the LineItems class, like so:<br><br><font color="#0000ff">public sealed class</font> <font color="#008000">LineItems </font>: <font color="#008000">BusinessListBase</font>&lt;<font color="#008000">LineItems</font>, <font color="#008000">ILineItem</font>&gt; {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <font color="#0000ff">public </font><font color="#008000">ILineItem </font>AppendItem( <font color="#008000">ProductPriceInfo </font>product );<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <font color="#0000ff">public </font><font color="#008000">ILineItem </font>InsertItem( <font color="#008000">ProductPriceInfo </font>product, <font color="#0000ff">int </font>position ) ;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <font color="#0000ff">public </font><font color="#008000">ILineItem </font>AppendItem( <font color="#0000ff">string </font>noteText ) ;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <font color="#0000ff">public </font><font color="#008000">ILineItem </font>InsertItem( <font color="#0000ff">string </font>noteText, <font color="#0000ff">int </font>position );<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <font color="#0000ff">public </font><font color="#008000">ILineItem </font>InsertSubTotal( <font color="#0000ff">int </font>position );<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <font color="#0000ff">public </font><font color="#008000">ILineItem </font>AppendSubTotal();<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <font color="#0000ff">public </font><font color="#008000">ILineItem </font>GroupItems( <font color="#008000">List</font>&lt;<font color="#008000">ILineItem</font>&gt; items );<br>}<br><br>Behind the scenes, I have a LineItemFactory to which the above calls are delegating.&nbsp; First, I've hit a problem with the factory; I don't have anything to pass it so that it can 'figure out' that a SubTotal line item is what is required.&nbsp; That's fine, but I have a small concern that there may be a type of line item in the future that also doesn't need any info.&nbsp; <br><br>So first, is that something I shouldn't worry about yet anyway?&nbsp; Second, perhaps I don't need&nbsp; a factory here anyway?&nbsp; Finally, should the list be handling this, or perhaps I should make the factory public and let the UI handle inserting?&nbsp;&nbsp; <br><br>Thanks<br>Andy<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Thursday, September 28, 2006</h2>I wonder if you shouldn't expose a set of overloaded factory methods directly to the UI, allowing the UI to create the ILineItem directly. I assume you can detect the right type of object based on whether you get a product, string or no parameter?<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Monday, October 02, 2006</h2>Thanks for the advice, this is what I have done.<br><br>My only question though is what happens if there's ever a line item type which can't be uniquely identified based off of the parameters?<br><br>Also, the UI will now be calling CreateLineItem() without parameters when it wants a subtotal line item.&nbsp; Still seems a bit odd, but is that the recommended way?<br><br>Thanks<br>Andy<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>malloc1024 replied on Monday, October 02, 2006</h2>

<p class="MsoNormal">You will need to send a parameter to your factory.<span>&nbsp; </span>The factory could return a null object of a line
item if no parameter is given; however, for all other cases, you will need to
send a parameter for the reasons you mentioned previously.<span>&nbsp; </span>If you canâ€™t think of a parameter that distinguishes
sub total from other line items I would probably go with a enum.<span>&nbsp; </span>I
am not sure if this is the proper way to
go, but this is what I have done in the past.&nbsp; It works and it is
better than passing no parameters to get a sub total object.<br>
</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>malloc1024 replied on Thursday, September 28, 2006</h2>

<p class="MsoNormal">It seems that your LineItems class contains some unnecessary
methods. <span>&nbsp;&nbsp;</span>I would eliminate all AppendItem
methods.<span>&nbsp; </span>The InsertItem method should
append by default if no position is provided.<span>&nbsp;
</span>I would have 2 overloaded InsertItem classes.<span>&nbsp; </span>One that takes an ILineItem object and the other
that takes an ILineItem object and a position. <span>&nbsp;&nbsp;</span>I would use the factory in the UI to create
you ILineItem objects.<span>&nbsp; </span>This will reduce
the pollution inside your LineItems class and make it easier to use.</p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
