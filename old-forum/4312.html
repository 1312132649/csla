<html><header><title>PropertyInfo and ICloneable</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>PropertyInfo and ICloneable</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/4312.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>skagen00 posted on Thursday, February 07, 2008</h2><P>A coworker asked an interesting question about supplying a default value for more of a reference type propertyinfo, such as a BusinessListBase child collection.</P>
<P>Obviously, one can't do something like MyChildCollection.NewCollection() for the default value because all instances of the root would end up with the same child collection. </P>
<P>So it got me to thinking if PropertyInfo might instead behave like this:</P>
<P>public virtual T DefaultValue <BR>{&nbsp;&nbsp; <BR>&nbsp;get&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;ICloneable cloneable = _defaultValue as ICloneable;<BR>&nbsp;&nbsp;if (cloneable == null)<BR>&nbsp;&nbsp;{<BR>&nbsp;&nbsp;&nbsp;return _defaultValue;<BR>&nbsp;&nbsp;}<BR>&nbsp;&nbsp;else<BR>&nbsp;&nbsp;{<BR>&nbsp;&nbsp;&nbsp;return cloneable.Clone();<BR>&nbsp;&nbsp;}<BR>&nbsp;}<BR>}</P>
<P>We can obviously override DefaultValue to do this, which is great - but it almost seems to me like this would be the desired behavior. Am I missing any gotchas? </P>
<P>Chris</P>
<P>&nbsp;</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Thursday, February 07, 2008</h2><P>I don't know. It doesn't feel right somehow, but I can't put my finger on why...</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>skagen00 replied on Thursday, February 07, 2008</h2><P>Fair enough - I am not sure how I felt about it, either -- but it was an interesting question and it seemed like an interesting subject to bring up. The default value has a lot of applicability to value types but for most reference types it really doesn't.&nbsp;</P>
<P>&nbsp;</P></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
