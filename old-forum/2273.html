<html><header><title>Asynchronous CommandBase?</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Asynchronous CommandBase?</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/2273.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>DogSpots posted on Sunday, February 04, 2007</h2><P>I need to be able to start a lengthy procedure whenever a certain business object is saved.&nbsp; The lengthy procedure takes quite a long time,&nbsp;and it does not change the object that started it, but it does get, update and save many other business objects.&nbsp; The UI does not need to know when the lengthy process is done.&nbsp; In fact, the UI doesn't even need to know that the process was started.&nbsp; </P>
<P>I tried creating a CommandBase object, but&nbsp;I don't know&nbsp;how to get the CommandBase object to return before it is actually done.&nbsp; I'm considering a BackgroundWorker, but I'm not sure if that is safe.</P>
<P>I'm working with a RemotingHost DataPortal and would like the lengthy process to run on the DataPortal.</P>
<P>Any ideas?</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>William replied on Sunday, February 04, 2007</h2><DIV>I would suggest to push your lengthy processing request into a queue (for example, MSMQ) and the back-end job picks it up to complete the processing.</DIV>
<DIV>&nbsp;</DIV>
<DIV>Regards,</DIV>
<DIV>William</DIV></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>McManus replied on Monday, February 05, 2007</h2><P>Bill,</P>
<P>Why not start the lengthy procedure from within the DataPortal_xyz method? You are already on the server side when that method runs. Just start the procedure asynchronously on another thread. The DataPortal_xyz wouldn't have to wait for it.</P>
<P>Hope this helps!</P>
<P>Cheers,</P>
<P>Herman</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Monday, February 05, 2007</h2><P>I agree with these comments. I would suggest that your DataPortal_Execute() method be used to put data into the database, then place an item in a queue of some sort.</P>
<P>Obviously this means you'll have a queue listener, that activates when items are in the queue and processes them. The actual work would occur in this queue listener process on the server.</P>
<P>You can use raw MSMQ (System.Messaging), COM+ Queued Components (which is MSMQ, but with automatic retry processing if the task fails), the Service Broker in SQL Server or roll your own using a Windows Service and a SQL table.</P>
<P>If you want to be <EM>really</EM> fancy, you could use .NET 3.0's Windows Workflow Foundation (WF) to implement your processing. The queue listener, in this case, would merely kick off a workflow, which would do the actual work <img src="/emoticons/emotion-2.gif" alt="Big Smile [:D]" /></P></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
