<html><header><title>Unable to set up PTWeb Sample Project 2.0 - DataPortal.Fetch failed error occurs after log in</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Unable to set up PTWeb Sample Project 2.0 - DataPortal.Fetch failed error occurs after log in</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/507.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>mharper posted on Thursday, June 29, 2006</h2><P>I am trying to set up the Project Tracker sample project for the web (C#), and I get the following error:</P>
<DIV><FONT face=Arial size=2>Csla.DataPortalException was unhandled by user code<BR>&nbsp; <STRONG><FONT color=#ff0000>Message="DataPortal.Fetch failed"<BR></FONT></STRONG>&nbsp; Source="Csla"<BR>&nbsp; StackTrace:<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at ProjectTracker.Library.Database.get_SecurityConnection() in C:\Program Files\CSLA Framework\ProjectTracker20cs\ProjectTracker.Library\Database.cs:line 21<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at ProjectTracker.Library.Security.PTIdentity.DataPortal_Fetch(Criteria criteria) in C:\Program Files\CSLA Framework\ProjectTracker20cs\ProjectTracker.Library\Security\PTIdentity.cs:line 92<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at Csla.MethodCaller.CallMethod(Object obj, MethodInfo info, Object[] parameters) in C:\Program Files\CSLA Framework\csla20cs\Csla\DataPortal\MethodCaller.cs:line 56<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at Csla.MethodCaller.CallMethod(Object obj, String method, Object[] parameters) in C:\Program Files\CSLA Framework\csla20cs\Csla\DataPortal\MethodCaller.cs:line 37<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at Csla.Server.SimpleDataPortal.Fetch(Object criteria, DataPortalContext context) in C:\Program Files\CSLA Framework\csla20cs\Csla\DataPortal\Server\SimpleDataPortal.cs:line 101<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at Csla.DataPortal.Fetch(Object criteria) in C:\Program Files\CSLA Framework\csla20cs\Csla\DataPortal\Client\DataPortal.cs:line 173<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at Csla.DataPortal.Fetch[T](Object criteria) in C:\Program Files\CSLA Framework\csla20cs\Csla\DataPortal\Client\DataPortal.cs:line 138<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at ProjectTracker.Library.Security.PTIdentity.GetIdentity(String username, String password) in C:\Program Files\CSLA Framework\ProjectTracker20cs\ProjectTracker.Library\Security\PTIdentity.cs:line 57<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at ProjectTracker.Library.Security.PTPrincipal.Login(String username, String password) in C:\Program Files\CSLA Framework\ProjectTracker20cs\ProjectTracker.Library\Security\PTPrincipal.cs:line 15<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at PTMembershipProvider.ValidateUser(String username, String password) in c:\Program Files\CSLA Framework\ProjectTracker20cs\www\PTWeb\App_Code\PTMembershipProvider.cs:line 11<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at System.Web.UI.WebControls.Login.OnAuthenticate(AuthenticateEventArgs e)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at System.Web.UI.WebControls.Login.AttemptLogin()<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at System.Web.UI.WebControls.Login.OnBubbleEvent(Object source, EventArgs e)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at System.Web.UI.Control.RaiseBubbleEvent(Object source, EventArgs args)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at System.Web.UI.WebControls.Button.OnCommand(CommandEventArgs e)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at System.Web.UI.WebControls.Button.RaisePostBackEvent(String eventArgument)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at System.Web.UI.WebControls.Button.System.Web.UI.IPostBackEventHandler.RaisePostBackEvent(String eventArgument)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at System.Web.UI.Page.RaisePostBackEvent(IPostBackEventHandler sourceControl, String eventArgument)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at System.Web.UI.Page.RaisePostBackEvent(NameValueCollection postData)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint)</FONT></DIV>
<DIV><FONT face=Arial size=2></FONT><FONT face=Arial size=2>&nbsp;</DIV>
<DIV>&nbsp;</DIV>
<DIV><BR>&nbsp;</DIV></FONT>
<P><FONT face=Arial size=2>I am running this on my own IIS (XP Pro) and own SQL Server (SQL Server 2005 Developer Ed.) .&nbsp; </FONT></P>
<P><FONT face=Arial size=2>My </FONT><FONT face=Arial size=2>CslaDataPortalProxys value is EnterpriseSercivesHost.EnterpriseServicesProxy, EnterpriseServicesHostcs.&nbsp; </FONT></P>
<P><FONT face=Arial size=2>My connection string is as follows: <FONT color=#0000ff size=2></P>
<P>&lt;</FONT><FONT color=#800000 size=2>connectionStrings</FONT><FONT color=#0000ff size=2>&gt;</P>
<P>&lt;</FONT><FONT color=#800000 size=2>add</FONT><FONT color=#0000ff size=2> </FONT><FONT color=#ff0000 size=2>name</FONT><FONT color=#0000ff size=2>=</FONT><FONT size=2>"</FONT><FONT color=#0000ff size=2>PTracker</FONT><FONT size=2>"</FONT><FONT color=#0000ff size=2> </P>
<P></FONT><FONT color=#ff0000 size=2>connectionString</FONT><FONT color=#0000ff size=2>=</FONT><FONT size=2>"</FONT><FONT color=#0000ff size=2>Server=&lt;ServerName&gt;\_2005;Database=PTracker;Integrated Security=True;</FONT><FONT size=2>"</P></FONT><FONT color=#0000ff size=2>
<P></FONT><FONT color=#ff0000 size=2>providerName</FONT><FONT color=#0000ff size=2>=</FONT><FONT size=2>"</FONT><FONT color=#0000ff size=2>System.Data.SqlClient</FONT><FONT size=2>"</FONT><FONT color=#0000ff size=2> /&gt;</P>
<P>&lt;</FONT><FONT color=#800000 size=2>add</FONT><FONT color=#0000ff size=2> </FONT><FONT color=#ff0000 size=2>name</FONT><FONT color=#0000ff size=2>=</FONT><FONT size=2>"</FONT><FONT color=#0000ff size=2>Security</FONT><FONT size=2>"</FONT><FONT color=#0000ff size=2> </P>
<P></FONT><FONT color=#ff0000 size=2>connectionString</FONT><FONT color=#0000ff size=2>=</FONT><FONT size=2>"</FONT><FONT color=#0000ff size=2>Server=&lt;ServerName&gt;\_2005;Database=Security;Integrated Security=True;</FONT><FONT size=2>"</P></FONT><FONT color=#0000ff size=2>
<P></FONT><FONT color=#ff0000 size=2>providerName</FONT><FONT color=#0000ff size=2>=</FONT><FONT size=2>"</FONT><FONT color=#0000ff size=2>System.Data.SqlClient</FONT><FONT size=2>"</FONT><FONT color=#0000ff size=2> /&gt;</P></FONT></FONT><FONT face=Arial size=2><FONT color=#0000ff size=2>
<P>&lt;/</FONT><FONT color=#800000 size=2>connectionStrings</FONT><FONT color=#0000ff size=2>&gt;</P>
<P>The EnterpriseServicesHostcs.dll &amp; EnterpriseServicesHostcs.pdb is in my bin directory.</P>
<P>&nbsp;</P>
<P>Thanks in advanced,</P>
<P>Michael</FONT></FONT></P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Thursday, June 29, 2006</h2>What was the inner exception for that exception?<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>mharper replied on Thursday, June 29, 2006</h2>Thanks for your response, I found the issue.&nbsp; The COM+ Application Root Directory needs to be set in component services.<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>dileepagarwal replied on Wednesday, August 09, 2006</h2><P><SPAN>I am a new user to CSLA. Today I have started with default project (projectTracker20cs).I have changed the connection string in the all config file. When I tried to run the project I am getting DataPortal.Fetch failed error. You mentioned that you set the com+ service, could you please let me know how you did that.<o:p></o:p></SPAN></P>
<P><SPAN>&nbsp;<o:p></o:p></SPAN></P>
<P><SPAN>Thanks,<o:p></o:p></SPAN></P>
<P><SPAN>Dileep<o:p></o:p></SPAN></P>
<P>&nbsp;</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Wednesday, August 09, 2006</h2>Have you read the install instruction document?<br><br><a href="http://www.lhotka.net/files/csla20/BuildCsla.pdf">http://www.lhotka.net/files/csla20/BuildCsla.pdf</a><br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>dileepagarwal replied on Wednesday, August 09, 2006</h2><P>Yes I did, but I do not know if I need to register some dll to com+ services or something like that. I am new to this and I even do not have idea about local and remote data portal.</P>
<P>Basically I want to choose a technology(across the wire data transfer with WCF, nettcpbinding) and want to make use of CSLA for business object if they will fit in my architecture some where.</P>
<P>could you please help me in this regards as I am not able to run the projecttracker20cs.</P>
<P>Thanks,</P>
<P>Dileep</P>
<P>&nbsp;</P>
<P>&nbsp;</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>dileepagarwal replied on Wednesday, August 09, 2006</h2><P>I am having problem in line no. 184 of dataportal.cs class when i tried to use following line:</P><FONT size=2>
<P>result = proxy.Fetch(objectType, criteria, dpContext);</P>
<P>Is their anything am I missing?</P>
<P>&nbsp;</P>
<P>Dileep</P></FONT></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Wednesday, August 09, 2006</h2>




<DIV align=left><SPAN class=359572522-09082006><FONT face=Arial color=#0000ff size=2>Is this a compiler error or a runtime error? Either way, 
what is the error?</FONT></SPAN></DIV><BR>
<BLOCKQUOTE>
  <DIV class=OutlookMessageHeader align=left>
  <HR>
  <FONT face=Tahoma size=2><B>From:</B> dileepagarwal 
  [mailto:cslanet@lhotka.net] <BR><B>Sent:</B> Wednesday, August 09, 2006 4:46 
  PM<BR><B>To:</B> rocky@lhotka.net<BR><B>Subject:</B> Re: [CSLA .NET] Unable to 
  set up PTWeb Sample Project 2.0 - DataPortal.Fetch failed error occurs after 
  log in<BR></FONT><BR></DIV>
  <DIV></DIV>
  <P>I am having problem in line no. 184 of dataportal.cs class when i tried to 
  use following line:</P><FONT size=2>
  <P>result = proxy.Fetch(objectType, criteria, dpContext);</P>
  <P>Is their anthing am I missing?</P></FONT></BLOCKQUOTE></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>dileepagarwal replied on Thursday, August 10, 2006</h2><P>This is a runtime error. I am getting this error after I provide login information on the login screen.</P>
<P>Dileep</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Wednesday, August 09, 2006</h2>




<DIV align=left><SPAN class=328012222-09082006><FONT face=Arial color=#0000ff size=2>Then I suggest reading Chapter 12, as it discusses how to 
configure each of the three data portal channels - walking through the steps in 
pretty good detail.</FONT></SPAN></DIV>
<DIV align=left><SPAN class=328012222-09082006><FONT face=Arial color=#0000ff size=2></FONT></SPAN>&nbsp;</DIV>
<DIV align=left><SPAN class=328012222-09082006><FONT face=Arial color=#0000ff size=2>It is the case that on the server you need to register the 
enterprise services host assembly. And you'll have to register the COM+ 
Application on each client too - this is one of two primary drawbacks to using 
the ES channel (the upside being how fast it is; the other drawback being that 
DCOM isn't very firewall-friendly).</FONT></SPAN></DIV>
<DIV align=left><SPAN class=328012222-09082006><FONT face=Arial color=#0000ff size=2></FONT></SPAN>&nbsp;</DIV>
<DIV align=left><SPAN class=328012222-09082006><FONT face=Arial color=#0000ff size=2>I don't follow how WCF fits in here? You want to use WCF as 
your data portal channel? Or you are creating a set of WCF services and want to 
implement the services using CSLA objects? Or you are creating a client that is 
calling WCF services and want to implement the client using CSLA 
objects?</FONT></SPAN></DIV>
<DIV align=left><SPAN class=328012222-09082006><FONT face=Arial color=#0000ff size=2></FONT></SPAN>&nbsp;</DIV>
<DIV align=left><SPAN class=328012222-09082006><FONT face=Arial color=#0000ff size=2>All three options are valid, but each is quite different in 
its implication.</FONT></SPAN></DIV>
<DIV align=left><SPAN class=328012222-09082006><FONT face=Arial color=#0000ff size=2></FONT></SPAN>&nbsp;</DIV>
<DIV align=left><SPAN class=328012222-09082006><FONT face=Arial color=#0000ff size=2>Rocky</FONT></SPAN></DIV>
<DIV align=left>&nbsp;</DIV></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>dileepagarwal replied on Thursday, August 10, 2006</h2><P class=MsoNormal>Regarding WCF integration, I want to create a WCF service that will send the data to the client and client sides (Windows form) will also having the WCF support (using NetTcpBinding). I want to make use of CSLA to create my business objects and data objects that will transfer between server and client (Across the wire over Internet). I heard that CSLA.Net providing consistent business logic and concept of data portal and data objects (Please correct me if I am wrong). </P>
<P class=MsoNormal>Will this make sense or do I need to think some different approach.</P>
<P class=MsoNormal><o:p>&nbsp;</o:p></P>
<P class=MsoNormal>If I will use the CSLA to transfer large data back and forth will it hit the performance of application? As right now I am sending the data from server to client in the form of dataset and getting back the updated dataset (using diffgram or GetChanges() method) back from client to server. </P>
<P class=MsoNormal><o:p>&nbsp;</o:p></P>
<P class=MsoNormal>Please let me know your views.</P>
<P class=MsoNormal><o:p>&nbsp;</o:p></P>
<P class=MsoNormal>Thanks,</P>
<P class=MsoNormal>Dileep</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Thursday, August 10, 2006</h2>




<DIV align=left><SPAN class=860324814-10082006><FONT face=Arial color=#0000ff size=2>In that case I think you want a WCF data portal 
channel.&nbsp;Here's a prototype:</FONT></SPAN></DIV>
<DIV align=left><SPAN class=860324814-10082006><FONT face=Arial color=#0000ff size=2></FONT></SPAN>&nbsp;</DIV>
<DIV align=left><SPAN class=860324814-10082006><FONT face=Arial color=#0000ff size=2><A href="http://www.lhotka.net/Article.aspx?area=11&amp;id=0eec56bb-2a61-47c4-a9ca-f98371db1cad">http://www.lhotka.net/Article.aspx?area=11&amp;id=0eec56bb-2a61-47c4-a9ca-f98371db1cad</A></FONT></SPAN></DIV>
<DIV align=left><SPAN class=860324814-10082006><FONT face=Arial color=#0000ff size=2></FONT></SPAN>&nbsp;</DIV>
<DIV align=left><SPAN class=860324814-10082006><FONT face=Arial color=#0000ff size=2>That channel allows you to use the full capabilities of 
CSLA, and use WCF as the network transport between client and server. The only 
restriction on your WCF configuration is that you must configure it to use a 
synchronous approach - the data portal isn't designed to work in an async 
mode.</FONT></SPAN></DIV>
<DIV align=left><SPAN class=860324814-10082006><FONT face=Arial color=#0000ff size=2></FONT></SPAN>&nbsp;</DIV>
<DIV align=left><SPAN class=860324814-10082006><FONT face=Arial color=#0000ff size=2>Also be aware that, like WCF, the data portal channel is 
very much a test. It is not final code, and may or may not really work for you 
at this time. The current version of the code (that works with CSLA 2.0.1 or 
higher) is only in cvs (<A href="http://www.lhotka.net/cslacvs">www.lhotka.net/cslacvs</A>) so you'll have 
to get it from there.</FONT></SPAN></DIV>
<DIV align=left><SPAN class=860324814-10082006><FONT face=Arial color=#0000ff size=2></FONT></SPAN>&nbsp;</DIV>
<DIV align=left><SPAN class=860324814-10082006><FONT face=Arial color=#0000ff size=2>To see whether CSLA is the right fit for your needs, you 
need to read Chapter 1 and possibly Chapter 2. That will give you a good 
understanding of the philosophy and approach I am taking with the framework and 
you can assess whether that matches your requirements.</FONT></SPAN></DIV>
<DIV align=left><SPAN class=860324814-10082006><FONT face=Arial color=#0000ff size=2></FONT></SPAN>&nbsp;</DIV>
<DIV align=left><SPAN class=860324814-10082006><FONT face=Arial color=#0000ff size=2>Rocky</FONT></SPAN></DIV><FONT face=Arial color=#0000ff size=2></FONT><BR>
<BLOCKQUOTE>
  <P class=MsoNormal>Regarding WCF integration, I want to create a WCF service 
  that will send the data to the client and client sides (Windows form) will 
  also having the WCF support (using NetTcpBinding). I want to make use of CSLA 
  to create my business objects and data objects that will transfer between 
  server and client (Across the wire over Internet). I heard that CSLA.Net 
  providing consistent business logic and concept of data portal and data 
  objects (Please correct me if I am wrong). </P></BLOCKQUOTE></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>dileepagarwal replied on Thursday, August 10, 2006</h2><P>Thanks Rocky,</P>
<P>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; I will read the book and will get back to you.</P>
<P>By the way I solved the DataPortal.Fetch problem. Actualy I was using the SQL server 2005 not the Express addition. I changed the database and connection string it's working now.</P>
<P>Dileep</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>dileepagarwal replied on Thursday, August 10, 2006</h2><P>One more thing, every help regarding CSLA.net is depends on either forum or on the Books (which you are referring). Will it not be good if you will provide sample chapters on your site (like 2-3 chapters) that will give idea to make a decision regarding CSLA technology and how to use it? After this if we need to go ahead with CSLA.net we can buy the book.<o:p></o:p></P>
<P>Dileep</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Thursday, August 10, 2006</h2>




<DIV align=left><SPAN class=657444416-10082006><FONT face=Arial color=#0000ff size=2>Perhaps, except that the only income I make off this work 
is through sales of the books (and any donations through 
PayPal).</FONT></SPAN></DIV>
<DIV align=left><SPAN class=657444416-10082006><FONT face=Arial color=#0000ff size=2></FONT></SPAN>&nbsp;</DIV>
<DIV align=left><SPAN class=657444416-10082006><FONT face=Arial color=#0000ff size=2>I honestly have no real incentive to convince people to 
just use CSLA. Having a lot of people use the framework without buying the book 
is not useful to me...</FONT></SPAN></DIV>
<DIV align=left><SPAN class=657444416-10082006><FONT face=Arial color=#0000ff size=2></FONT></SPAN>&nbsp;</DIV>
<DIV align=left><SPAN class=657444416-10082006><FONT face=Arial color=#0000ff size=2>Now if I made the framework commercial (which is not my 
plan), then I'd be incented to use chapters from the book as a marketing tool to 
sell more copies of the framework.</FONT></SPAN></DIV>
<DIV align=left><SPAN class=657444416-10082006><FONT face=Arial color=#0000ff size=2></FONT></SPAN>&nbsp;</DIV>
<DIV align=left><SPAN class=657444416-10082006><FONT face=Arial color=#0000ff size=2>But as it is, the framework is a marketing tool for the 
books, so I am incented to use the framework to get people to buy the 
books.</FONT></SPAN></DIV>
<DIV align=left><SPAN class=657444416-10082006><FONT face=Arial color=#0000ff size=2></FONT></SPAN>&nbsp;</DIV>
<DIV align=left><SPAN class=657444416-10082006><FONT face=Arial color=#0000ff size=2>Rocky</FONT></SPAN></DIV><BR>
<BLOCKQUOTE>
  <DIV class=OutlookMessageHeader align=left>One more thing, 
  every help regarding CSLA.net is depends on either forum or on the Books 
  (which you are referring). Will it not be good if you will provide sample 
  chapters on your site (like 2-3 chapters) that will give idea to make a 
  decision regarding CSLA technology and how to use it? After this if we need to 
  go ahead with CSLA.net we can buy the 
book.<O:P></O:P></DIV></BLOCKQUOTE></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
