<html><header><title>PropertyHasChanged()</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>PropertyHasChanged()</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/4019.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>ataylorm posted on Monday, December 10, 2007</h2><P>It must be the crazy schedule or something, but three of us have been sitting here with our Expert C# 2005 Business Objects books and our code and we can't seem to figure out why this isn't working...&nbsp; Any assistance so we can go home to our wifes/kids would be great.&nbsp; Thanks</P>
<P>The code below is generating the following error on PropertyHasChanged() in the firstname property set code.</P>
<P>Error&nbsp;1&nbsp;Cannot access protected member 'Csla.Core.BusinessBase.PropertyHasChanged()' via a qualifier of type 'ProjectUnicorn.Library.UMUser.UMUserAccount'; the qualifier must be of type 'ProjectUnicorn.Library.UMUser.UMUserAccount' (or derived from it)&nbsp;C:\Code\Project Unicorn\ProjectUnicorn.Library\UMUser.cs&nbsp;119&nbsp;21&nbsp;ProjectUnicorn.Library<BR><FONT color=#0000ff size=2></FONT></P>
<P><FONT color=#0000ff size=2>public</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>class</FONT><FONT size=2> </FONT><FONT color=#2b91af size=2>UMUser</FONT><FONT size=2> : Csla.</FONT><FONT color=#2b91af size=2>BusinessBase</FONT><FONT size=2>&lt;</FONT><FONT color=#2b91af size=2>UMUser</FONT><FONT size=2>&gt;</P>
<P>{</P><FONT size=2>
<P></FONT><FONT color=#0000ff size=2>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>class</FONT><FONT size=2> </FONT><FONT color=#2b91af size=2>UMUserAccount</P></FONT><FONT size=2>
<P>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</P><FONT size=2>
<P></FONT><FONT color=#0000ff size=2>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>string</FONT><FONT size=2> FirstName<BR></FONT><FONT size=2>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT color=#0000ff size=2>get</FONT><FONT size=2> { </FONT><FONT color=#0000ff size=2>return</FONT><FONT size=2> _FirstName; }<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT color=#0000ff size=2>set</FONT><FONT size=2> {<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PropertyHasChanged();<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT size=2>_FirstName = </FONT><FONT color=#0000ff size=2>value</FONT><FONT size=2>; }<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</FONT></P>
<P>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</P><FONT size=2><FONT size=2>
<P></FONT><FONT color=#0000ff size=2>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;protected</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>override</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>void</FONT><FONT size=2> AddBusinessRules()<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ValidationRules.AddRule(</FONT><FONT color=#0000ff size=2>new</FONT><FONT size=2> </FONT><FONT color=#2b91af size=2>RuleHandler</FONT><FONT size=2>(</FONT><FONT color=#2b91af size=2>CommonRules</FONT><FONT size=2>.StringMaxLength),<BR></FONT><FONT color=#0000ff size=2>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;new</FONT><FONT size=2> </FONT><FONT color=#2b91af size=2>CommonRules</FONT><FONT size=2>.</FONT><FONT color=#2b91af size=2>MaxLengthRuleArgs</FONT><FONT size=2>(</FONT><FONT color=#a31515 size=2>"Address1"</FONT><FONT size=2>, 50));<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ValidationRules.AddRule(</FONT><FONT color=#0000ff size=2>new</FONT><FONT size=2> </FONT><FONT color=#2b91af size=2>RuleHandler</FONT><FONT size=2>(</FONT><FONT color=#2b91af size=2>CommonRules</FONT><FONT size=2>.StringMaxLength),<BR></FONT><FONT color=#0000ff size=2>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;new</FONT><FONT size=2> </FONT><FONT color=#2b91af size=2>CommonRules</FONT><FONT size=2>.</FONT><FONT color=#2b91af size=2>MaxLengthRuleArgs</FONT><FONT size=2>(</FONT><FONT color=#a31515 size=2>"FirstName"</FONT><FONT size=2>, 10));<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</P>
<P></FONT><FONT color=#0000ff size=2>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;protected</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>override</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>void</FONT><FONT size=2> PropertyHasChanged(</FONT><FONT color=#0000ff size=2>string</FONT><FONT size=2> propertyName)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<BR></FONT><FONT color=#0000ff size=2>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;base</FONT><FONT size=2>.PropertyHasChanged(propertyName);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</FONT></P>
<P><FONT size=2>}</P></FONT></FONT></FONT></FONT></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>DocJames replied on Tuesday, December 11, 2007</h2><P>Hey,</P>
<P>Why do you have the properties inside it's own class?</P>
<P>Shouldn't you remove the "<FONT color=#0000ff>public</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>class</FONT><FONT size=2> </FONT><FONT color=#2b91af size=2>UMUserAccount</FONT>" declaration?</P>
<P>Also, why do you override PropertyHasChanged and just call the base?</P>
<P>Thanks,</P>
<P>Jimmy</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>danielmartind replied on Tuesday, December 11, 2007</h2><P>Hi,</P>
<P>&nbsp;</P>
<P>I am quite new at this but in addition to DocJames comments I think you need to put the PropertyHasChanged() method at the end of the set method to read as follows</P>
<P><FONT color=#0000ff>&nbsp;public</FONT><FONT size=2> </FONT><FONT color=#0000ff size=2>string</FONT><FONT size=2> FirstName<BR></FONT><FONT size=2>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT color=#0000ff size=2>get</FONT><FONT size=2> { </FONT><FONT color=#0000ff size=2>return</FONT><FONT size=2> _FirstName; }<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT color=#0000ff size=2>set</FONT><FONT size=2> {<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT><FONT size=2>_FirstName = </FONT><FONT color=#0000ff size=2>value</FONT><FONT size=2>; </FONT></P>
<P>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<FONT size=2>PropertyHasChanged();</FONT></P>
<P><FONT size=2>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</FONT><FONT size=2><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</FONT></P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>tmg4340 replied on Tuesday, December 11, 2007</h2><P><FONT face=Tahoma size=2>Well - first off, I'm going to agree with previous folks on the head-scratcher part - y</FONT><FONT face=Tahoma size=2>ou don't need to override "PropertyHasChanged" if you're just going to call the base version.</FONT></P>
<P><FONT face=Tahoma size=2>Beyond that, there are a couple of things I see with the&nbsp;code you've posted:&nbsp;</FONT></P>
<P><FONT face=Tahoma size=2>1. If you're not going to specify the name of the property in the "PropertyHasChanged" call, then you need to decorate your setters &amp; getters with the "NoInlining" attribute.&nbsp; It's not in the book, but it's been discussed somewhat extensively on this website.&nbsp; Check out this link for a brief explanation:</FONT></P>
<P><A HREF="/forums/thread/5741.aspx"><FONT face=Tahoma size=2>http://forums.lhotka.net/forums/thread/5741.aspx</FONT></A></P>
<P><FONT face=Tahoma size=2>However, as you'll notice in Rocky's statements, that shouldn't cause your program to throw an exception.&nbsp; I've never done it that way, so I can't say for sure.&nbsp; But you either need to provide the attributes, or else you need to explicity&nbsp;provide the name of the property in the "PropertyHasChanged" call.&nbsp; I'd suggest the latter, if for no other reason than Rocky is deprecating the no-parameter version in the latest version of CSLA.</FONT></P>
<P><FONT face=Tahoma size=2>2. I'm not exactly sure how "UMUserAccount" is used, but if you're going to expect it to participate in all the CSLA goodness, it needs to derive from one of the CSLA base classes.&nbsp; Given your sample, I'm presuming that it should be a BusinessBase-derived class.&nbsp; Can't tell whether it is a child class from this sample, though it appears it may be that as well.&nbsp; Your code may be "working" (i.e. compiling)&nbsp;because UMUserAccount is nested within a CSLA-derived class, and thus is given access to methods in "UMUser" that it normally wouldn't have.</FONT></P>
<P><FONT face=Tahoma size=2>HTH</FONT></P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ataylorm replied on Tuesday, December 11, 2007</h2><P>Thanks for all the info.&nbsp; We are still trying to get our heads around the CSLA as none of us have used it before and we are working on an impossible schedule.&nbsp; (What's new :)&nbsp; ).</P>
<P>The reason UMUserAccount is a child of UMUser is because the boss doesn't want us loading more into memory than absolutely required.&nbsp; So UMUserAccount, UMUserProfile, etc. won't be "populated" unless they are created and a populate method is called.</P>
<P>So basically UMUser contains properties such as UserID, UserName, Password, etc. that are loaded when the user signs in.&nbsp; If they go to their user account page, that is when UMUserAccount is created and populated.&nbsp; Make sense?</P>
<P>I took out the override of PropertyHasChanged() and I tried:</P>
<P>public class UMUserAccount : Csla.BusinessBase&lt;UMUserAccount&gt;</P>
<P>however that wouldn't build.&nbsp; Any ideas?</P>
<P>I REALLY appreciate all the help.</P>
<P>Andrew</P>
<P>&nbsp;</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ataylorm replied on Tuesday, December 11, 2007</h2><P>Hey Guys,</P>
<P>Thanks for the help, I got it working great!&nbsp; All I need now is to figure out how to do it with a structure.&nbsp; :)</P>
<P>Thanks!</P></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
