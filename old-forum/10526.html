<html><header><title>Performance challange why shuld object take 7 second for fetching?</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Performance challange why shuld object take 7 second for fetching?</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/10526.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>Saman posted on Thursday, July 14, 2011</h2><p>Hello </p>
<p>I searched about performance tuning in CSLA as my&nbsp; application is too slow</p>
<p>i checked the penalty of linq and i found that performance hit is not related to it.</p>
<p>first of all i have a business object&nbsp; Personnel that defined as follow:</p>
<p>&nbsp;[Serializable]<br />&nbsp;&nbsp;&nbsp; [Csla.Server.ObjectFactory(&quot;PMS.PersonnelFactory,PMS&quot;, &quot;Create&quot;, &quot;Fetch&quot;, &quot;Update&quot;, &quot;Delete&quot;)] <br />&nbsp;&nbsp;&nbsp; public class Personnel : BusinessBase&lt;Personnel&gt;<br />&nbsp;&nbsp;&nbsp; {<br /><br />&nbsp; public static Personnel GetPersonnel(string id)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; FetchPersonnel type = new FetchPersonnel(&quot;ByID&quot;,id,&quot;&quot;);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return DataPortal.Fetch&lt;Personnel&gt;(new SingleCriteria&lt;FetchPersonnel&gt;(type));<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</p>
<p>}</p>
<p>&nbsp;</p>
<p><span style="text-decoration:underline;"><b>and i have factory class:</b></span></p>
<p>&nbsp;public Personnel Fetch(SingleCriteria&lt;FetchPersonnel&gt; criteria)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; var obj = (Personnel)MethodCaller.CreateInstance(typeof(Personnel));<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; using (var ctx = ContextManager&lt;PMS.DAL.PMSDALDataContext&gt;.GetManager(&quot;PMS&quot;))<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (criteria.Value.SearchType == &quot;ByID&quot;)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; try<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; var item = ctx.DataContext.fn_GetPersonnel(criteria.Value.SerarchID).First();<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; obj = GetPersonnel(item.PersonnelID_pkey, item.NationalID_id, item.Name_name, item.Family_name, item.Image_img.ToArray(), item.OrgPost_other, item.UnitID_pkey, item.UnitName_other, item.StatusID_pkey, item.StatusName_other, item.IPAddress_ipadd, item.RoleID_pkey, item.RoleName_other, item.ActiveID_pkey, item.Password_pass, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }catch(Exception){}<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</p>
<p>}</p>
<p>}</p>
<p>this process takes 7 second.</p>
<p>am i using anything wrong?</p>
<p>&nbsp;</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JonnyBee replied on Thursday, July 14, 2011</h2><p>Use a NET profiler to find where the time is spent.</p>
<p>VS2010 Professional and higher has a built in profiler that should do the job just fine.</p>
<p>dotTrace and Ants Profiler are more advanced commercial alternatives. </p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Saturday, July 16, 2011</h2><p>It would help to see your GetPersonnel method, as that&#39;s probably where the problem is.</p>
<p>One common thing to check would be to ensure that you wrap your statments which load data into you business object in a BypassPropertyCheck, as this will disable the normal rule running as well as the raising of various events (which no one is listening to yet anyway).</p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
