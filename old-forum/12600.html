<html><header><title>Questions about upgrade path</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Questions about upgrade path</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/12600.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>bgilbert posted on Thursday, April 24, 2014</h2><p>My team currently supports a WinForms application (~100k lines of code) built on top of CSLA 3.6.3. We are using mainly unmanaged properties (we got started before managed properties were introduced). The few classes we built using managed properties were done in 3.6.3. We are now looking at upgrading to the newest version and have some concerns.</p>
<p>I should mention that, while we are using DataPortal methods, everything runs locally and we are not considering an application server. We are also not considering any other client technology, like a web UI.&nbsp;</p>
<p>As Rocky mentioned in <a href="http://stackoverflow.com/questions/22684956/reworking-legacy-app-into-a-current-net-domain-model-framework-similar-to-csla">this post on Stack Overflow</a>, the amount of work looks daunting. In some of my recent experience with managed properties, it can save a little work and a few lines of code, but can introduce some complexity and a learning curve that seems like a distraction. A couple of examples:</p>
<p><ol>
<li>We like being able to hover over a backer field in the ide to see its value; harder to do with a managed property.</li>
<li>We recently spent two days trying to understand why a child object was not garbage collected and turned up in another object; moving to an unmanaged property immediately solved the issue, though I&#39;m still not sure why. Very frustrating.</li>
</ol></p>
<p>&nbsp;</p>
<p>Before we start down the path of upgrading, we want to be really sure it will be time well spent. We have two other options: stick with our current version (3.6.3) or ditch CSLA and rewrite some key functionality into our own base classes. If we do decide to upgrade, we are facing a huge task. We cannot upgrade in pieces, so we would likely spend several months fixing the code before we could ever get it to compile and by then we might conclude that we fundamentally misunderstood how to use managed properties. The same holds true for the way validation rules are now structured.</p>
<p>My questions: are there any good ways to do this gradually? Could we reference two versions of CSLA? Could we use unmanaged properties and the older validation rules methods in the newest version? What are the risks of other significant changes to the basic model of CSLA down the road?</p>
<p>&nbsp;</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>tiago replied on Sunday, April 27, 2014</h2><p><div style='padding-left: 50px;background-color:silver'><b>bgilbert<br></b></p>
<p>Before we start down the path of upgrading, we want to be really sure it will be time well spent. We have two other options: stick with our current version (3.6.3) or ditch CSLA and rewrite some key functionality into our own base classes. If we do decide to upgrade, we are facing a huge task. We cannot upgrade in pieces, so we would likely spend several months fixing the code before we could ever get it to compile and by then we might conclude that we fundamentally misunderstood how to use managed properties. The same holds true for the way validation rules are now structured.</p>
<p>My questions: are there any good ways to do this gradually? Could we reference two versions of CSLA? Could we use unmanaged properties and the older validation rules methods in the newest version? What are the risks of other significant changes to the basic model of CSLA down the road?</p>
<p></div></p>
<p>Hi BGilbert,</p>
<p>A small application just for the purpose of mastering the new business rules might make it easier to estimate the time cost of the upgrading.</p>
<p>Concerning gradually upgrading, since you can&#39;t reference two different versions, maybe you could do it the dirty way: grab the latest source and rename the namespace to Xsla instead of Csla.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>tiago replied on Sunday, April 27, 2014</h2><p>You can read <a href="http://forums.lhotka.net/forums/p/12577/57187.aspx#57187">JonnyBee reply</a>&nbsp;on this thread. Jonny explains how you can upgrade bit by bit.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Sunday, April 27, 2014</h2><p>Actually you can reference two versions of Csla and upgrade over time <a href="http://forums.lhotka.net/forums/p/9893/46391.aspx#46391">http://forums.lhotka.net/forums/p/9893/46391.aspx#46391</a></p>
<p>More information about upgrading here <a href="http://www.lhotka.net/cslanet/faq/CslaVersions.ashx">http://www.lhotka.net/cslanet/faq/CslaVersions.ashx</a></p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>bgilbert replied on Monday, April 28, 2014</h2><p>Thanks, Andy. We have successfully referenced two versions and are starting to do a gradual upgrade.</p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
