<html><header><title>ComboBox and Custom Objects</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>ComboBox and Custom Objects</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/3028.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>ksirmons posted on Tuesday, June 12, 2007</h2><P class=MsoNormal><FONT face=Calibri>Howdy,</FONT></P>
<P class=MsoNormal><FONT face=Calibri>I have a class, TestRequest (BusinessBase), that contains a custom object _requestor as UserInfo.<SPAN>&nbsp; </SPAN><SPAN>&nbsp;&nbsp;</SPAN>UserInfo is a ReadOnlyBase object that holds the requesting doctors first name, last name, and ID.</FONT></P>
<P class=MsoNormal><FONT face=Calibri>UserInfo’s behavior is its ability to represent the doctors name in almost any combination, first last or last, first.</FONT></P>
<P class=MsoNormal><FONT face=Calibri>I have created a UserInfoList (Readonly List Base) that can get a list of users<SPAN>&nbsp; </SPAN>-- GetDoctors.</FONT></P>
<P class=MsoNormal><FONT face=Calibri>I can set a datasource <SPAN>&nbsp;</SPAN>for this ComboBox and display a list of doctors to choose from.<SPAN>&nbsp; </SPAN></FONT></P>
<P class=MsoNormal><FONT face=Calibri>How can I get the databinding to work so I can select an item out of this list and a UserInfo object be sent to the _requestor setter property?</FONT></P>
<P class=MsoNormal><FONT face=Calibri>Can an “Object” be selected from a combo box and bound to a property?<SPAN>&nbsp; </SPAN>Or do I have to use the UserInfo.ID and make my TestRequest use an Integer type for _requestor in place of UserInfo?</FONT></P>
<P class=MsoNormal><o:p><FONT face=Calibri>&nbsp;</FONT></o:p></P>
<P class=MsoNormal><FONT face=Calibri>I hope I am asking the correct question here.</FONT></P>
<P class=MsoNormal><FONT face=Calibri>Thank you for any help you can provide.</FONT></P>
<P class=MsoNormal><FONT face=Calibri>Keith</FONT></P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Brian Criswell replied on Tuesday, June 12, 2007</h2>You can bind to the ComboBox SelectedItem property, but I would really recommend holding an id in your object and binding to SelectedValue instead.&nbsp; Holding a reference to the selected item causes an issue with the n-level undo of CSLA.&nbsp; The undo serializes the selected item's values onto the undo stack instead of making a note that it is the selected item.&nbsp; So if you change which item is selected, it does not undo properly.<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ksirmons replied on Tuesday, June 12, 2007</h2><P>Thank you.&nbsp; I don't think that I mentioned it on the original post, but does it make a difference if I am doing this on the web?</P>
<P>&nbsp;</P>
<P>Keith</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Brian Criswell replied on Tuesday, June 12, 2007</h2>N-level undo usually does not factor in to web development, but I would personally suggest that you expose the id.&nbsp; Maybe some other people will chime in.<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ksirmons replied on Tuesday, June 12, 2007</h2><P>So you would vote for using an integer in my business object to hold the primary key of the doctors user record in place of a user object?&nbsp; </P>
<P>It would seem much more powerful to treat a doctor as an object instead of as an ID.</P>
<P>&nbsp;</P>
<P>Keith</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Brian Criswell replied on Tuesday, June 12, 2007</h2>There is nothing to say that you cannot look up that doctor based on the id you hold.&nbsp; What would you do with this doctor reference within your object?<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ksirmons replied on Tuesday, June 12, 2007</h2><P class=MsoNormal><FONT face=Calibri>That is a good question.&nbsp; So you would advocate when dealing with “relational” objects to store the foreign key as an ID in place of storing the child object?&nbsp; Is there ever a case where you would want/need to use a Child Object in place of an ID?</FONT></P>
<P class=MsoNormal><o:p><FONT face=Calibri>&nbsp;</FONT></o:p></P>
<P class=MsoNormal><FONT face=Calibri>I could make up a case for storing the Child Object here, but it would be weak…<SPAN>&nbsp; </SPAN>The “What If” I need to show the doctors name on the page in more than one place would require multiple database trips to get the Doctors name for each instance it is displayed, or create a temporary var to hold it once and use it over the rest of the page.</FONT></P>
<P class=MsoNormal><o:p><FONT face=Calibri>&nbsp;Keith</FONT></o:p></P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Brian Criswell replied on Tuesday, June 12, 2007</h2>Yes, I store the id for lookups.&nbsp; In the cases where I have needed to display another piece of the data, I either have the UI hold a reference to the lookup list to use in a combobox or cached within the object.&nbsp; When using it within the object, I lazy load the list and expose just the parts I want as properties on my object.&nbsp; So for a name<br><br>public string DoctorName<br>{<br>&nbsp;&nbsp;&nbsp; get<br>&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;  CanReadProperty("DoctorId", true);<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;  if (_doctorId &gt; 0)<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;  {<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;  Doctor doctor = this.Doctors.GetDoctor(_doctorId);&nbsp;&nbsp;&nbsp; // Lazy-loaded doctors property with my custom GetDoctor by id method<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;  &nbsp;&nbsp;  if (doctor != null)<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;  &nbsp;&nbsp;  {<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;  &nbsp;&nbsp;  &nbsp;&nbsp;  return doctor.Name;<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;  &nbsp;&nbsp;  }<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;  }<br><br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;  return string.Empty;<br>&nbsp;&nbsp;&nbsp; }<br>}<br><br>So store an id in your business object and use the looked up object where you need it.<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ksirmons replied on Wednesday, June 13, 2007</h2><P>Thank you.&nbsp; I will transition my objects toward this frame of thought.&nbsp; </P>
<P>One of the reasons I wanted to use a custom object was so I could use a DataFormatString on the UI side to format the name in several standard formats.&nbsp; (First Last or Last, First or FL)</P>
<P>Would you know how to use the DataFormatString in this situation?&nbsp; As far as I know, the DataFormatString uses the objects ToString method that is overloaded.&nbsp; </P>
<P>Here is the other post: <A HREF="/forums/thread/15307.aspx">http://forums.lhotka.net/forums/thread/15307.aspx</A>&nbsp;that you helped me on as well.</P>
<P>Keith</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Brian Criswell replied on Wednesday, June 13, 2007</h2>I think you just have your object implement IFormattable.&nbsp; The ToString(string) method that you implement handles what format strings are acceptable and what they will mean.<br></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
