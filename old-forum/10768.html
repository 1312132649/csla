<html><header><title>CSLA4 and Razor WebGrid Help - (StackOverflowException)</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>CSLA4 and Razor WebGrid Help - (StackOverflowException)</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/10768.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>drpuff posted on Wednesday, October 12, 2011</h2><p>Hi,</p>
<p>Due to a major scope change, I&#39;ve recently upgraded an existing project from CSLA3.8 + WPF to CSLA4 + MVC3 (razor). I should let you know at this point that I have much less experience with ASP.NET than WPF!</p>
<p>My issue is with trying to use the WebGrid with a &#39;ReadOnlyListBase&#39; in ASP.NET - it always generates a StackOverflowException.</p>
<p>I can easily display the items in the ROLB, using the sytax shown by Rocky in the ASP.NET MVC ebook (i.e., using a &#39;foreach&#39; loop), but it seems that using a WebGrid would be more compact (I&#39;m planning on lazy-loading a 3-level BO hierarchy using Ajax).</p>
<p>Here&#39;s my code:</p>
<pre style="font-family:Consolas;font-size:13px;color:black;background:none repeat scroll 0% 0% white;"><span style="background:none repeat scroll 0% 0% yellow;">@model&nbsp;</span><span style="color:#2b91af;">IEnumerable</span>&lt;<span style="color:#2b91af;">AssetROInfo</span>&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<span style="background:none repeat scroll 0% 0% yellow;">@{</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:blue;">var</span>&nbsp;assetGrid&nbsp;=&nbsp;<span style="color:blue;">new</span>&nbsp;<span style="color:#2b91af;">WebGrid</span>(source:&nbsp;Model,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;defaultSort:&nbsp;<span style="color:#a31515;">&quot;Code&quot;</span>,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rowsPerPage:&nbsp;5,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;canPage:&nbsp;<span style="color:blue;">true</span>,&nbsp;canSort:&nbsp;<span style="color:blue;">true</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);&nbsp;&nbsp;
<span style="background:none repeat scroll 0% 0% yellow;">}<br /></span><br /><span style="color:blue;">&lt;</span><span style="color:maroon;">h3</span><span style="color:blue;">&gt;</span>Asset&nbsp;List<span style="color:blue;">&lt;/</span><span style="color:maroon;">h3</span><span style="color:blue;">&gt;</span>
 
<span style="color:blue;"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="background:none repeat scroll 0% 0% yellow;">@</span>assetGrid.GetHtml(
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tableStyle:&nbsp;<span style="color:#a31515;">&quot;grid&quot;</span>,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;headerStyle:&nbsp;<span style="color:#a31515;">&quot;head&quot;</span>,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;alternatingRowStyle:&nbsp;<span style="color:#a31515;">&quot;alt&quot;</span>,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;columns:&nbsp;assetGrid.Columns(
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;assetGrid.Column(<span style="color:#a31515;">&quot;Id&quot;</span>,&nbsp;<span style="color:#a31515;">&quot;ID&quot;</span>),
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;assetGrid.Column(<span style="color:#a31515;">&quot;Code&quot;</span>,&nbsp;<span style="color:#a31515;">&quot;Asset&nbsp;Code&quot;</span>),
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;assetGrid.Column(<span style="color:#a31515;">&quot;Description&quot;</span>,&nbsp;<span style="color:#a31515;">&quot;Asset&nbsp;Desc&quot;</span>)&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)&nbsp;&nbsp;&nbsp;&nbsp;
</pre>
<p>&nbsp;</p>
<p>...and the StackOverflowException is happening on the</p>
<pre style="font-family:Consolas;font-size:13px;color:black;background:none repeat scroll 0% 0% white;"><span style="background:none repeat scroll 0% 0% yellow;">@</span>assetGrid.GetHtml</pre>
<p> call. I am unable to find any examples of using <b>WebGrid </b>with CSLA classes....am I missing something fundamental here?</p>
<p>It just seems like such a simple problem but I can&#39;t get to the cause of the problem. Would be grateful if anyone can help with this (or detail an appropriate approach).</p>
<p>Thanks, </p>
<p>John</p>
<p>[As this is my first post, I just have to say how impressed I&#39;ve been with Csla since we started employing it 1.5yrs ago - Rocky, you&#39;ve done a superb job...so thanks very much!]</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Thursday, October 13, 2011</h2><p>I honestly haven&#39;t tried using the WebGrid component.</p>
<p>Can you post the full stack trace? Maybe there&#39;s a clue in there.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JonnyBee replied on Thursday, October 13, 2011</h2><p>Or could you post a small sample project that fails so we could debug this in CSLA? </p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>drpuff replied on Monday, January 23, 2012</h2><p>Hey I&#39;m really sorry guys. You responded so quickly to my original post and I was rude and never came back to supply you with more information. Truth be told I had to leave what I was doing at the time and address some other pressing projects...I&#39;ll take a look at the initial problem and get back to you ASAP.</p>
<p>Sorry, John</p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
