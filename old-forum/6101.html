<html><header><title>CSLA with Web Service portal, how to troubleshoot &quot;unable to load type&quot; problems?</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>CSLA with Web Service portal, how to troubleshoot &quot;unable to load type&quot; problems?</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/6101.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>rsbaker0 posted on Wednesday, January 07, 2009</h2><P>I'm testing the web service portal on a new machine to see what will be required to deploy it, and I'm getting this exception:</P>
<P>Server was unable to process request. ---&gt; Unable to load type Csla.WORMapper.WORMapperBusinessBase`1+ExistsCommand[[Company.Application.Data.GlobalSettings, CMDATA, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]] required for deserialization.</P>
<P>Note that the exact same binaries (at least virtual directory contents) work properly on another machine. Also, the application itself will run on the same IIS box over a local data portal. </P>
<P>Any idea how I would go about figuring out what is wrong here? </P>
<P>Here is a partial stack back trace:</P>
<P>&nbsp;&nbsp; at System.Web.Services.Protocols.SoapHttpClientProtocol.ReadResponse(SoapClientMessage message, WebResponse response, Stream responseStream, Boolean asyncCall)<BR>&nbsp;&nbsp; at System.Web.Services.Protocols.SoapHttpClientProtocol.Invoke(String methodName, Object[] parameters)<BR>&nbsp;&nbsp; at Csla.WebServiceHost.WebServicePortal.Update(Byte[] requestData) in C:\Application.NET3\Csla-3.5.1\Web References\WebServiceHost\Reference.cs:line 154<BR>&nbsp;&nbsp; at Csla.DataPortalClient.WebServicesProxy.Update(Object obj, DataPortalContext context) in C:\Application.NET3\Csla-3.5.1\DataPortal\Client\WebServicesProxy.cs:line 100<BR>&nbsp;&nbsp; at Csla.DataPortal.Update(Object obj) in C:\Application.NET3\Csla-3.5.1\DataPortal\Client\DataPortal.cs:line 435<BR>&nbsp;&nbsp; at Csla.DataPortal.Update[T](T obj) in C:\Application.NET3\Csla-3.5.1\DataPortal\Client\DataPortal.cs:line 322<BR>&nbsp;&nbsp; at Csla.DataPortal.Execute[T](T obj) in C:\Application.NET3\Csla-3.5.1\DataPortal\Client\DataPortal.cs:line 279<BR>&nbsp;&nbsp; at Csla.WORMapper.CommandWithArg`3.Execute(String databaseKey, A arg) in C:\Application.NET3\Csla.WORMapper\CommandWithArg.cs:line 52<BR>&nbsp;&nbsp; at Csla.WORMapper.CommandWithArg`3.Execute(A arg) in C:\Application.NET3\Csla.WORMapper\CommandWithArg.cs:line 42<BR>&nbsp;&nbsp; at Csla.WORMapper.WORMapperBusinessBase`1.Exists(Object objectKey) in C:\Application.NET3\Csla.WORMapper\WORMapperBusinessBase.cs<BR></P>
<P></P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Wednesday, January 07, 2009</h2>Are you sure the business assemblies are in the bin directory?</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>rsbaker0 replied on Thursday, January 08, 2009</h2><P><BLOCKQUOTE><div><img src="/Themes/default/images/icon-quote.gif"> <strong>RockfordLhotka:</strong></div><div>Are you sure the business assemblies are in the bin directory?</div></BLOCKQUOTE></P>
<P>Well, I had assumed so, since I had just copied my virtual directory from the "working" web service&nbsp;(and subdirectories) on my development box to the IIS test box. </P>
<P>It turns out you were on the right track, because I then tried copying everything from a full application install (e.g. the local data portal installation that works) into the bin directory of the web service, and it worked, so there must be something visible to the web service on the development box that isn't in the bin directory (e.g. hiding in the GAC, etc.)</P>
<P>I can cull the files by trial and error until it breaks again to determine which file it was, but is there any way to diagnose this more cleanly?&nbsp;(e.g. get the error message to tell you which assembly was needed by couldn't be found?)</P></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
