<html><header><title>Multiple Nested Collections in CSLA.NET 1.0</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Multiple Nested Collections in CSLA.NET 1.0</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/247.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>Gunner posted on Thursday, June 01, 2006</h2><P>Hi, I've got a situation where I have many nested collections similar to the following:</P>
<P>Warehouse object contains collection of Shelf objects</P>
<P>Shelf object contains collection of Box objects</P>
<P>Box object contains collections of Ball objects and Doll objects</P>
<P>With just one collection as the property of an object, I know the Fetch can load both the main object and the collection data in with the same procedure, but I'm not sure how to write the code &amp; sql to do multiple layers.&nbsp; Can anyone help?</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>hurcane replied on Thursday, June 01, 2006</h2>Do you have a use case where you are editing the warehouse, shelves, boxes, balls and dolls all at the same time? Is there a single maintenance form that manages all of these objects simultaneously?<br><br>Usually when you design a complex hierarchy like this, it is due to having a broad data focus instead of a specific behavior focus. I'm willing to bet that your maintenance forms aren't dealing with more than a couple objects at a time. For maintenance, design your objects in the context of the business case that supports the specific maintenance form.<br><br>You should also consider Navigational context. The shelf maintenance form may need to provide access to the warehouse maintenance form. ProjectTracker has this kind of navigational context between a Project and a Resource. You could have this navigational context between Warehouse &lt;-&gt; Shelf, Shelf &lt;-&gt; Box, etc.<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Thursday, June 01, 2006</h2>If you really do need to load grandchild objects (which does happen fairly often), you can't use the technique shown in the book. It isn't realistic to use a single stored procedure call to load all the data - at least not unless you are willing to do a lot of work to reconcile which data goes with which child.<br><br>This topic was discussed quite often on the old forum - so you might try www.searchcsla.com to find an answer. Many people, from what I read, chose to use a DataSet to load the data (because it does the complex reconciliation) and then load your objects' fields from the DataSet. That makes for pretty simple code in your data access methods and provides a reasonably elegant solution overall.<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>amselem replied on Thursday, June 01, 2006</h2><P>Most people here use the DataSet approach with complex hierachies but&nbsp;I opted&nbsp;to stay with the datareader instead. If anyone is interested, I described this approach in the old forum: <A href="http://www.searchcsla.com/Details.aspx?msn_id=24427">http://www.searchcsla.com/Details.aspx?msn_id=24427</A><BR>As Rocky said some work has to be done to reconcile the data with the BO hierarchy; my approach does all this work in the stored procedure instead of the BO's, so all of them can load the data through a datareader.</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>esteban404 replied on Thursday, June 01, 2006</h2><P>I am interested to know the purpose of the temp tables. I probably just haven't experienced the need, but I'd like to understand it. I read the linked thread, but didn't quite get it. Seems like the tables were used to hold hierachical data in limbo so it could be order-read into the BOs. I use separate select statements for child, grandchild data these days.</P>
<P>Oh, yea, and&nbsp;type slowly please. :-] I'll see if I can pursue the dataset approach more, too. My colleague favors that.</P>
<P>_E</P></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
