<html><header><title>Remoting error in PTracker</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Remoting error in PTracker</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/581.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>albruan posted on Monday, July 10, 2006</h2><P>I will be starting a new project with VS 2005&nbsp;later this week and I'm&nbsp;planning on using&nbsp;version 2.0.2 of CSLA as the framework for it.&nbsp; I've been playing around with PTracker to check out the changes in how it operates with CSLA compared to the two in version 1.5.&nbsp; Everything worked quite well when running it with the local dataportal, but knowing the project I'll be working on requires a remote portal, I uncommented the appropriate sections of the app.config file for PTWin.&nbsp; When I tried running it with the remote portal, I encountered an unhandled serialization exception.&nbsp; A portion of the details are as follows:</P>
<P>System.Runtime.Serialization.SerializationException was unhandled<BR>&nbsp; Message="The input stream is not a valid binary format. The starting contents (in bytes) are: 3C-68-74-6D-6C-3E-0D-0A-20-20-20-20-3C-68-65-61-64 ..."<BR>&nbsp; Source="mscorlib"<BR>&nbsp; StackTrace:<BR>&nbsp;&nbsp;&nbsp; Server stack trace: <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at System.Runtime.Serialization.Formatters.Binary.SerializationHeaderRecord.Read(__BinaryParser input)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at System.Runtime.Serialization.Formatters.Binary.__BinaryParser.ReadSerializationHeaderRecord()<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at System.Runtime.Serialization.Formatters.Binary.__BinaryParser.Run()<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at System.Runtime.Serialization.Formatters.Binary.ObjectReader.Deserialize(HeaderHandler handler, __BinaryParser serParser, Boolean fCheck, Boolean isCrossAppDomain, IMethodCallMessage methodCallMessage)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at System.Runtime.Serialization.Formatters.Binary.BinaryFormatter.Deserialize(Stream serializationStream, HeaderHandler handler, Boolean fCheck, Boolean isCrossAppDomain, IMethodCallMessage methodCallMessage)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at System.Runtime.Remoting.Channels.CoreChannel.DeserializeBinaryResponseMessage(Stream inputStream, IMethodCallMessage reqMsg, Boolean bStrictBinding)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at System.Runtime.Remoting.Channels.BinaryClientFormatterSink.SyncProcessMessage(IMessage msg)<BR>&nbsp;&nbsp;&nbsp; Exception rethrown at [0]: <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage reqMsg, IMessage retMsg)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData&amp; msgData, Int32 type)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at Csla.Server.IDataPortalServer.Fetch(Type objectType, Object criteria, DataPortalContext context)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at Csla.DataPortalClient.RemotingProxy.Fetch(Type objectType, Object criteria, DataPortalContext context) in C:\Visual Studio 2005 Projects\cslacs20-2.0.2\csla20cs\csla20cs\Csla\DataPortal\Client\RemotingProxy.cs:line 111<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at Csla.DataPortal.Fetch(Type objectType, Object criteria) in C:\Visual Studio 2005 Projects\cslacs20-2.0.2\csla20cs\csla20cs\Csla\DataPortal\Client\DataPortal.cs:line 184<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at Csla.DataPortal.Fetch[T](Object criteria) in C:\Visual Studio 2005 Projects\cslacs20-2.0.2\csla20cs\csla20cs\Csla\DataPortal\Client\DataPortal.cs:line 138<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at ProjectTracker.Library.Security.PTIdentity.GetIdentity(String username, String password) in C:\Visual Studio 2005 Projects\cslacs20-2.0.2\csla20cs\ProjectTracker20cs\ProjectTracker.Library\Security\PTIdentity.cs:line 57<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at ProjectTracker.Library.Security.PTPrincipal.Login(String username, String password) in C:\Visual Studio 2005 Projects\cslacs20-2.0.2\csla20cs\ProjectTracker20cs\ProjectTracker.Library\Security\PTPrincipal.cs:line 15<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at PTWin.LoginForm.OK_Click(Object sender, EventArgs e) in C:\Visual Studio 2005 Projects\cslacs20-2.0.2\csla20cs\ProjectTracker20cs\PTWin\LoginForm.cs:line 23<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at System.Windows.Forms.Control.OnClick(EventArgs e)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at System.Windows.Forms.Button.OnClick(EventArgs e)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at System.Windows.Forms.Button.PerformClick()<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at System.Windows.Forms.Form.ProcessDialogKey(Keys keyData)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at System.Windows.Forms.TextBoxBase.ProcessDialogKey(Keys keyData)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at System.Windows.Forms.Control.PreProcessMessage(Message&amp; msg)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at System.Windows.Forms.Control.PreProcessControlMessageInternal(Control target, Message&amp; msg)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at System.Windows.Forms.Application.ThreadContext.PreTranslateMessage(MSG&amp; msg)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at System.Windows.Forms.Application.ThreadContext.System.Windows.Forms.UnsafeNativeMethods.IMsoComponent.FPreTranslateMessage(MSG&amp; msg)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at System.Windows.Forms.Application.ComponentManager.System.Windows.Forms.UnsafeNativeMethods.IMsoComponentManager.FPushMessageLoop(Int32 dwComponentID, Int32 reason, Int32 pvLoopData)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at System.Windows.Forms.Application.ThreadContext.RunMessageLoopInner(Int32 reason, ApplicationContext context)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at System.Windows.Forms.Application.ThreadContext.RunMessageLoop(Int32 reason, ApplicationContext context)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at System.Windows.Forms.Form.ShowDialog(IWin32Window owner)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at PTWin.MainForm.DoLogin() in C:\Visual Studio 2005 Projects\cslacs20-2.0.2\csla20cs\ProjectTracker20cs\PTWin\MainForm.cs:line 321<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at PTWin.MainForm.MainForm_Load(Object sender, EventArgs e) in C:\Visual Studio 2005 Projects\cslacs20-2.0.2\csla20cs\ProjectTracker20cs\PTWin\MainForm.cs:line 33<BR><BR>I've used the code "as-is", making modifications only to PTWin's app.config file, as mentioned earlier, and modifying RemotingHost's web.config file to point to the database locations for security.mdf and ptracker.mdf.&nbsp; I also have an IIS virtual directory pointing to the location of the RemotingHost directory.&nbsp; Why am I getting this error and what can I do to resolve it?</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>albruan replied on Monday, July 10, 2006</h2><P>I don't know if it will help any, but I've copied the top three items on the Call Stack and they are as follows:<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Csla.dll!Csla.DataPortalClient.RemotingProxy.Fetch(System.Type objectType = {Name = "PTIdentity" FullName = "ProjectTracker.Library.Security.PTIdentity"}, object criteria = {ProjectTracker.Library.Security.PTIdentity.Criteria}, Csla.Server.DataPortalContext context = {Csla.Server.DataPortalContext}) Line 111<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Csla.dll!Csla.DataPortal.Fetch(System.Type objectType = {Name = "PTIdentity" FullName = "ProjectTracker.Library.Security.PTIdentity"}, object criteria = {ProjectTracker.Library.Security.PTIdentity.Criteria}) Line 184 + 0x12 bytes<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Csla.dll!Csla.DataPortal.Fetch&lt;ProjectTracker.Library.Security.PTIdentity&gt;(object criteria = {ProjectTracker.Library.Security.PTIdentity.Criteria}) Line 138 + 0x34 bytes<BR><BR>Additionally, when I try to navigate to <A href="http://localhost/remotinghost/remotingportal.rem?wsdl">http://localhost/remotinghost/remotingportal.rem?wsdl</A> as was done with CSLA 1.5 to verify the remote portal, I got back the following:<BR><BR>System.BadImageFormatException: The format of the file 'Csla' is invalid.<BR>File name: "Csla"<BR>&nbsp;&nbsp; at System.Reflection.Assembly.nLoad(AssemblyName fileName, String codeBase, Boolean isStringized, Evidence assemblySecurity, Boolean throwOnFileNotFound, Assembly locationHint, StackCrawlMark&amp; stackMark)<BR>&nbsp;&nbsp; at System.Reflection.Assembly.InternalLoad(AssemblyName assemblyRef, Boolean stringized, Evidence assemblySecurity, StackCrawlMark&amp; stackMark)<BR>&nbsp;&nbsp; at System.Reflection.Assembly.InternalLoad(String assemblyString, Evidence assemblySecurity, StackCrawlMark&amp; stackMark)<BR>&nbsp;&nbsp; at System.Reflection.Assembly.Load(String assemblyString)<BR>&nbsp;&nbsp; at System.Runtime.Remoting.RemotingConfigInfo.LoadType(String typeName, String assemblyName)<BR>&nbsp;&nbsp; at System.Runtime.Remoting.RemotingConfigInfo.GetServerTypeForUri(String URI)<BR>&nbsp;&nbsp; at System.Runtime.Remoting.RemotingConfigHandler.GetServerTypeForUri(String URI)<BR>&nbsp;&nbsp; at System.Runtime.Remoting.RemotingServices.GetServerTypeForUri(String URI)<BR>&nbsp;&nbsp; at System.Runtime.Remoting.Channels.Http.HttpRemotingHandler.CanServiceRequest(HttpContext context)<BR>&nbsp;&nbsp; at System.Runtime.Remoting.Channels.Http.HttpRemotingHandler.InternalProcessRequest(HttpContext context)</P>
<P>=== Pre-bind state information ===<BR>LOG: DisplayName = Csla<BR>&nbsp;(Partial)<BR>LOG: Appbase = <A>file:///C:/Visual</A> Studio 2005 Projects/cslacs20-2.0.2/csla20cs/ProjectTracker20cs/www/RemotingHost<BR>LOG: Initial PrivatePath = bin<BR>Calling assembly : (Unknown).<BR>===</P>
<P>LOG: Policy not being applied to reference at this time (private, custom, partial, or location-based assembly bind).<BR>LOG: Post-policy reference: Csla<BR>LOG: Attempting download of new URL <A>file:///C:/WINDOWS/Microsoft.NET/Framework/v1.1.4322/Temporary</A> ASP.NET Files/remotinghost/aacc57bc/441a8e6b/Csla.DLL.<BR>LOG: Attempting download of new URL <A>file:///C:/WINDOWS/Microsoft.NET/Framework/v1.1.4322/Temporary</A> ASP.NET Files/remotinghost/aacc57bc/441a8e6b/Csla/Csla.DLL.<BR>LOG: Attempting download of new URL <A>file:///C:/Visual</A> Studio 2005 Projects/cslacs20-2.0.2/csla20cs/ProjectTracker20cs/www/RemotingHost/bin/Csla.DLL.<BR><BR>I find it rather odd that it attempted to download new URLs from the .NET Framework version 1.1.&nbsp; I do still have VS 2003 loaded as I occasionally have to maintain code written to take advantage of CSLA 1.5.</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>albruan replied on Tuesday, July 11, 2006</h2>Figured it out after coming across the "(and possibly the TCP port)"&nbsp; reference at the bottom of page 608.&nbsp; As soon as I modified the CslaDataPortalUrl value from <A href="http://localhost/RemotingHost/RemotingPortal.rem">http://localhost/RemotingHost/RemotingPortal.rem</A> to <A href="http://localhost:1732/RemotingHost/RemotingPortal.rem">http://localhost<STRONG>:1732</STRONG>/RemotingHost/RemotingPortal.rem</A> the whole thing worked correctly.</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>kids_pro replied on Friday, July 14, 2006</h2>Hi albruan,<br><br>How lucky you are.<br>For me it a bit harder I can't figure out how to get over the problem.<br>My application work well when I connect to the dataportal without remote but when I try to use Remoting I start to get the error attached.<br><br>Please advice.<br>kids<br><br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>albruan replied on Friday, July 14, 2006</h2><P>It looks as if you're having the exact same problem I had with the only difference being that you're encountering it while attempting to use remoting with your own application rather than with PTracker.&nbsp; First, you'll need to determine what port ASP.NET is using to host your RemotingPortal; in my case, it was 1732.&nbsp; Using that port number, modify the line&nbsp;beginning with <EM>&lt;add key = "CslaDataPortalUrl"</EM> in the app.config file for your app such that the value portion of the key-value pair includes the port number.&nbsp; In my case, a change from "<EM>localhost/MyRemotingHost/RemotingPortal.rem"</EM> to "<EM>localhost<STRONG>:</STRONG></EM><STRONG>1732</STRONG><EM>/MyRemotingHost/RemotingPortal.rem" </EM>was all it took to get it working.</P>
<P>HTH,</P>
<P>Allen B. Anderson</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>kids_pro replied on Saturday, July 15, 2006</h2><P>Thanks albruan,</P>
<P>I have no problem running PTracker and using the same configuraton step I can't make my application to work. However I am not using Csla with SQL Server but MySql using MySql.Data.MySqlClient 1.0.7, MySql 5.0.22 I am not sure that is the root of the problem or not?</P>
<P>Many thanks,<BR>Kids</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>albruan replied on Saturday, July 15, 2006</h2><P>Kids,</P>
<P>Wow!&nbsp; I honestly don't know what to suggest doing, but I very seriously doubt it's because you're using MySQL.&nbsp; It still looks like it's the same problem that I had.&nbsp; As stated in my original post on this topic, and cleaned up some, I got the following response:</P>
<P><FONT size=2>The input stream is not a valid binary format. The starting contents (in bytes) are: 3C-68-74-6D-6C-3E-0D-0A-20-20-20-20-3C-68-65-61-64 ...<BR><BR>Server stack trace: <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at System.Runtime.Serialization.Formatters.Binary.SerializationHeaderRecord.Read(__BinaryParser input)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at System.Runtime.Serialization.Formatters.Binary.__BinaryParser.ReadSerializationHeaderRecord()<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at System.Runtime.Serialization.Formatters.Binary.__BinaryParser.Run()<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at System.Runtime.Serialization.Formatters.Binary.ObjectReader.Deserialize(HeaderHandler handler, __BinaryParser serParser, Boolean fCheck, Boolean isCrossAppDomain, IMethodCallMessage methodCallMessage)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at System.Runtime.Serialization.Formatters.Binary.BinaryFormatter.Deserialize(Stream serializationStream, HeaderHandler handler, Boolean fCheck, Boolean isCrossAppDomain, IMethodCallMessage methodCallMessage)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at System.Runtime.Remoting.Channels.CoreChannel.DeserializeBinaryResponseMessage(Stream inputStream, IMethodCallMessage reqMsg, Boolean bStrictBinding)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at System.Runtime.Remoting.Channels.BinaryClientFormatterSink.SyncProcessMessage(IMessage msg)<BR></FONT><FONT size=2><BR>&nbsp;&nbsp;&nbsp; Exception rethrown at [0]: <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage reqMsg, IMessage retMsg)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData&amp; msgData, Int32 type)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at Csla.Server.IDataPortalServer.Fetch(Type objectType, Object criteria, DataPortalContext context)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at Csla.DataPortalClient.RemotingProxy.Fetch(Type objectType, Object criteria, DataPortalContext context)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at Csla.DataPortal.Fetch(Type objectType, Object criteria)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at Csla.DataPortal.Fetch[T](Object criteria)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at ProjectTracker.Library.Security.PTIdentity.GetIdentity(String username, String password) in C:\Visual Studio 2005 Projects\cslacs20-2.0.2\csla20cs\ProjectTracker20cs\ProjectTracker.Library\Security\PTIdentity.cs:line 57<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at ProjectTracker.Library.Security.PTPrincipal.Login(String username, String password) in C:\Visual Studio 2005 Projects\cslacs20-2.0.2\csla20cs\ProjectTracker20cs\ProjectTracker.Library\Security\PTPrincipal.cs:line 15<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at PTWin.LoginForm.OK_Click(Object sender, EventArgs e) in C:\Visual Studio 2005 Projects\cslacs20-2.0.2\csla20cs\ProjectTracker20cs\PTWin\LoginForm.cs:line 23<BR><BR></P></FONT>
<P>If you compare the above with the exception message you are getting back, the two are identical in all respects except for the starting contents of the input string and the last three lines of the message due to my using PTracker and the Click event on a login form whereas you are using RSMS and the Load event of your main form.&nbsp; The contents themselves shouldn't make any difference as I'd gotten a different input string back before rebooting my machine.&nbsp; Hmmm, there is one more difference that I just noticed and that is that GetIdentity(String username, String password) in my case occurs on line 57 and that GetIdentity(String username, String PIN) in your case is on line 47.&nbsp; I doubt that'd make any difference as I'm sure it's only because I'm authenticating the user against the database&nbsp;while it appears you&nbsp;are authenticating them based on their network login.</P>
<P>Anyway, all this isn't to say you aren't having this problem because of your using MySQL and the MySQL Client as the back-end; I honestly don't know since I've always used SQL Server with the CSLA framework on my projects.&nbsp; Having said that, I am considering using MySQL on a project I've just started due to it's ability to handle partitioned tables like SQL Server Enterprise Edition but at a considerably lower cost than the roughly $24,000-per-processor licensing fee MS charges for MSEE.&nbsp; Anyway, if you have the source code for the MySQL Client, set a breakpoint on the first line that should execute in it and then single-step through the rest of the code before control is returned to the GetIdentity routine.&nbsp; Maybe something will turn up there; odds are you won't even hit the MySQL Client before the exception occurs.</P>
<P>Other than that, I don't know what to suggest.&nbsp; Maybe you should start a new thread with a&nbsp;topic heading&nbsp;something like "Remoting problem with MySQL" and describe the problem there.&nbsp; There are bound to be several others on here that are using MySQL as the back-end for their applications and maybe they'll be able to help.&nbsp; I wish you luck!</P>
<P>Allen B. Anderson</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>kids_pro replied on Saturday, July 15, 2006</h2>Allen,<br><br>Look like we are the only people that happen to encounter this problem :(<br>I am a bit lucky than you since I do not have any problem when testing PTracker except whenever I do my own application.<br><br>Kids<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>jwooley replied on Thursday, November 30, 2006</h2>For the "<FONT size=2>input stream is not a valid binary format", Try putting a packet sniffer on the line (like Fiddler). I suspect you are getting text back with an error message rather than the expected binary remoting result. Viewing the plain HTTP traffic should help to debug your issue.</FONT></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>guyroch replied on Thursday, November 30, 2006</h2><P>Kids, maybe you should start from scratch to make sure you can configure remoting correctly.&nbsp; Try this...</P>
<P>Getting <SPAN class=st id=st><FONT>remoting</FONT></SPAN> to work the first time involves a few steps.</P>
<P>1) Create a web project and add the Csla.dll as a reference, and all of your BO dlls that you have created.&nbsp; Call you web project <FONT color=#ff0000><STRONG>MyRemotingTest</STRONG></FONT></P>
<P>2) Add a web.config file into this web project and configure it properly... add the following in the &lt;system.runtime.remoting&gt; section.</P>
<P><FONT color=#008000>&nbsp; &lt;system.runtime.remoting&gt; <BR>&nbsp;&nbsp;&nbsp; &lt;application&gt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;service&gt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;wellknown mode="SingleCall" objectUri="<FONT color=#ff0000><STRONG>RemotingPortal.rem </STRONG></FONT>" type="Csla.Server.Hosts.RemotingPortal, Csla"/&gt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/service&gt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;channels&gt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;channel ref="http"&gt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;serverProviders&gt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;provider ref="wsdl"/&gt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;formatter ref="soap" typeFilterLevel="Full"/&gt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;formatter ref="binary" typeFilterLevel="Full"/&gt; <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/serverProviders&gt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/channel&gt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/channels&gt;<BR>&nbsp;&nbsp;&nbsp; &lt;/application&gt;<BR>&nbsp; &lt;/system.runtime.remoting&gt;</FONT></P>
<P>3) Go into IIS and create a virtual directory and call it <FONT color=#ff0000><STRONG>MyRemotingTest</STRONG></FONT><FONT color=#000000> and have it pointed to you web project&nbsp;.&nbsp;&nbsp; If you have both the .Net framework 1.1 and 2.0 install you'll have to set your virtual directory to use 2.0 - it uses 1.1 by default.</FONT></P>
<P>4) Test the remoting works by typing the following in your browser.</P>
<P><A href="http://localhost/MyRemoringTest/RemotingPortal.rem?wsdl" target=_blank>http://localhost/<FONT color=#ff0000>MyRemoringTest</FONT>/<FONT color=#ff0000>RemotingPortal.rem</FONT>?wsdl</A></P>
<P>If remoting works, you should get something similar to this...</P>
<DIV><SPAN><STRONG><FONT face="Courier New" color=#ff0000>&nbsp;</FONT></STRONG></SPAN> <FONT color=#0000ff><SPAN>&lt;?</SPAN><SPAN>xml version="1.0" encoding="UTF-8" </SPAN><SPAN>?&gt;</SPAN></FONT> </DIV>
<DIV>
<DIV><A href="http://localhost/Ojama.RemotingPortal/RemotingPortal.rem?wsdl#" target=_blank><STRONG><FONT face="Courier New" color=#ff0000>-</FONT></STRONG></A> <SPAN><FONT color=#0000ff>&lt;</FONT></SPAN> <FONT color=#990000><SPAN>definitions</SPAN><SPAN> name</SPAN></FONT><SPAN><FONT color=#0000ff>="</FONT></SPAN><B>RemotingPortal</B><SPAN><FONT color=#0000ff>"</FONT> </SPAN><SPAN><FONT color=#990000>targetNamespace</FONT></SPAN><SPAN><FONT color=#0000ff>="</FONT></SPAN><B><A href="http://schemas.microsoft.com/clr/nsassem/Csla.Server.Hosts/Csla%2C%20Version%3D2.0.3.0%2C%20Culture%3Dneutral%2C%20PublicKeyToken%3D93be5fdc093e4c30" target=_blank> http://schemas.microsoft.com/clr/nsassem/Csla.Server.Hosts/Csla%2C%20Version%3D2.0.3.0%2C%20Culture%3Dneutral%2C%20PublicKeyToken%3D93be5fdc093e4c30</A></B><SPAN><FONT color=#0000ff>"</FONT></SPAN><SPAN> <FONT color=#ff0000>xmlns</FONT></SPAN><SPAN><FONT color=#0000ff>="</FONT></SPAN><B><FONT color=#ff0000><A href="http://schemas.xmlsoap.org/wsdl/" target=_blank>http://schemas.xmlsoap.org/wsdl/</A></FONT> </B><SPAN><FONT color=#0000ff>"</FONT></SPAN><SPAN><FONT color=#ff0000> </FONT></SPAN></DIV></DIV>
<P>5) Now that you have confirmed that remoting works, create client app and&nbsp;add the Csla.dll as a reference, and all of your BO dlls that you have created.</P>
<P>6) Add an app.config file to you client app and add to following in the &lt;appSettings&gt; section.</P>
<P>&nbsp; &lt;appSettings&gt;<BR>&nbsp;&nbsp;&nbsp; &lt;add key="CslaAuthentication" value="Csla" /&gt;<BR>&nbsp;&nbsp;&nbsp; &lt;add key="CslaDataPortalProxy" value="Csla.DataPortalClient.RemotingProxy, Csla"/&gt;<BR>&nbsp;&nbsp;&nbsp; &lt;add key="CslaDataPortalUrl" value="<A href="http://localhost/MyRemoringTest/RemotingPortal.rem%22/" target=_blank>http://localhost/<FONT color=#ff0000>MyRemoringTest</FONT>/<FONT color=#ff0000>RemotingPortal</FONT> .rem"/</A>&gt;<BR>&nbsp; &lt;/appSettings&gt;</P>
<P>7) Voilà, remoting should work.</P>
<P>Hope this helps.</P></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
