<html><header><title>Problems removing objects marked IsNew=true </title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Problems removing objects marked IsNew=true </h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/9039.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>Ranjini posted on Friday, June 04, 2010</h2><p class="MsoNormal" style="margin:0in 0in 10pt;"><span style="font-family:Calibri;font-size:small;">Technology - CSLA 4/Silverlight 4</span></p>
<p class="MsoNormal" style="margin:0in 0in 10pt;"><span style="font-family:Calibri;font-size:small;">I have a BO -&gt; BLB -&gt; BO scenario. The UI allows for adding and deleting new BOs to the BLB child list. If I add a new BO, save it (persist it to the DB) and then delete it, it seems to have no problem. However, if I add a new BO, then try to remove it , before persisting it to the DB (before Save), it throws a &ldquo;Invalid for root objects - use Delete instead&rdquo; exception.</span></p>
<p class="MsoNormal" style="margin:0in 0in 10pt;"><span style="font-family:Calibri;font-size:small;">Example</span></p>
<p class="MsoNormal" style="margin:0in 0in 10pt;"><span style="font-family:Calibri;font-size:small;">RootObject (BO)</span></p>
<p class="MsoNormal" style="margin:0in 0in 10pt 0.5in;"><span style="font-family:Calibri;font-size:small;">-&gt; ChildList (BLB)</span></p>
<p class="MsoNormal" style="margin:0in 0in 10pt 1in;"><span style="font-family:Calibri;font-size:small;">-&gt; Child (BO)</span></p>
<p class="MsoNormal" style="margin:0in 0in 10pt;"><span style="font-family:Calibri;font-size:small;">In my viewmodel, if I do a ChildList.Add(Child object) and follow it up with the same ChildList.Remove(Child Object), it throws the exception. Anything I am missing here? I do notice that the IsNew property is being marked correctly on the newly added object and that seems to be the only difference between this object and the rest of the objects in the BLB.</span></p>
<p>Thanks!!!</p></div><div style='padding:0 15 3 15;background-color:lightgreen'><h2>RockfordLhotka replied on Friday, June 04, 2010</h2><p>It sounds like you aren&#39;t creating new objects correctly as you add them to the collection, because IsChild isn&#39;t being set.</p>
<p>Probably your data portal code uses FetchChild to get the child - but your code to create a new object maybe isn&#39;t using CreateChild? Or if you are using much older CSLA versions you&#39;d need to be calling MarkAsChild explicitly.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Ranjini replied on Monday, June 07, 2010</h2><p>You were right. I was not adding the children correctly. I did not invoke the AddNew method and was trying to do this.Model.Object.Add(objInstance) directly. Anyway thanks for your direction!</p>
<p>Ranjini</p>
<p>&nbsp;</p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
