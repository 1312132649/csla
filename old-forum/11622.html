<html><header><title>How To:  DALs for both SQL and SQLite in same project</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>How To:  DALs for both SQL and SQLite in same project</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/11622.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>TSF posted on Wednesday, October 03, 2012</h2><p>I&#39;m trying to build a connected WinRT app, and have realized I really need to provide offline storage capabilities.&nbsp; So I&#39;m going down the road of using SQLite on the client and SQL Server in the cloud.&nbsp; What I think I need to do is to use two different DAL implementations: one for SQL Server, the other for SQLite.</p>
<p>I would think that the DP methods would determine when to call either of the DAL implementations.&nbsp; Does this sound right??</p>
<p>In the end, what I&#39;m after is for the primary storage tasks to <em>always</em> be done on the client, and when a connection is available, for the app to push/pull data to/from the cloud to sync things up.&nbsp; Thanks for any suggestions.</p></div><div style='padding:0 15 3 15;background-color:lightgreen'><h2>RockfordLhotka replied on Thursday, October 04, 2012</h2><p>If you want to dynamically switch between a local implementation and a remote implementation based on connectivity, you need to create a custom client-side data portal proxy that delegates to LocalProxy or WcfProxy based on whether the device is online.</p>
<p>That&#39;s problematic obviously, because anything done on the client machine ultimately does need to sync with the server.</p>
<p>So you are correct, the right answer is really to always have the app talk to the local database, and then to have a sync process that runs whenever you are online to sync with the server.</p>
<p>That&#39;s simpler from an app perspective, because your app always interacts with one database (the local one). And you have to write a sync agent anyway, so there&#39;s no extra work there.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>TSF replied on Thursday, October 04, 2012</h2><p>Thanks, Rocky.&nbsp; If you have time, could you tell me if you&#39;ve seen (or done) this scenario much in Win 8 apps yet?&nbsp; I have found very few articles/blogs/etc talking about this occasionally-connected scenario when user data is in view.&nbsp; It seems that most Win 8 apps are either self-contained with respect to their data or the type of data being sync&#39;d is simple enough&nbsp;(e.g. app/user preferences) so that one can use the roaming capabilities of Win 8.&nbsp; But my app isn&#39;t like that. &nbsp;I&nbsp;feel&nbsp;bound by two scenarios that I&#39;d like to support, the first of which drives the second:</p>
<ol>
<li>Data entered on one device is accessible from any other device or&nbsp;web app (which means remote storage is required)</li>
<li>The user should be able to access (and update) his data even if not connected to the cloud</li>
</ol>
<p>Maybe I&#39;m getting too complicated or attempting to provide what user&#39;s don&#39;t really expect.&nbsp; But if <em>I</em> purchased this app, I would (1) definitely want to have this kind of data stored in the cloud for easy accessibility, and (2) I would be frustrated if I couldn&#39;t use the app unless it was connected to the internet.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Thursday, October 04, 2012</h2><p>Sadly no. We&#39;re all at the very start of the new WinRT runtime&#39;s lifecycle, and it seems to me that Microsoft has left a number of important issues (like this one) for later...</p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
