<html><header><title>Saving child objects, getting the saved instance?</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Saving child objects, getting the saved instance?</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/4169.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>roboto posted on Monday, January 14, 2008</h2>Hi!<br><br><br>I'm just starting to get a grip on the usage of CSLA and so I'm getting a bit stuck.<br><br>Okay, what I've got:<br><br>ParentObject<br>&nbsp;&nbsp;&nbsp; -&gt; Childs : ChildList<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;  -&gt; Child<br><br>My ChildList has a 'AddNew' function that basicly Creates (through the DataPorta) a new instance and adds it to the list. <br><br>Now I've the following code:<br>ParentObject instanceOfParent = ParentObject.LoadById(55);<br>Child newChild = instanceOfParent.Childs.AddNew();<br>newChild.Description = "Hello forum";<br><br>instanceOfParent = instanceOfParent.Save();<br><br>Assert.IsFalse(instanceOfParent.IsDirty);<br>Assert.IsFalse(newChild.IsDirty, "this will fail!");<br><br>Now, the parent, the list and the newChild is saved successfully to the database, but since cslsa creates a copy of newChild child, my initial object isn't updated.&nbsp; So the second assert will fail.<br><br>Is there a chance to work around this? I'm mainly using by BOs from code, not bound to the GUI.<br><br>Thank you<br>Dominik<br>&nbsp;&nbsp;&nbsp; <br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>mr_lasseter replied on Monday, January 14, 2008</h2>When you save the object you get a new instance of the obect (and all child objects).&nbsp; What you are going to have to do is find the child item in the newly saved list.&nbsp; Try something along the lines of:<br><br>ParentObject instanceOfParent = ParentObject.LoadById(55);<br>Child newChild = instanceOfParent.Childs.AddNew();<br>newChild.Description = "Hello forum";<br><br>instanceOfParent = instanceOfParent.Save();<br>newChild = instanceOfParent.Childs[0];<br><br>Assert.IsFalse(instanceOfParent.IsDirty);<br>Assert.IsFalse(newChild.IsDirty, "this will not fail!");<br><br><br></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
