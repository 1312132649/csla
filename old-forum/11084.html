<html><header><title>Architecting SL app for both network and internet access</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Architecting SL app for both network and internet access</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/11084.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>TSF posted on Tuesday, January 24, 2012</h2><p>In the next few months, my company is going to begin a re-write of a large VB6 app and we&#39;re likely going to use SL / CSLA 4.x.&nbsp;&nbsp; One requirement is that&nbsp;our remote sales reps will need to be able to access the application over the internet (<em>not</em> via VPN).&nbsp; But the majority of our folks our on the network.</p>
<p>Can someone point me in the right direction for learning how to write the CSLA objects/app so that it knows when to look at an internal IIS server (on the network) for its data and when to look at a publically exposed IIS server (out in the field)?&nbsp; Do the e-books touch this subject?&nbsp;&nbsp; Does this approach change if we use out-of-borwser vs in-browser?</p>
<p>Just to reiterate, a sales rep might be at home on the VPN and the app needs to know to go to <a href="http://internal/myapp">http://<strong>internal</strong>/myapp</a> for CSLA object interaction.&nbsp; But then the sales rep goes out on the road, launches his application&nbsp;using a public internet connection, and the app must know to not look for that internal address but rather <a href="http://external/myapp">http://<strong>external</strong>/myapp</a>.&nbsp;&nbsp; Thanks.</p></div><div style='padding:0 15 3 15;background-color:lightgreen'><h2>RockfordLhotka replied on Tuesday, January 24, 2012</h2><p>The ebooks don&#39;t talk about this specifically. They show how to set the URL for the server in code on the client.</p>
<p>Actually figuring out which URL to use - that&#39;s way to scenario-specific to be in the book.</p>
<p>I don&#39;t know a specific answer, having not tried to solve this problem. But one thing that comes to mind is that you could write a bit of code that tries to do a simple webrequest to the internal URL. That&#39;ll presumably fail if you are outside the network, so then you know to use the external URL.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>TSF replied on Thursday, January 26, 2012</h2><p>One other question just came to mind about my scenario.&nbsp; I&#39;m already successfully using SL/CSLA 4 in our network environment with AD security (following examples in your e-book sample code using a UserInfo ROB class).&nbsp; However, when we get to the point of having that same app hitting an external web server via the internet, does our ability to integrate the same way with AD change?&nbsp; How will the app server (inside the firewall) obtain the principal of the user?&nbsp;&nbsp;If this is covered in the portal configuration e-book, I&nbsp;will re-read that.&nbsp;&nbsp;Thanks.</p></div><div style='padding:0 15 3 15;background-color:lightgreen'><h2>RockfordLhotka replied on Thursday, January 26, 2012</h2><p>I do discuss this in the <em>Using CSLA 4: Data Portal Configuration</em> book. </p>
<p>But there are several variations, and it can be a complex topic.</p>
<p>If your SL app is relying on the underlying browser to have done the AD authentication before the SL app is running, then your users can be inside or outside your network, as long as the internal and external web servers consistently require that AD authentication.</p>
<p>If your public web servers aren&#39;t part of your domain, then things get more complex, because you&#39;ll have to write some code that runs on the web server to bridge to a server that <em>does</em> have domain membership.</p>
<p>The book doesn&#39;t specifically cover that second scenario, because there are just too many variables at play around network topology and security configuration. There is no &quot;one answer&quot; at that point.</p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
