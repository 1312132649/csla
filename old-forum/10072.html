<html><header><title>ProjectTrackercs 4.1 DataPortal.Fetch failed (Invalid operation - fetch not allowed)</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>ProjectTrackercs 4.1 DataPortal.Fetch failed (Invalid operation - fetch not allowed)</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/10072.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>WillTartak posted on Monday, February 14, 2011</h2><p>So I feel like a fool having to post this but I cant seem to get the ProjectTracker 4.1 cs version to run on my box.</p>
<p>System: Windows 7&nbsp;Enterprise&nbsp;64bit</p>
<p>I&#39;ve tried a lot of things to get this to run, changing all of the config files, moving the dbs to full SqlServer, etc. After nothing worked I figured there was something really stupid I am overlookiing and I just can&#39;t figure out what it is. I&#39;ve searched the forums for hours looking for a solution, none so far. </p>
<p>Any help would be appreciated.</p>
<p>At this point I deleted the folder I was working from, extracted the samples all over again and copied them to c:\Visual Studio Projects\Csla\Sampes\...</p>
<p>Then I built the solution, which&nbsp;built without any problems. Made sure that PTWin was the startup project and pressed F5.</p>
<p>I get the following:</p>
<p>Csla.DataPortalException<br />DataPortal.Fetch failed (Invalid operation - fetch not allowed)</p>
<p>Inner BusinessException = {&quot;Invalid operation - fetch not allowed&quot;} (No Inner Exception)</p>
<p>InnerException = {&quot;DataPortal_Fetch method call failed&quot;}</p>
<p style="padding-left:30px;">InnerException = {&quot;Invalid operation - fetch not allowed&quot;}</p>
<p>The InnerException stack traces are just shorter than the outer so here is the outer...</p>
<p>Stack Trace for outer exception =</p>
<p>&nbsp;&nbsp; at Csla.ReadOnlyBase`1.DataPortal_Fetch(Object criteria)<br />&nbsp;&nbsp; at lambda_method(Closure , Object , Object[] )<br />&nbsp;&nbsp; at Csla.Reflection.MethodCaller.CallMethod(Object obj, DynamicMethodHandle methodHandle, Object[] parameters)<br />&nbsp;&nbsp; at Csla.Reflection.MethodCaller.CallMethod(Object obj, DynamicMethodHandle methodHandle, Object[] parameters)<br />&nbsp;&nbsp; at Csla.Reflection.MethodCaller.CallMethod(Object obj, String method, Object[] parameters)<br />&nbsp;&nbsp; at Csla.Reflection.LateBoundObject.CallMethod(String method, Object[] parameters)<br />&nbsp;&nbsp; at Csla.Server.SimpleDataPortal.Fetch(Type objectType, Object criteria, DataPortalContext context)<br />&nbsp;&nbsp; at Csla.DataPortal.Fetch(Type objectType, Object criteria)<br />&nbsp;&nbsp; at Csla.DataPortal.Fetch[T](Object criteria)<br />&nbsp;&nbsp; at ProjectTracker.Library.Security.PTIdentity.GetIdentity(String username, String password) in C:\Visual Studio Projects\Csla\Samples\NET\cs\ProjectTrackercs\ProjectTracker.Library\Security\PTIdentity.cs:line 28<br />&nbsp;&nbsp; at ProjectTracker.Library.Security.PTPrincipal.Login(String username, String password) in C:\Visual Studio Projects\Csla\Samples\NET\cs\ProjectTrackercs\ProjectTracker.Library\Security\PTPrincipal.cs:line 31<br />&nbsp;&nbsp; at PTWin.LoginForm.OK_Click(Object sender, EventArgs e) in C:\Visual Studio Projects\Csla\Samples\NET\cs\ProjectTrackercs\PTWin\LoginForm.cs:line 23<br />&nbsp;&nbsp; at System.Windows.Forms.Button.PerformClick()<br />&nbsp;&nbsp; at System.Windows.Forms.Form.ProcessDialogKey(Keys keyData)<br />&nbsp;&nbsp; at System.Windows.Forms.Control.PreProcessMessage(Message&amp; msg)<br />&nbsp;&nbsp; at System.Windows.Forms.Control.PreProcessControlMessageInternal(Control target, Message&amp; msg)<br />&nbsp;&nbsp; at System.Windows.Forms.Application.ThreadContext.PreTranslateMessage(MSG&amp; msg)<br />&nbsp;&nbsp; at System.Windows.Forms.Application.ComponentManager.System.Windows.Forms.UnsafeNativeMethods.IMsoComponentManager.FPushMessageLoop(IntPtr dwComponentID, Int32 reason, Int32 pvLoopData)<br />&nbsp;&nbsp; at System.Windows.Forms.Application.ThreadContext.RunMessageLoopInner(Int32 reason, ApplicationContext context)<br />&nbsp;&nbsp; at System.Windows.Forms.Application.ThreadContext.RunMessageLoop(Int32 reason, ApplicationContext context)<br />&nbsp;&nbsp; at System.Windows.Forms.Form.ShowDialog(IWin32Window owner)<br />&nbsp;&nbsp; at PTWin.MainForm.DoLogin() in C:\Visual Studio Projects\Csla\Samples\NET\cs\ProjectTrackercs\PTWin\MainForm.cs:line 327<br />&nbsp;&nbsp; at PTWin.MainForm.LoginToolStripButton_Click(Object sender, EventArgs e) in C:\Visual Studio Projects\Csla\Samples\NET\cs\ProjectTrackercs\PTWin\MainForm.cs:line 317<br />&nbsp;&nbsp; at System.Windows.Forms.ToolStripItem.HandleClick(EventArgs e)<br />&nbsp;&nbsp; at System.Windows.Forms.ToolStripItem.HandleMouseUp(MouseEventArgs e)<br />&nbsp;&nbsp; at System.Windows.Forms.ToolStrip.OnMouseUp(MouseEventArgs mea)<br />&nbsp;&nbsp; at System.Windows.Forms.Control.WmMouseUp(Message&amp; m, MouseButtons button, Int32 clicks)<br />&nbsp;&nbsp; at System.Windows.Forms.Control.WndProc(Message&amp; m)<br />&nbsp;&nbsp; at System.Windows.Forms.ToolStrip.WndProc(Message&amp; m)<br />&nbsp;&nbsp; at System.Windows.Forms.NativeWindow.DebuggableCallback(IntPtr hWnd, Int32 msg, IntPtr wparam, IntPtr lparam)<br />&nbsp;&nbsp; at System.Windows.Forms.UnsafeNativeMethods.DispatchMessageW(MSG&amp; msg)<br />&nbsp;&nbsp; at System.Windows.Forms.Application.ComponentManager.System.Windows.Forms.UnsafeNativeMethods.IMsoComponentManager.FPushMessageLoop(IntPtr dwComponentID, Int32 reason, Int32 pvLoopData)<br />&nbsp;&nbsp; at System.Windows.Forms.Application.ThreadContext.RunMessageLoopInner(Int32 reason, ApplicationContext context)<br />&nbsp;&nbsp; at System.Windows.Forms.Application.ThreadContext.RunMessageLoop(Int32 reason, ApplicationContext context)<br />&nbsp;&nbsp; at PTWin.Program.Main() in C:\Visual Studio Projects\Csla\Samples\NET\cs\ProjectTrackercs\PTWin\Program.cs:line 17<br />&nbsp;&nbsp; at System.AppDomain._nExecuteAssembly(RuntimeAssembly assembly, String[] args)<br />&nbsp;&nbsp; at Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()<br />&nbsp;&nbsp; at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean ignoreSyncCtx)<br />&nbsp;&nbsp; at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)<br />&nbsp;&nbsp; at System.Threading.ThreadHelper.ThreadStart()</p>
<p>Thanks,</p>
<p>\ ^ / i l l</p>
<p>&nbsp;</p></div><div style='padding:0 15 3 15;background-color:lightgreen'><h2>JonnyBee replied on Monday, February 14, 2011</h2><p>ProjectTracker is not updated and functional for Csla 4.1.</p>
<p>You should rather look at SimpleNTier sample for now.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JCardina replied on Monday, February 14, 2011</h2><p>Yikes! <img src="http://forums.lhotka.net/emoticons/emotion-3.gif" alt="Surprise" /></p>
<p>Seriously?&nbsp; I&#39;ve been using it as a reference to the &quot;correct&quot; way to do things.</p>
<p>I missed the area on the website or docs or in that zip where it says not to use ProjectTracker as a reference for 4.1</p>
<p>&nbsp;</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>WillTartak replied on Monday, February 14, 2011</h2><p>Eek!!!!</p>
<p>I wish I&#39;d seen that somewhere. It isn&#39;t in the faq for example or in the read me for the samples. That&#39;s the kind of thing that should be clear somewhere. Especially for someone like me who has used Csla before but is not here to keep up with things all the time.</p>
<p>On SimpleNTier, is the Windows app supposed to do anything? How is one supposed to know if things worked on through to the database? I&#39;ve only looked at the Windows app so far but it seems&nbsp;less than ideal&nbsp;from a functionality perspective.</p>
<p>Is there a more useful sample than SimpleNTier I can look at?</p>
<p>Thanks,</p>
<p>\ ^ / i l l </p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JonnyBee replied on Monday, February 14, 2011</h2><p>Well, it has been stated on the forum several times that ProjectTracker is not working.&nbsp;</p>
<p>We just haven&#39;t had the time to update ProjectTracker but have chosen to not remove it as Rocky plans to update the sample. </p>
<p>&nbsp;</p>
<p>&nbsp;</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>WillTartak replied on Monday, February 14, 2011</h2><p>Hi Jonny,</p>
<p>&nbsp;</p>
<p>Not to be a jerk, but to clarify. I searched the forum for anything I could find on Project Tracker and did not find a reference to it not working with 4.x. I don&#39;t doubt there have been prior discussions but relying on that as the ultimate source of information is not the best practice. All of us search in different ways.</p>
<p>I wasted a lot of time on this and can only imagine others have too and were just as embarassed to ask about something that seems like it should work as posted.</p>
<p>I thank you for pointing out the error of my ways.</p>
<p>I would appreciate it if you could point me in the direction of a sample that actually writes to a db for 4.1. </p>
<p>&nbsp;</p>
<p>thanks,</p>
<p>&nbsp;</p>
<p>\ ^ / i l l </p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>CyclingFoodmanPA replied on Monday, February 14, 2011</h2><p>Hey,</p>
<p>Don&#39;t feel bad.&nbsp; ProjectTracker is what I consider the &quot;gold standard&quot; for Csla and I have been using it for ages.&nbsp; I spent a few hours trying to figure out what was going on when it wouldn&#39;t work.&nbsp; The samples InventoryDemo provided me with the most help along with SimpleApp and SimpleNTier as they are all using the &quot;ObjectFactory&quot; now.</p>
<p>Now that I have been messing with ObjectFactory I like it and am used to it.&nbsp; I would hope that ProjectTracker would be updated to reflect all current stuff because that is the most realistic business type application to date.&nbsp; I may even update it with ObjectFactory and EF for everyone else, however I am in Telerik Control land along with Database Design, and everything else.</p>
<p>Hang in there,</p>
<p>CyclingFoodmanPA</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>WillTartak replied on Monday, February 14, 2011</h2><p>Hi CyclingFoodman,</p>
<p>Thanks a lot!</p>
<p>Hopefully that will be enough to get me going. Sounds like we are in a similar place right now. :)</p>
<p>Best,</p>
<p>\ ^ / i l l </p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Monday, February 14, 2011</h2><p><div style='padding-left: 50px;background-color:silver'><b>CyclingFoodmanPA<br></b>
<p>I would hope that ProjectTracker would be updated to reflect all current stuff because that is the most realistic business type application to date.
<div style="CLEAR:both;"></div>
</div></p>
<p>This is one of the big challenges, and reasons why I&#39;ve been doing smaller/simpler samples lately.</p>
<p>Personally I generally prefer what I&#39;m calling the <em>encapsulated invoke</em> data access model in the <em>Using CSLA 4: Data Access</em> ebook. So when I do update ProjectTracker that&#39;s the model I&#39;ll almost certainly be using.</p>
<p>Because there are non-trivial code differences to use the <em>factory implementation</em> model (my second favorite), I can&#39;t do this in the same implementation of ProjectTracker.</p>
<p>In other words, I&#39;d need to maintain ProjectTracker twice (4 times if you count C# and VB) to show both of the primary DAL models. That&#39;s not going to happen - I just don&#39;t have the time to do that.</p>
<p>So I am building targeted samples for the <em>Data Access</em> ebook to show both models (with some other variants). And I&#39;ll update ProjectTracker when I write the <em>WPF/Silverlight</em> ebook in March - that&#39;s my plan anyway.</p>
</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JCardina replied on Monday, February 14, 2011</h2><p>If it doesn&#39;t work in the 4.1 examples archive it should be removed.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>frankhoffy replied on Wednesday, February 16, 2011</h2><p>To save yourself some trouble, I would dump the VB.NET version of the sample and point people to tools like&nbsp;<a href="http://www.developerfusion.com/tools/convert/csharp-to-vb/">http://www.developerfusion.com/tools/convert/csharp-to-vb/</a>. &nbsp;I&#39;ve used this conversion tool many times with a lot of success.</p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
