<html><header><title>Ordered list with various class types</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Ordered list with various class types</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/5685.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>eulerthegrape posted on Tuesday, October 28, 2008</h2>Obligatory: "forgive my newbie-ness"<br><br>Hi all,<br><br>I've been reading through a lot of threads and found pieces of answers but nothing that totally answers my issue.&nbsp; I have a root object with a collection of child objects.&nbsp; I want to assign objects of three different types (this could be more) to the root object's child collection and maintain the child order within the list.<br><br>The, incomplete, solution I have is as follows:<br><br>1. An interface called IMeasurementFunction that defines a name and id parameter<br>2. Three different child info objects that inherit IMeasurementFunction (MeasurementMeasurementInfo, MeasurementCommandInfo, and MeasurementSpecialCommandInfo)<br>3. A wrapper called MeasurementFunctionWrapper that takes an IMeasurementFunction and contains the order and holds the object type<br>4. The wrapper implements factory methods and data access<br>5. A MeasurementFunctions list that assigns a MeasurementFunctionWrapper to the list, maintains it's type (for special display pruposes), and manages the order.<br><br>Is this feasible? How would you rate this solution?&nbsp; Should I instead create and abstract class instead?&nbsp; Other ideas? As Linda Richman on Coffee Talk would say: "The industrial revolution was neither industrial nor a revolution.&nbsp; Discuss.' ;-)<br><br>-Euler</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Tuesday, October 28, 2008</h2><P>BusinessListBase only requires that child objects implement Csla.Core.IEditableBusinessObject. And you get that for free if you subclass BusinessBase.</P>
<P>However, <EM>your interface</EM> must inherit from IEditableBusinessObject so you can use it as the type parameter for your collection.</P>
<P>public interface IMeasurementFunction : Csla.Core.IEditableBusinessObject<BR>{<BR>&nbsp; // your methods here<BR>}</P>
<P>Then you can do:</P>
<P>[Serializable]<BR>public class MeasurementList : BusinessListBase&lt;IMeasurementFunction&gt;<BR>// ...</P>
<P>And that's that.</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>eulerthegrape replied on Wednesday, October 29, 2008</h2>Awesome, Rocky himself.<br><br>Rocky, thanks for your help, this framework, and the book explaining it all. It's really helped in focusing my work.<br><br>However, because I'm not well enough versed, I'm face with a new problem, or two.&nbsp; If I inherit from IEditableBusinessObject, I now have to implement nearly 50 methods (I think I'm missing something here).&nbsp; Also, I think you were just using short hand for the implementation, right? The code would be as follows? <br><br>public class MeasurementList : BusinessListBase&lt;MeasurementList, IMeasurementFunction&gt;<br>{<br>}<br><br>Again thanks so much for the reply,<br><br>Euler<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Wednesday, October 29, 2008</h2>Aren't your other classes, which implement your interface, inheriting from BusinessBase?<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>eulerthegrape replied on Wednesday, October 29, 2008</h2>Ah, I think that's the kicker.&nbsp; They are ReadOnlyBase classes, because we weren't editing these objects in their separate lists just within the collective list and then really only editing the order parameter.&nbsp; That's why there's a wrapper class involved, which does inherit from BusinessBase.&nbsp; Should I change these to inherit from BusinessBase?&nbsp; This would eliminate the need to implement all IEditableBusinessObject's methods but then it feels like I'm straying from my use case.<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Wednesday, October 29, 2008</h2>Well, if you need to have a list of readonly instances in an editable root object, it's prefectly acceptable to change them to BusinessBase subclasses.&nbsp; Just keep all of the instances properties as readonly (that is, don't implement property setters) and you should be good to go.&nbsp; This change doesn't have to affect your use case.<br><br>HTH<br>Andy<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>eulerthegrape replied on Wednesday, October 29, 2008</h2>All this information is making things a lot clearer thank you all.<br><br>Yeah, I see the read-only-ness of this solution.&nbsp; It seems like there are always trade-offs.&nbsp; With the wrapper I was able to implement universal methods for fetching, inserting, etc.&nbsp; I now have to implement these methods in each child (or handle the specifics of child data access in the root object?).&nbsp; Perhaps having each child type implement data access is a good thing. &nbsp; Would I escape this drawback if I used an abstract class?<br><br>Thanks again for all the help Andy and Rocky,<br>Euler<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Wednesday, October 29, 2008</h2>I don't see a problem with the child objects inserting or deleting their related row in the database.&nbsp; That's typically how I handle things.<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>eulerthegrape replied on Wednesday, October 29, 2008</h2>It's how I typically handle things two but I thought I got around having to write a lot of similar code for each child of the same interface.&nbsp; Maybe I should invest in codesmith...<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>eulerthegrape replied on Thursday, October 30, 2008</h2>OK, I think I've painted myself into a corner.<br><br>I have a master ordered list to which items of the same interface can be assigned.&nbsp; Now I can assign, unassign, move up, move down.&nbsp; I created a master ordered list child to read in all the default children.&nbsp; All this works but I'm stuck with a list of various objects and no central way to save them.<br><br>Which of these two makes sense:<br>1. Cast children to master list child object and handle the saving here.<br>2. Conditional statement that directs to child's unique data access methods.<br><br>Thanks,<br>Euler<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Thursday, October 30, 2008</h2>Can't you add a standard save method to your interface?<br><br>If you're using 3.5 or above, you should be able to get away with just implementing Child_Insert and Child_Update.. your collection need not do anything, and you can just call FieldManager.UpdateChildren in your root BO.<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>eulerthegrape replied on Thursday, October 30, 2008</h2>Sure but without an implementation.&nbsp; And the implementation will be identical across all list items because they're all being saved to the same place.&nbsp; I guess I don't need a switch statement if I define an Insert, Update, and Delete method in the interface but now it feels like I'm duplicating behavior.<br><br>Unfortunately I'm stuck in the stone age with CSLA 3.0.&nbsp; But 3.5 sounds like it has some excellent updates.&nbsp; Maybe once I've finished this project I'll look into upgrading.<br><br>Thanks,<br>Euler<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>eulerthegrape replied on Thursday, October 30, 2008</h2>And as far as I know I can't scope these methods "internal" but I'm not sure what I lose in this.<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Friday, October 31, 2008</h2>What about a common base class, which has the duplicated behaviors (save, delete, etc)?<br><br>Also, 3.5+ won't help you as much as you think; you'd still have to put the Child_Insert in each class... so either way, it looks like your best bet is a common base class.. at which point, you might be able to lose the interface.<br></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
