<html><header><title>Update from CSLA 2.0.3 to 2.1</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Update from CSLA 2.0.3 to 2.1</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/1716.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>gajit posted on Wednesday, November 08, 2006</h2>Hi guys,<br><br>I have just bitten the bullet and moved to 2.1 as we will soon be beta testing the new windows application and I wanted to ensure we started with the current technology...<br><br>I have a couple of questions...<br><br>I encountered the breaking change with regards to the ValidationRules and have implemented all of my existing AddBusinessRules() ..AddRules into their InstanceRules counterparts and it works fine.<br>But I am a little (ok, a lot) confused about the discussions about a dynamic rule based on different instances of a BO... and that you can have dynamic and non-dynamic rules.<br><br>I tried to have both AddBusinessRules() ..AddRule&nbsp; and AddInstanceBusinessRules..AddInstanceRule methods in my BO, but this generate compiler errors (as it calls the former AFTER the latter).<br><br>Secondly,&nbsp; my code did not "break" on the Dataportal.Create/Fetch calling semantics... I know I should be happy - but I suspect the 'break' is under certain conditions...<br><br>The documentation has my head spinning a little ... what sort of things should I be looking for in terms of compiler messages? should I be getting run-time or compile-time messages?  <br>Does this only apply to objects that might be fetched/created with no criteria passed? If so, what changes should I be making in my BO's?<br><br>Any assistance would be appreciated... beta release is due soon and I'd hate to look like Bill Gates launching Windows XP Media Center ....;)<br><br>Thanks,<br>G.<br><br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>gajit replied on Thursday, November 09, 2006</h2>No takers? :(<br><br>Ok..Ok... I take the bit about Windows XP Media Center back... ;)<br><br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Thursday, November 09, 2006</h2>Well, one thing is that you should try to use type rules when possible over instance rules. <br><br>The easiest way to convert your rules is to mark them as static (Shared in vb).<br><br>I'm not sure your code will break because of the DP changes if you are always passing a parameter to Fetch or create (even if you ended up passing null or a dummy object).<br><br>HTH<br>Andy<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JoeFallon1 replied on Thursday, November 09, 2006</h2><P>I agree with Andy - you should almost always use the per type rules. The only time you need instance rules is if the rules are different&nbsp;for each instance. </P>
<P>All of my rules are in a separate class as Shared methods.</P>
<P>I also subclassed RuleArgs as MyRuleArgs.</P>
<P>&nbsp;Protected Overrides Sub AddBusinessRules()<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 'Acctcode<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ValidationRules.AddRule(AddressOf StringRequired, New MyRuleArgs("Acctcode"))<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ValidationRules.AddRule(AddressOf StringMaxLength, New MaxLengthRuleArgs("Acctcode", 40))<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ValidationRules.AddRule(AddressOf IsValidSyntax, New MyRuleArgs("Acctcode"))<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ValidationRules.AddRule(AddressOf RecordDoesNotExist, New RecordExistsRuleArgs("Acctcode", "acct", "", True), 1)</P>
<P>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 'Acctdesc<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ValidationRules.AddRule(AddressOf StringMaxLength, New MaxLengthRuleArgs("Acctdesc", 60))<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ValidationRules.AddRule(AddressOf IsValidSyntax, New MyRuleArgs("Acctdesc"))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<BR>&nbsp;&nbsp;&nbsp; End Sub</P>
<P>Joe</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>gajit replied on Tuesday, November 14, 2006</h2><P>Hi guys,</P>
<P>Sorry for the delay in replying - my attention was drawn in another direction for a few days.</P>
<P>I'll have to revisit my validatin rules, but I'm sure when I try to implement them as ValidtionRules.AddRule - I get compile errors - hence moving them to InstanceRules..</P>
<P>But I will clarify this.</P>
<P>Thanks,</P>
<P>gaj.</P>
<P>&nbsp;</P>
<P>&nbsp;</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>ajj3085 replied on Tuesday, November 14, 2006</h2>If you do get compile errors, you're better off fixing them than moving to instance rules.<br><br>For example, some of my rules didn't use the target parameter from the rule, instead looking directly at the fields / properties.&nbsp; Switching to 2.1 and making the method static of course caused compile errors... but they were easily fixed by using the target parameter and checking it instead.<br><br>Spend the time to 'correct' things now, so you won't regret it later.<br><br>Andy<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>Bayu replied on Thursday, November 09, 2006</h2>Hey,<br><br>If you are a bit nervous, then perhaps the following is an idea (at least it works for me&nbsp; ;-) ):<br><br>- write a BIG NUnit test that does all of the stuff that your app covers (so at least your could go through the CRUD of your critical objects) that works on your old app.<br><br>- then test it on your new app ...<br><br>I know it's a silly answer in some respects. But in the end it does serve as an objective analysis that checks some of the critical parts (perhaps all, depending on your effort ;-) ). NUnit is really easy to get up-to-speed with, and you can test lots of things: scenario's that you expect to succeed of course, but also scenario's that you expect to fail in a particular way (to check validation rules or exceptions for example).<br><br>Just a thought.<br><br>Bayu<br></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
