<html><header><title>Errors From Data Portal are all generic Async Error </title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>Errors From Data Portal are all generic Async Error </h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/12515.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>thaehn posted on Thursday, March 20, 2014</h2><p>Hi,</p>
<p>Before upgrading from 4 to 4.5, exceptions coming back from the data portal would have the message of the original exception such as &quot;Another user has modified the row in Table1, update failed&quot;.&nbsp; Now all that comes back&nbsp;as the message is than an Async Error occurred.&nbsp; There is&nbsp;no detail as to the problem.&nbsp; What is the method that people are using to return the [collapse]original message such as a table update failed back to the client?</p>
<p>Todd Haehn</p>[/collapse]</div><div style='padding:0 15 3 15;background-color:powderblue'><h2>JonnyBee replied on Friday, March 21, 2014</h2><p>Hi,</p>
<p>Look at the inner exception. </p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>thaehn replied on Friday, March 21, 2014</h2><p>I have done that.&nbsp; there isn&#39;t any.&nbsp; My error dialog recurses through the exceptions to get the innermost one.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>thaehn replied on Wednesday, April 09, 2014</h2><p style="margin:0in 0in 10pt;" class="MsoNormal"><span style="font-size:small;"><span style="font-family:Calibri;">The exception is coming back to the data portal:</span></span></p>
<p style="margin:0in 0in 10pt;line-height:normal;mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;" class="MsoNormal"><span style="font-family:Calibri;"><span style="font-size:12pt;color:#1f497d;mso-themecolor:text2;mso-ascii-font-family:Calibri;mso-fareast-font-family:&#39;Times New Roman&#39;;mso-hansi-font-family:Calibri;mso-bidi-font-family:&#39;Times New Roman&#39;;">&lt;s:Envelope xmlns:s=&quot;http://schemas.xmlsoap.org/soap/envelope/&quot;&gt;&lt;s:Body&gt;&lt;UpdateResponse xmlns=&quot;http://ws.lhotka.net/WcfDataPortal&quot;&gt;&lt;UpdateResult xmlns:a=&quot;http://schemas.datacontract.org/2004/07/Csla.Server.Hosts.Mobile&quot; xmlns:i=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;&gt;&lt;a:ErrorData&gt;&lt;a:ExceptionTypeName&gt;System.AggregateException&lt;/a:ExceptionTypeName&gt;&lt;a:InnerError&gt;&lt;a:ExceptionTypeName&gt;Csla.DataPortalException&lt;/a:ExceptionTypeName&gt;&lt;a:InnerError&gt;&lt;a:ExceptionTypeName&gt;Csla.Reflection.CallMethodException&lt;/a:ExceptionTypeName&gt;&lt;a:InnerError&gt;&lt;a:ExceptionTypeName&gt;System.InvalidCastException&lt;/a:ExceptionTypeName&gt;&lt;a:InnerError i:nil=&quot;true&quot;/&gt;&lt;a:Message&gt;Specified cast is not valid.&lt;/a:Message&gt;&lt;a:Source&gt;System.Data&lt;/a:Source&gt;&lt;a:StackTrace &hellip;</span><span style="font-size:12pt;font-family:&#39;Times New Roman&#39;,&#39;serif&#39;;mso-fareast-font-family:&#39;Times New Roman&#39;;"></span></span></p>
<p style="margin:0in 0in 10pt;" class="MsoNormal"><span style="font-size:small;"><span style="font-family:Calibri;">My code is capturing the error on the client and rethrowing it:</span></span></p>
<p style="margin:0in 0in 10pt;line-height:normal;mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;" class="MsoNormal"><span style="font-size:9.5pt;font-family:Consolas;background:white;color:black;mso-fareast-font-family:&#39;Times New Roman&#39;;mso-highlight:white;"><span style="mso-spacerun:yes;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span style="font-size:9.5pt;font-family:Consolas;background:white;color:#2b91af;mso-fareast-font-family:&#39;Times New Roman&#39;;mso-highlight:white;">DateTime</span><span style="font-size:9.5pt;font-family:Consolas;background:white;color:black;mso-fareast-font-family:&#39;Times New Roman&#39;;mso-highlight:white;"> start = </span><span style="font-size:9.5pt;font-family:Consolas;background:white;color:#2b91af;mso-fareast-font-family:&#39;Times New Roman&#39;;mso-highlight:white;">DateTime</span><span style="font-size:9.5pt;font-family:Consolas;background:white;color:black;mso-fareast-font-family:&#39;Times New Roman&#39;;mso-highlight:white;">.Now;</span><span style="font-size:12pt;font-family:&#39;Times New Roman&#39;,&#39;serif&#39;;color:black;mso-fareast-font-family:&#39;Times New Roman&#39;;"></span></p>
<p style="margin:0in 0in 10pt;line-height:normal;mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;" class="MsoNormal"><span style="font-size:9.5pt;font-family:Consolas;background:white;color:black;mso-fareast-font-family:&#39;Times New Roman&#39;;mso-highlight:white;"><span style="mso-spacerun:yes;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span style="font-size:9.5pt;font-family:Consolas;background:white;color:#2b91af;mso-fareast-font-family:&#39;Times New Roman&#39;;mso-highlight:white;">TransferMonitorGetTransferSetCommand</span><span style="font-size:9.5pt;font-family:Consolas;background:white;color:black;mso-fareast-font-family:&#39;Times New Roman&#39;;mso-highlight:white;">.BeginExecute(Model.Dc.Id, Model.TransferFrom, Model.TransferTo, (o, e) =&gt;</span><span style="font-size:12pt;font-family:&#39;Times New Roman&#39;,&#39;serif&#39;;color:black;mso-fareast-font-family:&#39;Times New Roman&#39;;"></span></p>
<p style="margin:0in 0in 10pt;line-height:normal;mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;" class="MsoNormal"><span style="font-size:9.5pt;font-family:Consolas;background:white;color:black;mso-fareast-font-family:&#39;Times New Roman&#39;;mso-highlight:white;"><span style="mso-spacerun:yes;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>{</span><span style="font-size:12pt;font-family:&#39;Times New Roman&#39;,&#39;serif&#39;;color:black;mso-fareast-font-family:&#39;Times New Roman&#39;;"></span></p>
<p style="margin:0in 0in 10pt;line-height:normal;mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;" class="MsoNormal"><span style="font-size:9.5pt;font-family:Consolas;background:white;color:black;mso-fareast-font-family:&#39;Times New Roman&#39;;mso-highlight:white;"><span style="mso-spacerun:yes;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span style="font-size:9.5pt;font-family:Consolas;background:white;color:blue;mso-fareast-font-family:&#39;Times New Roman&#39;;mso-highlight:white;">if</span><span style="font-size:9.5pt;font-family:Consolas;background:white;color:black;mso-fareast-font-family:&#39;Times New Roman&#39;;mso-highlight:white;"> (e.Error != </span><span style="font-size:9.5pt;font-family:Consolas;background:white;color:blue;mso-fareast-font-family:&#39;Times New Roman&#39;;mso-highlight:white;">null</span><span style="font-size:9.5pt;font-family:Consolas;background:white;color:black;mso-fareast-font-family:&#39;Times New Roman&#39;;mso-highlight:white;">)</span><span style="font-size:12pt;font-family:&#39;Times New Roman&#39;,&#39;serif&#39;;color:black;mso-fareast-font-family:&#39;Times New Roman&#39;;"></span></p>
<p style="margin:0in 0in 10pt;line-height:normal;mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;" class="MsoNormal"><span style="font-size:9.5pt;font-family:Consolas;background:white;color:black;mso-fareast-font-family:&#39;Times New Roman&#39;;mso-highlight:white;"><span style="mso-spacerun:yes;">&nbsp; </span><span style="mso-spacerun:yes;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>{</span><span style="font-size:12pt;font-family:&#39;Times New Roman&#39;,&#39;serif&#39;;color:black;mso-fareast-font-family:&#39;Times New Roman&#39;;"></span></p>
<p style="margin:0in 0in 10pt;line-height:normal;mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;" class="MsoNormal"><span style="font-size:9.5pt;font-family:Consolas;background:white;color:black;mso-fareast-font-family:&#39;Times New Roman&#39;;mso-highlight:white;"><span style="mso-spacerun:yes;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span style="font-size:9.5pt;font-family:Consolas;background:white;color:blue;mso-fareast-font-family:&#39;Times New Roman&#39;;mso-highlight:white;">throw</span><span style="font-size:9.5pt;font-family:Consolas;background:white;color:black;mso-fareast-font-family:&#39;Times New Roman&#39;;mso-highlight:white;"> e.Error;</span><span style="font-size:12pt;font-family:&#39;Times New Roman&#39;,&#39;serif&#39;;color:black;mso-fareast-font-family:&#39;Times New Roman&#39;;"></span></p>
<p style="margin:0in 0in 10pt;line-height:normal;mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;" class="MsoNormal"><span style="font-size:9.5pt;font-family:Consolas;background:white;color:black;mso-fareast-font-family:&#39;Times New Roman&#39;;mso-highlight:white;"><span style="mso-spacerun:yes;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>}</span><span style="font-size:12pt;font-family:&#39;Times New Roman&#39;,&#39;serif&#39;;color:black;mso-fareast-font-family:&#39;Times New Roman&#39;;"></span></p>
<p style="margin:0in 0in 10pt;line-height:normal;mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;" class="MsoNormal"><span style="font-size:9.5pt;font-family:Consolas;background:white;color:black;mso-fareast-font-family:&#39;Times New Roman&#39;;mso-highlight:white;"><span style="mso-spacerun:yes;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span style="font-size:9.5pt;font-family:Consolas;background:white;color:blue;mso-fareast-font-family:&#39;Times New Roman&#39;;mso-highlight:white;">else</span><span style="font-size:12pt;font-family:&#39;Times New Roman&#39;,&#39;serif&#39;;color:black;mso-fareast-font-family:&#39;Times New Roman&#39;;"></span></p>
<p style="margin:0in 0in 10pt;line-height:normal;mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;" class="MsoNormal"><span style="font-size:9.5pt;font-family:Consolas;background:white;color:black;mso-fareast-font-family:&#39;Times New Roman&#39;;mso-highlight:white;"><span style="mso-spacerun:yes;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>{</span><span style="font-size:12pt;font-family:&#39;Times New Roman&#39;,&#39;serif&#39;;color:black;mso-fareast-font-family:&#39;Times New Roman&#39;;"></span></p>
<p style="margin:0in 0in 10pt;line-height:normal;mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;" class="MsoNormal"><span style="font-size:9.5pt;font-family:Consolas;background:white;color:black;mso-fareast-font-family:&#39;Times New Roman&#39;;mso-highlight:white;"><span style="mso-spacerun:yes;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Model.UpdateResults(e.Object.TransferSetList);</span><span style="font-size:12pt;font-family:&#39;Times New Roman&#39;,&#39;serif&#39;;color:black;mso-fareast-font-family:&#39;Times New Roman&#39;;"></span></p>
<p style="margin:0in 0in 10pt;line-height:normal;mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;" class="MsoNormal"><span style="font-size:9.5pt;font-family:Consolas;background:white;color:black;mso-fareast-font-family:&#39;Times New Roman&#39;;mso-highlight:white;"><span style="mso-spacerun:yes;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span style="font-size:9.5pt;font-family:Consolas;background:white;color:#2b91af;mso-fareast-font-family:&#39;Times New Roman&#39;;mso-highlight:white;">TimeSpan</span><span style="font-size:9.5pt;font-family:Consolas;background:white;color:black;mso-fareast-font-family:&#39;Times New Roman&#39;;mso-highlight:white;"> runTime = </span><span style="font-size:9.5pt;font-family:Consolas;background:white;color:#2b91af;mso-fareast-font-family:&#39;Times New Roman&#39;;mso-highlight:white;">DateTime</span><span style="font-size:9.5pt;font-family:Consolas;background:white;color:black;mso-fareast-font-family:&#39;Times New Roman&#39;;mso-highlight:white;">.Now - start;</span><span style="font-size:12pt;font-family:&#39;Times New Roman&#39;,&#39;serif&#39;;color:black;mso-fareast-font-family:&#39;Times New Roman&#39;;"></span></p>
<p style="margin:0in 0in 10pt;line-height:normal;mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;" class="MsoNormal"><span style="font-size:9.5pt;font-family:Consolas;background:white;color:black;mso-fareast-font-family:&#39;Times New Roman&#39;;mso-highlight:white;"><span style="mso-spacerun:yes;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>UpdateStatus(</span><span style="font-size:9.5pt;font-family:Consolas;background:white;color:blue;mso-fareast-font-family:&#39;Times New Roman&#39;;mso-highlight:white;">string</span><span style="font-size:9.5pt;font-family:Consolas;background:white;color:black;mso-fareast-font-family:&#39;Times New Roman&#39;;mso-highlight:white;">.Format(</span><span style="font-size:9.5pt;font-family:Consolas;background:white;color:#a31515;mso-fareast-font-family:&#39;Times New Roman&#39;;mso-highlight:white;">&quot;Selected </span><span style="font-size:9.5pt;font-family:Consolas;background:white;color:mediumseagreen;mso-fareast-font-family:&#39;Times New Roman&#39;;mso-highlight:white;">{0:N0}</span><span style="font-size:9.5pt;font-family:Consolas;background:white;color:#a31515;mso-fareast-font-family:&#39;Times New Roman&#39;;mso-highlight:white;"> rows In </span><span style="font-size:9.5pt;font-family:Consolas;background:white;color:mediumseagreen;mso-fareast-font-family:&#39;Times New Roman&#39;;mso-highlight:white;">{1}</span><span style="font-size:9.5pt;font-family:Consolas;background:white;color:#a31515;mso-fareast-font-family:&#39;Times New Roman&#39;;mso-highlight:white;"> minutes </span><span style="font-size:9.5pt;font-family:Consolas;background:white;color:mediumseagreen;mso-fareast-font-family:&#39;Times New Roman&#39;;mso-highlight:white;">{2}</span><span style="font-size:9.5pt;font-family:Consolas;background:white;color:#a31515;mso-fareast-font-family:&#39;Times New Roman&#39;;mso-highlight:white;">.</span><span style="font-size:9.5pt;font-family:Consolas;background:white;color:mediumseagreen;mso-fareast-font-family:&#39;Times New Roman&#39;;mso-highlight:white;">{3}</span><span style="font-size:9.5pt;font-family:Consolas;background:white;color:#a31515;mso-fareast-font-family:&#39;Times New Roman&#39;;mso-highlight:white;"> seconds&quot;</span><span style="font-size:9.5pt;font-family:Consolas;background:white;color:black;mso-fareast-font-family:&#39;Times New Roman&#39;;mso-highlight:white;">, Model.TransferSetList.Count, runTime.ToString(</span><span style="font-size:9.5pt;font-family:Consolas;background:white;color:#a31515;mso-fareast-font-family:&#39;Times New Roman&#39;;mso-highlight:white;">&quot;%m&quot;</span><span style="font-size:9.5pt;font-family:Consolas;background:white;color:black;mso-fareast-font-family:&#39;Times New Roman&#39;;mso-highlight:white;">), runTime.ToString(</span><span style="font-size:9.5pt;font-family:Consolas;background:white;color:#a31515;mso-fareast-font-family:&#39;Times New Roman&#39;;mso-highlight:white;">&quot;%s&quot;</span><span style="font-size:9.5pt;font-family:Consolas;background:white;color:black;mso-fareast-font-family:&#39;Times New Roman&#39;;mso-highlight:white;">), runTime.ToString(</span><span style="font-size:9.5pt;font-family:Consolas;background:white;color:#a31515;mso-fareast-font-family:&#39;Times New Roman&#39;;mso-highlight:white;">&quot;%f&quot;</span><span style="font-size:9.5pt;font-family:Consolas;background:white;color:black;mso-fareast-font-family:&#39;Times New Roman&#39;;mso-highlight:white;">)), </span><span style="font-size:9.5pt;font-family:Consolas;background:white;color:blue;mso-fareast-font-family:&#39;Times New Roman&#39;;mso-highlight:white;">false</span><span style="font-size:9.5pt;font-family:Consolas;background:white;color:black;mso-fareast-font-family:&#39;Times New Roman&#39;;mso-highlight:white;">);</span><span style="font-size:12pt;font-family:&#39;Times New Roman&#39;,&#39;serif&#39;;color:black;mso-fareast-font-family:&#39;Times New Roman&#39;;"></span></p>
<p style="margin:0in 0in 10pt;line-height:normal;mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;" class="MsoNormal"><span style="font-size:9.5pt;font-family:Consolas;background:white;color:black;mso-fareast-font-family:&#39;Times New Roman&#39;;mso-highlight:white;"><span style="mso-spacerun:yes;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>}</span><span style="font-size:12pt;font-family:&#39;Times New Roman&#39;,&#39;serif&#39;;color:black;mso-fareast-font-family:&#39;Times New Roman&#39;;"></span></p>
<p style="margin:0in 0in 10pt;line-height:normal;mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;" class="MsoNormal"><span style="font-size:9.5pt;font-family:Consolas;background:white;color:black;mso-fareast-font-family:&#39;Times New Roman&#39;;mso-highlight:white;"><span style="mso-spacerun:yes;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="mso-spacerun:yes;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>});</span><span style="font-size:12pt;font-family:&#39;Times New Roman&#39;,&#39;serif&#39;;color:black;mso-fareast-font-family:&#39;Times New Roman&#39;;"></span></p>
<p style="margin:0in 0in 10pt;line-height:normal;mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;" class="MsoNormal"><span style="font-size:12pt;font-family:&#39;Times New Roman&#39;,&#39;serif&#39;;color:black;mso-fareast-font-family:&#39;Times New Roman&#39;;"></span></p>
<p style="margin:0in 0in 10pt;" class="MsoNormal"><span style="font-size:small;"><span style="font-family:Calibri;">But the inner exception is NULL and e.Error.Message is &quot;One or more errors occurred.&quot; The stack trace is only SystemRuntime.ComplierServices.AsyncServices(ThrowAsync&gt;b_O(Object state).&nbsp;</span></span></p>
<p style="margin:0in 0in 10pt;" class="MsoNormal"><span style="font-size:small;"><span style="font-family:Calibri;">Todd</span></span></p>
<p style="margin:0in 0in 10pt;" class="MsoNormal"><span style="font-size:small;font-family:Calibri;">&nbsp;</span></p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>thaehn replied on Wednesday, April 16, 2014</h2><p style="margin:0in 0in 10pt;" class="MsoNormal"><span style="font-size:small;"><span style="font-family:Calibri;">The original exception is being returned back to the client as shown in this captured message:</span></span></p>
<p style="margin:0in 0in 0pt;line-height:normal;mso-layout-grid-align:none;" class="MsoNormal"><span style="font-size:8.5pt;font-family:&#39;Microsoft Sans Serif&#39;,&#39;sans-serif&#39;;">&lt;s:Envelope xmlns:s=&quot;http://schemas.xmlsoap.org/soap/envelope/&quot;&gt;&lt;s:Body&gt;&lt;UpdateResponse xmlns=&quot;http://ws.lhotka.net/WcfDataPortal&quot;&gt;&lt;UpdateResult xmlns:a=&quot;http://schemas.datacontract.org/2004/07/Csla.Server.Hosts.Mobile&quot; xmlns:i=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;&gt;&lt;a:ErrorData&gt;&lt;a:ExceptionTypeName&gt;System.AggregateException&lt;/a:ExceptionTypeName&gt;&lt;a:InnerError&gt;&lt;a:ExceptionTypeName&gt;Csla.DataPortalException&lt;/a:ExceptionTypeName&gt;&lt;a:InnerError&gt;&lt;a:ExceptionTypeName&gt;Csla.Reflection.CallMethodException&lt;/a:ExceptionTypeName&gt;&lt;a:InnerError&gt;&lt;a:ExceptionTypeName&gt;System.InvalidCastException&lt;/a:ExceptionTypeName&gt;&lt;a:InnerError i:nil=&quot;true&quot;/&gt;&lt;a:Message&gt;Unable to cast object of type &#39;System.DateTime&#39; to type &#39;System.String&#39;.&lt;/a:Message&gt;&lt;a:Source&gt;System.Data&lt;/a:Source&gt;&lt;a:StackTrace&gt;<span style="mso-spacerun:yes;">&nbsp;&nbsp; </span>at System.Data.SqlClient.SqlBuffer.get_String()&amp;#xD&hellip;</span></p>
<p style="margin:0in 0in 10pt;" class="MsoNormal"><span style="font-size:small;font-family:Calibri;">&nbsp;</span></p>
<p style="margin:0in 0in 10pt;" class="MsoNormal"><span style="font-size:small;"><span style="font-family:Calibri;">But the error that is coming back in the code:</span></span></p>
<p style="margin:0in 0in 0pt;line-height:normal;mso-layout-grid-align:none;" class="MsoNormal"><span style="font-size:9.5pt;font-family:Consolas;background:white;color:black;mso-highlight:white;"><span style="mso-spacerun:yes;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>UpdateStatus(</span><span style="font-size:9.5pt;font-family:Consolas;background:white;color:#a31515;mso-highlight:white;">&quot;Generating Commercial Invoice&quot;</span><span style="font-size:9.5pt;font-family:Consolas;background:white;color:black;mso-highlight:white;">, </span><span style="font-size:9.5pt;font-family:Consolas;background:white;color:blue;mso-highlight:white;">true</span><span style="font-size:9.5pt;font-family:Consolas;background:white;color:black;mso-highlight:white;">);</span></p>
<p style="margin:0in 0in 0pt;line-height:normal;mso-layout-grid-align:none;" class="MsoNormal"><span style="font-size:9.5pt;font-family:Consolas;background:white;color:black;mso-highlight:white;"><span style="mso-spacerun:yes;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span style="font-size:9.5pt;font-family:Consolas;background:white;color:#2b91af;mso-highlight:white;">TransferMonitorCommercialInvoiceCommand</span><span style="font-size:9.5pt;font-family:Consolas;background:white;color:black;mso-highlight:white;">.BeginExecute(</span></p>
<p style="margin:0in 0in 0pt;line-height:normal;mso-layout-grid-align:none;" class="MsoNormal"><span style="font-size:9.5pt;font-family:Consolas;background:white;color:black;mso-highlight:white;"><span style="mso-spacerun:yes;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Model.Id,</span></p>
<p style="margin:0in 0in 0pt;line-height:normal;mso-layout-grid-align:none;" class="MsoNormal"><span style="font-size:9.5pt;font-family:Consolas;background:white;color:black;mso-highlight:white;"><span style="mso-spacerun:yes;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>(o, e) =&gt;</span></p>
<p style="margin:0in 0in 0pt;line-height:normal;mso-layout-grid-align:none;" class="MsoNormal"><span style="font-size:9.5pt;font-family:Consolas;background:white;color:black;mso-highlight:white;"><span style="mso-spacerun:yes;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>{</span></p>
<p style="margin:0in 0in 0pt;line-height:normal;mso-layout-grid-align:none;" class="MsoNormal"><span style="font-size:9.5pt;font-family:Consolas;background:white;color:black;mso-highlight:white;"><span style="mso-spacerun:yes;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span style="font-size:9.5pt;font-family:Consolas;background:white;color:blue;mso-highlight:white;">if</span><span style="font-size:9.5pt;font-family:Consolas;background:white;color:black;mso-highlight:white;"> (e.Error != </span><span style="font-size:9.5pt;font-family:Consolas;background:white;color:blue;mso-highlight:white;">null</span><span style="font-size:9.5pt;font-family:Consolas;background:white;color:black;mso-highlight:white;">)</span></p>
<p style="margin:0in 0in 0pt;line-height:normal;mso-layout-grid-align:none;" class="MsoNormal"><span style="font-size:9.5pt;font-family:Consolas;background:white;color:black;mso-highlight:white;"><span style="mso-spacerun:yes;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>{</span></p>
<p style="margin:0in 0in 0pt;line-height:normal;mso-layout-grid-align:none;" class="MsoNormal"><span style="font-size:9.5pt;font-family:Consolas;background:white;color:black;mso-highlight:white;"><span style="mso-spacerun:yes;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>UpdateStatus(</span><span style="font-size:9.5pt;font-family:Consolas;background:white;color:blue;mso-highlight:white;">string</span><span style="font-size:9.5pt;font-family:Consolas;background:white;color:black;mso-highlight:white;">.Empty, </span><span style="font-size:9.5pt;font-family:Consolas;background:white;color:blue;mso-highlight:white;">false</span><span style="font-size:9.5pt;font-family:Consolas;background:white;color:black;mso-highlight:white;">);</span></p>
<p style="margin:0in 0in 0pt;line-height:normal;mso-layout-grid-align:none;" class="MsoNormal"><span style="font-size:9.5pt;font-family:Consolas;background:white;color:black;mso-highlight:white;"><span style="mso-spacerun:yes;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span style="font-size:9.5pt;font-family:Consolas;background:white;color:blue;mso-highlight:white;">throw</span><span style="font-size:9.5pt;font-family:Consolas;background:white;color:black;mso-highlight:white;"> e.Error;</span></p>
<p style="margin:0in 0in 0pt;line-height:normal;mso-layout-grid-align:none;" class="MsoNormal"><span style="font-size:9.5pt;font-family:Consolas;background:white;color:black;mso-highlight:white;"><span style="mso-spacerun:yes;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>}</span></p>
<p style="margin:0in 0in 0pt;line-height:normal;mso-layout-grid-align:none;" class="MsoNormal"><span style="font-size:9.5pt;font-family:Consolas;background:white;color:black;mso-highlight:white;"><span style="mso-spacerun:yes;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span style="font-size:9.5pt;font-family:Consolas;background:white;color:blue;mso-highlight:white;">else</span><span style="font-size:9.5pt;font-family:Consolas;background:white;color:black;mso-highlight:white;"></span></p>
<p style="margin:0in 0in 0pt;line-height:normal;mso-layout-grid-align:none;" class="MsoNormal"><span style="font-size:9.5pt;font-family:Consolas;background:white;color:black;mso-highlight:white;"><span style="mso-spacerun:yes;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>{</span></p>
<p style="margin:0in 0in 0pt;line-height:normal;mso-layout-grid-align:none;" class="MsoNormal"><span style="font-size:9.5pt;font-family:Consolas;background:white;color:black;mso-highlight:white;"><span style="mso-spacerun:yes;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span style="font-size:9.5pt;font-family:Consolas;background:white;color:#2b91af;mso-highlight:white;">Workbook</span><span style="font-size:9.5pt;font-family:Consolas;background:white;color:black;mso-highlight:white;"> workbook = </span><span style="font-size:9.5pt;font-family:Consolas;background:white;color:blue;mso-highlight:white;">new</span><span style="font-size:9.5pt;font-family:Consolas;background:white;color:black;mso-highlight:white;"> </span><span style="font-size:9.5pt;font-family:Consolas;background:white;color:#2b91af;mso-highlight:white;">Workbook</span><span style="font-size:9.5pt;font-family:Consolas;background:white;color:black;mso-highlight:white;">();</span></p>
<p style="margin:0in 0in 0pt;line-height:normal;mso-layout-grid-align:none;" class="MsoNormal"><span style="font-size:9.5pt;font-family:Consolas;background:white;color:black;mso-highlight:white;"><span style="mso-spacerun:yes;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span style="font-size:9.5pt;font-family:Consolas;background:white;color:#2b91af;mso-highlight:white;">Worksheet</span><span style="font-size:9.5pt;font-family:Consolas;background:white;color:black;mso-highlight:white;"> worksheet = workbook.Worksheets.Add();</span></p>
<p style="margin:0in 0in 0pt;line-height:normal;mso-layout-grid-align:none;" class="MsoNormal"><span style="font-size:9.5pt;font-family:Consolas;background:white;color:black;mso-highlight:white;"><span style="mso-tab-count:4;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>&hellip;</span></p>
<p style="margin:0in 0in 0pt;line-height:normal;mso-layout-grid-align:none;" class="MsoNormal"><span style="font-size:9.5pt;font-family:Consolas;background:white;color:black;mso-highlight:white;"><span style="mso-spacerun:yes;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>}</span></p>
<p style="margin:0in 0in 0pt;line-height:normal;mso-layout-grid-align:none;" class="MsoNormal"><span style="font-size:9.5pt;font-family:Consolas;background:white;color:black;mso-highlight:white;"><span style="mso-spacerun:yes;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>});</span></p>
<p style="margin:0in 0in 10pt;" class="MsoNormal"><span style="font-size:small;font-family:Calibri;">&nbsp;</span></p>
<p style="margin:0in 0in 10pt;" class="MsoNormal"><span style="font-size:small;"><span style="font-family:Calibri;">Is this:</span></span></p>
<p style="margin:0in 0in 10pt;" class="MsoNormal"><span style="font-size:small;"><span style="font-family:Calibri;">&ldquo;One or more errors occurred.&rdquo; With a stack trace of System.Runtime.CompilerServices.AsyncServices.&lt;ThrowAsync&gt;b__0(Object state).</span></span></p>
<p style="margin:0in 0in 10pt;" class="MsoNormal"><span style="font-size:small;"><span style="font-family:Calibri;">The inner exception is NULL.</span></span></p>
<p style="margin:0in 0in 10pt;" class="MsoNormal"><span style="font-size:small;"><span style="font-family:Calibri;">Todd</span></span></p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>thaehn replied on Wednesday, April 30, 2014</h2><p>This appears to be a bug in CSLA&#39;s async implementation.&nbsp; It worked fine in CSLA 4.</p>
<p>Todd</p></div><div style='padding:0 15 3 15;background-color:lightgreen'><h2>RockfordLhotka replied on Saturday, May 03, 2014</h2><p>Not a bug, a feature :)</p>
<p>It turns out that when you await a method that numerous things could occur within that method - even in parallel - and so it is possible for multiple exceptions to be returned.</p>
<p>The only correct way to return exceptions from an async method is with an async exception - which is really a collection of exceptions that may have been raised by the various tasks that ran in the method.</p>
<p>In simple code (most code) this will be a collection of one element - which is the actual exception you are looking for.</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>thaehn replied on Monday, May 05, 2014</h2><p>Rocky,</p>
<p>Do you have an example I could use?&nbsp; I am mostly interested in errors returned from SQL (In my example the DBA changed the type of a column from string to date which caused a cast issue because I was expecting a string which I was casting to a date.</p>
<p>Todd</p></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>thaehn replied on Monday, May 04, 2015</h2><p>I updated to 4.5.7 and this &quot;feature&quot; went away.&nbsp; I am getting error messages back to Silverlight from the data portal again.&nbsp; </p></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
