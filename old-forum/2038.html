<html><header><title>ApplicationContext.LocalContext[&quot;cn&quot;] = cn;</title></header><body><div style='float:right'><a href='http://cslanet.com'><img src='https://github.com/MarimerLLC/csla/raw/master/Support/Logos/csla%20win8_compact_s.png'/></a></div><p><h1>ApplicationContext.LocalContext[&quot;cn&quot;] = cn;</h1><span style='font-size:small'>Old forum URL: forums.lhotka.net/forums/t/2038.aspx</span></p><hr><div style='padding:0 15 3 15;background-color:powderblue'><h2>FreeAsInBeer posted on Wednesday, December 27, 2006</h2>I've been looking at the ProjectTracker demo to try and understand the models Rocky uses, and I've come across this interesting thing.<br><br>The DataPortal_Update() method in Resource.cs has this bit of code;<br><br><blockquote>ApplicationContext.LocalContext["cn"] = cn;<br><br></blockquote>But Project.cs's DataPortal_Update() method does not. <br><br>Why the difference? I thought perhaps one was RunLocal (is that the CSLA term?), but it doesnt seem that way. <br><br>Maybe it's just a case of Project.cs not getting updated with that bit of code when the v2.1 demo was done?<br></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>RockfordLhotka replied on Thursday, December 28, 2006</h2><P>It is intentional. As an author, I am stuck in this situation where I need to show multiple ways to solve the same problem in order to educate and inspire people to use the right solution for their particular scenario.</P>
<P>Project uses one approach when talking to the database, and Resource uses a different approach. Also notice that Project uses a Guid id, while Resource uses an Integer id&nbsp;- again, this is an arbitrary difference so I can illustrate two techniques to accomplish essentially the same goal.</P>
<P>The use of LocalContext in Resource is new for 2.1, but even in 2.0 Project and Resource worked differently.</P>
<P>It is important to note that Project is actually not ideal due to the unfortunate way System.Transactions works. Project and its children open many db connections, while ultimately forces the DTC to be used by System.Transactions (which is a flaw in Microsoft's implementation imo).</P>
<P>Resource is a better implementation in both 2.0 and 2.1, because it uses a single db connection and avoids the use of the DTC.</P>
<P>However, Project is a perfectly good implementation if you use Enterprise Services transactions...</P>
<P>It is all a series of tradeoffs...</P></div><div style='padding:0 15 3 15;background-color:powderblue'><h2>FreeAsInBeer replied on Thursday, December 28, 2006</h2><BLOCKQUOTE><div><img src="/Themes/default/images/icon-quote.gif"> <strong>RockfordLhotka:</strong></div><div>It is all a series of tradeoffs...</div></BLOCKQUOTE><br><br>hey, what isnt? Every silly thing I do seems to have a thousand pros and a thousand cons! :)<br><br>Thanks for the reply. I'll have a closer look at things now, and keep in mind what you've said. <br><br>FaiB<br></div><p style='font-size:small'>Copyright (c) Marimer LLC</body></html>
